import{a as o,b as u,c as b,d as f,e as l,j as p,k as m,l as h,m as D}from"./chunk-ZMUGLBPJ.js";import{G as g,H as d}from"./chunk-KMKEUFOK.js";import{Q as c,la as a}from"./chunk-WYX5KYRP.js";import{a as n}from"./chunk-7CGTOI24.js";var y=class r{firestore;dogsSignal=a([]);unsubscribe=null;constructor(){let e;try{e=d()}catch{e=g(D.firebase)}this.firestore=b(e)}subscribeToUserDogs(e){this.unsubscribe&&this.unsubscribe();let s=o(this.firestore,"dogs"),v=f(s,l("userId","==",e));this.unsubscribe=h(v,t=>{let S=t.docs.map(i=>n({id:i.id},i.data()));this.dogsSignal.set(S)},t=>{console.error("Error reading dogs:",t)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getDogs(){return this.dogsSignal}async addDog(e){let s=o(this.firestore,"dogs");return await m(s,e)}async deleteDog(e){let s=u(this.firestore,`dogs/${e}`);return await p(s)}static \u0275fac=function(s){return new(s||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{y as a};
