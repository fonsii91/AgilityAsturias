var pj=Object.defineProperty,mj=Object.defineProperties;var gj=Object.getOwnPropertyDescriptors;var lm=Object.getOwnPropertySymbols;var DR=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable;var SR=(n,e,t)=>e in n?pj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})DR.call(e,t)&&SR(n,t,e[t]);if(lm)for(var t of lm(e))AR.call(e,t)&&SR(n,t,e[t]);return n},ae=(n,e)=>mj(n,gj(e));var So=(n,e)=>{var t={};for(var r in n)DR.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&lm)for(var r of lm(n))e.indexOf(r)<0&&AR.call(n,r)&&(t[r]=n[r]);return t};var wn=null,dm=!1,tI=1,yj=null,Nn=Symbol("SIGNAL");function be(n){let e=wn;return wn=n,e}function fm(){return wn}var Ou={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xd(n){if(dm)throw new Error("");if(wn===null)return;wn.consumerOnSignalRead(n);let e=wn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=wn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:wn.producers,t!==void 0&&t.producer===n)){wn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===wn&&(!r||vj(i,wn)))return;let s=Lu(wn),o={producer:n,consumer:wn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};wn.producersTail=o,e!==void 0?e.nextProducer=o:wn.producers=o,s&&kR(n,o)}function RR(){tI++}function nI(n){if(!(Lu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===tI)){if(!n.producerMustRecompute(n)&&!eh(n)){eI(n);return}n.producerRecomputeValue(n),eI(n)}}function rI(n){if(n.consumers===void 0)return;let e=dm;dm=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||_j(r)}}finally{dm=e}}function iI(){return wn?.consumerAllowSignalWrites!==!1}function _j(n){n.dirty=!0,rI(n),n.consumerMarkedDirty?.(n)}function eI(n){n.dirty=!1,n.lastCleanEpoch=tI}function Fu(n){return n&&PR(n),be(n)}function PR(n){n.producersTail=void 0,n.recomputing=!0}function Zd(n,e){be(e),n&&NR(n)}function NR(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Lu(n))do t=sI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function eh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(nI(t),r!==t.version))return!0}return!1}function Ba(n){if(Lu(n)){let e=n.producers;for(;e!==void 0;)e=sI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function kR(n,e){let t=n.consumersTail,r=Lu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)kR(i.producer,i)}function sI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Lu(e)){let s=e.producers;for(;s!==void 0;)s=sI(s)}return t}function Lu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function oI(n){yj?.(n)}function vj(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function aI(n,e){return Object.is(n,e)}function pm(n,e){let t=Object.create(Ej);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(nI(t),Xd(t),t.value===hm)throw t.error;return t.value};return r[Nn]=t,oI(t),r}var XE=Symbol("UNSET"),ZE=Symbol("COMPUTING"),hm=Symbol("ERRORED"),Ej=ae(U({},Ou),{value:XE,dirty:!0,error:null,equal:aI,kind:"computed",producerMustRecompute(n){return n.value===XE||n.value===ZE},producerRecomputeValue(n){if(n.value===ZE)throw new Error("");let e=n.value;n.value=ZE;let t=Fu(n),r,i=!1;try{r=n.computation(),be(null),i=e!==XE&&e!==hm&&r!==hm&&n.equal(e,r)}catch(s){r=hm,n.error=s}finally{Zd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Ij(){throw new Error}var MR=Ij;function xR(n){MR(n)}function cI(n){MR=n}var wj=null;function uI(n,e){let t=Object.create(mm);t.value=n,e!==void 0&&(t.equal=e);let r=()=>OR(t);return r[Nn]=t,oI(t),[r,o=>th(t,o),o=>FR(t,o)]}function OR(n){return Xd(n),n.value}function th(n,e){iI()||xR(n),n.equal(n.value,e)||(n.value=e,Tj(n))}function FR(n,e){iI()||xR(n),th(n,e(n.value))}var mm=ae(U({},Ou),{equal:aI,value:void 0,kind:"signal"});function Tj(n){n.version++,RR(),rI(n),wj?.(n)}function lI(n){let e=be(null);try{return n()}finally{be(e)}}var dI=ae(U({},Ou),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function hI(n){if(n.dirty=!1,n.version>0&&!eh(n))return;n.version++;let e=Fu(n);try{n.cleanup(),n.fn()}finally{Zd(n,e)}}function Ce(n){return typeof n=="function"}function Vu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gm=Vu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ja(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Kt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ce(r))try{r()}catch(s){e=s instanceof gm?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{LR(s)}catch(o){e=e??[],o instanceof gm?e=[...e,...o.errors]:e.push(o)}}if(e)throw new gm(e)}}add(e){var t;if(e&&e!==this)if(this.closed)LR(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ja(t,e)}remove(e){let{_finalizers:t}=this;t&&ja(t,e),e instanceof n&&e._removeParent(this)}};Kt.EMPTY=(()=>{let n=new Kt;return n.closed=!0,n})();var fI=Kt.EMPTY;function ym(n){return n instanceof Kt||n&&"closed"in n&&Ce(n.remove)&&Ce(n.add)&&Ce(n.unsubscribe)}function LR(n){Ce(n)?n():n.unsubscribe()}var Br={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Uu={setTimeout(n,e,...t){let{delegate:r}=Uu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Uu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _m(n){Uu.setTimeout(()=>{let{onUnhandledError:e}=Br;if(e)e(n);else throw n})}function $a(){}var VR=pI("C",void 0,void 0);function UR(n){return pI("E",void 0,n)}function BR(n){return pI("N",n,void 0)}function pI(n,e,t){return{kind:n,value:e,error:t}}var Ha=null;function Bu(n){if(Br.useDeprecatedSynchronousErrorHandling){let e=!Ha;if(e&&(Ha={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ha;if(Ha=null,t)throw r}}else n()}function jR(n){Br.useDeprecatedSynchronousErrorHandling&&Ha&&(Ha.errorThrown=!0,Ha.error=n)}var qa=class extends Kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ym(e)&&e.add(this)):this.destination=Sj}static create(e,t,r){return new ju(e,t,r)}next(e){this.isStopped?gI(BR(e),this):this._next(e)}error(e){this.isStopped?gI(UR(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gI(VR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bj=Function.prototype.bind;function mI(n,e){return bj.call(n,e)}var yI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vm(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vm(r)}else vm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vm(t)}}},ju=class extends qa{constructor(e,t,r){super();let i;if(Ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Br.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mI(e.next,s),error:e.error&&mI(e.error,s),complete:e.complete&&mI(e.complete,s)}):i=e}this.destination=new yI(i)}};function vm(n){Br.useDeprecatedSynchronousErrorHandling?jR(n):_m(n)}function Cj(n){throw n}function gI(n,e){let{onStoppedNotification:t}=Br;t&&Uu.setTimeout(()=>t(n,e))}var Sj={closed:!0,next:$a,error:Cj,complete:$a};var $u=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jr(n){return n}function _I(...n){return vI(n)}function vI(n){return n.length===0?jr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ee=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Aj(t)?t:new ju(t,r,i);return Bu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=$R(r),new r((i,s)=>{let o=new ju({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[$u](){return this}pipe(...t){return vI(t)(this)}toPromise(t){return t=$R(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function $R(n){var e;return(e=n??Br.Promise)!==null&&e!==void 0?e:Promise}function Dj(n){return n&&Ce(n.next)&&Ce(n.error)&&Ce(n.complete)}function Aj(n){return n&&n instanceof qa||Dj(n)&&ym(n)}function Rj(n){return Ce(n?.lift)}function Xe(n){return e=>{if(Rj(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ze(n,e,t,r,i){return new EI(n,e,t,r,i)}var EI=class extends qa{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var HR=Vu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var wt=(()=>{class n extends Ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Em(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new HR}next(t){Bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?fI:(this.currentObservers=null,s.push(t),new Kt(()=>{this.currentObservers=null,ja(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Ee;return t.source=this,t}}return n.create=(e,t)=>new Em(e,t),n})(),Em=class extends wt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:fI}};var xt=class extends wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var II={now(){return(II.delegate||Date).now()},delegate:void 0};var Im=class extends Kt{constructor(e,t){super()}schedule(e,t=0){return this}};var nh={setInterval(n,e,...t){let{delegate:r}=nh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=nh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Hu=class extends Im{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return nh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&nh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ja(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var qu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};qu.now=II.now;var zu=class extends qu{constructor(e,t=qu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wI=new zu(Hu);var wm=class extends Hu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Tm=class extends zu{};var TI=new Tm(wm);var on=new Ee(n=>n.complete());function qR(n){return n&&Ce(n.schedule)}function zR(n){return n[n.length-1]}function bm(n){return Ce(zR(n))?n.pop():void 0}function Do(n){return qR(zR(n))?n.pop():void 0}function bI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function WR(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(m){o(m)}}function c(h){try{d(r.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function GR(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function za(n){return this instanceof za?(this.v=n,this):new za(n)}function KR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(S){return function(R){return Promise.resolve(R).then(S,m)}}function a(S,R){r[S]&&(i[S]=function(P){return new Promise(function(M,H){s.push([S,P,M,H])>1||c(S,P)})},R&&(i[S]=R(i[S])))}function c(S,R){try{d(r[S](R))}catch(P){I(s[0][3],P)}}function d(S){S.value instanceof za?Promise.resolve(S.value.v).then(h,m):I(s[0][2],S)}function h(S){c("next",S)}function m(S){c("throw",S)}function I(S,R){S(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function QR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof GR=="function"?GR(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Cm=n=>n&&typeof n.length=="number"&&typeof n!="function";function Sm(n){return Ce(n?.then)}function Dm(n){return Ce(n[$u])}function Am(n){return Symbol.asyncIterator&&Ce(n?.[Symbol.asyncIterator])}function Rm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Pj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pm=Pj();function Nm(n){return Ce(n?.[Pm])}function km(n){return KR(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield za(t.read());if(i)return yield za(void 0);yield yield za(r)}}finally{t.releaseLock()}})}function Mm(n){return Ce(n?.getReader)}function Ot(n){if(n instanceof Ee)return n;if(n!=null){if(Dm(n))return Nj(n);if(Cm(n))return kj(n);if(Sm(n))return Mj(n);if(Am(n))return YR(n);if(Nm(n))return xj(n);if(Mm(n))return Oj(n)}throw Rm(n)}function Nj(n){return new Ee(e=>{let t=n[$u]();if(Ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kj(n){return new Ee(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Mj(n){return new Ee(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_m)})}function xj(n){return new Ee(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function YR(n){return new Ee(e=>{Fj(n,e).catch(t=>e.error(t))})}function Oj(n){return YR(km(n))}function Fj(n,e){var t,r,i,s;return WR(this,void 0,void 0,function*(){try{for(t=QR(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Vn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ao(n,e=0){return Xe((t,r)=>{t.subscribe(Ze(r,i=>Vn(r,n,()=>r.next(i),e),()=>Vn(r,n,()=>r.complete(),e),i=>Vn(r,n,()=>r.error(i),e)))})}function Ro(n,e=0){return Xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function JR(n,e){return Ot(n).pipe(Ro(e),Ao(e))}function XR(n,e){return Ot(n).pipe(Ro(e),Ao(e))}function ZR(n,e){return new Ee(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function eP(n,e){return new Ee(t=>{let r;return Vn(t,e,()=>{r=n[Pm](),Vn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ce(r?.return)&&r.return()})}function xm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ee(t=>{Vn(t,e,()=>{let r=n[Symbol.asyncIterator]();Vn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tP(n,e){return xm(km(n),e)}function nP(n,e){if(n!=null){if(Dm(n))return JR(n,e);if(Cm(n))return ZR(n,e);if(Sm(n))return XR(n,e);if(Am(n))return xm(n,e);if(Nm(n))return eP(n,e);if(Mm(n))return tP(n,e)}throw Rm(n)}function Ft(n,e){return e?nP(n,e):Ot(n)}function Oe(...n){let e=Do(n);return Ft(n,e)}function CI(n,e){let t=Ce(n)?n:()=>n,r=i=>i.error(t());return new Ee(e?i=>e.schedule(r,0,i):r)}function rh(n){return!!n&&(n instanceof Ee||Ce(n.lift)&&Ce(n.subscribe))}var Ga=Vu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function We(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Lj}=Array;function Vj(n,e){return Lj(e)?n(...e):n(e)}function Om(n){return We(e=>Vj(n,e))}var{isArray:Uj}=Array,{getPrototypeOf:Bj,prototype:jj,keys:$j}=Object;function Fm(n){if(n.length===1){let e=n[0];if(Uj(e))return{args:e,keys:null};if(Hj(e)){let t=$j(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Hj(n){return n&&typeof n=="object"&&Bj(n)===jj}function Lm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function SI(...n){let e=Do(n),t=bm(n),{args:r,keys:i}=Fm(n);if(r.length===0)return Ft([],e);let s=new Ee(qj(r,e,i?o=>Lm(i,o):jr));return t?s.pipe(Om(t)):s}function qj(n,e,t=jr){return r=>{rP(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)rP(e,()=>{let d=Ft(n[c],e),h=!1;d.subscribe(Ze(r,m=>{s[c]=m,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function rP(n,e,t){n?Vn(t,n,e):e()}function iP(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,m=!1,I=()=>{m&&!c.length&&!d&&e.complete()},S=P=>d<r?R(P):c.push(P),R=P=>{s&&e.next(P),d++;let M=!1;Ot(t(P,h++)).subscribe(Ze(e,H=>{i?.(H),s?S(H):e.next(H)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;c.length&&d<r;){let H=c.shift();o?Vn(e,o,()=>R(H)):R(H)}I()}catch(H){e.error(H)}}))};return n.subscribe(Ze(e,S,()=>{m=!0,I()})),()=>{a?.()}}function kn(n,e,t=1/0){return Ce(e)?kn((r,i)=>We((s,o)=>e(r,s,i,o))(Ot(n(r,i))),t):(typeof e=="number"&&(t=e),Xe((r,i)=>iP(r,i,n,t)))}function sP(n=1/0){return kn(jr,n)}function oP(){return sP(1)}function Gu(...n){return oP()(Ft(n,Do(n)))}function ih(n){return new Ee(e=>{Ot(n()).subscribe(e)})}function DI(...n){let e=bm(n),{args:t,keys:r}=Fm(n),i=new Ee(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let m=!1;Ot(t[h]).subscribe(Ze(s,I=>{m||(m=!0,d--),a[h]=I},()=>c--,void 0,()=>{(!c||!m)&&(d||s.next(r?Lm(r,a):a),s.complete())}))}});return e?i.pipe(Om(e)):i}var fs=new Ee($a);function Tn(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>n.call(e,s,i++)&&r.next(s)))})}function sh(n){return Xe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ze(t,void 0,void 0,o=>{s=Ot(n(o,sh(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Vm(n,e){return Ce(e)?kn(n,e,1):kn(n,1)}function aP(n){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function an(n){return n<=0?()=>on:Xe((e,t)=>{let r=0;e.subscribe(Ze(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cP(n=zj){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zj(){return new Ga}function AI(n){return Xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ps(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tn((i,s)=>n(i,s,r)):jr,an(1),t?aP(e):cP(()=>new Ga))}function Um(n){return n<=0?()=>on:Xe((e,t)=>{let r=[];e.subscribe(Ze(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bm(n){return Tn((e,t)=>n<=t)}function RI(...n){let e=Do(n);return Xe((t,r)=>{(e?Gu(n,t,e):Gu(n,t)).subscribe(r)})}function Un(n,e){return Xe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ze(r,c=>{i?.unsubscribe();let d=0,h=s++;Ot(n(c,h)).subscribe(i=Ze(r,m=>r.next(e?e(c,m,h,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function oh(n){return Xe((e,t)=>{Ot(n).subscribe(Ze(t,()=>t.complete(),$a)),!t.closed&&e.subscribe(t)})}function vi(n,e,t){let r=Ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?Xe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ze(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):jr}var PI;function jm(){return PI}function Ei(n){let e=PI;return PI=n,e}var uP=Symbol("NotFound");function Wu(n){return n===uP||n?.name==="\u0275NotFound"}var Ka=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},qI=new Ka("21.1.2");var Km="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super(xo(e,t)),this.code=e}};function Gj(n){return`NG0${Math.abs(n)}`}function xo(n,e){return`${Gj(n)}${e?": "+e:""}`}var $r=globalThis;function et(n){for(let e in n)if(n[e]===et)return e;throw Error("")}function pP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gs(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(gs).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function zI(n,e){return n?e?`${n} ${e}`:n:e||""}var Wj=et({__forward_ref__:et});function _s(n){return n.__forward_ref__=_s,n.toString=function(){return gs(this())},n}function cn(n){return GI(n)?n():n}function GI(n){return typeof n=="function"&&n.hasOwnProperty(Wj)&&n.__forward_ref__===_s}function te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tr(n){return{providers:n.providers||[],imports:n.imports||[]}}function fh(n){return Kj(n,Qm)}function WI(n){return fh(n)!==null}function Kj(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Qj(n){let e=n?.[Qm]??null;return e||null}function kI(n){return n&&n.hasOwnProperty(Hm)?n[Hm]:null}var Qm=et({\u0275prov:et}),Hm=et({\u0275inj:et}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KI(n){return n&&!!n.\u0275providers}var QI=et({\u0275cmp:et}),YI=et({\u0275dir:et}),JI=et({\u0275pipe:et}),XI=et({\u0275mod:et}),ch=et({\u0275fac:et}),Xa=et({__NG_ELEMENT_ID__:et}),lP=et({__NG_ENV_ID__:et});function ZI(n){return Ym(n,"@NgModule"),n[XI]||null}function Oo(n){return Ym(n,"@Component"),n[QI]||null}function ew(n){return Ym(n,"@Directive"),n[YI]||null}function mP(n){return Ym(n,"@Pipe"),n[JI]||null}function Ym(n,e){if(n==null)throw new q(-919,!1)}function Qu(n){return typeof n=="string"?n:n==null?"":String(n)}var gP=et({ngErrorCode:et}),Yj=et({ngErrorMessage:et}),Jj=et({ngTokenPath:et});function tw(n,e){return yP("",-200,e)}function Jm(n,e){throw new q(-201,!1)}function yP(n,e,t){let r=new q(e,n);return r[gP]=e,r[Yj]=n,t&&(r[Jj]=t),r}function Xj(n){return n[gP]}var MI;function _P(){return MI}function Mn(n){let e=MI;return MI=n,e}function nw(n,e,t){let r=fh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Jm(n,"")}var Zj={},Wa=Zj,xI="__NG_DI_FLAG__",OI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Qa(t)||0;try{return this.injector.get(e,r&8?null:Wa,r)}catch(i){if(Wu(i))return i;throw i}}};function e4(n,e=0){let t=jm();if(t===void 0)throw new q(-203,!1);if(t===null)return nw(n,void 0,e);{let r=t4(e),i=t.retrieve(n,r);if(Wu(i)){if(r.optional)return null;throw i}return i}}function fe(n,e=0){return(_P()||e4)(cn(n),e)}function B(n,e){return fe(n,Qa(e))}function Qa(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function t4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function FI(n){let e=[];for(let t=0;t<n.length;t++){let r=cn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=n4(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(fe(i,s))}else e.push(fe(r))}return e}function vP(n,e){return n[xI]=e,n.prototype[xI]=e,n}function n4(n){return n[xI]}function Po(n,e){let t=n.hasOwnProperty(ch);return t?n[ch]:null}function Xm(n,e){n.forEach(t=>Array.isArray(t)?Xm(t,e):e(t))}function rw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ph(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function EP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function IP(n,e,t){let r=Yu(n,e);return r>=0?n[r|1]=t:(r=~r,EP(n,r,e,t)),r}function Zm(n,e){let t=Yu(n,e);if(t>=0)return n[t|1]}function Yu(n,e){return r4(n,e,1)}function r4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Fo={},er=[],Za=new Z(""),iw=new Z("",-1),sw=new Z(""),uh=class{get(e,t=Wa){if(t===Wa){let i=yP("",-201);throw i.name="\u0275NotFound",i}return t}};function ln(n){return{\u0275providers:n}}function wP(n){return ln([{provide:Za,multi:!0,useValue:n}])}function TP(...n){return{\u0275providers:ow(!0,n),\u0275fromNgModule:!0}}function ow(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Xm(e,o=>{let a=o;qm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bP(i,s),t}function bP(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];aw(i,s=>{e(s,r)})}}function qm(n,e,t,r){if(n=cn(n),!n)return!1;let i=null,s=kI(n),o=!s&&Oo(n);if(!s&&!o){let c=n.ngModule;if(s=kI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)qm(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;Xm(s.imports,h=>{qm(h,e,t,r)&&(d||=[],d.push(h))}),d!==void 0&&bP(d,e)}if(!a){let d=Po(i)||(()=>new i);e({provide:i,useFactory:d,deps:er},i),e({provide:sw,useValue:i,multi:!0},i),e({provide:Za,useValue:()=>fe(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;aw(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function aw(n,e){for(let t of n)KI(t)&&(t=t.\u0275providers),Array.isArray(t)?aw(t,e):e(t)}var i4=et({provide:String,useValue:et});function CP(n){return n!==null&&typeof n=="object"&&i4 in n}function s4(n){return!!(n&&n.useExisting)}function o4(n){return!!(n&&n.useFactory)}function Ya(n){return typeof n=="function"}function SP(n){return!!n.useClass}var mh=new Z(""),$m={},dP={},NI;function gh(){return NI===void 0&&(NI=new uh),NI}var bt=class{},Ja=class extends bt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,VI(e,o=>this.processProvider(o)),this.records.set(iw,Ku(void 0,this)),i.has("environment")&&this.records.set(bt,Ku(void 0,this));let s=this.records.get(mh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(sw,er,{self:!0}))}retrieve(e,t){let r=Qa(t)||0;try{return this.get(e,Wa,r)}catch(i){if(Wu(i))return i;throw i}}destroy(){ah(this),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return ah(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ah(this);let t=Ei(this),r=Mn(void 0),i;try{return e()}finally{Ei(t),Mn(r)}}get(e,t=Wa,r){if(ah(this),e.hasOwnProperty(lP))return e[lP](this);let i=Qa(r),s,o=Ei(this),a=Mn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=d4(e)&&fh(e);h&&this.injectableDefInScope(h)?d=Ku(LI(e),$m):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?gh():this.parent;return t=i&8&&t===Wa?null:t,c.get(e,t)}catch(c){let d=Xj(c);throw d===-200||d===-201?new q(d,null):c}finally{Mn(a),Ei(o)}}resolveInjectorInitializers(){let e=be(null),t=Ei(this),r=Mn(void 0),i;try{let s=this.get(Za,er,{self:!0});for(let o of s)o()}finally{Ei(t),Mn(r),be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gs(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=cn(e);let t=Ya(e)?e:cn(e&&e.provide),r=c4(e);if(!Ya(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ku(void 0,$m,!0),i.factory=()=>FI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=be(null);try{if(t.value===dP)throw tw(gs(e));return t.value===$m&&(t.value=dP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&l4(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{be(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=cn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function LI(n){let e=fh(n),t=e!==null?e.factory:Po(n);if(t!==null)return t;if(n instanceof Z)throw new q(204,!1);if(n instanceof Function)return a4(n);throw new q(204,!1)}function a4(n){if(n.length>0)throw new q(204,!1);let t=Qj(n);return t!==null?()=>t.factory(n):()=>new n}function c4(n){if(CP(n))return Ku(void 0,n.useValue);{let e=cw(n);return Ku(e,$m)}}function cw(n,e,t){let r;if(Ya(n)){let i=cn(n);return Po(i)||LI(i)}else if(CP(n))r=()=>cn(n.useValue);else if(o4(n))r=()=>n.useFactory(...FI(n.deps||[]));else if(s4(n))r=(i,s)=>fe(cn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=cn(n&&(n.useClass||n.provide));if(u4(n))r=()=>new i(...FI(n.deps));else return Po(i)||LI(i)}return r}function ah(n){if(n.destroyed)throw new q(205,!1)}function Ku(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function u4(n){return!!n.deps}function l4(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function d4(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function VI(n,e){for(let t of n)Array.isArray(t)?VI(t,e):t&&KI(t)?VI(t.\u0275providers,e):e(t)}function Lt(n,e){let t;n instanceof Ja?(ah(n),t=n):t=new OI(n);let r,i=Ei(t),s=Mn(void 0);try{return e()}finally{Ei(i),Mn(s)}}function DP(){return _P()!==void 0||jm()!=null}var Hr=0,Se=1,Ie=2,un=3,pr=4,mr=5,yh=6,Ju=7,bn=8,Lo=9,Ii=10,Ct=11,Xu=12,uw=13,ec=14,gr=15,tc=16,nc=17,rc=18,Vo=19,lw=20,ms=21,eg=22,No=23,nr=24,tg=25,_h=26,dn=27,AP=1;var Uo=7,vh=8,Eh=9,Bn=10;function wi(n){return Array.isArray(n)&&typeof n[AP]=="object"}function qr(n){return Array.isArray(n)&&n[AP]===!0}function dw(n){return(n.flags&4)!==0}function Bo(n){return n.componentOffset>-1}function Ih(n){return(n.flags&1)===1}function Ti(n){return!!n.template}function Zu(n){return(n[Ie]&512)!==0}function ic(n){return(n[Ie]&256)===256}var hw="svg",RP="math";function yr(n){for(;Array.isArray(n);)n=n[Hr];return n}function fw(n,e){return yr(e[n])}function zr(n,e){return yr(e[n.index])}function ng(n,e){return n.data[e]}function pw(n,e){return n[e]}function mw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function _r(n,e){let t=e[n];return wi(t)?t:t[Hr]}function rg(n){return(n[Ie]&128)===128}function PP(n){return qr(n[un])}function sc(n,e){return e==null?null:n[e]}function gw(n){n[nc]=0}function yw(n){n[Ie]&1024||(n[Ie]|=1024,rg(n)&&el(n))}function NP(n,e){for(;n>0;)e=e[ec],n--;return e}function wh(n){return!!(n[Ie]&9216||n[nr]?.dirty)}function ig(n){n[Ii].changeDetectionScheduler?.notify(8),n[Ie]&64&&(n[Ie]|=1024),wh(n)&&el(n)}function el(n){n[Ii].changeDetectionScheduler?.notify(0);let e=ko(n);for(;e!==null&&!(e[Ie]&8192||(e[Ie]|=8192,!rg(e)));)e=ko(e)}function _w(n,e){if(ic(n))throw new q(911,!1);n[ms]===null&&(n[ms]=[]),n[ms].push(e)}function kP(n,e){if(n[ms]===null)return;let t=n[ms].indexOf(e);t!==-1&&n[ms].splice(t,1)}function ko(n){let e=n[un];return qr(e)?e[un]:e}function MP(n){return n[Ju]??=[]}function xP(n){return n.cleanup??=[]}var Re={lFrame:KP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var UI=!1;function OP(){return Re.lFrame.elementDepthCount}function FP(){Re.lFrame.elementDepthCount++}function vw(){Re.lFrame.elementDepthCount--}function Ew(){return Re.bindingsEnabled}function LP(){return Re.skipHydrationRootTNode!==null}function Iw(n){return Re.skipHydrationRootTNode===n}function ww(){Re.skipHydrationRootTNode=null}function $e(){return Re.lFrame.lView}function jn(){return Re.lFrame.tView}function ue(n){return Re.lFrame.contextLView=n,n[bn]}function le(n){return Re.lFrame.contextLView=null,n}function Cn(){let n=Tw();for(;n!==null&&n.type===64;)n=n.parent;return n}function Tw(){return Re.lFrame.currentTNode}function VP(){let n=Re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function tl(n,e){let t=Re.lFrame;t.currentTNode=n,t.isParent=e}function bw(){return Re.lFrame.isParent}function UP(){Re.lFrame.isParent=!1}function BP(){return Re.lFrame.contextLView}function Cw(){return UI}function lh(n){let e=UI;return UI=n,e}function Sw(){let n=Re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jP(){return Re.lFrame.bindingIndex}function $P(n){return Re.lFrame.bindingIndex=n}function Th(){return Re.lFrame.bindingIndex++}function Dw(n){let e=Re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function HP(){return Re.lFrame.inI18n}function qP(n,e){let t=Re.lFrame;t.bindingIndex=t.bindingRootIndex=n,sg(e)}function zP(){return Re.lFrame.currentDirectiveIndex}function sg(n){Re.lFrame.currentDirectiveIndex=n}function GP(n){let e=Re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Aw(n){Re.lFrame.currentQueryIndex=n}function h4(n){let e=n[Se];return e.type===2?e.declTNode:e.type===1?n[mr]:null}function Rw(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=h4(s),i===null||(s=s[ec],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Re.lFrame=WP();return r.currentTNode=e,r.lView=n,!0}function og(n){let e=WP(),t=n[Se];Re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function WP(){let n=Re.lFrame,e=n===null?null:n.child;return e===null?KP(n):e}function KP(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function QP(){let n=Re.lFrame;return Re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Pw=QP;function ag(){let n=QP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function YP(n){return(Re.lFrame.contextLView=NP(n,Re.lFrame.contextLView))[bn]}function jo(){return Re.lFrame.selectedIndex}function $o(n){Re.lFrame.selectedIndex=n}function cg(){let n=Re.lFrame;return ng(n.tView,n.selectedIndex)}function nl(){Re.lFrame.currentNamespace=hw}function rl(){f4()}function f4(){Re.lFrame.currentNamespace=null}function JP(){return Re.lFrame.currentNamespace}var XP=!0;function ug(){return XP}function lg(n){XP=n}function BI(n,e=null,t=null,r){let i=Nw(n,e,t,r);return i.resolveInjectorInitializers(),i}function Nw(n,e=null,t=null,r,i=new Set){let s=[t||er,TP(n)];return r=r||(typeof n=="object"?void 0:gs(n)),new Ja(s,e||gh(),r||null,i)}var yt=class n{static THROW_IF_NOT_FOUND=Wa;static NULL=new uh;static create(e,t){if(Array.isArray(e))return BI({name:""},t,e,"");{let r=e.name??"";return BI({name:r},e.parent,e.providers,r)}}static \u0275prov=te({token:n,providedIn:"any",factory:()=>fe(iw)});static __NG_ELEMENT_ID__=-1},At=new Z(""),Gr=(()=>{class n{static __NG_ELEMENT_ID__=p4;static __NG_ENV_ID__=t=>t}return n})(),zm=class extends Gr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ic(this._lView)}onDestroy(e){let t=this._lView;return _w(t,e),()=>kP(t,e)}};function p4(){return new zm($e())}var ZP=!1,eN=new Z(""),vs=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new xt(!1);debugTaskTracker=B(eN,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ee(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),jI=class extends wt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,DP()&&(this.destroyRef=B(Gr,{optional:!0})??void 0,this.pendingTasks=B(vs,{optional:!0})??void 0)}emit(e){let t=be(null);try{super.next(e)}finally{be(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Kt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=jI;function Gm(...n){}function kw(n){let e,t;function r(){n=Gm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tN(n){return queueMicrotask(()=>n()),()=>{n=Gm}}var Mw="isAngularZone",dh=Mw+"_ID",m4=0,tt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=ZP}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,_4(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,g4,Gm,Gm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},g4={};function xw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function y4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){kw(()=>{n.callbackScheduled=!1,$I(n),n.isCheckStableRunning=!0,xw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$I(n)}function _4(n){let e=()=>{y4(n)},t=m4++;n._inner=n._inner.fork({name:"angular",properties:{[Mw]:!0,[dh]:t,[dh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(v4(c))return r.invokeTask(s,o,a,c);try{return hP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),fP(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return hP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!E4(c)&&e(),fP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,$I(n),xw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function $I(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function hP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fP(n){n._nesting--,xw(n)}var hh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function v4(n){return nN(n,"__ignore_ng_zone__")}function E4(n){return nN(n,"__scheduler_tick__")}function nN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ys=class{_console=console;handleError(e){this._console.error("ERROR",e)}},rr=new Z("",{factory:()=>{let n=B(tt),e=B(bt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(ys),t.handleError(r))})}}}),rN={provide:Za,useValue:()=>{let n=B(ys,{optional:!0})},multi:!0},I4=new Z("",{factory:()=>{let n=B(At).defaultView;if(!n)return;let e=B(rr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),B(Gr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Ow(){return ln([wP(()=>{B(I4)})])}function Pe(n,e){let[t,r,i]=uI(n,e?.equal),s=t,o=s[Nn];return s.set=r,s.update=i,s.asReadonly=iN.bind(s),s}function iN(){let n=this[Nn];if(n.readonlyFn===void 0){let e=()=>this();e[Nn]=n,n.readonlyFn=e}return n.readonlyFn}var dg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=w4}return n})();function w4(){return new dg($e(),Cn())}var Mo=class{},bh=new Z("",{factory:()=>!0});var Fw=new Z(""),il=(()=>{class n{internalPendingTasks=B(vs);scheduler=B(Mo);errorHandler=B(rr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),hg=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>new HI})}return n})(),HI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Wm=class{[Nn];constructor(e){this[Nn]=e}destroy(){this[Nn].destroy()}};function sl(n,e){let t=e?.injector??B(yt),r=e?.manualCleanup!==!0?t.get(Gr):null,i,s=t.get(dg,null,{optional:!0}),o=t.get(Mo);return s!==null?(i=C4(s.view,o,n),r instanceof zm&&r._lView===s.view&&(r=null)):i=S4(n,t.get(hg),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Wm(i)}var sN=ae(U({},dI),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=lh(!1);try{hI(this)}finally{lh(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=be(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],be(n)}}}),T4=ae(U({},sN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Ba(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),b4=ae(U({},sN),{consumerMarkedDirty(){this.view[Ie]|=8192,el(this.view),this.notifier.notify(13)},destroy(){if(Ba(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[No]?.delete(this)}});function C4(n,e,t){let r=Object.create(b4);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=oN(r,t),n[No]??=new Set,n[No].add(r),r.consumerMarkedDirty(r),r}function S4(n,e,t){let r=Object.create(T4);return r.fn=oN(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function oN(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Vt(n){return lI(n)}function fl(n){return{toString:n}.toString()}var fg="__parameters__";function k4(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function M4(n,e,t){return fl(()=>{let r=k4(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let m=c.hasOwnProperty(fg)?c[fg]:Object.defineProperty(c,fg,{value:[]})[fg];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Jt=vP(M4("Optional"),8);function x4(n){return typeof n=="function"}function FN(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Eg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Si=(()=>{let n=()=>LN;return n.ngInherit=!0,n})();function LN(n){return n.type.prototype.ngOnChanges&&(n.setInput=F4),O4}function O4(){let n=UN(this),e=n?.current;if(e){let t=n.previous;if(t===Fo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function F4(n,e,t,r,i){let s=this.declaredInputs[r],o=UN(n)||L4(n,{previous:Fo,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Eg(d&&d.currentValue,t,c===Fo),FN(n,e,i,t)}var VN="__ngSimpleChanges__";function UN(n){return n[VN]||null}function L4(n,e){return n[VN]=e}var aN=[];var at=function(n,e=null,t){for(let r=0;r<aN.length;r++){let i=aN[r];i(n,e,t)}},Ke=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ke||{});function V4(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=LN(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function BN(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function yg(n,e,t){jN(n,e,3,t)}function _g(n,e,t,r){(n[Ie]&3)===t&&jN(n,e,t,r)}function Lw(n,e){let t=n[Ie];(t&3)===e&&(t&=16383,t+=1,n[Ie]=t)}function jN(n,e,t,r){let i=r!==void 0?n[nc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[nc]+=65536),(a<s||s==-1)&&(U4(n,t,e,c),n[nc]=(n[nc]&4294901760)+c+2),c++}function cN(n,e){at(Ke.LifecycleHookStart,n,e);let t=be(null);try{e.call(n)}finally{be(t),at(Ke.LifecycleHookEnd,n,e)}}function U4(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ie]>>14<n[nc]>>16&&(n[Ie]&3)===e&&(n[Ie]+=16384,cN(a,s)):cN(a,s)}var al=-1,ac=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function B4(n){return(n.flags&8)!==0}function j4(n){return(n.flags&16)!==0}function $4(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];H4(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function $N(n){return n===3||n===4||n===6}function H4(n){return n.charCodeAt(0)===64}function cl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?uN(n,t,i,null,e[++r]):uN(n,t,i,null,null))}}return n}function uN(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function HN(n){return n!==al}function Ig(n){return n&32767}function q4(n){return n>>16}function wg(n,e){let t=q4(n),r=e;for(;t>0;)r=r[ec],t--;return r}var Kw=!0;function Tg(n){let e=Kw;return Kw=n,e}var z4=256,qN=z4-1,zN=5,G4=0,bi={};function W4(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xa)&&(r=t[Xa]),r==null&&(r=t[Xa]=G4++);let i=r&qN,s=1<<i;e.data[n+(i>>zN)]|=s}function bg(n,e){let t=GN(n,e);if(t!==-1)return t;let r=e[Se];r.firstCreatePass&&(n.injectorIndex=e.length,Vw(r.data,n),Vw(e,null),Vw(r.blueprint,null));let i=uT(n,e),s=n.injectorIndex;if(HN(i)){let o=Ig(i),a=wg(i,e),c=a[Se].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function Vw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function GN(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function uT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=JN(i),r===null)return al;if(t++,i=i[ec],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return al}function Qw(n,e,t){W4(n,e,t)}function K4(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if($N(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function WN(n,e,t){if(t&8||n!==void 0)return n;Jm(e,"NodeInjector")}function KN(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Lo],s=Mn(void 0);try{return i?i.get(e,r,t&8):nw(e,r,t&8)}finally{Mn(s)}}return WN(r,e,t)}function QN(n,e,t,r=0,i){if(n!==null){if(e[Ie]&2048&&!(r&2)){let o=Z4(n,e,t,r,bi);if(o!==bi)return o}let s=YN(n,e,t,r,bi);if(s!==bi)return s}return KN(e,t,r,i)}function YN(n,e,t,r,i){let s=J4(t);if(typeof s=="function"){if(!Rw(e,n,r))return r&1?WN(i,t,r):KN(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Jm(t);else return o}finally{Pw()}}else if(typeof s=="number"){let o=null,a=GN(n,e),c=al,d=r&1?e[gr][mr]:null;for((a===-1||r&4)&&(c=a===-1?uT(n,e):e[a+8],c===al||!dN(r,!1)?a=-1:(o=e[Se],a=Ig(c),e=wg(c,e)));a!==-1;){let h=e[Se];if(lN(s,a,h.data)){let m=Q4(a,e,t,o,r,d);if(m!==bi)return m}c=e[a+8],c!==al&&dN(r,e[Se].data[a+8]===d)&&lN(s,a,e)?(o=h,a=Ig(c),e=wg(c,e)):a=-1}}return i}function Q4(n,e,t,r,i,s){let o=e[Se],a=o.data[n+8],c=r==null?Bo(a)&&Kw:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=Y4(a,o,t,c,d);return h!==null?Cg(e,o,h,a,i):bi}function Y4(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,m=r?a:a+h,I=i?a+h:d;for(let S=m;S<I;S++){let R=o[S];if(S<c&&t===R||S>=c&&R.type===t)return S}if(i){let S=o[c];if(S&&Ti(S)&&S.type===t)return c}return null}function Cg(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof ac){let a=s;if(a.resolving)throw tw("");let c=Tg(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,m=a.injectImpl?Mn(a.injectImpl):null,I=Rw(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&V4(t,o[t],e)}finally{m!==null&&Mn(m),Tg(c),a.resolving=!1,Pw()}}return s}function J4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Xa)?n[Xa]:void 0;return typeof e=="number"?e>=0?e&qN:X4:e}function lN(n,e,t){let r=1<<n;return!!(t[e+(n>>zN)]&r)}function dN(n,e){return!(n&2)&&!(n&1&&e)}var oc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QN(this._tNode,this._lView,e,Qa(r),t)}};function X4(){return new oc(Cn(),$e())}function lc(n){return fl(()=>{let e=n.prototype.constructor,t=e[ch]||Yw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ch]||Yw(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yw(n){return GI(n)?()=>{let e=Yw(cn(n));return e&&e()}:Po(n)}function Z4(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ie]&2048&&!Zu(o);){let a=YN(s,o,t,r|2,bi);if(a!==bi)return a;let c=s.parent;if(!c){let d=o[lw];if(d){let h=d.get(t,bi,r);if(h!==bi)return h}c=JN(o),o=o[ec]}s=c}return i}function JN(n){let e=n[Se],t=e.type;return t===2?e.declTNode:t===1?n[mr]:null}function Nh(n){return K4(Cn(),n)}function e$(){return Og(Cn(),$e())}function Og(n,e){return new Di(zr(n,e))}var Di=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=e$}return n})();function XN(n){return(n.flags&128)===128}var lT=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(lT||{}),ZN=new Map,t$=0;function n$(){return t$++}function r$(n){ZN.set(n[Vo],n)}function Jw(n){ZN.delete(n[Vo])}var hN="__ngContext__";function ul(n,e){wi(e)?(n[hN]=e[Vo],r$(e)):n[hN]=e}function ek(n){return nk(n[Xu])}function tk(n){return nk(n[pr])}function nk(n){for(;n!==null&&!qr(n);)n=n[pr];return n}var i$;function dT(n){i$=n}var Fg=new Z("",{factory:()=>s$}),s$="ng";var Lg=new Z(""),dc=new Z("",{providedIn:"platform",factory:()=>"unknown"}),Vg=new Z(""),Ug=new Z("",{factory:()=>B(At).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rk=!1,ik=new Z("",{factory:()=>rk});var o$=(n,e,t,r)=>{};function a$(n,e,t,r){o$(n,e,t,r)}function hT(n){return(n.flags&32)===32}var c$=()=>null;function sk(n,e,t=!1){return c$(n,e,t)}function ok(n,e){let t=n.contentQueries;if(t!==null){let r=be(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Aw(s),a.contentQueries(2,e[o],o)}}}finally{be(r)}}}function Xw(n,e,t){Aw(0);let r=be(null);try{e(n,t)}finally{be(r)}}function ak(n,e,t){if(dw(e)){let r=be(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{be(r)}}}var Kr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Kr||{});var pg;function u$(){if(pg===void 0&&(pg=null,$r.trustedTypes))try{pg=$r.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pg}function l$(n){return u$()?.createScriptURL(n)||n}var mg;function d$(){if(mg===void 0&&(mg=null,$r.trustedTypes))try{mg=$r.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return mg}function fN(n){return d$()?.createScriptURL(n)||n}var Sg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Km})`}};function Bg(n){return n instanceof Sg?n.changingThisBreaksApplicationSecurity:n}function fT(n,e){let t=ck(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Km})`)}return t===e}function ck(n){return n instanceof Sg&&n.getTypeName()||null}var h$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uk(n){return n=String(n),n.match(h$)?n:"unsafe:"+n}function f$(n,e){return n.createText(e)}function p$(n,e,t){n.setValue(e,t)}function lk(n,e,t){return n.createElement(e,t)}function Dg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function dk(n,e,t){n.appendChild(e,t)}function pN(n,e,t,r,i){r!==null?Dg(n,e,t,r,i):dk(n,e,t)}function m$(n,e,t,r){n.removeChild(null,e,t,r)}function g$(n,e,t){n.setAttribute(e,"style",t)}function y$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function hk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&$4(n,e,r),i!==null&&y$(n,e,i),s!==null&&g$(n,e,s)}var jg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(jg||{});function hn(n){let e=pk();return e?e.sanitize(jg.URL,n)||"":fT(n,"URL")?Bg(n):uk(Qu(n))}function fk(n){let e=pk();if(e)return fN(e.sanitize(jg.RESOURCE_URL,n)||"");if(fT(n,"ResourceURL"))return fN(Bg(n));throw new q(904,!1)}function pT(n){return l$(n[0])}var _$=new Set(["embed","frame","iframe","media","script"]),v$=new Set(["base","link","script"]);function E$(n,e){return e==="src"&&_$.has(n)||e==="href"&&v$.has(n)||e==="xlink:href"&&n==="script"?fk:hn}function mT(n,e,t){return E$(e,t)(n)}function pk(){let n=$e();return n&&n[Ii].sanitizer}function mk(n){return n instanceof Function?n():n}function I$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var gk="ng-template";function w$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&I$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(gT(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function gT(n){return n.type===4&&n.value!==gk}function T$(n,e,t){let r=n.type===4&&!t?gk:n.value;return e===r}function b$(n,e,t){let r=4,i=n.attrs,s=i!==null?D$(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Wr(r)&&!Wr(c))return!1;if(o&&Wr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!T$(n,c,t)||c===""&&e.length===1){if(Wr(r))return!1;o=!0}}else if(r&8){if(i===null||!w$(n,i,c,t)){if(Wr(r))return!1;o=!0}}else{let d=e[++a],h=C$(c,i,gT(n),t);if(h===-1){if(Wr(r))return!1;o=!0;continue}if(d!==""){let m;if(h>s?m="":m=i[h+1].toLowerCase(),r&2&&d!==m){if(Wr(r))return!1;o=!0}}}}return Wr(r)||o}function Wr(n){return(n&1)===0}function C$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return A$(e,n)}function S$(n,e,t=!1){for(let r=0;r<e.length;r++)if(b$(n,e[r],t))return!0;return!1}function D$(n){for(let e=0;e<n.length;e++){let t=n[e];if($N(t))return e}return n.length}function A$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function mN(n,e){return n?":not("+e.trim()+")":e}function R$(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Wr(o)&&(e+=mN(s,i),i=""),r=o,s=s||!Wr(r);t++}return i!==""&&(e+=mN(s,i)),e}function P$(n){return n.map(R$).join(",")}function N$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Wr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Qr={};function yT(n,e,t,r,i,s,o,a,c,d,h){let m=dn+r,I=m+i,S=k$(m,I),R=typeof d=="function"?d():d;return S[Se]={type:n,blueprint:S,template:t,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function k$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Qr);return t}function M$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=yT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function _T(n,e,t,r,i,s,o,a,c,d,h){let m=e.blueprint.slice();return m[Hr]=i,m[Ie]=r|4|128|8|64|1024,(d!==null||n&&n[Ie]&2048)&&(m[Ie]|=2048),gw(m),m[un]=m[ec]=n,m[bn]=t,m[Ii]=o||n&&n[Ii],m[Ct]=a||n&&n[Ct],m[Lo]=c||n&&n[Lo]||null,m[mr]=s,m[Vo]=n$(),m[yh]=h,m[lw]=d,m[gr]=e.type==2?n[gr]:m,m}function x$(n,e,t){let r=zr(e,n),i=M$(t),s=n[Ii].rendererFactory,o=vT(n,_T(n,i,null,yk(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function yk(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function _k(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function vT(n,e){return n[Xu]?n[uw][pr]=e:n[Xu]=e,n[uw]=e,e}function j(n=1){vk(jn(),$e(),jo()+n,!1)}function vk(n,e,t,r){if(!r)if((e[Ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&yg(e,s,t)}else{let s=n.preOrderHooks;s!==null&&_g(e,s,0,t)}$o(t)}var $g=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})($g||{});function Zw(n,e,t,r){let i=be(null);try{let[s,o,a]=n.inputs[t],c=null;(o&$g.SignalBased)!==0&&(c=e[s][Nn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):FN(e,c,s,r)}finally{be(i)}}var Ci=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ci||{}),O$;function ET(n,e){return O$(n,e)}var ll=new Set,IT=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(IT||{}),kh=new Z(""),gN=new Set;function Mh(n){gN.has(n)||(gN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ek=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})();var F$=new Z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:B(bt)})});function Ik(n,e,t){let r=n.get(F$);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function L$(n,e){for(let[t,r]of e)Ik(n,r.animateFns)}function yN(n,e,t,r){let i=n?.[_h]?.enter;e!==null&&i&&i.has(t.index)&&L$(r,i)}function ol(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;qr(i)?c=i:wi(i)&&(d=!0,i=i[Hr]);let h=yr(i);n===0&&r!==null?(yN(a,r,s,t),o==null?dk(e,r,h):Dg(e,r,h,o||null,!0)):n===1&&r!==null?(yN(a,r,s,t),Dg(e,r,h,o||null,!0)):n===2?_N(a,s,t,m=>{m$(e,h,d,m)}):n===3&&_N(a,s,t,()=>{e.destroyNode(h)}),c!=null&&Y$(e,n,t,c,s,r,o)}}function V$(n,e){wk(n,e),e[Hr]=null,e[mr]=null}function U$(n,e,t,r,i,s){r[Hr]=i,r[mr]=e,Hg(n,r,t,1,i,s)}function wk(n,e){e[Ii].changeDetectionScheduler?.notify(9),Hg(n,e,e[Ct],2,null,null)}function B$(n){let e=n[Xu];if(!e)return Uw(n[Se],n);for(;e;){let t=null;if(wi(e))t=e[Xu];else{let r=e[Bn];r&&(t=r)}if(!t){for(;e&&!e[pr]&&e!==n;)wi(e)&&Uw(e[Se],e),e=e[un];e===null&&(e=n),wi(e)&&Uw(e[Se],e),t=e&&e[pr]}e=t}}function wT(n,e){let t=n[Eh],r=t.indexOf(e);t.splice(r,1)}function Tk(n,e){if(ic(e))return;let t=e[Ct];t.destroyNode&&Hg(n,e,t,3,null,null),B$(e)}function Uw(n,e){if(ic(e))return;let t=be(null);try{e[Ie]&=-129,e[Ie]|=256,e[nr]&&Ba(e[nr]),H$(n,e),$$(n,e),e[Se].type===1&&e[Ct].destroy();let r=e[tc];if(r!==null&&qr(e[un])){r!==e[un]&&wT(r,e);let i=e[rc];i!==null&&i.detachView(n)}Jw(e)}finally{be(t)}}function _N(n,e,t,r){let i=n?.[_h];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ll.add(n[Vo]),Ik(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),j$(n,r)}else n&&ll.delete(n[Vo]),r(!1)},i)}function j$(n,e){let t=n[_h]?.running;if(t){t.then(()=>{n[_h].running=void 0,ll.delete(n[Vo]),e(!0)});return}e(!1)}function $$(n,e){let t=n.cleanup,r=e[Ju];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Ju]=null);let i=e[ms];if(i!==null){e[ms]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[No];if(s!==null){e[No]=null;for(let o of s)o.destroy()}}function H$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ac)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];at(Ke.LifecycleHookStart,a,c);try{c.call(a)}finally{at(Ke.LifecycleHookEnd,a,c)}}else{at(Ke.LifecycleHookStart,i,s);try{s.call(i)}finally{at(Ke.LifecycleHookEnd,i,s)}}}}}function q$(n,e,t){return z$(n,e.parent,t)}function z$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Hr];if(Bo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Kr.None||i===Kr.Emulated)return null}return zr(r,t)}function G$(n,e,t){return K$(n,e,t)}function W$(n,e,t){return n.type&40?zr(n,t):null}var K$=W$,vN;function TT(n,e,t,r){let i=q$(n,r,e),s=e[Ct],o=r.parent||e[mr],a=G$(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)pN(s,i,t[c],a,!1);else pN(s,i,t,a,!1);vN!==void 0&&vN(s,r,e,t,i)}function Sh(n,e){if(e!==null){let t=e.type;if(t&3)return zr(e,n);if(t&4)return eT(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Sh(n,r);{let i=n[e.index];return qr(i)?eT(-1,i):yr(i)}}else{if(t&128)return Sh(n,e.next);if(t&32)return ET(e,n)()||yr(n[e.index]);{let r=bk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ko(n[gr]);return Sh(i,r)}else return Sh(n,e.next)}}}return null}function bk(n,e){if(e!==null){let r=n[gr][mr],i=e.projection;return r.projection[i]}return null}function eT(n,e){let t=Bn+n+1;if(t<e.length){let r=e[t],i=r[Se].firstChild;if(i!==null)return Sh(r,i)}return e[Uo]}function bT(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Lo];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&ul(yr(c),r),t.flags|=2),!hT(t))if(d&8)bT(n,e,t.child,r,i,s,!1),ol(e,n,a,i,c,t,s,r);else if(d&32){let h=ET(t,r),m;for(;m=h();)ol(e,n,a,i,m,t,s,r);ol(e,n,a,i,c,t,s,r)}else d&16?Q$(n,e,r,t,i,s):ol(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Hg(n,e,t,r,i,s){bT(t,r,n.firstChild,e,i,s,!1)}function Q$(n,e,t,r,i,s){let o=t[gr],c=o[mr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];ol(e,n,t[Lo],i,h,r,s,t)}else{let d=c,h=o[un];XN(r)&&(d.flags|=128),bT(n,e,d,h,i,s,!0)}}function Y$(n,e,t,r,i,s,o){let a=r[Uo],c=yr(r);a!==c&&ol(e,n,t,s,a,i,o);for(let d=Bn;d<r.length;d++){let h=r[d];Hg(h[Se],h,n,e,s,a)}}function J$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ci.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ci.Important),n.setStyle(t,r,i,s))}}function Ck(n,e,t,r,i){let s=jo(),o=r&2;try{$o(-1),o&&e.length>dn&&vk(n,e,dn,!1);let a=o?Ke.TemplateUpdateStart:Ke.TemplateCreateStart;at(a,i,t),t(r,i)}finally{$o(s);let a=o?Ke.TemplateUpdateEnd:Ke.TemplateCreateEnd;at(a,i,t)}}function CT(n,e,t){i3(n,e,t),(t.flags&64)===64&&s3(n,e,t)}function ST(n,e,t=zr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function X$(n,e,t,r){let s=r.get(ik,rk)||t===Kr.ShadowDom||t===Kr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return Z$(o),o}function Z$(n){e3(n)}var e3=()=>null;function t3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Sk(n,e,t,r,i,s){let o=e[Se];if(DT(n,o,e,t,r)){Bo(n)&&r3(e,n.index);return}n.type&3&&(t=t3(t)),n3(n,e,t,r,i,s)}function n3(n,e,t,r,i,s){if(n.type&3){let o=zr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function r3(n,e){let t=_r(e,n);t[Ie]&16||(t[Ie]|=64)}function i3(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Bo(t)&&x$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||bg(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Cg(e,n,o,t);if(ul(c,e),s!==null&&u3(e,o-r,c,a,t,s),Ti(a)){let d=_r(t.index,e);d[bn]=Cg(e,n,o,t)}}}function s3(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=zP();try{$o(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];sg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&o3(c,d)}}finally{$o(-1),sg(o)}}function o3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Dk(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];S$(e,s.selectors,!1)&&(r??=[],Ti(s)?r.unshift(s):r.push(s))}return r}function a3(n,e,t,r,i,s){let o=zr(n,e);c3(e[Ct],o,s,n.value,t,r,i)}function c3(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Qu(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function u3(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];Zw(r,t,c,d)}}function Ak(n,e,t,r,i){let s=dn+t,o=e[Se],a=i(o,e,n,r,t);e[s]=a,tl(n,!0);let c=n.type===2;return c?(hk(e[Ct],a,n),(OP()===0||Ih(n))&&ul(a,e),FP()):ul(a,e),ug()&&(!c||!hT(n))&&TT(o,e,a,n),n}function Rk(n){let e=n;return bw()?UP():(e=e.parent,tl(e,!1)),e}function l3(n,e){let t=n[Lo];if(!t)return;let r;try{r=t.get(rr,null)}catch{r=null}r?.(e)}function DT(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],m=e.data[d];Zw(m,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];Zw(h,d,r,i),a=!0}return a}function d3(n,e){let t=_r(e,n),r=t[Se];h3(r,t);let i=t[Hr];i!==null&&t[yh]===null&&(t[yh]=sk(i,t[Lo])),at(Ke.ComponentStart);try{AT(r,t,t[bn])}finally{at(Ke.ComponentEnd,t[bn])}}function h3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function AT(n,e,t){og(e);try{let r=n.viewQuery;r!==null&&Xw(1,r,t);let i=n.template;i!==null&&Ck(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[rc]?.finishViewCreation(n),n.staticContentQueries&&ok(n,e),n.staticViewQueries&&Xw(2,n.viewQuery,t);let s=n.components;s!==null&&f3(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ie]&=-5,ag()}}function f3(n,e){for(let t=0;t<e.length;t++)d3(n,e[t])}function p3(n,e,t,r){let i=be(null);try{let s=e.tView,a=n[Ie]&4096?4096:16,c=_T(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[tc]=d;let h=n[rc];return h!==null&&(c[rc]=h.createEmbeddedView(s)),AT(s,c,t),c}finally{be(i)}}function EN(n,e){return!e||e.firstChild===null||XN(n)}function Ah(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(yr(s)),qr(s)&&Pk(s,r);let o=t.type;if(o&8)Ah(n,e,t.child,r);else if(o&32){let a=ET(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=bk(e,t);if(Array.isArray(a))r.push(...a);else{let c=ko(e[gr]);Ah(c[Se],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Pk(n,e){for(let t=Bn;t<n.length;t++){let r=n[t],i=r[Se].firstChild;i!==null&&Ah(r[Se],r,i,e)}n[Uo]!==n[Hr]&&e.push(n[Uo])}function Nk(n){if(n[tg]!==null){for(let e of n[tg])e.impl.addSequence(e);n[tg].length=0}}var kk=[];function m3(n){return n[nr]??g3(n)}function g3(n){let e=kk.pop()??Object.create(_3);return e.lView=n,e}function y3(n){n.lView[nr]!==n&&(n.lView=null,kk.push(n))}var _3=ae(U({},Ou),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{el(n.lView)},consumerOnSignalRead(){this.lView[nr]=this}});function v3(n){let e=n[nr]??Object.create(E3);return e.lView=n,e}var E3=ae(U({},Ou),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ko(n.lView);for(;e&&!Mk(e[Se]);)e=ko(e);e&&yw(e)},consumerOnSignalRead(){this.lView[nr]=this}});function Mk(n){return n.type!==2}function xk(n){if(n[No]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[No])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ie]&8192)}}var I3=100;function Ok(n,e=0){let r=n[Ii].rendererFactory,i=!1;i||r.begin?.();try{w3(n,e)}finally{i||r.end?.()}}function w3(n,e){let t=Cw();try{lh(!0),tT(n,e);let r=0;for(;wh(n);){if(r===I3)throw new q(103,!1);r++,tT(n,1)}}finally{lh(t)}}function T3(n,e,t,r){if(ic(e))return;let i=e[Ie],s=!1,o=!1;og(e);let a=!0,c=null,d=null;s||(Mk(n)?(d=m3(e),c=Fu(d)):fm()===null?(a=!1,d=v3(e),c=Fu(d)):e[nr]&&(Ba(e[nr]),e[nr]=null));try{gw(e),$P(n.bindingStartIndex),t!==null&&Ck(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let S=n.preOrderCheckHooks;S!==null&&yg(e,S,null)}else{let S=n.preOrderHooks;S!==null&&_g(e,S,0,null),Lw(e,0)}if(o||b3(e),xk(e),Fk(e,0),n.contentQueries!==null&&ok(n,e),!s)if(h){let S=n.contentCheckHooks;S!==null&&yg(e,S)}else{let S=n.contentHooks;S!==null&&_g(e,S,1),Lw(e,1)}S3(n,e);let m=n.components;m!==null&&Vk(e,m,0);let I=n.viewQuery;if(I!==null&&Xw(2,I,r),!s)if(h){let S=n.viewCheckHooks;S!==null&&yg(e,S)}else{let S=n.viewHooks;S!==null&&_g(e,S,2),Lw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[eg]){for(let S of e[eg])S();e[eg]=null}s||(Nk(e),e[Ie]&=-73)}catch(h){throw s||el(e),h}finally{d!==null&&(Zd(d,c),a&&y3(d)),ag()}}function Fk(n,e){for(let t=ek(n);t!==null;t=tk(t))for(let r=Bn;r<t.length;r++){let i=t[r];Lk(i,e)}}function b3(n){for(let e=ek(n);e!==null;e=tk(e)){if(!(e[Ie]&2))continue;let t=e[Eh];for(let r=0;r<t.length;r++){let i=t[r];yw(i)}}}function C3(n,e,t){at(Ke.ComponentStart);let r=_r(e,n);try{Lk(r,t)}finally{at(Ke.ComponentEnd,r[bn])}}function Lk(n,e){rg(n)&&tT(n,e)}function tT(n,e){let r=n[Se],i=n[Ie],s=n[nr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&eh(s)),o||=!1,s&&(s.dirty=!1),n[Ie]&=-9217,o)T3(r,n,r.template,n[bn]);else if(i&8192){let a=be(null);try{xk(n),Fk(n,1);let c=r.components;c!==null&&Vk(n,c,1),Nk(n)}finally{be(a)}}}function Vk(n,e,t){for(let r=0;r<e.length;r++)C3(n,e[r],t)}function S3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)$o(~i);else{let s=i,o=t[++r],a=t[++r];qP(o,s);let c=e[s];at(Ke.HostBindingsUpdateStart,c);try{a(2,c)}finally{at(Ke.HostBindingsUpdateEnd,c)}}}}finally{$o(-1)}}function RT(n,e){let t=Cw()?64:1088;for(n[Ii].changeDetectionScheduler?.notify(e);n;){n[Ie]|=t;let r=ko(n);if(Zu(n)&&!r)return n;n=r}return null}function Uk(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function D3(n,e,t,r=!0){let i=e[Se];if(A3(i,e,n,t),r){let o=eT(t,n),a=e[Ct],c=a.parentNode(n[Uo]);c!==null&&U$(i,n[mr],a,e,c,o)}let s=e[yh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function nT(n,e){if(n.length<=Bn)return;let t=Bn+e,r=n[t];if(r){let i=r[tc];i!==null&&i!==n&&wT(i,r),e>0&&(n[t-1][pr]=r[pr]);let s=ph(n,Bn+e);V$(r[Se],r);let o=s[rc];o!==null&&o.detachView(s[Se]),r[un]=null,r[pr]=null,r[Ie]&=-129}return r}function A3(n,e,t,r){let i=Bn+r,s=t.length;r>0&&(t[i-1][pr]=e),r<s-Bn?(e[pr]=t[i],rw(t,Bn+r,e)):(t.push(e),e[pr]=null),e[un]=t;let o=e[tc];o!==null&&t!==o&&Bk(o,e);let a=e[rc];a!==null&&a.insertView(n),ig(e),e[Ie]|=128}function Bk(n,e){let t=n[Eh],r=e[un];if(wi(r))n[Ie]|=2;else{let i=r[un][gr];e[gr]!==i&&(n[Ie]|=2)}t===null?n[Eh]=[e]:t.push(e)}var Ho=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Se];return Ah(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[bn]}set context(e){this._lView[bn]=e}get destroyed(){return ic(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[un];if(qr(e)){let t=e[vh],r=t?t.indexOf(this):-1;r>-1&&(nT(e,r),ph(t,r))}this._attachedToViewContainer=!1}Tk(this._lView[Se],this._lView)}onDestroy(e){_w(this._lView,e)}markForCheck(){RT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ie]&=-129}reattach(){ig(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,Ok(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zu(this._lView),t=this._lView[tc];t!==null&&!e&&wT(t,this._lView),wk(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=Zu(this._lView),r=this._lView[tc];r!==null&&!t&&Bk(r,this._lView),ig(this._lView)}};var xh=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=R3;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=p3(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ho(s)}}return n})();function R3(){return jk(Cn(),$e())}function jk(n,e){return n.type&4?new xh(e,n,Og(n,e)):null}function qg(n,e,t,r,i){let s=n.data[e];if(s===null)s=P3(n,e,t,r,i),HP()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=VP();s.injectorIndex=o===null?-1:o.injectorIndex}return tl(s,!0),s}function P3(n,e,t,r,i){let s=Tw(),o=bw(),a=o?s:s&&s.parent,c=n.data[e]=k3(n,a,t,e,r,i);return N3(n,c,s,o),c}function N3(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function k3(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return LP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var M3=()=>null;function IN(n,e){return M3(n,e)}var $k=class{},zg=class{},rT=class{resolveComponentFactory(e){throw new q(917,!1)}},Oh=class{static NULL=new rT},Es=class{},zo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>x3()}return n})();function x3(){let n=$e(),e=Cn(),t=_r(e.index,n);return(wi(t)?t:n)[Ct]}var Hk=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>null})}return n})();var vg={},iT=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,vg,r);return i!==vg||t===vg?i:this.parentInjector.get(e,t,r)}};function Ag(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zI(i,a);else if(s==2){let c=a,d=e[++o];r=zI(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function de(n,e=0){let t=$e();if(t===null)return fe(n,e);let r=Cn();return QN(r,t,cn(n),e)}function qk(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}L3(n,e,t,a,s,c,d)}s!==null&&r!==null&&O3(t,r,s)}function O3(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new q(-301,!1);r.push(e[i],s)}}function F3(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function L3(n,e,t,r,i,s,o){let a=r.length,c=null;for(let I=0;I<a;I++){let S=r[I];c===null&&Ti(S)&&(c=S,F3(n,t,I)),Qw(bg(t,e),n,S.type)}H3(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let I=0;I<a;I++){let S=r[I];S.providersResolver&&S.providersResolver(S)}let d=!1,h=!1,m=_k(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let S=r[I];if(t.mergedAttrs=cl(t.mergedAttrs,S.hostAttrs),U3(n,t,e,m,S),$3(m,S,i),o!==null&&o.has(S)){let[P,M]=o.get(S);t.directiveToIndex.set(S.type,[m,P+t.directiveStart,M+t.directiveStart])}else(s===null||!s.has(S))&&t.directiveToIndex.set(S.type,m);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let R=S.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}V3(n,t,s)}function V3(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))wN(0,e,i,r),wN(1,e,i,r),bN(e,r,!1);else{let s=t.get(i);TN(0,e,s,r),TN(1,e,s,r),bN(e,r,!0)}}}function wN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),zk(e,s)}}function TN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),zk(e,o)}}function zk(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function bN(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||gT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function U3(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Po(i.type,!0)),o=new ac(s,Ti(i),de,null);n.blueprint[r]=o,t[r]=o,B3(n,e,r,_k(n,t,i.hostVars,Qr),i)}function B3(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;j3(o)!=a&&o.push(a),o.push(t,r,s)}}function j3(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ti(e)&&(t[""]=n)}}function H3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Gk(n,e,t,r,i,s,o,a){let c=e[Se],d=c.consts,h=sc(d,o),m=qg(c,n,t,r,h);return s&&qk(c,e,m,sc(d,a),i),m.mergedAttrs=cl(m.mergedAttrs,m.attrs),m.attrs!==null&&Ag(m,m.attrs,!1),m.mergedAttrs!==null&&Ag(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function Wk(n,e){BN(n,e),dw(e)&&n.queries.elementEnd(e)}function q3(n,e,t,r,i,s){let o=e.consts,a=sc(o,i),c=qg(e,n,t,r,a);if(c.mergedAttrs=cl(c.mergedAttrs,c.attrs),s!=null){let d=sc(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&Ag(c,c.attrs,!1),c.mergedAttrs!==null&&Ag(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function PT(n){return Qk(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Kk(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Qk(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Yk(n,e,t){return n[e]=t}function qo(n,e,t){if(t===Qr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Jk(n,e,t,r){let i=qo(n,e,t);return qo(n,e+1,r)||i}function Bw(n,e,t){return function r(i){let s=Bo(n)?_r(n.index,e):e;RT(s,5);let o=e[bn],a=CN(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=CN(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function CN(n,e,t,r){let i=be(null);try{return at(Ke.OutputStart,e,t),t(r)!==!1}catch(s){return l3(n,s),!1}finally{at(Ke.OutputEnd,e,t),be(i)}}function z3(n,e,t,r,i,s,o,a){let c=Ih(n),d=!1,h=null;if(!r&&c&&(h=W3(e,t,s,n.index)),h!==null){let m=h.__ngLastListenerFn__||h;m.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let m=zr(n,t),I=r?r(m):m;a$(t,I,s,a);let S=i.listen(I,s,a);if(!G3(s)){let R=r?P=>r(yr(P[n.index])):n.index;Xk(R,e,t,s,a,S,!1)}}return d}function G3(n){return n.startsWith("animation")||n.startsWith("transition")}function W3(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Ju],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Xk(n,e,t,r,i,s,o){let a=e.firstCreatePass?xP(e):null,c=MP(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function SN(n,e,t,r,i,s){let o=e[t],a=e[Se],d=a.data[t].outputs[r],m=o[d].subscribe(s);Xk(n.index,a,e,i,s,m,!0)}var sT=Symbol("BINDING");var Rg=class extends Oh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Oo(e);return new dl(t,this.ngModule)}};function K3(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&$g.SignalBased)!==0};return i&&(s.transform=i),s})}function Q3(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Y3(n,e,t){let r=e instanceof bt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new iT(t,r):t}function J3(n){let e=n.get(Es,null);if(e===null)throw new q(407,!1);let t=n.get(Hk,null),r=n.get(Mo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function X3(n,e){let t=Zk(n);return lk(e,t,t==="svg"?hw:t==="math"?RP:null)}function Zk(n){return(n.selectors[0][0]||"div").toLowerCase()}var dl=class extends zg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=K3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Q3(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=P$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){at(Ke.DynamicComponentStart);let a=be(null);try{let c=this.componentDef,d=Z3(r,c,o,s),h=Y3(c,i||this.ngModule,e),m=J3(h),I=m.rendererFactory.createRenderer(null,c),S=r?X$(I,r,c.encapsulation,h):X3(c,I),R=o?.some(DN)||s?.some(H=>typeof H!="function"&&H.bindings.some(DN)),P=_T(null,d,null,512|yk(c),null,null,m,I,h,null,sk(S,h,!0));P[dn]=S,og(P);let M=null;try{let H=Gk(dn,P,2,"#host",()=>d.directiveRegistry,!0,0);hk(I,S,H),ul(S,P),CT(d,P,H),ak(d,H,P),Wk(d,H),t!==void 0&&tH(H,this.ngContentSelectors,t),M=_r(H.index,P),P[bn]=M[bn],AT(d,P,null)}catch(H){throw M!==null&&Jw(M),Jw(P),H}finally{at(Ke.DynamicComponentEnd),ag()}return new Pg(this.componentType,P,!!R)}finally{be(a)}}};function Z3(n,e,t,r){let i=n?["ng-version","21.1.2"]:N$(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[sT].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let m=r[h];if(typeof m!="function")for(let I of m.bindings){a+=I[sT].requiredVars;let S=h+1;I.create&&(I.targetIdx=S,(s??=[]).push(I)),I.update&&(I.targetIdx=S,(o??=[]).push(I))}}let c=[e];if(r)for(let h of r){let m=typeof h=="function"?h:h.type,I=ew(m);c.push(I)}return yT(0,null,eH(s,o),1,a,c,null,null,null,[i],null)}function eH(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function DN(n){let e=n[sT].kind;return e==="input"||e==="twoWay"}var Pg=class extends $k{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ng(t[Se],dn),this.location=Og(this._tNode,t),this.instance=_r(this._tNode.index,t)[bn],this.hostView=this.changeDetectorRef=new Ho(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=DT(r,i[Se],i,e,t);this.previousInputValues.set(e,t);let o=_r(r.index,i);RT(o,1)}get injector(){return new oc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tH(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var hc=(()=>{class n{static __NG_ELEMENT_ID__=nH}return n})();function nH(){let n=Cn();return iH(n,$e())}var rH=hc,eM=class extends rH{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Og(this._hostTNode,this._hostLView)}get injector(){return new oc(this._hostTNode,this._hostLView)}get parentInjector(){let e=uT(this._hostTNode,this._hostLView);if(HN(e)){let t=wg(e,this._hostLView),r=Ig(e),i=t[Se].data[r+8];return new oc(i,t)}else return new oc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=AN(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=IN(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,EN(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!x4(e),d;if(c)d=t;else{let M=t||{};d=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef,o=M.directives,a=M.bindings}let h=c?e:new dl(Oo(e)),m=r||this.parentInjector;if(!s&&h.ngModule==null){let H=(c?m:this.parentInjector).get(bt,null);H&&(s=H)}let I=Oo(h.componentType??{}),S=IN(this._lContainer,I?.id??null),R=S?.firstChild??null,P=h.create(m,i,R,s,o,a);return this.insertImpl(P.hostView,d,EN(this._hostTNode,S)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(PP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[un],d=new eM(c,c[mr],c[un]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return D3(o,i,s,r),e.attachToViewContainerRef(),rw(jw(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=AN(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=nT(this._lContainer,t);r&&(ph(jw(this._lContainer),t),Tk(r[Se],r))}detach(e){let t=this._adjustIndex(e,-1),r=nT(this._lContainer,t);return r&&ph(jw(this._lContainer),t)!=null?new Ho(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function AN(n){return n[vh]}function jw(n){return n[vh]||(n[vh]=[])}function iH(n,e){let t,r=e[n.index];return qr(r)?t=r:(t=Uk(r,e,null,n),e[n.index]=t,vT(e,t)),oH(t,e,n,r),new eM(t,n,e)}function sH(n,e){let t=n[Ct],r=t.createComment(""),i=zr(e,n),s=t.parentNode(i);return Dg(t,s,r,t.nextSibling(i),!1),r}var oH=uH,aH=()=>!1;function cH(n,e,t){return aH(n,e,t)}function uH(n,e,t,r){if(n[Uo])return;let i;t.type&8?i=yr(r):i=sH(e,t),n[Uo]=i}var cc=class{},Gg=class{};var Ng=class extends cc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=ZI(e);this._bootstrapComponents=mk(s.bootstrap),this._r3Injector=Nw(e,t,[{provide:cc,useValue:this},{provide:Oh,useValue:this.componentFactoryResolver},...r],gs(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kg=class extends Gg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ng(this.moduleType,e,[])}};var Rh=class extends cc{injector;componentFactoryResolver=new Rg(this);instance=null;constructor(e){super();let t=new Ja([...e.providers,{provide:cc,useValue:this},{provide:Oh,useValue:this.componentFactoryResolver}],e.parent||gh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fh(n,e,t=null){return new Rh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var lH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ow(!1,t.type),i=r.length>0?Fh([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:n,providedIn:"environment",factory:()=>new n(fe(bt))})}return n})();function Tt(n){return fl(()=>{let e=tM(n),t=ae(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===lT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(lH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Kr.Emulated,styles:n.styles||er,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Mh("NgStandalone"),nM(t);let r=n.dependencies;return t.directiveDefs=RN(r,dH),t.pipeDefs=RN(r,mP),t.id=pH(t),t})}function dH(n){return Oo(n)||ew(n)}function vr(n){return fl(()=>({type:n.type,bootstrap:n.bootstrap||er,declarations:n.declarations||er,imports:n.imports||er,exports:n.exports||er,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hH(n,e){if(n==null)return Fo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=$g.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function fH(n){if(n==null)return Fo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ut(n){return fl(()=>{let e=tM(n);return nM(e),e})}function NT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function tM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Fo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||er,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hH(n.inputs,e),outputs:fH(n.outputs),debugInfo:null}}function nM(n){n.features?.forEach(e=>e(n))}function RN(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function pH(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function mH(n){return Object.getPrototypeOf(n.prototype).constructor}function Yr(n){let e=mH(n.type),t=!0,r=[n];for(;e;){let i;if(Ti(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=$w(n.inputs),o.declaredInputs=$w(n.declaredInputs),o.outputs=$w(n.outputs);let a=i.hostBindings;a&&EH(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&_H(n,c),d&&vH(n,d),gH(n,i),pP(n.outputs,i.outputs),Ti(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Yr&&(t=!1)}}e=Object.getPrototypeOf(e)}yH(r)}function gH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function yH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=cl(i.hostAttrs,t=cl(t,i.hostAttrs))}}function $w(n){return n===Fo?{}:n===er?[]:n}function _H(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vH(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function EH(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function IH(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=cl(n.mergedAttrs,n.attrs);let h=n.tView=yT(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),tl(n,!1);let c=TH(t,e,n,r);ug()&&TT(t,e,c,n),ul(c,e);let d=Uk(c,e,c,n);e[r+dn]=d,vT(e,d),cH(d,n,e)}function wH(n,e,t,r,i,s,o,a,c,d,h){let m=t+dn,I;return e.firstCreatePass?(I=qg(e,m,4,o||null,a||null),Ew()&&qk(e,n,I,sc(e.consts,d),Dk),BN(e,I)):I=e.data[m],IH(I,n,e,t,r,i,s,c),Ih(I)&&CT(e,n,I),d!=null&&ST(n,I,h),I}function _e(n,e,t,r,i,s,o,a){let c=$e(),d=jn(),h=sc(d.consts,s);return wH(c,d,n,e,t,r,i,h,void 0,o,a),_e}var TH=bH;function bH(n,e,t,r){return lg(!0),e[Ct].createComment("")}var kT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function rM(n){return typeof n=="function"&&n[Nn]!==void 0}function MT(n){return rM(n)&&typeof n.set=="function"}var xT=new Z("");function Go(n){return!!n&&typeof n.then=="function"}function OT(n){return!!n&&typeof n.subscribe=="function"}var FT=new Z("");function Wg(n){return ln([{provide:FT,multi:!0,useValue:n}])}var LT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=B(FT,{optional:!0})??[];injector=B(yt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Lt(this.injector,i);if(Go(s))t.push(s);else if(OT(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kg=new Z("");function iM(){cI(()=>{let n="";throw new q(600,n)})}function sM(n){return n.isBoundToModule}var CH=10;var Ai=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(rr);afterRenderManager=B(Ek);zonelessEnabled=B(bh);rootEffectScheduler=B(hg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new wt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=B(vs);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(We(t=>!t))}constructor(){B(kh,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=B(bt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=yt.NULL){return this._injector.get(tt).run(()=>{at(Ke.BootstrapComponentStart);let o=t instanceof zg;if(!this._injector.get(LT).done){let R="";throw new q(405,R)}let c;o?c=t:c=this._injector.get(Oh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=sM(c)?void 0:this._injector.get(cc),h=r||c.selector,m=c.create(i,[],h,d),I=m.location.nativeElement,S=m.injector.get(xT,null);return S?.registerApplication(I),m.onDestroy(()=>{this.detachView(m.hostView),Dh(this.components,m),S?.unregisterApplication(I)}),this._loadComponent(m),at(Ke.BootstrapComponentEnd,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){at(Ke.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(IT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw at(Ke.ChangeDetectionEnd),new q(101,!1);let t=be(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,be(t),this.afterTick.next(),at(Ke.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Es,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<CH;){at(Ke.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{at(Ke.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!wh(i))continue;let s=r&&!this.zonelessEnabled?0:1;Ok(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Dh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Kg,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Lh(n,e,t,r){let i=$e(),s=Th();if(qo(i,s,e)){let o=jn(),a=cg();a3(a,i,n,e,t,r)}return Lh}var Bce=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Q(n,e,t){let r=$e(),i=Th();if(qo(r,i,e)){let s=jn(),o=cg();Sk(o,r,n,e,r[Ct],t)}return Q}function PN(n,e,t,r,i){DT(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=$e(),s=i[Se],o=n+dn,a=s.firstCreatePass?Gk(o,i,2,e,Dk,Ew(),t,r):s.data[o];if(Ak(a,i,n,e,oM),Ih(a)){let c=i[Se];CT(c,i,a),ak(c,a,i)}return r!=null&&ST(i,a),x}function O(){let n=jn(),e=Cn(),t=Rk(e);return n.firstCreatePass&&Wk(n,t),Iw(t)&&ww(),vw(),t.classesWithoutHost!=null&&B4(t)&&PN(n,t,$e(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&j4(t)&&PN(n,t,$e(),t.stylesWithoutHost,!1),O}function He(n,e,t,r){return x(n,e,t,r),O(),He}function nt(n,e,t,r){let i=$e(),s=i[Se],o=n+dn,a=s.firstCreatePass?q3(o,s,2,e,t,r):s.data[o];return Ak(a,i,n,e,oM),r!=null&&ST(i,a),nt}function dt(){let n=Cn(),e=Rk(n);return Iw(e)&&ww(),vw(),dt}function Ri(n,e,t,r){return nt(n,e,t,r),dt(),Ri}var oM=(n,e,t,r,i)=>(lg(!0),lk(e[Ct],r,JP()));function Fe(){return $e()}var Ch=void 0;function SH(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var DH=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ch,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ch,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Ch,Ch,Ch],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",SH],Hw={};function ir(n){let e=AH(n),t=NN(e);if(t)return t;let r=e.split("-")[0];if(t=NN(r),t)return t;if(r==="en")return DH;throw new q(701,!1)}function NN(n){return n in Hw||(Hw[n]=$r.ng&&$r.ng.common&&$r.ng.common.locales&&$r.ng.common.locales[n]),Hw[n]}var Rt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Rt||{});function AH(n){return n.toLowerCase().replace(/_/g,"-")}var Vh="en-US";var RH=Vh;function aM(n){typeof n=="string"&&(RH=n.toLowerCase().replace(/_/g,"-"))}function re(n,e,t){let r=$e(),i=jn(),s=Cn();return cM(i,r,r[Ct],s,n,e,t),re}function cM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Bw(r,e,s),z3(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let m=0;m<h.length;m+=2){let I=h[m],S=h[m+1];c??=Bw(r,e,s),SN(r,e,I,S,i,c)}if(d&&d.length)for(let m of d)c??=Bw(r,e,s),SN(r,e,m,i,i,c)}}function X(n=1){return YP(n)}function VT(n){let e=BP();return pw(e,dn+n)}function gg(n,e){return n<<17|e<<2}function uc(n){return n>>17&32767}function PH(n){return(n&2)==2}function NH(n,e){return n&131071|e<<17}function oT(n){return n|2}function hl(n){return(n&131068)>>2}function qw(n,e){return n&-131069|e<<2}function kH(n){return(n&1)===1}function aT(n){return n|1}function MH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=uc(o),c=hl(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let m=t;h=m[1],(h===null||Yu(m,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let I=uc(n[a+1]);n[r+1]=gg(I,a),I!==0&&(n[I+1]=qw(n[I+1],r)),n[a+1]=NH(n[a+1],r)}else n[r+1]=gg(a,0),a!==0&&(n[a+1]=qw(n[a+1],r)),a=r;else n[r+1]=gg(c,0),a===0?a=r:n[c+1]=qw(n[c+1],r),c=r;d&&(n[r+1]=oT(n[r+1])),kN(n,h,r,!0),kN(n,h,r,!1),xH(e,h,n,r,s),o=gg(a,c),s?e.classBindings=o:e.styleBindings=o}function xH(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Yu(s,e)>=0&&(t[r+1]=aT(t[r+1]))}function kN(n,e,t,r){let i=n[t+1],s=e===null,o=r?uc(i):hl(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];OH(c,e)&&(a=!0,n[o+1]=r?aT(d):oT(d)),o=r?uc(d):hl(d)}a&&(n[t+1]=r?oT(i):aT(i))}function OH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Yu(n,e)>=0:!1}function pl(n,e,t){return uM(n,e,t,!1),pl}function fn(n,e){return uM(n,e,null,!0),fn}function uM(n,e,t,r){let i=$e(),s=jn(),o=Dw(2);if(s.firstUpdatePass&&LH(s,n,o,r),e!==Qr&&qo(i,o,e)){let a=s.data[jo()];$H(s,a,i,i[Ct],n,i[o+1]=HH(e,t),r,o)}}function FH(n,e){return e>=n.expandoStartIndex}function LH(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[jo()],o=FH(n,t);qH(s,r)&&e===null&&!o&&(e=!1),e=VH(i,s,e,r),MH(i,s,e,t,o,r)}}function VH(n,e,t,r){let i=GP(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=zw(null,n,e,t,r),t=Ph(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=zw(i,n,e,t,r),s===null){let c=UH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=zw(null,n,e,c[1],r),c=Ph(c,e.attrs,r),BH(n,e,r,c))}else s=jH(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function UH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(hl(r)!==0)return n[uc(r)]}function BH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[uc(i)]=r}function jH(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ph(r,o,t)}return Ph(r,e.attrs,t)}function zw(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ph(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ph(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),IP(n,o,t?!0:e[++s]))}return n===void 0?null:n}function $H(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=kH(d)?MN(c,e,t,i,hl(d),o):void 0;if(!Mg(h)){Mg(s)||PH(d)&&(s=MN(c,null,t,i,a,o));let m=fw(jo(),t);J$(r,o,m,i,s)}}function MN(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,m=h===null,I=t[i+1];I===Qr&&(I=m?er:void 0);let S=m?Zm(I,r):h===r?I:void 0;if(d&&!Mg(S)&&(S=Zm(c,r)),Mg(S)&&(a=S,o))return a;let R=n[i+1];i=o?uc(R):hl(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Zm(c,r))}return a}function Mg(n){return n!==void 0}function HH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gs(Bg(n)))),n}function qH(n,e){return(n.flags&(e?8:16))!==0}function V(n,e=""){let t=$e(),r=jn(),i=n+dn,s=r.firstCreatePass?qg(r,i,1,e,null):r.data[i],o=zH(r,t,s,e);t[i]=o,ug()&&TT(r,t,o,s),tl(s,!1)}var zH=(n,e,t,r)=>(lg(!0),f$(e[Ct],r));function GH(n,e,t,r=""){return qo(n,Th(),t)?e+Qu(t)+r:Qr}function WH(n,e,t,r,i,s=""){let o=jP(),a=Jk(n,o,t,i);return Dw(2),a?e+Qu(t)+r+Qu(i)+s:Qr}function qe(n){return pn("",n),qe}function pn(n,e,t){let r=$e(),i=GH(r,n,e,t);return i!==Qr&&lM(r,jo(),i),pn}function Uh(n,e,t,r,i){let s=$e(),o=WH(s,n,e,t,r,i);return o!==Qr&&lM(s,jo(),o),Uh}function lM(n,e,t){let r=fw(e,n);p$(n[Ct],r,t)}function Qg(n,e,t){MT(e)&&(e=e());let r=$e(),i=Th();if(qo(r,i,e)){let s=jn(),o=cg();Sk(o,r,n,e,r[Ct],t)}return Qg}function UT(n,e){let t=MT(n);return t&&n.set(e),t}function Yg(n,e){let t=$e(),r=jn(),i=Cn();return cM(r,t,t[Ct],i,n,e),Yg}function xN(n,e,t){let r=jn();r.firstCreatePass&&dM(e,r.data,r.blueprint,Ti(n),t)}function dM(n,e,t,r,i){if(n=cn(n),Array.isArray(n))for(let s=0;s<n.length;s++)dM(n[s],e,t,r,i);else{let s=jn(),o=$e(),a=Cn(),c=Ya(n)?n:cn(n.provide),d=cw(n),h=a.providerIndexes&1048575,m=a.directiveStart,I=a.providerIndexes>>20;if(Ya(n)||!n.multi){let S=new ac(d,i,de,null),R=Ww(c,e,i?h:h+I,m);R===-1?(Qw(bg(a,o),s,c),Gw(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),o.push(S)):(t[R]=S,o[R]=S)}else{let S=Ww(c,e,h+I,m),R=Ww(c,e,h,h+I),P=S>=0&&t[S],M=R>=0&&t[R];if(i&&!M||!i&&!P){Qw(bg(a,o),s,c);let H=YH(i?QH:KH,t.length,i,r,d,n);!i&&M&&(t[R].providerFactory=H),Gw(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=hM(t[i?R:S],d,!i&&r);Gw(s,n,S>-1?S:R,H)}!i&&r&&M&&t[R].componentProviders++}}}function Gw(n,e,t,r){let i=Ya(e),s=SP(e);if(i||s){let c=(s?cn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function hM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ww(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function KH(n,e,t,r,i){return cT(this.multi,[])}function QH(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Cg(r,r[Se],this.providerFactory.index,i);o=c.slice(0,a),cT(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],cT(s,o);return o}function cT(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function YH(n,e,t,r,i,s){let o=new ac(n,t,de,null);return o.multi=[],o.index=e,o.componentProviders=0,hM(o,i,r&&!t),o}function ml(n,e){return t=>{t.providersResolver=(r,i)=>xN(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>xN(r,i?i(e):e,!0))}}function fc(n,e,t){return JH($e(),Sw(),n,e,t)}function fM(n,e){let t=n[e];return t===Qr?void 0:t}function JH(n,e,t,r,i,s){let o=e+t;return qo(n,o,i)?Yk(n,o+1,s?r.call(s,i):r(i)):fM(n,o+1)}function XH(n,e,t,r,i,s,o){let a=e+t;return Jk(n,a,i,s)?Yk(n,a+2,o?r.call(o,i,s):r(i,s)):fM(n,a+2)}function Pi(n,e){let t=jn(),r,i=n+dn;t.firstCreatePass?(r=ZH(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Po(r.type,!0)),o,a=Mn(de);try{let c=Tg(!1),d=s();return Tg(c),mw(t,$e(),i,d),d}finally{Mn(a)}}function ZH(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ni(n,e,t,r){let i=n+dn,s=$e(),o=pw(s,i);return eq(s,i)?XH(s,Sw(),e,o.transform,t,r,o):o.transform(t,r)}function eq(n,e){return n[Se].data[e].pure}function BT(n,e){return jk(n,e)}var xg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},jT=(()=>{class n{compileModuleSync(t){return new kg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ZI(t),s=mk(i.declarations).reduce((o,a)=>{let c=Oo(a);return c&&o.push(new dl(c)),o},[]);return new xg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pM=(()=>{class n{applicationErrorHandler=B(rr);appRef=B(Ai);taskService=B(vs);ngZone=B(tt);zonelessEnabled=B(bh);tracing=B(kh,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(Fw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?tN:kw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mM(){return[{provide:Mo,useExisting:pM},{provide:tt,useClass:hh},{provide:bh,useValue:!0}]}function tq(){return typeof $localize<"u"&&$localize.locale||Vh}var Bh=new Z("",{factory:()=>B(Bh,{optional:!0,skipSelf:!0})||tq()});function Er(n,e){return pm(n,e?.equal)}var vM=Symbol("InputSignalNode#UNSET"),_q=ae(U({},mm),{transformFn:void 0,applyValueToInputSignal(n,e){th(n,e)}});function EM(n,e){let t=Object.create(_q);t.value=n,t.transformFn=e?.transform;function r(){if(Xd(t),t.value===vM){let i=null;throw new q(-950,i)}return t.value}return r[Nn]=t,r}var Xg=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Nh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function gM(n,e){return EM(n,e)}function vq(n){return EM(vM,n)}var IM=(gM.required=vq,gM);var $T=new Z(""),Eq=new Z("");function jh(n){return!n.moduleRef}function Iq(n){let e=jh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(tt);return t.run(()=>{jh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(rr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),jh(n)){let s=()=>e.destroy(),o=n.platformInjector.get($T);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get($T);o.add(s),n.moduleRef.onDestroy(()=>{Dh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return Tq(r,t,()=>{let s=e.get(vs),o=s.add(),a=e.get(LT);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Bh,Vh);if(aM(c||Vh),!e.get(Eq,!0))return jh(n)?e.get(Ai):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(jh(n)){let h=e.get(Ai);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return wq?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{s.remove(o)})})})}var wq;function Tq(n,e,t){try{let r=t();return Go(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Jg=null;function bq(n=[],e){return yt.create({name:e,providers:[{provide:mh,useValue:"platform"},{provide:$T,useValue:new Set([()=>Jg=null])},...n]})}function Cq(n=[]){if(Jg)return Jg;let e=bq(n);return Jg=e,iM(),Sq(e),e}function Sq(n){let e=n.get(Lg,null);Lt(n,()=>{e?.forEach(t=>t())})}function $h(){return!1}var Dq=1e4;var tme=Dq-1e3;var gl=(()=>{class n{static __NG_ELEMENT_ID__=Aq}return n})();function Aq(n){return Rq(Cn(),$e(),(n&16)===16)}function Rq(n,e,t){if(Bo(n)&&!t){let r=_r(n.index,e);return new Ho(r,r)}else if(n.type&175){let r=e[gr];return new Ho(r,e)}return null}var HT=class{constructor(){}supports(e){return PT(e)}create(e){return new qT(e)}},Pq=(n,e)=>e,qT=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Pq}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<yM(r,i,s)?t:r,a=yM(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let I=0;I<d;I++){let S=I<s.length?s[I]:s[I]=0,R=S+I;h<=R&&R<d&&(s[I]=S+1)}let m=o.previousIndex;s[m]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!PT(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Kk(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new zT(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zT=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},GT=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Zg=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new GT,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function yM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function _M(){return new KT([new HT])}var KT=(()=>{class n{factories;static \u0275prov=te({token:n,providedIn:"root",factory:_M});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=B(n,{optional:!0,skipSelf:!0});return n.create(t,r||_M())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function wM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;at(Ke.BootstrapApplicationStart);try{let s=i?.injector??Cq(r),o=[mM(),rN,...t||[]],a=new Rh({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return Iq({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{at(Ke.BootstrapApplicationEnd)}}function yl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var TM=null;function Ir(){return TM}function QT(n){TM??=n}var Hh=class{},ey=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>B(bM),providedIn:"platform"})}return n})();var bM=(()=>{class n extends ey{_location;_history;_doc=B(At);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ir().getBaseHref(this._doc)}onPopState(t){let r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function DM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function CM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Wo(n){return n&&n[0]!=="?"?`?${n}`:n}var _l=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>B(kq),providedIn:"root"})}return n})(),Nq=new Z(""),kq=(()=>{class n extends _l{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(At).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return DM(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Wo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Wo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Wo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(fe(ey),fe(Nq,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ko=(()=>{class n{_subject=new wt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Oq(CM(SM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wo(r))}normalize(t){return n.stripTrailingSlash(xq(this._basePath,SM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wo;static joinWithSlash=DM;static stripTrailingSlash=CM;static \u0275fac=function(r){return new(r||n)(fe(_l))};static \u0275prov=te({token:n,factory:()=>Mq(),providedIn:"root"})}return n})();function Mq(){return new Ko(fe(_l))}function xq(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SM(n){return n.replace(/\/index.html$/,"")}function Oq(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Sn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Sn||{}),ct=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ct||{}),$n=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})($n||{}),ws={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kM(n){return ir(n)[Rt.LocaleId]}function MM(n,e,t){let r=ir(n),i=[r[Rt.DayPeriodsFormat],r[Rt.DayPeriodsStandalone]],s=wr(i,e);return wr(s,t)}function xM(n,e,t){let r=ir(n),i=[r[Rt.DaysFormat],r[Rt.DaysStandalone]],s=wr(i,e);return wr(s,t)}function OM(n,e,t){let r=ir(n),i=[r[Rt.MonthsFormat],r[Rt.MonthsStandalone]],s=wr(i,e);return wr(s,t)}function FM(n,e){let r=ir(n)[Rt.Eras];return wr(r,e)}function qh(n,e){let t=ir(n);return wr(t[Rt.DateFormat],e)}function zh(n,e){let t=ir(n);return wr(t[Rt.TimeFormat],e)}function Gh(n,e){let r=ir(n)[Rt.DateTimeFormat];return wr(r,e)}function Wh(n,e){let t=ir(n),r=t[Rt.NumberSymbols][e];if(typeof r>"u"){if(e===ws.CurrencyDecimal)return t[Rt.NumberSymbols][ws.Decimal];if(e===ws.CurrencyGroup)return t[Rt.NumberSymbols][ws.Group]}return r}function LM(n){if(!n[Rt.ExtraData])throw new q(2303,!1)}function VM(n){let e=ir(n);return LM(e),(e[Rt.ExtraData][2]||[]).map(r=>typeof r=="string"?YT(r):[YT(r[0]),YT(r[1])])}function UM(n,e,t){let r=ir(n);LM(r);let i=[r[Rt.ExtraData][0],r[Rt.ExtraData][1]],s=wr(i,e)||[];return wr(s,t)||[]}function wr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new q(2304,!1)}function YT(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Fq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ty={},Lq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function BM(n,e,t,r){let i=Gq(n);e=Is(t,e)||e;let o=[],a;for(;e;)if(a=Lq.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=$M(r,c),i=zq(i,r));let d="";return o.forEach(h=>{let m=Hq(h);d+=m?m(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function oy(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Is(n,e){let t=kM(n);if(ty[t]??={},ty[t][e])return ty[t][e];let r="";switch(e){case"shortDate":r=qh(n,$n.Short);break;case"mediumDate":r=qh(n,$n.Medium);break;case"longDate":r=qh(n,$n.Long);break;case"fullDate":r=qh(n,$n.Full);break;case"shortTime":r=zh(n,$n.Short);break;case"mediumTime":r=zh(n,$n.Medium);break;case"longTime":r=zh(n,$n.Long);break;case"fullTime":r=zh(n,$n.Full);break;case"short":let i=Is(n,"shortTime"),s=Is(n,"shortDate");r=ny(Gh(n,$n.Short),[i,s]);break;case"medium":let o=Is(n,"mediumTime"),a=Is(n,"mediumDate");r=ny(Gh(n,$n.Medium),[o,a]);break;case"long":let c=Is(n,"longTime"),d=Is(n,"longDate");r=ny(Gh(n,$n.Long),[c,d]);break;case"full":let h=Is(n,"fullTime"),m=Is(n,"fullDate");r=ny(Gh(n,$n.Full),[h,m]);break}return r&&(ty[t][e]=r),r}function ny(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Jr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Vq(n,e){return Jr(n,3).substring(0,e)}function Bt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=Uq(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Vq(a,e);let c=Wh(o,ws.MinusSign);return Jr(a,e,c,r,i)}}function Uq(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new q(2301,!1)}}function mt(n,e,t=Sn.Format,r=!1){return function(i,s){return Bq(i,s,n,e,t,r)}}function Bq(n,e,t,r,i,s){switch(t){case 2:return OM(e,i,r)[n.getMonth()];case 1:return xM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=VM(e),h=UM(e,i,r),m=d.findIndex(I=>{if(Array.isArray(I)){let[S,R]=I,P=o>=S.hours&&a>=S.minutes,M=o<R.hours||o===R.hours&&a<R.minutes;if(S.hours<R.hours){if(P&&M)return!0}else if(P||M)return!0}else if(I.hours===o&&I.minutes===a)return!0;return!1});if(m!==-1)return h[m]}return MM(e,i,r)[o<12?0:1];case 3:return FM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new q(2302,!1)}}function ry(n){return function(e,t,r){let i=-1*r,s=Wh(t,ws.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Jr(o,2,s)+Jr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Jr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Jr(o,2,s)+":"+Jr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Jr(o,2,s)+":"+Jr(Math.abs(i%60),2,s);default:throw new q(2310,!1)}}}var jq=0,sy=4;function $q(n){let e=oy(n,jq,1).getDay();return oy(n,0,1+(e<=sy?sy:sy+7)-e)}function jM(n){let e=n.getDay(),t=e===0?-3:sy-e;return oy(n.getFullYear(),n.getMonth(),n.getDate()+t)}function JT(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=jM(t),o=$q(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Jr(i,n,Wh(r,ws.MinusSign))}}function iy(n,e=!1){return function(t,r){let s=jM(t).getFullYear();return Jr(s,n,Wh(r,ws.MinusSign),e)}}var XT={};function Hq(n){if(XT[n])return XT[n];let e;switch(n){case"G":case"GG":case"GGG":e=mt(3,ct.Abbreviated);break;case"GGGG":e=mt(3,ct.Wide);break;case"GGGGG":e=mt(3,ct.Narrow);break;case"y":e=Bt(0,1,0,!1,!0);break;case"yy":e=Bt(0,2,0,!0,!0);break;case"yyy":e=Bt(0,3,0,!1,!0);break;case"yyyy":e=Bt(0,4,0,!1,!0);break;case"Y":e=iy(1);break;case"YY":e=iy(2,!0);break;case"YYY":e=iy(3);break;case"YYYY":e=iy(4);break;case"M":case"L":e=Bt(1,1,1);break;case"MM":case"LL":e=Bt(1,2,1);break;case"MMM":e=mt(2,ct.Abbreviated);break;case"MMMM":e=mt(2,ct.Wide);break;case"MMMMM":e=mt(2,ct.Narrow);break;case"LLL":e=mt(2,ct.Abbreviated,Sn.Standalone);break;case"LLLL":e=mt(2,ct.Wide,Sn.Standalone);break;case"LLLLL":e=mt(2,ct.Narrow,Sn.Standalone);break;case"w":e=JT(1);break;case"ww":e=JT(2);break;case"W":e=JT(1,!0);break;case"d":e=Bt(2,1);break;case"dd":e=Bt(2,2);break;case"c":case"cc":e=Bt(7,1);break;case"ccc":e=mt(1,ct.Abbreviated,Sn.Standalone);break;case"cccc":e=mt(1,ct.Wide,Sn.Standalone);break;case"ccccc":e=mt(1,ct.Narrow,Sn.Standalone);break;case"cccccc":e=mt(1,ct.Short,Sn.Standalone);break;case"E":case"EE":case"EEE":e=mt(1,ct.Abbreviated);break;case"EEEE":e=mt(1,ct.Wide);break;case"EEEEE":e=mt(1,ct.Narrow);break;case"EEEEEE":e=mt(1,ct.Short);break;case"a":case"aa":case"aaa":e=mt(0,ct.Abbreviated);break;case"aaaa":e=mt(0,ct.Wide);break;case"aaaaa":e=mt(0,ct.Narrow);break;case"b":case"bb":case"bbb":e=mt(0,ct.Abbreviated,Sn.Standalone,!0);break;case"bbbb":e=mt(0,ct.Wide,Sn.Standalone,!0);break;case"bbbbb":e=mt(0,ct.Narrow,Sn.Standalone,!0);break;case"B":case"BB":case"BBB":e=mt(0,ct.Abbreviated,Sn.Format,!0);break;case"BBBB":e=mt(0,ct.Wide,Sn.Format,!0);break;case"BBBBB":e=mt(0,ct.Narrow,Sn.Format,!0);break;case"h":e=Bt(3,1,-12);break;case"hh":e=Bt(3,2,-12);break;case"H":e=Bt(3,1);break;case"HH":e=Bt(3,2);break;case"m":e=Bt(4,1);break;case"mm":e=Bt(4,2);break;case"s":e=Bt(5,1);break;case"ss":e=Bt(5,2);break;case"S":e=Bt(6,1);break;case"SS":e=Bt(6,2);break;case"SSS":e=Bt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=ry(0);break;case"ZZZZZ":e=ry(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ry(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=ry(2);break;default:return null}return XT[n]=e,e}function $M(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function qq(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function zq(n,e,t){let i=n.getTimezoneOffset(),s=$M(e,i);return qq(n,-1*(s-i))}function Gq(n){if(AM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return oy(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Fq))return Wq(r)}let e=new Date(n);if(!AM(e))throw new q(2311,!1);return e}function Wq(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function AM(n){return n instanceof Date&&!isNaN(n.valueOf())}var ZT=/\s+/,RM=[],eb=(()=>{class n{_ngEl;_renderer;initialClasses=RM;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(ZT):RM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(ZT):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(ZT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(de(Di),de(zo))};static \u0275dir=Ut({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ay=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Tr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ay(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),PM(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);PM(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(de(hc),de(xh),de(KT))};static \u0275dir=Ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function PM(n,e){n.context.$implicit=e.item}var xn=(()=>{class n{_viewContainer;_context=new cy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){NM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){NM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(de(hc),de(xh))};static \u0275dir=Ut({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),cy=class{$implicit=null;ngIf=null};function NM(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}function Kq(n,e){return new q(2100,!1)}var Qq="mediumDate",HM=new Z(""),qM=new Z(""),pc=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??Qq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return BM(t,o,s||this.locale,a)}catch(o){throw Kq(n,o.message)}}static \u0275fac=function(r){return new(r||n)(de(Bh,16),de(HM,24),de(qM,24))};static \u0275pipe=NT({name:"date",type:n,pure:!0})}return n})();var Dn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=vr({type:n});static \u0275inj=tr({})}return n})();function tb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Kh=class{};var zM="browser";var Qh=class{_doc;constructor(e){this._doc=e}manager},uy=(()=>{class n extends Qh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(fe(At))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),hy=new Z(""),sb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof uy));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof uy);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(fe(hy),fe(tt))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),nb="ng-app-id";function GM(n){for(let e of n)e.remove()}function WM(n,e){let t=e.createElement("style");return t.textContent=n,t}function Yq(n,e,t,r){let i=n.head?.querySelectorAll(`style[${nb}="${e}"],link[${nb}="${e}"]`);if(i)for(let s of i)s.removeAttribute(nb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function ib(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ob=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,Yq(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,WM);r?.forEach(i=>this.addUsage(i,this.external,ib))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(GM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])GM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,WM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,ib(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(fe(At),fe(Fg),fe(Ug,8),fe(dc))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),rb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ab=/%COMP%/g;var QM="%COMP%",Jq=`_nghost-${QM}`,Xq=`_ngcontent-${QM}`,Zq=!0,e6=new Z("",{factory:()=>Zq});function t6(n){return Xq.replace(ab,n)}function n6(n){return Jq.replace(ab,n)}function YM(n,e){return e.map(t=>t.replace(ab,n))}var Xh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.defaultRenderer=new Yh(t,o,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof dy?i.applyToHost(t):i instanceof Jh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.tracingService;switch(r.encapsulation){case Kr.Emulated:s=new dy(c,d,r,this.appId,h,o,a,m);break;case Kr.ShadowDom:return new ly(c,t,r,o,a,this.nonce,m,d);case Kr.ExperimentalIsolatedShadowDom:return new ly(c,t,r,o,a,this.nonce,m);default:s=new Jh(c,d,r,h,o,a,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(fe(sb),fe(ob),fe(Fg),fe(e6),fe(At),fe(tt),fe(Ug),fe(kh,8))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),Yh=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(rb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(KM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(KM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=rb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=rb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ci.DashCase|Ci.Important)?e.style.setProperty(t,r,i&Ci.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ci.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ir().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function KM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ly=class extends Yh{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c){super(e,i,s,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=YM(r.id,d);for(let m of d){let I=document.createElement("style");o&&I.setAttribute("nonce",o),I.textContent=m,this.shadowRoot.appendChild(I)}let h=r.getExternalStyles?.();if(h)for(let m of h){let I=ib(m,i);o&&I.setAttribute("nonce",o),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Jh=class extends Yh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?YM(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ll.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},dy=class extends Jh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,d),this.contentAttr=t6(d),this.hostAttr=n6(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var fy=class n extends Hh{supportsDOMEvents=!0;static makeCurrent(){QT(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=r6();return t==null?null:i6(t)}resetBaseElement(){Zh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tb(document.cookie,e)}},Zh=null;function r6(){return Zh=Zh||document.head.querySelector("base"),Zh?Zh.getAttribute("href"):null}function i6(n){return new URL(n,document.baseURI).pathname}var s6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),JM=["alt","control","meta","shift"],o6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},a6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},XM=(()=>{class n extends Qh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ir().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),JM.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=o6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JM.forEach(o=>{if(o!==i){let a=a6[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(fe(At))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();async function cb(n,e,t){let r=U({rootComponent:n},c6(e,t));return wM(r)}function c6(n,e){return{platformRef:e?.platformRef,appProviders:[...f6,...n?.providers??[]],platformProviders:h6}}function u6(){fy.makeCurrent()}function l6(){return new ys}function d6(){return dT(document),document}var h6=[{provide:dc,useValue:zM},{provide:Lg,useValue:u6,multi:!0},{provide:At,useFactory:d6}];var f6=[{provide:mh,useValue:"root"},{provide:ys,useFactory:l6},{provide:hy,useClass:uy,multi:!0},{provide:hy,useClass:XM,multi:!0},Xh,ob,sb,{provide:Es,useExisting:Xh},{provide:Kh,useClass:s6},[]];var ZM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(fe(At))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var we="primary",hf=Symbol("RouteTitle"),fb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function yc(n){return new fb(n)}function ub(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(i[0]===":")t[i.substring(1)]=s;else if(i!==s.path)return!1}return!0}function ux(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},d=n.slice(0,r.length);return ub(r,d,c)?{consumed:d,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let s=r.slice(0,i),o=r.slice(i+1);if(s.length+o.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!ub(s,n.slice(0,s.length),a)||!ub(o,n.slice(n.length-o.length),a)?null:{consumed:n,posParams:a}}function vy(n){return new Promise((e,t)=>{n.pipe(ps()).subscribe({next:r=>e(r),error:r=>t(r)})})}function m6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}function Mi(n,e){let t=n?pb(n):void 0,r=e?pb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!lx(n[i],e[i]))return!1;return!0}function pb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function g6(n){return n.length>0?n[n.length-1]:null}function Ec(n){return rh(n)?n:Go(n)?Ft(Promise.resolve(n)):Oe(n)}function dx(n){return rh(n)?vy(n):Promise.resolve(n)}var y6={exact:fx,subset:px},hx={exact:_6,subset:v6,ignored:()=>!0};function ex(n,e,t){return y6[t.paths](n.root,e.root,t.matrixParams)&&hx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _6(n,e){return Mi(n,e)}function fx(n,e,t){if(!mc(n.segments,e.segments)||!gy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!fx(n.children[r],e.children[r],t))return!1;return!0}function v6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lx(n[t],e[t]))}function px(n,e,t){return mx(n,e,e.segments,t)}function mx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!mc(i,t)||e.hasChildren()||!gy(i,t,r))}else if(n.segments.length===t.length){if(!mc(n.segments,t)||!gy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!px(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!mc(n.segments,i)||!gy(n.segments,i,r)||!n.children[we]?!1:mx(n.children[we],e,s,r)}}function gy(n,e,t){return e.every((r,i)=>hx[t](n[i].parameters,r.parameters))}var Zr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yc(this.queryParams),this._queryParamMap}toString(){return w6.serialize(this)}},Qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yy(this)}},Qo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=yc(this.parameters),this._parameterMap}toString(){return yx(this)}};function E6(n,e){return mc(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}function mc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function I6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var ff=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>new Yo,providedIn:"root"})}return n})(),Yo=class{parse(e){let t=new gb(e);return new Zr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ef(e.root,!0)}`,r=C6(e.queryParams),i=typeof e.fragment=="string"?`#${T6(e.fragment)}`:"";return`${t}${r}${i}`}},w6=new Yo;function yy(n){return n.segments.map(e=>yx(e)).join("/")}function ef(n,e){if(!n.hasChildren())return yy(n);if(e){let t=n.children[we]?ef(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${ef(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=I6(n,(r,i)=>i===we?[ef(n.children[we],!1)]:[`${i}:${ef(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${yy(n)}/${t[0]}`:`${yy(n)}/(${t.join("//")})`}}function gx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function py(n){return gx(n).replace(/%3B/gi,";")}function T6(n){return encodeURI(n)}function mb(n){return gx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _y(n){return decodeURIComponent(n)}function tx(n){return _y(n.replace(/\+/g,"%20"))}function yx(n){return`${mb(n.path)}${b6(n.parameters)}`}function b6(n){return Object.entries(n).map(([e,t])=>`;${mb(e)}=${mb(t)}`).join("")}function C6(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${py(t)}=${py(i)}`).join("&"):`${py(t)}=${py(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var S6=/^[^\/()?;#]+/;function lb(n){let e=n.match(S6);return e?e[0]:""}var D6=/^[^\/()?;=#]+/;function A6(n){let e=n.match(D6);return e?e[0]:""}var R6=/^[^=?&#]+/;function P6(n){let e=n.match(R6);return e?e[0]:""}var N6=/^[^&#]+/;function k6(n){let e=n.match(N6);return e?e[0]:""}var gb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new Qe(e,t)),r}parseSegment(){let e=lb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Qo(_y(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=A6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=lb(this.remaining);i&&(r=i,this.capture(r))}e[_y(t)]=_y(r)}parseQueryParam(e){let t=P6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=k6(this.remaining);o&&(r=o,this.capture(r))}let i=tx(t),s=tx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=lb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s??we]=Object.keys(o).length===1&&o[we]?o[we]:new Qe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function _x(n){return n.segments.length>0?new Qe([],{[we]:n}):n}function vx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=vx(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Qe(n.segments,e);return M6(t)}function M6(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new Qe(n.segments.concat(e.segments),e.children)}return n}function Jo(n){return n instanceof Zr}function Ex(n,e,t=null,r=null,i=new Yo){let s=Ix(n);return wx(s,e,t,r,i)}function Ix(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Qe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=_x(r);return e??i}function wx(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return db(s,s,s,t,r,i);let o=x6(e);if(o.toRoot())return db(s,s,new Qe([],{}),t,r,i);let a=O6(o,s,n),c=a.processChildren?nf(a.segmentGroup,a.index,o.commands):bx(a.segmentGroup,a.index,o.commands);return db(s,a.segmentGroup,c,t,r,i)}function Ey(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function of(n){return typeof n=="object"&&n!=null&&n.outlets}function nx(n,e,t){n||="\u0275";let r=new Zr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function db(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(m=>nx(d,m,s)):nx(d,h,s);let a;n===e?a=t:a=Tx(n,e,t);let c=_x(vx(a));return new Zr(c,o,i)}function Tx(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Tx(s,e,t)}),new Qe(n.segments,r)}var Iy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ey(r[0]))throw new q(4003,!1);let i=r.find(of);if(i&&i!==g6(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function x6(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Iy(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Iy(t,e,r)}var El=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function O6(n,e,t){if(n.isAbsolute)return new El(e,!0,0);if(!t)return new El(e,!1,NaN);if(t.parent===null)return new El(t,!0,0);let r=Ey(n.commands[0])?0:1,i=t.segments.length-1+r;return F6(t,i,n.numberOfDoubleDots)}function F6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new El(r,!1,i-s)}function L6(n){return of(n[0])?n[0].outlets:{[we]:n}}function bx(n,e,t){if(n??=new Qe([],{}),n.segments.length===0&&n.hasChildren())return nf(n,e,t);let r=V6(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Qe(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new Qe(n.segments.slice(r.pathIndex),n.children),nf(s,0,i)}else return r.match&&i.length===0?new Qe(n.segments,{}):r.match&&!n.hasChildren()?yb(n,e,t):r.match?nf(n,0,i):yb(n,e,t)}function nf(n,e,t){if(t.length===0)return new Qe(n.segments,{});{let r=L6(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=nf(n.children[we],e,t);return new Qe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=bx(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Qe(n.segments,i)}}function V6(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(of(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!ix(c,d,o))return s;r+=2}else{if(!ix(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function yb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(of(s)){let c=U6(s.outlets);return new Qe(r,c)}if(i===0&&Ey(t[0])){let c=n.segments[e];r.push(new Qo(c.path,rx(t[0]))),i++;continue}let o=of(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ey(a)?(r.push(new Qo(o,rx(a))),i+=2):(r.push(new Qo(o,{})),i++)}return new Qe(r,{})}function U6(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=yb(new Qe([],{}),0,r))}),e}function rx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ix(n,e,t){return n==t.path&&Mi(e,t.parameters)}var rf="imperative",Xt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Xt||{}),or=class{id;url;constructor(e,t){this.id=e,this.url=t}},_c=class extends or{type=Xt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xi=class extends or{urlAfterRedirects;type=Xt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},An=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(An||{}),af=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(af||{}),br=class extends or{reason;code;type=Xt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function Cx(n){return n instanceof br&&(n.code===An.Redirect||n.code===An.SupersededByNewNavigation)}var Cs=class extends or{reason;code;type=Xt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},vc=class extends or{error;target;type=Xt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wl=class extends or{urlAfterRedirects;state;type=Xt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wy=class extends or{urlAfterRedirects;state;type=Xt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ty=class extends or{urlAfterRedirects;state;shouldActivate;type=Xt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},by=class extends or{urlAfterRedirects;state;type=Xt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cy=class extends or{urlAfterRedirects;state;type=Xt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sy=class{route;type=Xt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Dy=class{route;type=Xt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ay=class{snapshot;type=Xt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ry=class{snapshot;type=Xt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Py=class{snapshot;type=Xt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ny=class{snapshot;type=Xt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Tl=class{},bl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function B6(n){return!(n instanceof Tl)&&!(n instanceof bl)}var ky=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Dl(this.rootInjector)}},Dl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ky(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(fe(bt))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),My=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=_b(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=_b(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=vb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vb(e,this._root).map(t=>t.value)}};function _b(n,e){if(n===e.value)return e;for(let t of e.children){let r=_b(n,t);if(r)return r}return null}function vb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=vb(n,t);if(r.length)return r.unshift(e),r}return[]}var sr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function vl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var cf=class extends My{snapshot;constructor(e,t){super(e),this.snapshot=t,Db(this,e)}toString(){return this.snapshot.toString()}};function Sx(n,e){let t=j6(n,e),r=new xt([new Qo("",{})]),i=new xt({}),s=new xt({}),o=new xt({}),a=new xt(""),c=new Ss(r,i,o,a,s,we,n,t.root);return c.snapshot=t.root,new cf(new sr(c,[]),t)}function j6(n,e){let t={},r={},i={},o=new gc([],t,i,"",r,we,n,null,{},e);return new uf("",new sr(o,[]))}var Ss=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(We(d=>d[hf]))??Oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(We(e=>yc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(We(e=>yc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&Ax(i)&&(r.resolve[hf]=i.title),r}var gc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[hf]}constructor(e,t,r,i,s,o,a,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},uf=class extends My{url;constructor(e,t){super(t),this.url=e,Db(this,t)}toString(){return Dx(this._root)}};function Db(n,e){e.value._routerState=n,e.children.forEach(t=>Db(n,t))}function Dx(n){let e=n.children.length>0?` { ${n.children.map(Dx).join(", ")} } `:"";return`${n.value}${e}`}function hb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mi(e.params,t.params)||n.paramsSubject.next(t.params),m6(e.url,t.url)||n.urlSubject.next(t.url),Mi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Eb(n,e){let t=Mi(n.params,e.params)&&E6(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Eb(n.parent,e.parent))}function Ax(n){return typeof n.title=="string"||n.title===null}var Rx=new Z(""),pf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=IM();parentContexts=B(Dl);location=B(hc);changeDetector=B(gl);inputBinder=B(Vy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Ib(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Si]})}return n})(),Ib=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ss?this.route:e===Dl?this.childContexts:e===Rx?this.outletData:this.parent.get(e,t)}},Vy=new Z("");var Ab=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Tt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&He(0,"router-outlet")},dependencies:[pf],encapsulation:2})}return n})();function Rb(n){let e=n.children&&n.children.map(Rb),t=e?ae(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=Ab),t}function $6(n,e,t){let r=lf(n,e._root,t?t._root:void 0);return new cf(r,e)}function lf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=H6(n,e,t);return new sr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lf(n,a)),o}}let r=q6(e.value),i=e.children.map(s=>lf(n,s));return new sr(r,i)}}function H6(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lf(n,r,i);return lf(n,r)})}function q6(n){return new Ss(new xt(n.url),new xt(n.params),new xt(n.queryParams),new xt(n.fragment),new xt(n.data),n.outlet,n.component,n)}var Cl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Px="ngNavigationCancelingError";function Oy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Jo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Nx(!1,An.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Nx(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Px]=!0,t.cancellationCode=e,t}function z6(n){return kx(n)&&Jo(n.url)}function kx(n){return!!n&&n[Px]}var wb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=vl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=vl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ny(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ry(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(hb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Fy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Il=class{component;route;constructor(e,t){this.component=e,this.route=t}};function G6(n,e,t){let r=n._root,i=e?e._root:null;return tf(r,i,t,[r.value])}function W6(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Al(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!WI(n)?n:e.get(n):r}function tf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=vl(e);return n.children.forEach(o=>{K6(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>sf(a,t.getContext(o),i)),i}function K6(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Q6(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Fy(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?tf(n,e,a?a.children:null,r,i):tf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Il(a.outlet.component,o))}else o&&sf(e,a,i),i.canActivateChecks.push(new Fy(r)),s.component?tf(n,null,a?a.children:null,r,i):tf(n,null,t,r,i);return i}function Q6(n,e,t){if(typeof t=="function")return Lt(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!mc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mc(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eb(n,e)||!Mi(n.queryParams,e.queryParams);default:return!Eb(n,e)}}function sf(n,e,t){let r=vl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?sf(o,e.children.getContext(s),t):sf(o,null,t):sf(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Il(e.outlet.component,i)):t.canDeactivateChecks.push(new Il(null,i)):t.canDeactivateChecks.push(new Il(null,i))}function mf(n){return typeof n=="function"}function Y6(n){return typeof n=="boolean"}function J6(n){return n&&mf(n.canLoad)}function X6(n){return n&&mf(n.canActivate)}function Z6(n){return n&&mf(n.canActivateChild)}function ez(n){return n&&mf(n.canDeactivate)}function tz(n){return n&&mf(n.canMatch)}function Mx(n){return n instanceof Ga||n?.name==="EmptyError"}var my=Symbol("INITIAL_VALUE");function Sl(){return Un(n=>SI(n.map(e=>e.pipe(an(1),RI(my)))).pipe(We(e=>{for(let t of e)if(t!==!0){if(t===my)return my;if(t===!1||nz(t))return t}return!0}),Tn(e=>e!==my),an(1)))}function nz(n){return Jo(n)||n instanceof Cl}function xx(n){return n.aborted?Oe(void 0).pipe(an(1)):new Ee(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function Ox(n){return oh(xx(n))}function rz(n){return kn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?Oe(ae(U({},e),{guardsResult:!0})):iz(s,t,r).pipe(kn(o=>o&&Y6(o)?sz(t,i,n):Oe(o)),We(o=>ae(U({},e),{guardsResult:o})))})}function iz(n,e,t){return Ft(n).pipe(kn(r=>lz(r.component,r.route,t,e)),ps(r=>r!==!0,!0))}function sz(n,e,t){return Ft(e).pipe(Vm(r=>Gu(az(r.route.parent,t),oz(r.route,t),uz(n,r.path),cz(n,r.route))),ps(r=>r!==!0,!0))}function oz(n,e){return n!==null&&e&&e(new Py(n)),Oe(!0)}function az(n,e){return n!==null&&e&&e(new Ay(n)),Oe(!0)}function cz(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Oe(!0);let r=t.map(i=>ih(()=>{let s=e._environmentInjector,o=Al(i,s),a=X6(o)?o.canActivate(e,n):Lt(s,()=>o(e,n));return Ec(a).pipe(ps())}));return Oe(r).pipe(Sl())}function uz(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>W6(s)).filter(s=>s!==null).map(s=>ih(()=>{let o=s.guards.map(a=>{let c=s.node._environmentInjector,d=Al(a,c),h=Z6(d)?d.canActivateChild(t,n):Lt(c,()=>d(t,n));return Ec(h).pipe(ps())});return Oe(o).pipe(Sl())}));return Oe(i).pipe(Sl())}function lz(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Oe(!0);let s=i.map(o=>{let a=e._environmentInjector,c=Al(o,a),d=ez(c)?c.canDeactivate(n,e,t,r):Lt(a,()=>c(n,e,t,r));return Ec(d).pipe(ps())});return Oe(s).pipe(Sl())}function dz(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Oe(!0);let o=s.map(a=>{let c=Al(a,n),d=J6(c)?c.canLoad(e,t):Lt(n,()=>c(e,t)),h=Ec(d);return i?h.pipe(Ox(i)):h});return Oe(o).pipe(Sl(),Fx(r))}function Fx(n){return _I(vi(e=>{if(typeof e!="boolean")throw Oy(n,e)}),We(e=>e===!0))}function hz(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Oe(!0);let o=s.map(a=>{let c=Al(a,n),d=tz(c)?c.canMatch(e,t):Lt(n,()=>c(e,t));return Ec(d).pipe(Ox(i))});return Oe(o).pipe(Sl(),Fx(r))}var bs=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},df=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function fz(n){throw new q(4e3,!1)}function pz(n){throw Nx(!1,An.GuardRejected)}var Tb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[we])throw fz(`${e.redirectTo}`);i=i.children[we]}}async applyRedirectCommands(e,t,r,i,s){let o=await mz(t,i,s);if(o instanceof Zr)throw new df(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new df(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Zr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Qe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function mz(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:m,paramMap:I,queryParamMap:S}=e;return vy(Ec(Lt(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:m,paramMap:I,queryParamMap:S}))))}function gz(n,e){return n.providers&&!n._injector&&(n._injector=Fh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xr(n){return n.outlet||we}function yz(n,e){let t=n.filter(r=>Xr(r)===e);return t.push(...n.filter(r=>Xr(r)!==e)),t}var bb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _z(n,e,t,r,i,s){let o=Lx(n,e,t);return o.matched?(r=gz(e,r),hz(r,e,t,i,s).pipe(We(a=>a===!0?o:U({},bb)))):Oe(o)}function Lx(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},bb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ux)(t,n,e);if(!i)return U({},bb);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function sx(n,e,t,r){return t.length>0&&Iz(n,t,r)?{segmentGroup:new Qe(e,Ez(r,new Qe(t,n.children))),slicedSegments:[]}:t.length===0&&wz(n,t,r)?{segmentGroup:new Qe(n.segments,vz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Qe(n.segments,n.children),slicedSegments:t}}function vz(n,e,t,r){let i={};for(let s of t)if(Uy(n,e,s)&&!r[Xr(s)]){let o=new Qe([],{});i[Xr(s)]=o}return U(U({},r),i)}function Ez(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&Xr(r)!==we){let i=new Qe([],{});t[Xr(r)]=i}return t}function Iz(n,e,t){return t.some(r=>Uy(n,e,r)&&Xr(r)!==we)}function wz(n,e,t){return t.some(r=>Uy(n,e,r))}function Uy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Tz(n,e,t){return e.length===0&&!n.children[t]}var Cb=class{};async function bz(n,e,t,r,i,s,o="emptyOnly",a){return new Sb(n,e,t,r,i,o,s,a).recognize()}var Cz=31,Sb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Tb(this.urlSerializer,this.urlTree)}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}async recognize(){let e=sx(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new sr(r,t),s=new uf("",i),o=Ex(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new gc([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,we,t),rootSnapshot:t}}catch(r){if(r instanceof df)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof bs?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof sr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=yz(t,c),m=await this.processSegmentGroup(e,h,d,c,i);o.push(...m)}let a=Vx(o);return Sz(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof bs||Mx(d))continue;throw d}if(Tz(r,i,s))return new Cb;throw new bs(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Xr(r)!==o&&(o===we||!Uy(i,s,r)))throw new bs(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new bs(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:m,remainingSegments:I}=Lx(t,i,s);if(!c)throw new bs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Cz&&(this.allowRedirects=!1));let S=new gc(s,d,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,ox(i),Xr(i),i.component??i._loadedComponent??null,i,ax(i),e),R=xy(S,a,this.paramsInheritanceStrategy);if(S.params=Object.freeze(R.params),S.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,S,e),M=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,M.concat(I),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await vy(_z(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new bs(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:I}=a,S=new gc(m,h,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,ox(r),Xr(r),r.component??r._loadedComponent??null,r,ax(r),e),R=xy(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(R.params),S.data=Object.freeze(R.data);let{segmentGroup:P,slicedSegments:M}=sx(t,m,I,c);if(M.length===0&&P.hasChildren()){let Y=await this.processChildren(d,c,P,S);return new sr(S,Y)}if(c.length===0&&M.length===0)return new sr(S,[]);let H=Xr(r)===s,K=await this.processSegment(d,c,P,M,H?we:s,!0,S);return new sr(S,K instanceof sr?[K]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let s=t._loadedNgModuleFactory;return s&&!t._loadedInjector&&(t._loadedInjector=s.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await vy(dz(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,t._loadedNgModuleFactory=s.factory,s}throw pz(t)}return{routes:[],injector:e}}};function Sz(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function Dz(n){let e=n.value.routeConfig;return e&&e.path===""}function Vx(n){let e=[],t=new Set;for(let r of n){if(!Dz(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Vx(r.children);e.push(new sr(r.value,i))}return e.filter(r=>!t.has(r))}function ox(n){return n.data||{}}function ax(n){return n.resolve||{}}function Az(n,e,t,r,i,s,o){return kn(async a=>{let{state:c,tree:d}=await bz(n,e,t,r,a.extractedUrl,i,s,o);return ae(U({},a),{targetSnapshot:c,urlAfterRedirects:d})})}function Rz(n){return kn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Oe(e);let i=new Set(r.map(a=>a.route)),s=new Set;for(let a of i)if(!s.has(a))for(let c of Ux(a))s.add(c);let o=0;return Ft(s).pipe(Vm(a=>i.has(a)?Pz(a,t,n):(a.data=xy(a,a.parent,n).resolve,Oe(void 0))),vi(()=>o++),Um(1),kn(a=>o===s.size?Oe(e):on))})}function Ux(n){let e=n.children.map(t=>Ux(t)).flat();return[n,...e]}function Pz(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!Ax(r)&&(i[hf]=r.title),ih(()=>(n.data=xy(n,n.parent,t).resolve,Nz(i,n,e).pipe(We(s=>(n._resolvedData=s,n.data=U(U({},n.data),s),null)))))}function Nz(n,e,t){let r=pb(n);if(r.length===0)return Oe({});let i={};return Ft(r).pipe(kn(s=>kz(n[s],e,t).pipe(ps(),vi(o=>{if(o instanceof Cl)throw Oy(new Yo,o);i[s]=o}))),Um(1),We(()=>i),sh(s=>Mx(s)?on:CI(s)))}function kz(n,e,t){let r=e._environmentInjector,i=Al(n,r),s=i.resolve?i.resolve(e,t):Lt(r,()=>i(e,t));return Ec(s)}function cx(n){return Un(e=>{let t=n(e);return t?Ft(t).pipe(We(()=>e)):Oe(e)})}var Pb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[hf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>B(Bx),providedIn:"root"})}return n})(),Bx=(()=>{class n extends Pb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(fe(ZM))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rl=new Z("",{factory:()=>({})}),gf=new Z(""),jx=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=B(jT);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await dx(Lt(t,()=>r.loadComponent())),o=await qx(Hx(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await $x(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function $x(n,e,t,r){let i=await dx(Lt(t,()=>n.loadChildren())),s=await qx(Hx(i)),o;s instanceof Gg||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1,h;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,h=o,c=a.get(gf,[],{optional:!0,self:!0}).flat()),{routes:c.map(Rb),injector:a,factory:h}}function Mz(n){return n&&typeof n=="object"&&"default"in n}function Hx(n){return Mz(n)?n.default:n}async function qx(n){return n}var By=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>B(xz),providedIn:"root"})}return n})(),xz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zx=new Z("");var Oz=()=>{},Gx=new Z(""),Wx=(()=>{class n{currentNavigation=Pe(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Pe(null);events=new wt;transitionAbortWithErrorSubject=new wt;configLoader=B(jx);environmentInjector=B(bt);destroyRef=B(Gr);urlSerializer=B(ff);rootContexts=B(Dl);location=B(Ko);inputBindingEnabled=B(Vy,{optional:!0})!==null;titleStrategy=B(Pb);options=B(Rl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=B(By);createViewTransition=B(zx,{optional:!0});navigationErrorHandler=B(Gx,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Oe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Sy(i)),r=i=>this.events.next(new Dy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Vt(()=>{this.transitions?.next(ae(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new xt(null),this.transitions.pipe(Tn(r=>r!==null),Un(r=>{let i=!1,s=new AbortController,o=()=>!i&&this.currentTransition?.id===r.id;return Oe(r).pipe(Un(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",An.SupersededByNewNavigation),on;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?ae(U({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload")return this.events.next(new Cs(a.id,this.urlSerializer.serialize(a.rawUrl),"",af.IgnoredSameUrlNavigation)),a.resolve(!1),on;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Oe(a).pipe(Un(m=>(this.events.next(new _c(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?on:Promise.resolve(m))),Az(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),vi(m=>{r.targetSnapshot=m.targetSnapshot,r.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(S=>(S.finalUrl=m.urlAfterRedirects,S));let I=new wl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:m,extractedUrl:I,source:S,restoredState:R,extras:P}=a,M=new _c(m,this.urlSerializer.serialize(I),S,R);this.events.next(M);let H=Sx(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ae(U({},a),{targetSnapshot:H,urlAfterRedirects:I,extras:ae(U({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(K=>(K.finalUrl=I,K)),Oe(r)}else return this.events.next(new Cs(a.id,this.urlSerializer.serialize(a.extractedUrl),"",af.IgnoredByUrlHandlingStrategy)),a.resolve(!1),on}),We(a=>{let c=new wy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=ae(U({},a),{guards:G6(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),rz(a=>this.events.next(a)),Un(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Oy(this.urlSerializer,a.guardsResult);let c=new Ty(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!o())return on;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",An.GuardRejected),on;if(a.guards.canActivateChecks.length===0)return Oe(a);let d=new by(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!o())return on;let h=!1;return Oe(a).pipe(Rz(this.paramsInheritanceStrategy),vi({next:()=>{h=!0;let m=new Cy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)},complete:()=>{h||this.cancelNavigationTransition(a,"",An.NoDataFromResolver)}}))}),cx(a=>{let c=h=>{let m=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let I=h._environmentInjector;m.push(this.configLoader.loadComponent(I,h.routeConfig).then(S=>{h.component=S}))}for(let I of h.children)m.push(...c(I));return m},d=c(a.targetSnapshot.root);return d.length===0?Oe(a):Ft(Promise.all(d).then(()=>a))}),cx(()=>this.afterPreactivation()),Un(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?Ft(d).pipe(We(()=>r)):Oe(r)}),an(1),We(a=>{let c=$6(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=ae(U({},a),{targetRouterState:c}),this.currentNavigation.update(d=>(d.targetRouterState=c,d)),this.events.next(new Tl),o()&&(new wb(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),o()&&(i=!0,this.currentNavigation.update(d=>(d.abort=Oz,d)),this.lastSuccessfulNavigation.set(Vt(this.currentNavigation)),this.events.next(new xi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),oh(xx(s.signal).pipe(Tn(()=>!i&&!r.targetRouterState),vi(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",An.Aborted)}))),vi({complete:()=>{i=!0}}),oh(this.transitionAbortWithErrorSubject.pipe(vi(a=>{throw a}))),AI(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",An.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),sh(a=>{if(i=!0,this.destroyed)return r.resolve(!1),on;if(kx(a))this.events.next(new br(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),z6(a)?this.events.next(new bl(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new vc(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=Lt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Cl){let{message:h,cancellationCode:m}=Oy(this.urlSerializer,d);this.events.next(new br(r.id,this.urlSerializer.serialize(r.extractedUrl),h,m)),this.events.next(new bl(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return on}))}))}cancelNavigationTransition(t,r,i){let s=new br(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Vt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fz(n){return n!==rf}var Kx=new Z("");var Qx=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>B(Lz),providedIn:"root"})}return n})(),Ly=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},Lz=(()=>{class n extends Ly{static \u0275fac=(()=>{let t;return function(i){return(t||(t=lc(n)))(i||n)}})();static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nb=(()=>{class n{urlSerializer=B(ff);options=B(Rl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=B(Ko);urlHandlingStrategy=B(By);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Zr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Sx(null,B(bt));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>B(Vz),providedIn:"root"})}return n})(),Vz=(()=>{class n extends Nb{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof _c?this.updateStateMemento():t instanceof Cs?this.commitTransition(r):t instanceof wl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Tl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof br&&!Cx(t)?this.restoreHistory(r):t instanceof vc?this.restoreHistory(r,!0):t instanceof xi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=U(U({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=U(U({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=lc(n)))(i||n)}})();static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kb(n,e){n.events.pipe(Tn(t=>t instanceof xi||t instanceof br||t instanceof vc||t instanceof Cs),We(t=>t instanceof xi||t instanceof Cs?0:(t instanceof br?t.code===An.Redirect||t.code===An.SupersededByNewNavigation:!1)?2:1),Tn(t=>t!==2),an(1)).subscribe(()=>{e()})}var Yx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ic=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=B(kT);stateManager=B(Nb);options=B(Rl,{optional:!0})||{};pendingTasks=B(vs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=B(Wx);urlSerializer=B(ff);location=B(Ko);urlHandlingStrategy=B(By);injector=B(bt);_events=new wt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=B(Qx);injectorCleanup=B(Kx,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=B(gf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!B(Vy,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Kt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Vt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof br&&r.code!==An.Redirect&&r.code!==An.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xi)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof bl){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Fz(i.source)},o);this.scheduleNavigation(a,rf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}B6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(rr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Vt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Rb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let I=i?i.snapshot:this.routerState.snapshot.root;m=Ix(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return wx(m,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Jo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,rf,null,r)}navigate(t,r={skipLocationChange:!1}){return Uz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(xo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},Yx):r===!1?i=U({},Jx):i=r,Jo(t))return ex(this.currentUrlTree,t,i);let s=this.parseUrl(t);return ex(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((m,I)=>{a=m,c=I});let h=this.pendingTasks.add();return kb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}var jy=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Pe(null);get href(){return Vt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new wt;applicationErrorHandler=B(rr);options=B(Rl,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(B(new Xg("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof xi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Jo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Jo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(de(Ic),de(Ss),Nh("tabindex"),de(zo),de(Di),de(_l))};static \u0275dir=Ut({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&re("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Lh("href",i.reactiveHref(),mT)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",yl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",yl],replaceUrl:[2,"replaceUrl","replaceUrl",yl],routerLink:"routerLink"},features:[Si]})}return n})();var $z=new Z("");function Mb(n,...e){return ln([{provide:gf,multi:!0,useValue:n},[],{provide:Ss,useFactory:Hz},{provide:Kg,multi:!0,useFactory:qz},e.map(t=>t.\u0275providers)])}function Hz(){return B(Ic).routerState.root}function qz(){let n=B(yt);return e=>{let t=n.get(Ai);if(e!==t.components[0])return;let r=n.get(Ic),i=n.get(zz);n.get(Gz)===1&&r.initialNavigation(),n.get(Wz,null,{optional:!0})?.setUpPreloading(),n.get($z,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zz=new Z("",{factory:()=>new wt}),Gz=new Z("",{factory:()=>1});var Wz=new Z("");var ve=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(ve||{}),Cr="*";function xb(n,e){return{type:ve.Trigger,name:n,definitions:e,options:{}}}function Ob(n,e=null){return{type:ve.Animate,styles:e,timings:n}}function Xx(n,e=null){return{type:ve.Sequence,steps:n,options:e}}function Tc(n){return{type:ve.Style,styles:n,offset:null}}function Fb(n,e,t=null){return{type:ve.Transition,expr:n,animation:e,options:t}}function Lb(n,e,t=null){return{type:ve.Query,selector:n,animation:e,options:t}}function Vb(n,e){return{type:ve.Stagger,timings:n,animation:e}}var Oi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},wc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Pl="!";function Zx(n){return new q(3e3,!1)}function Kz(){return new q(3100,!1)}function Qz(){return new q(3101,!1)}function Yz(n){return new q(3001,!1)}function Jz(n){return new q(3003,!1)}function Xz(n){return new q(3004,!1)}function t1(n,e){return new q(3005,!1)}function n1(){return new q(3006,!1)}function r1(){return new q(3007,!1)}function i1(n,e){return new q(3008,!1)}function s1(n){return new q(3002,!1)}function o1(n,e,t,r,i){return new q(3010,!1)}function a1(){return new q(3011,!1)}function c1(){return new q(3012,!1)}function u1(){return new q(3200,!1)}function l1(){return new q(3202,!1)}function d1(){return new q(3013,!1)}function h1(n){return new q(3014,!1)}function f1(n){return new q(3015,!1)}function p1(n){return new q(3016,!1)}function m1(n,e){return new q(3404,!1)}function Zz(n){return new q(3502,!1)}function g1(n){return new q(3503,!1)}function y1(){return new q(3300,!1)}function _1(n){return new q(3504,!1)}function v1(n){return new q(3301,!1)}function E1(n,e){return new q(3302,!1)}function I1(n){return new q(3303,!1)}function w1(n,e){return new q(3400,!1)}function T1(n){return new q(3401,!1)}function b1(n){return new q(3402,!1)}function C1(n,e){return new q(3505,!1)}function Ds(n){switch(n.length){case 0:return new Oi;case 1:return n[0];default:return new wc(n)}}function $b(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let d=c.get("offset"),h=d==o,m=h&&a||new Map;c.forEach((I,S)=>{let R=S,P=I;if(S!=="offset")switch(R=n.normalizePropertyName(R,i),P){case Pl:P=t.get(S);break;case Cr:P=r.get(S);break;default:P=n.normalizeStyleValue(S,R,P,i);break}m.set(R,P)}),h||s.push(m),a=m,o=d}),i.length)throw Zz(i);return s}function $y(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ub(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ub(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ub(t,"destroy",n)));break}}function Ub(n,e,t){let r=t.totalTime,i=!!t.disabled,s=Hy(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function Hy(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Hn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Hb(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var e5=typeof document>"u"?null:document.documentElement;function qy(n){let e=n.parentNode||n.host||null;return e===e5?null:e}function t5(n){return n.substring(1,6)=="ebkit"}var bc=null,e1=!1;function S1(n){bc||(bc=n5()||{},e1=bc.style?"WebkitAppearance"in bc.style:!1);let e=!0;return bc.style&&!t5(n)&&(e=n in bc.style,!e&&e1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in bc.style)),e}function n5(){return typeof document<"u"?document.body:null}function qb(n,e){for(;e;){if(e===n)return!0;e=qy(e)}return!1}function zb(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var r5=1e3,Gb="{{",i5="}}",Wb="ng-enter",zy="ng-leave",yf="ng-trigger",_f=".ng-trigger",Kb="ng-animating",Gy=".ng-animating";function Fi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Bb(parseFloat(e[1]),e[2])}function Bb(n,e){return e==="s"?n*r5:n}function vf(n,e,t){return n.hasOwnProperty("duration")?n:o5(n,e,t)}var s5=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function o5(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(s5);if(o===null)return e.push(Zx(n)),{duration:0,delay:0,easing:""};r=Bb(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=Bb(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(Kz()),o=!0),i<0&&(e.push(Qz()),o=!0),o&&e.splice(a,0,Zx(n))}return{duration:r,delay:i,easing:s}}function D1(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function ei(n,e,t){e.forEach((r,i)=>{let s=Wy(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Xo(n,e){e.forEach((t,r)=>{let i=Wy(r);n.style[i]=""})}function Nl(n){return Array.isArray(n)?n.length==1?n[0]:Xx(n):n}function A1(n,e,t){let r=e.params||{},i=Qb(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(Yz(s))})}var jb=new RegExp(`${Gb}\\s*(.+?)\\s*${i5}`,"g");function Qb(n){let e=[];if(typeof n=="string"){let t;for(;t=jb.exec(n);)e.push(t[1]);jb.lastIndex=0}return e}function kl(n,e,t){let r=`${n}`,i=r.replace(jb,(s,o)=>{let a=e[o];return a==null&&(t.push(Jz(o)),a=""),a.toString()});return i==r?n:i}var a5=/-+([a-z0-9])/g;function Wy(n){return n.replace(a5,(...e)=>e[1].toUpperCase())}function R1(n,e){return n===0||e===0}function P1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Ky(n,a)))}}return e}function qn(n,e,t){switch(e.type){case ve.Trigger:return n.visitTrigger(e,t);case ve.State:return n.visitState(e,t);case ve.Transition:return n.visitTransition(e,t);case ve.Sequence:return n.visitSequence(e,t);case ve.Group:return n.visitGroup(e,t);case ve.Animate:return n.visitAnimate(e,t);case ve.Keyframes:return n.visitKeyframes(e,t);case ve.Style:return n.visitStyle(e,t);case ve.Reference:return n.visitReference(e,t);case ve.AnimateChild:return n.visitAnimateChild(e,t);case ve.AnimateRef:return n.visitAnimateRef(e,t);case ve.Query:return n.visitQuery(e,t);case ve.Stagger:return n.visitStagger(e,t);default:throw Xz(e.type)}}function Ky(n,e){return window.getComputedStyle(n)[e]}var h0=(()=>{class n{validateStyleProperty(t){return S1(t)}containsElement(t,r){return qb(t,r)}getParentElement(t){return qy(t)}query(t,r,i){return zb(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Oi(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),Sc=class{static NOOP=new h0},Dc=class{};var c5=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Zy=class extends Dc{normalizePropertyName(e,t){return Wy(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(c5.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(t1(e,r))}return o+s}};var e_="*";function u5(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>l5(r,t,e)):t.push(n),t}function l5(n,e,t){if(n[0]==":"){let c=d5(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(f1(n)),e;let i=r[1],s=r[2],o=r[3];e.push(N1(i,o));let a=i==e_&&o==e_;s[0]=="<"&&!a&&e.push(N1(o,i))}function d5(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(p1(n)),"* => *"}}var Qy=new Set(["true","1"]),Yy=new Set(["false","0"]);function N1(n,e){let t=Qy.has(n)||Yy.has(n),r=Qy.has(e)||Yy.has(e);return(i,s)=>{let o=n==e_||n==i,a=e==e_||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Qy.has(n):Yy.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Qy.has(e):Yy.has(e)),o&&a}}var j1=":self",h5=new RegExp(`s*${j1}s*,?`,"g");function $1(n,e,t,r){return new t0(n).build(e,t,r)}var k1="",t0=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new n0(t);return this._resetContextStyleTimingState(i),qn(this,Nl(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=k1,e.collectedStyles=new Map,e.collectedStyles.set(k1,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(n1()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ve.State){let c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=d}else if(a.type==ve.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(r1())}),{type:ve.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Qb(c).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&t.errors.push(i1(e.name,[...s.values()]))}return{type:ve.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=qn(this,Nl(e.animation),t),i=u5(e.expr,t.errors);return{type:ve.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cc(e.options)}}visitSequence(e,t){return{type:ve.Sequence,steps:e.steps.map(r=>qn(this,r,t)),options:Cc(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=qn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:ve.Group,steps:s,options:Cc(e.options)}}visitAnimate(e,t){let r=g5(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Tc({});if(s.type==ve.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let d={};r.easing&&(d.easing=r.easing),o=Tc(d)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:ve.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Cr?r.push(a):t.errors.push(s1(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(Gb)>=0){s=!0;break}}}),{type:ve.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let d=t.collectedStyles.get(t.currentQuerySelector),h=d.get(c),m=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(o1(c,h.startTime,h.endTime,s,i)),m=!1),s=h.startTime),m&&d.set(c,{startTime:s,endTime:i}),t.options&&A1(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:ve.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(a1()),r;let i=1,s=0,o=[],a=!1,c=!1,d=0,h=e.steps.map(H=>{let K=this._makeStyleAst(H,t),Y=K.offset!=null?K.offset:m5(K.styles),oe=0;return Y!=null&&(s++,oe=K.offset=Y),c=c||oe<0||oe>1,a=a||oe<d,d=oe,o.push(oe),K});c&&t.errors.push(c1()),a&&t.errors.push(u1());let m=e.steps.length,I=0;s>0&&s<m?t.errors.push(l1()):s==0&&(I=i/(m-1));let S=m-1,R=t.currentTime,P=t.currentAnimateTimings,M=P.duration;return h.forEach((H,K)=>{let Y=I>0?K==S?1:I*K:o[K],oe=Y*M;t.currentTime=R+P.delay+oe,P.duration=oe,this._validateStyleAst(H,t),H.offset=Y,r.styles.push(H)}),r}visitReference(e,t){return{type:ve.Reference,animation:qn(this,Nl(e.animation),t),options:Cc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ve.AnimateChild,options:Cc(e.options)}}visitAnimateRef(e,t){return{type:ve.AnimateRef,animation:this.visitReference(e.animation,t),options:Cc(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=f5(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Hn(t.collectedStyles,t.currentQuerySelector,new Map);let a=qn(this,Nl(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:ve.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Cc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(d1());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:vf(e.timings,t.errors,!0);return{type:ve.Stagger,animation:qn(this,Nl(e.animation),t),timings:r,options:null}}};function f5(n){let e=!!n.split(/\s*,\s*/).find(t=>t==j1);return e&&(n=n.replace(h5,"")),n=n.replace(/@\*/g,_f).replace(/@\w+/g,t=>_f+"-"+t.slice(1)).replace(/:animating/g,Gy),[n,e]}function p5(n){return n?U({},n):null}var n0=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function m5(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function g5(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=vf(n,e).duration;return Yb(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Yb(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=vf(t,e);return Yb(i.duration,i.delay,i.easing)}function Cc(n){return n?(n=U({},n),n.params&&(n.params=p5(n.params))):n={},n}function Yb(n,e,t){return{duration:n,delay:e,easing:t}}function f0(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var If=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},y5=1,_5=":enter",v5=new RegExp(_5,"g"),E5=":leave",I5=new RegExp(E5,"g");function H1(n,e,t,r,i,s=new Map,o=new Map,a,c,d=[]){return new r0().buildKeyframes(n,e,t,r,i,s,o,a,c,d)}var r0=class{buildKeyframes(e,t,r,i,s,o,a,c,d,h=[]){d=d||new If;let m=new i0(e,t,d,i,s,h,[]);m.options=c;let I=c.delay?Fi(c.delay):0;m.currentTimeline.delayNextStep(I),m.currentTimeline.setStyles([o],null,m.errors,c),qn(this,r,m);let S=m.timelines.filter(R=>R.containsAnimation());if(S.length&&a.size){let R;for(let P=S.length-1;P>=0;P--){let M=S[P];if(M.element===t){R=M;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([a],null,m.errors,c)}return S.length?S.map(R=>R.buildKeyframes()):[f0(t,[],[],[],0,I,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Fi(kl(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Fi(r.duration):null,a=r.delay!=null?Fi(r.delay):null;return o!==0&&e.forEach(c=>{let d=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),qn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==ve.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=t_);let o=Fi(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>qn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Fi(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),qn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?kl(r,t.params,t.errors):r;return vf(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==ve.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let d=c.offset||0;a.forwardTime(d*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Fi(i.delay):0;s&&(t.previousNode.type===ve.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=t_);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,h)=>{t.currentQueryIndex=h;let m=t.createSubContext(e.options,d);s&&m.delayNextStep(s),d===t.element&&(c=m.currentTimeline),qn(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let I=m.currentTimeline.currentTime;o=Math.max(o,I)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let m=h.currentTime;qn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}},t_={},i0=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=t_;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new n_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Fi(r.duration)),r.delay!=null&&(i.delay=Fi(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=kl(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=t_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new s0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(v5,"."+this._enterClassName),e=e.replace(I5,"."+this._leaveClassName);let c=r!=1,d=this._driver.query(this.element,e,c);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!s&&a.length==0&&o.push(h1(t)),a}},n_=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=y5,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Cr),this._currentKeyframe.set(t,Cr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=w5(e,this._globalTimelineStyles);for(let[a,c]of o){let d=kl(c,s,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Cr),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let d=new Map([...this._backFill,...a]);d.forEach((h,m)=>{h===Pl?e.add(m):h===Cr&&t.add(m)}),r||d.set("offset",c/this.duration),i.push(d)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return f0(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},s0=class extends n_{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let d=new Map(e[0]);d.set("offset",M1(a)),s.push(d);let h=e.length-1;for(let m=1;m<=h;m++){let I=new Map(e[m]),S=I.get("offset"),R=t+S*r;I.set("offset",M1(R/o)),s.push(I)}r=o,t=0,i="",e=s}return f0(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function M1(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function w5(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Cr)}else for(let[s,o]of i)t.set(s,o)}),t}function x1(n,e,t,r,i,s,o,a,c,d,h,m,I){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:h,totalTime:m,errors:I}}var Jb={},r_=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return T5(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,d,h){let m=[],I=this.ast.options&&this.ast.options.params||Jb,S=a&&a.params||Jb,R=this.buildStyles(r,S,m),P=c&&c.params||Jb,M=this.buildStyles(i,P,m),H=new Set,K=new Map,Y=new Map,oe=i==="void",ze={params:q1(P,I),delay:this.ast.options?.delay},pe=h?[]:H1(e,t,this.ast.animation,s,o,R,M,ze,d,m),w=0;return pe.forEach(y=>{w=Math.max(y.duration+y.delay,w)}),m.length?x1(t,this._triggerName,r,i,oe,R,M,[],[],K,Y,w,m):(pe.forEach(y=>{let E=y.element,T=Hn(K,E,new Set);y.preStyleProps.forEach(A=>T.add(A));let b=Hn(Y,E,new Set);y.postStyleProps.forEach(A=>b.add(A)),E!==t&&H.add(E)}),x1(t,this._triggerName,r,i,oe,R,M,pe,[...H.values()],K,Y,w))}};function T5(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function q1(n,e){let t=U({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var o0=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=q1(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=kl(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function b5(n,e,t){return new a0(n,e,t)}var a0=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new o0(i.style,s,r))}),O1(this.states,"true","1"),O1(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new r_(e,i,this.states))}),this.fallbackTransition=C5(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function C5(n,e,t){let r=[(o,a)=>!0],i={type:ve.Sequence,steps:[],options:null},s={type:ve.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new r_(n,s,e)}function O1(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var S5=new If,c0=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=$1(this._driver,t,r,i);if(r.length)throw g1(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=$b(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=H1(this._driver,t,s,Wb,zy,new Map,new Map,r,S5,i),o.forEach(h=>{let m=Hn(a,h.element,new Map);h.postStyleProps.forEach(I=>m.set(I,null))})):(i.push(y1()),o=[]),i.length)throw _1(i);a.forEach((h,m)=>{h.forEach((I,S)=>{h.set(S,this._driver.computeStyle(m,S,Cr))})});let c=o.map(h=>{let m=a.get(h.element);return this._buildPlayer(h,new Map,m)}),d=Ds(c);return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw v1(e);return t}listen(e,t,r,i){let s=Hy(t,"","","");return $y(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},F1="ng-animate-queued",D5=".ng-animate-queued",Xb="ng-animate-disabled",A5=".ng-animate-disabled",R5="ng-star-inserted",P5=".ng-star-inserted",N5=[],z1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},k5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ti="__ng_removed",wf=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=x5(i),r){let s=e,{value:o}=s,a=So(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ef="void",Zb=new wf(Ef),u0=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Sr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw E1(r,t);if(r==null||r.length==0)throw I1(t);if(!O5(r))throw w1(r,t);let s=Hn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=Hn(this._engine.statesByElement,e,new Map);return a.has(t)||(Sr(e,yf),Sr(e,yf+"-"+t),a.set(t,Zb)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw T1(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Tf(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Sr(e,yf),Sr(e,yf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),d=new wf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=Zb),!(d.value===Ef)&&c.value===d.value){if(!V5(c.params,d.params)){let P=[],M=s.matchStyles(c.value,c.params,P),H=s.matchStyles(d.value,d.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{Xo(e,M),ei(e,H)})}return}let I=Hn(this._engine.playersByElement,e,[]);I.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let S=s.matchTransition(c.value,d.value,e,d.params),R=!1;if(!S){if(!i)return;S=s.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:S,fromState:c,toState:d,player:o,isFallbackTransition:R}),R||(Sr(e,F1),o.onStart(()=>{Ml(e,F1)})),o.onDone(()=>{let P=this.players.indexOf(o);P>=0&&this.players.splice(P,1);let M=this._engine.playersByElement.get(e);if(M){let H=M.indexOf(o);H>=0&&M.splice(H,1)}}),this.players.push(o),I.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,_f,!0);r.forEach(i=>{if(i[ti])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,d)=>{if(o.set(d,c.value),this._triggers.has(d)){let h=this.trigger(e,d,Ef,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ds(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,d=r.get(o)||Zb,h=new wf(Ef),m=new Tf(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:d,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[ti];(!s||s===z1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Sr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=Hy(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,$y(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},l0=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new u0(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let d=r.indexOf(c);r.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Jy(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Jy(t))return;let s=t[ti];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sr(e,Xb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ml(e,Xb))}removeNode(e,t,r){if(Jy(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ti]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Jy(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,_f,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Gy,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ds(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ti];if(t&&t.setForRemoval){if(e[ti]=z1,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Xb)&&this.markElementAsDisabled(e,!1),this.driver.query(e,A5,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Sr(i,R5)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ds(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw b1(e)}_flushAnimations(e,t){let r=new If,i=[],s=new Map,o=[],a=new Map,c=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(ne=>{h.add(ne);let ie=this.driver.query(ne,D5,!0);for(let se=0;se<ie.length;se++)h.add(ie[se])});let m=this.bodyNode,I=Array.from(this.statesByElement.keys()),S=U1(I,this.collectedEnterElements),R=new Map,P=0;S.forEach((ne,ie)=>{let se=Wb+P++;R.set(ie,se),ne.forEach(Ae=>Sr(Ae,se))});let M=[],H=new Set,K=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){let ie=this.collectedLeaveElements[ne],se=ie[ti];se&&se.setForRemoval&&(M.push(ie),H.add(ie),se.hasAnimation?this.driver.query(ie,P5,!0).forEach(Ae=>H.add(Ae)):K.add(ie))}let Y=new Map,oe=U1(I,Array.from(H));oe.forEach((ne,ie)=>{let se=zy+P++;Y.set(ie,se),ne.forEach(Ae=>Sr(Ae,se))}),e.push(()=>{S.forEach((ne,ie)=>{let se=R.get(ie);ne.forEach(Ae=>Ml(Ae,se))}),oe.forEach((ne,ie)=>{let se=Y.get(ie);ne.forEach(Ae=>Ml(Ae,se))}),M.forEach(ne=>{this.processLeaveNode(ne)})});let ze=[],pe=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(t).forEach(se=>{let Ae=se.player,It=se.element;if(ze.push(Ae),this.collectedEnterElements.length){let pt=It[ti];if(pt&&pt.setForMove){if(pt.previousTriggersValues&&pt.previousTriggersValues.has(se.triggerName)){let Qn=pt.previousTriggersValues.get(se.triggerName),rn=this.statesByElement.get(se.element);if(rn&&rn.has(se.triggerName)){let dr=rn.get(se.triggerName);dr.value=Qn,rn.set(se.triggerName,dr)}}Ae.destroy();return}}let Pn=!m||!this.driver.containsElement(m,It),gt=Y.get(It),it=R.get(It),Je=this._buildInstruction(se,r,it,gt,Pn);if(Je.errors&&Je.errors.length){pe.push(Je);return}if(Pn){Ae.onStart(()=>Xo(It,Je.fromStyles)),Ae.onDestroy(()=>ei(It,Je.toStyles)),i.push(Ae);return}if(se.isFallbackTransition){Ae.onStart(()=>Xo(It,Je.fromStyles)),Ae.onDestroy(()=>ei(It,Je.toStyles)),i.push(Ae);return}let lr=[];Je.timelines.forEach(pt=>{pt.stretchStartingKeyframe=!0,this.disabledNodes.has(pt.element)||lr.push(pt)}),Je.timelines=lr,r.append(It,Je.timelines);let Ta={instruction:Je,player:Ae,element:It};o.push(Ta),Je.queriedElements.forEach(pt=>Hn(a,pt,[]).push(Ae)),Je.preStyleProps.forEach((pt,Qn)=>{if(pt.size){let rn=c.get(Qn);rn||c.set(Qn,rn=new Set),pt.forEach((dr,hi)=>rn.add(hi))}}),Je.postStyleProps.forEach((pt,Qn)=>{let rn=d.get(Qn);rn||d.set(Qn,rn=new Set),pt.forEach((dr,hi)=>rn.add(hi))})});if(pe.length){let ne=[];pe.forEach(ie=>{ne.push(C1(ie.triggerName,ie.errors))}),ze.forEach(ie=>ie.destroy()),this.reportError(ne)}let w=new Map,y=new Map;o.forEach(ne=>{let ie=ne.element;r.has(ie)&&(y.set(ie,ie),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,w))}),i.forEach(ne=>{let ie=ne.element;this._getPreviousPlayers(ie,!1,ne.namespaceId,ne.triggerName,null).forEach(Ae=>{Hn(w,ie,[]).push(Ae),Ae.destroy()})});let E=M.filter(ne=>B1(ne,c,d)),T=new Map;V1(T,this.driver,K,d,Cr).forEach(ne=>{B1(ne,c,d)&&E.push(ne)});let A=new Map;S.forEach((ne,ie)=>{V1(A,this.driver,new Set(ne),c,Pl)}),E.forEach(ne=>{let ie=T.get(ne),se=A.get(ne);T.set(ne,new Map([...ie?.entries()??[],...se?.entries()??[]]))});let v=[],ut=[],nn={};o.forEach(ne=>{let{element:ie,player:se,instruction:Ae}=ne;if(r.has(ie)){if(h.has(ie)){se.onDestroy(()=>ei(ie,Ae.toStyles)),se.disabled=!0,se.overrideTotalTime(Ae.totalTime),i.push(se);return}let It=nn;if(y.size>1){let gt=ie,it=[];for(;gt=gt.parentNode;){let Je=y.get(gt);if(Je){It=Je;break}it.push(gt)}it.forEach(Je=>y.set(Je,It))}let Pn=this._buildAnimation(se.namespaceId,Ae,w,s,A,T);if(se.setRealPlayer(Pn),It===nn)v.push(se);else{let gt=this.playersByElement.get(It);gt&&gt.length&&(se.parentPlayer=Ds(gt)),i.push(se)}}else Xo(ie,Ae.fromStyles),se.onDestroy(()=>ei(ie,Ae.toStyles)),ut.push(se),h.has(ie)&&i.push(se)}),ut.forEach(ne=>{let ie=s.get(ne.element);if(ie&&ie.length){let se=Ds(ie);ne.setRealPlayer(se)}}),i.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<M.length;ne++){let ie=M[ne],se=ie[ti];if(Ml(ie,zy),se&&se.hasAnimation)continue;let Ae=[];if(a.size){let Pn=a.get(ie);Pn&&Pn.length&&Ae.push(...Pn);let gt=this.driver.query(ie,Gy,!0);for(let it=0;it<gt.length;it++){let Je=a.get(gt[it]);Je&&Je.length&&Ae.push(...Je)}}let It=Ae.filter(Pn=>!Pn.destroyed);It.length?F5(this,ie,It):this.processLeaveNode(ie)}return M.length=0,v.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();let ie=this.players.indexOf(ne);this.players.splice(ie,1)}),ne.play()}),v}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Ef;a.forEach(d=>{d.queued||!c&&d.triggerName!=i||o.push(d)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let d=c.element,h=d!==s,m=Hn(r,d,[]);this._getPreviousPlayers(d,h,o,a,t.toState).forEach(S=>{let R=S.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),S.destroy(),m.push(S)})}Xo(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,d=[],h=new Set,m=new Set,I=t.timelines.map(R=>{let P=R.element;h.add(P);let M=P[ti];if(M&&M.removedBeforeQueried)return new Oi(R.duration,R.delay);let H=P!==c,K=L5((r.get(P)||N5).map(w=>w.getRealPlayer())).filter(w=>{let y=w;return y.element?y.element===P:!1}),Y=s.get(P),oe=o.get(P),ze=$b(this._normalizer,R.keyframes,Y,oe),pe=this._buildPlayer(R,ze,K);if(R.subTimeline&&i&&m.add(P),H){let w=new Tf(e,a,P);w.setRealPlayer(pe),d.push(w)}return pe});d.forEach(R=>{Hn(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>M5(this.playersByQueriedElement,R.element,R))}),h.forEach(R=>Sr(R,Kb));let S=Ds(I);return S.onDestroy(()=>{h.forEach(R=>Ml(R,Kb)),ei(c,t.toStyles)}),m.forEach(R=>{Hn(i,R,[]).push(S)}),S}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Oi(e.duration,e.delay)}},Tf=class{namespaceId;triggerName;element;_player=new Oi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>$y(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Hn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function M5(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function x5(n){return n??null}function Jy(n){return n&&n.nodeType===1}function O5(n){return n=="start"||n=="done"}function L1(n,e){let t=n.style.display;return n.style.display=e??"none",t}function V1(n,e,t,r,i){let s=[];t.forEach(c=>s.push(L1(c)));let o=[];r.forEach((c,d)=>{let h=new Map;c.forEach(m=>{let I=e.computeStyle(d,m,i);h.set(m,I),(!I||I.length==0)&&(d[ti]=k5,o.push(d))}),n.set(d,h)});let a=0;return t.forEach(c=>L1(c,s[a++])),o}function U1(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let d=a.parentNode;return t.has(d)?c=d:i.has(d)?c=r:c=o(d),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Sr(n,e){n.classList?.add(e)}function Ml(n,e){n.classList?.remove(e)}function F5(n,e,t){Ds(t).onDone(()=>n.processLeaveNode(e))}function L5(n){let e=[];return G1(n,e),e}function G1(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof wc?G1(r.players,e):e.push(r)}}function V5(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function B1(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var xl=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new l0(e.body,t,r),this._timelineEngine=new c0(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],d=[],h=$1(this._driver,s,c,d);if(c.length)throw m1(i,c);a=b5(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=Hb(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=Hb(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function U5(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=e0(e[0]),e.length>1&&(r=e0(e[e.length-1]))):e instanceof Map&&(t=e0(e)),t||r?new B5(n,t,r):null}var B5=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ei(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ei(this._element,this._initialStyles),this._endStyles&&(ei(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xo(this._element,this._endStyles),this._endStyles=null),ei(this._element,this._initialStyles),this._state=3)}}return n})();function e0(n){let e=null;return n.forEach((t,r)=>{j5(r)&&(e=e||new Map,e.set(r,t))}),e}function j5(n){return n==="display"||n==="position"}var i_=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Ky(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},s_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return qb(e,t)}getParentElement(e){return qy(e)}query(e,t,r){return zb(e,t,r)}computeStyle(e,t,r){return Ky(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let d=new Map,h=o.filter(S=>S instanceof i_);R1(r,i)&&h.forEach(S=>{S.currentSnapshot.forEach((R,P)=>d.set(P,R))});let m=D1(t).map(S=>new Map(S));m=P1(e,m,d);let I=U5(e,m);return new i_(e,m,c,I)}};var Xy="@",W1="@.disabled",o_=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Xy&&t==W1?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},d0=class extends o_{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Xy?t.charAt(1)=="."&&t==W1?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Xy){let s=$5(e),o=t.slice(1),a="";return o.charAt(0)!=Xy&&([o,a]=H5(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let d=c._data||-1;this.factory.scheduleListenerCallback(d,r,c)})}return this.delegate.listen(e,t,r,i)}};function $5(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function H5(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var a_=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let d=this._rendererCache,h=d.get(i);if(!h){let m=()=>d.delete(i);h=new o_("",i,this.engine,m),d.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(s,o,e,d.name,d)};return t.data.animation.forEach(a),new d0(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var z5=(()=>{class n extends xl{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(fe(At),fe(Sc),fe(Dc))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();function G5(){return new Zy}function W5(){return new a_(B(Xh),B(xl),B(tt))}var K1=[{provide:Dc,useFactory:G5},{provide:xl,useClass:z5},{provide:Es,useFactory:W5}],__e=[{provide:Sc,useClass:h0},{provide:Vg,useValue:"NoopAnimations"},...K1],K5=[{provide:Sc,useFactory:()=>new s_},{provide:Vg,useFactory:()=>"BrowserAnimations"},...K1];function Q1(){return Mh("NgEagerAnimations"),[...K5]}var m0=class{constructor(){}loadScript(e,t,r,i=null){if(typeof document<"u"&&!document.getElementById(e)){let s=document.createElement("script");s.async=!0,s.src=t,s.onload=r,i||(i=document.head),i.appendChild(s)}}},g0=class{constructor(){}},Y1=()=>typeof window.google?.accounts<"u",Y5=()=>{if(!Y1())throw new Error("Google Accounts API is undefined")},p0=()=>(Y5(),window.google.accounts),J5={oneTapEnabled:!0},y0=(()=>{class n extends m0{static{this.PROVIDER_ID="GOOGLE"}constructor(t,r){super(),this.clientId=t,this.initOptions=r,this.changeUser=new vt,this._socialUser=new xt(null),this._accessToken=new xt(null),this._receivedAccessToken=new vt,this.initOptions=U(U({},J5),this.initOptions),this._socialUser.pipe(Bm(1)).subscribe(this.changeUser),this._accessToken.pipe(Bm(1)).subscribe(this._receivedAccessToken)}initialize(t,r){return new Promise((i,s)=>{try{this.loadScript(n.PROVIDER_ID,this.getGoogleLoginScriptSrc(r||""),()=>{if(Y1()){if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:o})=>{let a=this.createSocialUser(o);this._socialUser.next(a)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(Tn(o=>o===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(a=>a).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:a=>{a.error?this._accessToken.error({code:a.error,description:a.error_description,uri:a.error_uri}):this._accessToken.next(a.access_token)}})}i()}})}catch(o){s(o)}})}getLoginStatus(){return new Promise((t,r)=>{this._socialUser.value?t(this._socialUser.value):r(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,r)=>{p0().id.revoke(this._socialUser.value.id,i=>{i.error?r(i.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,r)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(an(1)).subscribe(t)):this._socialUser.value?r("No token client was instantiated, you should specify some scopes."):r("You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,r)=>{this._tokenClient?this._accessToken.value?p0().oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):r("No access token to revoke"):r("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}async signOut(){p0().id.disableAutoSelect(),this._socialUser.next(null)}createSocialUser(t){let r=new g0;r.idToken=t;let i=this.decodeJwt(t);return r.id=i.sub,r.name=i.name,r.email=i.email,r.photoUrl=i.picture,r.firstName=i.given_name,r.lastName=i.family_name,r}decodeJwt(t){let i=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(i).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}getGoogleLoginScriptSrc(t){return t?`https://accounts.google.com/gsi/client?hl=${t}`:"https://accounts.google.com/gsi/client"}}return n})();var _0="Service workers are disabled or not supported by this browser",Ol=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Ee(r=>r.error(new q(5601,!1)));else{let r=null,i=new wt;this.worker=new Ee(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let s=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(Un(()=>e.getRegistration().then(d=>{if(!d)throw new q(5601,!1);return d})));let o=new wt;this.events=o.asObservable();let a=d=>{let{data:h}=d;h?.type&&o.next(h)};e.addEventListener("message",a),t?.get(Ai,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(an(1)).subscribe(i=>{i.postMessage(U({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Tn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(an(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Tn(i=>i.nonce===e),an(1),We(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},X5=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new wt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=fs,this.notificationClicks=fs,this.notificationCloses=fs,this.pushSubscriptionChanges=fs,this.subscription=fs;return}this.messages=this.sw.eventsOfType("PUSH").pipe(We(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(We(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(We(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(We(i=>i.data)),this.pushManager=this.sw.registration.pipe(We(i=>i.pushManager));let r=this.pushManager.pipe(Un(i=>i.getSubscription()));this.subscription=new Ee(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(_0));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(Un(c=>c.subscribe(r)),an(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(_0));let t=r=>{if(r===null)throw new q(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new q(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(an(1),Un(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(fe(Ol))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),Z5=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=fs,this.unrecoverable=fs;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_0));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new q(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(fe(Ol))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),X1=new Z("");function e9(){let n=B(bf);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=B(X1),t=B(tt),r=B(Ai);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=J1(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),J1(+a[0])]);break;default:throw new q(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(xo(5604,!1)))})})}function J1(n){return new Promise(e=>setTimeout(e,n))}function t9(){let n=B(bf),e=B(yt),t=!0;return new Ol(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var bf=class{enabled;updateViaCache;type;scope;registrationStrategy};function Z1(n,e={}){return ln([X5,Z5,{provide:X1,useValue:n},{provide:bf,useValue:e},{provide:Ol,useFactory:t9},Wg(e9)])}var eO=()=>{};var rO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},n9=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},c_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,m=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(I=64)),r.push(t[h],t[m],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||m==null)throw new E0;let I=s<<2|a>>4;if(r.push(I),d!==64){let S=a<<4&240|d>>2;if(r.push(S),m!==64){let R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},E0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},r9=function(n){let e=rO(n);return c_.encodeByteArray(e,!0)},Sf=function(n){return r9(n).replace(/\./g,"")},u_=function(n){try{return c_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function w0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var i9=()=>w0().__FIREBASE_DEFAULTS__,s9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},o9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&u_(n[1]);return e&&JSON.parse(e)},T0=()=>{try{return eO()||i9()||s9()||o9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},b0=n=>{var e,t;return(t=(e=T0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},l_=n=>{let e=b0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},C0=()=>{var n;return(n=T0())===null||n===void 0?void 0:n.config},S0=n=>{var e;return(e=T0())===null||e===void 0?void 0:e[`_${n}`]};var Ac=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function As(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fl(n){return(await fetch(n,{credentials:"include"})).ok}function d_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sf(JSON.stringify(t)),Sf(JSON.stringify(o)),""].join(".")}var Cf={};function a9(){let n={prod:[],emulator:[]};for(let e of Object.keys(Cf))Cf[e]?n.emulator.push(e):n.prod.push(e);return n}function c9(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var tO=!1;function Ll(n,e){if(typeof window>"u"||typeof document>"u"||!As(window.location.host)||Cf[n]===e||Cf[n]||tO)return;Cf[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",s=a9().prod.length>0;function o(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,S){I.setAttribute("width","24"),I.setAttribute("id",S),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function d(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{tO=!0,o()},I}function h(I,S){I.setAttribute("id",S),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function m(){let I=c9(r),S=t("text"),R=document.getElementById(S)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),K=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let Y=I.element;a(Y),h(M,P);let oe=d();c(K,H),Y.append(K,R,M,oe),document.body.appendChild(Y)}s?(R.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function sO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cO(){let n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Df(){try{return typeof indexedDB=="object"}catch{return!1}}function uO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var u9="FirebaseError",On=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=u9,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ni.prototype.create)}},ni=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?l9(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new On(i,a,r)}};function l9(n,e){return n.replace(d9,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var d9=/\{\$([^}]+)}/g;function lO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Li(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(nO(s)&&nO(o)){if(!Li(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function nO(n){return n!==null&&typeof n=="object"}function Af(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dO(n,e){let t=new I0(n,e);return t.subscribe.bind(t)}var I0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");h9(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=v0),i.error===void 0&&(i.error=v0),i.complete===void 0&&(i.complete=v0);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function h9(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function v0(){}var U_e=14400*1e3;function ri(n){return n&&n._delegate?n._delegate:n}var gn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Rc="[DEFAULT]";var D0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ac;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p9(e))try{this.getOrInitializeService({instanceIdentifier:Rc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rc){return this.instances.has(e)}getOptions(e=Rc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f9(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rc){return this.component?this.component.multipleInstances?e:Rc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function f9(n){return n===Rc?void 0:n}function p9(n){return n.instantiationMode==="EAGER"}var h_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new D0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var m9=[],Ye=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ye||{}),g9={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},y9=Ye.INFO,_9={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},v9=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_9[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vi=class{constructor(e){this.name=e,this._logLevel=y9,this._logHandler=v9,this._userLogHandler=null,m9.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}};var E9=(n,e)=>e.some(t=>n instanceof t),hO,fO;function I9(){return hO||(hO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w9(){return fO||(fO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pO=new WeakMap,R0=new WeakMap,mO=new WeakMap,A0=new WeakMap,N0=new WeakMap;function T9(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ui(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&pO.set(t,n)}).catch(()=>{}),N0.set(e,n),e}function b9(n){if(R0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});R0.set(n,e)}var P0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return R0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gO(n){P0=n(P0)}function C9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(f_(this),e,...t);return mO.set(r,e.sort?e.sort():[e]),Ui(r)}:w9().includes(n)?function(...e){return n.apply(f_(this),e),Ui(pO.get(this))}:function(...e){return Ui(n.apply(f_(this),e))}}function S9(n){return typeof n=="function"?C9(n):(n instanceof IDBTransaction&&b9(n),E9(n,I9())?new Proxy(n,P0):n)}function Ui(n){if(n instanceof IDBRequest)return T9(n);if(A0.has(n))return A0.get(n);let e=S9(n);return e!==n&&(A0.set(n,e),N0.set(e,n)),e}var f_=n=>N0.get(n);function p_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ui(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ui(o.result),c.oldVersion,c.newVersion,Ui(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var D9=["get","getKey","getAll","getAllKeys","count"],A9=["put","add","delete","clear"],k0=new Map;function yO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(k0.get(e))return k0.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=A9.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||D9.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return k0.set(e,s),s}gO(n=>ae(U({},n),{get:(e,t,r)=>yO(e,t)||n.get(e,t,r),has:(e,t)=>!!yO(e,t)||n.has(e,t)}));var x0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(R9(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function R9(n){let e=n.getComponent();return e?.type==="VERSION"}var O0="@firebase/app",_O="0.13.2";var Rs=new Vi("@firebase/app"),P9="@firebase/app-compat",N9="@firebase/analytics-compat",k9="@firebase/analytics",M9="@firebase/app-check-compat",x9="@firebase/app-check",O9="@firebase/auth",F9="@firebase/auth-compat",L9="@firebase/database",V9="@firebase/data-connect",U9="@firebase/database-compat",B9="@firebase/functions",j9="@firebase/functions-compat",$9="@firebase/installations",H9="@firebase/installations-compat",q9="@firebase/messaging",z9="@firebase/messaging-compat",G9="@firebase/performance",W9="@firebase/performance-compat",K9="@firebase/remote-config",Q9="@firebase/remote-config-compat",Y9="@firebase/storage",J9="@firebase/storage-compat",X9="@firebase/firestore",Z9="@firebase/ai",eG="@firebase/firestore-compat",tG="firebase",nG="11.10.0";var F0="[DEFAULT]",rG={[O0]:"fire-core",[P9]:"fire-core-compat",[k9]:"fire-analytics",[N9]:"fire-analytics-compat",[x9]:"fire-app-check",[M9]:"fire-app-check-compat",[O9]:"fire-auth",[F9]:"fire-auth-compat",[L9]:"fire-rtdb",[V9]:"fire-data-connect",[U9]:"fire-rtdb-compat",[B9]:"fire-fn",[j9]:"fire-fn-compat",[$9]:"fire-iid",[H9]:"fire-iid-compat",[q9]:"fire-fcm",[z9]:"fire-fcm-compat",[G9]:"fire-perf",[W9]:"fire-perf-compat",[K9]:"fire-rc",[Q9]:"fire-rc-compat",[Y9]:"fire-gcs",[J9]:"fire-gcs-compat",[X9]:"fire-fst",[eG]:"fire-fst-compat",[Z9]:"fire-vertex","fire-js":"fire-js",[tG]:"fire-js-all"};var Rf=new Map,iG=new Map,L0=new Map;function vO(n,e){try{n.container.addComponent(e)}catch(t){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ar(n){let e=n.name;if(L0.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;L0.set(e,n);for(let t of Rf.values())vO(t,n);for(let t of iG.values())vO(t,n);return!0}function ea(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zn(n){return n==null?!1:n.settings!==void 0}var sG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new ni("app","Firebase",sG);var V0=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}};var Bi=nG;function j0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:F0,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Zo.create("bad-app-name",{appName:String(i)});if(t||(t=C0()),!t)throw Zo.create("no-options");let s=Rf.get(i);if(s){if(Li(t,s.options)&&Li(r,s.config))return s;throw Zo.create("duplicate-app",{appName:i})}let o=new h_(i);for(let c of L0.values())o.addComponent(c);let a=new V0(t,r,o);return Rf.set(i,a),a}function Ps(n=F0){let e=Rf.get(n);if(!e&&n===F0&&C0())return j0();if(!e)throw Zo.create("no-app",{appName:n});return e}function m_(){return Array.from(Rf.values())}function ft(n,e,t){var r;let i=(r=rG[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(a.join(" "));return}ar(new gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oG="firebase-heartbeat-database",aG=1,Pf="firebase-heartbeat-store",M0=null;function TO(){return M0||(M0=p_(oG,aG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zo.create("idb-open",{originalErrorMessage:n.message})})),M0}async function cG(n){try{let t=(await TO()).transaction(Pf),r=await t.objectStore(Pf).get(bO(n));return await t.done,r}catch(e){if(e instanceof On)Rs.warn(e.message);else{let t=Zo.create("idb-get",{originalErrorMessage:e?.message});Rs.warn(t.message)}}}async function EO(n,e){try{let r=(await TO()).transaction(Pf,"readwrite");await r.objectStore(Pf).put(e,bO(n)),await r.done}catch(t){if(t instanceof On)Rs.warn(t.message);else{let r=Zo.create("idb-set",{originalErrorMessage:t?.message});Rs.warn(r.message)}}}function bO(n){return`${n.name}!${n.options.appId}`}var uG=1024,lG=30,U0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new B0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lG){let o=hG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=IO(),{heartbeatsToSend:r,unsentEntries:i}=dG(this._heartbeatsCache.heartbeats),s=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Rs.warn(t),""}}};function IO(){return new Date().toISOString().substring(0,10)}function dG(n,e=uG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),wO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var B0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Df()?uO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await cG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return EO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return EO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function wO(n){return Sf(JSON.stringify({version:2,heartbeats:n})).length}function hG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function fG(n){ar(new gn("platform-logger",e=>new x0(e),"PRIVATE")),ar(new gn("heartbeat",e=>new U0(e),"PRIVATE")),ft(O0,_O,n),ft(O0,_O,"esm2017"),ft("fire-js","")}fG("");var pG="firebase",mG="11.10.0";ft(pG,mG,"app");function CO(n){n===void 0&&(n=B(yt));let e=n.get(il);return t=>new Ee(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ji=new Ka("ANGULARFIRE2_VERSION");function Nc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ta=(n,e)=>{let t=e?[e]:m_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Vl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Vl||{}),SO=$h()&&typeof Zone<"u"?Vl.WARN:Vl.SILENT;var g_=class{zone;delegate;constructor(e,t=TI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},$i=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=B(tt);this.outsideAngular=t.runOutsideAngular(()=>new g_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new g_(typeof Zone>"u"?void 0:Zone.current,wI))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DO=!1;function gG(n,e){!DO&&(SO>Vl.SILENT||$h())&&(DO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),SO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function yG(n){let e=B(tt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Pc(n){let e=B(tt,{optional:!0});return e?e.run(()=>n()):n()}var _G=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Lt(t,()=>Pc(()=>n.apply(void 0,r)))),Ns=(n,e,t)=>(t||=e?Vl.WARN:Vl.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=B($i),o=B(il),a=B(bt)}catch{return gG(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Pc(()=>o.add())),i[d]=_G(i[d],r,a));let c=yG(()=>n.apply(this,i));return e?c instanceof Ee?c.pipe(Ro(s.outsideAngular),Ao(s.insideAngular),CO(a)):c instanceof Promise?Pc(()=>{let d=o.add();return new Promise((h,m)=>{c.then(I=>Lt(a,()=>Pc(()=>h(I))),I=>Lt(a,()=>Pc(()=>m(I)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Pc(()=>c):c instanceof Ee?c.pipe(Ro(s.outsideAngular),Ao(s.insideAngular)):Pc(()=>c)});var ii=class{constructor(e){return e}},ks=class{constructor(){return m_()}};function vG(n){return n&&n.length===1?n[0]:new ii(Ps())}var $0=new Z("angularfire2._apps"),EG={provide:ii,useFactory:vG,deps:[[new Jt,$0]]},IG={provide:ks,deps:[[new Jt,$0]]};function wG(n){return(e,t)=>{let r=t.get(dc);ft("angularfire",ji.full,"core"),ft("angularfire",ji.full,"app"),ft("angular",qI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ii(i)}}function AO(n,...e){return ln([EG,IG,{provide:$0,useFactory:wG(n),multi:!0,deps:[tt,yt,$i,...e]}])}var H0=Ns(j0,!0);var TG=new Map,bG={activated:!1,tokenObservers:[]},CG={initialized:!1,enabled:!1};function si(n){return TG.get(n)||Object.assign({},bG)}function kO(){return CG}var SG="https://content-firebaseappcheck.googleapis.com/v1";var DG="exchangeDebugToken",RO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Vve=1440*60*1e3;var G0=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ac,this.pending.promise.catch(t=>{}),await AG(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ac,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function AG(n){return new Promise(e=>{setTimeout(e,n)})}var RG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},na=new ni("appCheck","AppCheck",RG);function MO(n){if(!si(n).activated)throw na.create("use-before-activation",{appName:n.name})}async function xO({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let m=await i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(m){throw na.create("fetch-network-error",{originalErrorMessage:m?.message})}if(o.status!==200)throw na.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(m){throw na.create("fetch-parse-error",{originalErrorMessage:m?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw na.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function OO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${SG}/projects/${t}/apps/${r}:${DG}?key=${i}`,body:{debug_token:e}}}var PG="firebase-app-check-database",NG=1,W0="firebase-app-check-store";var y_=null;function kG(){return y_||(y_=new Promise((n,e)=>{try{let t=indexedDB.open(PG,NG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(na.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;r.oldVersion===0&&i.createObjectStore(W0,{keyPath:"compositeKey"})}}catch(t){e(na.create("storage-open",{originalErrorMessage:t?.message}))}}),y_)}function MG(n,e){return xG(OG(n),e)}async function xG(n,e){let r=(await kG()).transaction(W0,"readwrite"),s=r.objectStore(W0).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(na.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function OG(n){return`${n.options.appId}-${n.name}`}var Nf=new Vi("@firebase/app-check");function q0(n,e){return Df()?MG(n,e).catch(t=>{Nf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function FO(){return kO().enabled}async function LO(){let n=kO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var FG={error:"UNKNOWN_ERROR"};function LG(n){return c_.encodeString(JSON.stringify(n),!1)}async function K0(n,e=!1,t=!1){let r=n.app;MO(r);let i=si(r),s=i.token,o;if(s&&!kf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(kf(d)?s=d:await q0(r,void 0))}if(!e&&s&&kf(s))return{token:s.token};let a=!1;if(FO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=xO(OO(r,await LO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await q0(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Nf.warn(d.message):t&&Nf.error(d),z0(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await si(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Nf.warn(d.message):t&&Nf.error(d),o=d}let c;return s?o?kf(s)?c={token:s.token,internalError:o}:c=z0(o):(c={token:s.token},i.token=s,await q0(r,s)):c=z0(o),a&&jG(r,c),c}async function VG(n){let e=n.app;MO(e);let{provider:t}=si(e);if(FO()){let r=await LO(),{token:i}=await xO(OO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function UG(n,e,t,r){let{app:i}=n,s=si(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&kf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),PO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>PO(n))}function VO(n,e){let t=si(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function PO(n){let{app:e}=n,t=si(e),r=t.tokenRefresher;r||(r=BG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function BG(n){let{app:e}=n;return new G0(async()=>{let t=si(e),r;if(t.token?r=await K0(n,!0):r=await K0(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=si(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},RO.RETRIAL_MIN_WAIT,RO.RETRIAL_MAX_WAIT)}function jG(n,e){let t=si(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function kf(n){return n.expireTimeMillis-Date.now()>0}function z0(n){return{token:LG(FG),error:n}}var Q0=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=si(this.app);for(let t of e)VO(this.app,t.next);return Promise.resolve()}};function $G(n,e){return new Q0(n,e)}function HG(n){return{getToken:e=>K0(n,e),getLimitedUseToken:()=>VG(n),addTokenListener:e=>UG(n,"INTERNAL",e),removeTokenListener:e=>VO(n.app,e)}}var qG="@firebase/app-check",zG="0.10.1";var GG="app-check",NO="app-check-internal";function WG(){ar(new gn(GG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return $G(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(NO).initialize()})),ar(new gn(NO,n=>{let e=n.getProvider("app-check").getImmediate();return HG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ft(qG,zG)}WG();var KG="app-check";var ra=class{constructor(){return ta(KG)}};var QG=["localhost","0.0.0.0","127.0.0.1"],Yve=typeof window<"u"&&QG.includes(window.location.hostname);var UO=()=>{};var $O=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},YG=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},HO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,m=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(I=64)),r.push(t[h],t[m],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($O(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):YG(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||m==null)throw new J0;let I=s<<2|a>>4;if(r.push(I),d!==64){let S=a<<4&240|d>>2;if(r.push(S),m!==64){let R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},J0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},JG=function(n){let e=$O(n);return HO.encodeByteArray(e,!0)},xf=function(n){return JG(n).replace(/\./g,"")},v_=function(n){try{return HO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var XG=()=>qO().__FIREBASE_DEFAULTS__,ZG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},e8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&v_(n[1]);return e&&JSON.parse(e)},E_=()=>{try{return UO()||XG()||ZG()||e8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Z0=n=>E_()?.emulatorHosts?.[n],zO=n=>{let e=Z0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},eC=()=>E_()?.config,tC=n=>E_()?.[`_${n}`];var __=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ia(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I_(n){return(await fetch(n,{credentials:"include"})).ok}function GO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=U({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xf(JSON.stringify(t)),xf(JSON.stringify(o)),""].join(".")}var Mf={};function t8(){let n={prod:[],emulator:[]};for(let e of Object.keys(Mf))Mf[e]?n.emulator.push(e):n.prod.push(e);return n}function n8(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var BO=!1;function w_(n,e){if(typeof window>"u"||typeof document>"u"||!ia(window.location.host)||Mf[n]===e||Mf[n]||BO)return;Mf[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",s=t8().prod.length>0;function o(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,S){I.setAttribute("width","24"),I.setAttribute("id",S),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function d(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{BO=!0,o()},I}function h(I,S){I.setAttribute("id",S),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function m(){let I=n8(r),S=t("text"),R=document.getElementById(S)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),K=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let Y=I.element;a(Y),h(M,P);let oe=d();c(K,H),Y.append(K,R,M,oe),document.body.appendChild(Y)}s?(R.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function r8(){let n=E_()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JO(){let n=Zt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function XO(){return!r8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function ZO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var i8="FirebaseError",cr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=i8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ms.prototype.create)}},Ms=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?s8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new cr(i,a,r)}};function s8(n,e){return n.replace(o8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var o8=/\{\$([^}]+)}/g;function eF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function oi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(jO(s)&&jO(o)){if(!oi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jO(n){return n!==null&&typeof n=="object"}function Ul(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tF(n,e){let t=new X0(n,e);return t.subscribe.bind(t)}var X0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");a8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Y0),i.error===void 0&&(i.error=Y0),i.complete===void 0&&(i.complete=Y0);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function a8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Y0(){}var tEe=14400*1e3;function Pt(n){return n&&n._delegate?n._delegate:n}var Dr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var kc="[DEFAULT]";var rC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new __;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u8(e))try{this.getOrInitializeService({instanceIdentifier:kc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kc){return this.instances.has(e)}getOptions(e=kc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kc){return this.component?this.component.multipleInstances?e:kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function c8(n){return n===kc?void 0:n}function u8(n){return n.instantiationMode==="EAGER"}var T_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new rC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var l8=[],Ne=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ne||{}),d8={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},h8=Ne.INFO,f8={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},p8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=f8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sa=class{constructor(e){this.name=e,this._logLevel=h8,this._logHandler=p8,this._userLogHandler=null,l8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}};var sC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(m8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function m8(n){return n.getComponent()?.type==="VERSION"}var oC="@firebase/app",nF="0.14.7";var xs=new sa("@firebase/app"),g8="@firebase/app-compat",y8="@firebase/analytics-compat",_8="@firebase/analytics",v8="@firebase/app-check-compat",E8="@firebase/app-check",I8="@firebase/auth",w8="@firebase/auth-compat",T8="@firebase/database",b8="@firebase/data-connect",C8="@firebase/database-compat",S8="@firebase/functions",D8="@firebase/functions-compat",A8="@firebase/installations",R8="@firebase/installations-compat",P8="@firebase/messaging",N8="@firebase/messaging-compat",k8="@firebase/performance",M8="@firebase/performance-compat",x8="@firebase/remote-config",O8="@firebase/remote-config-compat",F8="@firebase/storage",L8="@firebase/storage-compat",V8="@firebase/firestore",U8="@firebase/ai",B8="@firebase/firestore-compat",j8="firebase",$8="12.8.0";var aC="[DEFAULT]",H8={[oC]:"fire-core",[g8]:"fire-core-compat",[_8]:"fire-analytics",[y8]:"fire-analytics-compat",[E8]:"fire-app-check",[v8]:"fire-app-check-compat",[I8]:"fire-auth",[w8]:"fire-auth-compat",[T8]:"fire-rtdb",[b8]:"fire-data-connect",[C8]:"fire-rtdb-compat",[S8]:"fire-fn",[D8]:"fire-fn-compat",[A8]:"fire-iid",[R8]:"fire-iid-compat",[P8]:"fire-fcm",[N8]:"fire-fcm-compat",[k8]:"fire-perf",[M8]:"fire-perf-compat",[x8]:"fire-rc",[O8]:"fire-rc-compat",[F8]:"fire-gcs",[L8]:"fire-gcs-compat",[V8]:"fire-fst",[B8]:"fire-fst-compat",[U8]:"fire-vertex","fire-js":"fire-js",[j8]:"fire-js-all"};var b_=new Map,q8=new Map,cC=new Map;function rF(n,e){try{n.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function aa(n){let e=n.name;if(cC.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;cC.set(e,n);for(let t of b_.values())rF(t,n);for(let t of q8.values())rF(t,n);return!0}function Ff(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ur(n){return n==null?!1:n.settings!==void 0}var z8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new Ms("app","Firebase",z8);var uC=class{constructor(e,t,r){this._isDeleted=!1,this._options=U({},e),this._config=U({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}};var ca=$8;function Os(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=U({name:aC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw oa.create("bad-app-name",{appName:String(i)});if(t||(t=eC()),!t)throw oa.create("no-options");let s=b_.get(i);if(s){if(oi(t,s.options)&&oi(r,s.config))return s;throw oa.create("duplicate-app",{appName:i})}let o=new T_(i);for(let c of cC.values())o.addComponent(c);let a=new uC(t,r,o);return b_.set(i,a),a}function Ar(n=aC){let e=b_.get(n);if(!e&&n===aC&&eC())return Os();if(!e)throw oa.create("no-app",{appName:n});return e}function ai(n,e,t){let r=H8[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(o.join(" "));return}aa(new Dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var G8="firebase-heartbeat-database",W8=1,Of="firebase-heartbeat-store",iC=null;function aF(){return iC||(iC=p_(G8,W8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Of)}catch(t){console.warn(t)}}}}).catch(n=>{throw oa.create("idb-open",{originalErrorMessage:n.message})})),iC}async function K8(n){try{let t=(await aF()).transaction(Of),r=await t.objectStore(Of).get(cF(n));return await t.done,r}catch(e){if(e instanceof cr)xs.warn(e.message);else{let t=oa.create("idb-get",{originalErrorMessage:e?.message});xs.warn(t.message)}}}async function iF(n,e){try{let r=(await aF()).transaction(Of,"readwrite");await r.objectStore(Of).put(e,cF(n)),await r.done}catch(t){if(t instanceof cr)xs.warn(t.message);else{let r=oa.create("idb-set",{originalErrorMessage:t?.message});xs.warn(r.message)}}}function cF(n){return`${n.name}!${n.options.appId}`}var Q8=1024,Y8=30,lC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Y8){let i=X8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=sF(),{heartbeatsToSend:t,unsentEntries:r}=J8(this._heartbeatsCache.heartbeats),i=xf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xs.warn(e),""}}};function sF(){return new Date().toISOString().substring(0,10)}function J8(n,e=Q8){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),oF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),oF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var dC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?ZO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await K8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return iF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return iF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function oF(n){return xf(JSON.stringify({version:2,heartbeats:n})).length}function X8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Z8(n){aa(new Dr("platform-logger",e=>new sC(e),"PRIVATE")),aa(new Dr("heartbeat",e=>new lC(e),"PRIVATE")),ai(oC,nF,n),ai(oC,nF,"esm2020"),ai("fire-js","")}Z8("");function TF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bF=TF,CF=new Ms("auth","Firebase",TF());var P_=new sa("@firebase/auth");function eW(n,...e){P_.logLevel<=Ne.WARN&&P_.warn(`Auth (${ca}): ${n}`,...e)}function S_(n,...e){P_.logLevel<=Ne.ERROR&&P_.error(`Auth (${ca}): ${n}`,...e)}function qi(n,...e){throw RC(n,...e)}function ci(n,...e){return RC(n,...e)}function AC(n,e,t){let r=ae(U({},bF()),{[e]:t});return new Ms("auth","Firebase",r).create(e,{appName:n.name})}function Mc(n){return AC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tW(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&qi(n,"argument-error"),AC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function RC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CF.create(n,...e)}function ge(n,e,...t){if(!n)throw RC(e,...t)}function Fs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw S_(e),new Error(e)}function Vs(n,e){n||Fs(e)}function pC(){return typeof self<"u"&&self.location?.href||""}function nW(){return uF()==="http:"||uF()==="https:"}function uF(){return typeof self<"u"&&self.location?.protocol||null}function rW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nW()||QO()||"connection"in navigator)?navigator.onLine:!0}function iW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var xc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vs(t>e,"Short delay should be less than long delay!"),this.isMobile=WO()||YO()}get(){return rW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function PC(n,e){Vs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var N_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aW=new xc(3e4,6e4);function NC(n,e){return n.tenantId&&!e.tenantId?ae(U({},e),{tenantId:n.tenantId}):e}async function jl(n,e,t,r,i={}){return SF(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Ul(U({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=U({method:e,headers:c},s);return KO()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&ia(n.emulatorConfig.host)&&(d.credentials="include"),N_.fetch()(await DF(n,n.config.apiHost,t,a),d)})}async function SF(n,e,t){n._canInitEmulator=!1;let r=U(U({},sW),e);try{let i=new mC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw C_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw C_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw C_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw C_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw AC(n,h,d);qi(n,h)}}catch(i){if(i instanceof cr)throw i;qi(n,"network-request-failed",{message:String(i)})}}async function cW(n,e,t,r,i={}){let s=await jl(n,e,t,r,i);return"mfaPendingCredential"in s&&qi(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function DF(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?PC(n.config,i):`${n.config.apiScheme}://${i}`;return oW.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var mC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),aW.get())})}};function C_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ci(n,e,r);return i.customData._tokenResponse=t,i}async function uW(n,e){return jl(n,"POST","/v1/accounts:delete",e)}async function k_(n,e){return jl(n,"POST","/v1/accounts:lookup",e)}function Lf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AF(n,e=!1){let t=Pt(n),r=await t.getIdToken(e),i=kC(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Lf(hC(i.auth_time)),issuedAtTime:Lf(hC(i.iat)),expirationTime:Lf(hC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function hC(n){return Number(n)*1e3}function kC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return S_("JWT malformed, contained fewer than 3 sections"),null;try{let i=v_(t);return i?JSON.parse(i):(S_("Failed to decode base64 JWT payload"),null)}catch(i){return S_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function lF(n){let e=kC(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Uf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof cr&&lW(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Bf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lf(this.lastLoginAt),this.creationTime=Lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function M_(n){let e=n.auth,t=await n.getIdToken(),r=await Uf(n,k_(e,{idToken:t}));ge(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?PF(i.providerUserInfo):[],o=dW(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Bf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function RF(n){let e=Pt(n);await M_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=So(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function hW(n,e){let t=await SF(n,{},async()=>{let r=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await DF(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ia(n.emulatorConfig.host)&&(c.credentials="include"),N_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fW(n,e){return jl(n,"POST","/v2/accounts:revokeToken",NC(n,e))}var Vf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");let t=lF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await hW(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ge(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Fs("not implemented")}};function ua(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var la=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=So(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Uf(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AF(this,e)}reload(){return RF(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>U({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ae(U({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await M_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(Mc(this.auth));let e=await this.getIdToken();return await Uf(this,uW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ae(U({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>U({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:m,emailVerified:I,isAnonymous:S,providerData:R,stsTokenManager:P}=t;ge(m&&P,e,"internal-error");let M=Vf.fromJSON(this.name,P);ge(typeof m=="string",e,"internal-error"),ua(r,e.name),ua(i,e.name),ge(typeof I=="boolean",e,"internal-error"),ge(typeof S=="boolean",e,"internal-error"),ua(s,e.name),ua(o,e.name),ua(a,e.name),ua(c,e.name),ua(d,e.name),ua(h,e.name);let H=new n({uid:m,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:M,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(H.providerData=R.map(K=>U({},K))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,t,r=!1){let i=new Vf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await M_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ge(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?PF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Vf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Bf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var dF=new Map;function Ls(n){Vs(n instanceof Function,"Expected a class definition");let e=dF.get(n);return e?(Vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dF.set(n,e),e)}var pW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yC=pW;function D_(n,e,t){return`firebase:${n}:${e}:${t}`}var x_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=D_(this.userKey,i.apiKey,s),this.fullPersistenceKey=D_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await k_(this.auth,{idToken:e}).catch(()=>{});return t?la._fromGetAccountInfoResponse(this.auth,t,e):null}return la._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Ls(yC),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Ls(yC),o=D_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let m;if(typeof h=="string"){let I=await k_(e,{idToken:h}).catch(()=>{});if(!I)break;m=await la._fromGetAccountInfoResponse(e,I,h)}else m=la._fromJSON(e,h);d!==s&&(a=m),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function hF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FF(e))return"Blackberry";if(LF(e))return"Webos";if(kF(e))return"Safari";if((e.includes("chrome/")||MF(e))&&!e.includes("edge/"))return"Chrome";if(OF(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NF(n=Zt()){return/firefox\//i.test(n)}function kF(n=Zt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MF(n=Zt()){return/crios\//i.test(n)}function xF(n=Zt()){return/iemobile/i.test(n)}function OF(n=Zt()){return/android/i.test(n)}function FF(n=Zt()){return/blackberry/i.test(n)}function LF(n=Zt()){return/webos/i.test(n)}function MC(n=Zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mW(n=Zt()){return MC(n)&&!!window.navigator?.standalone}function gW(){return JO()&&document.documentMode===10}function VF(n=Zt()){return MC(n)||OF(n)||LF(n)||FF(n)||/windows phone/i.test(n)||xF(n)}function UF(n,e=[]){let t;switch(n){case"Browser":t=hF(Zt());break;case"Worker":t=`${hF(Zt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ca}/${r}`}var _C=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function yW(n,e={}){return jl(n,"GET","/v2/passwordPolicy",NC(n,e))}var _W=6,vC=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_W,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var EC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O_(this),this.idTokenSubscription=new O_(this),this.beforeStateQueue=new _C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ls(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await x_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await k_(this,{idToken:e}),r=await la._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ur(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await M_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(Mc(this));let t=e?Pt(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(Mc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(Mc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await yW(this),t=new vC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ms("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await fW(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ls(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await x_.create(this,[Ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&eW(`Error while retrieving App Check token: ${e.error}`),e?.token}};function H_(n){return Pt(n)}var O_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=tF(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vW(n){xC=n}function EW(n){return xC.loadJS(n)}function IW(){return xC.gapiScript}function BF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function jF(n,e){let t=Ff(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(oi(s,e??{}))return i;qi(i,"already-initialized")}return t.initialize({options:e})}function wW(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ls);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function $F(n,e,t){let r=H_(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=HF(e),{host:o,port:a}=TW(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(oi(d,r.config.emulator)&&oi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ia(o)?(I_(`${s}//${o}${c}`),w_("Auth",!0)):i||bW()}function HF(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TW(n){let e=HF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:fF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:fF(o)}}}function fF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bW(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var jf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fs("not implemented")}_getIdTokenResponse(e){return Fs("not implemented")}_linkToIdToken(e,t){return Fs("not implemented")}_getReauthenticationResolver(e){return Fs("not implemented")}};async function Bl(n,e){return cW(n,"POST","/v1/accounts:signInWithIdp",NC(n,e))}var CW="http://localhost",F_=class n extends jf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,s=So(a,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Bl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Bl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Bl(e,t)}buildRequest(){let e={requestUri:CW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ul(t)}return e}};var $f=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var L_=class extends $f{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var OC=(()=>{class n extends L_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return F_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Hf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await la._fromIdTokenResponse(e,r,i),o=pF(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=pF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function pF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var IC=class n extends cr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function qF(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?IC._fromErrorAndOperation(n,s,e,r):s})}async function SW(n,e,t=!1){let r=await Uf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hf._forOperation(n,"link",r)}async function DW(n,e,t=!1){let{auth:r}=n;if(ur(r.app))return Promise.reject(Mc(r));let i="reauthenticate";try{let s=await Uf(n,qF(r,i,e,n),t);ge(s.idToken,r,"internal-error");let o=kC(s.idToken);ge(o,r,"internal-error");let{sub:a}=o;return ge(n.uid===a,r,"user-mismatch"),Hf._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&qi(r,"user-mismatch"),s}}async function AW(n,e,t=!1){if(ur(n.app))return Promise.reject(Mc(n));let r="signIn",i=await qF(n,r,e),s=await Hf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function zF(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function GF(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function q_(n,e,t,r){return Pt(n).onAuthStateChanged(e,t,r)}function FC(n){return Pt(n).signOut()}var V_="__sak";var U_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(V_,"1"),this.storage.removeItem(V_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RW=1e3,PW=10,NW=(()=>{class n extends U_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gW()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,PW):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},RW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),WF=NW;var kW=(()=>{class n extends U_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),LC=kW;function MW(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var xW=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await MW(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function VC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var wC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=VC("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let I=m;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(I.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Hi(){return window}function OW(n){Hi().location.href=n}function KF(){return typeof Hi().WorkerGlobalScope<"u"&&typeof Hi().importScripts=="function"}async function FW(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LW(){return navigator?.serviceWorker?.controller||null}function VW(){return KF()?self:null}var QF="firebaseLocalStorageDb",UW=1,B_="firebaseLocalStorage",YF="fbase_key",Oc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function z_(n,e){return n.transaction([B_],e?"readwrite":"readonly").objectStore(B_)}function BW(){let n=indexedDB.deleteDatabase(QF);return new Oc(n).toPromise()}function TC(){let n=indexedDB.open(QF,UW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(B_,{keyPath:YF})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(B_)?e(r):(r.close(),await BW(),e(await TC()))})})}async function mF(n,e,t){let r=z_(n,!0).put({[YF]:e,value:t});return new Oc(r).toPromise()}async function jW(n,e){let t=z_(n,!1).get(e),r=await new Oc(t).toPromise();return r===void 0?null:r.value}function gF(n,e){let t=z_(n,!0).delete(e);return new Oc(t).toPromise()}var $W=800,HW=3,qW=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await TC(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>HW)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xW._getInstance(VW()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FW(),!this.activeServiceWorker)return;this.sender=new wC(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||LW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await TC();return await mF(t,V_,"1"),await gF(t,V_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>mF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>jW(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=z_(s,!1).getAll();return new Oc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$W)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),JF=qW;var bEe=BF("rcb"),CEe=new xc(3e4,6e4);function XF(n,e){return e?Ls(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var qf=class extends jf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function zW(n){return AW(n.auth,new qf(n),n.bypassAuthState)}function GW(n){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),DW(t,new qf(n),n.bypassAuthState)}async function WW(n){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),SW(t,new qf(n),n.bypassAuthState)}var j_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zW;case"linkViaPopup":case"linkViaRedirect":return WW;case"reauthViaPopup":case"reauthViaRedirect":return GW;default:qi(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var KW=new xc(2e3,1e4);async function UC(n,e,t){if(ur(n.app))return Promise.reject(ci(n,"operation-not-supported-in-this-environment"));let r=H_(n);tW(n,e,$f);let i=XF(r,t);return new QW(r,"signInViaPopup",e,i).executeNotNull()}var QW=(()=>{class n extends j_{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return ge(t,this.auth,"internal-error"),t}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");let t=VC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,KW.get())};t()}}n.currentPopupAction=null;return n})(),YW="pendingRedirect",A_=new Map,bC=class extends j_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=A_.get(this.auth._key());if(!e){try{let r=await JW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}A_.set(this.auth._key(),e)}return this.bypassAuthState||A_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function JW(n,e){let t=eK(e),r=ZW(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function XW(n,e){A_.set(n._key(),e)}function ZW(n){return Ls(n._redirectPersistence)}function eK(n){return D_(YW,n.config.apiKey,n.name)}async function tK(n,e,t=!1){if(ur(n.app))return Promise.reject(Mc(n));let r=H_(n),i=XF(r,e),o=await new bC(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var nK=600*1e3,CC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rK(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ZF(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ci(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nK&&this.cachedEventUids.clear(),this.cachedEventUids.has(yF(e))}saveEventToCache(e){this.cachedEventUids.add(yF(e)),this.lastProcessedEventTime=Date.now()}};function yF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZF({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZF(n);default:return!1}}async function iK(n,e={}){return jl(n,"GET","/v1/projects",e)}var sK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oK=/^https?/;async function aK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await iK(n);for(let t of e)try{if(cK(t))return}catch{}qi(n,"unauthorized-domain")}function cK(n){let e=pC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!oK.test(t))return!1;if(sK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var uK=new xc(3e4,6e4);function _F(){let n=Hi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lK(n){return new Promise((e,t)=>{function r(){_F(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_F(),t(ci(n,"network-request-failed"))},timeout:uK.get()})}if(Hi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hi().gapi?.load)r();else{let i=BF("iframefcb");return Hi()[i]=()=>{gapi.load?r():t(ci(n,"network-request-failed"))},EW(`${IW()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw R_=null,e})}var R_=null;function dK(n){return R_=R_||lK(n),R_}var hK=new xc(5e3,15e3),fK="__/auth/iframe",pK="emulator/auth/iframe",mK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yK(n){let e=n.config;ge(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?PC(e,pK):`https://${n.config.authDomain}/${fK}`,r={apiKey:e.apiKey,appName:n.name,v:ca},i=gK.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ul(r).slice(1)}`}async function _K(n){let e=await dK(n),t=Hi().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:yK(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=ci(n,"network-request-failed"),a=Hi().setTimeout(()=>{s(o)},hK.get());function c(){Hi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var vK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EK=500,IK=600,wK="_blank",TK="http://localhost",$_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function bK(n,e,t,r=EK,i=IK){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=ae(U({},vK),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Zt().toLowerCase();t&&(a=MF(d)?wK:t),NF(d)&&(e=e||TK,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[S,R])=>`${I}${S}=${R},`,"");if(mW(d)&&a!=="_self")return CK(e||"",a),new $_(null);let m=window.open(e||"",a,h);ge(m,n,"popup-blocked");try{m.focus()}catch{}return new $_(m)}function CK(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var SK="__/auth/handler",DK="emulator/auth/handler",AK=encodeURIComponent("fac");async function vF(n,e,t,r,i,s){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ca,eventId:i};if(e instanceof $f){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",eF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof L_){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${AK}=${encodeURIComponent(c)}`:"";return`${RK(n)}?${Ul(a).slice(1)}${d}`}function RK({config:n}){return n.emulator?PC(n,DK):`https://${n.authDomain}/${SK}`}var fC="webStorageSupport",SC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LC,this._completeRedirectFn=tK,this._overrideRedirectResult=XW}async _openPopup(e,t,r,i){Vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=await vF(e,t,r,pC(),i);return bK(e,s,VC())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await vF(e,t,r,pC(),i);return OW(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Vs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await _K(e),r=new CC(e);return t.register("authEvent",i=>(ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fC,{type:fC},i=>{let s=i?.[0]?.[fC];s!==void 0&&t(!!s),qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VF()||kF()||MC()}},eL=SC;var EF="@firebase/auth",IF="1.12.0";var DC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function PK(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NK(n){aa(new Dr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UF(n)},d=new EC(r,i,s,c);return wW(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),aa(new Dr("auth-internal",e=>{let t=H_(e.getProvider("auth").getImmediate());return(r=>new DC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(EF,IF,PK(n)),ai(EF,IF,"esm2020")}var kK=300,MK=tC("authIdTokenMaxAge")||kK,wF=null,xK=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MK)return;let i=t?.token;wF!==i&&(wF=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function BC(n=Ar()){let e=Ff(n,"auth");if(e.isInitialized())return e.getImmediate();let t=jF(n,{popupRedirectResolver:eL,persistence:[JF,WF,LC]}),r=tC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=xK(s.toString());GF(t,o,()=>o(t.currentUser)),zF(t,a=>o(a))}}let i=Z0("auth");return i&&$F(t,`http://${i}`),t}function OK(){return document.getElementsByTagName("head")?.[0]??document}vW({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ci("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",OK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NK("Browser");function mL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gL=mL,yL=new ni("auth","Firebase",mL());var J_=new Vi("@firebase/auth");function FK(n,...e){J_.logLevel<=Ye.WARN&&J_.warn(`Auth (${Bi}): ${n}`,...e)}function W_(n,...e){J_.logLevel<=Ye.ERROR&&J_.error(`Auth (${Bi}): ${n}`,...e)}function fa(n,...e){throw oS(n,...e)}function Lc(n,...e){return oS(n,...e)}function _L(n,e,t){let r=Object.assign(Object.assign({},gL()),{[e]:t});return new ni("auth","Firebase",r).create(e,{appName:n.name})}function Fc(n){return _L(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yL.create(n,...e)}function ye(n,e,...t){if(!n)throw oS(e,...t)}function Us(n){let e="INTERNAL ASSERTION FAILED: "+n;throw W_(e),new Error(e)}function pa(n,e){n||Us(e)}function qC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function LK(){return tL()==="http:"||tL()==="https:"}function tL(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function UK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LK()||oO()||"connection"in navigator)?navigator.onLine:!0}function BK(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,pa(t>e,"Short delay should be less than long delay!"),this.isMobile=iO()||aO()}get(){return UK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function aS(n,e){pa(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var X_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var jK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $K=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HK=new Vc(3e4,6e4);function cS(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $l(n,e,t,r,i={}){return vL(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Af(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return sO()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&As(n.emulatorConfig.host)&&(d.credentials="include"),X_.fetch()(await EL(n,n.config.apiHost,t,a),d)})}async function vL(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},jK),e);try{let i=new zC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw G_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw G_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw G_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw G_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _L(n,h,d);fa(n,h)}}catch(i){if(i instanceof On)throw i;fa(n,"network-request-failed",{message:String(i)})}}async function qK(n,e,t,r,i={}){let s=await $l(n,e,t,r,i);return"mfaPendingCredential"in s&&fa(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function EL(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?aS(n.config,i):`${n.config.apiScheme}://${i}`;return $K.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var zC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Lc(this.auth,"network-request-failed")),HK.get())})}};function G_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Lc(n,e,r);return i.customData._tokenResponse=t,i}async function zK(n,e){return $l(n,"POST","/v1/accounts:delete",e)}async function Z_(n,e){return $l(n,"POST","/v1/accounts:lookup",e)}function zf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uS(n,e=!1){let t=ri(n),r=await t.getIdToken(e),i=lS(r);ye(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:zf(jC(i.auth_time)),issuedAtTime:zf(jC(i.iat)),expirationTime:zf(jC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function jC(n){return Number(n)*1e3}function lS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return W_("JWT malformed, contained fewer than 3 sections"),null;try{let i=u_(t);return i?JSON.parse(i):(W_("Failed to decode base64 JWT payload"),null)}catch(i){return W_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nL(n){let e=lS(n);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof On&&GK(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function GK({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var GC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Kf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zf(this.lastLoginAt),this.creationTime=zf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ev(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Wf(n,Z_(t,{idToken:r}));ye(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?IL(s.providerUserInfo):[],a=WK(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function dS(n){let e=ri(n);await ev(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WK(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function IL(n){return n.map(e=>{var{providerId:t}=e,r=bI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function KK(n,e){let t=await vL(n,{},async()=>{let r=Af({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await EL(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&As(n.emulatorConfig.host)&&(c.credentials="include"),X_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QK(n,e){return $l(n,"POST","/v2/accounts:revokeToken",cS(n,e))}var Gf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");let t=nL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await KK(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ye(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Us("not implemented")}};function da(n,e){ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ha=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=bI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Wf(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uS(this,e)}reload(){return dS(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ev(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Fc(this.auth));let e=await this.getIdToken();return await Wf(this,zK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,K=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:oe,isAnonymous:ze,providerData:pe,stsTokenManager:w}=t;ye(Y&&w,e,"internal-error");let y=Gf.fromJSON(this.name,w);ye(typeof Y=="string",e,"internal-error"),da(m,e.name),da(I,e.name),ye(typeof oe=="boolean",e,"internal-error"),ye(typeof ze=="boolean",e,"internal-error"),da(S,e.name),da(R,e.name),da(P,e.name),da(M,e.name),da(H,e.name),da(K,e.name);let E=new n({uid:Y,auth:e,email:I,emailVerified:oe,displayName:m,isAnonymous:ze,photoURL:R,phoneNumber:S,tenantId:P,stsTokenManager:y,createdAt:H,lastLoginAt:K});return pe&&Array.isArray(pe)&&(E.providerData=pe.map(T=>Object.assign({},T))),M&&(E._redirectEventId=M),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new Gf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ev(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ye(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?IL(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Gf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var rL=new Map;function Bs(n){pa(n instanceof Function,"Expected a class definition");let e=rL.get(n);return e?(pa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rL.set(n,e),e)}var YK=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),WC=YK;function K_(n,e,t){return`firebase:${n}:${e}:${t}`}var tv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=K_(this.userKey,i.apiKey,s),this.fullPersistenceKey=K_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Z_(this.auth,{idToken:e}).catch(()=>{});return t?ha._fromGetAccountInfoResponse(this.auth,t,e):null}return ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Bs(WC),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Bs(WC),o=K_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let m;if(typeof h=="string"){let I=await Z_(e,{idToken:h}).catch(()=>{});if(!I)break;m=await ha._fromGetAccountInfoResponse(e,I,h)}else m=ha._fromJSON(e,h);d!==s&&(a=m),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function iL(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DL(e))return"Blackberry";if(AL(e))return"Webos";if(TL(e))return"Safari";if((e.includes("chrome/")||bL(e))&&!e.includes("edge/"))return"Chrome";if(SL(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function wL(n=mn()){return/firefox\//i.test(n)}function TL(n=mn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bL(n=mn()){return/crios\//i.test(n)}function CL(n=mn()){return/iemobile/i.test(n)}function SL(n=mn()){return/android/i.test(n)}function DL(n=mn()){return/blackberry/i.test(n)}function AL(n=mn()){return/webos/i.test(n)}function hS(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JK(n=mn()){var e;return hS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XK(){return cO()&&document.documentMode===10}function RL(n=mn()){return hS(n)||SL(n)||AL(n)||DL(n)||/windows phone/i.test(n)||CL(n)}function PL(n,e=[]){let t;switch(n){case"Browser":t=iL(mn());break;case"Worker":t=`${iL(mn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bi}/${r}`}var KC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function ZK(n,e={}){return $l(n,"GET","/v2/passwordPolicy",cS(n,e))}var e7=6,QC=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:e7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var YC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await tv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Z_(this,{idToken:e}),r=await ha._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(zn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ev(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Fc(this));let t=e?ri(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Fc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Fc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await ZK(this),t=new QC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ni("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await QK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Bs(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=await tv.create(this,[Bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&FK(`Error while retrieving App Check token: ${t.error}`),t?.token}};function fS(n){return ri(n)}var nv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dO(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t7(n){pS=n}function n7(n){return pS.loadJS(n)}function r7(){return pS.gapiScript}function NL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function mS(n,e){let t=ea(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Li(s,e??{}))return i;fa(i,"already-initialized")}return t.initialize({options:e})}function i7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Bs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gS(n,e,t){let r=fS(n);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=kL(e),{host:o,port:a}=s7(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Li(d,r.config.emulator)&&Li(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,As(o)?(Fl(`${s}//${o}${c}`),Ll("Auth",!0)):i||o7()}function kL(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function s7(n){let e=kL(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:sL(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:sL(o)}}}function sL(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function o7(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Us("not implemented")}_getIdTokenResponse(e){return Us("not implemented")}_linkToIdToken(e,t){return Us("not implemented")}_getReauthenticationResolver(e){return Us("not implemented")}};async function $C(n,e){return qK(n,"POST","/v1/accounts:signInWithIdp",cS(n,e))}var iv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var JC=class extends iv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Qf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await ha._fromIdTokenResponse(e,r,i),o=oL(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=oL(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function oL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var XC=class n extends On{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ML(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?XC._fromErrorAndOperation(n,s,e,r):s})}async function a7(n,e,t=!1){let r=await Wf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qf._forOperation(n,"link",r)}async function c7(n,e,t=!1){let{auth:r}=n;if(zn(r.app))return Promise.reject(Fc(r));let i="reauthenticate";try{let s=await Wf(n,ML(r,i,e,n),t);ye(s.idToken,r,"internal-error");let o=lS(s.idToken);ye(o,r,"internal-error");let{sub:a}=o;return ye(n.uid===a,r,"user-mismatch"),Qf._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&fa(r,"user-mismatch"),s}}async function u7(n,e,t=!1){if(zn(n.app))return Promise.reject(Fc(n));let r="signIn",i=await ML(n,r,e),s=await Qf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function yS(n,e,t,r){return ri(n).onIdTokenChanged(e,t,r)}function _S(n,e,t){return ri(n).beforeAuthStateChanged(e,t)}var sv="__sak";var ov=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sv,"1"),this.storage.removeItem(sv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var l7=1e3,d7=10,h7=(()=>{class n extends ov{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);XK()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,d7):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},l7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),xL=h7;var f7=(()=>{class n extends ov{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),vS=f7;function p7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var m7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await p7(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function OL(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ZC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=OL("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let I=m;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(I.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function zi(){return window}function g7(n){zi().location.href=n}function FL(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function y7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _7(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function v7(){return FL()?self:null}var LL="firebaseLocalStorageDb",E7=1,av="firebaseLocalStorage",VL="fbase_key",Uc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function uv(n,e){return n.transaction([av],e?"readwrite":"readonly").objectStore(av)}function I7(){let n=indexedDB.deleteDatabase(LL);return new Uc(n).toPromise()}function eS(){let n=indexedDB.open(LL,E7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(av,{keyPath:VL})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(av)?e(r):(r.close(),await I7(),e(await eS()))})})}async function aL(n,e,t){let r=uv(n,!0).put({[VL]:e,value:t});return new Uc(r).toPromise()}async function w7(n,e){let t=uv(n,!1).get(e),r=await new Uc(t).toPromise();return r===void 0?null:r.value}function cL(n,e){let t=uv(n,!0).delete(e);return new Uc(t).toPromise()}var T7=800,b7=3,C7=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eS(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>b7)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=m7._getInstance(v7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await y7(),!this.activeServiceWorker)return;this.sender=new ZC(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await eS();return await aL(t,sv,"1"),await cL(t,sv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>aL(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>w7(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cL(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=uv(s,!1).getAll();return new Uc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),T7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),UL=C7;var twe=NL("rcb"),nwe=new Vc(3e4,6e4);function S7(n,e){return e?Bs(e):(ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Yf=class extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $C(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $C(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $C(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function D7(n){return u7(n.auth,new Yf(n),n.bypassAuthState)}function A7(n){let{auth:e,user:t}=n;return ye(t,e,"internal-error"),c7(t,new Yf(n),n.bypassAuthState)}async function R7(n){let{auth:e,user:t}=n;return ye(t,e,"internal-error"),a7(t,new Yf(n),n.bypassAuthState)}var tS=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D7;case"linkViaPopup":case"linkViaRedirect":return R7;case"reauthViaPopup":case"reauthViaRedirect":return A7;default:fa(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var rwe=new Vc(2e3,1e4);var P7="pendingRedirect",Q_=new Map,nS=class extends tS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Q_.get(this.auth._key());if(!e){try{let r=await N7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Q_.set(this.auth._key(),e)}return this.bypassAuthState||Q_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function N7(n,e){let t=x7(e),r=M7(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function k7(n,e){Q_.set(n._key(),e)}function M7(n){return Bs(n._redirectPersistence)}function x7(n){return K_(P7,n.config.apiKey,n.name)}async function O7(n,e,t=!1){if(zn(n.app))return Promise.reject(Fc(n));let r=fS(n),i=S7(r,e),o=await new nS(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var F7=600*1e3,rS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!BL(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Lc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F7&&this.cachedEventUids.clear(),this.cachedEventUids.has(uL(e))}saveEventToCache(e){this.cachedEventUids.add(uL(e)),this.lastProcessedEventTime=Date.now()}};function uL(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BL({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function L7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BL(n);default:return!1}}async function V7(n,e={}){return $l(n,"GET","/v1/projects",e)}var U7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B7=/^https?/;async function j7(n){if(n.config.emulator)return;let{authorizedDomains:e}=await V7(n);for(let t of e)try{if($7(t))return}catch{}fa(n,"unauthorized-domain")}function $7(n){let e=qC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!B7.test(t))return!1;if(U7.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var H7=new Vc(3e4,6e4);function lL(){let n=zi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function q7(n){return new Promise((e,t)=>{var r,i,s;function o(){lL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lL(),t(Lc(n,"network-request-failed"))},timeout:H7.get()})}if(!((i=(r=zi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=zi().gapi)===null||s===void 0)&&s.load)o();else{let a=NL("iframefcb");return zi()[a]=()=>{gapi.load?o():t(Lc(n,"network-request-failed"))},n7(`${r7()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Y_=null,e})}var Y_=null;function z7(n){return Y_=Y_||q7(n),Y_}var G7=new Vc(5e3,15e3),W7="__/auth/iframe",K7="emulator/auth/iframe",Q7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J7(n){let e=n.config;ye(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?aS(e,K7):`https://${n.config.authDomain}/${W7}`,r={apiKey:e.apiKey,appName:n.name,v:Bi},i=Y7.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Af(r).slice(1)}`}async function X7(n){let e=await z7(n),t=zi().gapi;return ye(t,n,"internal-error"),e.open({where:document.body,url:J7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Lc(n,"network-request-failed"),a=zi().setTimeout(()=>{s(o)},G7.get());function c(){zi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var Z7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eQ=500,tQ=600,nQ="_blank",rQ="http://localhost",cv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iQ(n,e,t,r=eQ,i=tQ){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Z7),{width:r.toString(),height:i.toString(),top:s,left:o}),d=mn().toLowerCase();t&&(a=bL(d)?nQ:t),wL(d)&&(e=e||rQ,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[S,R])=>`${I}${S}=${R},`,"");if(JK(d)&&a!=="_self")return sQ(e||"",a),new cv(null);let m=window.open(e||"",a,h);ye(m,n,"popup-blocked");try{m.focus()}catch{}return new cv(m)}function sQ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var oQ="__/auth/handler",aQ="emulator/auth/handler",cQ=encodeURIComponent("fac");async function dL(n,e,t,r,i,s){ye(n.config.authDomain,n,"auth-domain-config-required"),ye(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bi,eventId:i};if(e instanceof iv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",lO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof JC){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${cQ}=${encodeURIComponent(c)}`:"";return`${uQ(n)}?${Af(a).slice(1)}${d}`}function uQ({config:n}){return n.emulator?aS(n,aQ):`https://${n.authDomain}/${oQ}`}var HC="webStorageSupport",iS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vS,this._completeRedirectFn=O7,this._overrideRedirectResult=k7}async _openPopup(e,t,r,i){var s;pa((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await dL(e,t,r,qC(),i);return iQ(e,o,OL())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await dL(e,t,r,qC(),i);return g7(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(pa(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await X7(e),r=new rS(e);return t.register("authEvent",i=>(ye(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HC,{type:HC},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[HC];o!==void 0&&t(!!o),fa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RL()||TL()||hS()}},jL=iS;var hL="@firebase/auth",fL="1.10.8";var sS=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dQ(n){ar(new gn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PL(n)},d=new YC(r,i,s,c);return i7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ar(new gn("auth-internal",e=>{let t=fS(e.getProvider("auth").getImmediate());return(r=>new sS(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ft(hL,fL,lQ(n)),ft(hL,fL,"esm2017")}var hQ=300,fQ=S0("authIdTokenMaxAge")||hQ,pL=null,pQ=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fQ)return;let i=t?.token;pL!==i&&(pL=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ES(n=Ps()){let e=ea(n,"auth");if(e.isInitialized())return e.getImmediate();let t=mS(n,{popupRedirectResolver:jL,persistence:[UL,xL,vS]}),r=S0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=pQ(s.toString());_S(t,o,()=>o(t.currentUser)),yS(t,a=>o(a))}}let i=b0("auth");return i&&gS(t,`http://${i}`),t}function mQ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}t7({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Lc("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",mQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dQ("Browser");var $L="auth",Jf=class{constructor(e){return e}},Bc=class{constructor(){return ta($L)}};var IS=new Z("angularfire2.auth-instances");function cY(n,e){let t=Nc($L,n,e);return t&&new Jf(t)}function uY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jf(r)}}var lY={provide:Bc,deps:[[new Jt,IS]]},dY={provide:Jf,useFactory:cY,deps:[[new Jt,IS],ii]};function HL(n,...e){return ft("angularfire",ji.full,"auth"),ln([dY,lY,{provide:IS,useFactory:uY(n),multi:!0,deps:[tt,yt,$i,ks,[new Jt,ra],...e]}])}var qL=Ns(ES,!0);var zL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},GL={};var js,wS;(function(){var n;function e(w,y){function E(){}E.prototype=y.prototype,w.F=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,b,A){for(var v=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)v[ut-2]=arguments[ut];return y.prototype[b].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,E){E||(E=0);let T=Array(16);if(typeof y=="string")for(var b=0;b<16;++b)T[b]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(b=0;b<16;++b)T[b]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],b=w.g[2];let A=w.g[3],v;v=y+(A^E&(b^A))+T[0]+3614090360&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[1]+3905402710&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[2]+606105819&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[3]+3250441966&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(A^E&(b^A))+T[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[5]+1200080426&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[6]+2821735955&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[7]+4249261313&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(A^E&(b^A))+T[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[9]+2336552879&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[10]+4294925233&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[11]+2304563134&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(A^E&(b^A))+T[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[13]+4254626195&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[14]+2792965006&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[15]+1236535329&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(b^A&(E^b))+T[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[6]+3225465664&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[11]+643717713&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[0]+3921069994&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(b^A&(E^b))+T[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[10]+38016083&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[15]+3634488961&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[4]+3889429448&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(b^A&(E^b))+T[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[14]+3275163606&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[3]+4107603335&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[8]+1163531501&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(b^A&(E^b))+T[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[2]+4243563512&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[7]+1735328473&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[12]+2368359562&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(E^b^A)+T[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[8]+2272392833&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[11]+1839030562&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[14]+4259657740&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(E^b^A)+T[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[4]+1272893353&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[7]+4139469664&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[10]+3200236656&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(E^b^A)+T[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[0]+3936430074&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[3]+3572445317&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[6]+76029189&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(E^b^A)+T[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[12]+3873151461&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[15]+530742520&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[2]+3299628645&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(b^(E|~A))+T[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[7]+1126891415&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[14]+2878612391&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[5]+4237533241&4294967295,E=b+(v<<21&4294967295|v>>>11),v=y+(b^(E|~A))+T[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[3]+2399980690&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[10]+4293915773&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[1]+2240044497&4294967295,E=b+(v<<21&4294967295|v>>>11),v=y+(b^(E|~A))+T[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[15]+4264355552&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[6]+2734768916&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[13]+1309151649&4294967295,E=b+(v<<21&4294967295|v>>>11),v=y+(b^(E|~A))+T[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[11]+3174756917&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[2]+718787259&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(b+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.v=function(w,y){y===void 0&&(y=w.length);let E=y-this.blockSize,T=this.C,b=this.h,A=0;for(;A<y;){if(b==0)for(;A<=E;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<y;)if(T[b++]=w.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<y;)if(T[b++]=w[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=y},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[y++]=this.g[E]>>>T&255;return w};function s(w,y){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function o(w,y){this.h=y;let E=[],T=!0;for(let b=w.length-1;b>=0;b--){let A=w[b]|0;T&&A==y||(E[b]=A,T=!1)}this.g=E}var a={};function c(w){return-128<=w&&w<128?s(w,function(y){return new o([y|0],y<0?-1:0)}):new o([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return M(d(-w));let y=[],E=1;for(let T=0;w>=E;T++)y[T]=w/E|0,E*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return M(h(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(y,8)),T=m;for(let A=0;A<w.length;A+=8){var b=Math.min(8,w.length-A);let v=parseInt(w.substring(A,A+b),y);b<8?(b=d(Math.pow(y,b)),T=T.j(b).add(d(v))):(T=T.j(E),T=T.add(d(v)))}return T}var m=c(0),I=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();let w=0,y=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+M(this).toString(w);let y=d(Math.pow(w,6));var E=this;let T="";for(;;){let b=oe(E,y).g;E=H(E,b.j(y));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=b,R(E))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=H(this,w),P(w)?-1:R(w)?0:1};function M(w){let y=w.g.length,E=[];for(let T=0;T<y;T++)E[T]=~w.g[T];return new o(E,~w.h).add(I)}n.abs=function(){return P(this)?M(this):this},n.add=function(w){let y=Math.max(this.g.length,w.g.length),E=[],T=0;for(let b=0;b<=y;b++){let A=T+(this.i(b)&65535)+(w.i(b)&65535),v=(A>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);T=v>>>16,A&=65535,v&=65535,E[b]=v<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function H(w,y){return w.add(M(y))}n.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?M(this).j(M(w)):M(M(this).j(w));if(P(w))return M(this.j(M(w)));if(this.l(S)<0&&w.l(S)<0)return d(this.m()*w.m());let y=this.g.length+w.g.length,E=[];for(var T=0;T<2*y;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let b=0;b<w.g.length;b++){let A=this.i(T)>>>16,v=this.i(T)&65535,ut=w.i(b)>>>16,nn=w.i(b)&65535;E[2*T+2*b]+=v*nn,K(E,2*T+2*b),E[2*T+2*b+1]+=A*nn,K(E,2*T+2*b+1),E[2*T+2*b+1]+=v*ut,K(E,2*T+2*b+1),E[2*T+2*b+2]+=A*ut,K(E,2*T+2*b+2)}for(w=0;w<y;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=y;w<2*y;w++)E[w]=0;return new o(E,0)};function K(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function Y(w,y){this.g=w,this.h=y}function oe(w,y){if(R(y))throw Error("division by zero");if(R(w))return new Y(m,m);if(P(w))return y=oe(M(w),y),new Y(M(y.g),M(y.h));if(P(y))return y=oe(w,M(y)),new Y(M(y.g),y.h);if(w.g.length>30){if(P(w)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var E=I,T=y;T.l(w)<=0;)E=ze(E),T=ze(T);var b=pe(E,1),A=pe(T,1);for(T=pe(T,2),E=pe(E,2);!R(T);){var v=A.add(T);v.l(w)<=0&&(b=b.add(E),A=v),T=pe(T,1),E=pe(E,1)}return y=H(w,b.j(y)),new Y(b,y)}for(b=m;w.l(y)>=0;){for(E=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=d(E),v=A.j(y);P(v)||v.l(w)>0;)E-=T,A=d(E),v=A.j(y);R(A)&&(A=I),b=b.add(A),w=H(w,v)}return new Y(b,w)}n.B=function(w){return oe(this,w).h},n.and=function(w){let y=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<y;T++)E[T]=this.i(T)&w.i(T);return new o(E,this.h&w.h)},n.or=function(w){let y=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<y;T++)E[T]=this.i(T)|w.i(T);return new o(E,this.h|w.h)},n.xor=function(w){let y=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<y;T++)E[T]=this.i(T)^w.i(T);return new o(E,this.h^w.h)};function ze(w){let y=w.g.length+1,E=[];for(let T=0;T<y;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(E,w.h)}function pe(w,y){let E=y>>5;y%=32;let T=w.g.length-E,b=[];for(let A=0;A<T;A++)b[A]=y>0?w.i(A+E)>>>y|w.i(A+E+1)<<32-y:w.i(A+E);return new o(b,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,wS=GL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,js=GL.Integer=o}).apply(typeof zL<"u"?zL:typeof self<"u"?self:typeof window<"u"?window:{});var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$s={};var TS,hY,Hl,bS,Xf,dv,CS,SS,DS;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof lv=="object"&&lv];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var _=r;l=l.split(".");for(var D=0;D<l.length-1;D++){var N=l[D];if(!(N in _))break e;_=_[N]}l=l[l.length-1],D=_[l],p=p(D),p!=D&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var _=[],D;for(D in p)Object.prototype.hasOwnProperty.call(p,D)&&_.push([D,p[D]]);return _}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,_){return l.call.apply(l.bind,arguments)}function d(l,p,_){return d=c,d.apply(null,arguments)}function h(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function m(l,p){function _(){}_.prototype=p.prototype,l.Z=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Ob=function(D,N,F){for(var W=Array(arguments.length-2),me=2;me<arguments.length;me++)W[me-2]=arguments[me];return p.prototype[N].apply(D,W)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function S(l){let p=l.length;if(p>0){let _=Array(p);for(let D=0;D<p;D++)_[D]=l[D];return _}return[]}function R(l,p){for(let D=1;D<arguments.length;D++){let N=arguments[D];var _=typeof N;if(_=_!="object"?_:N?Array.isArray(N)?"array":_:"null",_=="array"||_=="object"&&typeof N.length=="number"){_=l.length||0;let F=N.length||0;l.length=_+F;for(let W=0;W<F;W++)l[_+W]=N[W]}else l.push(N)}}class P{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function M(l){o.setTimeout(()=>{throw l},0)}function H(){var l=w;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class K{constructor(){this.h=this.g=null}add(p,_){let D=Y.get();D.set(p,_),this.h?this.h.next=D:this.g=D,this.h=D}}var Y=new P(()=>new oe,l=>l.reset());class oe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,pe=!1,w=new K,y=()=>{let l=Promise.resolve(void 0);ze=()=>{l.then(E)}};function E(){for(var l;l=H();){try{l.h.call(l.g)}catch(_){M(_)}var p=Y;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}pe=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let _=()=>{};o.addEventListener("test",_,p),o.removeEventListener("test",_,p)}catch{}return l})();function v(l){return/^[\s\xa0]*$/.test(l)}function ut(l,p){b.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}m(ut,b),ut.prototype.init=function(l,p){let _=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(_=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ut.Z.h.call(this)},ut.prototype.h=function(){ut.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nn="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ie(l,p,_,D,N){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!D,this.ha=N,this.key=++ne,this.da=this.fa=!1}function se(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ae(l,p,_){for(let D in l)p.call(_,l[D],D,l)}function It(l,p){for(let _ in l)p.call(void 0,l[_],_,l)}function Pn(l){let p={};for(let _ in l)p[_]=l[_];return p}let gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(l,p){let _,D;for(let N=1;N<arguments.length;N++){D=arguments[N];for(_ in D)l[_]=D[_];for(let F=0;F<gt.length;F++)_=gt[F],Object.prototype.hasOwnProperty.call(D,_)&&(l[_]=D[_])}}function Je(l){this.src=l,this.g={},this.h=0}Je.prototype.add=function(l,p,_,D,N){let F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);let W=Ta(l,p,D,N);return W>-1?(p=l[W],_||(p.fa=!1)):(p=new ie(p,this.src,F,!!D,N),p.fa=_,l.push(p)),p};function lr(l,p){let _=p.type;if(_ in l.g){var D=l.g[_],N=Array.prototype.indexOf.call(D,p,void 0),F;(F=N>=0)&&Array.prototype.splice.call(D,N,1),F&&(se(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Ta(l,p,_,D){for(let N=0;N<l.length;++N){let F=l[N];if(!F.da&&F.listener==p&&F.capture==!!_&&F.ha==D)return N}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),Qn={};function rn(l,p,_,D,N){if(D&&D.once)return du(l,p,_,D,N);if(Array.isArray(p)){for(let F=0;F<p.length;F++)rn(l,p[F],_,D,N);return null}return _=mu(_),l&&l[nn]?l.J(p,_,a(D)?!!D.capture:!!D,N):dr(l,p,_,!1,D,N)}function dr(l,p,_,D,N,F){if(!p)throw Error("Invalid event type");let W=a(N)?!!N.capture:!!N,me=pu(l);if(me||(l[pt]=me=new Je(l)),_=me.add(p,_,D,W,F),_.proxy)return _;if(D=hi(),_.proxy=D,D.src=l,D.listener=_,l.addEventListener)A||(N=W),N===void 0&&(N=!1),l.addEventListener(p.toString(),D,N);else if(l.attachEvent)l.attachEvent(fu(p.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function hi(){function l(_){return p.call(l.src,l.listener,_)}let p=Bp;return l}function du(l,p,_,D,N){if(Array.isArray(p)){for(let F=0;F<p.length;F++)du(l,p[F],_,D,N);return null}return _=mu(_),l&&l[nn]?l.K(p,_,a(D)?!!D.capture:!!D,N):dr(l,p,_,!0,D,N)}function hu(l,p,_,D,N){if(Array.isArray(p))for(var F=0;F<p.length;F++)hu(l,p[F],_,D,N);else D=a(D)?!!D.capture:!!D,_=mu(_),l&&l[nn]?(l=l.i,F=String(p).toString(),F in l.g&&(p=l.g[F],_=Ta(p,_,D,N),_>-1&&(se(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete l.g[F],l.h--)))):l&&(l=pu(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ta(p,_,D,N)),(_=l>-1?p[l]:null)&&ba(_))}function ba(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[nn])lr(p.i,l);else{var _=l.type,D=l.proxy;p.removeEventListener?p.removeEventListener(_,D,l.capture):p.detachEvent?p.detachEvent(fu(_),D):p.addListener&&p.removeListener&&p.removeListener(D),(_=pu(p))?(lr(_,l),_.h==0&&(_.src=null,p[pt]=null)):se(l)}}}function fu(l){return l in Qn?Qn[l]:Qn[l]="on"+l}function Bp(l,p){if(l.da)l=!0;else{p=new ut(p,this);let _=l.listener,D=l.ha||l.src;l.fa&&ba(l),l=_.call(D,p)}return l}function pu(l){return l=l[pt],l instanceof Je?l:null}var Nd="__closure_events_fn_"+(Math.random()*1e9>>>0);function mu(l){return typeof l=="function"?l:(l[Nd]||(l[Nd]=function(p){return l.handleEvent(p)}),l[Nd])}function qt(){T.call(this),this.i=new Je(this),this.M=this,this.G=null}m(qt,T),qt.prototype[nn]=!0,qt.prototype.removeEventListener=function(l,p,_,D){hu(this,l,p,_,D)};function zt(l,p){var _,D=l.G;if(D)for(_=[];D;D=D.G)_.push(D);if(l=l.M,D=p.type||p,typeof p=="string")p=new b(p,l);else if(p instanceof b)p.target=p.target||l;else{var N=p;p=new b(D,l),it(p,N)}N=!0;let F,W;if(_)for(W=_.length-1;W>=0;W--)F=p.g=_[W],N=Ca(F,D,!0,p)&&N;if(F=p.g=l,N=Ca(F,D,!0,p)&&N,N=Ca(F,D,!1,p)&&N,_)for(W=0;W<_.length;W++)F=p.g=_[W],N=Ca(F,D,!1,p)&&N}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let _=l.g[p];for(let D=0;D<_.length;D++)se(_[D]);delete l.g[p],l.h--}}this.G=null},qt.prototype.J=function(l,p,_,D){return this.i.add(String(l),p,!1,_,D)},qt.prototype.K=function(l,p,_,D){return this.i.add(String(l),p,!0,_,D)};function Ca(l,p,_,D){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let F=0;F<p.length;++F){let W=p[F];if(W&&!W.da&&W.capture==_){let me=W.listener,u=W.ha||W.src;W.fa&&lr(l.i,W),N=me.call(u,D)!==!1&&N}}return N&&!D.defaultPrevented}function QE(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function gu(l){l.g=QE(()=>{l.g=null,l.i&&(l.i=!1,gu(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class kd extends T{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:gu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function as(l){T.call(this),this.h=l,this.g={}}m(as,T);var Gt=[];function Yt(l){Ae(l.g,function(p,_){this.g.hasOwnProperty(_)&&ba(p)},l),l.g={}}as.prototype.N=function(){as.Z.N.call(this),Yt(this)},as.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ro=o.JSON.stringify,jp=o.JSON.parse,$p=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Hp(){}function io(){}var so={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yu(){b.call(this,"d")}m(yu,b);function Sa(){b.call(this,"c")}m(Sa,b);var cs={},qp=null;function oo(){return qp=qp||new qt}cs.Ia="serverreachability";function Md(l){b.call(this,cs.Ia,l)}m(Md,b);function ao(l){let p=oo();zt(p,new Md(p))}cs.STAT_EVENT="statevent";function co(l,p){b.call(this,cs.STAT_EVENT,l),this.stat=p}m(co,b);function Wt(l){let p=oo();zt(p,new co(p,l))}cs.Ja="timingevent";function _u(l,p){b.call(this,cs.Ja,l),this.size=p}m(_u,b);function Yn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function uo(){this.g=!0}uo.prototype.ua=function(){this.g=!1};function vu(l,p,_,D,N,F){l.info(function(){if(l.g)if(F){var W="",me=F.split("&");for(let f=0;f<me.length;f++){var u=me[f].split("=");if(u.length>1){let g=u[0];u=u[1];let C=g.split("_");W=C.length>=2&&C[1]=="type"?W+(g+"="+u+"&"):W+(g+"=redacted&")}}}else W=null;else W=F;return"XMLHTTP REQ ("+D+") [attempt "+N+"]: "+p+`
`+_+`
`+W})}function zp(l,p,_,D,N,F,W){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+N+"]: "+p+`
`+_+`
`+F+" "+W})}function hr(l,p,_,D){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+sn(l,_)+(D?" "+D:"")})}function Gp(l,p){l.info(function(){return"TIMEOUT: "+p})}uo.prototype.info=function(){};function sn(l,p){if(!l.g)return p;if(!p)return null;try{let F=JSON.parse(p);if(F){for(l=0;l<F.length;l++)if(Array.isArray(F[l])){var _=F[l];if(!(_.length<2)){var D=_[1];if(Array.isArray(D)&&!(D.length<1)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(let W=1;W<D.length;W++)D[W]=""}}}}return ro(F)}catch{return p}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ho;function xd(){}m(xd,Hp),xd.prototype.g=function(){return new XMLHttpRequest},ho=new xd;function Aa(l){return encodeURIComponent(String(l))}function fo(l){var p=1;l=l.split(":");let _=[];for(;p>0&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function fi(l,p,_,D){this.j=l,this.i=p,this.l=_,this.S=D||1,this.V=new as(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wp}function Wp(){this.i=null,this.g="",this.h=!1}var Ra={},Eu={};function Pa(l,p,_){l.M=1,l.A=xa(Jn(p)),l.u=_,l.R=!0,Na(l,null)}function Na(l,p){l.F=Date.now(),po(l),l.B=Jn(l.A);var _=l.B,D=l.S;Array.isArray(D)||(D=[String(D)]),Zp(_.i,"t",D),l.C=0,_=l.j.L,l.h=new Wp,l.g=Mu(l.j,_?p:null,!l.u),l.P>0&&(l.O=new kd(d(l.Y,l,l.g),l.P)),p=l.V,_=l.g,D=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(Gt[0]=N.toString()),N=Gt);for(let F=0;F<N.length;F++){let W=rn(_,N[F],D||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=l.J?Pn(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),ao(),vu(l.i,l.v,l.B,l.l,l.S,l.u)}fi.prototype.ba=function(l){l=l.target;let p=this.O;p&&Ge(l)==3?p.j():this.Y(l)},fi.prototype.Y=function(l){try{if(l==this.g)e:{let me=Ge(this.g),u=this.g.ya(),f=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||om(this.g)))){this.K||me!=4||u==7||(u==8||f<=0?ao(3):ao(2)),wu(this);var p=this.g.ca();this.X=p;var _=pi(this);if(this.o=p==200,zp(this.i,this.v,this.B,this.l,this.S,me,p),this.o){if(this.U&&!this.L){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(D)){var F=D;break t}}F=null}if(l=F)hr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,go(this,l);else{this.o=!1,this.m=3,Wt(12),us(this),mo(this);break e}}if(this.R){l=!0;let g;for(;!this.K&&this.C<_.length;)if(g=Kp(this,_),g==Eu){me==4&&(this.m=4,Wt(14),l=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(g==Ra){this.m=4,Wt(15),hr(this.i,this.l,_,"[Invalid Chunk]"),l=!1;break}else hr(this.i,this.l,g,null),go(this,g);if(Od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||_.length!=0||this.h.h||(this.m=1,Wt(16),l=!1),this.o=this.o&&l,!l)hr(this.i,this.l,_,"[Invalid Chunked Response]"),us(this),mo(this);else if(_.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Pu(W),W.P=!0,Wt(11))}}else hr(this.i,this.l,_,null),go(this,_);me==4&&us(this),this.o&&!this.K&&(me==4?Kd(this.j,this):(this.o=!1,po(this)))}else YE(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),us(this),mo(this)}}}catch{}};function pi(l){if(!Od(l))return l.g.la();let p=om(l.g);if(p==="")return"";let _="",D=p.length,N=Ge(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return us(l),mo(l),"";l.h.i=new o.TextDecoder}for(let F=0;F<D;F++)l.h.h=!0,_+=l.h.i.decode(p[F],{stream:!(N&&F==D-1)});return p.length=0,l.h.g+=_,l.C=0,l.h.g}function Od(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Kp(l,p){var _=l.C,D=p.indexOf(`
`,_);return D==-1?Eu:(_=Number(p.substring(_,D)),isNaN(_)?Ra:(D+=1,D+_>p.length?Eu:(p=p.slice(D,D+_),l.C=D+_,p)))}fi.prototype.cancel=function(){this.K=!0,us(this)};function po(l){l.T=Date.now()+l.H,Iu(l,l.H)}function Iu(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Yn(d(l.aa,l),p)}function wu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}fi.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(Gp(this.i,this.B),this.M!=2&&(ao(),Wt(17)),us(this),this.m=2,mo(this)):Iu(this,this.T-l)};function mo(l){l.j.I==0||l.K||Kd(l.j,l)}function us(l){wu(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Yt(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function go(l,p){try{var _=l.j;if(_.I!=0&&(_.g==l||ka(_.h,l))){if(!l.L&&ka(_.h,l)&&_.I==3){try{var D=_.Ba.g.parse(p)}catch{D=null}if(Array.isArray(D)&&D.length==3){var N=D;if(N[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<l.F)Nu(_),ls(_);else break e;bo(_),Wt(18)}}else _.xa=N[1],0<_.xa-_.K&&N[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Yn(d(_.Va,_),6e3));mi(_.h)<=1&&_.ta&&(_.ta=void 0)}else yi(_,11)}else if((l.L||_.g==l)&&Nu(_),!v(p))for(N=_.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],g=f[0];if(!(g<=_.K))if(_.K=g,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let C=f[3];C!=null&&(_.ka=C,_.j.info("VER="+_.ka));let k=f[4];k!=null&&(_.za=k,_.j.info("SVER="+_.za));let L=f[5];L!=null&&typeof L=="number"&&L>0&&(D=1.5*L,_.O=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;let G=l.g;if(G){let Be=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Be){var F=D.h;F.g||Be.indexOf("spdy")==-1&&Be.indexOf("quic")==-1&&Be.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Fd(F,F.h),F.h=null))}if(D.G){let Dt=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Dt&&(D.wa=Dt,st(D.J,D.G,Dt))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-l.F,_.j.info("Handshake RTT: "+_.T+"ms")),D=_;var W=l;if(D.na=ku(D,D.L?D.ba:null,D.W),W.L){Ld(D.h,W);var me=W,u=D.O;u&&(me.H=u),me.D&&(wu(me),po(me)),D.g=W}else Ru(D);_.i.length>0&&Ln(_)}else f[0]!="stop"&&f[0]!="close"||yi(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?yi(_,7):Au(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}ao(4)}catch{}}var Qp=class{constructor(l,p){this.g=l,this.map=p}};function Tu(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yo(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function mi(l){return l.h?1:l.g?l.g.size:0}function ka(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Fd(l,p){l.g?l.g.add(p):l.h=p}function Ld(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Tu.prototype.cancel=function(){if(this.i=Vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Vd(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let _ of l.g.values())p=p.concat(_.G);return p}return S(l.i)}var Ud=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bd(l,p){if(l){l=l.split("&");for(let _=0;_<l.length;_++){let D=l[_].indexOf("="),N,F=null;D>=0?(N=l[_].substring(0,D),F=l[_].substring(D+1)):N=l[_],p(N,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function fr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof fr?(this.l=l.l,_o(this,l.j),this.o=l.o,this.g=l.g,Ma(this,l.u),this.h=l.h,jd(this,em(l.i)),this.m=l.m):l&&(p=String(l).match(Ud))?(this.l=!1,_o(this,p[1]||"",!0),this.o=Oa(p[2]||""),this.g=Oa(p[3]||"",!0),Ma(this,p[4]),this.h=Oa(p[5]||"",!0),jd(this,p[6]||"",!0),this.m=Oa(p[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}fr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(Xn(p,Fa,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Xn(p,Fa,!0),"@"),l.push(Aa(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&l.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Xn(_,_.charAt(0)=="/"?Yp:bu,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Xn(_,Cu)),l.join("")},fr.prototype.resolve=function(l){let p=Jn(this),_=!!l.j;_?_o(p,l.j):_=!!l.o,_?p.o=l.o:_=!!l.g,_?p.g=l.g:_=l.u!=null;var D=l.h;if(_)Ma(p,l.u);else if(_=!!l.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var N=p.h.lastIndexOf("/");N!=-1&&(D=p.h.slice(0,N+1)+D)}if(N=D,N==".."||N==".")D="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){D=N.lastIndexOf("/",0)==0,N=N.split("/");let F=[];for(let W=0;W<N.length;){let me=N[W++];me=="."?D&&W==N.length&&F.push(""):me==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),D&&W==N.length&&F.push("")):(F.push(me),D=!0)}D=F.join("/")}else D=N}return _?p.h=D:_=l.i.toString()!=="",_?jd(p,em(l.i)):_=!!l.m,_&&(p.m=l.m),p};function Jn(l){return new fr(l)}function _o(l,p,_){l.j=_?Oa(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ma(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function jd(l,p,_){p instanceof Or?(l.i=p,La(l.i,l.l)):(_||(p=Xn(p,lt)),l.i=new Or(p,l.l))}function st(l,p,_){l.i.set(p,_)}function xa(l){return st(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Oa(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Xn(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,xr),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function xr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fa=/[#\/\?@]/g,bu=/[#\?:]/g,Yp=/[#\?]/g,lt=/[#\?@]/g,Cu=/#/g;function Or(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Zn(l){l.g||(l.g=new Map,l.h=0,l.i&&Bd(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Or.prototype,n.add=function(l,p){Zn(this),this.i=null,l=vo(this,l);let _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function Jp(l,p){Zn(l),p=vo(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function $d(l,p){return Zn(l),p=vo(l,p),l.g.has(p)}n.forEach=function(l,p){Zn(this),this.g.forEach(function(_,D){_.forEach(function(N){l.call(p,N,D,this)},this)},this)};function Xp(l,p){Zn(l);let _=[];if(typeof p=="string")$d(l,p)&&(_=_.concat(l.g.get(vo(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)_=_.concat(l[p]);return _}n.set=function(l,p){return Zn(this),this.i=null,l=vo(this,l),$d(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=Xp(this,l),l.length>0?String(l[0]):p):p};function Zp(l,p,_){Jp(l,p),_.length>0&&(l.i=null,l.g.set(vo(l,p),S(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let D=0;D<p.length;D++){var _=p[D];let N=Aa(_);_=Xp(this,_);for(let F=0;F<_.length;F++){let W=N;_[F]!==""&&(W+="="+Aa(_[F])),l.push(W)}}return this.i=l.join("&")};function em(l){let p=new Or;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function vo(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function La(l,p){p&&!l.j&&(Zn(l),l.i=null,l.g.forEach(function(_,D){let N=D.toLowerCase();D!=N&&(Jp(this,D),Zp(this,N,_))},l)),l.j=p}function gi(l,p){let _=new uo;if(o.Image){let D=new Image;D.onload=h(Fr,_,"TestLoadImage: loaded",!0,p,D),D.onerror=h(Fr,_,"TestLoadImage: error",!1,p,D),D.onabort=h(Fr,_,"TestLoadImage: abort",!1,p,D),D.ontimeout=h(Fr,_,"TestLoadImage: timeout",!1,p,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else p(!1)}function tm(l,p){let _=new uo,D=new AbortController,N=setTimeout(()=>{D.abort(),Fr(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:D.signal}).then(F=>{clearTimeout(N),F.ok?Fr(_,"TestPingServer: ok",!0,p):Fr(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Fr(_,"TestPingServer: error",!1,p)})}function Fr(l,p,_,D,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),D(_)}catch{}}function nm(){this.g=new $p}function Lr(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Lr,Hp),Lr.prototype.g=function(){return new Su(this.i,this.h)};function Su(l,p){qt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Su,qt),n=Su.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Fn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Va(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;rm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function rm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Va(this):Fn(this),this.readyState==3&&rm(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Va(this))},n.Na=function(l){this.g&&(this.response=l,Va(this))},n.ga=function(){this.g&&Va(this)};function Va(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Fn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function Fn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function im(l){let p="";return Ae(l,function(_,D){p+=D,p+=":",p+=_,p+=`\r
`}),p}function Hd(l,p,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=im(_),typeof l=="string"?_!=null&&Aa(_):st(l,p,_))}function ot(l){qt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ot,qt);var Du=/^https?$/i,sm=["POST","PUT"];n=ot.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ho.g(),this.g.onreadystatechange=I(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(F){Eo(this,F);return}if(l=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var N in D)_.set(N,D[N]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let F of D.keys())_.set(F,D.get(F));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(sm,p,void 0)>=0)||D||N||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,W]of _)this.g.setRequestHeader(F,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(F){Eo(this,F)}};function Eo(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Io(l),wo(l)}function Io(l){l.A||(l.A=!0,zt(l,"complete"),zt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,zt(this,"complete"),zt(this,"abort"),wo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wo(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qd(this):this.Xa())},n.Xa=function(){qd(this)};function qd(l){if(l.h&&typeof s<"u"){if(l.v&&Ge(l)==4)setTimeout(l.Ca.bind(l),0);else if(zt(l,"readystatechange"),Ge(l)==4){l.h=!1;try{let F=l.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var D;if(D=F===0){let W=String(l.D).match(Ud)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),D=!Du.test(W?W.toLowerCase():"")}_=D}if(_)zt(l,"complete"),zt(l,"success");else{l.o=6;try{var N=Ge(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",Io(l)}}finally{wo(l)}}}}function wo(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let _=l.g;l.g=null,p||zt(l,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ge(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Ge(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),jp(p)}};function om(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function YE(l){let p={};l=(l.g&&Ge(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(v(l[D]))continue;var _=fo(l[D]);let N=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let F=p[N]||[];p[N]=F,F.push(_)}It(p,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function To(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function zd(l){this.za=0,this.i=[],this.j=new uo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=To("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=To("baseRetryDelayMs",5e3,l),this.Za=To("retryDelaySeedMs",1e4,l),this.Ta=To("forwardChannelMaxRetries",2,l),this.va=To("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Tu(l&&l.concurrentRequestLimit),this.Ba=new nm,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=zd.prototype,n.ka=8,n.I=1,n.connect=function(l,p,_,D){Wt(0),this.W=l,this.H=p||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.J=ku(this,null,this.W),Ln(this)};function Au(l){if(Gd(l),l.I==3){var p=l.V++,_=Jn(l.J);if(st(_,"SID",l.M),st(_,"RID",p),st(_,"TYPE","terminate"),Vr(l,_),p=new fi(l,l.j,p),p.M=2,p.A=xa(Jn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=p.A,_=!0),_||(p.g=Mu(p.j,null),p.g.ea(p.A)),p.F=Date.now(),po(p)}Qd(l)}function ls(l){l.g&&(Pu(l),l.g.cancel(),l.g=null)}function Gd(l){ls(l),l.v&&(o.clearTimeout(l.v),l.v=null),Nu(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Ln(l){if(!yo(l.h)&&!l.m){l.m=!0;var p=l.Ea;ze||y(),pe||(ze(),pe=!0),w.add(p,l),l.D=0}}function am(l,p){return mi(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Yn(d(l.Ea,l,p),Co(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new fi(this,this.j,l),F=this.o;if(this.U&&(F?(F=Pn(F),it(F,this.U)):F=this.U),this.u!==null||this.R||(N.J=F,F=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(p+=D,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Wd(this,N,p),_=Jn(this.J),st(_,"RID",l),st(_,"CVER",22),this.G&&st(_,"X-HTTP-Session-Id",this.G),Vr(this,_),F&&(this.R?p="headers="+Aa(im(F))+"&"+p:this.u&&Hd(_,this.u,F)),Fd(this.h,N),this.Ra&&st(_,"TYPE","init"),this.S?(st(_,"$req",p),st(_,"SID","null"),N.U=!0,Pa(N,_,null)):Pa(N,_,p),this.I=2}}else this.I==3&&(l?cm(this,l):this.i.length==0||yo(this.h)||cm(this))};function cm(l,p){var _;p?_=p.l:_=l.V++;let D=Jn(l.J);st(D,"SID",l.M),st(D,"RID",_),st(D,"AID",l.K),Vr(l,D),l.u&&l.o&&Hd(D,l.u,l.o),_=new fi(l,l.j,_,l.D+1),l.u===null&&(_.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Wd(l,_,1e3),_.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Fd(l.h,_),Pa(_,D,p)}function Vr(l,p){l.H&&Ae(l.H,function(_,D){st(p,D,_)}),l.l&&Ae({},function(_,D){st(p,D,_)})}function Wd(l,p,_){_=Math.min(l.i.length,_);let D=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let me=-1;for(;;){let u=["count="+_];me==-1?_>0?(me=N[0].g,u.push("ofs="+me)):me=0:u.push("ofs="+me);let f=!0;for(let g=0;g<_;g++){var F=N[g].g;let C=N[g].map;if(F-=me,F<0)me=Math.max(0,N[g].g-100),f=!1;else try{F="req"+F+"_"||"";try{var W=C instanceof Map?C:Object.entries(C);for(let[k,L]of W){let G=L;a(L)&&(G=ro(L)),u.push(F+k+"="+encodeURIComponent(G))}}catch(k){throw u.push(F+"type="+encodeURIComponent("_badmap")),k}}catch{D&&D(C)}}if(f){W=u.join("&");break e}}W=void 0}return l=l.i.splice(0,_),p.G=l,W}function Ru(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ze||y(),pe||(ze(),pe=!0),w.add(p,l),l.A=0}}function bo(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Yn(d(l.Da,l),Co(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Ua(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Yn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),ls(this),Ua(this))};function Pu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ua(l){l.g=new fi(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=Jn(l.na);st(p,"RID","rpc"),st(p,"SID",l.M),st(p,"AID",l.K),st(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&st(p,"TO",l.ia),st(p,"TYPE","xmlhttp"),Vr(l,p),l.u&&l.o&&Hd(p,l.u,l.o),l.O&&(l.g.H=l.O);var _=l.g;l=l.ba,_.M=1,_.A=xa(Jn(p)),_.u=null,_.R=!0,Na(_,l)}n.Va=function(){this.C!=null&&(this.C=null,ls(this),bo(this),Wt(19))};function Nu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Kd(l,p){var _=null;if(l.g==p){Nu(l),Pu(l),l.g=null;var D=2}else if(ka(l.h,p))_=p.G,Ld(l.h,p),D=1;else return;if(l.I!=0){if(p.o)if(D==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;D=oo(),zt(D,new _u(D,_)),Ln(l)}else Ru(l);else if(N=p.m,N==3||N==0&&p.X>0||!(D==1&&am(l,p)||D==2&&bo(l)))switch(_&&_.length>0&&(p=l.h,p.i=p.i.concat(_)),N){case 1:yi(l,5);break;case 4:yi(l,10);break;case 3:yi(l,6);break;default:yi(l,2)}}}function Co(l,p){let _=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(_*=2),_*p}function yi(l,p){if(l.j.info("Error code "+p),p==2){var _=d(l.bb,l),D=l.Ua;let N=!D;D=new fr(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_o(D,"https"),xa(D),N?gi(D.toString(),_):tm(D.toString(),_)}else Wt(2);l.I=0,l.l&&l.l.pa(p),Qd(l),Gd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Qd(l){if(l.I=0,l.ja=[],l.l){let p=Vd(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ja,p),R(l.ja,l.i),l.h.i.length=0,S(l.i),l.i.length=0),l.l.oa()}}function ku(l,p,_){var D=_ instanceof fr?Jn(_):new fr(_);if(D.g!="")p&&(D.g=p+"."+D.g),Ma(D,D.u);else{var N=o.location;D=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let F=new fr(null);D&&_o(F,D),p&&(F.g=p),N&&Ma(F,N),_&&(F.h=_),D=F}return _=l.G,p=l.wa,_&&p&&st(D,_,p),st(D,"VER",l.ka),Vr(l,D),D}function Mu(l,p,_){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new ot(new Lr({ab:_})):new ot(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yd(){}n=Yd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ds(){}ds.prototype.g=function(l,p){return new vn(l,p)};function vn(l,p){qt.call(this),this.g=new zd(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new hs(this)}m(vn,qt),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Au(this.g)},vn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.v&&(_={},_.__data__=ro(l),l=_);p.i.push(new Qp(p.Ya++,l)),p.I==3&&Ln(p)},vn.prototype.N=function(){this.g.l=null,delete this.j,Au(this.g),delete this.g,vn.Z.N.call(this)};function Jd(l){yu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}m(Jd,yu);function _i(){Sa.call(this),this.status=1}m(_i,Sa);function hs(l){this.g=l}m(hs,Yd),hs.prototype.ra=function(){zt(this.g,"a")},hs.prototype.qa=function(l){zt(this.g,new Jd(l))},hs.prototype.pa=function(l){zt(this.g,new _i)},hs.prototype.oa=function(){zt(this.g,"b")},ds.prototype.createWebChannel=ds.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,DS=$s.createWebChannelTransport=function(){return new ds},SS=$s.getStatEventTarget=function(){return oo()},CS=$s.Event=cs,dv=$s.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,Xf=$s.ErrorCode=Da,lo.COMPLETE="complete",bS=$s.EventType=lo,io.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",qt.prototype.listen=qt.prototype.J,Hl=$s.WebChannel=io,hY=$s.FetchXmlHttpFactory=Lr,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,TS=$s.XhrIo=ot}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");var cd="12.8.0";function MV(n){cd=n}var Hc=new sa("@firebase/firestore");function ql(){return Hc.logLevel}function ee(n,...e){if(Hc.logLevel<=Ne.DEBUG){let t=e.map(sA);Hc.debug(`Firestore (${cd}): ${n}`,...t)}}function Gs(n,...e){if(Hc.logLevel<=Ne.ERROR){let t=e.map(sA);Hc.error(`Firestore (${cd}): ${n}`,...t)}}function ma(n,...e){if(Hc.logLevel<=Ne.WARN){let t=e.map(sA);Hc.warn(`Firestore (${cd}): ${n}`,...t)}}function sA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,xV(n,r,t)}function xV(n,e,t){let r=`FIRESTORE (${cd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gs(r),new Error(r)}function rt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||xV(e,i,r)}function Te(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},J=class extends cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Hs=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var _v=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}},MS=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ev=class{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hs,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hs)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new _v(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new en(e)}},xS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},OS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new xS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Iv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);let r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Iv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function fY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var qc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=fY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Me(n,e){return n<e?-1:n>e?1:0}function FS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return AS(i)===AS(s)?Me(i,s):AS(i)?1:-1}return Me(n.length,e.length)}var pY=55296,mY=57343;function AS(n){let e=n.charCodeAt(0);return e>=pY&&e<=mY}function Jl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var WL="__name__",Tv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):FS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return js.fromString(e.substring(4,e.length-2))}},_t=class n extends Tv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new J($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},gY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wn=class n extends Tv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return gY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WL}static keyField(){return new n([WL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new J($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new J($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(_t.fromString(e))}static fromName(e){return new n(_t.fromString(e).popFirst(5))}static empty(){return new n(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _t(e.slice()))}};function OV(n,e,t){if(!t)throw new J($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FV(n,e,t,r){if(e===!0&&r===!0)throw new J($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KL(n){if(!ce.isDocumentKey(n))throw new J($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QL(n){if(ce.isDocumentKey(n))throw new J($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LV(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function ts(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gp(n);throw new J($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kt(n,e){let t={typeString:n};return e&&(t.value=e),t}function ud(n,e){if(!LV(n))throw new J($.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new J($.INVALID_ARGUMENT,t);return!0}var YL=-62135596800,JL=1e6,Mt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*JL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<YL)throw new J($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JL}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ud(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-YL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:kt("string",Mt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Mt(0,0))}static max(){return new n(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ip=-1,bv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bv.UNKNOWN_ID=-1;function yY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new zc(i,ce.empty(),e)}function _Y(n){return new zc(n.readTime,n.key,ip)}var zc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),ce.empty(),ip)}static max(){return new n(De.max(),ce.empty(),ip)}};function vY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}var EY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",LS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ld(n){if(n.code!==$.FAILED_PRECONDITION||n.message!==EY)throw n;ee("LocalStore","Unexpectedly lost primary lease")}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function IY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dd(n){return n.name==="IndexedDbTransactionError"}var oA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),aA=-1;function Zv(n){return n==null}function sp(n){return n===0&&1/n==-1/0}function wY(n){return typeof n=="number"&&Number.isInteger(n)&&!sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var VV="";function TY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XL(e)),e=bY(n.get(t),e);return XL(e)}function bY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case VV:t+="";break;default:t+=s}}return t}function XL(n){return n+VV+""}var CY="remoteDocuments",UV="owner";var BV="mutationQueues";var jV="mutations";var $V="documentMutations",SY="remoteDocumentsV14";var HV="remoteDocumentGlobal";var qV="targets";var zV="targetDocuments";var GV="targetGlobal",WV="collectionParents";var KV="clientMetadata";var QV="bundles";var YV="namedQueries";var DY="indexConfiguration";var AY="indexState";var RY="indexEntries";var JV="documentOverlays";var PY="globals";var NY=[BV,jV,$V,CY,qV,UV,GV,zV,KV,HV,WV,QV,YV],iTe=[...NY,JV],kY=[BV,jV,$V,SY,qV,UV,GV,zV,KV,HV,WV,QV,YV,JV],MY=kY,xY=[...MY,DY,AY,RY];var sTe=[...xY,PY];function ZL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var St=class n{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}},Kl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}};Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1;Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Gi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tn=class n{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cv(this.data.getIterator())}getIteratorFrom(e){return new Cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pr=class n{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new n([])}unionWith(e){let t=new tn(Wn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Sv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Sv("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yn.EMPTY_BYTE_STRING=new yn("");var OY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(n){if(rt(!!n,39018),typeof n=="string"){let e=0,t=OY.exec(n);if(rt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ks(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}var ZV="server_timestamp",e2="__type__",t2="__previous_value__",n2="__local_write_time__";function eE(n){return(n?.mapValue?.fields||{})[e2]?.stringValue===ZV}function tE(n){let e=n.mapValue.fields[t2];return eE(e)?tE(e):e}function op(n){let e=Ws(n.mapValue.fields[n2].timestampValue);return new Mt(e.seconds,e.nanos)}var VS=class{constructor(e,t,r,i,s,o,a,c,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}},Dv="(default)",ap=class n{constructor(e,t){this.projectId=e,this.database=t||Dv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Dv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function r2(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new J($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ap(n.options.projectId,e)}var cA="__type__",i2="__max__",hv={mapValue:{fields:{__type__:{stringValue:i2}}}},uA="__vector__",Xl="value";function ga(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eE(n)?4:o2(n)?9007199254740991:s2(n)?10:11:he(28295,{value:n})}function Xi(n,e){if(n===e)return!0;let t=ga(n);if(t!==ga(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return op(n).isEqual(op(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ws(i.timestampValue),a=Ws(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ks(i.bytesValue).isEqual(Ks(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?sp(o)===sp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Jl(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ZL(o)!==ZL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Xi(o[c],a[c])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function cp(n,e){return(n.values||[]).find(t=>Xi(t,e))!==void 0}function Zl(n,e){if(n===e)return 0;let t=ga(n),r=ga(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Et(s.integerValue||s.doubleValue),c=Et(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return eV(n.timestampValue,e.timestampValue);case 4:return eV(op(n),op(e));case 5:return FS(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Ks(s),c=Ks(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Me(a[d],c[d]);if(h!==0)return h}return Me(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Me(Et(s.latitude),Et(o.latitude));return a!==0?a:Me(Et(s.longitude),Et(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return tV(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[Xl]?.arrayValue,h=c[Xl]?.arrayValue,m=Me(d?.values?.length||0,h?.values?.length||0);return m!==0?m:tV(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===hv.mapValue&&o===hv.mapValue)return 0;if(s===hv.mapValue)return 1;if(o===hv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){let I=FS(c[m],h[m]);if(I!==0)return I;let S=Zl(a[c[m]],d[h[m]]);if(S!==0)return S}return Me(c.length,h.length)})(n.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function eV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);let t=Ws(n),r=Ws(e),i=Me(t.seconds,r.seconds);return i!==0?i:Me(t.nanos,r.nanos)}function tV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Zl(t[i],r[i]);if(s)return s}return Me(t.length,r.length)}function ed(n){return US(n)}function US(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ws(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ks(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=US(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${US(t.fields[o])}`;return i+"}"})(n.mapValue):he(61005,{value:n})}function mv(n){switch(ga(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=tE(n);return e?16+mv(e):16;case 5:return 2*n.stringValue.length;case 6:return Ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+mv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ea(r.fields,(s,o)=>{i+=s.length+mv(o)}),i})(n.mapValue);default:throw he(13486,{value:n})}}function lA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BS(n){return!!n&&"integerValue"in n}function dA(n){return!!n&&"arrayValue"in n}function nV(n){return!!n&&"nullValue"in n}function rV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gv(n){return!!n&&"mapValue"in n}function s2(n){return(n?.mapValue?.fields||{})[cA]?.stringValue===uA}function tp(n){if(n.geoPointValue)return{geoPointValue:U({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:U({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tp(n.arrayValue.values[t]);return e}return U({},n)}function o2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===i2}var aTe={mapValue:{fields:{[cA]:{stringValue:uA},[Xl]:{arrayValue:{}}}}};var Gn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tp(t)}setAll(e){let t=Wn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=tp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());gv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ea(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(tp(this.value))}};function a2(n){let e=[];return Ea(n.fields,(t,r)=>{let i=new Wn([t]);if(gv(r)){let s=a2(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Pr(e)}var ui=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),Gn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gc=class{constructor(e,t){this.position=e,this.inclusive=t}};function iV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),t.key):r=Zl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xi(n.position[t],e.position[t]))return!1;return!0}var Wc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function FY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Av=class{},Nt=class n extends Av{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $S(e,t,r):t==="array-contains"?new zS(e,r):t==="in"?new GS(e,r):t==="not-in"?new WS(e,r):t==="array-contains-any"?new KS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new HS(e,r):new qS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zl(t,this.value)):t!==null&&ga(this.value)===ga(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nr=class n extends Av{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return c2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function c2(n){return n.op==="and"}function u2(n){return LY(n)&&c2(n)}function LY(n){for(let e of n.filters)if(e instanceof Nr)return!1;return!0}function jS(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+ed(n.value);if(u2(n))return n.filters.map(e=>jS(e)).join(",");{let e=n.filters.map(t=>jS(t)).join(",");return`${n.op}(${e})`}}function l2(n,e){return n instanceof Nt?(function(r,i){return i instanceof Nt&&r.op===i.op&&r.field.isEqual(i.field)&&Xi(r.value,i.value)})(n,e):n instanceof Nr?(function(r,i){return i instanceof Nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&l2(o,i.filters[a]),!0):!1})(n,e):void he(19439)}function d2(n){return n instanceof Nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ed(t.value)}`})(n):n instanceof Nr?(function(t){return t.op.toString()+" {"+t.getFilters().map(d2).join(" ,")+"}"})(n):"Filter"}var $S=class extends Nt{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){let t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}},HS=class extends Nt{constructor(e,t){super(e,"in",t),this.keys=h2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},qS=class extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=h2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function h2(n,e){return(e.arrayValue?.values||[]).map(t=>ce.fromName(t.referenceValue))}var zS=class extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return dA(t)&&cp(t.arrayValue,this.value)}},GS=class extends Nt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&cp(this.value.arrayValue,t)}},WS=class extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cp(this.value.arrayValue,t)}},KS=class extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!dA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cp(this.value.arrayValue,r))}};var QS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function oV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new QS(n,e,t,r,i,s,o)}function hA(n){let e=Te(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),Zv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ed(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ed(r)).join(",")),e.Te=t}return e.Te}function fA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!l2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sV(n.startAt,e.startAt)&&sV(n.endAt,e.endAt)}function YS(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Kc=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function VY(n,e,t,r,i,s,o,a){return new Kc(n,e,t,r,i,s,o,a)}function nE(n){return new Kc(n)}function aV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UY(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function pA(n){return n.collectionGroup!==null}function Ql(n){let e=Te(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(Wn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Wc(s,r))}),t.has(Wn.keyField().canonicalString())||e.Ie.push(new Wc(Wn.keyField(),r))}return e.Ie}function Wi(n){let e=Te(n);return e.Ee||(e.Ee=BY(e,Ql(n))),e.Ee}function BY(n,e){if(n.limitType==="F")return oV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Wc(i.field,s)});let t=n.endAt?new Gc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gc(n.startAt.position,n.startAt.inclusive):null;return oV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rE(n,e){let t=n.filters.concat([e]);return new Kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rv(n,e,t){return new Kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function iE(n,e){return fA(Wi(n),Wi(e))&&n.limitType===e.limitType}function f2(n){return`${hA(Wi(n))}|lt:${n.limitType}`}function zl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>d2(i)).join(", ")}]`),Zv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ed(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ed(i)).join(",")),`Target(${r})`})(Wi(n))}; limitType=${n.limitType})`}function sE(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Ql(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=iV(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Ql(r),i)||r.endAt&&!(function(o,a,c){let d=iV(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Ql(r),i))})(n,e)}function jY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function p2(n){return(e,t)=>{let r=!1;for(let i of Ql(n)){let s=$Y(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $Y(n,e,t){let r=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Zl(c,d):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}var Qs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return XV(this.inner)}size(){return this.innerSize}};var HY=new St(ce.comparator);function Ys(){return HY}var m2=new St(ce.comparator);function ep(...n){let e=m2;for(let t of n)e=e.insert(t.key,t);return e}function g2(n){let e=m2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jc(){return np()}function y2(){return np()}function np(){return new Qs(n=>n.toString(),(n,e)=>n.isEqual(e))}var qY=new St(ce.comparator),zY=new tn(ce.comparator);function ke(...n){let e=zY;for(let t of n)e=e.add(t);return e}var GY=new tn(Me);function WY(){return GY}function mA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function _2(n){return{integerValue:""+n}}function KY(n,e){return wY(e)?_2(e):mA(n,e)}var td=class{constructor(){this._=void 0}};function QY(n,e,t){return n instanceof nd?(function(i,s){let o={fields:{[e2]:{stringValue:ZV},[n2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eE(s)&&(s=tE(s)),s&&(o.fields[t2]=s),{mapValue:o}})(t,e):n instanceof Qc?E2(n,e):n instanceof Yc?I2(n,e):(function(i,s){let o=v2(i,s),a=cV(o)+cV(i.Ae);return BS(o)&&BS(i.Ae)?_2(a):mA(i.serializer,a)})(n,e)}function YY(n,e,t){return n instanceof Qc?E2(n,e):n instanceof Yc?I2(n,e):t}function v2(n,e){return n instanceof rd?(function(r){return BS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var nd=class extends td{},Qc=class extends td{constructor(e){super(),this.elements=e}};function E2(n,e){let t=w2(e);for(let r of n.elements)t.some(i=>Xi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Yc=class extends td{constructor(e){super(),this.elements=e}};function I2(n,e){let t=w2(e);for(let r of n.elements)t=t.filter(i=>!Xi(i,r));return{arrayValue:{values:t}}}var rd=class extends td{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function cV(n){return Et(n.integerValue||n.doubleValue)}function w2(n){return dA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function JY(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Qc&&i instanceof Qc||r instanceof Yc&&i instanceof Yc?Jl(r.elements,i.elements,Xi):r instanceof rd&&i instanceof rd?Xi(r.Ae,i.Ae):r instanceof nd&&i instanceof nd})(n.transform,e.transform)}var JS=class{constructor(e,t){this.version=e,this.transformResults=t}},Ki=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function yv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var id=class{};function T2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sd(n.key,Ki.none()):new Jc(n.key,n.data,Ki.none());{let t=n.data,r=Gn.empty(),i=new tn(Wn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zi(n.key,r,new Pr(i.toArray()),Ki.none())}}function XY(n,e,t){n instanceof Jc?(function(i,s,o){let a=i.value.clone(),c=lV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Zi?(function(i,s,o){if(!yv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=lV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(b2(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function rp(n,e,t,r){return n instanceof Jc?(function(s,o,a,c){if(!yv(s.precondition,o))return a;let d=s.value.clone(),h=dV(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Zi?(function(s,o,a,c){if(!yv(s.precondition,o))return a;let d=dV(s.fieldTransforms,c,o),h=o.data;return h.setAll(b2(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(s,o,a){return yv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function ZY(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=v2(r.transform,i||null);s!=null&&(t===null&&(t=Gn.empty()),t.set(r.field,s))}return t||null}function uV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jl(r,i,(s,o)=>JY(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Jc=class extends id{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Zi=class extends id{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function b2(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function lV(n,e,t){let r=new Map;rt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,YY(o,a,t[i]))}return r}function dV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,QY(s,o,e))}return r}var sd=class extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},XS=class extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ZS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&XY(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=y2();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=T2(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(t,r)=>uV(t,r))&&Jl(this.baseMutations,e.baseMutations,(t,r)=>uV(t,r))}},eD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return qY})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var tD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var nD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var jt,Le;function eJ(n){switch(n){case $.OK:return he(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function C2(n){if(n===void 0)return Gs("GRPC error has no .code"),$.UNKNOWN;switch(n){case jt.OK:return $.OK;case jt.CANCELLED:return $.CANCELLED;case jt.UNKNOWN:return $.UNKNOWN;case jt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case jt.INTERNAL:return $.INTERNAL;case jt.UNAVAILABLE:return $.UNAVAILABLE;case jt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case jt.NOT_FOUND:return $.NOT_FOUND;case jt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case jt.ABORTED:return $.ABORTED;case jt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case jt.DATA_LOSS:return $.DATA_LOSS;default:return he(39323,{code:n})}}(Le=jt||(jt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var tJ=null;function nJ(){return new TextEncoder}var rJ=new js([4294967295,4294967295],0);function hV(n){let e=nJ().encode(n),t=new wS;return t.update(e),new Uint8Array(t.digest())}function fV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new js([t,r],0),new js([i,s],0)]}var rD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(r<0)throw new $c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=js.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(js.fromNumber(r)));return i.compare(rJ)===1&&(i=new js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=hV(e),[r,i]=fV(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=hV(e),[r,i]=fV(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.be(o)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$c=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,up.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new St(Me),Ys(),ke())}},up=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ke(),ke(),ke())}};var Yl=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},Nv=class{constructor(e,t){this.targetId=e,this.Ce=t}},kv=class{constructor(e,t,r=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Mv=class{constructor(){this.ve=0,this.Fe=pV(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),r=ke();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:s})}}),new up(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=pV()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},iD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.He=fv(),this.Je=fv(),this.Ze=new St(Me)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(YS(s))if(r===0){let o=new ce(s.path);this.et(t,o,ui.newNoDocument(o,De.min()))}else rt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}tJ?.lt((function(h,m,I,S,R){let P={localCacheCount:h,existenceFilterCount:m.count,databaseId:I.database,projectId:I.projectId},M=m.unchangedNames;return M&&(P.bloomFilter={applied:R===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:H=>S?.mightContain(H)??!1}),P})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ks(r).toUint8Array()}catch(c){if(c instanceof Sv)return ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new rD(o,i,s)}catch(c){return ma(c instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&YS(a.target)){let c=new ce(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ui.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.Ke())}});let r=ke();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Pv(e,t,this.Ze,this.je,r);return this.je=Ys(),this.He=fv(),this.Je=fv(),this.Ze=new St(Me),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Mv,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new tn(Me),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new tn(Me),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function fv(){return new St(ce.comparator)}function pV(){return new St(ce.comparator)}var iJ={asc:"ASCENDING",desc:"DESCENDING"},sJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oJ={and:"AND",or:"OR"},sD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function oD(n,e){return n.useProto3Json||Zv(e)?e:{value:e}}function xv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aJ(n,e){return xv(n,e.toTimestamp())}function Qi(n){return rt(!!n,49232),De.fromTimestamp((function(t){let r=Ws(t);return new Mt(r.seconds,r.nanos)})(n))}function gA(n,e){return aD(n,e).canonicalString()}function aD(n,e){let t=(function(i){return new _t(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function D2(n){let e=_t.fromString(n);return rt(k2(e),10190,{key:e.toString()}),e}function cD(n,e){return gA(n.databaseId,e.path)}function RS(n,e){let t=D2(e);if(t.get(1)!==n.databaseId.projectId)throw new J($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(R2(t))}function A2(n,e){return gA(n.databaseId,e)}function cJ(n){let e=D2(n);return e.length===4?_t.emptyPath():R2(e)}function uD(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R2(n){return rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mV(n,e,t){return{name:cD(n,e),fields:t.value.mapValue.fields}}function uJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:he(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(rt(h===void 0||typeof h=="string",58123),yn.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),yn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?$.UNKNOWN:C2(d.code);return new J(h,d.message||"")})(o);t=new kv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=RS(n,r.document.name),s=Qi(r.document.updateTime),o=r.document.createTime?Qi(r.document.createTime):De.min(),a=new Gn({mapValue:{fields:r.document.fields}}),c=ui.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Yl(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=RS(n,r.document),s=r.readTime?Qi(r.readTime):De.min(),o=ui.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Yl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=RS(n,r.document),s=r.removedTargetIds||[];t=new Yl([],s,i,null)}else{if(!("filter"in e))return he(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new nD(i,s),a=r.targetId;t=new Nv(a,o)}}return t}function lJ(n,e){let t;if(e instanceof Jc)t={update:mV(n,e.key,e.value)};else if(e instanceof sd)t={delete:cD(n,e.key)};else if(e instanceof Zi)t={update:mV(n,e.key,e.data),updateMask:vJ(e.fieldMask)};else{if(!(e instanceof XS))return he(16599,{dt:e.type});t={verify:cD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof nd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw he(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:aJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he(27497)})(n,e.precondition)),t}function dJ(n,e){return n&&n.length>0?(rt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Qi(i.updateTime):Qi(s);return o.isEqual(De.min())&&(o=Qi(s)),new JS(o,i.transformResults||[])})(t,e))):[]}function hJ(n,e){return{documents:[A2(n,e.path)]}}function fJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=A2(n,i);let s=(function(d){if(d.length!==0)return N2(Nr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(I){return{field:Gl(I.field),direction:gJ(I.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=oD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function pJ(n){let e=cJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){rt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(m){let I=P2(m);return I instanceof Nr&&u2(I)?I.getFilters():[I]})(t.where));let o=[];t.orderBy&&(o=(function(m){return m.map(I=>(function(R){return new Wc(Wl(R.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(I))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let I;return I=typeof m=="object"?m.value:m,Zv(I)?null:I})(t.limit));let c=null;t.startAt&&(c=(function(m){let I=!!m.before,S=m.values||[];return new Gc(S,I)})(t.startAt));let d=null;return t.endAt&&(d=(function(m){let I=!m.before,S=m.values||[];return new Gc(S,I)})(t.endAt)),VY(e,i,o,s,a,"F",c,d)}function mJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Wl(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wl(t.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wl(t.unaryFilter.field);return Nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Wl(t.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Nt.create(Wl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Nr.create(t.compositeFilter.filters.map(r=>P2(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function gJ(n){return iJ[n]}function yJ(n){return sJ[n]}function _J(n){return oJ[n]}function Gl(n){return{fieldPath:n.canonicalString()}}function Wl(n){return Wn.fromServerFormat(n.fieldPath)}function N2(n){return n instanceof Nt?(function(t){if(t.op==="=="){if(rV(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(nV(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rV(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(nV(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:yJ(t.op),value:t.value}}})(n):n instanceof Nr?(function(t){let r=t.getFilters().map(i=>N2(i));return r.length===1?r[0]:{compositeFilter:{op:_J(t.op),filters:r}}})(n):he(54877,{filter:n})}function vJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function M2(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var lp=class n{constructor(e,t,r,i,s=De.min(),o=De.min(),a=yn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var lD=class{constructor(e){this.yt=e}};function x2(n){let e=pJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rv(e,e.limit,"L"):e}var Ov=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Et(e.integerValue));else if("doubleValue"in e){let r=Et(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),sp(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ws(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ks(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?o2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):s2(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):he(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Xl,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Et(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Ov.Wt=new Ov;var dD=class{constructor(){this.Sn=new hD}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(zc.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(zc.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},hD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(_t.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(_t.comparator)).toArray()}};var cTe=new Uint8Array(0);var gV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O2=41943040,Rr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(O2,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);var dp=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var yV="LruGarbageCollector",EJ=1048576;function _V([n,e],[t,r]){let i=Me(n,t);return i===0?Me(e,r):i}var fD=class{constructor(e){this.Pr=e,this.buffer=new tn(_V),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();_V(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},pD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ee(yV,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dd(t)?ee(yV,"Ignoring IndexedDB error during garbage collection: ",t):await ld(t)}await this.Ar(3e5)})}},mD=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(oA.ce);let r=new fD(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(gV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gV):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ql()<=Ne.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}};function IJ(n,e){return new mD(n,e)}var gD=class{constructor(){this.changes=new Qs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ui.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var yD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _D=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&rp(r.mutation,i,Pr.empty(),Mt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){let i=jc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ep();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ys(),o=np(),a=(function(){return np()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Zi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),rp(h.mutation,d,h.mutation.getFieldMask(),Mt.now())):o.set(d.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new yD(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=np(),i=new St((o,a)=>o-a),s=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Pr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let m=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,m=y2();h.forEach(I=>{if(!s.has(I)){let S=T2(t.get(I),r.get(I));S!==null&&m.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return UY(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(jc()),a=ip,c=s;return o.next(d=>z.forEach(d,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ke())).next(h=>({batchId:a,changes:g2(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let i=ep();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ep();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,c=>{let d=(function(m,I){return new Kc(I,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,I)=>{o=o.insert(m,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ui.newInvalidDocument(h)))});let a=ep();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&rp(h.mutation,d,Pr.empty(),Mt.now()),sE(t,d)&&(a=a.insert(c,d))}),a})}};var vD=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Qi(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:x2(i.bundledQuery),readTime:Qi(i.readTime)}})(t)),z.resolve()}};var ED=class{constructor(){this.overlays=new St(ce.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=jc();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=jc(),s=t.length+1,o=new ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new St((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=jc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=jc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return z.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tD(t,r));let s=this.Lr.get(t);s===void 0&&(s=ke(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}};var ID=class{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var hp=class{constructor(){this.kr=new tn($t.Kr),this.qr=new tn($t.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new $t(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new $t(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new ce(new _t([])),r=new $t(t,e),i=new $t(t,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new ce(new _t([])),r=new $t(t,e),i=new $t(t,e+1),s=ke();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new $t(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$t=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ce.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||ce.comparator(e.key,t.key)}};var wD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new tn($t.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ZS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Jr=this.Jr.add(new $t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?aA:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $t(t,0),i=new $t(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(Me);return t.forEach(i=>{let s=new $t(i,0),o=new $t(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ce.isDocumentKey(s)||(s=s.child(""));let o=new $t(new ce(s),0),a=new tn(Me);return this.Jr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),z.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,i=>{let s=new $t(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new $t(t,0),i=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var TD=class{constructor(e){this.ti=e,this.docs=(function(){return new St(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():ui.newInvalidDocument(t))}getEntries(e,t){let r=Ys();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ui.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ys(),o=t.path,a=new ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||vY(_Y(h),r)<=0||(i.has(h.key)||sE(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){he(9500)}ni(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bD(this)}getSize(e){return z.resolve(this.size)}},bD=class extends gD{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var CD=class{constructor(e){this.persistence=e,this.ri=new Qs(t=>hA(t),fA),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new hp,this.targetCount=0,this.oi=dp._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new dp(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}};var Fv=class{constructor(e,t){this._i={},this.overlays={},this.ai=new oA(0),this.ui=!1,this.ui=!0,this.ci=new ID,this.referenceDelegate=e(this),this.li=new CD(this),this.indexManager=new dD,this.remoteDocumentCache=(function(i){return new TD(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new lD(t),this.Pi=new vD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ED,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new wD(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);let i=new SD(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return z.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},SD=class extends LS{constructor(e){super(),this.currentSequenceNumber=e}},DD=class n{constructor(e){this.persistence=e,this.Ri=new hp,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw he(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,r=>{let i=ce.fromPath(r);return this.mi(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Lv=class n{constructor(e,t){this.persistence=e,this.fi=new Qs(r=>TY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=IJ(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return z.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mv(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var AD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=ke(),i=ke();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var RD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var PD=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return XO()?8:IY(Zt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.gs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new RD;return this.ys(e,t,o).next(a=>{if(s.result=a,this.As)return this.ws(e,t,o,a.size)})}).next(()=>s.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(ql()<=Ne.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(ql()<=Ne.DEBUG&&ee("QueryEngine","Query:",zl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(ql()<=Ne.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(t))):z.resolve())}gs(e,t){if(aV(t))return z.resolve(null);let r=Wi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Rv(t,null,"F"),r=Wi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ke(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ss(t,d,o,c.readTime)?this.gs(e,Rv(t,null,"F")):this.Ds(e,d,t,c)}))})))}ps(e,t,r,i){return aV(t)||i.isEqual(De.min())?z.resolve(null):this.fs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ss(t,o,r,i)?z.resolve(null):(ql()<=Ne.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(t)),this.Ds(e,o,t,yY(i,ip)).next(a=>a))})}bs(e,t){let r=new tn(p2(e));return t.forEach((i,s)=>{sE(e,s)&&(r=r.add(s))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return ql()<=Ne.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",zl(t)),this.fs.getDocumentsMatchingQuery(e,t,zc.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var yA="LocalStore",wJ=3e8,ND=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new St(Me),this.Fs=new Qs(s=>hA(s),fA),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _D(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function TJ(n,e,t,r){return new ND(n,e,t,r)}async function F2(n,e){let t=Te(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ke();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function bJ(n,e){let t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let m=d.batch,I=m.keys(),S=z.resolve();return I.forEach(R=>{S=S.next(()=>h.getEntry(c,R)).next(P=>{let M=d.docVersions.get(R);rt(M!==null,48541),P.version.compareTo(M)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(c,m))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=ke();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function L2(n){let e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function CJ(n,e){let t=Te(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((h,m)=>{let I=i.get(m);if(!I)return;a.push(t.li.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.li.addMatchingKeys(s,h.addedDocuments,m)));let S=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(yn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(m,S),(function(P,M,H){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=wJ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(I,S,h)&&a.push(t.li.updateTargetData(s,S))});let c=Ys(),d=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(SJ(s,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(De.min())){let h=t.li.getLastRemoteSnapshotVersion(s).next(m=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.vs=i,s))}function SJ(n,e,t){let r=ke(),i=ke();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ys();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ee(yA,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function DJ(n,e){let t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=aA),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AJ(n,e){let t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):t.li.allocateTargetId(r).next(o=>(i=new lp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function kD(n,e,t){let r=Te(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dd(o))throw o;ee(yA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function vV(n,e,t){let r=Te(n),i=De.min(),s=ke();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let m=Te(c),I=m.Fs.get(h);return I!==void 0?z.resolve(m.vs.get(I)):m.li.getTargetData(d,h)})(r,o,Wi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:ke())).next(a=>(RJ(r,jY(e),a),{documents:a,ks:s})))}function RJ(n,e,t){let r=n.Ms.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ms.set(e,r)}var Vv=class{constructor(){this.activeTargetIds=WY()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var MD=class{constructor(){this.vo=new Vv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Vv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var xD=class{Mo(e){}shutdown(){}};var EV="ConnectivityMonitor",Uv=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ee(EV,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){ee(EV,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var pv=null;function OD(){return pv===null?pv=(function(){return 268435456+Math.round(2147483648*Math.random())})():pv++,"0x"+pv.toString(16)}var PS="RestConnection",PJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},FD=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Dv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=OD(),a=this.Qo(e,t.toUriEncodedString());ee(PS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,s);let{host:d}=new URL(a),h=ia(d);return this.zo(e,a,c,r,h).then(m=>(ee(PS,`Received RPC '${e}' ${o}: `,m),m),m=>{throw ma(PS,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",r),m})}jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,t){let r=PJ[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var LD=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Rn="WebChannelConnection",Zf=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},Bv=class n extends FD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=SS();Zf(e,CS.STAT_EVENT,t=>{t.stat===dv.PROXY?ee(Rn,"STAT_EVENT: detected buffering proxy"):t.stat===dv.NOPROXY&&ee(Rn,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,s){let o=OD();return new Promise((a,c)=>{let d=new TS;d.setWithCredentials(!0),d.listenOnce(bS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Xf.NO_ERROR:let m=d.getResponseJson();ee(Rn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Xf.TIMEOUT:ee(Rn,`RPC '${e}' ${o} timed out`),c(new J($.DEADLINE_EXCEEDED,"Request time out"));break;case Xf.HTTP_ERROR:let I=d.getStatus();if(ee(Rn,`RPC '${e}' ${o} failed with status:`,I,"response text:",d.getResponseText()),I>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let R=S?.error;if(R&&R.status&&R.message){let P=(function(H){let K=H.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(K)>=0?K:$.UNKNOWN})(R.status);c(new J(P,R.message))}else c(new J($.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new J($.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ee(Rn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ee(Rn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=OD(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let d=s.join("");ee(Rn,`Creating RPC '${e}' stream ${i}: ${d}`,a);let h=o.createWebChannel(d,a);this.I_(h);let m=!1,I=!1,S=new LD({Ho:R=>{I?ee(Rn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(ee(Rn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),ee(Rn,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},Jo:()=>h.close()});return Zf(h,Hl.EventType.OPEN,()=>{I||(ee(Rn,`RPC '${e}' stream ${i} transport opened.`),S.i_())}),Zf(h,Hl.EventType.CLOSE,()=>{I||(I=!0,ee(Rn,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(h))}),Zf(h,Hl.EventType.ERROR,R=>{I||(I=!0,ma(Rn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.o_(new J($.UNAVAILABLE,"The operation could not be completed")))}),Zf(h,Hl.EventType.MESSAGE,R=>{if(!I){let P=R.data[0];rt(!!P,16349);let M=P,H=M?.error||M[0]?.error;if(H){ee(Rn,`RPC '${e}' stream ${i} received error:`,H);let K=H.status,Y=(function(pe){let w=jt[pe];if(w!==void 0)return C2(w)})(K),oe=H.message;Y===void 0&&(Y=$.INTERNAL,oe="Unknown error status: "+K+" with message "+H.message),I=!0,S.o_(new J(Y,oe)),h.close()}else ee(Rn,`RPC '${e}' stream ${i} received:`,P),S.__(P)}}),n.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return DS()}};function NJ(n){return new Bv(n)}function NS(){return typeof document<"u"?document:null}function yp(n){return new sD(n,!0)}Bv.c_=!1;var jv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var IV="PersistentStream",$v=class{constructor(e,t,r,i,s,o,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Gs(t.toString()),Gs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new J($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(IV,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(ee(IV,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},VD=class extends $v{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=uJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Qi(o.readTime):De.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=uD(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=YS(c)?{documents:hJ(s,c)}:{query:fJ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=S2(s,o.resumeToken);let d=oD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=xv(s,o.snapshotVersion.toTimestamp());let d=oD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=mJ(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=uD(this.serializer),t.removeTarget=e,this.K_(t)}},UD=class extends $v{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=dJ(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=uD(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lJ(this.serializer,r))};this.K_(t)}};var BD=class{},jD=class extends BD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new J($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,aD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J($.UNKNOWN,s.toString())})}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,aD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function kJ(n,e,t,r){return new jD(n,e,t,r)}var $D=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gs(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Xc="RemoteStore",HD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{nu(this)&&(ee(Xc,"Restarting streams for network reachability change."),await(async function(c){let d=Te(c);d.Ea.add(4),await _p(d),d.Va.set("Unknown"),d.Ea.delete(4),await oE(d)})(this))})}),this.Va=new $D(r,i)}};async function oE(n){if(nu(n))for(let e of n.Ra)await e(!0)}async function _p(n){for(let e of n.Ra)await e(!1)}function V2(n,e){let t=Te(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),IA(t)?EA(t):hd(t).O_()&&vA(t,e))}function _A(n,e){let t=Te(n),r=hd(t);t.Ia.delete(e),r.O_()&&U2(t,e),t.Ia.size===0&&(r.O_()?r.L_():nu(t)&&t.Va.set("Unknown"))}function vA(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hd(n).Z_(e)}function U2(n,e){n.da.$e(e),hd(n).X_(e)}function EA(n){n.da=new iD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hd(n).start(),n.Va.ua()}function IA(n){return nu(n)&&!hd(n).x_()&&n.Ia.size>0}function nu(n){return Te(n).Ea.size===0}function B2(n){n.da=void 0}async function MJ(n){n.Va.set("Online")}async function xJ(n){n.Ia.forEach((e,t)=>{vA(n,e)})}async function OJ(n,e){B2(n),IA(n)?(n.Va.ha(e),EA(n)):n.Va.set("Unknown")}async function FJ(n,e,t){if(n.Va.set("Online"),e instanceof kv&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){ee(Xc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hv(n,r)}else if(e instanceof Yl?n.da.Xe(e):e instanceof Nv?n.da.st(e):n.da.tt(e),!t.isEqual(De.min()))try{let r=await L2(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.da.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(yn.EMPTY_BYTE_STRING,h.snapshotVersion)),U2(s,c);let m=new lp(h.target,c,d,h.sequenceNumber);vA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ee(Xc,"Failed to raise snapshot:",r),await Hv(n,r)}}async function Hv(n,e,t){if(!dd(e))throw e;n.Ea.add(1),await _p(n),n.Va.set("Offline"),t||(t=()=>L2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ee(Xc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await oE(n)})}function j2(n,e){return e().catch(t=>Hv(n,t,e))}async function aE(n){let e=Te(n),t=ya(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:aA;for(;LJ(e);)try{let i=await DJ(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,VJ(e,i)}catch(i){await Hv(e,i)}$2(e)&&H2(e)}function LJ(n){return nu(n)&&n.Ta.length<10}function VJ(n,e){n.Ta.push(e);let t=ya(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function $2(n){return nu(n)&&!ya(n).x_()&&n.Ta.length>0}function H2(n){ya(n).start()}async function UJ(n){ya(n).ra()}async function BJ(n){let e=ya(n);for(let t of n.Ta)e.ea(t.mutations)}async function jJ(n,e,t){let r=n.Ta.shift(),i=eD.from(r,e,t);await j2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await aE(n)}async function $J(n,e){e&&ya(n).Y_&&await(async function(r,i){if((function(o){return eJ(o)&&o!==$.ABORTED})(i.code)){let s=r.Ta.shift();ya(r).B_(),await j2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await aE(r)}})(n,e),$2(n)&&H2(n)}async function wV(n,e){let t=Te(n);t.asyncQueue.verifyOperationInProgress(),ee(Xc,"RemoteStore received new credentials");let r=nu(t);t.Ea.add(3),await _p(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await oE(t)}async function HJ(n,e){let t=Te(n);e?(t.Ea.delete(2),await oE(t)):e||(t.Ea.add(2),await _p(t),t.Va.set("Unknown"))}function hd(n){return n.ma||(n.ma=(function(t,r,i){let s=Te(t);return s.sa(),new VD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:MJ.bind(null,n),Yo:xJ.bind(null,n),t_:OJ.bind(null,n),J_:FJ.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),IA(n)?EA(n):n.Va.set("Unknown")):(await n.ma.stop(),B2(n))})),n.ma}function ya(n){return n.fa||(n.fa=(function(t,r,i){let s=Te(t);return s.sa(),new UD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:UJ.bind(null,n),t_:$J.bind(null,n),ta:BJ.bind(null,n),na:jJ.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await aE(n)):(await n.fa.stop(),n.Ta.length>0&&(ee(Xc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var qD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function wA(n,e){if(Gs("AsyncQueue",`${e}: ${n}`),dd(n))return new J($.UNAVAILABLE,`${e}: ${n}`);throw n}var fp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=ep(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var qv=class{constructor(){this.ga=new St(ce.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Zc=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,fp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var zD=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},GD=class{constructor(){this.queries=TV(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Te(t),s=i.queries;i.queries=TV(),s.forEach((o,a)=>{for(let c of a.ba)c.onError(r)})})(this,new J($.ABORTED,"Firestore shutting down"))}};function TV(){return new Qs(n=>f2(n),iE)}async function qJ(n,e){let t=Te(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new zD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=wA(o,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&TA(t)}async function zJ(n,e){let t=Te(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GJ(n,e){let t=Te(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&TA(t)}function WJ(n,e,t){let r=Te(n),i=r.queries.get(e);if(i)for(let s of i.ba)s.onError(t);r.queries.delete(e)}function TA(n){n.Ca.forEach(e=>{e.next()})}var WD,bV;(bV=WD||(WD={})).Ma="default",bV.Cache="cache";var KD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==WD.Cache}};var zv=class{constructor(e){this.key=e}},Gv=class{constructor(e){this.key=e}},QD=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ke(),this.mutatedKeys=ke(),this.eu=p2(e),this.tu=new fp(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new qv,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{let I=i.get(h),S=sE(this.query,m)?m:null,R=!!I&&this.mutatedKeys.has(I.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),M=!1;I&&S?I.data.isEqual(S.data)?R!==P&&(r.track({type:3,doc:S}),M=!0):this.su(I,S)||(r.track({type:2,doc:S}),M=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(a=!0)):!I&&S?(r.track({type:0,doc:S}),M=!0):I&&!S&&(r.track({type:1,doc:I}),M=!0,(c||d)&&(a=!0)),M&&(S?(o=o.add(S),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,m)=>(function(S,R){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Vt:M})}};return P(S)-P(R)})(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new Zc(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Gv(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new zv(r))}),t}cu(e){this.Za=e.ks,this.Ya=ke();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},bA="SyncEngine",YD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},JD=class{constructor(e){this.key=e,this.hu=!1}},XD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Qs(a=>f2(a),iE),this.Iu=new Map,this.Eu=new Set,this.Ru=new St(ce.comparator),this.Au=new Map,this.Vu=new hp,this.du={},this.mu=new Map,this.fu=dp.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function KJ(n,e,t=!0){let r=Q2(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await q2(r,e,t,!0),i}async function QJ(n,e){let t=Q2(n);await q2(t,e,!0,!1)}async function q2(n,e,t,r){let i=await AJ(n.localStore,Wi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await YJ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&V2(n.remoteStore,i),a}async function YJ(n,e,t,r,i){n.pu=(m,I,S)=>(async function(P,M,H,K){let Y=M.view.ru(H);Y.Ss&&(Y=await vV(P.localStore,M.query,!1).then(({documents:w})=>M.view.ru(w,Y)));let oe=K&&K.targetChanges.get(M.targetId),ze=K&&K.targetMismatches.get(M.targetId)!=null,pe=M.view.applyChanges(Y,P.isPrimaryClient,oe,ze);return SV(P,M.targetId,pe.au),pe.snapshot})(n,m,I,S);let s=await vV(n.localStore,e,!0),o=new QD(e,s.ks),a=o.ru(s.documents),c=up.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);SV(n,t,d.au);let h=new YD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function JJ(n,e,t){let r=Te(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!iE(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&_A(r.remoteStore,i.targetId),ZD(r,i.targetId)}).catch(ld)):(ZD(r,i.targetId),await kD(r.localStore,i.targetId,!0))}async function XJ(n,e){let t=Te(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),_A(t.remoteStore,r.targetId))}async function ZJ(n,e,t){let r=oX(n);try{let i=await(function(o,a){let c=Te(o),d=Mt.now(),h=a.reduce((S,R)=>S.add(R.key),ke()),m,I;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=Ys(),P=ke();return c.xs.getEntries(S,h).next(M=>{R=M,R.forEach((H,K)=>{K.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,R)).next(M=>{m=M;let H=[];for(let K of a){let Y=ZY(K,m.get(K.key).overlayedDocument);Y!=null&&H.push(new Zi(K.key,Y,a2(Y.value.mapValue),Ki.exists(!0)))}return c.mutationQueue.addMutationBatch(S,d,H,a)}).next(M=>{I=M;let H=M.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(S,M.batchId,H)})}).then(()=>({batchId:I.batchId,changes:g2(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.du[o.currentUser.toKey()];d||(d=new St(Me)),d=d.insert(a,c),o.du[o.currentUser.toKey()]=d})(r,i.batchId,t),await vp(r,i.changes),await aE(r.remoteStore)}catch(i){let s=wA(i,"Failed to persist write");t.reject(s)}}async function z2(n,e){let t=Te(n);try{let r=await CJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?rt(o.hu,14607):i.removedDocuments.size>0&&(rt(o.hu,42227),o.hu=!1))}),await vp(t,r,e)}catch(r){await ld(r)}}function CV(n,e,t){let r=Te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Te(o);c.onlineState=a;let d=!1;c.queries.forEach((h,m)=>{for(let I of m.ba)I.va(a)&&(d=!0)}),d&&TA(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eX(n,e,t){let r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new St(ce.comparator);o=o.insert(s,ui.newNoDocument(s,De.min()));let a=ke().add(s),c=new Pv(De.min(),new Map,new St(Me),o,a);await z2(r,c),r.Ru=r.Ru.remove(s),r.Au.delete(e),CA(r)}else await kD(r.localStore,e,!1).then(()=>ZD(r,e,t)).catch(ld)}async function tX(n,e){let t=Te(n),r=e.batch.batchId;try{let i=await bJ(t.localStore,e);W2(t,r,null),G2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vp(t,i)}catch(i){await ld(i)}}async function nX(n,e,t){let r=Te(n);try{let i=await(function(o,a){let c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(rt(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);W2(r,e,t),G2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vp(r,i)}catch(i){await ld(i)}}function G2(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function W2(n,e,t){let r=Te(n),i=r.du[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function ZD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||K2(n,r)})}function K2(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(_A(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),CA(n))}function SV(n,e,t){for(let r of t)r instanceof zv?(n.Vu.addReference(r.key,e),rX(n,r)):r instanceof Gv?(ee(bA,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||K2(n,r.key)):he(19791,{wu:r})}function rX(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ee(bA,"New document in limbo: "+t),n.Eu.add(r),CA(n))}function CA(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ce(_t.fromString(e)),r=n.fu.next();n.Au.set(r,new JD(t)),n.Ru=n.Ru.insert(t,r),V2(n.remoteStore,new lp(Wi(nE(t.path)),r,"TargetPurposeLimboResolution",oA.ce))}}async function vp(n,e,t){let r=Te(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=AD.Es(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.J_(i),await(async function(c,d){let h=Te(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(d,I=>z.forEach(I.Ts,S=>h.persistence.referenceDelegate.addReference(m,I.targetId,S)).next(()=>z.forEach(I.Is,S=>h.persistence.referenceDelegate.removeReference(m,I.targetId,S)))))}catch(m){if(!dd(m))throw m;ee(yA,"Failed to update sequence numbers: "+m)}for(let m of d){let I=m.targetId;if(!m.fromCache){let S=h.vs.get(I),R=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(R);h.vs=h.vs.insert(I,P)}}})(r.localStore,s))}async function iX(n,e){let t=Te(n);if(!t.currentUser.isEqual(e)){ee(bA,"User change. New user:",e.toKey());let r=await F2(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new J($.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vp(t,r.Ns)}}function sX(n,e){let t=Te(n),r=t.Au.get(e);if(r&&r.hu)return ke().add(r.key);{let i=ke(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Q2(n){let e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=z2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eX.bind(null,e),e.Pu.J_=GJ.bind(null,e.eventManager),e.Pu.yu=WJ.bind(null,e.eventManager),e}function oX(n){let e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nX.bind(null,e),e}var SA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yp(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return TJ(this.persistence,new PD,t.initialUser,this.serializer)}Cu(t){return new Fv(DD.Vi,this.serializer)}Du(t){return new MD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Wv=class extends SA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rt(this.persistence.referenceDelegate instanceof Lv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new pD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new Fv(r=>Lv.Vi(r,t),this.serializer)}};var Y2=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CV(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iX.bind(null,this.syncEngine),await HJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new GD})()}createDatastore(t){let r=yp(t.databaseInfo.databaseId),i=NJ(t.databaseInfo);return kJ(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new HD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>CV(this.syncEngine,r,0),(function(){return Uv.v()?new Uv:new xD})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,m){let I=new XD(s,o,a,c,d,h);return m&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Te(r);ee(Xc,"RemoteStore shutting down."),i.Ea.add(5),await _p(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var eA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _a="FirestoreClient",tA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=en.UNAUTHENTICATED,this.clientId=qc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee(_a,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(_a,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=wA(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function kS(n,e){n.asyncQueue.verifyOperationInProgress(),ee(_a,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await F2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function DV(n,e){n.asyncQueue.verifyOperationInProgress();let t=await aX(n);ee(_a,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>wV(e.remoteStore,i)),n._onlineComponents=e}async function aX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee(_a,"Using user provided OfflineComponentProvider");try{await kS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ma("Error using user provided cache. Falling back to memory cache: "+t),await kS(n,new SA)}}else ee(_a,"Using default OfflineComponentProvider"),await kS(n,new Wv(void 0));return n._offlineComponents}async function J2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee(_a,"Using user provided OnlineComponentProvider"),await DV(n,n._uninitializedComponentsProvider._online)):(ee(_a,"Using default OnlineComponentProvider"),await DV(n,new Y2))),n._onlineComponents}function cX(n){return J2(n).then(e=>e.syncEngine)}async function AV(n){let e=await J2(n),t=e.eventManager;return t.onListen=KJ.bind(null,e.syncEngine),t.onUnlisten=JJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XJ.bind(null,e.syncEngine),t}function X2(n,e,t,r){let i=new eA(r),s=new KD(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>qJ(await AV(n),s)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>zJ(await AV(n),s))}}function Z2(n,e){let t=new Hs;return n.asyncQueue.enqueueAndForget(async()=>ZJ(await cX(n),e,t)),t.promise}function eU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var uX="ComponentProvider",RV=new Map;function lX(n,e,t,r,i){return new VS(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,eU(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var tU="firestore.googleapis.com",PV=!0,Kv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tU,this.ssl=PV}else this.host=e.host,this.ssl=e.ssl??PV;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EJ)throw new J($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},od=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vv;switch(r.type){case"firstParty":return new OS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=RV.get(t);r&&(ee(uX,"Removing Datastore"),RV.delete(t),r.terminate())})(this),Promise.resolve()}};function nU(n,e,t,r={}){n=ts(n,od);let i=ia(e),s=n._getSettings(),o=ae(U({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(I_(`https://${a}`),w_("Firestore",!0)),s.host!==tU&&s.host!==a&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=ae(U({},s),{host:a,ssl:i,emulatorOptions:r});if(!oi(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=en.MOCK_USER;else{d=GO(r.mockUserToken,n._app?.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new J($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new en(m)}n._authCredentials=new MS(new _v(d,h))}}var va=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Qt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ud(t,n._jsonSchema))return new n(e,r||null,new ce(_t.fromString(t.referencePath)))}};Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:kt("string",Qt._jsonSchemaVersion),referencePath:kt("string")};var qs=class n extends va{constructor(e,t,r){super(e,t,nE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ns(n,e,...t){if(n=Pt(n),OV("collection","path",e),n instanceof od){let r=_t.fromString(e,...t);return QL(r),new qs(n,null,r)}{if(!(n instanceof Qt||n instanceof qs))throw new J($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_t.fromString(e,...t));return QL(r),new qs(n.firestore,null,r)}}function rs(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=qc.newId()),OV("doc","path",e),n instanceof od){let r=_t.fromString(e,...t);return KL(r),new Qt(n,null,new ce(r))}{if(!(n instanceof Qt||n instanceof qs))throw new J($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_t.fromString(e,...t));return KL(r),new Qt(n.firestore,n instanceof qs?n.converter:null,new ce(r))}}var NV="AsyncQueue",Qv=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jv(this,"async_queue_retry"),this._c=()=>{let r=NS();r&&ee(NV,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=NS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=NS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Hs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!dd(e))throw e;ee(NV,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gs("INTERNAL UNHANDLED ERROR: ",kV(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=qD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&he(47125,{Pc:kV(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function kV(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var es=class extends od{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qv(e),this._firestoreClient=void 0,await e}}};function ru(n,e){let t=typeof n=="object"?n:Ar(),r=typeof n=="string"?n:e||Dv,i=Ff(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=zO("firestore");s&&nU(i,...s)}return i}function cE(n){if(n._terminated)throw new J($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dX(n),n._firestoreClient}function dX(n){let e=n._freezeSettings(),t=lX(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new tA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Yi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(yn.fromBase64String(e))}catch(t){throw new J($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ud(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Yi._jsonSchemaVersion="firestore/bytes/1.0",Yi._jsonSchema={type:kt("string",Yi._jsonSchemaVersion),bytes:kt("string")};var eu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ad=class{constructor(e){this._methodName=e}};var zs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ud(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:kt("string",zs._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};var Ji=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ud(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new J($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ji._jsonSchemaVersion="firestore/vectorValue/1.0",Ji._jsonSchema={type:kt("string",Ji._jsonSchemaVersion),vectorValues:kt("object")};var hX=/^__.*__$/,nA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}},Yv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function rU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{dataSource:n})}}var rA=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(U(U({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xv(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(rU(this.dataSource)&&hX.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},iA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yp(e)}createContext(e,t,r,i=!1){return new rA({dataSource:e,methodName:t,targetDoc:r,path:Wn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function uE(n){let e=n._freezeSettings(),t=yp(n._databaseId);return new iA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iU(n,e,t,r,i,s={}){let o=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);DA("Data must be an object, but it was:",o,r);let a=cU(r,o),c,d;if(s.merge)c=new Pr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let m of s.mergeFields){let I=tu(e,m,t);if(!o.contains(I))throw new J($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);lU(h,I)||h.push(I)}c=new Pr(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new nA(new Gn(a),c,d)}var Jv=class n extends ad{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function sU(n,e,t,r){let i=n.createContext(1,e,t);DA("Data must be an object, but it was:",i,r);let s=[],o=Gn.empty();Ea(r,(c,d)=>{let h=AA(e,c,t);d=Pt(d);let m=i.childContextForFieldPath(h);if(d instanceof Jv)s.push(h);else{let I=Ep(d,m);I!=null&&(s.push(h),o.set(h,I))}});let a=new Pr(s);return new Yv(o,a,i.fieldTransforms)}function oU(n,e,t,r,i,s){let o=n.createContext(1,e,t),a=[tu(e,r,t)],c=[i];if(s.length%2!=0)throw new J($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)a.push(tu(e,s[I])),c.push(s[I+1]);let d=[],h=Gn.empty();for(let I=a.length-1;I>=0;--I)if(!lU(d,a[I])){let S=a[I],R=c[I];R=Pt(R);let P=o.childContextForFieldPath(S);if(R instanceof Jv)d.push(S);else{let M=Ep(R,P);M!=null&&(d.push(S),h.set(S,M))}}let m=new Pr(d);return new Yv(h,m,o.fieldTransforms)}function aU(n,e,t,r=!1){return Ep(t,n.createContext(r?4:3,e))}function Ep(n,e){if(uU(n=Pt(n)))return DA("Unsupported field value:",e,n),cU(n,e);if(n instanceof ad)return(function(r,i){if(!rU(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Ep(a,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Mt.fromDate(r);return{timestampValue:xv(i.serializer,s)}}if(r instanceof Mt){let s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xv(i.serializer,s)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yi)return{bytesValue:S2(i.serializer,r._byteString)};if(r instanceof Qt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ji)return(function(o,a){let c=o instanceof Ji?o.toArray():o;return{mapValue:{fields:{[cA]:{stringValue:uA},[Xl]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return mA(a.serializer,h)})}}}}}})(r,i);if(M2(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${gp(r)}`)})(n,e)}function cU(n,e){let t={};return XV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,(r,i)=>{let s=Ep(i,e.childContextForField(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function uU(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof zs||n instanceof Yi||n instanceof Qt||n instanceof ad||n instanceof Ji||M2(n))}function DA(n,e,t){if(!uU(t)||!LV(t)){let r=gp(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function tu(n,e,t){if((e=Pt(e))instanceof eu)return e._internalPath;if(typeof e=="string")return AA(n,e);throw Xv("Field path arguments must be of type string or ",n,!1,void 0,t)}var fX=new RegExp("[~\\*/\\[\\]]");function AA(n,e,t){if(e.search(fX)>=0)throw Xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch{throw Xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xv(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new J($.INVALID_ARGUMENT,a+n+c)}function lU(n,e){return n.some(t=>t.isEqual(e))}var pp=class{convertValue(e,t="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ea(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Xl].arrayValue?.values?.map(r=>Et(r.doubleValue));return new Ji(t)}convertGeoPoint(e){return new zs(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(op(e));default:return null}}convertTimestamp(e){let t=Ws(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_t.fromString(e);rt(k2(r),9688,{name:e});let i=new ap(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(t)||Gs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var mp=class extends pp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}};var dU="@firebase/firestore",hU="4.10.0";function fU(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var lE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(tu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},RA=class extends lE{data(){return super.data()}};function yX(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ip=class{},PA=class extends Ip{};function gU(n,e,...t){let r=[];e instanceof Ip&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof NA).length,a=s.filter(c=>c instanceof dE).length;if(o>1||o>0&&a>0)throw new J($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var dE=class n extends PA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return _U(e._query,t),new va(e.firestore,e.converter,rE(e._query,t))}_parse(e){let t=uE(e.firestore);return(function(s,o,a,c,d,h,m){let I;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mU(m,h);let R=[];for(let P of m)R.push(pU(c,s,P));I={arrayValue:{values:R}}}else I=pU(c,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mU(m,h),I=aU(a,o,m,h==="in"||h==="not-in");return Nt.create(d,h,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yU(n,e,t){let r=e,i=tu("where",n);return dE._create(i,r,t)}var NA=class n extends Ip{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Nr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)_U(o,c),o=rE(o,c)})(e._query,t),new va(e.firestore,e.converter,rE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function pU(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new J($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pA(e)&&t.indexOf("/")!==-1)throw new J($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_t.fromString(t));if(!ce.isDocumentKey(r))throw new J($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lA(n,new ce(r))}if(t instanceof Qt)return lA(n,t._key);throw new J($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gp(t)}.`)}function mU(n,e){if(!Array.isArray(n)||n.length===0)throw new J($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _U(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new J($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _X(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var iu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},su=class n extends lE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(tu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};su._jsonSchemaVersion="firestore/documentSnapshot/1.0",su._jsonSchema={type:kt("string",su._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};var fd=class extends su{data(e={}){return super.data(e)}},pd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new iu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fd(this._firestore,this._userDataWriter,r.key,r,new iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new fd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new iu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new fd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new iu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:vX(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function vX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}pd._jsonSchemaVersion="firestore/querySnapshot/1.0",pd._jsonSchema={type:kt("string",pd._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};function vU(n,e,t,...r){n=ts(n,Qt);let i=ts(n.firestore,es),s=uE(i),o;return o=typeof(e=Pt(e))=="string"||e instanceof eu?oU(s,"updateDoc",n._key,e,t,r):sU(s,"updateDoc",n._key,e),kA(i,[o.toMutation(n._key,Ki.exists(!0))])}function md(n){return kA(ts(n.firestore,es),[new sd(n._key,Ki.none())])}function gd(n,e){let t=ts(n.firestore,es),r=rs(n),i=_X(n.converter,e),s=uE(n.firestore);return kA(t,[iU(s,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function yd(n,...e){n=Pt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||fU(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(fU(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let s,o,a;if(n instanceof Qt)o=ts(n.firestore,es),a=nE(n._key.path),s={next:d=>{e[r]&&e[r](EX(o,n,d))},error:e[r+1],complete:e[r+2]};else{let d=ts(n,va);o=ts(d.firestore,es),a=d._query;let h=new mp(o);s={next:m=>{e[r]&&e[r](new pd(o,h,d,m))},error:e[r+1],complete:e[r+2]},yX(n._query)}let c=cE(o);return X2(c,a,i,s)}function kA(n,e){let t=cE(n);return Z2(t,e)}function EX(n,e,t){let r=t.docs.get(e._key),i=new mp(n);return new su(n,i,e._key,r,new iu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){MV(ca),aa(new Dr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new es(new Ev(r.getProvider("auth-internal")),new wv(o,r.getProvider("app-check-internal")),r2(o,i),o);return s=U({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ai(dU,hU,e),ai(dU,hU,"esm2020")})();var EU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IU={};var hE,wU;(function(){var n;function e(w,y){function E(){}E.prototype=y.prototype,w.D=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(T,b,A){for(var v=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)v[ut-2]=arguments[ut];return y.prototype[b].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,E){E||(E=0);var T=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)T[b]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(b=0;16>b;++b)T[b]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],b=w.g[2];var A=w.g[3],v=y+(A^E&(b^A))+T[0]+3614090360&4294967295;y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[1]+3905402710&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[2]+606105819&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[3]+3250441966&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(A^E&(b^A))+T[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[5]+1200080426&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[6]+2821735955&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[7]+4249261313&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(A^E&(b^A))+T[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[9]+2336552879&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[10]+4294925233&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[11]+2304563134&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(A^E&(b^A))+T[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(b^y&(E^b))+T[13]+4254626195&4294967295,A=y+(v<<12&4294967295|v>>>20),v=b+(E^A&(y^E))+T[14]+2792965006&4294967295,b=A+(v<<17&4294967295|v>>>15),v=E+(y^b&(A^y))+T[15]+1236535329&4294967295,E=b+(v<<22&4294967295|v>>>10),v=y+(b^A&(E^b))+T[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[6]+3225465664&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[11]+643717713&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[0]+3921069994&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(b^A&(E^b))+T[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[10]+38016083&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[15]+3634488961&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[4]+3889429448&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(b^A&(E^b))+T[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[14]+3275163606&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[3]+4107603335&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[8]+1163531501&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(b^A&(E^b))+T[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^b&(y^E))+T[2]+4243563512&4294967295,A=y+(v<<9&4294967295|v>>>23),v=b+(y^E&(A^y))+T[7]+1735328473&4294967295,b=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(b^A))+T[12]+2368359562&4294967295,E=b+(v<<20&4294967295|v>>>12),v=y+(E^b^A)+T[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[8]+2272392833&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[11]+1839030562&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[14]+4259657740&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(E^b^A)+T[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[4]+1272893353&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[7]+4139469664&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[10]+3200236656&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(E^b^A)+T[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[0]+3936430074&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[3]+3572445317&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[6]+76029189&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(E^b^A)+T[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^b)+T[12]+3873151461&4294967295,A=y+(v<<11&4294967295|v>>>21),v=b+(A^y^E)+T[15]+530742520&4294967295,b=A+(v<<16&4294967295|v>>>16),v=E+(b^A^y)+T[2]+3299628645&4294967295,E=b+(v<<23&4294967295|v>>>9),v=y+(b^(E|~A))+T[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[7]+1126891415&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[14]+2878612391&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[5]+4237533241&4294967295,E=b+(v<<21&4294967295|v>>>11),v=y+(b^(E|~A))+T[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[3]+2399980690&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[10]+4293915773&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[1]+2240044497&4294967295,E=b+(v<<21&4294967295|v>>>11),v=y+(b^(E|~A))+T[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[15]+4264355552&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[6]+2734768916&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[13]+1309151649&4294967295,E=b+(v<<21&4294967295|v>>>11),v=y+(b^(E|~A))+T[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~b))+T[11]+3174756917&4294967295,A=y+(v<<10&4294967295|v>>>22),v=b+(y^(A|~E))+T[2]+718787259&4294967295,b=A+(v<<15&4294967295|v>>>17),v=E+(A^(b|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(b+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var E=y-this.blockSize,T=this.B,b=this.h,A=0;A<y;){if(b==0)for(;A<=E;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<y;)if(T[b++]=w.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<y;)if(T[b++]=w[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var E=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=E&255,E/=256;for(this.u(w),w=Array(16),y=E=0;4>y;++y)for(var T=0;32>T;T+=8)w[E++]=this.g[y]>>>T&255;return w};function s(w,y){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function o(w,y){this.h=y;for(var E=[],T=!0,b=w.length-1;0<=b;b--){var A=w[b]|0;T&&A==y||(E[b]=A,T=!1)}this.g=E}var a={};function c(w){return-128<=w&&128>w?s(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return M(d(-w));for(var y=[],E=1,T=0;w>=E;T++)y[T]=w/E|0,E*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return M(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),T=m,b=0;b<w.length;b+=8){var A=Math.min(8,w.length-b),v=parseInt(w.substring(b,b+A),y);8>A?(A=d(Math.pow(y,A)),T=T.j(A).add(d(v))):(T=T.j(E),T=T.add(d(v)))}return T}var m=c(0),I=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();for(var w=0,y=1,E=0;E<this.g.length;E++){var T=this.i(E);w+=(0<=T?T:4294967296+T)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+M(this).toString(w);for(var y=d(Math.pow(w,6)),E=this,T="";;){var b=oe(E,y).g;E=H(E,b.j(y));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=b,R(E))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=H(this,w),P(w)?-1:R(w)?0:1};function M(w){for(var y=w.g.length,E=[],T=0;T<y;T++)E[T]=~w.g[T];return new o(E,~w.h).add(I)}n.abs=function(){return P(this)?M(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],T=0,b=0;b<=y;b++){var A=T+(this.i(b)&65535)+(w.i(b)&65535),v=(A>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);T=v>>>16,A&=65535,v&=65535,E[b]=v<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function H(w,y){return w.add(M(y))}n.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?M(this).j(M(w)):M(M(this).j(w));if(P(w))return M(this.j(M(w)));if(0>this.l(S)&&0>w.l(S))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,E=[],T=0;T<2*y;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<w.g.length;b++){var A=this.i(T)>>>16,v=this.i(T)&65535,ut=w.i(b)>>>16,nn=w.i(b)&65535;E[2*T+2*b]+=v*nn,K(E,2*T+2*b),E[2*T+2*b+1]+=A*nn,K(E,2*T+2*b+1),E[2*T+2*b+1]+=v*ut,K(E,2*T+2*b+1),E[2*T+2*b+2]+=A*ut,K(E,2*T+2*b+2)}for(T=0;T<y;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=y;T<2*y;T++)E[T]=0;return new o(E,0)};function K(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function Y(w,y){this.g=w,this.h=y}function oe(w,y){if(R(y))throw Error("division by zero");if(R(w))return new Y(m,m);if(P(w))return y=oe(M(w),y),new Y(M(y.g),M(y.h));if(P(y))return y=oe(w,M(y)),new Y(M(y.g),y.h);if(30<w.g.length){if(P(w)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var E=I,T=y;0>=T.l(w);)E=ze(E),T=ze(T);var b=pe(E,1),A=pe(T,1);for(T=pe(T,2),E=pe(E,2);!R(T);){var v=A.add(T);0>=v.l(w)&&(b=b.add(E),A=v),T=pe(T,1),E=pe(E,1)}return y=H(w,b.j(y)),new Y(b,y)}for(b=m;0<=w.l(y);){for(E=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=d(E),v=A.j(y);P(v)||0<v.l(w);)E-=T,A=d(E),v=A.j(y);R(A)&&(A=I),b=b.add(A),w=H(w,v)}return new Y(b,w)}n.A=function(w){return oe(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],T=0;T<y;T++)E[T]=this.i(T)&w.i(T);return new o(E,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],T=0;T<y;T++)E[T]=this.i(T)|w.i(T);return new o(E,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],T=0;T<y;T++)E[T]=this.i(T)^w.i(T);return new o(E,this.h^w.h)};function ze(w){for(var y=w.g.length+1,E=[],T=0;T<y;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(E,w.h)}function pe(w,y){var E=y>>5;y%=32;for(var T=w.g.length-E,b=[],A=0;A<T;A++)b[A]=0<y?w.i(A+E)>>>y|w.i(A+E+1)<<32-y:w.i(A+E);return new o(b,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wU=IU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,hE=IU.Integer=o}).apply(typeof EU<"u"?EU:typeof self<"u"?self:typeof window<"u"?window:{});var fE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Js={};var TU,IX,bU,CU,SU,DU,AU,RU,PU;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fE=="object"&&fE];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var k=u[C];if(!(k in g))break e;g=g[k]}u=u[u.length-1],C=g[u],f=f(C),f!=C&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,C=!1,k={next:function(){if(!C&&g<u.length){var L=g++;return{value:f(L,u[L]),done:!1}}return C=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function m(u,f,g){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,C),u.apply(f,k)}}return function(){return u.apply(f,arguments)}}function I(u,f,g){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,I.apply(null,arguments)}function S(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function R(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(C,k,L){for(var G=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)G[Be-2]=arguments[Be];return f.prototype[k].apply(C,G)}}function P(u){let f=u.length;if(0<f){let g=Array(f);for(let C=0;C<f;C++)g[C]=u[C];return g}return[]}function M(u,f){for(let g=1;g<arguments.length;g++){let C=arguments[g];if(c(C)){let k=u.length||0,L=C.length||0;u.length=k+L;for(let G=0;G<L;G++)u[k+G]=C[G]}else u.push(C)}}class H{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function K(u){return/^[\s\xa0]*$/.test(u)}function Y(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var ze=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function pe(u,f,g){for(let C in u)f.call(g,u[C],C,u)}function w(u,f){for(let g in u)f.call(void 0,u[g],g,u)}function y(u){let f={};for(let g in u)f[g]=u[g];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let g,C;for(let k=1;k<arguments.length;k++){C=arguments[k];for(g in C)u[g]=C[g];for(let L=0;L<E.length;L++)g=E[L],Object.prototype.hasOwnProperty.call(C,g)&&(u[g]=C[g])}}function b(u){var f=1;u=u.split(":");let g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function A(u){a.setTimeout(()=>{throw u},0)}function v(){var u=Ae;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ut{constructor(){this.h=this.g=null}add(f,g){let C=nn.get();C.set(f,g),this.h?this.h.next=C:this.g=C,this.h=C}}var nn=new H(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,se=!1,Ae=new ut,It=()=>{let u=a.Promise.resolve(void 0);ie=()=>{u.then(Pn)}};var Pn=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(g){A(g)}var f=nn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}se=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var Je=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u})();function lr(u,f){if(it.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ze){e:{try{oe(f.nodeName);var k=!0;break e}catch{}k=!1}k||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ta[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&lr.aa.h.call(this)}}R(lr,it);var Ta={2:"touch",3:"pen",4:"mouse"};lr.prototype.h=function(){lr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),Qn=0;function rn(u,f,g,C,k){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!C,this.ha=k,this.key=++Qn,this.da=this.fa=!1}function dr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function hi(u){this.src=u,this.g={},this.h=0}hi.prototype.add=function(u,f,g,C,k){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var G=hu(u,f,C,k);return-1<G?(f=u[G],g||(f.fa=!1)):(f=new rn(f,this.src,L,!!C,k),f.fa=g,u.push(f)),f};function du(u,f){var g=f.type;if(g in u.g){var C=u.g[g],k=Array.prototype.indexOf.call(C,f,void 0),L;(L=0<=k)&&Array.prototype.splice.call(C,k,1),L&&(dr(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function hu(u,f,g,C){for(var k=0;k<u.length;++k){var L=u[k];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==C)return k}return-1}var ba="closure_lm_"+(1e6*Math.random()|0),fu={};function Bp(u,f,g,C,k){if(C&&C.once)return mu(u,f,g,C,k);if(Array.isArray(f)){for(var L=0;L<f.length;L++)Bp(u,f[L],g,C,k);return null}return g=as(g),u&&u[pt]?u.K(f,g,d(C)?!!C.capture:!!C,k):pu(u,f,g,!1,C,k)}function pu(u,f,g,C,k,L){if(!f)throw Error("Invalid event type");var G=d(k)?!!k.capture:!!k,Be=gu(u);if(Be||(u[ba]=Be=new hi(u)),g=Be.add(f,g,C,G,L),g.proxy)return g;if(C=Nd(),g.proxy=C,C.src=u,C.listener=g,u.addEventListener)Je||(k=G),k===void 0&&(k=!1),u.addEventListener(f.toString(),C,k);else if(u.attachEvent)u.attachEvent(Ca(f.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Nd(){function u(g){return f.call(u.src,u.listener,g)}let f=QE;return u}function mu(u,f,g,C,k){if(Array.isArray(f)){for(var L=0;L<f.length;L++)mu(u,f[L],g,C,k);return null}return g=as(g),u&&u[pt]?u.L(f,g,d(C)?!!C.capture:!!C,k):pu(u,f,g,!0,C,k)}function qt(u,f,g,C,k){if(Array.isArray(f))for(var L=0;L<f.length;L++)qt(u,f[L],g,C,k);else C=d(C)?!!C.capture:!!C,g=as(g),u&&u[pt]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],g=hu(L,g,C,k),-1<g&&(dr(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=gu(u))&&(f=u.g[f.toString()],u=-1,f&&(u=hu(f,g,C,k)),(g=-1<u?f[u]:null)&&zt(g))}function zt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[pt])du(f.i,u);else{var g=u.type,C=u.proxy;f.removeEventListener?f.removeEventListener(g,C,u.capture):f.detachEvent?f.detachEvent(Ca(g),C):f.addListener&&f.removeListener&&f.removeListener(C),(g=gu(f))?(du(g,u),g.h==0&&(g.src=null,f[ba]=null)):dr(u)}}}function Ca(u){return u in fu?fu[u]:fu[u]="on"+u}function QE(u,f){if(u.da)u=!0;else{f=new lr(f,this);var g=u.listener,C=u.ha||u.src;u.fa&&zt(u),u=g.call(C,f)}return u}function gu(u){return u=u[ba],u instanceof hi?u:null}var kd="__closure_events_fn_"+(1e9*Math.random()>>>0);function as(u){return typeof u=="function"?u:(u[kd]||(u[kd]=function(f){return u.handleEvent(f)}),u[kd])}function Gt(){gt.call(this),this.i=new hi(this),this.M=this,this.F=null}R(Gt,gt),Gt.prototype[pt]=!0,Gt.prototype.removeEventListener=function(u,f,g,C){qt(this,u,f,g,C)};function Yt(u,f){var g,C=u.F;if(C)for(g=[];C;C=C.F)g.push(C);if(u=u.M,C=f.type||f,typeof f=="string")f=new it(f,u);else if(f instanceof it)f.target=f.target||u;else{var k=f;f=new it(C,u),T(f,k)}if(k=!0,g)for(var L=g.length-1;0<=L;L--){var G=f.g=g[L];k=ro(G,C,!0,f)&&k}if(G=f.g=u,k=ro(G,C,!0,f)&&k,k=ro(G,C,!1,f)&&k,g)for(L=0;L<g.length;L++)G=f.g=g[L],k=ro(G,C,!1,f)&&k}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],C=0;C<g.length;C++)dr(g[C]);delete u.g[f],u.h--}}this.F=null},Gt.prototype.K=function(u,f,g,C){return this.i.add(String(u),f,!1,g,C)},Gt.prototype.L=function(u,f,g,C){return this.i.add(String(u),f,!0,g,C)};function ro(u,f,g,C){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var k=!0,L=0;L<f.length;++L){var G=f[L];if(G&&!G.da&&G.capture==g){var Be=G.listener,Dt=G.ha||G.src;G.fa&&du(u.i,G),k=Be.call(Dt,C)!==!1&&k}}return k&&!C.defaultPrevented}function jp(u,f,g){if(typeof u=="function")g&&(u=I(u,g));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function $p(u){u.g=jp(()=>{u.g=null,u.i&&(u.i=!1,$p(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Hp extends gt{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$p(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(u){gt.call(this),this.h=u,this.g={}}R(io,gt);var so=[];function yu(u){pe(u.g,function(f,g){this.g.hasOwnProperty(g)&&zt(f)},u),u.g={}}io.prototype.N=function(){io.aa.N.call(this),yu(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sa=a.JSON.stringify,cs=a.JSON.parse,qp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function oo(){}oo.prototype.h=null;function Md(u){return u.h||(u.h=u.i())}function ao(){}var co={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){it.call(this,"d")}R(Wt,it);function _u(){it.call(this,"c")}R(_u,it);var Yn={},uo=null;function vu(){return uo=uo||new Gt}Yn.La="serverreachability";function zp(u){it.call(this,Yn.La,u)}R(zp,it);function hr(u){let f=vu();Yt(f,new zp(f))}Yn.STAT_EVENT="statevent";function Gp(u,f){it.call(this,Yn.STAT_EVENT,u),this.stat=f}R(Gp,it);function sn(u){let f=vu();Yt(f,new Gp(f,u))}Yn.Ma="timingevent";function Da(u,f){it.call(this,Yn.Ma,u),this.size=f}R(Da,it);function lo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ho(){this.g=!0}ho.prototype.xa=function(){this.g=!1};function xd(u,f,g,C,k,L){u.info(function(){if(u.g)if(L)for(var G="",Be=L.split("&"),Dt=0;Dt<Be.length;Dt++){var je=Be[Dt].split("=");if(1<je.length){var En=je[0];je=je[1];var In=En.split("_");G=2<=In.length&&In[1]=="type"?G+(En+"="+je+"&"):G+(En+"=redacted&")}}else G=null;else G=L;return"XMLHTTP REQ ("+C+") [attempt "+k+"]: "+f+`
`+g+`
`+G})}function Aa(u,f,g,C,k,L,G){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+k+"]: "+f+`
`+g+`
`+L+" "+G})}function fo(u,f,g,C){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Wp(u,g)+(C?" "+C:"")})}function fi(u,f){u.info(function(){return"TIMEOUT: "+f})}ho.prototype.info=function(){};function Wp(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var C=g[u];if(!(2>C.length)){var k=C[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if(L!="noop"&&L!="stop"&&L!="close")for(var G=1;G<k.length;G++)k[G]=""}}}}return Sa(g)}catch{return f}}var Ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pa;function Na(){}R(Na,oo),Na.prototype.g=function(){return new XMLHttpRequest},Na.prototype.i=function(){return{}},Pa=new Na;function pi(u,f,g,C){this.j=u,this.i=f,this.l=g,this.R=C||1,this.U=new io(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Od}function Od(){this.i=null,this.g="",this.h=!1}var Kp={},po={};function Iu(u,f,g){u.L=1,u.v=Cu(xr(f)),u.m=g,u.P=!0,wu(u,null)}function wu(u,f){u.F=Date.now(),go(u),u.A=xr(u.v);var g=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),nm(g.i,"t",C),u.C=0,g=u.j.J,u.h=new Od,u.g=p(u.j,g?f:null,!u.m),0<u.O&&(u.M=new Hp(I(u.Y,u,u.g),u.O)),f=u.U,g=u.g,C=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(so[0]=k.toString()),k=so);for(var L=0;L<k.length;L++){var G=Bp(g,k[L],C||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),hr(),xd(u.i,u.u,u.A,u.l,u.R,u.m)}pi.prototype.ca=function(u){u=u.target;let f=this.M;f&&Ln(u)==3?f.j():this.Y(u)},pi.prototype.Y=function(u){try{if(u==this.g)e:{let In=Ln(this.g);var f=this.g.Ba();let xu=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||am(this.g)))){this.J||In!=4||f==7||(f==8||0>=xu?hr(3):hr(2)),Tu(this);var g=this.g.Z();this.X=g;t:if(mo(this)){var C=am(this.g);u="";var k=C.length,L=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),yo(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<k;f++)this.h.h=!0,u+=this.h.i.decode(C[f],{stream:!(L&&f==k-1)});C.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,Aa(this.i,this.u,this.A,this.l,this.R,In,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Dt=this.g;if((Be=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Be)){var je=Be;break t}}je=null}if(g=je)fo(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ka(this,g);else{this.o=!1,this.s=3,sn(12),mi(this),yo(this);break e}}if(this.P){g=!0;let Ur;for(;!this.J&&this.C<G.length;)if(Ur=us(this,G),Ur==po){In==4&&(this.s=4,sn(14),g=!1),fo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==Kp){this.s=4,sn(15),fo(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else fo(this.i,this.l,Ur,null),ka(this,Ur);if(mo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||G.length!=0||this.h.h||(this.s=1,sn(16),g=!1),this.o=this.o&&g,!g)fo(this.i,this.l,G,"[Invalid Chunked Response]"),mi(this),yo(this);else if(0<G.length&&!this.W){this.W=!0;var En=this.j;En.g==this&&En.ba&&!En.M&&(En.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Mu(En),En.M=!0,sn(11))}}else fo(this.i,this.l,G,null),ka(this,G);In==4&&mi(this),this.o&&!this.J&&(In==4?vn(this.j,this):(this.o=!1,go(this)))}else cm(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),mi(this),yo(this)}}}catch{}};function mo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function us(u,f){var g=u.C,C=f.indexOf(`
`,g);return C==-1?po:(g=Number(f.substring(g,C)),isNaN(g)?Kp:(C+=1,C+g>f.length?po:(f=f.slice(C,C+g),u.C=C+g,f)))}pi.prototype.cancel=function(){this.J=!0,mi(this)};function go(u){u.S=Date.now()+u.I,Qp(u,u.I)}function Qp(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=lo(I(u.ba,u),f)}function Tu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}pi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(fi(this.i,this.A),this.L!=2&&(hr(),sn(17)),mi(this),this.s=2,yo(this)):Qp(this,this.S-u)};function yo(u){u.j.G==0||u.J||vn(u.j,u)}function mi(u){Tu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,yu(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function ka(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Bd(g.h,u))){if(!u.K&&Bd(g.h,u)&&g.G==3){try{var C=g.Da.g.parse(f)}catch{C=null}if(Array.isArray(C)&&C.length==3){var k=C;if(k[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)ds(g),bo(g);else break e;ku(g),sn(18)}}else g.za=k[1],0<g.za-g.T&&37500>k[2]&&g.F&&g.v==0&&!g.C&&(g.C=lo(I(g.Za,g),6e3));if(1>=Ud(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else _i(g,11)}else if((u.K||g.g==u)&&ds(g),!K(f))for(k=g.Da.g.parse(f),f=0;f<k.length;f++){let je=k[f];if(g.T=je[0],je=je[1],g.G==2)if(je[0]=="c"){g.K=je[1],g.ia=je[2];let En=je[3];En!=null&&(g.la=En,g.j.info("VER="+g.la));let In=je[4];In!=null&&(g.Aa=In,g.j.info("SVER="+g.Aa));let xu=je[5];xu!=null&&typeof xu=="number"&&0<xu&&(C=1.5*xu,g.L=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;let Ur=u.g;if(Ur){let um=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(um){var L=C.h;L.g||um.indexOf("spdy")==-1&&um.indexOf("quic")==-1&&um.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(fr(L,L.h),L.h=null))}if(C.D){let JE=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;JE&&(C.ya=JE,lt(C.I,C.D,JE))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),C=g;var G=u;if(C.qa=l(C,C.J?C.ia:null,C.W),G.K){Jn(C.h,G);var Be=G,Dt=C.L;Dt&&(Be.I=Dt),Be.B&&(Tu(Be),go(Be)),C.g=G}else Qd(C);0<g.i.length&&Ua(g)}else je[0]!="stop"&&je[0]!="close"||_i(g,7);else g.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?_i(g,7):Ru(g):je[0]!="noop"&&g.l&&g.l.ta(je),g.v=0)}}hr(4)}catch{}}var Fd=class{constructor(u,f){this.g=u,this.map=f}};function Ld(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ud(u){return u.h?1:u.g?u.g.size:0}function Bd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function fr(u,f){u.g?u.g.add(f):u.h=f}function Jn(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Ld.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function _o(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let g of u.g.values())f=f.concat(g.D);return f}return P(u.i)}function Ma(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,C=0;C<g;C++)f.push(u[C]);return f}f=[],g=0;for(C in u)f[g++]=u[C];return f}function jd(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(let C in u)f[g++]=C;return f}}}function st(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=jd(u),C=Ma(u),k=C.length,L=0;L<k;L++)f.call(void 0,C[L],g&&g[L],u)}var xa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var C=u[g].indexOf("="),k=null;if(0<=C){var L=u[g].substring(0,C);k=u[g].substring(C+1)}else L=u[g];f(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Xn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xn){this.h=u.h,Fa(this,u.j),this.o=u.o,this.g=u.g,bu(this,u.s),this.l=u.l;var f=u.i,g=new La;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Yp(this,g),this.m=u.m}else u&&(f=String(u).match(xa))?(this.h=!1,Fa(this,f[1]||"",!0),this.o=Or(f[2]||""),this.g=Or(f[3]||"",!0),bu(this,f[4]),this.l=Or(f[5]||"",!0),Yp(this,f[6]||"",!0),this.m=Or(f[7]||"")):(this.h=!1,this.i=new La(null,this.h))}Xn.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Zn(f,$d,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Zn(f,$d,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Zn(g,g.charAt(0)=="/"?Zp:Xp,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Zn(g,vo)),u.join("")};function xr(u){return new Xn(u)}function Fa(u,f,g){u.j=g?Or(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Yp(u,f,g){f instanceof La?(u.i=f,Su(u.i,u.h)):(g||(f=Zn(f,em)),u.i=new La(f,u.h))}function lt(u,f,g){u.i.set(f,g)}function Cu(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Or(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zn(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,Jp),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $d=/[#\/\?@]/g,Xp=/[#\?:]/g,Zp=/[#\?]/g,em=/[#\?@]/g,vo=/#/g;function La(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function gi(u){u.g||(u.g=new Map,u.h=0,u.i&&Oa(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=La.prototype,n.add=function(u,f){gi(this),this.i=null,u=Lr(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function tm(u,f){gi(u),f=Lr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Fr(u,f){return gi(u),f=Lr(u,f),u.g.has(f)}n.forEach=function(u,f){gi(this),this.g.forEach(function(g,C){g.forEach(function(k){u.call(f,k,C,this)},this)},this)},n.na=function(){gi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let C=0;C<f.length;C++){let k=u[C];for(let L=0;L<k.length;L++)g.push(f[C])}return g},n.V=function(u){gi(this);let f=[];if(typeof u=="string")Fr(this,u)&&(f=f.concat(this.g.get(Lr(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return gi(this),this.i=null,u=Lr(this,u),Fr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function nm(u,f,g){tm(u,f),0<g.length&&(u.i=null,u.g.set(Lr(u,f),P(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var C=f[g];let L=encodeURIComponent(String(C)),G=this.V(C);for(C=0;C<G.length;C++){var k=L;G[C]!==""&&(k+="="+encodeURIComponent(String(G[C]))),u.push(k)}}return this.i=u.join("&")};function Lr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Su(u,f){f&&!u.j&&(gi(u),u.i=null,u.g.forEach(function(g,C){var k=C.toLowerCase();C!=k&&(tm(this,C),nm(this,k,g))},u)),u.j=f}function rm(u,f){let g=new ho;if(a.Image){let C=new Image;C.onload=S(Fn,g,"TestLoadImage: loaded",!0,f,C),C.onerror=S(Fn,g,"TestLoadImage: error",!1,f,C),C.onabort=S(Fn,g,"TestLoadImage: abort",!1,f,C),C.ontimeout=S(Fn,g,"TestLoadImage: timeout",!1,f,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else f(!1)}function Va(u,f){let g=new ho,C=new AbortController,k=setTimeout(()=>{C.abort(),Fn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:C.signal}).then(L=>{clearTimeout(k),L.ok?Fn(g,"TestPingServer: ok",!0,f):Fn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(k),Fn(g,"TestPingServer: error",!1,f)})}function Fn(u,f,g,C,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),C(g)}catch{}}function im(){this.g=new qp}function Hd(u,f,g){let C=g||"";try{st(u,function(k,L){let G=k;d(k)&&(G=Sa(k)),f.push(C+L+"="+encodeURIComponent(G))})}catch(k){throw f.push(C+"type="+encodeURIComponent("_badmap")),k}}function ot(u){this.l=u.Ub||null,this.j=u.eb||!1}R(ot,oo),ot.prototype.g=function(){return new Du(this.l,this.j)},ot.prototype.i=(function(u){return function(){return u}})({});function Du(u,f){Gt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Du,Gt),n=Du.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Io(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Eo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function sm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Eo(this):Io(this),this.readyState==3&&sm(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Eo(this))},n.Qa=function(u){this.g&&(this.response=u,Eo(this))},n.ga=function(){this.g&&Eo(this)};function Eo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Io(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Io(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qd(u){let f="";return pe(u,function(g,C){f+=C,f+=":",f+=g,f+=`\r
`}),f}function wo(u,f,g){e:{for(C in g){var C=!1;break e}C=!0}C||(g=qd(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):lt(u,f,g))}function Ge(u){Gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ge,Gt);var om=/^https?$/i,YE=["POST","PUT"];n=Ge.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pa.g(),this.v=this.o?Md(this.o):Md(Pa),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){To(this,L);return}if(u=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var k in C)g.set(k,C[k]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(let L of C.keys())g.set(L,C.get(L));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),k=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(YE,f,void 0))||C||k||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,G]of g)this.g.setRequestHeader(L,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gd(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){To(this,L)}};function To(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,zd(u),ls(u)}function zd(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Yt(this,"complete"),Yt(this,"abort"),ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},n.bb=function(){Au(this)};function Au(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ln(u)!=4||u.Z()!=2)){if(u.u&&Ln(u)==4)jp(u.Ea,0,u);else if(Yt(u,"readystatechange"),Ln(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var C;if(C=G===0){var k=String(u.D).match(xa)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),C=!om.test(k?k.toLowerCase():"")}g=C}if(g)Yt(u,"complete"),Yt(u,"success");else{u.m=6;try{var L=2<Ln(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",zd(u)}}finally{ls(u)}}}}function ls(u,f){if(u.g){Gd(u);let g=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Yt(u,"ready");try{g.onreadystatechange=C}catch{}}}function Gd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Ln(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),cs(f)}};function am(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cm(u){let f={};u=(u.g&&2<=Ln(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(K(u[C]))continue;var g=b(u[C]);let k=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let L=f[k]||[];f[k]=L,L.push(g)}w(f,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Wd(u){this.Aa=0,this.i=[],this.j=new ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,u),this.cb=Vr("retryDelaySeedMs",1e4,u),this.Wa=Vr("forwardChannelMaxRetries",2,u),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ld(u&&u.concurrentRequestLimit),this.Da=new im,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Wd.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,C){sn(0),this.W=u,this.H=f||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.I=l(this,null,this.W),Ua(this)};function Ru(u){if(Pu(u),u.G==3){var f=u.U++,g=xr(u.I);if(lt(g,"SID",u.K),lt(g,"RID",f),lt(g,"TYPE","terminate"),Co(u,g),f=new pi(u,u.j,f),f.L=2,f.v=Cu(xr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),go(f)}hs(u)}function bo(u){u.g&&(Mu(u),u.g.cancel(),u.g=null)}function Pu(u){bo(u),u.u&&(a.clearTimeout(u.u),u.u=null),ds(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ua(u){if(!Vd(u.h)&&!u.s){u.s=!0;var f=u.Ga;ie||It(),se||(ie(),se=!0),Ae.add(f,u),u.B=0}}function Nu(u,f){return Ud(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=lo(I(u.Ga,u,f),Jd(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let k=new pi(this,this.j,u),L=this.o;if(this.S&&(L?(L=y(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(k.H=L,L=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(f+=C,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=yi(this,k,f),g=xr(this.I),lt(g,"RID",u),lt(g,"CVER",22),this.D&&lt(g,"X-HTTP-Session-Id",this.D),Co(this,g),L&&(this.O?f="headers="+encodeURIComponent(String(qd(L)))+"&"+f:this.m&&wo(g,this.m,L)),fr(this.h,k),this.Ua&&lt(g,"TYPE","init"),this.P?(lt(g,"$req",f),lt(g,"SID","null"),k.T=!0,Iu(k,g,null)):Iu(k,g,f),this.G=2}}else this.G==3&&(u?Kd(this,u):this.i.length==0||Vd(this.h)||Kd(this))};function Kd(u,f){var g;f?g=f.l:g=u.U++;let C=xr(u.I);lt(C,"SID",u.K),lt(C,"RID",g),lt(C,"AID",u.T),Co(u,C),u.m&&u.o&&wo(C,u.m,u.o),g=new pi(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=yi(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),fr(u.h,g),Iu(g,C,f)}function Co(u,f){u.H&&pe(u.H,function(g,C){lt(f,C,g)}),u.l&&st({},function(g,C){lt(f,C,g)})}function yi(u,f,g){g=Math.min(u.i.length,g);var C=u.l?I(u.l.Na,u.l,u):null;e:{var k=u.i;let L=-1;for(;;){let G=["count="+g];L==-1?0<g?(L=k[0].g,G.push("ofs="+L)):L=0:G.push("ofs="+L);let Be=!0;for(let Dt=0;Dt<g;Dt++){let je=k[Dt].g,En=k[Dt].map;if(je-=L,0>je)L=Math.max(0,k[Dt].g-100),Be=!1;else try{Hd(En,G,"req"+je+"_")}catch{C&&C(En)}}if(Be){C=G.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,C}function Qd(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ie||It(),se||(ie(),se=!0),Ae.add(f,u),u.v=0}}function ku(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=lo(I(u.Fa,u),Jd(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Yd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=lo(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),bo(this),Yd(this))};function Mu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Yd(u){u.g=new pi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=xr(u.qa);lt(f,"RID","rpc"),lt(f,"SID",u.K),lt(f,"AID",u.T),lt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(f,"TO",u.ja),lt(f,"TYPE","xmlhttp"),Co(u,f),u.m&&u.o&&wo(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Cu(xr(f)),g.m=null,g.P=!0,wu(g,u)}n.Za=function(){this.C!=null&&(this.C=null,bo(this),ku(this),sn(19))};function ds(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function vn(u,f){var g=null;if(u.g==f){ds(u),Mu(u),u.g=null;var C=2}else if(Bd(u.h,f))g=f.D,Jn(u.h,f),C=1;else return;if(u.G!=0){if(f.o)if(C==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var k=u.B;C=vu(),Yt(C,new Da(C,g)),Ua(u)}else Qd(u);else if(k=f.s,k==3||k==0&&0<f.X||!(C==1&&Nu(u,f)||C==2&&ku(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),k){case 1:_i(u,5);break;case 4:_i(u,10);break;case 3:_i(u,6);break;default:_i(u,2)}}}function Jd(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function _i(u,f){if(u.j.info("Error code "+f),f==2){var g=I(u.fb,u),C=u.Xa;let k=!C;C=new Xn(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fa(C,"https"),Cu(C),k?rm(C.toString(),g):Va(C.toString(),g)}else sn(2);u.G=0,u.l&&u.l.sa(f),hs(u),Pu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function hs(u){if(u.G=0,u.ka=[],u.l){let f=_o(u.h);(f.length!=0||u.i.length!=0)&&(M(u.ka,f),M(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function l(u,f,g){var C=g instanceof Xn?xr(g):new Xn(g);if(C.g!="")f&&(C.g=f+"."+C.g),bu(C,C.s);else{var k=a.location;C=k.protocol,f=f?f+"."+k.hostname:k.hostname,k=+k.port;var L=new Xn(null);C&&Fa(L,C),f&&(L.g=f),k&&bu(L,k),g&&(L.l=g),C=L}return g=u.D,f=u.ya,g&&f&&lt(C,g,f),lt(C,"VER",u.la),Co(u,C),C}function p(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ge(new ot({eb:g})):new Ge(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(u,f){return new N(u,f)};function N(u,f){Gt.call(this),this.g=new Wd(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!K(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!K(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new me(this)}R(N,Gt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){Ru(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Sa(u),u=g);f.i.push(new Fd(f.Ya++,u)),f.G==3&&Ua(f)},N.prototype.N=function(){this.g.l=null,delete this.j,Ru(this.g),delete this.g,N.aa.N.call(this)};function F(u){Wt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(F,Wt);function W(){_u.call(this),this.status=1}R(W,_u);function me(u){this.g=u}R(me,_),me.prototype.ua=function(){Yt(this.g,"a")},me.prototype.ta=function(u){Yt(this.g,new F(u))},me.prototype.sa=function(u){Yt(this.g,new W)},me.prototype.ra=function(){Yt(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,PU=Js.createWebChannelTransport=function(){return new D},RU=Js.getStatEventTarget=function(){return vu()},AU=Js.Event=Yn,DU=Js.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,SU=Js.ErrorCode=Ra,Eu.COMPLETE="complete",CU=Js.EventType=Eu,ao.EventType=co,co.OPEN="a",co.CLOSE="b",co.ERROR="c",co.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,bU=Js.WebChannel=ao,IX=Js.FetchXmlHttpFactory=ot,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,TU=Js.XhrIo=Ge}).apply(typeof fE<"u"?fE:typeof self<"u"?self:typeof window<"u"?window:{});var NU="@firebase/firestore",kU="4.8.0";var _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");var Ap="11.10.0";var wd=new Vi("@firebase/firestore");function li(n,...e){if(wd.logLevel<=Ye.DEBUG){let t=e.map(ZA);wd.debug(`Firestore (${Ap}): ${n}`,...t)}}function zU(n,...e){if(wd.logLevel<=Ye.ERROR){let t=e.map(ZA);wd.error(`Firestore (${Ap}): ${n}`,...t)}}function wX(n,...e){if(wd.logLevel<=Ye.WARN){let t=e.map(ZA);wd.warn(`Firestore (${Ap}): ${n}`,...t)}}function ZA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Kn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,GU(n,r,t)}function GU(n,e,t){let r=`FIRESTORE (${Ap}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw zU(r),new Error(r)}function ou(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||GU(e,i,r)}var Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xe=class extends On{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var au=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pE=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}},OA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},FA=class{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ou(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new au;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new au,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{li("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(li("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new au)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(li("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ou(typeof r.accessToken=="string",31837,{l:r}),new pE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ou(e===null||typeof e=="string",2055,{h:e}),new _n(e)}},LA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},VA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new LA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},UA=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ou(this.o===void 0,3512);let r=s=>{s.error!=null&&li("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,li("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{li("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):li("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mE(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ou(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function TX(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function bX(){return new TextEncoder}var BA=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=TX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function kr(n,e){return n<e?-1:n>e?1:0}function CX(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return kr(r,i);{let s=bX(),o=SX(s.encode(MU(n,t)),s.encode(MU(e,t)));return o!==0?o:kr(r,i)}}t+=r>65535?2:1}return kr(n.length,e.length)}function MU(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function SX(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return kr(n[t],e[t]);return kr(n.length,e.length)}var xU="__name__",gE=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Kn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Kn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return kr(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):CX(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hE.fromString(e.substring(4,e.length-2))}},Xs=class n extends gE{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new xe(Ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},DX=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jA=class n extends gE{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return DX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xU}static keyField(){return new n([xU])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new xe(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new xe(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new xe(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new xe(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Zs=class n{constructor(e){this.path=e}static fromPath(e){return new n(Xs.fromString(e))}static fromName(e){return new n(Xs.fromString(e).popFirst(5))}static empty(){return new n(Xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Xs(e.slice()))}};function AX(n,e,t,r){if(e===!0&&r===!0)throw new xe(Ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RX(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function PX(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Kn(12329,{type:typeof n})}function NX(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=PX(n);throw new xe(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ht(n,e){let t={typeString:n};return e&&(t.value=e),t}function Rp(n,e){if(!RX(n))throw new xe(Ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new xe(Ue.INVALID_ARGUMENT,t);return!0}var OU=-62135596800,FU=1e6,wp=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*FU);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<OU)throw new xe(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FU}_compareTo(e){return this.seconds===e.seconds?kr(this.nanoseconds,e.nanoseconds):kr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-OU;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};wp._jsonSchemaVersion="firestore/timestamp/1.0",wp._jsonSchema={type:Ht("string",wp._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};var $A=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};$A.UNKNOWN_ID=-1;function kX(n){return n.name==="IndexedDbTransactionError"}function MX(n){return n===0&&1/n==-1/0}var xX="remoteDocuments",WU="owner";var KU="mutationQueues";var QU="mutations";var YU="documentMutations",OX="remoteDocumentsV14";var JU="remoteDocumentGlobal";var XU="targets";var ZU="targetDocuments";var eB="targetGlobal",tB="collectionParents";var nB="clientMetadata";var rB="bundles";var iB="namedQueries";var FX="indexConfiguration";var LX="indexState";var VX="indexEntries";var sB="documentOverlays";var UX="globals";var BX=[KU,QU,YU,xX,XU,WU,eB,ZU,nB,JU,tB,rB,iB],Nbe=[...BX,sB],jX=[KU,QU,YU,OX,XU,WU,eB,ZU,nB,JU,tB,rB,iB,sB],$X=jX,HX=[...$X,FX,LX,VX];var kbe=[...HX,UX];var Td=class n{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}},_d=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ss=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Kn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Kn(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Kn(27949);return e+(this.isRed()?0:1)}};ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Kn(57766)}get value(){throw Kn(16141)}get color(){throw Kn(16727)}get left(){throw Kn(29726)}get right(){throw Kn(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yE=class n{constructor(e){this.comparator=e,this.data=new Td(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _E(this.data.getIterator())}getIteratorFrom(e){return new _E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_E=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var HA=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ia=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HA("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ia.EMPTY_BYTE_STRING=new Ia("");var qX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zX(n){if(ou(!!n,39018),typeof n=="string"){let e=0,t=qX.exec(n);if(ou(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tp(n.seconds),nanos:Tp(n.nanos)}}function Tp(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function GX(n){return typeof n=="string"?Ia.fromBase64String(n):Ia.fromUint8Array(n)}var qA="(default)",zA=class n{constructor(e,t){this.projectId=e,this.database=t||qA}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===qA}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var oB="__type__",WX="__max__";var aB="__vector__",cB="value";function KX(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[oB])===null||t===void 0?void 0:t.stringValue)===aB}function QX(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===WX}var xbe={mapValue:{fields:{[oB]:{stringValue:aB},[cB]:{arrayValue:{}}}}};var GA=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function YX(n){return new GA(n)}var Obe=new Td(Zs.comparator);var Fbe=new Td(Zs.comparator);var Lbe=new Td(Zs.comparator),Vbe=new yE(Zs.comparator);var Ube=new yE(kr);var LU,Ve;(Ve=LU||(LU={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";var Bbe=new hE([4294967295,4294967295],0);var vE=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Tp(e.integerValue));else if("doubleValue"in e){let r=Tp(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),MX(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=zX(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(GX(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?QX(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):KX(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Kn(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=cB,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Tp(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Zs.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};vE.Ut=new vE;var jbe=new Uint8Array(0);var uB=41943040,is=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(uB,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);var JX=1048576;function MA(){return typeof document<"u"?document:null}var WA=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&li("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var KA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new au,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var VU,UU;(UU=VU||(VU={})).Fa="default",UU.Cache="cache";function XX(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var BU=new Map;var lB="firestore.googleapis.com",jU=!0,EE=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lB,this.ssl=jU}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JX)throw new xe(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XX((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},IE=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new xA;switch(r.type){case"firstParty":return new VA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=BU.get(t);r&&(li("ComponentProvider","Removing Datastore"),BU.delete(t),r.terminate())})(this),Promise.resolve()}};function dB(n,e,t,r={}){var i;n=NX(n,IE);let s=As(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Fl(`https://${c}`),Ll("Firestore",!0)),o.host!==lB&&o.host!==c&&wX("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Li(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=_n.MOCK_USER;else{h=d_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new xe(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _n(I)}n._authCredentials=new OA(new pE(h,m))}}var QA=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},cu=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new YA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Rp(t,n._jsonSchema))return new n(e,r||null,new Zs(Xs.fromString(t.referencePath)))}};cu._jsonSchemaVersion="firestore/documentReference/1.0",cu._jsonSchema={type:Ht("string",cu._jsonSchemaVersion),referencePath:Ht("string")};var YA=class n extends QA{constructor(e,t,r){super(e,t,YX(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new cu(this.firestore,null,new Zs(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var $U="AsyncQueue",wE=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WA(this,"async_queue_retry"),this.oc=()=>{let r=MA();r&&li($U,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=MA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=MA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new au;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!kX(e))throw e;li($U,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,zU("INTERNAL UNHANDLED ERROR: ",HU(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=KA.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Kn(47125,{hc:HU(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function HU(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var JA=class extends IE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new wE(e),this._firestoreClient=void 0,await e}}};function hB(n,e){let t=typeof n=="object"?n:Ps(),r=typeof n=="string"?n:e||qA,i=ea(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=l_("firestore");s&&dB(i,...s)}return i}var bp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ia.fromBase64String(e))}catch(t){throw new xe(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ia.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};bp._jsonSchemaVersion="firestore/bytes/1.0",bp._jsonSchema={type:Ht("string",bp._jsonSchemaVersion),bytes:Ht("string")};var TE=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jA(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cp=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kr(this._lat,e._lat)||kr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Rp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Cp._jsonSchemaVersion="firestore/geoPoint/1.0",Cp._jsonSchema={type:Ht("string",Cp._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};var Sp=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new xe(Ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Sp._jsonSchemaVersion="firestore/vectorValue/1.0",Sp._jsonSchema={type:Ht("string",Sp._jsonSchemaVersion),vectorValues:Ht("object")};var ZX=new RegExp("[~\\*/\\[\\]]");function eZ(n,e,t){if(e.search(ZX)>=0)throw qU(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new TE(...e.split("."))._internalPath}catch{throw qU(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qU(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new xe(Ue.INVALID_ARGUMENT,a+n+c)}var bE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new XA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(fB("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},XA=class extends bE{data(){return super.data()}};function fB(n,e){return typeof e=="string"?eZ(n,e):e instanceof TE?e._internalPath:e._delegate._internalPath}var vd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ed=class n extends bE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(fB("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(Ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ed._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ed._jsonSchema={type:Ht("string",Ed._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};var Id=class extends Ed{data(e={}){return super.data(e)}},Dp=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Id(this._firestore,this._userDataWriter,r.key,r,new vd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Id(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Id(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:tZ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(Ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=BA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function tZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kn(61501,{type:n})}}Dp._jsonSchemaVersion="firestore/querySnapshot/1.0",Dp._jsonSchema={type:Ht("string",Dp._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};(function(e,t=!0){(function(i){Ap=i})(Bi),ar(new gn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new JA(new FA(r.getProvider("auth-internal")),new UA(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new xe(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zA(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ft(NU,kU,e),ft(NU,kU,"esm2017")})();var Pp=class{constructor(e){return e}},pB="firestore",eR=class{constructor(){return ta(pB)}};var tR=new Z("angularfire2.firestore-instances");function nZ(n,e){let t=Nc(pB,n,e);return t&&new Pp(t)}function rZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Pp(r)}}var iZ={provide:eR,deps:[[new Jt,tR]]},sZ={provide:Pp,useFactory:nZ,deps:[[new Jt,tR],ii]};function mB(n,...e){return ft("angularfire",ji.full,"fst"),ln([sZ,iZ,{provide:tR,useFactory:rZ(n),multi:!0,deps:[tt,yt,$i,ks,[new Jt,Bc],[new Jt,ra],...e]}])}var gB=Ns(hB,!0);var wB="firebasestorage.googleapis.com",oZ="storageBucket",aZ=120*1e3,cZ=600*1e3;var os=class n extends On{constructor(e,t,r=0){super(nR(e),`Firebase Storage: ${t} (${nR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},to=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(to||{});function nR(n){return"storage/"+n}function uZ(){let n="An unknown error occurred, please check the error payload for server response.";return new os(to.UNKNOWN,n)}function lZ(){return new os(to.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dZ(){return new os(to.CANCELED,"User canceled the upload/download.")}function hZ(n){return new os(to.INVALID_URL,"Invalid URL '"+n+"'.")}function fZ(n){return new os(to.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function yB(n){return new os(to.INVALID_ARGUMENT,n)}function TB(){return new os(to.APP_DELETED,"The Firebase app was deleted.")}function pZ(n){return new os(to.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var eo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw fZ(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",S=new RegExp(`^https?://${m}/${h}/b/${i}/o${I}`,"i"),R={bucket:1,path:3},P=t===wB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",H=new RegExp(`^https?://${P}/${i}/${M}`,"i"),Y=[{regex:a,indices:c,postModify:s},{regex:S,indices:R,postModify:d},{regex:H,indices:{bucket:1,path:2},postModify:d}];for(let oe=0;oe<Y.length;oe++){let ze=Y[oe],pe=ze.regex.exec(e);if(pe){let w=pe[ze.indices.bucket],y=pe[ze.indices.path];y||(y=""),r=new n(w,y),ze.postModify(r);break}}if(r==null)throw hZ(e);return r}},rR=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function mZ(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let d=!1;function h(...M){d||(d=!0,e.apply(null,M))}function m(M){i=setTimeout(()=>{i=null,n(S,c())},M)}function I(){s&&clearTimeout(s)}function S(M,...H){if(d){I();return}if(M){I(),h.call(null,M,...H);return}if(c()||o){I(),h.call(null,M,...H);return}r<64&&(r*=2);let Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,m(Y)}let R=!1;function P(M){R||(R=!0,I(),!d&&(i!==null?(M||(a=2),clearTimeout(i),m(0)):M||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,P(!0)},t),P}function gZ(n){n(!1)}function yZ(n){return n!==void 0}function _B(n,e,t,r){if(r<e)throw yB(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw yB(`Invalid value for '${n}'. Expected ${t} or less.`)}function _Z(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var iR=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(iR||{});function vZ(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var sR=class{constructor(e,t,r,i,s,o,a,c,d,h,m,I=!0,S=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=I,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new bd(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===iR.NO_ERROR,c=s.getStatus();if(!a||vZ(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===iR.ABORT;r(!1,new bd(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new bd(d,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());yZ(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=uZ();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?TB():dZ();o(c)}else{let c=lZ();o(c)}};this.canceled_?t(!1,new bd(!1,null,!0)):this.backoffId_=mZ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gZ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},bd=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function EZ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function IZ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wZ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function TZ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function bZ(n,e,t,r,i,s,o=!0,a=!1){let c=_Z(n.urlParams),d=n.url+c,h=Object.assign({},n.headers);return wZ(h,e),EZ(h,t),IZ(h,s),TZ(h,r),new sR(d,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}function CZ(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function SZ(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var oCe=256*1024;var oR=class n{constructor(e,t){this._service=e,t instanceof eo?this._location=t:this._location=eo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new eo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SZ(this._location.path)}get storage(){return this._service}get parent(){let e=CZ(this._location.path);if(e===null)return null;let t=new eo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw pZ(e)}};function vB(n,e){let t=e?.[oZ];return t==null?null:eo.makeFromBucketSpec(t,n)}function DZ(n,e,t,r={}){n.host=`${e}:${t}`;let i=As(e);i&&(Fl(`https://${n.host}/b`),Ll("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:d_(s,n.app.options.projectId))}var aR=class{constructor(e,t,r,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=wB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aZ,this._maxUploadRetryTime=cZ,this._requests=new Set,i!=null?this._bucket=eo.makeFromBucketSpec(i,this._host):this._bucket=vB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=eo.makeFromBucketSpec(this._url,e):this._bucket=vB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_B("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_B("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oR(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new rR(TB());{let o=bZ(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},EB="@firebase/storage",IB="0.13.14";var bB="storage";function CB(n=Ps(),e){n=ri(n);let r=ea(n,bB).getImmediate({identifier:e}),i=l_("storage");return i&&SB(r,...i),r}function SB(n,e,t,r={}){DZ(n,e,t,r)}function AZ(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new aR(t,r,i,e,Bi)}function RZ(){ar(new gn(bB,AZ,"PUBLIC").setMultipleInstances(!0)),ft(EB,IB,""),ft(EB,IB,"esm2017")}RZ();var Np=class{constructor(e){return e}},DB="storage",cR=class{constructor(){return ta(DB)}};var uR=new Z("angularfire2.storage-instances");function PZ(n,e){let t=Nc(DB,n,e);return t&&new Np(t)}function NZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Np(r)}}var kZ={provide:cR,deps:[[new Jt,uR]]},MZ={provide:Np,useFactory:PZ,deps:[[new Jt,uR],ii]};function AB(n,...e){return ft("angularfire",ji.full,"gcs"),ln([MZ,kZ,{provide:uR,useFactory:NZ(n),multi:!0,deps:[tt,yt,$i,ks,[new Jt,Bc],[new Jt,ra],...e]}])}var RB=Ns(CB,!0);var xZ="firebase",OZ="12.8.0";ai(xZ,OZ,"app");var di={production:!1,firebase:{apiKey:"AIzaSyB_9AlTCYi27xFQkP64f5aU4OrQBZ7TE8k",authDomain:"agilityasturias-4a107.firebaseapp.com",projectId:"agilityasturias-4a107",storageBucket:"agilityasturias-4a107.firebasestorage.app",messagingSenderId:"898271086134",appId:"1:898271086134:web:10e005442180b8d2943a97",measurementId:"G-N6SP2XNR7Q"}};var Mr=class n{auth;currentUserSignal=Pe(null);checkAuthLoading=Pe(!0);constructor(){let e;try{e=Ar()}catch{e=Os(di.firebase)}this.auth=BC(e),q_(this.auth,t=>{this.currentUserSignal.set(t),this.checkAuthLoading.set(!1)})}getAuthState(){return new Promise(e=>{let t=q_(this.auth,r=>{t(),e(r)})})}async loginWithGoogle(){let e=new OC;try{return(await UC(this.auth,e)).user}catch(t){throw console.error("Error logging in with Google",t),t}}async logout(){try{await FC(this.auth),this.currentUserSignal.set(null)}catch(e){throw console.error("Error logging out",e),e}}isLoggedIn=Er(()=>!!this.currentUserSignal());static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};function FZ(n,e){n&1&&(x(0,"p"),V(1,"Bienvenido a Agility Asturias. Inicia sesi\xF3n para gestionar tus reservas."),O())}function LZ(n,e){if(n&1){let t=Fe();x(0,"div",6)(1,"button",7),re("click",function(){ue(t);let i=X();return le(i.login())}),He(2,"img",8),V(3," Continuar con Google "),O()()}}function VZ(n,e){if(n&1){let t=Fe();x(0,"div",9),He(1,"img",10),x(2,"div")(3,"p",11),V(4),O(),x(5,"p",12),V(6),O(),x(7,"button",13),re("click",function(){ue(t);let i=X();return le(i.logout())}),V(8,"Cerrar Sesi\xF3n"),O()()()}if(n&2){let t=e.ngIf;j(),Q("src",t.photoURL,hn),j(3),qe(t.displayName),j(2),qe(t.email)}}var CE=class n{authService=B(Mr);constructor(){}async login(){try{await this.authService.loginWithGoogle()}catch(e){console.error(e)}}async logout(){await this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-area"],[4,"ngIf"],["class","google-btn-wrapper",4,"ngIf"],["class","user-info",4,"ngIf"],[1,"google-btn-wrapper"],[1,"btn-google",3,"click"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google logo"],[1,"user-info"],["alt","User photo",3,"src"],[1,"name"],[1,"email"],[1,"btn-logout",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),V(4,"Iniciar Sesi\xF3n"),O()(),_e(5,FZ,2,0,"p",3)(6,LZ,4,0,"div",4)(7,VZ,9,3,"div",5),O()()),t&2&&(j(5),Q("ngIf",!r.authService.currentUserSignal()),j(),Q("ngIf",!r.authService.currentUserSignal()),j(),Q("ngIf",r.authService.currentUserSignal()))},dependencies:[Dn,xn],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;max-width:400px;width:100%;text-align:center}.google-btn-wrapper[_ngcontent-%COMP%]{margin:20px 0;display:flex;justify-content:center}.btn-google[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;background-color:#fff;color:#444;border:1px solid #ddd;border-radius:4px;padding:10px 20px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s;width:100%}.btn-google[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.btn-logout[_ngcontent-%COMP%]{margin-top:10px;padding:6px 12px;background-color:#f44;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#c00}.user-info[_ngcontent-%COMP%]{text-align:center;margin-top:20px;display:flex;flex-direction:column;align-items:center}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-bottom:10px}"]})};var SE=class n{constructor(e){this.location=e}get heroBackground(){return`linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${this.location.prepareExternalUrl("Images/Agility_Asturias_logo.jpg")}')`}static \u0275fac=function(t){return new(t||n)(de(Ko))};static \u0275cmp=Tt({type:n,selectors:[["app-home"]],decls:23,vars:2,consts:[[1,"hero"],[1,"hero-content"],[1,"subtitle"],[1,"history-section"],[1,"container"],[1,"history-text"]],template:function(t,r){t&1&&(nt(0,"section",0)(1,"div",1)(2,"h2"),V(3,"Bienvenido a Agility Asturias"),dt(),nt(4,"p",2),V(5,"Perretes y agility en Asturias."),dt()()(),nt(6,"section",3)(7,"div",4)(8,"h3"),V(9,"Historia del Agility"),dt(),nt(10,"div",5)(11,"p"),V(12,"El Agility es un deporte canino que se origin\xF3 en el Reino Unido a finales de la d\xE9cada de 1970 y principios de la d\xE9cada de 1980. El primer evento de Agility tuvo lugar en 1978 en el Crufts Dog Show, uno de los mayores eventos de perros en el mundo."),dt(),nt(13,"p"),V(14,"El creador del Agility fue John Varley, quien trabajaba como entrenador de perros en el Crufts Dog Show. Varley estaba buscando una forma de entretener a la audiencia durante los descansos entre las competiciones de obediencia y decidi\xF3 crear un curso de obst\xE1culos para perros."),dt(),nt(15,"p"),V(16,"El curso de obst\xE1culos original constaba de saltos, t\xFAneles y aros, y estaba dise\xF1ado para poner a prueba la agilidad y la velocidad de los perros. La primera competici\xF3n de agility se llev\xF3 a cabo en 1978 en el Crufts Dog Show y fue un gran \xE9xito entre los participantes y el p\xFAblico."),dt(),nt(17,"p"),V(18,"A medida que el deporte creci\xF3 en popularidad, se establecieron organizaciones de agility en todo el mundo, incluyendo el Kennel Club en el Reino Unido y la United States Dog Agility Association en los Estados Unidos."),dt(),nt(19,"p"),V(20,"El agility se convirti\xF3 r\xE1pidamente en uno de los deportes caninos m\xE1s populares del mundo, con miles de perros y sus due\xF1os compitiendo en eventos y competiciones en todo el mundo. El deporte se ha diversificado en diferentes modalidades, como el jumping y la agilidad por equipos."),dt(),nt(21,"p"),V(22,"Hoy en d\xEDa, el agility es un deporte altamente competitivo que requiere una gran cantidad de entrenamiento y habilidades tanto por parte del perro como del manejador. A pesar de su naturaleza competitiva, tambi\xE9n es un deporte muy divertido y emocionante para perros y due\xF1os por igual."),dt()()()()),t&2&&pl("background-image",r.heroBackground)},styles:['.hero[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-attachment:fixed;height:70vh;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center;margin-bottom:0;position:relative}.hero-content[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:3rem;border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000004d;max-width:600px;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1rem;font-weight:700;text-transform:uppercase;letter-spacing:2px}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;margin-bottom:2rem;color:#f0f0f0}.cta-button[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;border:none;padding:12px 30px;font-size:1.1rem;border-radius:30px;cursor:pointer;transition:transform .2s,box-shadow .2s;font-weight:700;text-decoration:none;display:inline-block}.cta-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #ff7e0066}.history-section[_ngcontent-%COMP%]{padding:4rem 1rem;background-color:#f9f9f9;overflow:hidden}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--primary-blue);font-size:2.5rem;margin-bottom:4rem;position:relative;font-weight:800}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;width:80px;height:4px;background-color:var(--accent-orange);margin:15px auto 0;border-radius:2px}.timeline[_ngcontent-%COMP%]{position:relative;max-width:1000px;margin:0 auto}.timeline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:4px;background-color:#ddd;top:0;bottom:0;left:50%;margin-left:-2px;border-radius:2px}.timeline-item[_ngcontent-%COMP%]{padding:10px 40px;position:relative;background-color:inherit;width:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards;opacity:0}.timeline-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.timeline-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.timeline-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}.timeline-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s}.left[_ngcontent-%COMP%]{left:0}.right[_ngcontent-%COMP%]{left:50%}.timeline-icon[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;right:-20px;background-color:#fff;border:4px solid var(--accent-orange);top:20px;border-radius:50%;z-index:10;display:flex;align-items:center;justify-content:center;font-size:1.2rem;box-shadow:0 0 0 4px #fff,inset 0 2px #00000014}.right[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{left:-20px}.timeline-content[_ngcontent-%COMP%]{padding:20px 30px;background-color:#fff;position:relative;border-radius:8px;box-shadow:0 5px 15px #0000000d;transition:transform .3s,box-shadow .3s;border-left:4px solid var(--primary-blue)}.timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #0000001a}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left:none;border-right:4px solid var(--primary-blue)}.date[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#999;font-weight:700;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.timeline-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:1.4rem}.timeline-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6}@media(max-width:768px){.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem}.timeline[_ngcontent-%COMP%]:after{left:31px}.timeline-item[_ngcontent-%COMP%]{width:100%;padding-left:70px;padding-right:25px}.timeline-item.right[_ngcontent-%COMP%]{left:0}.left[_ngcontent-%COMP%]:after, .right[_ngcontent-%COMP%]:after{left:21px}.timeline-icon[_ngcontent-%COMP%]{left:11px!important;right:auto}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-right:none;border-left:4px solid var(--primary-blue)}}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}0%{opacity:0;transform:translateY(20px)}}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}0%{opacity:0}}']})};var UB=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(de(zo),de(Di))};static \u0275dir=Ut({type:n})}return n})(),UZ=(()=>{class n extends UB{static \u0275fac=(()=>{let t;return function(i){return(t||(t=lc(n)))(i||n)}})();static \u0275dir=Ut({type:n,features:[Yr]})}return n})(),mR=new Z("");var BZ={provide:mR,useExisting:_s(()=>Ad),multi:!0};function jZ(){let n=Ir()?Ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var $Z=new Z(""),Ad=(()=>{class n extends UB{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!jZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(de(zo),de(Di),de($Z,8))};static \u0275dir=Ut({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&re("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ml([BZ]),Yr]})}return n})();function gR(n){return n==null||yR(n)===0}function yR(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var _R=new Z(""),vR=new Z(""),HZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,no=class{static min(e){return qZ(e)}static max(e){return zZ(e)}static required(e){return GZ(e)}static requiredTrue(e){return WZ(e)}static email(e){return KZ(e)}static minLength(e){return QZ(e)}static maxLength(e){return YZ(e)}static pattern(e){return JZ(e)}static nullValidator(e){return BB()}static compose(e){return GB(e)}static composeAsync(e){return KB(e)}};function qZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function zZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function GZ(n){return gR(n.value)?{required:!0}:null}function WZ(n){return n.value===!0?null:{required:!0}}function KZ(n){return gR(n.value)||HZ.test(n.value)?null:{email:!0}}function QZ(n){return e=>{let t=e.value?.length??yR(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function YZ(n){return e=>{let t=e.value?.length??yR(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function JZ(n){if(!n)return BB;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(gR(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function BB(n){return null}function jB(n){return n!=null}function $B(n){return Go(n)?Ft(n):n}function HB(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function qB(n,e){return e.map(t=>t(n))}function XZ(n){return!n.validate}function zB(n){return n.map(e=>XZ(e)?e:t=>e.validate(t))}function GB(n){if(!n)return null;let e=n.filter(jB);return e.length==0?null:function(t){return HB(qB(t,e))}}function WB(n){return n!=null?GB(zB(n)):null}function KB(n){if(!n)return null;let e=n.filter(jB);return e.length==0?null:function(t){let r=qB(t,e).map($B);return DI(r).pipe(We(HB))}}function QB(n){return n!=null?KB(zB(n)):null}function PB(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function YB(n){return n._rawValidators}function JB(n){return n._rawAsyncValidators}function lR(n){return n?Array.isArray(n)?n:[n]:[]}function AE(n,e){return Array.isArray(n)?n.includes(e):n===e}function NB(n,e){let t=lR(e);return lR(n).forEach(i=>{AE(t,i)||t.push(i)}),t}function kB(n,e){return lR(e).filter(t=>!AE(n,t))}var RE=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=WB(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},uu=class extends RE{name;get formDirective(){return null}get path(){return null}},lu=class extends RE{_parent=null;name=null;valueAccessor=null},PE=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var OE=(()=>{class n extends PE{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(de(lu,2))};static \u0275dir=Ut({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Yr]})}return n})(),XB=(()=>{class n extends PE{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(de(uu,10))};static \u0275dir=Ut({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&fn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Yr]})}return n})();var kp="VALID",DE="INVALID",Cd="PENDING",Mp="DISABLED",wa=class{},NE=class extends wa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},xp=class extends wa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Op=class extends wa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sd=class extends wa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},dR=class extends wa{source;constructor(e){super(),this.source=e}},Lp=class extends wa{source;constructor(e){super(),this.source=e}};function ER(n){return(FE(n)?n.validators:n)||null}function ZZ(n){return Array.isArray(n)?WB(n):n||null}function IR(n,e){return(FE(e)?e.asyncValidators:n)||null}function eee(n){return Array.isArray(n)?QB(n):n||null}function FE(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ZB(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function ej(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var Dd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Vt(this.statusReactive)}set status(e){Vt(()=>this.statusReactive.set(e))}_status=Er(()=>this.statusReactive());statusReactive=Pe(void 0);get valid(){return this.status===kp}get invalid(){return this.status===DE}get pending(){return this.status==Cd}get disabled(){return this.status===Mp}get enabled(){return this.status!==Mp}errors;get pristine(){return Vt(this.pristineReactive)}set pristine(e){Vt(()=>this.pristineReactive.set(e))}_pristine=Er(()=>this.pristineReactive());pristineReactive=Pe(!0);get dirty(){return!this.pristine}get touched(){return Vt(this.touchedReactive)}set touched(e){Vt(()=>this.touchedReactive.set(e))}_touched=Er(()=>this.touchedReactive());touchedReactive=Pe(!1);get untouched(){return!this.touched}_events=new wt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(NB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kB(e,this._rawAsyncValidators))}hasValidator(e){return AE(this._rawValidators,e)}hasAsyncValidator(e){return AE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Op(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Op(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new xp(!0,r))}markAsPending(e={}){this.status=Cd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mp,this.errors=null,this._forEachChild(i=>{i.disable(ae(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new NE(this.value,r)),this._events.next(new Sd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=kp,this._forEachChild(r=>{r.enable(ae(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kp||this.status===Cd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new NE(this.value,t)),this._events.next(new Sd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mp:kp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Cd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=$B(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?Mp:this.errors?DE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cd)?Cd:this._anyControlsHaveStatus(DE)?DE:kp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new xp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Op(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FE(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ZZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=eee(this._rawAsyncValidators)}},kE=class extends Dd{constructor(e,t,r){super(ER(t),IR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ej(this,!0,e),Object.keys(e).forEach(r=>{ZB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ae(U({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Lp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hR=class extends kE{};var LE=new Z("",{factory:()=>VE}),VE="always";function tj(n,e){return[...e.path,n]}function fR(n,e,t=VE){wR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),nee(n,e),iee(n,e),ree(n,e),tee(n,e)}function MB(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ME(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tee(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function wR(n,e){let t=YB(n);e.validator!==null?n.setValidators(PB(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=JB(n);e.asyncValidator!==null?n.setAsyncValidators(PB(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ME(e._rawValidators,i),ME(e._rawAsyncValidators,i)}function xE(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=YB(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=JB(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return ME(e._rawValidators,r),ME(e._rawAsyncValidators,r),t}function nee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&nj(n,e)})}function ree(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&nj(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function nj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iee(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function see(n,e){n==null,wR(n,e)}function oee(n,e){return xE(n,e)}function rj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function aee(n){return Object.getPrototypeOf(n.constructor)===UZ}function cee(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ij(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ad?t=s:aee(s)?r=s:i=s}),i||r||t||null}function uee(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xB(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function OB(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Fp=class extends Dd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(ER(t),IR(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(OB(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Lp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){OB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lee=n=>n instanceof Fp;var dee={provide:lu,useExisting:_s(()=>TR)},LB=Promise.resolve(),TR=(()=>{class n extends lu{_changeDetectorRef;callSetDisabledState;control=new Fp;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ij(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){LB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&yl(r);LB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?tj(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(de(uu,9),de(_R,10),de(vR,10),de(mR,10),de(gl,8),de(LE,8))};static \u0275dir=Ut({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ml([dee]),Yr,Si]})}return n})();var sj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var pR=class extends Dd{constructor(e,t,r){super(ER(t),IR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ej(this,!1,e),e.forEach((r,i)=>{ZB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],ae(U({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Lp(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var hee=(()=>{class n extends uu{callSetDisabledState;get submitted(){return Vt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Er(()=>this._submittedReactive());_submittedReactive=Pe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(xE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return fR(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){MB(t.control||null,t,!1),uee(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,cee(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new dR(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(MB(r||null,t),lee(i)&&(fR(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);see(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&oee(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wR(this.form,this),this._oldForm&&xE(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(de(_R,10),de(vR,10),de(LE,8))};static \u0275dir=Ut({type:n,features:[Yr,Si]})}return n})();var oj=new Z("");var fee={provide:lu,useExisting:_s(()=>bR)},bR=(()=>{class n extends lu{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new vt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ij(this,s)}ngOnChanges(t){this._added||this._setUpControl(),rj(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return tj(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(de(uu,13),de(_R,10),de(vR,10),de(mR,10),de(oj,8))};static \u0275dir=Ut({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ml([fee]),Yr,Si]})}return n})();var pee={provide:uu,useExisting:_s(()=>CR)},CR=(()=>{class n extends hee{form=null;ngSubmit=new vt;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=lc(n)))(i||n)}})();static \u0275dir=Ut({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&re("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ml([pee]),Yr]})}return n})();var aj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=vr({type:n});static \u0275inj=tr({})}return n})();function VB(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var cj=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return VB(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new kE(i,s)}record(t,r=null){let i=this._reduceControls(t);return new hR(i,r)}control(t,r,i){let s={};return this.useNonNullable?(VB(r)?s=r:(s.validators=r,s.asyncValidators=i),new Fp(t,ae(U({},s),{nonNullable:!0}))):new Fp(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new pR(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Fp)return t;if(t instanceof Dd)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:LE,useValue:t.callSetDisabledState??VE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vr({type:n});static \u0275inj=tr({imports:[aj]})}return n})(),uj=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:oj,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:LE,useValue:t.callSetDisabledState??VE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vr({type:n});static \u0275inj=tr({imports:[aj]})}return n})();var BE=class n{firestore;reservationsSignal=Pe([]);unsubscribe=null;constructor(){let e;try{e=Ar()}catch{e=Os(di.firebase)}this.firestore=ru(e);let t=ns(this.firestore,"reservations");this.unsubscribe=yd(t,r=>{let i=r.docs.map(s=>U({id:s.id},s.data()));this.reservationsSignal.set(i)},r=>{console.error("Error reading reservations:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getReservations(){return this.reservationsSignal}async addReservation(e){let t=ns(this.firestore,"reservations");return await gd(t,e)}async deleteReservation(e){let t=rs(this.firestore,`reservations/${e}`);return await md(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rd=class n{firestore;dogsSignal=Pe([]);unsubscribe=null;constructor(){let e;try{e=Ar()}catch{e=Os(di.firebase)}this.firestore=ru(e)}subscribeToUserDogs(e){this.unsubscribe&&this.unsubscribe();let t=ns(this.firestore,"dogs"),r=gU(t,yU("userId","==",e));this.unsubscribe=yd(r,i=>{let s=i.docs.map(o=>U({id:o.id},o.data()));this.dogsSignal.set(s)},i=>{console.error("Error reading dogs:",i)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getDogs(){return this.dogsSignal}async addDog(e){let t=ns(this.firestore,"dogs");return await gd(t,e)}async deleteDog(e){let t=rs(this.firestore,`dogs/${e}`);return await md(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};function mee(n,e){if(n&1&&(x(0,"div",36),V(1),O()),n&2){let t=e.$implicit;j(),pn(" \u{1F43E} ",t," ")}}function gee(n,e){if(n&1&&(x(0,"div",34),_e(1,mee,2,1,"div",35),O()),n&2){let t=X().$implicit;j(),Q("ngForOf",t.selectedDogs)}}function yee(n,e){if(n&1&&(x(0,"li",31)(1,"span",32),V(2),O(),_e(3,gee,2,1,"div",33),O()),n&2){let t=e.$implicit;j(2),qe(t.userName),j(),Q("ngIf",t.selectedDogs&&t.selectedDogs.length)}}function _ee(n,e){if(n&1&&(x(0,"div",29)(1,"ul"),_e(2,yee,4,2,"li",30),O()()),n&2){let t=X(2).$implicit;j(2),Q("ngForOf",t.reservations)}}function vee(n,e){if(n&1){let t=Fe();x(0,"div",25)(1,"button",26),re("click",function(){ue(t);let i=X().$implicit,s=X(2);return le(s.toggleAttendees(i.id))}),x(2,"span"),V(3),O(),x(4,"span",27),V(5,"\u25BC"),O()(),_e(6,_ee,3,1,"div",28),O()}if(n&2){let t=X().$implicit,r=X(2);j(3),pn("Ver asistentes (",t.reservations.length,")"),j(),fn("open",r.expandedSlots().has(t.id)),j(2),Q("ngIf",r.expandedSlots().has(t.id))}}function Eee(n,e){if(n&1){let t=Fe();x(0,"button",37),re("click",function(){ue(t);let i=X().$implicit,s=X(2);return le(s.cancelSlot(i))}),V(1," Cancelar Reserva "),O()}}function Iee(n,e){if(n&1){let t=Fe();x(0,"button",38),re("click",function(){ue(t);let i=X().$implicit,s=X(2);return le(s.bookSlot(i))}),V(1),O()}if(n&2){let t=X().$implicit;Q("disabled",t.currentBookings>=t.maxBookings),j(),pn(" ",t.currentBookings>=t.maxBookings?"Completo":"Reservar"," ")}}function wee(n,e){if(n&1&&(x(0,"div",12)(1,"div",13)(2,"span",14),V(3),O()(),x(4,"div",15)(5,"div",16)(6,"span",17),V(7,"Disponibilidad:"),O(),x(8,"span",18),V(9),O()(),x(10,"div",19),He(11,"div",20),O()(),_e(12,vee,7,4,"div",21),x(13,"div",22),_e(14,Eee,2,0,"button",23)(15,Iee,2,2,"button",24),O()()),n&2){let t=e.$implicit;fn("full",t.currentBookings>=t.maxBookings),j(3),Uh("",t.startTime," - ",t.endTime),j(6),Uh("",t.currentBookings," / ",t.maxBookings),j(2),pl("width",t.currentBookings/t.maxBookings*100,"%"),j(),Q("ngIf",t.reservations&&t.reservations.length>0),j(2),Q("ngIf",t.isBookedByCurrentUser),j(),Q("ngIf",!t.isBookedByCurrentUser)}}function Tee(n,e){if(n&1&&(x(0,"div")(1,"div",6)(2,"h3",7),V(3),x(4,"span",8),V(5),Pi(6,"date"),O()(),x(7,"span",9),V(8),O()(),x(9,"div",10),_e(10,wee,16,11,"div",11),O()()),n&2){let t=e.$implicit;j(3),pn(" ",t.day," "),j(2),qe(Ni(6,8,t.slots[0].date,"dd/MM")),j(2),fn("morning",t.period==="Ma\xF1ana")("afternoon",t.period==="Tarde"),j(),pn(" ",t.period," "),j(2),Q("ngForOf",t.slots)}}function bee(n,e){if(n&1){let t=Fe();x(0,"div",48)(1,"p"),V(2,"\u26A0\uFE0F No tienes perros registrados."),O(),x(3,"a",49),re("click",function(){ue(t);let i=X(2);return le(i.closeModal())}),V(4,"Ir a mi perfil para a\xF1adir uno"),O()()}}function Cee(n,e){if(n&1){let t=Fe();x(0,"label",50)(1,"input",51),re("change",function(){let i=ue(t).$implicit,s=X(2);return le(s.toggleDogSelection(i.name))}),O(),He(2,"span",52),x(3,"span",53),V(4),O()()}if(n&2){let t=e.$implicit,r=X(2);j(),Q("checked",r.selectedDogIds.has(t.name)),j(3),qe(t.name)}}function See(n,e){if(n&1){let t=Fe();x(0,"div",39),re("click",function(){ue(t);let i=X();return le(i.closeModal())}),x(1,"div",40),re("click",function(i){return ue(t),le(i.stopPropagation())}),x(2,"h3"),V(3,"Confirmar Reserva"),O(),x(4,"p"),V(5,"\xBFQu\xE9 d\xEDa? "),x(6,"strong"),V(7),O(),V(8," a las "),x(9,"strong"),V(10),O()(),x(11,"div",41)(12,"p"),V(13,"Selecciona los perretes que vendr\xE1n:"),O(),_e(14,bee,5,0,"div",42),x(15,"div",43),_e(16,Cee,5,2,"label",44),O()(),x(17,"div",45)(18,"button",46),re("click",function(){ue(t);let i=X();return le(i.closeModal())}),V(19,"Cancelar"),O(),x(20,"button",47),re("click",function(){ue(t);let i=X();return le(i.confirmBooking())}),V(21," Confirmar "),O()()()()}if(n&2){let t=X();j(7),qe(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.day),j(3),qe(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.startTime),j(4),Q("ngIf",t.myDogs().length===0),j(2),Q("ngForOf",t.myDogs()),j(4),Q("disabled",t.myDogs().length>0&&t.selectedDogIds.size===0)}}var jE=class n{authService=B(Mr);reservationService=B(BE);dogService=B(Rd);isModalOpen=!1;isSubmitting=Pe(!1);selectedSlotForBooking=null;myDogs=this.dogService.getDogs();selectedDogIds=new Set;expandedSlots=Pe(new Set);selectedWeek=Pe("current");staticSlots=this.generateSlotsDefinition();constructor(){sl(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}toggleWeek(e){this.selectedWeek.set(e),this.expandedSlots.set(new Set)}getDatesForWeek(e){let t={},r=new Date,i=r.getDate()-(r.getDay()||7)+1+e*7,s=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"];for(let c=0;c<7;c++){let d=new Date(r.setDate(i+c)),h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),I=String(d.getDate()).padStart(2,"0");t[s[c]]=`${h}-${m}-${I}`}let o=new Date,a=o.getDay()||7;o.setDate(o.getDate()-a+1+e*7),o.setHours(0,0,0,0);for(let c=0;c<7;c++){let d=new Date(o);d.setDate(o.getDate()+c);let h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),I=String(d.getDate()).padStart(2,"0");t[s[c]]=`${h}-${m}-${I}`}return t}slots=Er(()=>{let e=this.reservationService.getReservations()(),t=this.authService.currentUserSignal(),i=this.selectedWeek()==="current"?0:1,s=this.getDatesForWeek(i);return this.staticSlots.map(o=>{let a=s[o.day],c=e.filter(m=>m.slotId===o.id&&m.date===a),d=c.reduce((m,I)=>{let S=I.selectedDogs?.length||1;return m+S},0),h=t?c.find(m=>m.userId===t.uid):void 0;return ae(U({},o),{date:a,currentBookings:d,isBookedByCurrentUser:!!h,userReservationId:h?.id,reservations:c})})});groupedSlots=Er(()=>{let e=this.slots();return["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes"].map(r=>{let i=e.filter(a=>a.day===r);if(i.length===0)return null;let o=parseInt(i[0].startTime.split(":")[0])<16?"Ma\xF1ana":"Tarde";return{day:r,period:o,slots:i}}).filter(r=>r!==null)});generateSlotsDefinition(){let e=[],t=1;return["Lunes","Jueves"].forEach(s=>{e.push({id:t++,day:s,startTime:"10:00",endTime:"11:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"11:30",endTime:"13:00",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"13:00",endTime:"14:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1})}),["Martes","Mi\xE9rcoles","Viernes"].forEach(s=>{e.push({id:t++,day:s,startTime:"16:30",endTime:"18:00",currentBookings:0,maxBookings:7,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"18:00",endTime:"19:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"19:30",endTime:"21:00",currentBookings:0,maxBookings:6,isBookedByCurrentUser:!1})}),e}bookSlot(e){if(!this.authService.currentUserSignal()){alert("Debes iniciar sesi\xF3n para reservar.");return}if(e.currentBookings>=e.maxBookings){alert("Esta clase est\xE1 completa.");return}if(e.isBookedByCurrentUser){alert("Ya tienes una reserva en este horario.");return}this.selectedSlotForBooking=e,this.selectedDogIds.clear(),this.isModalOpen=!0}toggleAttendees(e){let t=new Set(this.expandedSlots());t.has(e)?t.delete(e):t.add(e),this.expandedSlots.set(t)}toggleDogSelection(e){let t=new Set(this.selectedDogIds);t.has(e)?t.delete(e):t.add(e),this.selectedDogIds=t}closeModal(){this.isModalOpen=!1,this.selectedSlotForBooking=null,this.isSubmitting.set(!1)}async confirmBooking(){if(!this.selectedSlotForBooking||this.isSubmitting())return;if(this.selectedDogIds.size===0){alert("Por favor, selecciona al menos un perro.");return}let e=this.authService.currentUserSignal();if(!e)return;let t=this.slots().find(r=>r.id===this.selectedSlotForBooking.id);if(t){let r=this.selectedDogIds.size;if(t.currentBookings+r>t.maxBookings){alert(`No hay suficientes plazas. Intentas reservar para ${r} perro(s) pero solo quedan ${t.maxBookings-t.currentBookings} plazas.`);return}}this.isSubmitting.set(!0);try{let r=Array.from(this.selectedDogIds);await this.reservationService.addReservation({slotId:this.selectedSlotForBooking.id,userId:e.uid,userName:e.displayName||"Usuario",userEmail:e.email||"",day:this.selectedSlotForBooking.day,startTime:this.selectedSlotForBooking.startTime,date:this.selectedSlotForBooking.date,selectedDogs:r,createdAt:Date.now()}),this.closeModal()}catch(r){console.error("Error al reservar:",r),alert("Hubo un error al realizar la reserva."),this.isSubmitting.set(!1)}}async cancelSlot(e){if(e.userReservationId&&confirm("\xBFQuieres cancelar tu reserva para esta clase?"))try{await this.reservationService.deleteReservation(e.userReservationId)}catch(t){console.error(t),alert("Error al cancelar.")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-gestionar-reservas"]],decls:12,vars:6,consts:[[1,"reservations-container"],[1,"subtitle"],[1,"week-selector"],[3,"click"],[4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],[1,"header-container"],[1,"day-header"],[1,"date-label"],[1,"period-badge"],[1,"slots-grid"],["class","slot-card",3,"full",4,"ngFor","ngForOf"],[1,"slot-card"],[1,"slot-time"],[1,"time"],[1,"slot-status"],[1,"crowdedness"],[1,"label"],[1,"value"],[1,"progress-bar"],[1,"fill"],["class","attendees-section",4,"ngIf"],[1,"actions"],["class","book-btn cancel-btn",3,"click",4,"ngIf"],["class","book-btn",3,"disabled","click",4,"ngIf"],[1,"attendees-section"],[1,"toggle-attendees-btn",3,"click"],[1,"chevron"],["class","attendees-list",4,"ngIf"],[1,"attendees-list"],["class","attendee-item",4,"ngFor","ngForOf"],[1,"attendee-item"],[1,"attendee-name"],["class","attendee-dogs-container",4,"ngIf"],[1,"attendee-dogs-container"],["class","attendee-dog-single",4,"ngFor","ngForOf"],[1,"attendee-dog-single"],[1,"book-btn","cancel-btn",3,"click"],[1,"book-btn",3,"click","disabled"],[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"dog-selection"],["class","no-dogs-warning",4,"ngIf"],[1,"dog-checkboxes"],["class","dog-checkbox",4,"ngFor","ngForOf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"no-dogs-warning"],["routerLink","/perfil",3,"click"],[1,"dog-checkbox"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"dog-label"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"h2"),V(2,"Gestionar Reservas"),O(),x(3,"p",1),V(4,"Selecciona una franja horaria para reservar tu clase de Agility."),O(),x(5,"div",2)(6,"button",3),re("click",function(){return r.toggleWeek("current")}),V(7," Semana Actual "),O(),x(8,"button",3),re("click",function(){return r.toggleWeek("next")}),V(9," Semana Siguiente "),O()(),_e(10,Tee,11,11,"div",4),O(),_e(11,See,22,5,"div",5)),t&2&&(j(6),fn("active",r.selectedWeek()==="current"),j(2),fn("active",r.selectedWeek()==="next"),j(2),Q("ngForOf",r.groupedSlots()),j(),Q("ngIf",r.isModalOpen))},dependencies:[Dn,Tr,xn,UE,pc],styles:[".reservations-container[_ngcontent-%COMP%]{padding:2rem 0}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:2rem}.week-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:3rem}.week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:2px solid var(--primary-blue);color:var(--primary-blue);padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:600;transition:all .2s}.week-selector[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%], .week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--primary-blue);color:#fff}.date-label[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-left:10px;font-weight:400}.header-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto 1rem;border-bottom:2px solid var(--secondary-yellow);padding-bottom:.5rem;display:flex;align-items:center;gap:1rem}.day-header[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);font-size:1.5rem}.period-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:999px;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.period-badge.morning[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00;border:1px solid #ffe0b2}.period-badge.afternoon[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;max-width:900px;margin:0 auto 2rem}.slot-card[_ngcontent-%COMP%]{background:var(--white);border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000000d;border:1px solid rgba(0,0,0,.05);display:flex;flex-direction:column;gap:1.25rem;transition:transform .2s ease}.slot-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.slot-time[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:1.1rem}.day[_ngcontent-%COMP%]{color:var(--primary-blue)}.slot-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.crowdedness[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:var(--text-light)}.progress-bar[_ngcontent-%COMP%]{height:6px;background-color:#eee;border-radius:3px;overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background-color:var(--secondary-yellow);transition:width .3s ease}.slot-card.full[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{background-color:#e57373}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.book-btn[_ngcontent-%COMP%]{flex:1;background-color:var(--primary-blue);color:var(--white);border:none;padding:.75rem;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.book-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:color-mix(in srgb,var(--primary-blue),black 10%)}.book-btn[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background-color:#ef5350}.cancel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#d32f2f}.attendees-section[_ngcontent-%COMP%]{margin:10px 0}.toggle-attendees-btn[_ngcontent-%COMP%]{width:100%;background:none;border:1px solid #ddd;border-radius:6px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:.9rem;color:#555;background-color:#fafafa;transition:background .2s}.toggle-attendees-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.chevron[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.chevron.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.attendees-list[_ngcontent-%COMP%]{margin-top:5px;padding:10px;background-color:#f5f7fa;border-radius:6px;font-size:.9rem;border:1px solid #eee}.attendees-title[_ngcontent-%COMP%]{margin:0 0 5px;font-weight:600;color:#555;font-size:.85rem}.attendees-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.attendee-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:4px;border-bottom:1px dotted #ddd;padding-bottom:2px}.attendee-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.attendee-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:2px}.attendee-dogs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding-left:10px}.attendee-dog-single[_ngcontent-%COMP%]{font-size:.85rem;color:#444;background-color:#e8f5e9;padding:2px 6px;border-radius:4px;width:fit-content}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--primary-blue)}.dog-selection[_ngcontent-%COMP%]{margin:20px 0}.dog-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.dog-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:#f0f0f0;padding:8px 12px;border-radius:20px;transition:background .2s}.dog-checkbox[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.dog-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.dog-checkbox[_ngcontent-%COMP%]:has(input:checked){background-color:var(--primary-blue);color:#fff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn-cancel[_ngcontent-%COMP%]{background:none;border:1px solid #ddd;padding:8px 16px;border-radius:6px;cursor:pointer}.btn-confirm[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:700}.btn-confirm[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.no-dogs-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:10px;border-radius:6px;font-size:.9rem;margin-bottom:10px}.no-dogs-warning[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#856404;text-decoration:underline}"]})};var $E=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-contacto"]],decls:47,vars:0,consts:[[1,"contact-container"],[1,"contact-header"],[1,"subtitle"],[1,"contact-wrapper"],[1,"info-column"],[1,"info-card"],[1,"info-item"],[1,"icon-box"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-content"],["href","https://wa.me/34633484345","target","_blank","rel","noopener noreferrer",1,"whatsapp-btn"],[1,"secondary-text","phone-number"],[1,"divider"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],["href","mailto:agilityasturias@gmail.com",1,"email-link"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"map-column"],[1,"map-card"],["src",pT`https://maps.google.com/maps?q=Agility+Asturias,+Langreo&t=&z=15&ie=UTF8&iwloc=&output=embed`,"width","100%","height","100%","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,r){t&1&&(nt(0,"div",0)(1,"div",1)(2,"h2"),V(3,"Cont\xE1ctanos"),dt(),nt(4,"p",2),V(5,"Estamos deseando conocerte a ti y a tu perro"),dt()(),nt(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),nl(),nt(11,"svg",8),Ri(12,"path",9),dt()(),rl(),nt(13,"div",10)(14,"h3"),V(15,"Tel\xE9fono / WhatsApp"),dt(),nt(16,"a",11),V(17," Chat en WhatsApp "),dt(),nt(18,"p",12),V(19,"633 48 43 45"),dt()()(),Ri(20,"div",13),nt(21,"div",6)(22,"div",7),nl(),nt(23,"svg",8),Ri(24,"path",14)(25,"polyline",15),dt()(),rl(),nt(26,"div",10)(27,"h3"),V(28,"Correo Electr\xF3nico"),dt(),nt(29,"a",16),V(30,"agilityasturias@gmail.com"),dt()()(),Ri(31,"div",13),nt(32,"div",6)(33,"div",7),nl(),nt(34,"svg",8),Ri(35,"path",17)(36,"circle",18),dt()(),rl(),nt(37,"div",10)(38,"h3"),V(39,"Ubicaci\xF3n"),dt(),nt(40,"address"),V(41," Antig\xFCo Campo de f\xFAtbol La Salle"),Ri(42,"br"),V(43," Langreo, Asturias, CP: 33939 "),dt()()()()(),nt(44,"div",19)(45,"div",20),Ri(46,"iframe",21),dt()()()())},styles:[".contact-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.contact-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}h2[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:2.5rem;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--text-light)}.contact-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:stretch}.info-card[_ngcontent-%COMP%]{background:var(--white);padding:2.5rem;border-radius:12px;box-shadow:0 4px 20px #0000000d;height:100%;display:flex;flex-direction:column;justify-content:center}.info-item[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:flex-start}.icon-box[_ngcontent-%COMP%]{background-color:#e3f2fd;color:var(--primary-blue);width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.info-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-light);margin:0 0 .5rem;font-weight:600}.phone-number[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--text-main);margin-top:.5rem;letter-spacing:.5px}.whatsapp-btn[_ngcontent-%COMP%]{display:inline-block;background-color:#25d366;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:500;text-decoration:none;transition:background-color .2s;margin-bottom:.25rem}.whatsapp-btn[_ngcontent-%COMP%]:hover{background-color:#1ebc57}.email-link[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:1.1rem;font-weight:500;text-decoration:none}.email-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.secondary-text[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);margin-top:.25rem}address[_ngcontent-%COMP%]{font-style:normal;color:var(--text-main);line-height:1.6;font-size:1.1rem}.divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:2rem 0}.map-card[_ngcontent-%COMP%]{height:100%;min-height:400px;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000000d}@media(max-width:900px){.contact-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-card[_ngcontent-%COMP%]{min-height:300px}.info-card[_ngcontent-%COMP%]{padding:2rem}}@media(max-width:600px){h2[_ngcontent-%COMP%]{font-size:2rem}.contact-container[_ngcontent-%COMP%]{padding:1rem .5rem}.info-card[_ngcontent-%COMP%]{padding:1.5rem}.info-item[_ngcontent-%COMP%]{gap:1rem}.icon-box[_ngcontent-%COMP%]{width:40px;height:40px}.phone-number[_ngcontent-%COMP%]{font-size:1.25rem}.whatsapp-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};function Dee(n,e){if(n&1){let t=Fe();x(0,"div",5),re("click",function(){let i=ue(t).index,s=X();return le(s.openLightbox(i))}),He(1,"img",6),x(2,"div",7)(3,"span"),V(4),O()()()}if(n&2){let t=e.$implicit;j(),Q("src",t.url,hn)("alt",t.alt),j(3),qe(t.alt)}}function Aee(n,e){if(n&1){let t=Fe();x(0,"div",8),re("click",function(){ue(t);let i=X();return le(i.closeLightbox())}),x(1,"div",9),re("click",function(i){return ue(t),le(i.stopPropagation())}),x(2,"button",10),re("click",function(){ue(t);let i=X();return le(i.closeLightbox())}),V(3,"\xD7"),O(),x(4,"button",11),re("click",function(i){ue(t);let s=X();return le(s.prevImage(i))}),V(5,"\u276E"),O(),He(6,"img",12),x(7,"button",13),re("click",function(i){ue(t);let s=X();return le(s.nextImage(i))}),V(8,"\u276F"),O(),x(9,"div",14),V(10),O()()()}if(n&2){let t=X();j(6),Q("src",t.images()[t.currentImageIndex()].url,hn)("alt",t.images()[t.currentImageIndex()].alt),j(4),pn(" ",t.images()[t.currentImageIndex()].alt," ")}}var HE=class n{images=Pe([{url:"Images/Perros/Ana y Pompa.jpeg",alt:"Ana y Pompa"},{url:"Images/Perros/Carysse.jpeg",alt:"Carysse"},{url:"Images/Perros/Cris y Peca.jpeg",alt:"Cris y Peca"},{url:"Images/Perros/Diego Tuco y Ponga.jpeg",alt:"Diego Tuco y Ponga"},{url:"Images/Perros/Fiti\xF1o y Fits.jpeg",alt:"Fiti\xF1o y Fits"},{url:"Images/Perros/Golti.jpeg",alt:"Golti"},{url:"Images/Perros/Helena y Pumba.jpeg",alt:"Helena y Pumba"},{url:"Images/Perros/Jes\xFAs y Ginebra.jpeg",alt:"Jes\xFAs y Ginebra"},{url:"Images/Perros/Kinder.jpeg",alt:"Kinder"},{url:"Images/Perros/Leah.jpeg",alt:"Leah"},{url:"Images/Perros/Lyan y Boo.jpeg",alt:"Lyan y Boo"},{url:"Images/Perros/Lyan y Shaggy.jpeg",alt:"Lyan y Shaggy"},{url:"Images/Perros/Magda y Balto.jpeg",alt:"Magda y Balto"},{url:"Images/Perros/Marina-Chris Dafne.jpeg",alt:"Marina-Chris Dafne"},{url:"Images/Perros/Merle y Noly.jpeg",alt:"Merle y Noly"},{url:"Images/Perros/Moka.jpeg",alt:"Moka"},{url:"Images/Perros/Nala y Rosa.jpeg",alt:"Nala y Rosa"},{url:"Images/Perros/Narcea.jpeg",alt:"Narcea"},{url:"Images/Perros/Pompa.jpeg",alt:"Pompa"},{url:"Images/Perros/Pumba.jpeg",alt:"Pumba"},{url:"Images/Perros/Raylee.jpeg",alt:"Raylee"},{url:"Images/Perros/Sami.jpeg",alt:"Sami"},{url:"Images/Perros/Sami H.jpeg",alt:"Sami H"}]);lightboxOpen=Pe(!1);currentImageIndex=Pe(0);constructor(){this.shuffleImages()}shuffleImages(){let e=this.images();for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}this.images.set([...e])}openLightbox(e){this.currentImageIndex.set(e),this.lightboxOpen.set(!0),document.body.style.overflow="hidden"}closeLightbox(){this.lightboxOpen.set(!1),document.body.style.overflow="auto"}nextImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t+1)%r)}prevImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t-1+r)%r)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-galeria"]],decls:8,vars:3,consts:[[1,"gallery-container"],[1,"subtitle"],[1,"gallery-masonry"],["class","gallery-item",3,"click",4,"ngFor","ngForOf"],["class","lightbox",3,"click",4,"ngIf"],[1,"gallery-item",3,"click"],["loading","lazy",3,"src","alt"],[1,"overlay"],[1,"lightbox",3,"click"],[1,"lightbox-content",3,"click"],[1,"close-btn",3,"click"],[1,"nav-btn","prev",3,"click"],[1,"lightbox-img",3,"src","alt"],[1,"nav-btn","next",3,"click"],[1,"lightbox-caption"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"h2"),V(2,"Galer\xEDa"),O(),x(3,"p",1),V(4,"Momentos destacados de nuestro equipo."),O(),x(5,"div",2),_e(6,Dee,5,3,"div",3),O()(),_e(7,Aee,11,3,"div",4)),t&2&&(j(5),Q("@listAnimation",r.images().length),j(),Q("ngForOf",r.images()),j(),Q("ngIf",r.lightboxOpen()))},dependencies:[Dn,Tr,xn],styles:[".gallery-container[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:1400px;margin:0 auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--primary-blue);font-size:2.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:3rem;font-size:1.1rem}.gallery-masonry[_ngcontent-%COMP%]{column-count:3;column-gap:1.5rem}.gallery-item[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:1.5rem;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;cursor:pointer;position:relative;transition:transform .3s cubic-bezier(.25,.8,.25,1),box-shadow .3s ease}.gallery-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;transition:transform .5s ease}.gallery-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000004d;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.gallery-item[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-weight:600;border:1px solid white;padding:.5rem 1rem;border-radius:20px;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.lightbox[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90vh;display:flex;flex-direction:column;align-items:center}.lightbox-img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;border-radius:4px;box-shadow:0 5px 30px #00000080}.lightbox-caption[_ngcontent-%COMP%]{color:#fff;margin-top:1rem;font-size:1.1rem;font-weight:300}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:none;border:none;color:#fff;font-size:2.5rem;cursor:pointer;line-height:1;padding:0}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#ffffff1a;border:none;color:#fff;font-size:2rem;cursor:pointer;padding:1rem;border-radius:50%;transition:background .2s}.nav-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.prev[_ngcontent-%COMP%]{left:-80px}.next[_ngcontent-%COMP%]{right:-80px}@media(max-width:900px){.gallery-masonry[_ngcontent-%COMP%]{column-count:2}}@media(max-width:600px){.gallery-masonry[_ngcontent-%COMP%]{column-count:1}.nav-btn[_ngcontent-%COMP%]{padding:.5rem;font-size:1.5rem}.prev[_ngcontent-%COMP%]{left:-10px}.next[_ngcontent-%COMP%]{right:-10px}.close-btn[_ngcontent-%COMP%]{top:-30px;right:10px}}"],data:{animation:[xb("listAnimation",[Fb("* => *",[Lb(":enter",[Tc({opacity:0,transform:"translateY(20px)"}),Vb(100,[Ob("0.5s ease-out",Tc({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};var Pd=class n{firestore;competitionsSignal=Pe([]);unsubscribe=null;constructor(){let e;try{e=Ar()}catch{e=Os(di.firebase)}this.firestore=ru(e);let t=ns(this.firestore,"competitions");this.unsubscribe=yd(t,r=>{let i=r.docs.map(s=>U({id:s.id},s.data()));this.competitionsSignal.set(i)},r=>{console.error("Error reading competitions:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getCompetitions(){return this.competitionsSignal}addCompetition(e){let t=ns(this.firestore,"competitions");return gd(t,e)}updateCompetition(e){let t=rs(this.firestore,`competitions/${e.id}`),s=e,{id:r}=s,i=So(s,["id"]);return vU(t,i)}deleteCompetition(e){let t=rs(this.firestore,`competitions/${e}`);return md(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ree(n,e){if(n&1&&(x(0,"span"),V(1),Pi(2,"date"),O()),n&2){let t=X().$implicit;j(),qe(Ni(2,1,t.date,"d"))}}function Pee(n,e){if(n&1){let t=Fe();x(0,"div",8),re("click",function(){let i=ue(t).$implicit,s=X(2);return le(i.isCompetition&&s.openModal(i.competitionDetails))}),_e(1,Ree,3,4,"span",9),O()}if(n&2){let t=e.$implicit;fn("other-month",t.isOtherMonth)("weekend",t.isWeekend)("competition",t.isCompetition),j(),Q("ngIf",!t.isOtherMonth)}}function Nee(n,e){if(n&1&&(x(0,"div",4)(1,"h2"),V(2),O(),x(3,"div",5)(4,"span"),V(5,"L"),O(),x(6,"span"),V(7,"M"),O(),x(8,"span"),V(9,"X"),O(),x(10,"span"),V(11,"J"),O(),x(12,"span"),V(13,"V"),O(),x(14,"span"),V(15,"S"),O(),x(16,"span"),V(17,"D"),O()(),x(18,"div",6),_e(19,Pee,2,7,"div",7),O()()),n&2){let t=e.$implicit;j(2),qe(t.name),j(17),Q("ngForOf",t.days)}}function kee(n,e){if(n&1){let t=Fe();x(0,"div",15)(1,"img",21),re("click",function(){ue(t);let i=X(3);return le(i.expandImage())}),O()()}if(n&2){let t=X(3);j(),Q("src",t.selectedCompetition.cartel,hn)}}function Mee(n,e){if(n&1){let t=Fe();x(0,"div",22),re("click",function(){ue(t);let i=X(3);return le(i.closeImage())}),x(1,"div",23),He(2,"img",24),O()()}if(n&2){let t=X(3);j(2),Q("src",t.selectedCompetition.cartel,hn)}}function xee(n,e){if(n&1&&(x(0,"div",14)(1,"h3"),V(2),O(),x(3,"div",15)(4,"strong"),V(5,"Fecha:"),O(),x(6,"span"),V(7),Pi(8,"date"),O()(),x(9,"div",15)(10,"strong"),V(11,"Cierre Inscripci\xF3n:"),O(),x(12,"span"),V(13),Pi(14,"date"),O()(),x(15,"div",15)(16,"strong"),V(17,"Forma de Pago:"),O(),x(18,"p",16),V(19),O()(),_e(20,kee,2,1,"div",17)(21,Mee,3,1,"div",18),x(22,"div",19)(23,"a",20),V(24," Inscribirse "),O()()()),n&2){let t=X(2);j(2),qe(t.selectedCompetition.lugar),j(5),qe(Ni(8,7,t.selectedCompetition.fechaEvento,"fullDate")),j(6),qe(Ni(14,10,t.selectedCompetition.fechaLimite,"shortDate")),j(6),qe(t.selectedCompetition.formaPago),j(),Q("ngIf",t.selectedCompetition.cartel),j(),Q("ngIf",t.isImageExpanded),j(2),Q("href",t.selectedCompetition.enlace,hn)}}function Oee(n,e){if(n&1){let t=Fe();x(0,"div",10),re("click",function(){ue(t);let i=X();return le(i.closeModal())}),x(1,"div",11),re("click",function(i){return ue(t),le(i.stopPropagation())}),x(2,"button",12),re("click",function(){ue(t);let i=X();return le(i.closeModal())}),V(3,"\xD7"),O(),_e(4,xee,25,13,"div",13),O()()}if(n&2){let t=X();j(4),Q("ngIf",t.selectedCompetition)}}var qE=class n{constructor(e){this.competitionService=e;this.competitions=this.competitionService.getCompetitions()}currentYear=2026;months=[];monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];competitions;selectedCompetition=null;isModalOpen=!1;ngOnInit(){this.generateCalendar()}generateCalendar(){this.months=[];for(let e=0;e<12;e++)this.months.push({name:this.monthNames[e],days:this.getDaysInMonth(e)})}getDaysInMonth(e){let t=[],r=new Date(this.currentYear,e,1),i=(r.getDay()+6)%7;for(let s=0;s<i;s++)t.push({date:new Date(this.currentYear,e,-s),isCompetition:!1,isWeekend:!1,isOtherMonth:!0});for(;r.getMonth()===e;){let s=r.getDay(),o=s===0||s===6,a=r.getFullYear(),c=(r.getMonth()+1).toString().padStart(2,"0"),d=r.getDate().toString().padStart(2,"0"),h=`${a}-${c}-${d}`,m=this.competitions().find(S=>S.fechaEvento===h),I=!!m;t.push({date:new Date(r),isCompetition:I,isWeekend:o,isOtherMonth:!1,competitionDetails:m}),r.setDate(r.getDate()+1)}return t}openModal(e){e&&(this.selectedCompetition=e,this.isModalOpen=!0,document.body.style.overflow="hidden")}closeModal(){this.isModalOpen=!1,this.selectedCompetition=null,this.isImageExpanded=!1,document.body.style.overflow="auto"}isImageExpanded=!1;expandImage(){this.isImageExpanded=!0}closeImage(){this.isImageExpanded=!1}static \u0275fac=function(t){return new(t||n)(de(Pd))};static \u0275cmp=Tt({type:n,selectors:[["app-calendario"]],decls:6,vars:3,consts:[[1,"calendar-container"],[1,"months-grid"],["class","month-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"month-card"],[1,"weekdays"],[1,"days-grid"],["class","day",3,"other-month","weekend","competition","click",4,"ngFor","ngForOf"],[1,"day",3,"click"],[4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],["class","competition-details",4,"ngIf"],[1,"competition-details"],[1,"detail-row"],[1,"payment-info"],["class","detail-row",4,"ngIf"],["class","image-overlay",3,"click",4,"ngIf"],[1,"modal-actions"],["target","_blank",1,"btn-register",3,"href"],["alt","Cartel","title","Click para ampliar",1,"modal-poster",3,"click","src"],[1,"image-overlay",3,"click"],[1,"image-wrapper"],["alt","Cartel Ampliado",3,"src"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"h1"),V(2),O(),x(3,"div",1),_e(4,Nee,20,2,"div",2),O(),_e(5,Oee,5,1,"div",3),O()),t&2&&(j(2),pn("Calendario de Competiciones ",r.currentYear),j(2),Q("ngForOf",r.months),j(),Q("ngIf",r.isModalOpen))},dependencies:[Dn,Tr,xn,pc],styles:[".calendar-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto;text-align:center}h1[_ngcontent-%COMP%]{color:#036;margin-bottom:2rem}.months-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.month-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 5px #0000001a}.month-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#036;font-size:1.2rem;margin-bottom:1rem;text-transform:uppercase}.weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:.5rem;font-weight:700;color:#666}.days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:2px}.day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border-radius:4px;font-size:.9rem;position:relative}.day[_ngcontent-%COMP%]:not(.other-month):hover{background-color:#f0f0f0}.other-month[_ngcontent-%COMP%]{color:#ccc}.weekend[_ngcontent-%COMP%]{background-color:#fff3cd}.competition[_ngcontent-%COMP%]{background-color:#036;color:#fff;cursor:pointer;font-weight:700;transition:transform .2s,background-color .2s}.competition[_ngcontent-%COMP%]:hover{background-color:#004080;transform:scale(1.1);z-index:1;box-shadow:0 2px 4px #0003}.competition.weekend[_ngcontent-%COMP%]{background-color:#036}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 10px 25px #0003;text-align:left;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:2rem;line-height:1;cursor:pointer;color:#666;z-index:10}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.competition-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#036;margin-top:0;border-bottom:2px solid #FFCC00;padding-bottom:.5rem;margin-bottom:1.5rem}.detail-row[_ngcontent-%COMP%]{margin-bottom:1rem}.detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#555;margin-bottom:.25rem}.payment-info[_ngcontent-%COMP%]{margin:0;white-space:pre-wrap;background:#f8f9fa;padding:.5rem;border-radius:4px;font-size:.9rem}.modal-poster[_ngcontent-%COMP%]{width:100%;max-height:300px;object-fit:contain;border-radius:8px;margin-top:.5rem;box-shadow:0 4px 8px #0000001a;cursor:zoom-in;transition:transform .2s}.modal-poster[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;z-index:2000;display:flex;justify-content:center;align-items:center;cursor:zoom-out;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:95vw;max-height:95vh;object-fit:contain;border-radius:4px;box-shadow:0 0 20px #ffffff1a}.modal-actions[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.btn-register[_ngcontent-%COMP%]{display:inline-block;background:#036;color:#fff;padding:.75rem 2rem;border-radius:6px;text-decoration:none;font-weight:700;transition:background .2s}.btn-register[_ngcontent-%COMP%]:hover{background:#004080}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};var Vp=n=>({"is-invalid":n});function Fee(n,e){if(n&1){let t=Fe();x(0,"button",6),re("click",function(){ue(t);let i=X();return le(i.initNewCompetition())}),x(1,"span"),V(2,"+"),O(),V(3," Nueva Competici\xF3n "),O()}}function Lee(n,e){if(n&1){let t=Fe();x(0,"button",7),re("click",function(){ue(t);let i=X();return le(i.toggleView())}),V(1," \u2190 Volver al Listado "),O()}}function Vee(n,e){if(n&1){let t=Fe();x(0,"tr")(1,"td")(2,"strong"),V(3),O()(),x(4,"td"),V(5),Pi(6,"date"),O(),x(7,"td"),V(8),Pi(9,"date"),O(),x(10,"td",14)(11,"button",15),re("click",function(){let i=ue(t).$implicit,s=X(2);return le(s.editCompetition(i))}),V(12," Editar "),O(),x(13,"button",16),re("click",function(){let i=ue(t).$implicit,s=X(2);return le(s.deleteCompetition(i.id))}),V(14," Eliminar "),O()()()}if(n&2){let t=e.$implicit;j(3),qe(t.lugar),j(2),qe(Ni(6,3,t.fechaEvento,"dd/MM/yyyy")),j(3),qe(Ni(9,6,t.fechaLimite,"dd/MM/yyyy"))}}function Uee(n,e){n&1&&(x(0,"tr")(1,"td",17),V(2," No hay competiciones registradas actualmente. "),O()())}function Bee(n,e){if(n&1&&(x(0,"div",8)(1,"div",9)(2,"table",10)(3,"thead")(4,"tr")(5,"th"),V(6,"Lugar"),O(),x(7,"th"),V(8,"Fecha Evento"),O(),x(9,"th"),V(10,"Cierre Inscripci\xF3n"),O(),x(11,"th",11),V(12,"Acciones"),O()()(),x(13,"tbody"),_e(14,Vee,15,9,"tr",12)(15,Uee,3,0,"tr",13),O()()()()),n&2){let t=X();j(14),Q("ngForOf",t.competitions()),j(),Q("ngIf",t.competitions().length===0)}}function jee(n,e){n&1&&(x(0,"div",41),V(1," El lugar del evento es requerido. "),O())}function $ee(n,e){n&1&&(x(0,"div",41),V(1," La fecha del evento es requerida. "),O())}function Hee(n,e){n&1&&(x(0,"div",41),V(1," La fecha l\xEDmite es requerida. "),O())}function qee(n,e){n&1&&(x(0,"div",41),V(1," La forma de pago es requerida. "),O())}function zee(n,e){n&1&&(x(0,"div",41),V(1," Se requiere una URL v\xE1lida (http:// o https://). "),O())}function Gee(n,e){if(n&1&&(x(0,"div",42),He(1,"img",43),O()),n&2){let t=X(2);j(),Q("src",t.f.cartel.value,hn)}}function Wee(n,e){if(n&1){let t=Fe();x(0,"div",18)(1,"h3",19),V(2),O(),x(3,"form",20),re("ngSubmit",function(){ue(t);let i=X();return le(i.onSubmit())}),x(4,"div",21)(5,"label",22),V(6,"Lugar del Evento"),O(),He(7,"input",23),_e(8,jee,2,0,"div",24),O(),x(9,"div",25)(10,"div",26)(11,"label",27),V(12,"Fecha Evento"),O(),He(13,"input",28),_e(14,$ee,2,0,"div",24),O(),x(15,"div",26)(16,"label",29),V(17,"Fecha L\xEDmite de Inscripci\xF3n"),O(),He(18,"input",30),_e(19,Hee,2,0,"div",24),O()(),x(20,"div",21)(21,"label",31),V(22,"Forma de Pago"),O(),He(23,"textarea",32),_e(24,qee,2,0,"div",24),O(),x(25,"div",21)(26,"label",33),V(27,"Enlace Inscripci\xF3n"),O(),He(28,"input",34),_e(29,zee,2,0,"div",24),O(),x(30,"div",21)(31,"label",35),V(32,"Cartel (Imagen)"),O(),x(33,"input",36),re("change",function(i){ue(t);let s=X();return le(s.onFileSelected(i))}),O(),_e(34,Gee,2,1,"div",37),O(),x(35,"div",38)(36,"button",39),V(37),O(),x(38,"button",40),re("click",function(){ue(t);let i=X();return le(i.toggleView())}),V(39," Cancelar "),O()()()()}if(n&2){let t=X();j(2),qe(t.isEditing()?"Editar Competici\xF3n":"Nueva Competici\xF3n"),j(),Q("formGroup",t.competitionForm),j(4),Q("ngClass",fc(14,Vp,t.submitted&&t.f.lugar.errors)),j(),Q("ngIf",t.submitted&&t.f.lugar.errors),j(5),Q("ngClass",fc(16,Vp,t.submitted&&t.f.fechaEvento.errors)),j(),Q("ngIf",t.submitted&&t.f.fechaEvento.errors),j(4),Q("ngClass",fc(18,Vp,t.submitted&&t.f.fechaLimite.errors)),j(),Q("ngIf",t.submitted&&t.f.fechaLimite.errors),j(4),Q("ngClass",fc(20,Vp,t.submitted&&t.f.formaPago.errors)),j(),Q("ngIf",t.submitted&&t.f.formaPago.errors),j(4),Q("ngClass",fc(22,Vp,t.submitted&&t.f.enlace.errors)),j(),Q("ngIf",t.submitted&&t.f.enlace.errors),j(5),Q("ngIf",t.f.cartel.value),j(3),pn(" ",t.isEditing()?"Guardar Cambios":"Crear Competici\xF3n"," ")}}var zE=class n{constructor(e,t){this.fb=e;this.competitionService=t;this.competitions=this.competitionService.getCompetitions(),this.competitionForm=this.fb.group({lugar:["",no.required],fechaEvento:["",no.required],fechaLimite:["",no.required],formaPago:["",no.required],enlace:["",[no.required,no.pattern("https?://.+")]],cartel:[null]})}competitions;isEditing=Pe(!1);showForm=Pe(!1);competitionForm;submitted=!1;currentCompetitionId=null;get f(){return this.competitionForm.controls}toggleView(){this.showForm.update(e=>!e),this.showForm()||this.resetForm()}initNewCompetition(){this.resetForm(),this.showForm.set(!0),this.isEditing.set(!1)}existingCartel=null;editCompetition(e){this.currentCompetitionId=e.id,this.existingCartel=e.cartel,this.competitionForm.patchValue({lugar:e.lugar,fechaEvento:e.fechaEvento,fechaLimite:e.fechaLimite,formaPago:e.formaPago,enlace:e.enlace}),this.showForm.set(!0),this.isEditing.set(!0)}deleteCompetition(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar esta competici\xF3n?")&&this.competitionService.deleteCompetition(e)}onFileSelected(e){let t=e.target.files[0];if(t){if(t.size>5e5){alert("La imagen es demasiado grande. Por favor sube una imagen menor de 500KB."),e.target.value="";return}let r=new FileReader;r.onload=()=>{this.competitionForm.patchValue({cartel:r.result})},r.readAsDataURL(t)}}onFileChange(e){this.onFileSelected(e)}async onSubmit(){if(this.submitted=!0,this.competitionForm.invalid)return;let e=this.competitionForm.value,t=e.cartel||(this.isEditing()?this.existingCartel:null),r=ae(U({},e),{cartel:t});this.isEditing()&&this.currentCompetitionId?(await this.competitionService.updateCompetition(U({id:this.currentCompetitionId},r)),alert("Competici\xF3n actualizada")):(await this.competitionService.addCompetition(r),alert("Competici\xF3n creada")),this.toggleView()}resetForm(){this.submitted=!1,this.currentCompetitionId=null,this.existingCartel=null,this.competitionForm.reset()}static \u0275fac=function(t){return new(t||n)(de(cj),de(Pd))};static \u0275cmp=Tt({type:n,selectors:[["app-crud-competicion"]],decls:8,vars:4,consts:[[1,"crud-container"],[1,"header"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","list-view",4,"ngIf"],["class","form-view",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"list-view"],[1,"table-responsive"],[1,"table"],[2,"width","150px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"actions"],["title","Editar",1,"btn-icon","edit",3,"click"],["title","Eliminar",1,"btn-icon","delete",3,"click"],["colspan","4",1,"empty-msg"],[1,"form-view"],[1,"form-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","lugar"],["type","text","id","lugar","formControlName","lugar","placeholder","Ej: Polideportivo Gij\xF3n",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-row"],[1,"form-group","col"],["for","fechaEvento"],["type","date","id","fechaEvento","formControlName","fechaEvento",1,"form-control",3,"ngClass"],["for","fechaLimite"],["type","date","id","fechaLimite","formControlName","fechaLimite",1,"form-control",3,"ngClass"],["for","formaPago"],["id","formaPago","formControlName","formaPago","rows","3","placeholder","Instrucciones de pago...",1,"form-control",3,"ngClass"],["for","enlace"],["type","url","id","enlace","formControlName","enlace","placeholder","https://...",1,"form-control",3,"ngClass"],["for","cartel"],["type","file","id","cartel","accept","image/*",1,"form-control",3,"change"],["class","mt-2",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"invalid-feedback"],[1,"mt-2"],["alt","Preview",2,"max-height","150px","border-radius","4px","box-shadow","0 2px 4px rgba(0,0,0,0.1)",3,"src"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"h2"),V(3,"Gesti\xF3n de Competiciones"),O(),_e(4,Fee,4,0,"button",2)(5,Lee,2,0,"button",3),O(),_e(6,Bee,16,2,"div",4)(7,Wee,40,24,"div",5),O()),t&2&&(j(4),Q("ngIf",!r.showForm()),j(),Q("ngIf",r.showForm()),j(),Q("ngIf",!r.showForm()),j(),Q("ngIf",r.showForm()))},dependencies:[Dn,eb,Tr,xn,uj,sj,Ad,OE,XB,CR,bR,pc],styles:[`.crud-container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:2.5rem;background:#fff;border-radius:12px;box-shadow:0 8px 24px #0033661a;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem;padding-bottom:1rem;border-bottom:2px solid #f0f2f5}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--primary-blue, #003366);font-weight:700}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:.95rem;transition:all .2s ease;display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#036,#004080);color:#fff;box-shadow:0 4px 6px #0363}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#004080,#00509e);box-shadow:0 6px 8px #00336640}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e6ea;color:#212529}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 4px 6px #28a74533}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);box-shadow:0 6px 8px #28a74540}.btn-cancel[_ngcontent-%COMP%]{background:transparent;color:#6c757d;border:1px solid #ced4da;margin-left:.75rem}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#343a40;border-color:#adb5bd}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e9ecef}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1rem;text-align:left;border-bottom:1px solid #e9ecef}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:3rem!important}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{padding:.4rem .8rem;border:1px solid #dee2e6;background:#fff;border-radius:4px;cursor:pointer;font-size:.85rem;transition:all .2s;color:#495057}.btn-icon.edit[_ngcontent-%COMP%]:hover{background:#fff3cd;color:#856404;border-color:#ffeeba}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#f8d7da;color:#721c24;border-color:#f5c6cb}.form-view[_ngcontent-%COMP%]{background:#f8f9fa;padding:2rem;border-radius:8px;border:1px solid #e9ecef;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:var(--primary-blue, #003366);font-size:1.4rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-group.col[_ngcontent-%COMP%]{flex:1}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#343a40;font-size:.95rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:6px;font-size:1rem;transition:border-color .2s,box-shadow .2s;box-sizing:border-box;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#004080;box-shadow:0 0 0 3px #0040801a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5zM6 8.2a.3.3 0 110-.6.3.3 0 010 .6z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;align-items:center}@media(max-width:768px){.crud-container[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.btn[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-top:.5rem;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}}`]})};function Kee(n,e){n&1&&(x(0,"div",13)(1,"p"),V(2,"A\xFAn no has a\xF1adido ning\xFAn perro."),O()())}function Qee(n,e){if(n&1){let t=Fe();x(0,"div",14)(1,"div",15),V(2,"\u{1F415}"),O(),x(3,"div",16)(4,"span",17),V(5),O()(),x(6,"button",18),re("click",function(){let i=ue(t).$implicit,s=X(2);return le(s.deleteDog(i.id))}),V(7,"\u{1F5D1}\uFE0F"),O()()}if(n&2){let t=e.$implicit;j(5),qe(t.name)}}function Yee(n,e){if(n&1){let t=Fe();x(0,"div",1)(1,"div",2),He(2,"img",3),x(3,"div",4)(4,"h2"),V(5),O(),x(6,"p"),V(7),O()()(),x(8,"div",5)(9,"h3"),V(10,"\u{1F436} Mis Perretes"),O(),x(11,"p",6),V(12,"A\xF1ade aqu\xED a tus compa\xF1eros de Agility."),O(),x(13,"div",7)(14,"input",8),Yg("ngModelChange",function(i){ue(t);let s=X();return UT(s.newDogName,i)||(s.newDogName=i),le(i)}),re("keyup.enter",function(){ue(t);let i=X();return le(i.addDog())}),O(),x(15,"button",9),re("click",function(){ue(t);let i=X();return le(i.addDog())}),V(16," A\xF1adir Perro "),O()(),x(17,"div",10),_e(18,Kee,3,0,"div",11)(19,Qee,8,1,"div",12),O()()()}if(n&2){let t=e.ngIf,r=X();j(2),Q("src",t.photoURL||"assets/default-user.png",hn),j(3),qe(t.displayName),j(2),qe(t.email),j(7),Qg("ngModel",r.newDogName),j(),Q("disabled",!r.newDogName().trim()),j(3),Q("ngIf",r.dogs().length===0),j(),Q("ngForOf",r.dogs())}}var GE=class n{authService=B(Mr);dogService=B(Rd);newDogName=Pe("");dogs=this.dogService.getDogs();constructor(){sl(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}async addDog(){if(!this.newDogName().trim())return;let e=this.authService.currentUserSignal();if(e)try{await this.dogService.addDog({userId:e.uid,name:this.newDogName(),createdAt:Date.now()}),this.newDogName.set("")}catch(t){console.error("Error adding dog:",t)}}async deleteDog(e){confirm("\xBFSeguro que quieres eliminar a este perrete?")&&await this.dogService.deleteDog(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-perfil"]],decls:1,vars:1,consts:[["class","perfil-container",4,"ngIf"],[1,"perfil-container"],[1,"profile-header"],["alt","Avatar",1,"profile-avatar",3,"src"],[1,"profile-info"],[1,"dogs-section"],[1,"section-desc"],[1,"add-dog-form"],["type","text","placeholder","Nombre de tu perro...",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-add",3,"click","disabled"],[1,"dogs-list"],["class","empty-state",4,"ngIf"],["class","dog-card",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"dog-card"],[1,"dog-icon"],[1,"dog-info"],[1,"dog-name"],["title","Eliminar",1,"btn-delete",3,"click"]],template:function(t,r){t&1&&_e(0,Yee,20,7,"div",0),t&2&&Q("ngIf",r.authService.currentUserSignal())},dependencies:[Dn,Tr,xn,UE,Ad,OE,TR],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding-bottom:2rem;border-bottom:1px solid #eee;margin-bottom:2rem}.profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:3px solid var(--accent-orange);flex-shrink:0}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);word-break:break-word}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666;word-break:break-all}.dogs-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.5rem}.section-desc[_ngcontent-%COMP%]{color:#777;margin-bottom:1.5rem}.add-dog-form[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:2rem}.add-dog-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #ddd;border-radius:6px;font-size:1rem;min-width:0}.btn-add[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:0 20px;border-radius:6px;cursor:pointer;font-weight:700;transition:background .2s;white-space:nowrap}.btn-add[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#004494}.btn-add[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.dogs-list[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(100%,1fr))}.dog-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f9f9f9;padding:15px;border-radius:8px;border:1px solid #eee;transition:transform .2s}.dog-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#ddd}.dog-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:15px;background-color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;box-shadow:0 2px 4px #0000000d;flex-shrink:0}.dog-info[_ngcontent-%COMP%]{flex:1;min-width:0}.dog-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#333;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.2rem;opacity:.6;transition:opacity .2s;padding:10px}.btn-delete[_ngcontent-%COMP%]:hover{opacity:1}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;font-style:italic;background-color:#f9f9f9;border-radius:8px}@media(max-width:600px){.perfil-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.add-dog-form[_ngcontent-%COMP%]{flex-direction:column}.btn-add[_ngcontent-%COMP%]{width:100%;padding:12px}.dogs-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Up=async(n,e)=>{let t=B(Mr),r=B(Ic);return await t.getAuthState()?!0:(r.navigate(["/login"]),!1)};var hj=[{path:"",component:SE},{path:"reservas",component:jE,canActivate:[Up]},{path:"contacto",component:$E},{path:"galeria",component:HE},{path:"calendario",component:qE,canActivate:[Up]},{path:"gestionar-competiciones",component:zE,canActivate:[Up]},{path:"perfil",component:GE,canActivate:[Up]},{path:"login",component:CE}];H0(di.firebase);var fj={providers:[Ow(),Q1(),Mb(hj),AO(()=>H0(di.firebase)),mB(()=>gB()),HL(()=>qL()),AB(()=>RB()),{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:y0.PROVIDER_ID,provider:new y0("YOUR_GOOGLE_CLIENT_ID")}],onError:n=>{console.error(n)}}},Z1("ngsw-worker.js",{enabled:!$h(),registrationStrategy:"registerWhenStable:30000"})]};function Jee(n,e){if(n&1){let t=Fe();x(0,"li")(1,"a",13),re("click",function(){ue(t);let i=X();return le(i.closeMenu())}),V(2,"Reservas"),O()()}}function Xee(n,e){if(n&1){let t=Fe();x(0,"li")(1,"a",14),re("click",function(){ue(t);let i=X();return le(i.closeMenu())}),V(2,"Calendario"),O()()}}function Zee(n,e){if(n&1){let t=Fe();x(0,"li")(1,"a",15),re("click",function(){ue(t);let i=X();return le(i.closeMenu())}),V(2,"Competiciones"),O()()}}function ete(n,e){if(n&1){let t=Fe();x(0,"a",16),re("click",function(){ue(t);let i=X();return le(i.closeMenu())}),V(1," Iniciar Sesi\xF3n "),O()}}function tte(n,e){if(n&1&&He(0,"img",30),n&2){let t=X().ngIf;Q("src",t.photoURL,hn)}}function nte(n,e){if(n&1&&(x(0,"div",31),V(1),O()),n&2){let t=X().ngIf;j(),pn(" ",(t.displayName==null?null:t.displayName.charAt(0))||"U"," ")}}function rte(n,e){if(n&1){let t=Fe();x(0,"div",32),re("click",function(){ue(t);let i=X(2);return le(i.closeMenu())}),O()}}function ite(n,e){if(n&1){let t=Fe();x(0,"div",17)(1,"button",18),re("click",function(i){ue(t);let s=X();return le(s.toggleUserMenu(i))}),_e(2,tte,1,1,"img",19)(3,nte,2,1,"ng-template",null,0,BT),x(5,"span",20),V(6,"\u25BC"),O()(),x(7,"div",21)(8,"div",22)(9,"p",23),V(10),O(),x(11,"p",24),V(12),O()(),He(13,"div",25),x(14,"a",26),re("click",function(){ue(t);let i=X();return le(i.closeMenu())}),V(15,"\u{1F436} Mis Perretes"),O(),x(16,"a",27),re("click",function(){ue(t);let i=X();return le(i.closeMenu())}),V(17,"\u{1F4C5} Mis Reservas"),O(),x(18,"button",28),re("click",function(){ue(t);let i=X();return le(i.logout())}),V(19,"\u{1F6AA} Cerrar Sesi\xF3n"),O()(),_e(20,rte,1,0,"div",29),O()}if(n&2){let t=e.ngIf,r=VT(4),i=X();j(2),Q("ngIf",t.photoURL)("ngIfElse",r),j(5),fn("show",i.isUserMenuOpen),j(3),qe(t.displayName),j(2),qe(t.email),j(8),Q("ngIf",i.isUserMenuOpen)}}var WE=class n{isMenuOpen=!1;isUserMenuOpen=!1;authService=B(Mr);toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1,this.isUserMenuOpen=!1}toggleUserMenu(e){e&&(e.preventDefault(),e.stopPropagation()),this.isUserMenuOpen=!this.isUserMenuOpen}async logout(){await this.authService.logout(),this.closeMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-navbar"]],decls:26,vars:9,consts:[["defaultAvatar",""],[1,"app-header"],[1,"logo-area"],[1,"mobile-menu-btn",3,"click"],[1,"bar"],["src","Images/Agility_Asturias_logo.jpg","alt","Agility Asturias Logo",1,"nav-logo"],["routerLink","/",3,"click"],[4,"ngIf"],["routerLink","/galeria",3,"click"],["routerLink","/contacto",3,"click"],[1,"auth-item"],["routerLink","/login","class","login-btn",3,"click",4,"ngIf"],["class","user-dropdown-container",4,"ngIf"],["routerLink","/reservas",3,"click"],["routerLink","/calendario",3,"click"],["routerLink","/gestionar-competiciones",3,"click"],["routerLink","/login",1,"login-btn",3,"click"],[1,"user-dropdown-container"],[1,"user-avatar-btn",3,"click"],["alt","User","class","nav-user-img","referrerpolicy","no-referrer",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-arrow"],[1,"user-dropdown-menu"],[1,"user-header"],[1,"name"],[1,"email"],[1,"dropdown-divider"],["routerLink","/perfil",1,"dropdown-item",3,"click"],["routerLink","/reservas",1,"dropdown-item",3,"click"],[1,"dropdown-item","logout-item",3,"click"],["class","dropdown-backdrop",3,"click",4,"ngIf"],["alt","User","referrerpolicy","no-referrer",1,"nav-user-img",3,"src"],[1,"nav-user-img","default-avatar-placeholder"],[1,"dropdown-backdrop",3,"click"]],template:function(t,r){t&1&&(x(0,"header",1)(1,"div",2)(2,"button",3),re("click",function(){return r.toggleMenu()}),He(3,"span",4)(4,"span",4)(5,"span",4),O(),He(6,"img",5),x(7,"h1"),V(8,"Agility Asturias"),O()(),x(9,"nav")(10,"ul")(11,"li")(12,"a",6),re("click",function(){return r.closeMenu()}),V(13,"Home"),O()(),_e(14,Jee,3,0,"li",7),x(15,"li")(16,"a",8),re("click",function(){return r.closeMenu()}),V(17,"Galer\xEDa"),O()(),_e(18,Xee,3,0,"li",7)(19,Zee,3,0,"li",7),x(20,"li")(21,"a",9),re("click",function(){return r.closeMenu()}),V(22,"Contacto"),O()(),x(23,"li",10),_e(24,ete,2,0,"a",11)(25,ite,21,7,"div",12),O()()()()),t&2&&(j(2),fn("active",r.isMenuOpen),j(8),fn("active",r.isMenuOpen),j(4),Q("ngIf",r.authService.currentUserSignal()),j(4),Q("ngIf",r.authService.currentUserSignal()),j(),Q("ngIf",r.authService.currentUserSignal()),j(5),Q("ngIf",!r.authService.currentUserSignal()),j(),Q("ngIf",r.authService.currentUserSignal()))},dependencies:[jy,Dn,xn],styles:[".app-header[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:var(--white);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.nav-logo[_ngcontent-%COMP%]{height:40px;width:auto;border-radius:4px}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);margin:0;font-size:1.5rem}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;gap:1.5rem;align-items:center}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--white);font-weight:500;text-decoration:none;transition:color .2s}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}.auth-item[_ngcontent-%COMP%]{margin-left:20px;position:relative}.login-btn[_ngcontent-%COMP%]{background-color:#ffffff26;padding:8px 16px;border-radius:20px;border:1px solid rgba(255,255,255,.3);transition:all .2s}.login-btn[_ngcontent-%COMP%]:hover{background-color:var(--white);color:var(--primary-blue)!important}.user-dropdown-container[_ngcontent-%COMP%]{position:relative}.user-avatar-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;gap:8px}.nav-user-img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid white}.default-avatar-placeholder[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;text-transform:uppercase}.dropdown-arrow[_ngcontent-%COMP%]{color:#fff;font-size:10px}.user-dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:120%;right:0;background:#fff;color:#333;min-width:200px;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:8px 0;display:none;flex-direction:column;z-index:1001;animation:_ngcontent-%COMP%_fadeIn .1s ease-out}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f8f9fa}.user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:14px;color:#333}.user-header[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:4px 0}.dropdown-item[_ngcontent-%COMP%]{padding:10px 16px;text-align:left;background:none;border:none;width:100%;cursor:pointer;color:#444!important;font-size:14px;transition:background .2s;display:block;box-sizing:border-box}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:var(--primary-blue)!important}.logout-item[_ngcontent-%COMP%]{color:#dc3545!important}.logout-item[_ngcontent-%COMP%]:hover{background-color:#fff1f2;color:#dc3545!important}.dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mobile-menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:space-between;width:30px;height:21px;background:transparent;border:none;cursor:pointer;padding:0;z-index:10}.mobile-menu-btn[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:100%;height:3px;background-color:var(--white);border-radius:3px;transition:all .3s ease-in-out}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(1){transform:translateY(9px) rotate(45deg)}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){opacity:0}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-9px) rotate(-45deg)}@media(max-width:768px){.app-header[_ngcontent-%COMP%]{padding:1rem}.logo-area[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.mobile-menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;flex-direction:column;width:100%;position:absolute;top:100%;left:0;background-color:var(--primary-blue);padding:1rem 0;box-shadow:0 4px 6px #0000001a;z-index:9;align-items:stretch}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 2rem;width:100%}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.auth-item[_ngcontent-%COMP%]{margin:10px 0 0;padding:10px 2rem;border-top:1px solid rgba(255,255,255,.1)}.login-btn[_ngcontent-%COMP%]{display:block;text-align:center;width:100%}.user-dropdown-menu[_ngcontent-%COMP%]{position:static;display:none;width:100%;box-shadow:none;border-radius:0;margin-top:10px}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-avatar-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;color:#fff}}"]})};var KE=class n{title=Pe("AgilityAsturias");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"app-container"]],template:function(t,r){t&1&&(x(0,"div",0),He(1,"app-navbar"),x(2,"main"),He(3,"router-outlet"),O(),x(4,"footer")(5,"p"),V(6,"\xA9 2026 Agility Asturias"),O()()())},dependencies:[pf,WE],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:var(--container-width);margin:0 auto;width:100%}footer[_ngcontent-%COMP%]{text-align:center;padding:1rem;background-color:#e0e0e0;font-size:.875rem}"]})};cb(KE,fj).catch(n=>console.error(n));
