import{a as y,b as d,c as M,d as w,f as I,h as N,i as R,n as D,p as L}from"./chunk-H47WUPCC.js";import{d as x,e as F,h as T}from"./chunk-P5GJ2CNE.js";import"./chunk-4O7UCEJX.js";import{l as C,o as b}from"./chunk-IYIJEOXB.js";import{Ha as a,Ib as i,Kb as E,Va as h,X as f,_a as g,jb as m,kb as t,lb as e,mb as c,na as v,wb as S,xb as _}from"./chunk-ASF4LTZT.js";function q(n,s){n&1&&(t(0,"div",23),i(1," El nombre es requerido (min 2 caracteres). "),e())}function A(n,s){n&1&&(t(0,"div",23),i(1," Introduce un email v\xE1lido. "),e())}function G(n,s){n&1&&(t(0,"div",23),i(1," M\xEDnimo 6 caracteres. "),e())}function V(n,s){if(n&1&&(t(0,"div",24)(1,"span",4),i(2,"error_outline"),e(),i(3),e()),n&2){let l=_();a(3),E(" ",l.errorMessage()," ")}}function j(n,s){n&1&&c(0,"span",25)}var P=class n{authService=f(T);fb=f(D);router=f(x);registerForm=this.fb.group({name:["",[d.required,d.minLength(2)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]});isLoading=v(!1);errorMessage=v("");constructor(){}onSubmit(){if(this.registerForm.invalid)return;let{name:s,email:l,password:r,confirmPassword:p}=this.registerForm.value;if(r!==p){this.errorMessage.set("Las contrase\xF1as no coinciden.");return}this.isLoading.set(!0),this.errorMessage.set(""),this.authService.register({name:s,email:l,password:r}).subscribe({next:()=>{this.isLoading.set(!1)},error:o=>{if(console.error(o),this.isLoading.set(!1),o.error&&o.error.message)if(o.status===422&&o.error.errors){let u=Object.keys(o.error.errors)[0],k=o.error.errors[u][0];this.errorMessage.set(k)}else this.errorMessage.set(o.error.message);else this.errorMessage.set("Error al registrar. Int\xE9ntalo de nuevo.")}})}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=h({type:n,selectors:[["app-register"]],decls:52,vars:8,consts:[[1,"auth-container"],[1,"auth-card"],[1,"logo-area"],[1,"logo-circle"],[1,"material-icons"],[1,"auth-form-container"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],[1,"input-wrapper"],["type","text","id","name","formControlName","name","placeholder","Tu nombre"],["class","field-error-text",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],["class","spinner",4,"ngIf"],[1,"auth-footer"],["routerLink","/login"],[1,"field-error-text"],[1,"error-message"],[1,"spinner"]],template:function(l,r){if(l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),i(5,"person_add"),e()(),t(6,"h2"),i(7,"Crear Cuenta"),e(),t(8,"p"),i(9,"\xDAnete a Agility Asturias \u{1F436}"),e()(),t(10,"div",5)(11,"form",6),S("ngSubmit",function(){return r.onSubmit()}),t(12,"div",7)(13,"label",8),i(14,"Nombre"),e(),t(15,"div",9)(16,"span",4),i(17,"badge"),e(),c(18,"input",10),e(),g(19,q,2,0,"div",11),e(),t(20,"div",7)(21,"label",12),i(22,"Correo Electr\xF3nico"),e(),t(23,"div",9)(24,"span",4),i(25,"email"),e(),c(26,"input",13),e(),g(27,A,2,0,"div",11),e(),t(28,"div",7)(29,"label",14),i(30,"Contrase\xF1a"),e(),t(31,"div",9)(32,"span",4),i(33,"lock"),e(),c(34,"input",15),e(),g(35,G,2,0,"div",11),e(),t(36,"div",7)(37,"label",16),i(38,"Confirmar Contrase\xF1a"),e(),t(39,"div",9)(40,"span",4),i(41,"lock_outline"),e(),c(42,"input",17),e()(),g(43,V,4,1,"div",18),t(44,"button",19),g(45,j,1,0,"span",20),i(46),e()(),t(47,"div",21)(48,"p"),i(49,"\xBFYa tienes cuenta? "),t(50,"a",22),i(51,"Inicia Sesi\xF3n"),e()()()()()()),l&2){let p,o,u;a(11),m("formGroup",r.registerForm),a(8),m("ngIf",((p=r.registerForm.get("name"))==null?null:p.touched)&&((p=r.registerForm.get("name"))==null?null:p.invalid)),a(8),m("ngIf",((o=r.registerForm.get("email"))==null?null:o.touched)&&((o=r.registerForm.get("email"))==null?null:o.invalid)),a(8),m("ngIf",((u=r.registerForm.get("password"))==null?null:u.touched)&&((u=r.registerForm.get("password"))==null?null:u.invalid)),a(8),m("ngIf",r.errorMessage()),a(),m("disabled",r.registerForm.invalid||r.isLoading()),a(),m("ngIf",r.isLoading()),a(),E(" ",r.isLoading()?"Creando cuenta...":"Registrarse"," ")}},dependencies:[b,C,L,I,y,M,w,R,N,F],encapsulation:2})};export{P as RegisterComponent};
