import{a as y,b as m,c as w,d as M,f as I,h as N,i as R,n as D,p as L}from"./chunk-75OGG6H7.js";import{d as x,e as F,h as T}from"./chunk-4GZKUAZC.js";import"./chunk-G3KG7Z62.js";import{l as C,o as b}from"./chunk-EZCYVLCX.js";import{Gb as i,Ha as o,Ib as E,Va as h,X as f,_a as u,jb as l,kb as t,lb as e,mb as g,na as v,ub as S,vb as _}from"./chunk-FRQHPZYJ.js";function q(n,a){n&1&&(t(0,"div",23),i(1," El nombre es requerido (min 2 caracteres). "),e())}function A(n,a){n&1&&(t(0,"div",23),i(1," Introduce un email v\xE1lido. "),e())}function k(n,a){n&1&&(t(0,"div",23),i(1," M\xEDnimo 6 caracteres. "),e())}function G(n,a){if(n&1&&(t(0,"div",24)(1,"span",4),i(2,"error_outline"),e(),i(3),e()),n&2){let s=_();o(3),E(" ",s.errorMessage()," ")}}function V(n,a){n&1&&g(0,"span",25)}var P=class n{authService=f(T);fb=f(D);router=f(x);registerForm=this.fb.group({name:["",[m.required,m.minLength(2)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],confirmPassword:["",[m.required]]});isLoading=v(!1);errorMessage=v("");constructor(){}onSubmit(){if(this.registerForm.invalid)return;let{name:a,email:s,password:r,confirmPassword:d}=this.registerForm.value;if(r!==d){this.errorMessage.set("Las contrase\xF1as no coinciden.");return}this.isLoading.set(!0),this.errorMessage.set(""),this.authService.register({name:a,email:s,password:r}).subscribe({next:()=>{this.isLoading.set(!1)},error:p=>{console.error(p),this.isLoading.set(!1),p.status===422?this.errorMessage.set("El email ya est\xE1 registrado o los datos son inv\xE1lidos."):this.errorMessage.set("Error al registrar. Int\xE9ntalo de nuevo.")}})}static \u0275fac=function(s){return new(s||n)};static \u0275cmp=h({type:n,selectors:[["app-register"]],decls:52,vars:8,consts:[[1,"auth-container"],[1,"auth-card"],[1,"logo-area"],[1,"logo-circle"],[1,"material-icons"],[1,"auth-form-container"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],[1,"input-wrapper"],["type","text","id","name","formControlName","name","placeholder","Tu nombre"],["class","field-error-text",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],["class","spinner",4,"ngIf"],[1,"auth-footer"],["routerLink","/login"],[1,"field-error-text"],[1,"error-message"],[1,"spinner"]],template:function(s,r){if(s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),i(5,"person_add"),e()(),t(6,"h2"),i(7,"Crear Cuenta"),e(),t(8,"p"),i(9,"\xDAnete a Agility Asturias \u{1F436}"),e()(),t(10,"div",5)(11,"form",6),S("ngSubmit",function(){return r.onSubmit()}),t(12,"div",7)(13,"label",8),i(14,"Nombre"),e(),t(15,"div",9)(16,"span",4),i(17,"badge"),e(),g(18,"input",10),e(),u(19,q,2,0,"div",11),e(),t(20,"div",7)(21,"label",12),i(22,"Correo Electr\xF3nico"),e(),t(23,"div",9)(24,"span",4),i(25,"email"),e(),g(26,"input",13),e(),u(27,A,2,0,"div",11),e(),t(28,"div",7)(29,"label",14),i(30,"Contrase\xF1a"),e(),t(31,"div",9)(32,"span",4),i(33,"lock"),e(),g(34,"input",15),e(),u(35,k,2,0,"div",11),e(),t(36,"div",7)(37,"label",16),i(38,"Confirmar Contrase\xF1a"),e(),t(39,"div",9)(40,"span",4),i(41,"lock_outline"),e(),g(42,"input",17),e()(),u(43,G,4,1,"div",18),t(44,"button",19),u(45,V,1,0,"span",20),i(46),e()(),t(47,"div",21)(48,"p"),i(49,"\xBFYa tienes cuenta? "),t(50,"a",22),i(51,"Inicia Sesi\xF3n"),e()()()()()()),s&2){let d,p,c;o(11),l("formGroup",r.registerForm),o(8),l("ngIf",((d=r.registerForm.get("name"))==null?null:d.touched)&&((d=r.registerForm.get("name"))==null?null:d.invalid)),o(8),l("ngIf",((p=r.registerForm.get("email"))==null?null:p.touched)&&((p=r.registerForm.get("email"))==null?null:p.invalid)),o(8),l("ngIf",((c=r.registerForm.get("password"))==null?null:c.touched)&&((c=r.registerForm.get("password"))==null?null:c.invalid)),o(8),l("ngIf",r.errorMessage()),o(),l("disabled",r.registerForm.invalid||r.isLoading()),o(),l("ngIf",r.isLoading()),o(),E(" ",r.isLoading()?"Creando cuenta...":"Registrarse"," ")}},dependencies:[b,C,L,I,y,w,M,R,N,F],encapsulation:2})};export{P as RegisterComponent};
