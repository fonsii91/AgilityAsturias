import{a as S}from"./chunk-FNOV33IT.js";import"./chunk-UPS7OBSK.js";import{k as O,l as I,o as E}from"./chunk-EZCYVLCX.js";import{Db as P,Ea as v,Eb as k,Gb as s,Ha as a,Hb as u,Ib as h,Va as y,X as C,_a as g,aa as p,ba as m,ca as w,da as M,jb as l,kb as i,lb as o,mb as _,na as f,qb as b,ub as x,vb as c}from"./chunk-FRQHPZYJ.js";function T(e,t){e&1&&(i(0,"div",6),_(1,"div",7),i(2,"p"),s(3,"Cargando clasificaci\xF3n..."),o()())}function z(e,t){e&1&&(i(0,"div",8)(1,"p"),s(2,"A\xFAn no hay puntos registrados. \xA1S\xE9 el primero!"),o()())}function L(e,t){e&1&&(i(0,"span",26),s(1,"\u{1F947}"),o())}function V(e,t){e&1&&(i(0,"span",26),s(1,"\u{1F948}"),o())}function A(e,t){e&1&&(i(0,"span",26),s(1,"\u{1F949}"),o())}function F(e,t){if(e&1&&(i(0,"span",27),s(1),o()),e&2){let n=c().index;a(),u(n+1)}}function j(e,t){if(e&1&&(i(0,"div",28),w(),i(1,"svg",29),_(2,"path",30),o(),M(),i(3,"span"),s(4),o()()),e&2){let n=c().$implicit;a(4),h("+",n.weekly_points)}}function N(e,t){if(e&1&&(i(0,"span",31),s(1),o()),e&2){let n=c().$implicit;a(),h("de ",n.user.name)}}function $(e,t){if(e&1){let n=b();i(0,"div",12)(1,"div",13),g(2,L,2,0,"span",14)(3,V,2,0,"span",14)(4,A,2,0,"span",14)(5,F,2,1,"span",15),o(),i(6,"div",16),x("click",function(){let d=p(n).$implicit,D=c(2);return m(D.openLightbox(d.photo_url))}),_(7,"img",17),o(),i(8,"div",18)(9,"div",19)(10,"span",20),s(11),o(),g(12,j,5,1,"div",21),o(),g(13,N,2,1,"span",22),o(),i(14,"div",23)(15,"span",24),s(16),o(),i(17,"span",25),s(18,"pts"),o()()()}if(e&2){let n=t.$implicit,r=t.index;k("top-rank",r<3),a(2),l("ngIf",r===0),a(),l("ngIf",r===1),a(),l("ngIf",r===2),a(),l("ngIf",r>2),a(),P("cursor",n.photo_url?"pointer":"default"),a(),l("src",n.photo_url||"Images/Agility_Asturias_logo.jpg",v),a(3),k("bold",r<3),a(),u(n.name),a(),l("ngIf",n.weekly_points>0),a(),l("ngIf",n.user),a(3),u(n.points)}}function H(e,t){if(e&1&&(i(0,"div",9)(1,"div",10),g(2,$,19,15,"div",11),o()()),e&2){let n=c();a(2),l("ngForOf",n.ranking())}}function Y(e,t){if(e&1){let n=b();i(0,"div",32),x("click",function(){p(n);let d=c();return m(d.closeLightbox())}),i(1,"button",33),x("click",function(){p(n);let d=c();return m(d.closeLightbox())}),s(2,"\xD7"),o(),i(3,"div",34),x("click",function(d){return p(n),m(d.stopPropagation())}),_(4,"img",35),o()()}if(e&2){let n=c();a(4),l("src",n.currentImage(),v)}}var R=class e{reservationService=C(S);ranking=f([]);isLoading=f(!0);lightboxOpen=f(!1);currentImage=f("");constructor(){this.loadRanking()}loadRanking(){this.reservationService.getRanking().subscribe({next:t=>{this.ranking.set(t),this.isLoading.set(!1)},error:t=>{console.error("Error loading ranking",t),this.isLoading.set(!1)}})}getMedal(t){return t===0?"\u{1F947}":t===1?"\u{1F948}":t===2?"\u{1F949}":""}openLightbox(t){t&&(this.currentImage.set(t),this.lightboxOpen.set(!0),document.body.style.overflow="hidden")}closeLightbox(){this.lightboxOpen.set(!1),this.currentImage.set(""),document.body.style.overflow="auto"}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=y({type:e,selectors:[["app-ranking"]],decls:10,vars:4,consts:[[1,"ranking-container"],[1,"header"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","ranking-content",4,"ngIf"],["class","lightbox",3,"click",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],[1,"ranking-content"],[1,"ranking-list","glass-effect"],["class","ranking-row",3,"top-rank",4,"ngFor","ngForOf"],[1,"ranking-row"],[1,"rank-position"],["class","medal-icon",4,"ngIf"],["class","number",4,"ngIf"],[1,"user-avatar-small",3,"click"],["alt","Dog","onError","this.src='Images/Agility_Asturias_logo.jpg'",3,"src"],[1,"user-info"],[1,"name-container"],[1,"user-name"],["class","weekly-badge","title","Puntos conseguidos esta semana",4,"ngIf"],["class","owner-name",4,"ngIf"],[1,"points-badge"],[1,"points"],[1,"label"],[1,"medal-icon"],[1,"number"],["title","Puntos conseguidos esta semana",1,"weekly-badge"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"trend-icon"],["fill-rule","evenodd","d","M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z","clip-rule","evenodd"],[1,"owner-name"],[1,"lightbox",3,"click"],[1,"close-btn",3,"click"],[1,"lightbox-content",3,"click"],["alt","Dog Preview",3,"src"]],template:function(n,r){n&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),s(3,"\u{1F3C6} Clasificaci\xF3n de Perretes"),o(),i(4,"p"),s(5,"\xA1Asiste a los entrenamientos y gana puntos!"),o()(),g(6,T,4,0,"div",2)(7,z,3,0,"div",3)(8,H,3,1,"div",4)(9,Y,5,1,"div",5),o()),n&2&&(a(6),l("ngIf",r.isLoading()),a(),l("ngIf",!r.isLoading()&&r.ranking().length===0),a(),l("ngIf",!r.isLoading()&&r.ranking().length>0),a(),l("ngIf",r.lightboxOpen()))},dependencies:[E,O,I],styles:[".ranking-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem;color:var(--text-main);margin-bottom:.5rem;background:linear-gradient(135deg,#1e3a8a,#3b82f6);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem}.glass-effect[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000000d;overflow:hidden}.ranking-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.ranking-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #f1f5f9;transition:background .2s;background:#fff}.ranking-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.ranking-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.ranking-row.top-rank[_ngcontent-%COMP%]{background:linear-gradient(to right,#f8fafc,#fff)}.rank-position[_ngcontent-%COMP%]{width:50px;font-size:1.2rem;font-weight:700;color:var(--text-secondary);display:flex;justify-content:center;align-items:center}.medal-icon[_ngcontent-%COMP%]{font-size:1.6rem}.user-avatar-small[_ngcontent-%COMP%]{margin:0 1rem;flex-shrink:0}.user-avatar-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:55px!important;height:55px!important;border-radius:50%;object-fit:cover;border:2px solid #e2e8f0;display:block}.top-rank[_ngcontent-%COMP%]   .user-avatar-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#cbd5e1;box-shadow:0 2px 5px #0000000d}.user-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}.user-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-main);font-size:1.05rem}.user-name.bold[_ngcontent-%COMP%]{font-weight:700;color:#1e293b}.name-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.weekly-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;background:#dcfce7;color:#166534;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:700;box-shadow:0 1px 2px #0000000d;border:1px solid #bbf7d0;white-space:nowrap}.weekly-badge[_ngcontent-%COMP%]   .trend-icon[_ngcontent-%COMP%]{width:14px;height:14px;color:#16a34a}.owner-name[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin-left:.5rem;font-style:italic}.points-badge[_ngcontent-%COMP%]{background:#f1f5f9;color:var(--primary-blue);padding:.5rem 1rem;border-radius:12px;min-width:80px;text-align:center;display:flex;flex-direction:column;align-items:center;border:1px solid transparent}.top-rank[_ngcontent-%COMP%]   .points-badge[_ngcontent-%COMP%]{background:#eff6ff;color:#2563eb;border-color:#dbeafe}.points-badge[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{font-weight:800;font-size:1.1rem;line-height:1.2}.points-badge[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8;text-transform:uppercase}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-secondary)}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--primary-blue);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(max-width:600px){.ranking-row[_ngcontent-%COMP%]{padding:.8rem 1rem}.user-avatar-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px!important;height:45px!important}}.lightbox[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000e6;display:flex;justify-content:center;align-items:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.lightbox-content[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;position:relative;border-radius:8px;overflow:hidden;box-shadow:0 10px 40px #00000080;background:transparent}.lightbox-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;display:block;object-fit:contain}.close-btn[_ngcontent-%COMP%]{position:absolute;top:20px;right:30px;background:#fff3;border:none;color:#fff;font-size:2rem;cursor:pointer;z-index:10001;width:50px;height:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:background .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#fff6}"]})};export{R as RankingComponent};
