import{a as D}from"./chunk-FNOV33IT.js";import"./chunk-UPS7OBSK.js";import{k as S,l as E,n as R,o as I}from"./chunk-EZCYVLCX.js";import{Gb as r,Ha as i,Hb as p,Ib as C,Sb as M,Va as P,Vb as b,X as O,Zb as h,_a as g,jb as m,kb as n,lb as a,vb as w}from"./chunk-FRQHPZYJ.js";function z(t,o){t&1&&(n(0,"div",15)(1,"p"),r(2,"No hay reservas para hoy. \xA1D\xEDa tranquilo! \u{1F634}"),a()())}function N(t,o){if(t&1&&(n(0,"span",30),r(1),a()),t&2){let e=o.$implicit;i(),C("\u{1F415} ",e)}}function k(t,o){t&1&&(n(0,"span",31),r(1,"Sin perros"),a())}function j(t,o){if(t&1&&(n(0,"div",25)(1,"span",26),r(2),a(),n(3,"div",27),g(4,N,2,1,"span",28)(5,k,2,0,"span",29),a()()),t&2){let e=o.$implicit;i(2),p(e.userName),i(2),m("ngForOf",e.selectedDogs),i(),m("ngIf",!(e.selectedDogs!=null&&e.selectedDogs.length))}}function H(t,o){if(t&1&&(n(0,"div",18)(1,"div",19)(2,"span",20),r(3),a(),n(4,"span",21),r(5),a()(),n(6,"div",22)(7,"div",23),g(8,j,6,3,"div",24),a()()()),t&2){let e=o.$implicit;i(3),p(e.time),i(2),C("",e.reservations.length," pers."),i(3),m("ngForOf",e.reservations)}}function A(t,o){if(t&1&&(n(0,"div",16),g(1,H,9,3,"div",17),a()),t&2){let e=w();i(),m("ngForOf",e.todayTimeSlots())}}function U(t,o){t&1&&(n(0,"div",32)(1,"p"),r(2,"No hay m\xE1s reservas a la vista."),a()())}function $(t,o){if(t&1&&(n(0,"div",42)(1,"span",43),r(2),a(),n(3,"span",44),r(4),a()()),t&2){let e=o.$implicit;i(2),p(e.userName),i(2),C(" ",e.selectedDogs.join(", ")||"Sin perros"," ")}}function G(t,o){if(t&1&&(n(0,"div",38)(1,"div",39)(2,"span",20),r(3),a()(),n(4,"div",40),g(5,$,5,2,"div",41),a()()),t&2){let e=o.$implicit;i(3),p(e.time),i(2),m("ngForOf",e.reservations)}}function B(t,o){if(t&1&&(n(0,"div",33)(1,"div",34)(2,"h3"),r(3),M(4,"date"),a(),n(5,"span",35),r(6),a()(),n(7,"div",36),g(8,G,6,2,"div",37),a()()),t&2){let e=o.$implicit;i(3),p(b(4,3,e.date,"EEEE, d MMMM","","es-ES")),i(3),p(e.totalCount),i(2),m("ngForOf",e.timeSlots)}}var F=class t{reservationService=O(D);allReservations=this.reservationService.getReservations();todayStr=new Date().toISOString().split("T")[0];todayReservationsRaw=h(()=>{let o=this.todayStr;return this.allReservations().filter(e=>e.date===o)});todayTimeSlots=h(()=>{let o=this.todayReservationsRaw(),e=new Map;return o.forEach(s=>{let d=s.startTime||"Unknown";e.has(d)||e.set(d,[]),e.get(d).push(s)}),Array.from(e.entries()).sort((s,d)=>s[0].localeCompare(d[0])).map(([s,d])=>{let l=new Map;d.forEach(f=>{let c=f.userName||"Usuario";l.has(c)||l.set(c,[]),f.dog?.name&&l.get(c).push(f.dog.name)});let u=Array.from(l.entries()).map(([f,c])=>({userName:f,selectedDogs:c}));return{time:s,reservations:u,rawCount:d.length}})});futureReservationsGrouped=h(()=>{let o=this.todayStr,e=this.allReservations().filter(d=>d.date&&d.date>o),s=new Map;return e.forEach(d=>{let l=d.date||"Sin Fecha";s.has(l)||s.set(l,[]),s.get(l).push(d)}),Array.from(s.entries()).sort((d,l)=>d[0].localeCompare(l[0])).map(([d,l])=>{let u=new Map;l.forEach(c=>{let v=c.startTime||"Unknown";u.has(v)||u.set(v,[]),u.get(v).push(c)});let f=Array.from(u.entries()).sort((c,v)=>c[0].localeCompare(v[0])).map(([c,v])=>{let y=new Map;v.forEach(x=>{let _=x.userName||"Usuario";y.has(_)||y.set(_,[]),x.dog?.name&&y.get(_).push(x.dog.name)});let T=Array.from(y.entries()).map(([x,_])=>({userName:x,selectedDogs:_}));return{time:c,reservations:T}});return{date:d,timeSlots:f,totalCount:l.length}})});statsHoje=h(()=>({totalReservas:new Set(this.todayReservationsRaw().map(o=>o.userId)).size,totalPerros:this.todayReservationsRaw().length}));constructor(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-info-reservas"]],decls:31,vars:12,consts:[[1,"reservas-container"],[1,"header"],[1,"dashboard-stats"],[1,"stat-card","blue"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","orange"],[1,"section-title"],[1,"date-badge"],["class","empty-state glass-effect today-empty",4,"ngIf"],["class","reservations-list today-list glass-effect",4,"ngIf"],[1,"section-title","future-title"],["class","empty-state",4,"ngIf"],[1,"reservations-timeline"],["class","day-group glass-effect",4,"ngFor","ngForOf"],[1,"empty-state","glass-effect","today-empty"],[1,"reservations-list","today-list","glass-effect"],["class","res-card today-card",4,"ngFor","ngForOf"],[1,"res-card","today-card"],[1,"time-slot-large"],[1,"time"],[1,"slot-count"],[1,"card-content"],[1,"users-list"],["class","user-row",4,"ngFor","ngForOf"],[1,"user-row"],[1,"user-name"],[1,"dogs-chips"],["class","dog-chip",4,"ngFor","ngForOf"],["class","no-dogs",4,"ngIf"],[1,"dog-chip"],[1,"no-dogs"],[1,"empty-state"],[1,"day-group","glass-effect"],[1,"date-header"],[1,"count-badge"],[1,"reservations-list"],["class","res-card small-card",4,"ngFor","ngForOf"],[1,"res-card","small-card"],[1,"time-slot"],[1,"users-list-small"],["class","user-row-small",4,"ngFor","ngForOf"],[1,"user-row-small"],[1,"user-name-small"],[1,"dogs-text-small"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),r(3,"\u{1F4C5} Monitor de Reservas"),a(),n(4,"p"),r(5,"Vista r\xE1pida de actividad diaria"),a()(),n(6,"div",2)(7,"div",3)(8,"span",4),r(9),a(),n(10,"span",5),r(11,"Reservas Hoy"),a()(),n(12,"div",6)(13,"span",4),r(14),a(),n(15,"span",5),r(16,"Perros Hoy"),a()()(),n(17,"div",7)(18,"h2"),r(19,"\u{1F525} Hoy"),a(),n(20,"span",8),r(21),M(22,"date"),a()(),g(23,z,3,0,"div",9)(24,A,2,1,"div",10),n(25,"div",11)(26,"h2"),r(27,"\u{1F4C5} Pr\xF3ximos D\xEDas"),a()(),g(28,U,3,0,"div",12),n(29,"div",13),g(30,B,9,8,"div",14),a()()),e&2&&(i(9),p(s.statsHoje().totalReservas),i(5),p(s.statsHoje().totalPerros),i(7),p(b(22,7,s.todayStr,"EEEE, d MMMM","","es-ES")),i(2),m("ngIf",s.todayTimeSlots().length===0),i(),m("ngIf",s.todayTimeSlots().length>0),i(4),m("ngIf",s.futureReservationsGrouped().length===0),i(2),m("ngForOf",s.futureReservationsGrouped()))},dependencies:[I,S,E,R],styles:[".reservas-container[_ngcontent-%COMP%]{max-width:800px;margin:1rem auto;padding:1rem 1rem 4rem}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;margin:0;color:var(--primary-blue)}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:5px 0 0}.dashboard-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:12px;text-align:center;box-shadow:0 4px 10px #0000000d;display:flex;flex-direction:column;align-items:center;border:1px solid #eee}.stat-card.blue[_ngcontent-%COMP%]{border-bottom:4px solid var(--primary-blue)}.stat-card.orange[_ngcontent-%COMP%]{border-bottom:4px solid var(--accent-orange)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;line-height:1;margin-bottom:5px}.blue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--primary-blue)}.orange[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--accent-orange)}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#666;text-transform:uppercase;font-weight:600}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin:0;color:#333}.date-badge[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:2px 10px;border-radius:12px;font-size:.8rem;text-transform:capitalize}.future-title[_ngcontent-%COMP%]{margin-top:3rem;opacity:.7}.today-list[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 30px #00000014;border:1px solid rgba(0,0,0,.05);overflow:hidden}.today-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.2rem;border-bottom:1px solid #f0f0f0;transition:background .2s}.today-card[_ngcontent-%COMP%]:hover{background-color:#fcfcfc}.time-slot-large[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;padding:8px 12px;border-radius:8px;font-weight:700;font-size:1.2rem;margin-right:2rem;min-width:100px;text-align:center;box-shadow:0 2px 5px #0000001a;display:flex;flex-direction:column;justify-content:center;align-items:center}.small-card[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#666;font-weight:700;font-size:.95rem;min-width:80px;margin-right:20px;display:block}.card-content[_ngcontent-%COMP%]{flex:1}.user-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.user-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#222}.dogs-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.dog-chip[_ngcontent-%COMP%]{background-color:#fff4e6;color:#d97706;padding:2px 8px;border-radius:4px;font-size:.85rem;font-weight:600}.day-group[_ngcontent-%COMP%]{background:#fff9;margin-bottom:1rem;border-radius:8px;overflow:hidden;border:1px solid rgba(0,0,0,.05)}.date-header[_ngcontent-%COMP%]{background-color:#f0f4f8;color:#444;padding:8px 15px;display:flex;justify-content:space-between;align-items:center;font-weight:700}.date-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;text-transform:capitalize}.small-card[_ngcontent-%COMP%]{display:flex;padding:10px 15px;border-bottom:1px solid #eee;align-items:center}.small-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.small-card[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#666;font-weight:700;font-size:.95rem;width:60px}.user-name-small[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-right:10px}.dogs-text-small[_ngcontent-%COMP%]{color:#888;font-size:.85rem}.users-list-small[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:8px}.user-row-small[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:10px}.empty-state[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#999;background:#ffffff80;border-radius:12px}@media(max-width:600px){.today-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.time-slot-large[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;margin-right:0;margin-bottom:10px;padding:8px 15px;box-sizing:border-box}.slot-count[_ngcontent-%COMP%]{margin-top:0;font-size:.9rem}.user-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}}"]})};export{F as InfoReservasComponent};
