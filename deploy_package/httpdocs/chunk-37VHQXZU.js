import{v as l,y as h}from"./chunk-H6O6N7HE.js";import{S as p,X as g,na as d}from"./chunk-ASF4LTZT.js";var m=class a{http=g(l);apiUrl=`${h.apiUrl}/dogs`;dogsSignal=d([]);constructor(){}loadUserDogs(){this.http.get(this.apiUrl).subscribe({next:t=>this.dogsSignal.set(t),error:t=>{t.status!==403&&console.error("Error loading dogs:",t)}})}getDogs(){return this.dogsSignal}addDog(t){return new Promise((r,i)=>{this.http.post(this.apiUrl,t).subscribe({next:o=>{this.dogsSignal.update(e=>[...e,o]),r(o)},error:o=>i(o)})})}deleteDog(t){return new Promise((r,i)=>{this.http.post(`${this.apiUrl}/${t}`,{_method:"DELETE"}).subscribe({next:()=>{this.dogsSignal.update(o=>o.filter(e=>e.id!==t)),r()},error:o=>i(o)})})}updateDogPhoto(t,r){return new Promise((i,o)=>{let e=new FormData;e.append("photo",r),this.http.post(`${this.apiUrl}/${t}/photo`,e).subscribe({next:s=>{this.dogsSignal.update(c=>c.map(n=>n.id===t?s:n)),i(s)},error:s=>o(s)})})}static \u0275fac=function(r){return new(r||a)};static \u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
