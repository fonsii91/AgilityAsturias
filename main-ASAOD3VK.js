var KB=Object.defineProperty,QB=Object.defineProperties;var YB=Object.getOwnPropertyDescriptors;var _m=Object.getOwnPropertySymbols;var JR=Object.prototype.hasOwnProperty,XR=Object.prototype.propertyIsEnumerable;var YR=(n,e,t)=>e in n?KB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})JR.call(e,t)&&YR(n,t,e[t]);if(_m)for(var t of _m(e))XR.call(e,t)&&YR(n,t,e[t]);return n},ae=(n,e)=>QB(n,YB(e));var xo=(n,e)=>{var t={};for(var r in n)JR.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&_m)for(var r of _m(n))e.indexOf(r)<0&&XR.call(n,r)&&(t[r]=n[r]);return t};var Sn=null,vm=!1,pI=1,JB=null,Mn=Symbol("SIGNAL");function de(n){let e=Sn;return Sn=n,e}function Im(){return Sn}var Hu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ih(n){if(vm)throw new Error("");if(Sn===null)return;Sn.consumerOnSignalRead(n);let e=Sn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Sn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Sn.producers,t!==void 0&&t.producer===n)){Sn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Sn&&(!r||ZB(i,Sn)))return;let s=zu(Sn),o={producer:n,consumer:Sn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Sn.producersTail=o,e!==void 0?e.nextProducer=o:Sn.producers=o,s&&nP(n,o)}function ZR(){pI++}function mI(n){if(!(zu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pI)){if(!n.producerMustRecompute(n)&&!oh(n)){fI(n);return}n.producerRecomputeValue(n),fI(n)}}function gI(n){if(n.consumers===void 0)return;let e=vm;vm=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||XB(r)}}finally{vm=e}}function yI(){return Sn?.consumerAllowSignalWrites!==!1}function XB(n){n.dirty=!0,gI(n),n.consumerMarkedDirty?.(n)}function fI(n){n.dirty=!1,n.lastCleanEpoch=pI}function qu(n){return n&&eP(n),de(n)}function eP(n){n.producersTail=void 0,n.recomputing=!0}function sh(n,e){de(e),n&&tP(n)}function tP(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(zu(n))do t=_I(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function oh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(mI(t),r!==t.version))return!0}return!1}function qa(n){if(zu(n)){let e=n.producers;for(;e!==void 0;)e=_I(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function nP(n,e){let t=n.consumersTail,r=zu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)nP(i.producer,i)}function _I(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!zu(e)){let s=e.producers;for(;s!==void 0;)s=_I(s)}return t}function zu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function vI(n){JB?.(n)}function ZB(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function EI(n,e){return Object.is(n,e)}function wm(n,e){let t=Object.create(e4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(mI(t),ih(t),t.value===Em)throw t.error;return t.value};return r[Mn]=t,vI(t),r}var dI=Symbol("UNSET"),hI=Symbol("COMPUTING"),Em=Symbol("ERRORED"),e4=ae(U({},Hu),{value:dI,dirty:!0,error:null,equal:EI,kind:"computed",producerMustRecompute(n){return n.value===dI||n.value===hI},producerRecomputeValue(n){if(n.value===hI)throw new Error("");let e=n.value;n.value=hI;let t=qu(n),r,i=!1;try{r=n.computation(),de(null),i=e!==dI&&e!==Em&&r!==Em&&n.equal(e,r)}catch(s){r=Em,n.error=s}finally{sh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function t4(){throw new Error}var rP=t4;function iP(n){rP(n)}function II(n){rP=n}var n4=null;function wI(n,e){let t=Object.create(Tm);t.value=n,e!==void 0&&(t.equal=e);let r=()=>sP(t);return r[Mn]=t,vI(t),[r,o=>ah(t,o),o=>oP(t,o)]}function sP(n){return ih(n),n.value}function ah(n,e){yI()||iP(n),n.equal(n.value,e)||(n.value=e,r4(n))}function oP(n,e){yI()||iP(n),ah(n,e(n.value))}var Tm=ae(U({},Hu),{equal:EI,value:void 0,kind:"signal"});function r4(n){n.version++,ZR(),gI(n),n4?.(n)}function TI(n){let e=de(null);try{return n()}finally{de(e)}}var bI=ae(U({},Hu),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function CI(n){if(n.dirty=!1,n.version>0&&!oh(n))return;n.version++;let e=qu(n);try{n.cleanup(),n.fn()}finally{sh(n,e)}}function Se(n){return typeof n=="function"}function Gu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bm=Gu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function za(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Xt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Se(r))try{r()}catch(s){e=s instanceof bm?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{aP(s)}catch(o){e=e??[],o instanceof bm?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bm(e)}}add(e){var t;if(e&&e!==this)if(this.closed)aP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&za(t,e)}remove(e){let{_finalizers:t}=this;t&&za(t,e),e instanceof n&&e._removeParent(this)}};Xt.EMPTY=(()=>{let n=new Xt;return n.closed=!0,n})();var SI=Xt.EMPTY;function Cm(n){return n instanceof Xt||n&&"closed"in n&&Se(n.remove)&&Se(n.add)&&Se(n.unsubscribe)}function aP(n){Se(n)?n():n.unsubscribe()}var Hr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wu={setTimeout(n,e,...t){let{delegate:r}=Wu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Wu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sm(n){Wu.setTimeout(()=>{let{onUnhandledError:e}=Hr;if(e)e(n);else throw n})}function Ga(){}var cP=DI("C",void 0,void 0);function uP(n){return DI("E",void 0,n)}function lP(n){return DI("N",n,void 0)}function DI(n,e,t){return{kind:n,value:e,error:t}}var Wa=null;function Ku(n){if(Hr.useDeprecatedSynchronousErrorHandling){let e=!Wa;if(e&&(Wa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Wa;if(Wa=null,t)throw r}}else n()}function dP(n){Hr.useDeprecatedSynchronousErrorHandling&&Wa&&(Wa.errorThrown=!0,Wa.error=n)}var Ka=class extends Xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cm(e)&&e.add(this)):this.destination=o4}static create(e,t,r){return new Qu(e,t,r)}next(e){this.isStopped?RI(lP(e),this):this._next(e)}error(e){this.isStopped?RI(uP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?RI(cP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},i4=Function.prototype.bind;function AI(n,e){return i4.call(n,e)}var PI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Dm(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Dm(r)}else Dm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Dm(t)}}},Qu=class extends Ka{constructor(e,t,r){super();let i;if(Se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Hr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&AI(e.next,s),error:e.error&&AI(e.error,s),complete:e.complete&&AI(e.complete,s)}):i=e}this.destination=new PI(i)}};function Dm(n){Hr.useDeprecatedSynchronousErrorHandling?dP(n):Sm(n)}function s4(n){throw n}function RI(n,e){let{onStoppedNotification:t}=Hr;t&&Wu.setTimeout(()=>t(n,e))}var o4={closed:!0,next:Ga,error:s4,complete:Ga};var Yu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qr(n){return n}function NI(...n){return kI(n)}function kI(n){return n.length===0?qr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var we=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=c4(t)?t:new Qu(t,r,i);return Ku(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=hP(r),new r((i,s)=>{let o=new Qu({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Yu](){return this}pipe(...t){return kI(t)(this)}toPromise(t){return t=hP(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function hP(n){var e;return(e=n??Hr.Promise)!==null&&e!==void 0?e:Promise}function a4(n){return n&&Se(n.next)&&Se(n.error)&&Se(n.complete)}function c4(n){return n&&n instanceof Ka||a4(n)&&Cm(n)}function u4(n){return Se(n?.lift)}function Xe(n){return e=>{if(u4(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ze(n,e,t,r,i){return new MI(n,e,t,r,i)}var MI=class extends Ka{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var fP=Gu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Tt=(()=>{class n extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Am(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new fP}next(t){Ku(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ku(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ku(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?SI:(this.currentObservers=null,s.push(t),new Xt(()=>{this.currentObservers=null,za(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new we;return t.source=this,t}}return n.create=(e,t)=>new Am(e,t),n})(),Am=class extends Tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:SI}};var Lt=class extends Tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xI={now(){return(xI.delegate||Date).now()},delegate:void 0};var Rm=class extends Xt{constructor(e,t){super()}schedule(e,t=0){return this}};var ch={setInterval(n,e,...t){let{delegate:r}=ch;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ch;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ju=class extends Rm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ch.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ch.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,za(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xu.now=xI.now;var Zu=class extends Xu{constructor(e,t=Xu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var OI=new Zu(Ju);var Pm=class extends Ju{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Nm=class extends Zu{};var FI=new Nm(Pm);var hn=new we(n=>n.complete());function pP(n){return n&&Se(n.schedule)}function mP(n){return n[n.length-1]}function km(n){return Se(mP(n))?n.pop():void 0}function Oo(n){return pP(mP(n))?n.pop():void 0}function LI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function yP(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(m){o(m)}}function c(h){try{d(r.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function gP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qa(n){return this instanceof Qa?(this.v=n,this):new Qa(n)}function _P(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(C){return function(R){return Promise.resolve(R).then(C,m)}}function a(C,R){r[C]&&(i[C]=function(P){return new Promise(function(k,B){s.push([C,P,k,B])>1||c(C,P)})},R&&(i[C]=R(i[C])))}function c(C,R){try{d(r[C](R))}catch(P){v(s[0][3],P)}}function d(C){C.value instanceof Qa?Promise.resolve(C.value.v).then(h,m):v(s[0][2],C)}function h(C){c("next",C)}function m(C){c("throw",C)}function v(C,R){C(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function vP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gP=="function"?gP(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Mm=n=>n&&typeof n.length=="number"&&typeof n!="function";function xm(n){return Se(n?.then)}function Om(n){return Se(n[Yu])}function Fm(n){return Symbol.asyncIterator&&Se(n?.[Symbol.asyncIterator])}function Lm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function l4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vm=l4();function Um(n){return Se(n?.[Vm])}function jm(n){return _P(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Qa(t.read());if(i)return yield Qa(void 0);yield yield Qa(r)}}finally{t.releaseLock()}})}function Bm(n){return Se(n?.getReader)}function Vt(n){if(n instanceof we)return n;if(n!=null){if(Om(n))return d4(n);if(Mm(n))return h4(n);if(xm(n))return f4(n);if(Fm(n))return EP(n);if(Um(n))return p4(n);if(Bm(n))return m4(n)}throw Lm(n)}function d4(n){return new we(e=>{let t=n[Yu]();if(Se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function h4(n){return new we(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function f4(n){return new we(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Sm)})}function p4(n){return new we(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function EP(n){return new we(e=>{g4(n,e).catch(t=>e.error(t))})}function m4(n){return EP(jm(n))}function g4(n,e){var t,r,i,s;return yP(this,void 0,void 0,function*(){try{for(t=vP(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function jn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Fo(n,e=0){return Xe((t,r)=>{t.subscribe(Ze(r,i=>jn(r,n,()=>r.next(i),e),()=>jn(r,n,()=>r.complete(),e),i=>jn(r,n,()=>r.error(i),e)))})}function Lo(n,e=0){return Xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IP(n,e){return Vt(n).pipe(Lo(e),Fo(e))}function wP(n,e){return Vt(n).pipe(Lo(e),Fo(e))}function TP(n,e){return new we(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bP(n,e){return new we(t=>{let r;return jn(t,e,()=>{r=n[Vm](),jn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Se(r?.return)&&r.return()})}function $m(n,e){if(!n)throw new Error("Iterable cannot be null");return new we(t=>{jn(t,e,()=>{let r=n[Symbol.asyncIterator]();jn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function CP(n,e){return $m(jm(n),e)}function SP(n,e){if(n!=null){if(Om(n))return IP(n,e);if(Mm(n))return TP(n,e);if(xm(n))return wP(n,e);if(Fm(n))return $m(n,e);if(Um(n))return bP(n,e);if(Bm(n))return CP(n,e)}throw Lm(n)}function Ut(n,e){return e?SP(n,e):Vt(n)}function Le(...n){let e=Oo(n);return Ut(n,e)}function VI(n,e){let t=Se(n)?n:()=>n,r=i=>i.error(t());return new we(e?i=>e.schedule(r,0,i):r)}function uh(n){return!!n&&(n instanceof we||Se(n.lift)&&Se(n.subscribe))}var Ya=Gu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function We(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:y4}=Array;function _4(n,e){return y4(e)?n(...e):n(e)}function Hm(n){return We(e=>_4(n,e))}var{isArray:v4}=Array,{getPrototypeOf:E4,prototype:I4,keys:w4}=Object;function qm(n){if(n.length===1){let e=n[0];if(v4(e))return{args:e,keys:null};if(T4(e)){let t=w4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function T4(n){return n&&typeof n=="object"&&E4(n)===I4}function zm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function UI(...n){let e=Oo(n),t=km(n),{args:r,keys:i}=qm(n);if(r.length===0)return Ut([],e);let s=new we(b4(r,e,i?o=>zm(i,o):qr));return t?s.pipe(Hm(t)):s}function b4(n,e,t=qr){return r=>{DP(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)DP(e,()=>{let d=Ut(n[c],e),h=!1;d.subscribe(Ze(r,m=>{s[c]=m,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function DP(n,e,t){n?jn(t,n,e):e()}function AP(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,m=!1,v=()=>{m&&!c.length&&!d&&e.complete()},C=P=>d<r?R(P):c.push(P),R=P=>{s&&e.next(P),d++;let k=!1;Vt(t(P,h++)).subscribe(Ze(e,B=>{i?.(B),s?C(B):e.next(B)},()=>{k=!0},void 0,()=>{if(k)try{for(d--;c.length&&d<r;){let B=c.shift();o?jn(e,o,()=>R(B)):R(B)}v()}catch(B){e.error(B)}}))};return n.subscribe(Ze(e,C,()=>{m=!0,v()})),()=>{a?.()}}function xn(n,e,t=1/0){return Se(e)?xn((r,i)=>We((s,o)=>e(r,s,i,o))(Vt(n(r,i))),t):(typeof e=="number"&&(t=e),Xe((r,i)=>AP(r,i,n,t)))}function RP(n=1/0){return xn(qr,n)}function PP(){return RP(1)}function el(...n){return PP()(Ut(n,Oo(n)))}function lh(n){return new we(e=>{Vt(n()).subscribe(e)})}function jI(...n){let e=km(n),{args:t,keys:r}=qm(n),i=new we(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let m=!1;Vt(t[h]).subscribe(Ze(s,v=>{m||(m=!0,d--),a[h]=v},()=>c--,void 0,()=>{(!c||!m)&&(d||s.next(r?zm(r,a):a),s.complete())}))}});return e?i.pipe(Hm(e)):i}var ys=new we(Ga);function Dn(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>n.call(e,s,i++)&&r.next(s)))})}function dh(n){return Xe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ze(t,void 0,void 0,o=>{s=Vt(n(o,dh(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Gm(n,e){return Se(e)?xn(n,e,1):xn(n,1)}function NP(n){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fn(n){return n<=0?()=>hn:Xe((e,t)=>{let r=0;e.subscribe(Ze(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function kP(n=C4){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function C4(){return new Ya}function BI(n){return Xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function _s(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Dn((i,s)=>n(i,s,r)):qr,fn(1),t?NP(e):kP(()=>new Ya))}function Wm(n){return n<=0?()=>hn:Xe((e,t)=>{let r=[];e.subscribe(Ze(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Km(n){return Dn((e,t)=>n<=t)}function $I(...n){let e=Oo(n);return Xe((t,r)=>{(e?el(n,t,e):el(n,t)).subscribe(r)})}function Bn(n,e){return Xe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ze(r,c=>{i?.unsubscribe();let d=0,h=s++;Vt(n(c,h)).subscribe(i=Ze(r,m=>r.next(e?e(c,m,h,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function hh(n){return Xe((e,t)=>{Vt(n).subscribe(Ze(t,()=>t.complete(),Ga)),!t.closed&&e.subscribe(t)})}function wi(n,e,t){let r=Se(n)||e||t?{next:n,error:e,complete:t}:n;return r?Xe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ze(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):qr}var HI;function Qm(){return HI}function Ti(n){let e=HI;return HI=n,e}var MP=Symbol("NotFound");function tl(n){return n===MP||n?.name==="\u0275NotFound"}var Vo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},rw=new Vo("21.1.2");var ng="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super(ws(e,t)),this.code=e}};function S4(n){return`NG0${Math.abs(n)}`}function ws(n,e){return`${S4(n)}${e?": "+e:""}`}var zr=globalThis;function et(n){for(let e in n)if(n[e]===et)return e;throw Error("")}function VP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Es(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Es).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function iw(n,e){return n?e?`${n} ${e}`:n:e||""}var D4=et({__forward_ref__:et});function Ts(n){return n.__forward_ref__=Ts,n.toString=function(){return Es(this())},n}function pn(n){return sw(n)?n():n}function sw(n){return typeof n=="function"&&n.hasOwnProperty(D4)&&n.__forward_ref__===Ts}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nr(n){return{providers:n.providers||[],imports:n.imports||[]}}function vh(n){return A4(n,rg)}function ow(n){return vh(n)!==null}function A4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function R4(n){let e=n?.[rg]??null;return e||null}function zI(n){return n&&n.hasOwnProperty(Jm)?n[Jm]:null}var rg=et({\u0275prov:et}),Jm=et({\u0275inj:et}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aw(n){return n&&!!n.\u0275providers}var cw=et({\u0275cmp:et}),uw=et({\u0275dir:et}),lw=et({\u0275pipe:et}),dw=et({\u0275mod:et}),ph=et({\u0275fac:et}),tc=et({__NG_ELEMENT_ID__:et}),xP=et({__NG_ENV_ID__:et});function hw(n){return ig(n,"@NgModule"),n[dw]||null}function Ho(n){return ig(n,"@Component"),n[cw]||null}function fw(n){return ig(n,"@Directive"),n[uw]||null}function UP(n){return ig(n,"@Pipe"),n[lw]||null}function ig(n,e){if(n==null)throw new q(-919,!1)}function rl(n){return typeof n=="string"?n:n==null?"":String(n)}var jP=et({ngErrorCode:et}),P4=et({ngErrorMessage:et}),N4=et({ngTokenPath:et});function pw(n,e){return BP("",-200,e)}function sg(n,e){throw new q(-201,!1)}function BP(n,e,t){let r=new q(e,n);return r[jP]=e,r[P4]=n,t&&(r[N4]=t),r}function k4(n){return n[jP]}var GI;function $P(){return GI}function On(n){let e=GI;return GI=n,e}function mw(n,e,t){let r=vh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;sg(n,"")}var M4={},Ja=M4,WI="__NG_DI_FLAG__",KI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Xa(t)||0;try{return this.injector.get(e,r&8?null:Ja,r)}catch(i){if(tl(i))return i;throw i}}};function x4(n,e=0){let t=Qm();if(t===void 0)throw new q(-203,!1);if(t===null)return mw(n,void 0,e);{let r=O4(e),i=t.retrieve(n,r);if(tl(i)){if(r.optional)return null;throw i}return i}}function pe(n,e=0){return($P()||x4)(pn(n),e)}function j(n,e){return pe(n,Xa(e))}function Xa(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function O4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function QI(n){let e=[];for(let t=0;t<n.length;t++){let r=pn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=F4(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(pe(i,s))}else e.push(pe(r))}return e}function HP(n,e){return n[WI]=e,n.prototype[WI]=e,n}function F4(n){return n[WI]}function Uo(n,e){let t=n.hasOwnProperty(ph);return t?n[ph]:null}function og(n,e){n.forEach(t=>Array.isArray(t)?og(t,e):e(t))}function gw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Eh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function zP(n,e,t){let r=il(n,e);return r>=0?n[r|1]=t:(r=~r,qP(n,r,e,t)),r}function ag(n,e){let t=il(n,e);if(t>=0)return n[t|1]}function il(n,e){return L4(n,e,1)}function L4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var qo={},tr=[],nc=new Z(""),yw=new Z("",-1),_w=new Z(""),mh=class{get(e,t=Ja){if(t===Ja){let i=BP("",-201);throw i.name="\u0275NotFound",i}return t}};function mn(n){return{\u0275providers:n}}function GP(n){return mn([{provide:nc,multi:!0,useValue:n}])}function WP(...n){return{\u0275providers:vw(!0,n),\u0275fromNgModule:!0}}function vw(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return og(e,o=>{let a=o;Xm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&KP(i,s),t}function KP(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ew(i,s=>{e(s,r)})}}function Xm(n,e,t,r){if(n=pn(n),!n)return!1;let i=null,s=zI(n),o=!s&&Ho(n);if(!s&&!o){let c=n.ngModule;if(s=zI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)Xm(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;og(s.imports,h=>{Xm(h,e,t,r)&&(d||=[],d.push(h))}),d!==void 0&&KP(d,e)}if(!a){let d=Uo(i)||(()=>new i);e({provide:i,useFactory:d,deps:tr},i),e({provide:_w,useValue:i,multi:!0},i),e({provide:nc,useValue:()=>pe(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;Ew(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Ew(n,e){for(let t of n)aw(t)&&(t=t.\u0275providers),Array.isArray(t)?Ew(t,e):e(t)}var V4=et({provide:String,useValue:et});function QP(n){return n!==null&&typeof n=="object"&&V4 in n}function U4(n){return!!(n&&n.useExisting)}function j4(n){return!!(n&&n.useFactory)}function Za(n){return typeof n=="function"}function YP(n){return!!n.useClass}var Ih=new Z(""),Ym={},OP={},qI;function wh(){return qI===void 0&&(qI=new mh),qI}var St=class{},ec=class extends St{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,JI(e,o=>this.processProvider(o)),this.records.set(yw,nl(void 0,this)),i.has("environment")&&this.records.set(St,nl(void 0,this));let s=this.records.get(Ih);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_w,tr,{self:!0}))}retrieve(e,t){let r=Xa(t)||0;try{return this.get(e,Ja,r)}catch(i){if(tl(i))return i;throw i}}destroy(){fh(this),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return fh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fh(this);let t=Ti(this),r=On(void 0),i;try{return e()}finally{Ti(t),On(r)}}get(e,t=Ja,r){if(fh(this),e.hasOwnProperty(xP))return e[xP](this);let i=Xa(r),s,o=Ti(this),a=On(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=z4(e)&&vh(e);h&&this.injectableDefInScope(h)?d=nl(YI(e),Ym):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?wh():this.parent;return t=i&8&&t===Ja?null:t,c.get(e,t)}catch(c){let d=k4(c);throw d===-200||d===-201?new q(d,null):c}finally{On(a),Ti(o)}}resolveInjectorInitializers(){let e=de(null),t=Ti(this),r=On(void 0),i;try{let s=this.get(nc,tr,{self:!0});for(let o of s)o()}finally{Ti(t),On(r),de(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Es(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=pn(e);let t=Za(e)?e:pn(e&&e.provide),r=$4(e);if(!Za(e)&&e.multi===!0){let i=this.records.get(t);i||(i=nl(void 0,Ym,!0),i.factory=()=>QI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=de(null);try{if(t.value===OP)throw pw(Es(e));return t.value===Ym&&(t.value=OP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&q4(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{de(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=pn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function YI(n){let e=vh(n),t=e!==null?e.factory:Uo(n);if(t!==null)return t;if(n instanceof Z)throw new q(204,!1);if(n instanceof Function)return B4(n);throw new q(204,!1)}function B4(n){if(n.length>0)throw new q(204,!1);let t=R4(n);return t!==null?()=>t.factory(n):()=>new n}function $4(n){if(QP(n))return nl(void 0,n.useValue);{let e=Iw(n);return nl(e,Ym)}}function Iw(n,e,t){let r;if(Za(n)){let i=pn(n);return Uo(i)||YI(i)}else if(QP(n))r=()=>pn(n.useValue);else if(j4(n))r=()=>n.useFactory(...QI(n.deps||[]));else if(U4(n))r=(i,s)=>pe(pn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=pn(n&&(n.useClass||n.provide));if(H4(n))r=()=>new i(...QI(n.deps));else return Uo(i)||YI(i)}return r}function fh(n){if(n.destroyed)throw new q(205,!1)}function nl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function H4(n){return!!n.deps}function q4(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function z4(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function JI(n,e){for(let t of n)Array.isArray(t)?JI(t,e):t&&aw(t)?JI(t.\u0275providers,e):e(t)}function jt(n,e){let t;n instanceof ec?(fh(n),t=n):t=new KI(n);let r,i=Ti(t),s=On(void 0);try{return e()}finally{Ti(i),On(s)}}function JP(){return $P()!==void 0||Qm()!=null}var Gr=0,ye=1,Te=2,tn=3,gr=4,yr=5,sl=6,ol=7,Pt=8,bs=9,bi=10,bt=11,al=12,ww=13,rc=14,rr=15,ic=16,sc=17,oc=18,Cs=19,Tw=20,vs=21,cg=22,jo=23,ir=24,ug=25,ac=26,Nt=27,XP=1,bw=6,zo=7,Th=8,bh=9,kt=10;function Ci(n){return Array.isArray(n)&&typeof n[XP]=="object"}function Wr(n){return Array.isArray(n)&&n[XP]===!0}function Cw(n){return(n.flags&4)!==0}function Go(n){return n.componentOffset>-1}function Ch(n){return(n.flags&1)===1}function Si(n){return!!n.template}function cl(n){return(n[Te]&512)!==0}function cc(n){return(n[Te]&256)===256}var Sw="svg",ZP="math";function _r(n){for(;Array.isArray(n);)n=n[Gr];return n}function Dw(n,e){return _r(e[n])}function Kr(n,e){return _r(e[n.index])}function Sh(n,e){return n.data[e]}function Aw(n,e){return n[e]}function Rw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vr(n,e){let t=e[n];return Ci(t)?t:t[Gr]}function lg(n){return(n[Te]&128)===128}function eN(n){return Wr(n[tn])}function Er(n,e){return e==null?null:n[e]}function Pw(n){n[sc]=0}function Nw(n){n[Te]&1024||(n[Te]|=1024,lg(n)&&ul(n))}function tN(n,e){for(;n>0;)e=e[rc],n--;return e}function Dh(n){return!!(n[Te]&9216||n[ir]?.dirty)}function dg(n){n[bi].changeDetectionScheduler?.notify(8),n[Te]&64&&(n[Te]|=1024),Dh(n)&&ul(n)}function ul(n){n[bi].changeDetectionScheduler?.notify(0);let e=Bo(n);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!lg(e)));)e=Bo(e)}function kw(n,e){if(cc(n))throw new q(911,!1);n[vs]===null&&(n[vs]=[]),n[vs].push(e)}function nN(n,e){if(n[vs]===null)return;let t=n[vs].indexOf(e);t!==-1&&n[vs].splice(t,1)}function Bo(n){let e=n[tn];return Wr(e)?e[tn]:e}function rN(n){return n[ol]??=[]}function iN(n){return n.cleanup??=[]}var Re={lFrame:_N(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var XI=!1;function sN(){return Re.lFrame.elementDepthCount}function oN(){Re.lFrame.elementDepthCount++}function Mw(){Re.lFrame.elementDepthCount--}function xw(){return Re.bindingsEnabled}function aN(){return Re.skipHydrationRootTNode!==null}function Ow(n){return Re.skipHydrationRootTNode===n}function Fw(){Re.skipHydrationRootTNode=null}function Ne(){return Re.lFrame.lView}function gn(){return Re.lFrame.tView}function ue(n){return Re.lFrame.contextLView=n,n[Pt]}function le(n){return Re.lFrame.contextLView=null,n}function An(){let n=Lw();for(;n!==null&&n.type===64;)n=n.parent;return n}function Lw(){return Re.lFrame.currentTNode}function cN(){let n=Re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ll(n,e){let t=Re.lFrame;t.currentTNode=n,t.isParent=e}function Vw(){return Re.lFrame.isParent}function uN(){Re.lFrame.isParent=!1}function lN(){return Re.lFrame.contextLView}function Uw(){return XI}function gh(n){let e=XI;return XI=n,e}function jw(){let n=Re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function dN(){return Re.lFrame.bindingIndex}function hN(n){return Re.lFrame.bindingIndex=n}function uc(){return Re.lFrame.bindingIndex++}function Bw(n){let e=Re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fN(){return Re.lFrame.inI18n}function pN(n,e){let t=Re.lFrame;t.bindingIndex=t.bindingRootIndex=n,hg(e)}function mN(){return Re.lFrame.currentDirectiveIndex}function hg(n){Re.lFrame.currentDirectiveIndex=n}function gN(n){let e=Re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $w(n){Re.lFrame.currentQueryIndex=n}function G4(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[yr]:null}function Hw(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=G4(s),i===null||(s=s[rc],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Re.lFrame=yN();return r.currentTNode=e,r.lView=n,!0}function fg(n){let e=yN(),t=n[ye];Re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yN(){let n=Re.lFrame,e=n===null?null:n.child;return e===null?_N(n):e}function _N(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vN(){let n=Re.lFrame;return Re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var qw=vN;function pg(){let n=vN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function EN(n){return(Re.lFrame.contextLView=tN(n,Re.lFrame.contextLView))[Pt]}function Ss(){return Re.lFrame.selectedIndex}function Wo(n){Re.lFrame.selectedIndex=n}function mg(){let n=Re.lFrame;return Sh(n.tView,n.selectedIndex)}function dl(){Re.lFrame.currentNamespace=Sw}function hl(){W4()}function W4(){Re.lFrame.currentNamespace=null}function IN(){return Re.lFrame.currentNamespace}var wN=!0;function gg(){return wN}function yg(n){wN=n}function ZI(n,e=null,t=null,r){let i=zw(n,e,t,r);return i.resolveInjectorInitializers(),i}function zw(n,e=null,t=null,r,i=new Set){let s=[t||tr,WP(n)];return r=r||(typeof n=="object"?void 0:Es(n)),new ec(s,e||wh(),r||null,i)}var mt=class n{static THROW_IF_NOT_FOUND=Ja;static NULL=new mh;static create(e,t){if(Array.isArray(e))return ZI({name:""},t,e,"");{let r=e.name??"";return ZI({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:n,providedIn:"any",factory:()=>pe(yw)});static __NG_ELEMENT_ID__=-1},Dt=new Z(""),Ir=(()=>{class n{static __NG_ELEMENT_ID__=K4;static __NG_ENV_ID__=t=>t}return n})(),Zm=class extends Ir{_lView;constructor(e){super(),this._lView=e}get destroyed(){return cc(this._lView)}onDestroy(e){let t=this._lView;return kw(t,e),()=>nN(t,e)}};function K4(){return new Zm(Ne())}var TN=!1,bN=new Z(""),Ds=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Lt(!1);debugTaskTracker=j(bN,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new we(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),ew=class extends Tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,JP()&&(this.destroyRef=j(Ir,{optional:!0})??void 0,this.pendingTasks=j(Ds,{optional:!0})??void 0)}emit(e){let t=de(null);try{super.next(e)}finally{de(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Xt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=ew;function eg(...n){}function Gw(n){let e,t;function r(){n=eg;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function CN(n){return queueMicrotask(()=>n()),()=>{n=eg}}var Ww="isAngularZone",yh=Ww+"_ID",Q4=0,tt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=TN}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,X4(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ww)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Y4,eg,eg);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Y4={};function Kw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function J4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Gw(()=>{n.callbackScheduled=!1,tw(n),n.isCheckStableRunning=!0,Kw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),tw(n)}function X4(n){let e=()=>{J4(n)},t=Q4++;n._inner=n._inner.fork({name:"angular",properties:{[Ww]:!0,[yh]:t,[yh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(Z4(c))return r.invokeTask(s,o,a,c);try{return FP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),LP(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return FP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!e$(c)&&e(),LP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,tw(n),Kw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function tw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function FP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LP(n){n._nesting--,Kw(n)}var _h=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Z4(n){return SN(n,"__ignore_ng_zone__")}function e$(n){return SN(n,"__scheduler_tick__")}function SN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Is=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sr=new Z("",{factory:()=>{let n=j(tt),e=j(St),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Is),t.handleError(r))})}}}),DN={provide:nc,useValue:()=>{let n=j(Is,{optional:!0})},multi:!0},t$=new Z("",{factory:()=>{let n=j(Dt).defaultView;if(!n)return;let e=j(sr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(Ir).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Qw(){return mn([GP(()=>{j(t$)})])}function Pe(n,e){let[t,r,i]=wI(n,e?.equal),s=t,o=s[Mn];return s.set=r,s.update=i,s.asReadonly=AN.bind(s),s}function AN(){let n=this[Mn];if(n.readonlyFn===void 0){let e=()=>this();e[Mn]=n,n.readonlyFn=e}return n.readonlyFn}var _g=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=n$}return n})();function n$(){return new _g(Ne(),An())}var $o=class{},Ah=new Z("",{factory:()=>!0});var Yw=new Z(""),fl=(()=>{class n{internalPendingTasks=j(Ds);scheduler=j($o);errorHandler=j(sr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),vg=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new nw})}return n})(),nw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},tg=class{[Mn];constructor(e){this[Mn]=e}destroy(){this[Mn].destroy()}};function pl(n,e){let t=e?.injector??j(mt),r=e?.manualCleanup!==!0?t.get(Ir):null,i,s=t.get(_g,null,{optional:!0}),o=t.get($o);return s!==null?(i=s$(s.view,o,n),r instanceof Zm&&r._lView===s.view&&(r=null)):i=o$(n,t.get(vg),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new tg(i)}var RN=ae(U({},bI),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=gh(!1);try{CI(this)}finally{gh(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=de(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],de(n)}}}),r$=ae(U({},RN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(qa(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),i$=ae(U({},RN),{consumerMarkedDirty(){this.view[Te]|=8192,ul(this.view),this.notifier.notify(13)},destroy(){if(qa(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[jo]?.delete(this)}});function s$(n,e,t){let r=Object.create(i$);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=PN(r,t),n[jo]??=new Set,n[jo].add(r),r.consumerMarkedDirty(r),r}function o$(n,e,t){let r=Object.create(r$);return r.fn=PN(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function PN(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Bt(n){return TI(n)}function Il(n){return{toString:n}.toString()}var Eg="__parameters__";function h$(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function f$(n,e,t){return Il(()=>{let r=h$(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let m=c.hasOwnProperty(Eg)?c[Eg]:Object.defineProperty(c,Eg,{value:[]})[Eg];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var nn=HP(f$("Optional"),8);function p$(n){return typeof n=="function"}function ok(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Dg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Pi=(()=>{let n=()=>ak;return n.ngInherit=!0,n})();function ak(n){return n.type.prototype.ngOnChanges&&(n.setInput=g$),m$}function m$(){let n=uk(this),e=n?.current;if(e){let t=n.previous;if(t===qo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function g$(n,e,t,r,i){let s=this.declaredInputs[r],o=uk(n)||y$(n,{previous:qo,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Dg(d&&d.currentValue,t,c===qo),ok(n,e,i,t)}var ck="__ngSimpleChanges__";function uk(n){return n[ck]||null}function y$(n,e){return n[ck]=e}var NN=[];var ct=function(n,e=null,t){for(let r=0;r<NN.length;r++){let i=NN[r];i(n,e,t)}},Ke=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ke||{});function _$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ak(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function lk(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function bg(n,e,t){dk(n,e,3,t)}function Cg(n,e,t,r){(n[Te]&3)===t&&dk(n,e,t,r)}function Jw(n,e){let t=n[Te];(t&3)===e&&(t&=16383,t+=1,n[Te]=t)}function dk(n,e,t,r){let i=r!==void 0?n[sc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[sc]+=65536),(a<s||s==-1)&&(v$(n,t,e,c),n[sc]=(n[sc]&4294901760)+c+2),c++}function kN(n,e){ct(Ke.LifecycleHookStart,n,e);let t=de(null);try{e.call(n)}finally{de(t),ct(Ke.LifecycleHookEnd,n,e)}}function v$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Te]>>14<n[sc]>>16&&(n[Te]&3)===e&&(n[Te]+=16384,kN(a,s)):kN(a,s)}var gl=-1,dc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function E$(n){return(n.flags&8)!==0}function I$(n){return(n.flags&16)!==0}function w$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];T$(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function hk(n){return n===3||n===4||n===6}function T$(n){return n.charCodeAt(0)===64}function yl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?MN(n,t,i,null,e[++r]):MN(n,t,i,null,null))}}return n}function MN(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function fk(n){return n!==gl}function Ag(n){return n&32767}function b$(n){return n>>16}function Rg(n,e){let t=b$(n),r=e;for(;t>0;)r=r[rc],t--;return r}var cT=!0;function Pg(n){let e=cT;return cT=n,e}var C$=256,pk=C$-1,mk=5,S$=0,Di={};function D$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(tc)&&(r=t[tc]),r==null&&(r=t[tc]=S$++);let i=r&pk,s=1<<i;e.data[n+(i>>mk)]|=s}function Ng(n,e){let t=gk(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,Xw(r.data,n),Xw(e,null),Xw(r.blueprint,null));let i=RT(n,e),s=n.injectorIndex;if(fk(i)){let o=Ag(i),a=Rg(i,e),c=a[ye].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function Xw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function gk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function RT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Ik(i),r===null)return gl;if(t++,i=i[rc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return gl}function uT(n,e,t){D$(n,e,t)}function A$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(hk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function yk(n,e,t){if(t&8||n!==void 0)return n;sg(e,"NodeInjector")}function _k(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[bs],s=On(void 0);try{return i?i.get(e,r,t&8):mw(e,r,t&8)}finally{On(s)}}return yk(r,e,t)}function vk(n,e,t,r=0,i){if(n!==null){if(e[Te]&2048&&!(r&2)){let o=M$(n,e,t,r,Di);if(o!==Di)return o}let s=Ek(n,e,t,r,Di);if(s!==Di)return s}return _k(e,t,r,i)}function Ek(n,e,t,r,i){let s=N$(t);if(typeof s=="function"){if(!Hw(e,n,r))return r&1?yk(i,t,r):_k(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))sg(t);else return o}finally{qw()}}else if(typeof s=="number"){let o=null,a=gk(n,e),c=gl,d=r&1?e[rr][yr]:null;for((a===-1||r&4)&&(c=a===-1?RT(n,e):e[a+8],c===gl||!ON(r,!1)?a=-1:(o=e[ye],a=Ag(c),e=Rg(c,e)));a!==-1;){let h=e[ye];if(xN(s,a,h.data)){let m=R$(a,e,t,o,r,d);if(m!==Di)return m}c=e[a+8],c!==gl&&ON(r,e[ye].data[a+8]===d)&&xN(s,a,e)?(o=h,a=Ag(c),e=Rg(c,e)):a=-1}}return i}function R$(n,e,t,r,i,s){let o=e[ye],a=o.data[n+8],c=r==null?Go(a)&&cT:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=P$(a,o,t,c,d);return h!==null?kg(e,o,h,a,i):Di}function P$(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,m=r?a:a+h,v=i?a+h:d;for(let C=m;C<v;C++){let R=o[C];if(C<c&&t===R||C>=c&&R.type===t)return C}if(i){let C=o[c];if(C&&Si(C)&&C.type===t)return c}return null}function kg(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof dc){let a=s;if(a.resolving)throw pw("");let c=Pg(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,m=a.injectImpl?On(a.injectImpl):null,v=Hw(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&_$(t,o[t],e)}finally{m!==null&&On(m),Pg(c),a.resolving=!1,qw()}}return s}function N$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(tc)?n[tc]:void 0;return typeof e=="number"?e>=0?e&pk:k$:e}function xN(n,e,t){let r=1<<n;return!!(t[e+(n>>mk)]&r)}function ON(n,e){return!(n&2)&&!(n&1&&e)}var lc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return vk(this._tNode,this._lView,e,Xa(r),t)}};function k$(){return new lc(An(),Ne())}function mc(n){return Il(()=>{let e=n.prototype.constructor,t=e[ph]||lT(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ph]||lT(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function lT(n){return sw(n)?()=>{let e=lT(pn(n));return e&&e()}:Uo(n)}function M$(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Te]&2048&&!cl(o);){let a=Ek(s,o,t,r|2,Di);if(a!==Di)return a;let c=s.parent;if(!c){let d=o[Tw];if(d){let h=d.get(t,Di,r);if(h!==Di)return h}c=Ik(o),o=o[rc]}s=c}return i}function Ik(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[yr]:null}function Vh(n){return A$(An(),n)}function x$(){return zg(An(),Ne())}function zg(n,e){return new Jr(Kr(n,e))}var Jr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=x$}return n})();function wk(n){return(n.flags&128)===128}var PT=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(PT||{}),Tk=new Map,O$=0;function F$(){return O$++}function L$(n){Tk.set(n[Cs],n)}function dT(n){Tk.delete(n[Cs])}var FN="__ngContext__";function _l(n,e){Ci(e)?(n[FN]=e[Cs],L$(e)):n[FN]=e}function bk(n){return Sk(n[al])}function Ck(n){return Sk(n[gr])}function Sk(n){for(;n!==null&&!Wr(n);)n=n[gr];return n}var V$;function NT(n){V$=n}var Gg=new Z("",{factory:()=>U$}),U$="ng";var Wg=new Z(""),gc=new Z("",{providedIn:"platform",factory:()=>"unknown"}),Kg=new Z(""),Qg=new Z("",{factory:()=>j(Dt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Dk="r";var Ak="di";var Rk=!1,Pk=new Z("",{factory:()=>Rk});var j$=(n,e,t,r)=>{};function B$(n,e,t,r){j$(n,e,t,r)}function kT(n){return(n.flags&32)===32}var $$=()=>null;function Nk(n,e,t=!1){return $$(n,e,t)}function kk(n,e){let t=n.contentQueries;if(t!==null){let r=de(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];$w(s),a.contentQueries(2,e[o],o)}}}finally{de(r)}}}function hT(n,e,t){$w(0);let r=de(null);try{e(n,t)}finally{de(r)}}function Mk(n,e,t){if(Cw(e)){let r=de(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{de(r)}}}var Yr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Yr||{});var Ig;function H$(){if(Ig===void 0&&(Ig=null,zr.trustedTypes))try{Ig=zr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ig}function q$(n){return H$()?.createScriptURL(n)||n}var wg;function z$(){if(wg===void 0&&(wg=null,zr.trustedTypes))try{wg=zr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wg}function LN(n){return z$()?.createScriptURL(n)||n}var Mg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ng})`}};function Uh(n){return n instanceof Mg?n.changingThisBreaksApplicationSecurity:n}function MT(n,e){let t=xk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ng})`)}return t===e}function xk(n){return n instanceof Mg&&n.getTypeName()||null}var G$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ok(n){return n=String(n),n.match(G$)?n:"unsafe:"+n}function W$(n,e){return n.createText(e)}function K$(n,e,t){n.setValue(e,t)}function Fk(n,e,t){return n.createElement(e,t)}function xg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Lk(n,e,t){n.appendChild(e,t)}function VN(n,e,t,r,i){r!==null?xg(n,e,t,r,i):Lk(n,e,t)}function Vk(n,e,t,r){n.removeChild(null,e,t,r)}function Q$(n,e,t){n.setAttribute(e,"style",t)}function Y$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Uk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&w$(n,e,r),i!==null&&Y$(n,e,i),s!==null&&Q$(n,e,s)}var Yg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Yg||{});function yn(n){let e=Bk();return e?e.sanitize(Yg.URL,n)||"":MT(n,"URL")?Uh(n):Ok(rl(n))}function jk(n){let e=Bk();if(e)return LN(e.sanitize(Yg.RESOURCE_URL,n)||"");if(MT(n,"ResourceURL"))return LN(Uh(n));throw new q(904,!1)}function xT(n){return q$(n[0])}var J$=new Set(["embed","frame","iframe","media","script"]),X$=new Set(["base","link","script"]);function Z$(n,e){return e==="src"&&J$.has(n)||e==="href"&&X$.has(n)||e==="xlink:href"&&n==="script"?jk:yn}function OT(n,e,t){return Z$(e,t)(n)}function Bk(){let n=Ne();return n&&n[bi].sanitizer}function $k(n){return n instanceof Function?n():n}function e3(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var Hk="ng-template";function t3(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&e3(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(FT(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function FT(n){return n.type===4&&n.value!==Hk}function n3(n,e,t){let r=n.type===4&&!t?Hk:n.value;return e===r}function r3(n,e,t){let r=4,i=n.attrs,s=i!==null?o3(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Qr(r)&&!Qr(c))return!1;if(o&&Qr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!n3(n,c,t)||c===""&&e.length===1){if(Qr(r))return!1;o=!0}}else if(r&8){if(i===null||!t3(n,i,c,t)){if(Qr(r))return!1;o=!0}}else{let d=e[++a],h=i3(c,i,FT(n),t);if(h===-1){if(Qr(r))return!1;o=!0;continue}if(d!==""){let m;if(h>s?m="":m=i[h+1].toLowerCase(),r&2&&d!==m){if(Qr(r))return!1;o=!0}}}}return Qr(r)||o}function Qr(n){return(n&1)===0}function i3(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return a3(e,n)}function s3(n,e,t=!1){for(let r=0;r<e.length;r++)if(r3(n,e[r],t))return!0;return!1}function o3(n){for(let e=0;e<n.length;e++){let t=n[e];if(hk(t))return e}return n.length}function a3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function UN(n,e){return n?":not("+e.trim()+")":e}function c3(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Qr(o)&&(e+=UN(s,i),i=""),r=o,s=s||!Qr(r);t++}return i!==""&&(e+=UN(s,i)),e}function u3(n){return n.map(c3).join(",")}function l3(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Qr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var wr={};function LT(n,e,t,r,i,s,o,a,c,d,h){let m=Nt+r,v=m+i,C=d3(m,v),R=typeof d=="function"?d():d;return C[ye]={type:n,blueprint:C,template:t,queries:null,viewQuery:a,declTNode:e,data:C.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function d3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wr);return t}function h3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=LT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function VT(n,e,t,r,i,s,o,a,c,d,h){let m=e.blueprint.slice();return m[Gr]=i,m[Te]=r|4|128|8|64|1024,(d!==null||n&&n[Te]&2048)&&(m[Te]|=2048),Pw(m),m[tn]=m[rc]=n,m[Pt]=t,m[bi]=o||n&&n[bi],m[bt]=a||n&&n[bt],m[bs]=c||n&&n[bs]||null,m[yr]=s,m[Cs]=F$(),m[sl]=h,m[Tw]=d,m[rr]=e.type==2?n[rr]:m,m}function f3(n,e,t){let r=Kr(e,n),i=h3(t),s=n[bi].rendererFactory,o=UT(n,VT(n,i,null,qk(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function qk(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function zk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function UT(n,e){return n[al]?n[ww][gr]=e:n[al]=e,n[ww]=e,e}function $(n=1){Gk(gn(),Ne(),Ss()+n,!1)}function Gk(n,e,t,r){if(!r)if((e[Te]&3)===3){let s=n.preOrderCheckHooks;s!==null&&bg(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Cg(e,s,0,t)}Wo(t)}var Jg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Jg||{});function fT(n,e,t,r){let i=de(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Jg.SignalBased)!==0&&(c=e[s][Mn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):ok(e,c,s,r)}finally{de(i)}}var Ai=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ai||{}),p3;function jT(n,e){return p3(n,e)}var hc=new Set,BT=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(BT||{}),jh=new Z(""),jN=new Set;function Ni(n){jN.has(n)||(jN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Wk=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})();var Kk=new Z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:j(St)})});function Qk(n,e,t){let r=n.get(Kk);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function m3(n,e){let t=n.get(Kk);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function g3(n,e){for(let[t,r]of e)Qk(n,r.animateFns)}function BN(n,e,t,r){let i=n?.[ac]?.enter;e!==null&&i&&i.has(t.index)&&g3(r,i)}function ml(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Wr(i)?c=i:Ci(i)&&(d=!0,i=i[Gr]);let h=_r(i);n===0&&r!==null?(BN(a,r,s,t),o==null?Lk(e,r,h):xg(e,r,h,o||null,!0)):n===1&&r!==null?(BN(a,r,s,t),xg(e,r,h,o||null,!0)):n===2?$N(a,s,t,m=>{Vk(e,h,d,m)}):n===3&&$N(a,s,t,()=>{e.destroyNode(h)}),c!=null&&R3(e,n,t,c,s,r,o)}}function y3(n,e){Yk(n,e),e[Gr]=null,e[yr]=null}function _3(n,e,t,r,i,s){r[Gr]=i,r[yr]=e,Zg(n,r,t,1,i,s)}function Yk(n,e){e[bi].changeDetectionScheduler?.notify(9),Zg(n,e,e[bt],2,null,null)}function v3(n){let e=n[al];if(!e)return Zw(n[ye],n);for(;e;){let t=null;if(Ci(e))t=e[al];else{let r=e[kt];r&&(t=r)}if(!t){for(;e&&!e[gr]&&e!==n;)Ci(e)&&Zw(e[ye],e),e=e[tn];e===null&&(e=n),Ci(e)&&Zw(e[ye],e),t=e&&e[gr]}e=t}}function $T(n,e){let t=n[bh],r=t.indexOf(e);t.splice(r,1)}function Xg(n,e){if(cc(e))return;let t=e[bt];t.destroyNode&&Zg(n,e,t,3,null,null),v3(e)}function Zw(n,e){if(cc(e))return;let t=de(null);try{e[Te]&=-129,e[Te]|=256,e[ir]&&qa(e[ir]),w3(n,e),I3(n,e),e[ye].type===1&&e[bt].destroy();let r=e[ic];if(r!==null&&Wr(e[tn])){r!==e[tn]&&$T(r,e);let i=e[oc];i!==null&&i.detachView(n)}dT(e)}finally{de(t)}}function $N(n,e,t,r){let i=n?.[ac];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&hc.add(n[Cs]),Qk(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),E3(n,r)}else n&&hc.delete(n[Cs]),r(!1)},i)}function E3(n,e){let t=n[ac]?.running;if(t){t.then(()=>{n[ac].running=void 0,hc.delete(n[Cs]),e(!0)});return}e(!1)}function I3(n,e){let t=n.cleanup,r=e[ol];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[ol]=null);let i=e[vs];if(i!==null){e[vs]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[jo];if(s!==null){e[jo]=null;for(let o of s)o.destroy()}}function w3(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof dc)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ct(Ke.LifecycleHookStart,a,c);try{c.call(a)}finally{ct(Ke.LifecycleHookEnd,a,c)}}else{ct(Ke.LifecycleHookStart,i,s);try{s.call(i)}finally{ct(Ke.LifecycleHookEnd,i,s)}}}}}function T3(n,e,t){return b3(n,e.parent,t)}function b3(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Gr];if(Go(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Yr.None||i===Yr.Emulated)return null}return Kr(r,t)}function C3(n,e,t){return D3(n,e,t)}function S3(n,e,t){return n.type&40?Kr(n,t):null}var D3=S3,HN;function HT(n,e,t,r){let i=T3(n,r,e),s=e[bt],o=r.parent||e[yr],a=C3(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)VN(s,i,t[c],a,!1);else VN(s,i,t,a,!1);HN!==void 0&&HN(s,r,e,t,i)}function Ph(n,e){if(e!==null){let t=e.type;if(t&3)return Kr(e,n);if(t&4)return pT(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ph(n,r);{let i=n[e.index];return Wr(i)?pT(-1,i):_r(i)}}else{if(t&128)return Ph(n,e.next);if(t&32)return jT(e,n)()||_r(n[e.index]);{let r=Jk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Bo(n[rr]);return Ph(i,r)}else return Ph(n,e.next)}}}return null}function Jk(n,e){if(e!==null){let r=n[rr][yr],i=e.projection;return r.projection[i]}return null}function pT(n,e){let t=kt+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return Ph(r,i)}return e[zo]}function qT(n,e,t,r,i,s,o){for(;t!=null;){let a=r[bs];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&_l(_r(c),r),t.flags|=2),!kT(t))if(d&8)qT(n,e,t.child,r,i,s,!1),ml(e,n,a,i,c,t,s,r);else if(d&32){let h=jT(t,r),m;for(;m=h();)ml(e,n,a,i,m,t,s,r);ml(e,n,a,i,c,t,s,r)}else d&16?A3(n,e,r,t,i,s):ml(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Zg(n,e,t,r,i,s){qT(t,r,n.firstChild,e,i,s,!1)}function A3(n,e,t,r,i,s){let o=t[rr],c=o[yr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];ml(e,n,t[bs],i,h,r,s,t)}else{let d=c,h=o[tn];wk(r)&&(d.flags|=128),qT(n,e,d,h,i,s,!0)}}function R3(n,e,t,r,i,s,o){let a=r[zo],c=_r(r);a!==c&&ml(e,n,t,s,a,i,o);for(let d=kt;d<r.length;d++){let h=r[d];Zg(h[ye],h,n,e,s,a)}}function P3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ai.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ai.Important),n.setStyle(t,r,i,s))}}function Xk(n,e,t,r,i){let s=Ss(),o=r&2;try{Wo(-1),o&&e.length>Nt&&Gk(n,e,Nt,!1);let a=o?Ke.TemplateUpdateStart:Ke.TemplateCreateStart;ct(a,i,t),t(r,i)}finally{Wo(s);let a=o?Ke.TemplateUpdateEnd:Ke.TemplateCreateEnd;ct(a,i,t)}}function zT(n,e,t){L3(n,e,t),(t.flags&64)===64&&V3(n,e,t)}function ey(n,e,t=Kr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function N3(n,e,t,r){let s=r.get(Pk,Rk)||t===Yr.ShadowDom||t===Yr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return k3(o),o}function k3(n){M3(n)}var M3=()=>null;function x3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Zk(n,e,t,r,i,s){let o=e[ye];if(GT(n,o,e,t,r)){Go(n)&&F3(e,n.index);return}n.type&3&&(t=x3(t)),O3(n,e,t,r,i,s)}function O3(n,e,t,r,i,s){if(n.type&3){let o=Kr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function F3(n,e){let t=vr(e,n);t[Te]&16||(t[Te]|=64)}function L3(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Go(t)&&f3(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ng(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=kg(e,n,o,t);if(_l(c,e),s!==null&&$3(e,o-r,c,a,t,s),Si(a)){let d=vr(t.index,e);d[Pt]=kg(e,n,o,t)}}}function V3(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=mN();try{Wo(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];hg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&U3(c,d)}}finally{Wo(-1),hg(o)}}function U3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function eM(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];s3(e,s.selectors,!1)&&(r??=[],Si(s)?r.unshift(s):r.push(s))}return r}function j3(n,e,t,r,i,s){let o=Kr(n,e);B3(e[bt],o,s,n.value,t,r,i)}function B3(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?rl(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function $3(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];fT(r,t,c,d)}}function tM(n,e,t,r,i){let s=Nt+t,o=e[ye],a=i(o,e,n,r,t);e[s]=a,ll(n,!0);let c=n.type===2;return c?(Uk(e[bt],a,n),(sN()===0||Ch(n))&&_l(a,e),oN()):_l(a,e),gg()&&(!c||!kT(n))&&HT(o,e,a,n),n}function nM(n){let e=n;return Vw()?uN():(e=e.parent,ll(e,!1)),e}function H3(n,e){let t=n[bs];if(!t)return;let r;try{r=t.get(sr,null)}catch{r=null}r?.(e)}function GT(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],m=e.data[d];fT(m,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];fT(h,d,r,i),a=!0}return a}function q3(n,e){let t=vr(e,n),r=t[ye];z3(r,t);let i=t[Gr];i!==null&&t[sl]===null&&(t[sl]=Nk(i,t[bs])),ct(Ke.ComponentStart);try{WT(r,t,t[Pt])}finally{ct(Ke.ComponentEnd,t[Pt])}}function z3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function WT(n,e,t){fg(e);try{let r=n.viewQuery;r!==null&&hT(1,r,t);let i=n.template;i!==null&&Xk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[oc]?.finishViewCreation(n),n.staticContentQueries&&kk(n,e),n.staticViewQueries&&hT(2,n.viewQuery,t);let s=n.components;s!==null&&G3(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Te]&=-5,pg()}}function G3(n,e){for(let t=0;t<e.length;t++)q3(n,e[t])}function ty(n,e,t,r){let i=de(null);try{let s=e.tView,a=n[Te]&4096?4096:16,c=VT(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[ic]=d;let h=n[oc];return h!==null&&(c[oc]=h.createEmbeddedView(s)),WT(s,c,t),c}finally{de(i)}}function Mh(n,e){return!e||e.firstChild===null||wk(n)}function xh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(_r(s)),Wr(s)&&rM(s,r);let o=t.type;if(o&8)xh(n,e,t.child,r);else if(o&32){let a=jT(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Jk(e,t);if(Array.isArray(a))r.push(...a);else{let c=Bo(e[rr]);xh(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function rM(n,e){for(let t=kt;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&xh(r[ye],r,i,e)}n[zo]!==n[Gr]&&e.push(n[zo])}function iM(n){if(n[ug]!==null){for(let e of n[ug])e.impl.addSequence(e);n[ug].length=0}}var sM=[];function W3(n){return n[ir]??K3(n)}function K3(n){let e=sM.pop()??Object.create(Y3);return e.lView=n,e}function Q3(n){n.lView[ir]!==n&&(n.lView=null,sM.push(n))}var Y3=ae(U({},Hu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ul(n.lView)},consumerOnSignalRead(){this.lView[ir]=this}});function J3(n){let e=n[ir]??Object.create(X3);return e.lView=n,e}var X3=ae(U({},Hu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Bo(n.lView);for(;e&&!oM(e[ye]);)e=Bo(e);e&&Nw(e)},consumerOnSignalRead(){this.lView[ir]=this}});function oM(n){return n.type!==2}function aM(n){if(n[jo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[jo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Te]&8192)}}var Z3=100;function cM(n,e=0){let r=n[bi].rendererFactory,i=!1;i||r.begin?.();try{eH(n,e)}finally{i||r.end?.()}}function eH(n,e){let t=Uw();try{gh(!0),mT(n,e);let r=0;for(;Dh(n);){if(r===Z3)throw new q(103,!1);r++,mT(n,1)}}finally{gh(t)}}function tH(n,e,t,r){if(cc(e))return;let i=e[Te],s=!1,o=!1;fg(e);let a=!0,c=null,d=null;s||(oM(n)?(d=W3(e),c=qu(d)):Im()===null?(a=!1,d=J3(e),c=qu(d)):e[ir]&&(qa(e[ir]),e[ir]=null));try{Pw(e),hN(n.bindingStartIndex),t!==null&&Xk(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let C=n.preOrderCheckHooks;C!==null&&bg(e,C,null)}else{let C=n.preOrderHooks;C!==null&&Cg(e,C,0,null),Jw(e,0)}if(o||nH(e),aM(e),uM(e,0),n.contentQueries!==null&&kk(n,e),!s)if(h){let C=n.contentCheckHooks;C!==null&&bg(e,C)}else{let C=n.contentHooks;C!==null&&Cg(e,C,1),Jw(e,1)}iH(n,e);let m=n.components;m!==null&&dM(e,m,0);let v=n.viewQuery;if(v!==null&&hT(2,v,r),!s)if(h){let C=n.viewCheckHooks;C!==null&&bg(e,C)}else{let C=n.viewHooks;C!==null&&Cg(e,C,2),Jw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cg]){for(let C of e[cg])C();e[cg]=null}s||(iM(e),e[Te]&=-73)}catch(h){throw s||ul(e),h}finally{d!==null&&(sh(d,c),a&&Q3(d)),pg()}}function uM(n,e){for(let t=bk(n);t!==null;t=Ck(t))for(let r=kt;r<t.length;r++){let i=t[r];lM(i,e)}}function nH(n){for(let e=bk(n);e!==null;e=Ck(e)){if(!(e[Te]&2))continue;let t=e[bh];for(let r=0;r<t.length;r++){let i=t[r];Nw(i)}}}function rH(n,e,t){ct(Ke.ComponentStart);let r=vr(e,n);try{lM(r,t)}finally{ct(Ke.ComponentEnd,r[Pt])}}function lM(n,e){lg(n)&&mT(n,e)}function mT(n,e){let r=n[ye],i=n[Te],s=n[ir],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&oh(s)),o||=!1,s&&(s.dirty=!1),n[Te]&=-9217,o)tH(r,n,r.template,n[Pt]);else if(i&8192){let a=de(null);try{aM(n),uM(n,1);let c=r.components;c!==null&&dM(n,c,1),iM(n)}finally{de(a)}}}function dM(n,e,t){for(let r=0;r<e.length;r++)rH(n,e[r],t)}function iH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Wo(~i);else{let s=i,o=t[++r],a=t[++r];pN(o,s);let c=e[s];ct(Ke.HostBindingsUpdateStart,c);try{a(2,c)}finally{ct(Ke.HostBindingsUpdateEnd,c)}}}}finally{Wo(-1)}}function KT(n,e){let t=Uw()?64:1088;for(n[bi].changeDetectionScheduler?.notify(e);n;){n[Te]|=t;let r=Bo(n);if(cl(n)&&!r)return n;n=r}return null}function hM(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function fM(n,e){let t=kt+e;if(t<n.length)return n[t]}function ny(n,e,t,r=!0){let i=e[ye];if(sH(i,e,n,t),r){let o=pT(t,n),a=e[bt],c=a.parentNode(n[zo]);c!==null&&_3(i,n[yr],a,e,c,o)}let s=e[sl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function pM(n,e){let t=Oh(n,e);return t!==void 0&&Xg(t[ye],t),t}function Oh(n,e){if(n.length<=kt)return;let t=kt+e,r=n[t];if(r){let i=r[ic];i!==null&&i!==n&&$T(i,r),e>0&&(n[t-1][gr]=r[gr]);let s=Eh(n,kt+e);y3(r[ye],r);let o=s[oc];o!==null&&o.detachView(s[ye]),r[tn]=null,r[gr]=null,r[Te]&=-129}return r}function sH(n,e,t,r){let i=kt+r,s=t.length;r>0&&(t[i-1][gr]=e),r<s-kt?(e[gr]=t[i],gw(t,kt+r,e)):(t.push(e),e[gr]=null),e[tn]=t;let o=e[ic];o!==null&&t!==o&&mM(o,e);let a=e[oc];a!==null&&a.insertView(n),dg(e),e[Te]|=128}function mM(n,e){let t=n[bh],r=e[tn];if(Ci(r))n[Te]|=2;else{let i=r[tn][rr];e[rr]!==i&&(n[Te]|=2)}t===null?n[bh]=[e]:t.push(e)}var Ko=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ye];return xh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return cc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tn];if(Wr(e)){let t=e[Th],r=t?t.indexOf(this):-1;r>-1&&(Oh(e,r),Eh(t,r))}this._attachedToViewContainer=!1}Xg(this._lView[ye],this._lView)}onDestroy(e){kw(this._lView,e)}markForCheck(){KT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Te]&=-129}reattach(){dg(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,cM(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=cl(this._lView),t=this._lView[ic];t!==null&&!e&&$T(t,this._lView),Yk(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=cl(this._lView),r=this._lView[ic];r!==null&&!t&&mM(r,this._lView),dg(this._lView)}};var Bh=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=oH;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=ty(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ko(s)}}return n})();function oH(){return gM(An(),Ne())}function gM(n,e){return n.type&4?new Bh(e,n,zg(n,e)):null}function $h(n,e,t,r,i){let s=n.data[e];if(s===null)s=aH(n,e,t,r,i),fN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=cN();s.injectorIndex=o===null?-1:o.injectorIndex}return ll(s,!0),s}function aH(n,e,t,r,i){let s=Lw(),o=Vw(),a=o?s:s&&s.parent,c=n.data[e]=uH(n,a,t,e,r,i);return cH(n,c,s,o),c}function cH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function uH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return aN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lH(n){let e=n[bw]??[],r=n[tn][bt],i=[];for(let s of e)s.data[Ak]!==void 0?i.push(s):dH(s,r);n[bw]=i}function dH(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Dk];for(;t<i;){let s=r.nextSibling;Vk(e,r,!1),r=s,t++}}}var hH=()=>null,fH=()=>null;function gT(n,e){return hH(n,e)}function yM(n,e,t){return fH(n,e,t)}var _M=class{},ry=class{},yT=class{resolveComponentFactory(e){throw new q(917,!1)}},Hh=class{static NULL=new yT},As=class{},Rs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>pH()}return n})();function pH(){let n=Ne(),e=An(),t=vr(e.index,n);return(Ci(t)?t:n)[bt]}var vM=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>null})}return n})();var Sg={},_T=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Sg,r);return i!==Sg||t===Sg?i:this.parentInjector.get(e,t,r)}};function Og(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=iw(i,a);else if(s==2){let c=a,d=e[++o];r=iw(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function he(n,e=0){let t=Ne();if(t===null)return pe(n,e);let r=An();return vk(r,t,pn(n),e)}function EM(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}yH(n,e,t,a,s,c,d)}s!==null&&r!==null&&mH(t,r,s)}function mH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new q(-301,!1);r.push(e[i],s)}}function gH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function yH(n,e,t,r,i,s,o){let a=r.length,c=null;for(let v=0;v<a;v++){let C=r[v];c===null&&Si(C)&&(c=C,gH(n,t,v)),uT(Ng(t,e),n,C.type)}TH(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let v=0;v<a;v++){let C=r[v];C.providersResolver&&C.providersResolver(C)}let d=!1,h=!1,m=zk(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let v=0;v<a;v++){let C=r[v];if(t.mergedAttrs=yl(t.mergedAttrs,C.hostAttrs),vH(n,t,e,m,C),wH(m,C,i),o!==null&&o.has(C)){let[P,k]=o.get(C);t.directiveToIndex.set(C.type,[m,P+t.directiveStart,k+t.directiveStart])}else(s===null||!s.has(C))&&t.directiveToIndex.set(C.type,m);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let R=C.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}_H(n,t,s)}function _H(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))qN(0,e,i,r),qN(1,e,i,r),GN(e,r,!1);else{let s=t.get(i);zN(0,e,s,r),zN(1,e,s,r),GN(e,r,!0)}}}function qN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),IM(e,s)}}function zN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),IM(e,o)}}function IM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function GN(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||FT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function vH(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Uo(i.type,!0)),o=new dc(s,Si(i),he,null);n.blueprint[r]=o,t[r]=o,EH(n,e,r,zk(n,t,i.hostVars,wr),i)}function EH(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;IH(o)!=a&&o.push(a),o.push(t,r,s)}}function IH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function wH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Si(e)&&(t[""]=n)}}function TH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function wM(n,e,t,r,i,s,o,a){let c=e[ye],d=c.consts,h=Er(d,o),m=$h(c,n,t,r,h);return s&&EM(c,e,m,Er(d,a),i),m.mergedAttrs=yl(m.mergedAttrs,m.attrs),m.attrs!==null&&Og(m,m.attrs,!1),m.mergedAttrs!==null&&Og(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function TM(n,e){lk(n,e),Cw(e)&&n.queries.elementEnd(e)}function bH(n,e,t,r,i,s){let o=e.consts,a=Er(o,i),c=$h(e,n,t,r,a);if(c.mergedAttrs=yl(c.mergedAttrs,c.attrs),s!=null){let d=Er(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&Og(c,c.attrs,!1),c.mergedAttrs!==null&&Og(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function QT(n){return CM(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function bM(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function CM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function SM(n,e,t){return n[e]=t}function Ri(n,e,t){if(t===wr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function DM(n,e,t,r){let i=Ri(n,e,t);return Ri(n,e+1,r)||i}function eT(n,e,t){return function r(i){let s=Go(n)?vr(n.index,e):e;KT(s,5);let o=e[Pt],a=WN(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=WN(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function WN(n,e,t,r){let i=de(null);try{return ct(Ke.OutputStart,e,t),t(r)!==!1}catch(s){return H3(n,s),!1}finally{ct(Ke.OutputEnd,e,t),de(i)}}function CH(n,e,t,r,i,s,o,a){let c=Ch(n),d=!1,h=null;if(!r&&c&&(h=DH(e,t,s,n.index)),h!==null){let m=h.__ngLastListenerFn__||h;m.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let m=Kr(n,t),v=r?r(m):m;B$(t,v,s,a);let C=i.listen(v,s,a);if(!SH(s)){let R=r?P=>r(_r(P[n.index])):n.index;AM(R,e,t,s,a,C,!1)}}return d}function SH(n){return n.startsWith("animation")||n.startsWith("transition")}function DH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ol],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function AM(n,e,t,r,i,s,o){let a=e.firstCreatePass?iN(e):null,c=rN(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function KN(n,e,t,r,i,s){let o=e[t],a=e[ye],d=a.data[t].outputs[r],m=o[d].subscribe(s);AM(n.index,a,e,i,s,m,!0)}var vT=Symbol("BINDING");var Fg=class extends Hh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ho(e);return new vl(t,this.ngModule)}};function AH(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Jg.SignalBased)!==0};return i&&(s.transform=i),s})}function RH(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function PH(n,e,t){let r=e instanceof St?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new _T(t,r):t}function NH(n){let e=n.get(As,null);if(e===null)throw new q(407,!1);let t=n.get(vM,null),r=n.get($o,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function kH(n,e){let t=RM(n);return Fk(e,t,t==="svg"?Sw:t==="math"?ZP:null)}function RM(n){return(n.selectors[0][0]||"div").toLowerCase()}var vl=class extends ry{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=AH(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=RH(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=u3(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){ct(Ke.DynamicComponentStart);let a=de(null);try{let c=this.componentDef,d=MH(r,c,o,s),h=PH(c,i||this.ngModule,e),m=NH(h),v=m.rendererFactory.createRenderer(null,c),C=r?N3(v,r,c.encapsulation,h):kH(c,v),R=o?.some(QN)||s?.some(B=>typeof B!="function"&&B.bindings.some(QN)),P=VT(null,d,null,512|qk(c),null,null,m,v,h,null,Nk(C,h,!0));P[Nt]=C,fg(P);let k=null;try{let B=wM(Nt,P,2,"#host",()=>d.directiveRegistry,!0,0);Uk(v,C,B),_l(C,P),zT(d,P,B),Mk(d,B,P),TM(d,B),t!==void 0&&OH(B,this.ngContentSelectors,t),k=vr(B.index,P),P[Pt]=k[Pt],WT(d,P,null)}catch(B){throw k!==null&&dT(k),dT(P),B}finally{ct(Ke.DynamicComponentEnd),pg()}return new Lg(this.componentType,P,!!R)}finally{de(a)}}};function MH(n,e,t,r){let i=n?["ng-version","21.1.2"]:l3(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[vT].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let m=r[h];if(typeof m!="function")for(let v of m.bindings){a+=v[vT].requiredVars;let C=h+1;v.create&&(v.targetIdx=C,(s??=[]).push(v)),v.update&&(v.targetIdx=C,(o??=[]).push(v))}}let c=[e];if(r)for(let h of r){let m=typeof h=="function"?h:h.type,v=fw(m);c.push(v)}return LT(0,null,xH(s,o),1,a,c,null,null,null,[i],null)}function xH(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function QN(n){let e=n[vT].kind;return e==="input"||e==="twoWay"}var Lg=class extends _M{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Sh(t[ye],Nt),this.location=zg(this._tNode,t),this.instance=vr(this._tNode.index,t)[Pt],this.hostView=this.changeDetectorRef=new Ko(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=GT(r,i[ye],i,e,t);this.previousInputValues.set(e,t);let o=vr(r.index,i);KT(o,1)}get injector(){return new lc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function OH(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var yc=(()=>{class n{static __NG_ELEMENT_ID__=FH}return n})();function FH(){let n=An();return VH(n,Ne())}var LH=yc,PM=class extends LH{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zg(this._hostTNode,this._hostLView)}get injector(){return new lc(this._hostTNode,this._hostLView)}get parentInjector(){let e=RT(this._hostTNode,this._hostLView);if(fk(e)){let t=Rg(e,this._hostLView),r=Ag(e),i=t[ye].data[r+8];return new lc(i,t)}else return new lc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YN(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=gT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Mh(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!p$(e),d;if(c)d=t;else{let k=t||{};d=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef,o=k.directives,a=k.bindings}let h=c?e:new vl(Ho(e)),m=r||this.parentInjector;if(!s&&h.ngModule==null){let B=(c?m:this.parentInjector).get(St,null);B&&(s=B)}let v=Ho(h.componentType??{}),C=gT(this._lContainer,v?.id??null),R=C?.firstChild??null,P=h.create(m,i,R,s,o,a);return this.insertImpl(P.hostView,d,Mh(this._hostTNode,C)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(eN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[tn],d=new PM(c,c[yr],c[tn]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return ny(o,i,s,r),e.attachToViewContainerRef(),gw(tT(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YN(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Oh(this._lContainer,t);r&&(Eh(tT(this._lContainer),t),Xg(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=Oh(this._lContainer,t);return r&&Eh(tT(this._lContainer),t)!=null?new Ko(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YN(n){return n[Th]}function tT(n){return n[Th]||(n[Th]=[])}function VH(n,e){let t,r=e[n.index];return Wr(r)?t=r:(t=hM(r,e,null,n),e[n.index]=t,UT(e,t)),jH(t,e,n,r),new PM(t,n,e)}function UH(n,e){let t=n[bt],r=t.createComment(""),i=Kr(e,n),s=t.parentNode(i);return xg(t,s,r,t.nextSibling(i),!1),r}var jH=HH,BH=()=>!1;function $H(n,e,t){return BH(n,e,t)}function HH(n,e,t,r){if(n[zo])return;let i;t.type&8?i=_r(r):i=UH(e,t),n[zo]=i}var fc=class{},iy=class{};var Vg=class extends fc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=hw(e);this._bootstrapComponents=$k(s.bootstrap),this._r3Injector=zw(e,t,[{provide:fc,useValue:this},{provide:Hh,useValue:this.componentFactoryResolver},...r],Es(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ug=class extends iy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Vg(this.moduleType,e,[])}};var Fh=class extends fc{injector;componentFactoryResolver=new Fg(this);instance=null;constructor(e){super();let t=new ec([...e.providers,{provide:fc,useValue:this},{provide:Hh,useValue:this.componentFactoryResolver}],e.parent||wh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function qh(n,e,t=null){return new Fh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var qH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=vw(!1,t.type),i=r.length>0?qh([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n(pe(St))})}return n})();function _t(n){return Il(()=>{let e=NM(n),t=ae(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===PT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(qH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yr.Emulated,styles:n.styles||tr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ni("NgStandalone"),kM(t);let r=n.dependencies;return t.directiveDefs=JN(r,zH),t.pipeDefs=JN(r,UP),t.id=KH(t),t})}function zH(n){return Ho(n)||fw(n)}function Tr(n){return Il(()=>({type:n.type,bootstrap:n.bootstrap||tr,declarations:n.declarations||tr,imports:n.imports||tr,exports:n.exports||tr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GH(n,e){if(n==null)return qo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Jg.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function WH(n){if(n==null)return qo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function $t(n){return Il(()=>{let e=NM(n);return kM(e),e})}function YT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function NM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||qo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||tr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:GH(n.inputs,e),outputs:WH(n.outputs),debugInfo:null}}function kM(n){n.features?.forEach(e=>e(n))}function JN(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function KH(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QH(n){return Object.getPrototypeOf(n.prototype).constructor}function Xr(n){let e=QH(n.type),t=!0,r=[n];for(;e;){let i;if(Si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=nT(n.inputs),o.declaredInputs=nT(n.declaredInputs),o.outputs=nT(n.outputs);let a=i.hostBindings;a&&e6(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&XH(n,c),d&&ZH(n,d),YH(n,i),VP(n.outputs,i.outputs),Si(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Xr&&(t=!1)}}e=Object.getPrototypeOf(e)}JH(r)}function YH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function JH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yl(i.hostAttrs,t=yl(t,i.hostAttrs))}}function nT(n){return n===qo?{}:n===tr?[]:n}function XH(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function ZH(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function e6(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function MM(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=yl(n.mergedAttrs,n.attrs);let h=n.tView=LT(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ll(n,!1);let c=n6(t,e,n,r);gg()&&HT(t,e,c,n),_l(c,e);let d=hM(c,e,c,n);e[r+Nt]=d,UT(e,d),$H(d,n,e)}function t6(n,e,t,r,i,s,o,a,c,d,h){let m=t+Nt,v;return e.firstCreatePass?(v=$h(e,m,4,o||null,a||null),xw()&&EM(e,n,v,Er(e.consts,d),eM),lk(e,v)):v=e.data[m],MM(v,n,e,t,r,i,s,c),Ch(v)&&zT(e,n,v),d!=null&&ey(n,v,h),v}function jg(n,e,t,r,i,s,o,a,c,d,h){let m=t+Nt,v;if(e.firstCreatePass){if(v=$h(e,m,4,o||null,a||null),d!=null){let C=Er(e.consts,d);v.localNames=[];for(let R=0;R<C.length;R+=2)v.localNames.push(C[R],-1)}}else v=e.data[m];return MM(v,n,e,t,r,i,s,c),d!=null&&ey(n,v,h),v}function Ee(n,e,t,r,i,s,o,a){let c=Ne(),d=gn(),h=Er(d.consts,s);return t6(c,d,n,e,t,r,i,h,void 0,o,a),Ee}var n6=r6;function r6(n,e,t,r){return yg(!0),e[bt].createComment("")}var JT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function xM(n){return typeof n=="function"&&n[Mn]!==void 0}function XT(n){return xM(n)&&typeof n.set=="function"}var ZT=new Z("");function Qo(n){return!!n&&typeof n.then=="function"}function eb(n){return!!n&&typeof n.subscribe=="function"}var tb=new Z("");function sy(n){return mn([{provide:tb,multi:!0,useValue:n}])}var nb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(tb,{optional:!0})??[];injector=j(mt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=jt(this.injector,i);if(Qo(s))t.push(s);else if(eb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oy=new Z("");function OM(){II(()=>{let n="";throw new q(600,n)})}function FM(n){return n.isBoundToModule}var i6=10;var ki=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(sr);afterRenderManager=j(Wk);zonelessEnabled=j(Ah);rootEffectScheduler=j(vg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Tt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(Ds);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(We(t=>!t))}constructor(){j(jh,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(St);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=mt.NULL){return this._injector.get(tt).run(()=>{ct(Ke.BootstrapComponentStart);let o=t instanceof ry;if(!this._injector.get(nb).done){let R="";throw new q(405,R)}let c;o?c=t:c=this._injector.get(Hh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=FM(c)?void 0:this._injector.get(fc),h=r||c.selector,m=c.create(i,[],h,d),v=m.location.nativeElement,C=m.injector.get(ZT,null);return C?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),Nh(this.components,m),C?.unregisterApplication(v)}),this._loadComponent(m),ct(Ke.BootstrapComponentEnd,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ct(Ke.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(BT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ct(Ke.ChangeDetectionEnd),new q(101,!1);let t=de(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,de(t),this.afterTick.next(),ct(Ke.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(As,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<i6;){ct(Ke.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ct(Ke.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Dh(i))continue;let s=r&&!this.zonelessEnabled?0:1;cM(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Dh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Nh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(oy,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zh(n,e,t,r){let i=Ne(),s=uc();if(Ri(i,s,e)){let o=gn(),a=mg();j3(a,i,n,e,t,r)}return zh}var Pue=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ET=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function rT(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function s6(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){de(r);let d=e.length-1;for(de(null);o<=a&&o<=d;){let h=n.at(o),m=e[o],v=rT(o,h,o,m,t);if(v!==0){v<0&&n.updateValue(o,m),o++;continue}let C=n.at(a),R=e[d],P=rT(a,C,d,R,t);if(P!==0){P<0&&n.updateValue(a,R),a--,d--;continue}let k=t(o,h),B=t(a,C),W=t(o,m);if(Object.is(W,B)){let Q=t(d,R);Object.is(Q,k)?(n.swap(o,a),n.updateValue(a,R),d--,a--):n.move(a,o),n.updateValue(o,m),o++;continue}if(i??=new Bg,s??=ZN(n,o,a,t),IT(n,i,o,W))n.updateValue(o,m),o++,a++;else if(s.has(W))i.set(k,n.detach(o)),a--;else{let Q=n.create(o,e[o]);n.attach(o,Q),o++,a++}}for(;o<=d;)XN(n,i,t,o,e[o]),o++}else if(e!=null){de(r);let d=e[Symbol.iterator]();de(null);let h=d.next();for(;!h.done&&o<=a;){let m=n.at(o),v=h.value,C=rT(o,m,o,v,t);if(C!==0)C<0&&n.updateValue(o,v),o++,h=d.next();else{i??=new Bg,s??=ZN(n,o,a,t);let R=t(o,v);if(IT(n,i,o,R))n.updateValue(o,v),o++,a++,h=d.next();else if(!s.has(R))n.attach(o,n.create(o,v)),o++,a++,h=d.next();else{let P=t(o,m);i.set(P,n.detach(o)),a--}}}for(;!h.done;)XN(n,i,t,n.length,h.value),h=d.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(d=>{n.destroy(d)})}function IT(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function XN(n,e,t,r,i){if(IT(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function ZN(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Bg=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function rb(n,e,t,r,i,s,o,a){Ni("NgControlFlow");let c=Ne(),d=gn(),h=Er(d.consts,s);return jg(c,d,n,e,t,r,i,h,256,o,a),ib}function ib(n,e,t,r,i,s,o,a){Ni("NgControlFlow");let c=Ne(),d=gn(),h=Er(d.consts,s);return jg(c,d,n,e,t,r,i,h,512,o,a),ib}function sb(n,e){Ni("NgControlFlow");let t=Ne(),r=uc(),i=t[r]!==wr?t[r]:-1,s=i!==-1?$g(t,Nt+i):void 0,o=0;if(Ri(t,r,n)){let a=de(null);try{if(s!==void 0&&pM(s,o),n!==-1){let c=Nt+n,d=$g(t,c),h=CT(t[ye],c),m=yM(d,h,t),v=ty(t,h,e,{dehydratedView:m});ny(d,v,o,Mh(h,m))}}finally{de(a)}}else if(s!==void 0){let a=fM(s,o);a!==void 0&&(a[Pt]=e)}}var wT=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-kt}};var TT=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function ob(n,e,t,r,i,s,o,a,c,d,h,m,v){Ni("NgControlFlow");let C=Ne(),R=gn(),P=c!==void 0,k=Ne(),B=a?o.bind(k[rr][Pt]):o,W=new TT(P,B);k[Nt+n]=W,jg(C,R,n+1,e,t,r,i,Er(R.consts,s),256),P&&jg(C,R,n+2,c,d,h,m,Er(R.consts,v),512)}var bT=class extends ET{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-kt}at(e){return this.getLView(e)[Pt].$implicit}attach(e,t){let r=t[sl];this.needsIndexUpdate||=e!==this.length,ny(this.lContainer,t,e,Mh(this.templateTNode,r)),o6(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,a6(this.lContainer,e),c6(this.lContainer,e)}create(e,t){let r=gT(this.lContainer,this.templateTNode.tView.ssrId);return ty(this.hostLView,this.templateTNode,new wT(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Xg(e[ye],e)}updateValue(e,t){this.getLView(e)[Pt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pt].$index=e}getLView(e){return u6(this.lContainer,e)}};function ab(n){let e=de(null),t=Ss();try{let r=Ne(),i=r[ye],s=r[t],o=t+1,a=$g(r,o);if(s.liveCollection===void 0){let d=CT(i,o);s.liveCollection=new bT(a,r,d)}else s.liveCollection.reset();let c=s.liveCollection;if(s6(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let d=uc(),h=c.length===0;if(Ri(r,d,h)){let m=t+2,v=$g(r,m);if(h){let C=CT(i,m),R=yM(v,C,r),P=ty(r,C,void 0,{dehydratedView:R});ny(v,P,0,Mh(C,R))}else i.firstUpdatePass&&lH(v),pM(v,0)}}}finally{de(e)}}function $g(n,e){return n[e]}function o6(n,e){if(n.length<=kt)return;let t=kt+e,r=n[t],i=r?r[ac]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[bs];m3(s,i),hc.delete(r[Cs]),i.detachedLeaveAnimationFns=void 0}}function a6(n,e){if(n.length<=kt)return;let t=kt+e,r=n[t],i=r?r[ac]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function c6(n,e){return Oh(n,e)}function u6(n,e){return fM(n,e)}function CT(n,e){return Sh(n,e)}function Y(n,e,t){let r=Ne(),i=uc();if(Ri(r,i,e)){let s=gn(),o=mg();Zk(o,r,n,e,r[bt],t)}return Y}function ek(n,e,t,r,i){GT(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=Ne(),s=i[ye],o=n+Nt,a=s.firstCreatePass?wM(o,i,2,e,eM,xw(),t,r):s.data[o];if(tM(a,i,n,e,LM),Ch(a)){let c=i[ye];zT(c,i,a),Mk(c,a,i)}return r!=null&&ey(i,a),x}function O(){let n=gn(),e=An(),t=nM(e);return n.firstCreatePass&&TM(n,t),Ow(t)&&Fw(),Mw(),t.classesWithoutHost!=null&&E$(t)&&ek(n,t,Ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&I$(t)&&ek(n,t,Ne(),t.stylesWithoutHost,!1),O}function Be(n,e,t,r){return x(n,e,t,r),O(),Be}function nt(n,e,t,r){let i=Ne(),s=i[ye],o=n+Nt,a=s.firstCreatePass?bH(o,s,2,e,t,r):s.data[o];return tM(a,i,n,e,LM),r!=null&&ey(i,a),nt}function ht(){let n=An(),e=nM(n);return Ow(e)&&Fw(),Mw(),ht}function Mi(n,e,t,r){return nt(n,e,t,r),ht(),Mi}var LM=(n,e,t,r,i)=>(yg(!0),Fk(e[bt],r,IN()));function xe(){return Ne()}var Rh=void 0;function l6(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var d6=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Rh,Rh,Rh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",l6],kh={};function cb(n,e,t){typeof e!="string"&&(t=e,e=n[Ct.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),kh[e]=n,t&&(kh[e][Ct.ExtraData]=t)}function or(n){let e=h6(n),t=tk(e);if(t)return t;let r=e.split("-")[0];if(t=tk(r),t)return t;if(r==="en")return d6;throw new q(701,!1)}function tk(n){return n in kh||(kh[n]=zr.ng&&zr.ng.common&&zr.ng.common.locales&&zr.ng.common.locales[n]),kh[n]}var Ct=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ct||{});function h6(n){return n.toLowerCase().replace(/_/g,"-")}var Gh="en-US";var f6=Gh;function VM(n){typeof n=="string"&&(f6=n.toLowerCase().replace(/_/g,"-"))}function re(n,e,t){let r=Ne(),i=gn(),s=An();return UM(i,r,r[bt],s,n,e,t),re}function UM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=eT(r,e,s),CH(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let m=0;m<h.length;m+=2){let v=h[m],C=h[m+1];c??=eT(r,e,s),KN(r,e,v,C,i,c)}if(d&&d.length)for(let m of d)c??=eT(r,e,s),KN(r,e,m,i,i,c)}}function J(n=1){return EN(n)}function ub(n){let e=lN();return Aw(e,Nt+n)}function Tg(n,e){return n<<17|e<<2}function pc(n){return n>>17&32767}function p6(n){return(n&2)==2}function m6(n,e){return n&131071|e<<17}function ST(n){return n|2}function El(n){return(n&131068)>>2}function iT(n,e){return n&-131069|e<<2}function g6(n){return(n&1)===1}function DT(n){return n|1}function y6(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=pc(o),c=El(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let m=t;h=m[1],(h===null||il(m,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let v=pc(n[a+1]);n[r+1]=Tg(v,a),v!==0&&(n[v+1]=iT(n[v+1],r)),n[a+1]=m6(n[a+1],r)}else n[r+1]=Tg(a,0),a!==0&&(n[a+1]=iT(n[a+1],r)),a=r;else n[r+1]=Tg(c,0),a===0?a=r:n[c+1]=iT(n[c+1],r),c=r;d&&(n[r+1]=ST(n[r+1])),nk(n,h,r,!0),nk(n,h,r,!1),_6(e,h,n,r,s),o=Tg(a,c),s?e.classBindings=o:e.styleBindings=o}function _6(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&il(s,e)>=0&&(t[r+1]=DT(t[r+1]))}function nk(n,e,t,r){let i=n[t+1],s=e===null,o=r?pc(i):El(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];v6(c,e)&&(a=!0,n[o+1]=r?DT(d):ST(d)),o=r?pc(d):El(d)}a&&(n[t+1]=r?ST(i):DT(i))}function v6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?il(n,e)>=0:!1}function wl(n,e,t){return jM(n,e,t,!1),wl}function _n(n,e){return jM(n,e,null,!0),_n}function jM(n,e,t,r){let i=Ne(),s=gn(),o=Bw(2);if(s.firstUpdatePass&&I6(s,n,o,r),e!==wr&&Ri(i,o,e)){let a=s.data[Ss()];S6(s,a,i,i[bt],n,i[o+1]=D6(e,t),r,o)}}function E6(n,e){return e>=n.expandoStartIndex}function I6(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ss()],o=E6(n,t);A6(s,r)&&e===null&&!o&&(e=!1),e=w6(i,s,e,r),y6(i,s,e,t,o,r)}}function w6(n,e,t,r){let i=gN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=sT(null,n,e,t,r),t=Lh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=sT(i,n,e,t,r),s===null){let c=T6(n,e,r);c!==void 0&&Array.isArray(c)&&(c=sT(null,n,e,c[1],r),c=Lh(c,e.attrs,r),b6(n,e,r,c))}else s=C6(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function T6(n,e,t){let r=t?e.classBindings:e.styleBindings;if(El(r)!==0)return n[pc(r)]}function b6(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[pc(i)]=r}function C6(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Lh(r,o,t)}return Lh(r,e.attrs,t)}function sT(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Lh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Lh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),zP(n,o,t?!0:e[++s]))}return n===void 0?null:n}function S6(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=g6(d)?rk(c,e,t,i,El(d),o):void 0;if(!Hg(h)){Hg(s)||p6(d)&&(s=rk(c,null,t,i,a,o));let m=Dw(Ss(),t);P3(r,o,m,i,s)}}function rk(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,m=h===null,v=t[i+1];v===wr&&(v=m?tr:void 0);let C=m?ag(v,r):h===r?v:void 0;if(d&&!Hg(C)&&(C=ag(c,r)),Hg(C)&&(a=C,o))return a;let R=n[i+1];i=o?pc(R):El(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ag(c,r))}return a}function Hg(n){return n!==void 0}function D6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Es(Uh(n)))),n}function A6(n,e){return(n.flags&(e?8:16))!==0}function V(n,e=""){let t=Ne(),r=gn(),i=n+Nt,s=r.firstCreatePass?$h(r,i,1,e,null):r.data[i],o=R6(r,t,s,e);t[i]=o,gg()&&HT(r,t,o,s),ll(s,!1)}var R6=(n,e,t,r)=>(yg(!0),W$(e[bt],r));function P6(n,e,t,r=""){return Ri(n,uc(),t)?e+rl(t)+r:wr}function N6(n,e,t,r,i,s=""){let o=dN(),a=DM(n,o,t,i);return Bw(2),a?e+rl(t)+r+rl(i)+s:wr}function qe(n){return Ht("",n),qe}function Ht(n,e,t){let r=Ne(),i=P6(r,n,e,t);return i!==wr&&BM(r,Ss(),i),Ht}function Wh(n,e,t,r,i){let s=Ne(),o=N6(s,n,e,t,r,i);return o!==wr&&BM(s,Ss(),o),Wh}function BM(n,e,t){let r=Dw(e,n);K$(n[bt],r,t)}function ay(n,e,t){XT(e)&&(e=e());let r=Ne(),i=uc();if(Ri(r,i,e)){let s=gn(),o=mg();Zk(o,r,n,e,r[bt],t)}return ay}function lb(n,e){let t=XT(n);return t&&n.set(e),t}function cy(n,e){let t=Ne(),r=gn(),i=An();return UM(r,t,t[bt],i,n,e),cy}function ik(n,e,t){let r=gn();r.firstCreatePass&&$M(e,r.data,r.blueprint,Si(n),t)}function $M(n,e,t,r,i){if(n=pn(n),Array.isArray(n))for(let s=0;s<n.length;s++)$M(n[s],e,t,r,i);else{let s=gn(),o=Ne(),a=An(),c=Za(n)?n:pn(n.provide),d=Iw(n),h=a.providerIndexes&1048575,m=a.directiveStart,v=a.providerIndexes>>20;if(Za(n)||!n.multi){let C=new dc(d,i,he,null),R=aT(c,e,i?h:h+v,m);R===-1?(uT(Ng(a,o),s,c),oT(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),o.push(C)):(t[R]=C,o[R]=C)}else{let C=aT(c,e,h+v,m),R=aT(c,e,h,h+v),P=C>=0&&t[C],k=R>=0&&t[R];if(i&&!k||!i&&!P){uT(Ng(a,o),s,c);let B=x6(i?M6:k6,t.length,i,r,d,n);!i&&k&&(t[R].providerFactory=B),oT(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else{let B=HM(t[i?R:C],d,!i&&r);oT(s,n,C>-1?C:R,B)}!i&&r&&k&&t[R].componentProviders++}}}function oT(n,e,t,r){let i=Za(e),s=YP(e);if(i||s){let c=(s?pn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function HM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function aT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function k6(n,e,t,r,i){return AT(this.multi,[])}function M6(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=kg(r,r[ye],this.providerFactory.index,i);o=c.slice(0,a),AT(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],AT(s,o);return o}function AT(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function x6(n,e,t,r,i,s){let o=new dc(n,t,he,null);return o.multi=[],o.index=e,o.componentProviders=0,HM(o,i,r&&!t),o}function Tl(n,e){return t=>{t.providersResolver=(r,i)=>ik(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>ik(r,i?i(e):e,!0))}}function _c(n,e,t){return O6(Ne(),jw(),n,e,t)}function qM(n,e){let t=n[e];return t===wr?void 0:t}function O6(n,e,t,r,i,s){let o=e+t;return Ri(n,o,i)?SM(n,o+1,s?r.call(s,i):r(i)):qM(n,o+1)}function F6(n,e,t,r,i,s,o){let a=e+t;return DM(n,a,i,s)?SM(n,a+2,o?r.call(o,i,s):r(i,s)):qM(n,a+2)}function xi(n,e){let t=gn(),r,i=n+Nt;t.firstCreatePass?(r=L6(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Uo(r.type,!0)),o,a=On(he);try{let c=Pg(!1),d=s();return Pg(c),Rw(t,Ne(),i,d),d}finally{On(a)}}function L6(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Oi(n,e,t,r){let i=n+Nt,s=Ne(),o=Aw(s,i);return V6(s,i)?F6(s,jw(),e,o.transform,t,r,o):o.transform(t,r)}function V6(n,e){return n[ye].data[e].pure}function db(n,e){return gM(n,e)}var qg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},hb=(()=>{class n{compileModuleSync(t){return new Ug(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=hw(t),s=$k(i.declarations).reduce((o,a)=>{let c=Ho(a);return c&&o.push(new vl(c)),o},[]);return new qg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zM=(()=>{class n{applicationErrorHandler=j(sr);appRef=j(ki);taskService=j(Ds);ngZone=j(tt);zonelessEnabled=j(Ah);tracing=j(jh,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Xt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(Yw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?CN:Gw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GM(){return[{provide:$o,useExisting:zM},{provide:tt,useClass:_h},{provide:Ah,useValue:!0}]}function U6(){return typeof $localize<"u"&&$localize.locale||Gh}var vc=new Z("",{factory:()=>j(vc,{optional:!0,skipSelf:!0})||U6()});function $n(n,e){return wm(n,e?.equal)}var JM=Symbol("InputSignalNode#UNSET"),nq=ae(U({},Tm),{transformFn:void 0,applyValueToInputSignal(n,e){ah(n,e)}});function XM(n,e){let t=Object.create(nq);t.value=n,t.transformFn=e?.transform;function r(){if(ih(t),t.value===JM){let i=null;throw new q(-950,i)}return t.value}return r[Mn]=t,r}var ly=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Vh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function WM(n,e){return XM(n,e)}function rq(n){return XM(JM,n)}var ZM=(WM.required=rq,WM);var fb=new Z(""),iq=new Z("");function Kh(n){return!n.moduleRef}function sq(n){let e=Kh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(tt);return t.run(()=>{Kh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(sr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Kh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(fb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(fb);o.add(s),n.moduleRef.onDestroy(()=>{Nh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return aq(r,t,()=>{let s=e.get(Ds),o=s.add(),a=e.get(nb);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(vc,Gh);if(VM(c||Gh),!e.get(iq,!0))return Kh(n)?e.get(ki):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Kh(n)){let h=e.get(ki);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return oq?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{s.remove(o)})})})}var oq;function aq(n,e,t){try{let r=t();return Qo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var uy=null;function cq(n=[],e){return mt.create({name:e,providers:[{provide:Ih,useValue:"platform"},{provide:fb,useValue:new Set([()=>uy=null])},...n]})}function uq(n=[]){if(uy)return uy;let e=cq(n);return uy=e,OM(),lq(e),e}function lq(n){let e=n.get(Wg,null);jt(n,()=>{e?.forEach(t=>t())})}function Qh(){return!1}var dq=1e4;var Fme=dq-1e3;var Ec=(()=>{class n{static __NG_ELEMENT_ID__=hq}return n})();function hq(n){return fq(An(),Ne(),(n&16)===16)}function fq(n,e,t){if(Go(n)&&!t){let r=vr(n.index,e);return new Ko(r,r)}else if(n.type&175){let r=e[rr];return new Ko(r,e)}return null}var pb=class{constructor(){}supports(e){return QT(e)}create(e){return new mb(e)}},pq=(n,e)=>e,mb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||pq}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<KM(r,i,s)?t:r,a=KM(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let v=0;v<d;v++){let C=v<s.length?s[v]:s[v]=0,R=C+v;h<=R&&R<d&&(s[v]=C+1)}let m=o.previousIndex;s[m]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!QT(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,bM(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new gb(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new dy),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new dy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},gb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},yb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},dy=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new yb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function KM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function QM(){return new vb([new pb])}var vb=(()=>{class n{factories;static \u0275prov=ee({token:n,providedIn:"root",factory:QM});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=j(n,{optional:!0,skipSelf:!0});return n.create(t,r||QM())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function ex(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ct(Ke.BootstrapApplicationStart);try{let s=i?.injector??uq(r),o=[GM(),DN,...t||[]],a=new Fh({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return sq({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ct(Ke.BootstrapApplicationEnd)}}function Ic(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var tx=null;function br(){return tx}function Eb(n){tx??=n}var Yh=class{},hy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>j(nx),providedIn:"platform"})}return n})();var nx=(()=>{class n extends hy{_location;_history;_doc=j(Dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return br().getBaseHref(this._doc)}onPopState(t){let r=br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sx(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function rx(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Yo(n){return n&&n[0]!=="?"?`?${n}`:n}var bl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>j(gq),providedIn:"root"})}return n})(),mq=new Z(""),gq=(()=>{class n extends bl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sx(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Yo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Yo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(pe(hy),pe(mq,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jo=(()=>{class n{_subject=new Tt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=vq(rx(ix(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yo(r))}normalize(t){return n.stripTrailingSlash(_q(this._basePath,ix(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yo;static joinWithSlash=sx;static stripTrailingSlash=rx;static \u0275fac=function(r){return new(r||n)(pe(bl))};static \u0275prov=ee({token:n,factory:()=>yq(),providedIn:"root"})}return n})();function yq(){return new Jo(pe(bl))}function _q(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ix(n){return n.replace(/\/index.html$/,"")}function vq(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Rn||{}),ut=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ut||{}),Hn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Hn||{}),Ns={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function lx(n){return or(n)[Ct.LocaleId]}function dx(n,e,t){let r=or(n),i=[r[Ct.DayPeriodsFormat],r[Ct.DayPeriodsStandalone]],s=Cr(i,e);return Cr(s,t)}function hx(n,e,t){let r=or(n),i=[r[Ct.DaysFormat],r[Ct.DaysStandalone]],s=Cr(i,e);return Cr(s,t)}function fx(n,e,t){let r=or(n),i=[r[Ct.MonthsFormat],r[Ct.MonthsStandalone]],s=Cr(i,e);return Cr(s,t)}function px(n,e){let r=or(n)[Ct.Eras];return Cr(r,e)}function Jh(n,e){let t=or(n);return Cr(t[Ct.DateFormat],e)}function Xh(n,e){let t=or(n);return Cr(t[Ct.TimeFormat],e)}function Zh(n,e){let r=or(n)[Ct.DateTimeFormat];return Cr(r,e)}function ef(n,e){let t=or(n),r=t[Ct.NumberSymbols][e];if(typeof r>"u"){if(e===Ns.CurrencyDecimal)return t[Ct.NumberSymbols][Ns.Decimal];if(e===Ns.CurrencyGroup)return t[Ct.NumberSymbols][Ns.Group]}return r}function mx(n){if(!n[Ct.ExtraData])throw new q(2303,!1)}function gx(n){let e=or(n);return mx(e),(e[Ct.ExtraData][2]||[]).map(r=>typeof r=="string"?Ib(r):[Ib(r[0]),Ib(r[1])])}function yx(n,e,t){let r=or(n);mx(r);let i=[r[Ct.ExtraData][0],r[Ct.ExtraData][1]],s=Cr(i,e)||[];return Cr(s,t)||[]}function Cr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new q(2304,!1)}function Ib(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Eq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,fy={},Iq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function _x(n,e,t,r){let i=Pq(n);e=Ps(t,e)||e;let o=[],a;for(;e;)if(a=Iq.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=Ex(r,c),i=Rq(i,r));let d="";return o.forEach(h=>{let m=Dq(h);d+=m?m(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function _y(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ps(n,e){let t=lx(n);if(fy[t]??={},fy[t][e])return fy[t][e];let r="";switch(e){case"shortDate":r=Jh(n,Hn.Short);break;case"mediumDate":r=Jh(n,Hn.Medium);break;case"longDate":r=Jh(n,Hn.Long);break;case"fullDate":r=Jh(n,Hn.Full);break;case"shortTime":r=Xh(n,Hn.Short);break;case"mediumTime":r=Xh(n,Hn.Medium);break;case"longTime":r=Xh(n,Hn.Long);break;case"fullTime":r=Xh(n,Hn.Full);break;case"short":let i=Ps(n,"shortTime"),s=Ps(n,"shortDate");r=py(Zh(n,Hn.Short),[i,s]);break;case"medium":let o=Ps(n,"mediumTime"),a=Ps(n,"mediumDate");r=py(Zh(n,Hn.Medium),[o,a]);break;case"long":let c=Ps(n,"longTime"),d=Ps(n,"longDate");r=py(Zh(n,Hn.Long),[c,d]);break;case"full":let h=Ps(n,"fullTime"),m=Ps(n,"fullDate");r=py(Zh(n,Hn.Full),[h,m]);break}return r&&(fy[t][e]=r),r}function py(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ei(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function wq(n,e){return ei(n,3).substring(0,e)}function qt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=Tq(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return wq(a,e);let c=ef(o,Ns.MinusSign);return ei(a,e,c,r,i)}}function Tq(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new q(2301,!1)}}function gt(n,e,t=Rn.Format,r=!1){return function(i,s){return bq(i,s,n,e,t,r)}}function bq(n,e,t,r,i,s){switch(t){case 2:return fx(e,i,r)[n.getMonth()];case 1:return hx(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=gx(e),h=yx(e,i,r),m=d.findIndex(v=>{if(Array.isArray(v)){let[C,R]=v,P=o>=C.hours&&a>=C.minutes,k=o<R.hours||o===R.hours&&a<R.minutes;if(C.hours<R.hours){if(P&&k)return!0}else if(P||k)return!0}else if(v.hours===o&&v.minutes===a)return!0;return!1});if(m!==-1)return h[m]}return dx(e,i,r)[o<12?0:1];case 3:return px(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new q(2302,!1)}}function my(n){return function(e,t,r){let i=-1*r,s=ef(t,Ns.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ei(o,2,s)+ei(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+ei(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+ei(o,2,s)+":"+ei(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+ei(o,2,s)+":"+ei(Math.abs(i%60),2,s);default:throw new q(2310,!1)}}}var Cq=0,yy=4;function Sq(n){let e=_y(n,Cq,1).getDay();return _y(n,0,1+(e<=yy?yy:yy+7)-e)}function vx(n){let e=n.getDay(),t=e===0?-3:yy-e;return _y(n.getFullYear(),n.getMonth(),n.getDate()+t)}function wb(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=vx(t),o=Sq(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return ei(i,n,ef(r,Ns.MinusSign))}}function gy(n,e=!1){return function(t,r){let s=vx(t).getFullYear();return ei(s,n,ef(r,Ns.MinusSign),e)}}var Tb={};function Dq(n){if(Tb[n])return Tb[n];let e;switch(n){case"G":case"GG":case"GGG":e=gt(3,ut.Abbreviated);break;case"GGGG":e=gt(3,ut.Wide);break;case"GGGGG":e=gt(3,ut.Narrow);break;case"y":e=qt(0,1,0,!1,!0);break;case"yy":e=qt(0,2,0,!0,!0);break;case"yyy":e=qt(0,3,0,!1,!0);break;case"yyyy":e=qt(0,4,0,!1,!0);break;case"Y":e=gy(1);break;case"YY":e=gy(2,!0);break;case"YYY":e=gy(3);break;case"YYYY":e=gy(4);break;case"M":case"L":e=qt(1,1,1);break;case"MM":case"LL":e=qt(1,2,1);break;case"MMM":e=gt(2,ut.Abbreviated);break;case"MMMM":e=gt(2,ut.Wide);break;case"MMMMM":e=gt(2,ut.Narrow);break;case"LLL":e=gt(2,ut.Abbreviated,Rn.Standalone);break;case"LLLL":e=gt(2,ut.Wide,Rn.Standalone);break;case"LLLLL":e=gt(2,ut.Narrow,Rn.Standalone);break;case"w":e=wb(1);break;case"ww":e=wb(2);break;case"W":e=wb(1,!0);break;case"d":e=qt(2,1);break;case"dd":e=qt(2,2);break;case"c":case"cc":e=qt(7,1);break;case"ccc":e=gt(1,ut.Abbreviated,Rn.Standalone);break;case"cccc":e=gt(1,ut.Wide,Rn.Standalone);break;case"ccccc":e=gt(1,ut.Narrow,Rn.Standalone);break;case"cccccc":e=gt(1,ut.Short,Rn.Standalone);break;case"E":case"EE":case"EEE":e=gt(1,ut.Abbreviated);break;case"EEEE":e=gt(1,ut.Wide);break;case"EEEEE":e=gt(1,ut.Narrow);break;case"EEEEEE":e=gt(1,ut.Short);break;case"a":case"aa":case"aaa":e=gt(0,ut.Abbreviated);break;case"aaaa":e=gt(0,ut.Wide);break;case"aaaaa":e=gt(0,ut.Narrow);break;case"b":case"bb":case"bbb":e=gt(0,ut.Abbreviated,Rn.Standalone,!0);break;case"bbbb":e=gt(0,ut.Wide,Rn.Standalone,!0);break;case"bbbbb":e=gt(0,ut.Narrow,Rn.Standalone,!0);break;case"B":case"BB":case"BBB":e=gt(0,ut.Abbreviated,Rn.Format,!0);break;case"BBBB":e=gt(0,ut.Wide,Rn.Format,!0);break;case"BBBBB":e=gt(0,ut.Narrow,Rn.Format,!0);break;case"h":e=qt(3,1,-12);break;case"hh":e=qt(3,2,-12);break;case"H":e=qt(3,1);break;case"HH":e=qt(3,2);break;case"m":e=qt(4,1);break;case"mm":e=qt(4,2);break;case"s":e=qt(5,1);break;case"ss":e=qt(5,2);break;case"S":e=qt(6,1);break;case"SS":e=qt(6,2);break;case"SSS":e=qt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=my(0);break;case"ZZZZZ":e=my(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=my(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=my(2);break;default:return null}return Tb[n]=e,e}function Ex(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Aq(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Rq(n,e,t){let i=n.getTimezoneOffset(),s=Ex(e,i);return Aq(n,-1*(s-i))}function Pq(n){if(ox(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return _y(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Eq))return Nq(r)}let e=new Date(n);if(!ox(e))throw new q(2311,!1);return e}function Nq(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function ox(n){return n instanceof Date&&!isNaN(n.valueOf())}var bb=/\s+/,ax=[],tf=(()=>{class n{_ngEl;_renderer;initialClasses=ax;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(bb):ax}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(bb):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(bb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(he(Jr),he(Rs))};static \u0275dir=$t({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var vy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Sr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),cx(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);cx(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(yc),he(Bh),he(vb))};static \u0275dir=$t({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function cx(n,e){n.context.$implicit=e.item}var Fn=(()=>{class n{_viewContainer;_context=new Ey;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ux(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ux(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(yc),he(Bh))};static \u0275dir=$t({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ey=class{$implicit=null;ngIf=null};function ux(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}function kq(n,e){return new q(2100,!1)}var Mq="mediumDate",Ix=new Z(""),wx=new Z(""),wc=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??Mq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return _x(t,o,s||this.locale,a)}catch(o){throw kq(n,o.message)}}static \u0275fac=function(r){return new(r||n)(he(vc,16),he(Ix,24),he(wx,24))};static \u0275pipe=YT({name:"date",type:n,pure:!0})}return n})();var rn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=nr({})}return n})();function Cb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var nf=class{};function Tx(n,e,t){return cb(n,e,t)}var bx="browser";var rf=class{_doc;constructor(e){this._doc=e}manager},Iy=(()=>{class n extends rf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(pe(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),by=new Z(""),Rb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Iy));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Iy);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(pe(by),pe(tt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Sb="ng-app-id";function Cx(n){for(let e of n)e.remove()}function Sx(n,e){let t=e.createElement("style");return t.textContent=n,t}function xq(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Sb}="${e}"],link[${Sb}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Sb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Ab(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Pb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,xq(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Sx);r?.forEach(i=>this.addUsage(i,this.external,Ab))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Cx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Cx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Sx(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ab(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(pe(Dt),pe(Gg),pe(Qg,8),pe(gc))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Db={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nb=/%COMP%/g;var Ax="%COMP%",Oq=`_nghost-${Ax}`,Fq=`_ngcontent-${Ax}`,Lq=!0,Vq=new Z("",{factory:()=>Lq});function Uq(n){return Fq.replace(Nb,n)}function jq(n){return Oq.replace(Nb,n)}function Rx(n,e){return e.map(t=>t.replace(Nb,n))}var af=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.defaultRenderer=new sf(t,o,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ty?i.applyToHost(t):i instanceof of&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.tracingService;switch(r.encapsulation){case Yr.Emulated:s=new Ty(c,d,r,this.appId,h,o,a,m);break;case Yr.ShadowDom:return new wy(c,t,r,o,a,this.nonce,m,d);case Yr.ExperimentalIsolatedShadowDom:return new wy(c,t,r,o,a,this.nonce,m);default:s=new of(c,d,r,h,o,a,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(pe(Rb),pe(Pb),pe(Gg),pe(Vq),pe(Dt),pe(tt),pe(Qg),pe(jh,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),sf=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Db[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Dx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Dx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Db[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Db[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ai.DashCase|Ai.Important)?e.style.setProperty(t,r,i&Ai.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ai.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=br().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Dx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var wy=class extends sf{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c){super(e,i,s,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=Rx(r.id,d);for(let m of d){let v=document.createElement("style");o&&v.setAttribute("nonce",o),v.textContent=m,this.shadowRoot.appendChild(v)}let h=r.getExternalStyles?.();if(h)for(let m of h){let v=Ab(m,i);o&&v.setAttribute("nonce",o),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},of=class extends sf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?Rx(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&hc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ty=class extends of{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,d),this.contentAttr=Uq(d),this.hostAttr=jq(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Cy=class n extends Yh{supportsDOMEvents=!0;static makeCurrent(){Eb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Bq();return t==null?null:$q(t)}resetBaseElement(){cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Cb(document.cookie,e)}},cf=null;function Bq(){return cf=cf||document.head.querySelector("base"),cf?cf.getAttribute("href"):null}function $q(n){return new URL(n,document.baseURI).pathname}var Hq=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Px=["alt","control","meta","shift"],qq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Nx=(()=>{class n extends rf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>br().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Px.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=qq[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Px.forEach(o=>{if(o!==i){let a=zq[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(pe(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();async function kb(n,e,t){let r=U({rootComponent:n},Gq(e,t));return ex(r)}function Gq(n,e){return{platformRef:e?.platformRef,appProviders:[...Jq,...n?.providers??[]],platformProviders:Yq}}function Wq(){Cy.makeCurrent()}function Kq(){return new Is}function Qq(){return NT(document),document}var Yq=[{provide:gc,useValue:bx},{provide:Wg,useValue:Wq,multi:!0},{provide:Dt,useFactory:Qq}];var Jq=[{provide:Ih,useValue:"root"},{provide:Is,useFactory:Kq},{provide:by,useClass:Iy,multi:!0},{provide:by,useClass:Nx,multi:!0},af,Pb,Rb,{provide:As,useExisting:af},{provide:nf,useClass:Hq},[]];var kx=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(pe(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var be="primary",Ef=Symbol("RouteTitle"),Lb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Cc(n){return new Lb(n)}function Mb(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(i[0]===":")t[i.substring(1)]=s;else if(i!==s.path)return!1}return!0}function $x(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},d=n.slice(0,r.length);return Mb(r,d,c)?{consumed:d,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let s=r.slice(0,i),o=r.slice(i+1);if(s.length+o.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!Mb(s,n.slice(0,s.length),a)||!Mb(o,n.slice(n.length-o.length),a)?null:{consumed:n,posParams:a}}function Ny(n){return new Promise((e,t)=>{n.pipe(_s()).subscribe({next:r=>e(r),error:r=>t(r)})})}function Zq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Li(n[t],e[t]))return!1;return!0}function Li(n,e){let t=n?Vb(n):void 0,r=e?Vb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Hx(n[i],e[i]))return!1;return!0}function Vb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Hx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function ez(n){return n.length>0?n[n.length-1]:null}function Ac(n){return uh(n)?n:Qo(n)?Ut(Promise.resolve(n)):Le(n)}function qx(n){return uh(n)?Ny(n):Promise.resolve(n)}var tz={exact:Gx,subset:Wx},zx={exact:nz,subset:rz,ignored:()=>!0};function Mx(n,e,t){return tz[t.paths](n.root,e.root,t.matrixParams)&&zx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function nz(n,e){return Li(n,e)}function Gx(n,e,t){if(!Tc(n.segments,e.segments)||!Ay(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Gx(n.children[r],e.children[r],t))return!1;return!0}function rz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Hx(n[t],e[t]))}function Wx(n,e,t){return Kx(n,e,e.segments,t)}function Kx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Tc(i,t)||e.hasChildren()||!Ay(i,t,r))}else if(n.segments.length===t.length){if(!Tc(n.segments,t)||!Ay(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Wx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Tc(n.segments,i)||!Ay(n.segments,i,r)||!n.children[be]?!1:Kx(n.children[be],e,s,r)}}function Ay(n,e,t){return e.every((r,i)=>zx[t](n[i].parameters,r.parameters))}var ni=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Cc(this.queryParams),this._queryParamMap}toString(){return oz.serialize(this)}},Qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ry(this)}},Xo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Cc(this.parameters),this._parameterMap}toString(){return Yx(this)}};function iz(n,e){return Tc(n,e)&&n.every((t,r)=>Li(t.parameters,e[r].parameters))}function Tc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===be&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==be&&(t=t.concat(e(i,r)))}),t}var If=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new Zo,providedIn:"root"})}return n})(),Zo=class{parse(e){let t=new jb(e);return new ni(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${uf(e.root,!0)}`,r=uz(e.queryParams),i=typeof e.fragment=="string"?`#${az(e.fragment)}`:"";return`${t}${r}${i}`}},oz=new Zo;function Ry(n){return n.segments.map(e=>Yx(e)).join("/")}function uf(n,e){if(!n.hasChildren())return Ry(n);if(e){let t=n.children[be]?uf(n.children[be],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==be&&r.push(`${i}:${uf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sz(n,(r,i)=>i===be?[uf(n.children[be],!1)]:[`${i}:${uf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[be]!=null?`${Ry(n)}/${t[0]}`:`${Ry(n)}/(${t.join("//")})`}}function Qx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sy(n){return Qx(n).replace(/%3B/gi,";")}function az(n){return encodeURI(n)}function Ub(n){return Qx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Py(n){return decodeURIComponent(n)}function xx(n){return Py(n.replace(/\+/g,"%20"))}function Yx(n){return`${Ub(n.path)}${cz(n.parameters)}`}function cz(n){return Object.entries(n).map(([e,t])=>`;${Ub(e)}=${Ub(t)}`).join("")}function uz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Sy(t)}=${Sy(i)}`).join("&"):`${Sy(t)}=${Sy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lz=/^[^\/()?;#]+/;function xb(n){let e=n.match(lz);return e?e[0]:""}var dz=/^[^\/()?;=#]+/;function hz(n){let e=n.match(dz);return e?e[0]:""}var fz=/^[^=?&#]+/;function pz(n){let e=n.match(fz);return e?e[0]:""}var mz=/^[^&#]+/;function gz(n){let e=n.match(mz);return e?e[0]:""}var jb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[be]=new Qe(e,t)),r}parseSegment(){let e=xb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Xo(Py(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xb(this.remaining);i&&(r=i,this.capture(r))}e[Py(t)]=Py(r)}parseQueryParam(e){let t=pz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=gz(this.remaining);o&&(r=o,this.capture(r))}let i=xx(t),s=xx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=be);let o=this.parseChildren();t[s??be]=Object.keys(o).length===1&&o[be]?o[be]:new Qe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function Jx(n){return n.segments.length>0?new Qe([],{[be]:n}):n}function Xx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Xx(i);if(r===be&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Qe(n.segments,e);return yz(t)}function yz(n){if(n.numberOfChildren===1&&n.children[be]){let e=n.children[be];return new Qe(n.segments.concat(e.segments),e.children)}return n}function ea(n){return n instanceof ni}function Zx(n,e,t=null,r=null,i=new Zo){let s=e1(n);return t1(s,e,t,r,i)}function e1(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Qe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Jx(r);return e??i}function t1(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Ob(s,s,s,t,r,i);let o=_z(e);if(o.toRoot())return Ob(s,s,new Qe([],{}),t,r,i);let a=vz(o,s,n),c=a.processChildren?df(a.segmentGroup,a.index,o.commands):r1(a.segmentGroup,a.index,o.commands);return Ob(s,a.segmentGroup,c,t,r,i)}function ky(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function pf(n){return typeof n=="object"&&n!=null&&n.outlets}function Ox(n,e,t){n||="\u0275";let r=new ni;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function Ob(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(m=>Ox(d,m,s)):Ox(d,h,s);let a;n===e?a=t:a=n1(n,e,t);let c=Jx(Xx(a));return new ni(c,o,i)}function n1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=n1(s,e,t)}),new Qe(n.segments,r)}var My=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ky(r[0]))throw new q(4003,!1);let i=r.find(pf);if(i&&i!==ez(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _z(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new My(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new My(t,e,r)}var Sl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vz(n,e,t){if(n.isAbsolute)return new Sl(e,!0,0);if(!t)return new Sl(e,!1,NaN);if(t.parent===null)return new Sl(t,!0,0);let r=ky(n.commands[0])?0:1,i=t.segments.length-1+r;return Ez(t,i,n.numberOfDoubleDots)}function Ez(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new Sl(r,!1,i-s)}function Iz(n){return pf(n[0])?n[0].outlets:{[be]:n}}function r1(n,e,t){if(n??=new Qe([],{}),n.segments.length===0&&n.hasChildren())return df(n,e,t);let r=wz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Qe(n.segments.slice(0,r.pathIndex),{});return s.children[be]=new Qe(n.segments.slice(r.pathIndex),n.children),df(s,0,i)}else return r.match&&i.length===0?new Qe(n.segments,{}):r.match&&!n.hasChildren()?Bb(n,e,t):r.match?df(n,0,i):Bb(n,e,t)}function df(n,e,t){if(t.length===0)return new Qe(n.segments,{});{let r=Iz(t),i={};if(Object.keys(r).some(s=>s!==be)&&n.children[be]&&n.numberOfChildren===1&&n.children[be].segments.length===0){let s=df(n.children[be],e,t);return new Qe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=r1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Qe(n.segments,i)}}function wz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(pf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!Lx(c,d,o))return s;r+=2}else{if(!Lx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Bb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(pf(s)){let c=Tz(s.outlets);return new Qe(r,c)}if(i===0&&ky(t[0])){let c=n.segments[e];r.push(new Xo(c.path,Fx(t[0]))),i++;continue}let o=pf(s)?s.outlets[be]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ky(a)?(r.push(new Xo(o,Fx(a))),i+=2):(r.push(new Xo(o,{})),i++)}return new Qe(r,{})}function Tz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Bb(new Qe([],{}),0,r))}),e}function Fx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Lx(n,e,t){return n==t.path&&Li(e,t.parameters)}var hf="imperative",sn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(sn||{}),cr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Sc=class extends cr{type=sn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vi=class extends cr{urlAfterRedirects;type=sn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Pn||{}),mf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(mf||{}),Dr=class extends cr{reason;code;type=sn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function i1(n){return n instanceof Dr&&(n.code===Pn.Redirect||n.code===Pn.SupersededByNewNavigation)}var Ms=class extends cr{reason;code;type=sn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Dc=class extends cr{error;target;type=sn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Al=class extends cr{urlAfterRedirects;state;type=sn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xy=class extends cr{urlAfterRedirects;state;type=sn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oy=class extends cr{urlAfterRedirects;state;shouldActivate;type=sn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fy=class extends cr{urlAfterRedirects;state;type=sn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class extends cr{urlAfterRedirects;state;type=sn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class{route;type=sn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uy=class{route;type=sn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jy=class{snapshot;type=sn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},By=class{snapshot;type=sn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{snapshot;type=sn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{snapshot;type=sn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Rl=class{},Pl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function bz(n){return!(n instanceof Rl)&&!(n instanceof Pl)}var qy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ml(this.rootInjector)}},Ml=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new qy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(pe(St))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$b(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$b(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hb(e,this._root).map(t=>t.value)}};function $b(n,e){if(n===e.value)return e;for(let t of e.children){let r=$b(n,t);if(r)return r}return null}function Hb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hb(n,t);if(r.length)return r.unshift(e),r}return[]}var ar=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gf=class extends zy{snapshot;constructor(e,t){super(e),this.snapshot=t,Jb(this,e)}toString(){return this.snapshot.toString()}};function s1(n,e){let t=Cz(n,e),r=new Lt([new Xo("",{})]),i=new Lt({}),s=new Lt({}),o=new Lt({}),a=new Lt(""),c=new xs(r,i,o,a,s,be,n,t.root);return c.snapshot=t.root,new gf(new ar(c,[]),t)}function Cz(n,e){let t={},r={},i={},o=new bc([],t,i,"",r,be,n,null,{},e);return new yf("",new ar(o,[]))}var xs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(We(d=>d[Ef]))??Le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(We(e=>Cc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(We(e=>Cc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&a1(i)&&(r.resolve[Ef]=i.title),r}var bc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Ef]}constructor(e,t,r,i,s,o,a,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Cc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Cc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yf=class extends zy{url;constructor(e,t){super(t),this.url=e,Jb(this,t)}toString(){return o1(this._root)}};function Jb(n,e){e.value._routerState=n,e.children.forEach(t=>Jb(n,t))}function o1(n){let e=n.children.length>0?` { ${n.children.map(o1).join(", ")} } `:"";return`${n.value}${e}`}function Fb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Li(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Li(e.params,t.params)||n.paramsSubject.next(t.params),Zq(e.url,t.url)||n.urlSubject.next(t.url),Li(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qb(n,e){let t=Li(n.params,e.params)&&iz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||qb(n.parent,e.parent))}function a1(n){return typeof n.title=="string"||n.title===null}var c1=new Z(""),wf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=be;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=ZM();parentContexts=j(Ml);location=j(yc);changeDetector=j(Ec);inputBinder=j(Yy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new zb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$t({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pi]})}return n})(),zb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===xs?this.route:e===Ml?this.childContexts:e===c1?this.outletData:this.parent.get(e,t)}},Yy=new Z("");var Xb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=_t({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Be(0,"router-outlet")},dependencies:[wf],encapsulation:2})}return n})();function Zb(n){let e=n.children&&n.children.map(Zb),t=e?ae(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==be&&(t.component=Xb),t}function Sz(n,e,t){let r=_f(n,e._root,t?t._root:void 0);return new gf(r,e)}function _f(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Dz(n,e,t);return new ar(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>_f(n,a)),o}}let r=Az(e.value),i=e.children.map(s=>_f(n,s));return new ar(r,i)}}function Dz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _f(n,r,i);return _f(n,r)})}function Az(n){return new xs(new Lt(n.url),new Lt(n.params),new Lt(n.queryParams),new Lt(n.fragment),new Lt(n.data),n.outlet,n.component,n)}var Nl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},u1="ngNavigationCancelingError";function Wy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ea(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=l1(!1,Pn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function l1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[u1]=!0,t.cancellationCode=e,t}function Rz(n){return d1(n)&&ea(n.url)}function d1(n){return!!n&&n[u1]}var Gb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Cl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Cl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Cl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Cl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Hy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new By(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Fb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Fb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ky=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Dl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Pz(n,e,t){let r=n._root,i=e?e._root:null;return lf(r,i,t,[r.value])}function Nz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function xl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ow(n)?n:e.get(n):r}function lf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Cl(e);return n.children.forEach(o=>{kz(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ff(a,t.getContext(o),i)),i}function kz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Mz(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ky(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?lf(n,e,a?a.children:null,r,i):lf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Dl(a.outlet.component,o))}else o&&ff(e,a,i),i.canActivateChecks.push(new Ky(r)),s.component?lf(n,null,a?a.children:null,r,i):lf(n,null,t,r,i);return i}function Mz(n,e,t){if(typeof t=="function")return jt(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!Tc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tc(n.url,e.url)||!Li(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qb(n,e)||!Li(n.queryParams,e.queryParams);default:return!qb(n,e)}}function ff(n,e,t){let r=Cl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ff(o,e.children.getContext(s),t):ff(o,null,t):ff(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Dl(e.outlet.component,i)):t.canDeactivateChecks.push(new Dl(null,i)):t.canDeactivateChecks.push(new Dl(null,i))}function Tf(n){return typeof n=="function"}function xz(n){return typeof n=="boolean"}function Oz(n){return n&&Tf(n.canLoad)}function Fz(n){return n&&Tf(n.canActivate)}function Lz(n){return n&&Tf(n.canActivateChild)}function Vz(n){return n&&Tf(n.canDeactivate)}function Uz(n){return n&&Tf(n.canMatch)}function h1(n){return n instanceof Ya||n?.name==="EmptyError"}var Dy=Symbol("INITIAL_VALUE");function kl(){return Bn(n=>UI(n.map(e=>e.pipe(fn(1),$I(Dy)))).pipe(We(e=>{for(let t of e)if(t!==!0){if(t===Dy)return Dy;if(t===!1||jz(t))return t}return!0}),Dn(e=>e!==Dy),fn(1)))}function jz(n){return ea(n)||n instanceof Nl}function f1(n){return n.aborted?Le(void 0).pipe(fn(1)):new we(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function p1(n){return hh(f1(n))}function Bz(n){return xn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?Le(ae(U({},e),{guardsResult:!0})):$z(s,t,r).pipe(xn(o=>o&&xz(o)?Hz(t,i,n):Le(o)),We(o=>ae(U({},e),{guardsResult:o})))})}function $z(n,e,t){return Ut(n).pipe(xn(r=>Kz(r.component,r.route,t,e)),_s(r=>r!==!0,!0))}function Hz(n,e,t){return Ut(e).pipe(Gm(r=>el(zz(r.route.parent,t),qz(r.route,t),Wz(n,r.path),Gz(n,r.route))),_s(r=>r!==!0,!0))}function qz(n,e){return n!==null&&e&&e(new $y(n)),Le(!0)}function zz(n,e){return n!==null&&e&&e(new jy(n)),Le(!0)}function Gz(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Le(!0);let r=t.map(i=>lh(()=>{let s=e._environmentInjector,o=xl(i,s),a=Fz(o)?o.canActivate(e,n):jt(s,()=>o(e,n));return Ac(a).pipe(_s())}));return Le(r).pipe(kl())}function Wz(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>Nz(s)).filter(s=>s!==null).map(s=>lh(()=>{let o=s.guards.map(a=>{let c=s.node._environmentInjector,d=xl(a,c),h=Lz(d)?d.canActivateChild(t,n):jt(c,()=>d(t,n));return Ac(h).pipe(_s())});return Le(o).pipe(kl())}));return Le(i).pipe(kl())}function Kz(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Le(!0);let s=i.map(o=>{let a=e._environmentInjector,c=xl(o,a),d=Vz(c)?c.canDeactivate(n,e,t,r):jt(a,()=>c(n,e,t,r));return Ac(d).pipe(_s())});return Le(s).pipe(kl())}function Qz(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Le(!0);let o=s.map(a=>{let c=xl(a,n),d=Oz(c)?c.canLoad(e,t):jt(n,()=>c(e,t)),h=Ac(d);return i?h.pipe(p1(i)):h});return Le(o).pipe(kl(),m1(r))}function m1(n){return NI(wi(e=>{if(typeof e!="boolean")throw Wy(n,e)}),We(e=>e===!0))}function Yz(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Le(!0);let o=s.map(a=>{let c=xl(a,n),d=Uz(c)?c.canMatch(e,t):jt(n,()=>c(e,t));return Ac(d).pipe(p1(i))});return Le(o).pipe(kl(),m1(r))}var ks=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},vf=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function Jz(n){throw new q(4e3,!1)}function Xz(n){throw l1(!1,Pn.GuardRejected)}var Wb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[be])throw Jz(`${e.redirectTo}`);i=i.children[be]}}async applyRedirectCommands(e,t,r,i,s){let o=await Zz(t,i,s);if(o instanceof ni)throw new vf(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new vf(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ni(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Qe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Zz(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:m,paramMap:v,queryParamMap:C}=e;return Ny(Ac(jt(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:m,paramMap:v,queryParamMap:C}))))}function e5(n,e){return n.providers&&!n._injector&&(n._injector=qh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ti(n){return n.outlet||be}function t5(n,e){let t=n.filter(r=>ti(r)===e);return t.push(...n.filter(r=>ti(r)!==e)),t}var Kb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function n5(n,e,t,r,i,s){let o=g1(n,e,t);return o.matched?(r=e5(e,r),Yz(r,e,t,i,s).pipe(We(a=>a===!0?o:U({},Kb)))):Le(o)}function g1(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},Kb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$x)(t,n,e);if(!i)return U({},Kb);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Vx(n,e,t,r){return t.length>0&&s5(n,t,r)?{segmentGroup:new Qe(e,i5(r,new Qe(t,n.children))),slicedSegments:[]}:t.length===0&&o5(n,t,r)?{segmentGroup:new Qe(n.segments,r5(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Qe(n.segments,n.children),slicedSegments:t}}function r5(n,e,t,r){let i={};for(let s of t)if(Jy(n,e,s)&&!r[ti(s)]){let o=new Qe([],{});i[ti(s)]=o}return U(U({},r),i)}function i5(n,e){let t={};t[be]=e;for(let r of n)if(r.path===""&&ti(r)!==be){let i=new Qe([],{});t[ti(r)]=i}return t}function s5(n,e,t){return t.some(r=>Jy(n,e,r)&&ti(r)!==be)}function o5(n,e,t){return t.some(r=>Jy(n,e,r))}function Jy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function a5(n,e,t){return e.length===0&&!n.children[t]}var Qb=class{};async function c5(n,e,t,r,i,s,o="emptyOnly",a){return new Yb(n,e,t,r,i,o,s,a).recognize()}var u5=31,Yb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Wb(this.urlSerializer,this.urlTree)}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}async recognize(){let e=Vx(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new ar(r,t),s=new yf("",i),o=Zx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new bc([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),be,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,be,t),rootSnapshot:t}}catch(r){if(r instanceof vf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ks?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof ar?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=t5(t,c),m=await this.processSegmentGroup(e,h,d,c,i);o.push(...m)}let a=y1(o);return l5(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof ks||h1(d))continue;throw d}if(a5(r,i,s))return new Qb;throw new ks(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(ti(r)!==o&&(o===be||!Jy(i,s,r)))throw new ks(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new ks(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:m,remainingSegments:v}=g1(t,i,s);if(!c)throw new ks(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>u5&&(this.allowRedirects=!1));let C=new bc(s,d,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Ux(i),ti(i),i.component??i._loadedComponent??null,i,jx(i),e),R=Gy(C,a,this.paramsInheritanceStrategy);if(C.params=Object.freeze(R.params),C.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,C,e),k=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,k.concat(v),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Ny(n5(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new ks(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:v}=a,C=new bc(m,h,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Ux(r),ti(r),r.component??r._loadedComponent??null,r,jx(r),e),R=Gy(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(R.params),C.data=Object.freeze(R.data);let{segmentGroup:P,slicedSegments:k}=Vx(t,m,v,c);if(k.length===0&&P.hasChildren()){let Q=await this.processChildren(d,c,P,C);return new ar(C,Q)}if(c.length===0&&k.length===0)return new ar(C,[]);let B=ti(r)===s,W=await this.processSegment(d,c,P,k,B?be:s,!0,C);return new ar(C,W instanceof ar?[W]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let s=t._loadedNgModuleFactory;return s&&!t._loadedInjector&&(t._loadedInjector=s.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Ny(Qz(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,t._loadedNgModuleFactory=s.factory,s}throw Xz(t)}return{routes:[],injector:e}}};function l5(n){n.sort((e,t)=>e.value.outlet===be?-1:t.value.outlet===be?1:e.value.outlet.localeCompare(t.value.outlet))}function d5(n){let e=n.value.routeConfig;return e&&e.path===""}function y1(n){let e=[],t=new Set;for(let r of n){if(!d5(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=y1(r.children);e.push(new ar(r.value,i))}return e.filter(r=>!t.has(r))}function Ux(n){return n.data||{}}function jx(n){return n.resolve||{}}function h5(n,e,t,r,i,s,o){return xn(async a=>{let{state:c,tree:d}=await c5(n,e,t,r,a.extractedUrl,i,s,o);return ae(U({},a),{targetSnapshot:c,urlAfterRedirects:d})})}function f5(n){return xn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Le(e);let i=new Set(r.map(a=>a.route)),s=new Set;for(let a of i)if(!s.has(a))for(let c of _1(a))s.add(c);let o=0;return Ut(s).pipe(Gm(a=>i.has(a)?p5(a,t,n):(a.data=Gy(a,a.parent,n).resolve,Le(void 0))),wi(()=>o++),Wm(1),xn(a=>o===s.size?Le(e):hn))})}function _1(n){let e=n.children.map(t=>_1(t)).flat();return[n,...e]}function p5(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!a1(r)&&(i[Ef]=r.title),lh(()=>(n.data=Gy(n,n.parent,t).resolve,m5(i,n,e).pipe(We(s=>(n._resolvedData=s,n.data=U(U({},n.data),s),null)))))}function m5(n,e,t){let r=Vb(n);if(r.length===0)return Le({});let i={};return Ut(r).pipe(xn(s=>g5(n[s],e,t).pipe(_s(),wi(o=>{if(o instanceof Nl)throw Wy(new Zo,o);i[s]=o}))),Wm(1),We(()=>i),dh(s=>h1(s)?hn:VI(s)))}function g5(n,e,t){let r=e._environmentInjector,i=xl(n,r),s=i.resolve?i.resolve(e,t):jt(r,()=>i(e,t));return Ac(s)}function Bx(n){return Bn(e=>{let t=n(e);return t?Ut(t).pipe(We(()=>e)):Le(e)})}var e0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===be);return r}getResolvedTitleForRoute(t){return t.data[Ef]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>j(v1),providedIn:"root"})}return n})(),v1=(()=>{class n extends e0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(pe(kx))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ol=new Z("",{factory:()=>({})}),bf=new Z(""),E1=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(hb);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await qx(jt(t,()=>r.loadComponent())),o=await T1(w1(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await I1(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function I1(n,e,t,r){let i=await qx(jt(t,()=>n.loadChildren())),s=await T1(w1(i)),o;s instanceof iy||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1,h;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,h=o,c=a.get(bf,[],{optional:!0,self:!0}).flat()),{routes:c.map(Zb),injector:a,factory:h}}function y5(n){return n&&typeof n=="object"&&"default"in n}function w1(n){return y5(n)?n.default:n}async function T1(n){return n}var Xy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>j(_5),providedIn:"root"})}return n})(),_5=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b1=new Z("");var v5=()=>{},C1=new Z(""),S1=(()=>{class n{currentNavigation=Pe(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Pe(null);events=new Tt;transitionAbortWithErrorSubject=new Tt;configLoader=j(E1);environmentInjector=j(St);destroyRef=j(Ir);urlSerializer=j(If);rootContexts=j(Ml);location=j(Jo);inputBindingEnabled=j(Yy,{optional:!0})!==null;titleStrategy=j(e0);options=j(Ol,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(Xy);createViewTransition=j(b1,{optional:!0});navigationErrorHandler=j(C1,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Vy(i)),r=i=>this.events.next(new Uy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Bt(()=>{this.transitions?.next(ae(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Lt(null),this.transitions.pipe(Dn(r=>r!==null),Bn(r=>{let i=!1,s=new AbortController,o=()=>!i&&this.currentTransition?.id===r.id;return Le(r).pipe(Bn(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pn.SupersededByNewNavigation),hn;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?ae(U({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload")return this.events.next(new Ms(a.id,this.urlSerializer.serialize(a.rawUrl),"",mf.IgnoredSameUrlNavigation)),a.resolve(!1),hn;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Le(a).pipe(Bn(m=>(this.events.next(new Sc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?hn:Promise.resolve(m))),h5(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),wi(m=>{r.targetSnapshot=m.targetSnapshot,r.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(C=>(C.finalUrl=m.urlAfterRedirects,C));let v=new Al(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:m,extractedUrl:v,source:C,restoredState:R,extras:P}=a,k=new Sc(m,this.urlSerializer.serialize(v),C,R);this.events.next(k);let B=s1(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ae(U({},a),{targetSnapshot:B,urlAfterRedirects:v,extras:ae(U({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(W=>(W.finalUrl=v,W)),Le(r)}else return this.events.next(new Ms(a.id,this.urlSerializer.serialize(a.extractedUrl),"",mf.IgnoredByUrlHandlingStrategy)),a.resolve(!1),hn}),We(a=>{let c=new xy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=ae(U({},a),{guards:Pz(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),Bz(a=>this.events.next(a)),Bn(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Wy(this.urlSerializer,a.guardsResult);let c=new Oy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!o())return hn;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Pn.GuardRejected),hn;if(a.guards.canActivateChecks.length===0)return Le(a);let d=new Fy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!o())return hn;let h=!1;return Le(a).pipe(f5(this.paramsInheritanceStrategy),wi({next:()=>{h=!0;let m=new Ly(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)},complete:()=>{h||this.cancelNavigationTransition(a,"",Pn.NoDataFromResolver)}}))}),Bx(a=>{let c=h=>{let m=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let v=h._environmentInjector;m.push(this.configLoader.loadComponent(v,h.routeConfig).then(C=>{h.component=C}))}for(let v of h.children)m.push(...c(v));return m},d=c(a.targetSnapshot.root);return d.length===0?Le(a):Ut(Promise.all(d).then(()=>a))}),Bx(()=>this.afterPreactivation()),Bn(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?Ut(d).pipe(We(()=>r)):Le(r)}),fn(1),We(a=>{let c=Sz(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=ae(U({},a),{targetRouterState:c}),this.currentNavigation.update(d=>(d.targetRouterState=c,d)),this.events.next(new Rl),o()&&(new Gb(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),o()&&(i=!0,this.currentNavigation.update(d=>(d.abort=v5,d)),this.lastSuccessfulNavigation.set(Bt(this.currentNavigation)),this.events.next(new Vi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),hh(f1(s.signal).pipe(Dn(()=>!i&&!r.targetRouterState),wi(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Pn.Aborted)}))),wi({complete:()=>{i=!0}}),hh(this.transitionAbortWithErrorSubject.pipe(wi(a=>{throw a}))),BI(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Pn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),dh(a=>{if(i=!0,this.destroyed)return r.resolve(!1),hn;if(d1(a))this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),Rz(a)?this.events.next(new Pl(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Dc(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=jt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Nl){let{message:h,cancellationCode:m}=Wy(this.urlSerializer,d);this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),h,m)),this.events.next(new Pl(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return hn}))}))}cancelNavigationTransition(t,r,i){let s=new Dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Bt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E5(n){return n!==hf}var D1=new Z("");var A1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>j(I5),providedIn:"root"})}return n})(),Qy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},I5=(()=>{class n extends Qy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=mc(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t0=(()=>{class n{urlSerializer=j(If);options=j(Ol,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Jo);urlHandlingStrategy=j(Xy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ni;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ni?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=s1(null,j(St));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>j(w5),providedIn:"root"})}return n})(),w5=(()=>{class n extends t0{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Sc?this.updateStateMemento():t instanceof Ms?this.commitTransition(r):t instanceof Al?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Rl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Dr&&!i1(t)?this.restoreHistory(r):t instanceof Dc?this.restoreHistory(r,!0):t instanceof Vi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=U(U({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=U(U({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=mc(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function n0(n,e){n.events.pipe(Dn(t=>t instanceof Vi||t instanceof Dr||t instanceof Dc||t instanceof Ms),We(t=>t instanceof Vi||t instanceof Ms?0:(t instanceof Dr?t.code===Pn.Redirect||t.code===Pn.SupersededByNewNavigation:!1)?2:1),Dn(t=>t!==2),fn(1)).subscribe(()=>{e()})}var R1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},P1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rc=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(JT);stateManager=j(t0);options=j(Ol,{optional:!0})||{};pendingTasks=j(Ds);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(S1);urlSerializer=j(If);location=j(Jo);urlHandlingStrategy=j(Xy);injector=j(St);_events=new Tt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(A1);injectorCleanup=j(D1,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(bf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Yy,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Xt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Bt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Dr&&r.code!==Pn.Redirect&&r.code!==Pn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Vi)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Pl){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||E5(i.source)},o);this.scheduleNavigation(a,hf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}bz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(sr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Bt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Zb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let v=i?i.snapshot:this.routerState.snapshot.root;m=e1(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return t1(m,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ea(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,hf,null,r)}navigate(t,r={skipLocationChange:!1}){return T5(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ws(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},R1):r===!1?i=U({},P1):i=r,ea(t))return Mx(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Mx(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,c=v});let h=this.pendingTasks.add();return n0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T5(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}var Zy=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Pe(null);get href(){return Bt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Tt;applicationErrorHandler=j(sr);options=j(Ol,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(j(new ly("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof Vi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ea(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ea(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(he(Rc),he(xs),Vh("tabindex"),he(Rs),he(Jr),he(bl))};static \u0275dir=$t({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&re("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&zh("href",i.reactiveHref(),OT)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ic],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ic],replaceUrl:[2,"replaceUrl","replaceUrl",Ic],routerLink:"routerLink"},features:[Pi]})}return n})();var S5=new Z("");function r0(n,...e){return mn([{provide:bf,multi:!0,useValue:n},[],{provide:xs,useFactory:D5},{provide:oy,multi:!0,useFactory:A5},e.map(t=>t.\u0275providers)])}function D5(){return j(Rc).routerState.root}function A5(){let n=j(mt);return e=>{let t=n.get(ki);if(e!==t.components[0])return;let r=n.get(Rc),i=n.get(R5);n.get(P5)===1&&r.initialNavigation(),n.get(N5,null,{optional:!0})?.setUpPreloading(),n.get(S5,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var R5=new Z("",{factory:()=>new Tt}),P5=new Z("",{factory:()=>1});var N5=new Z("");var Ie=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Ie||{}),Ar="*";function i0(n,e){return{type:Ie.Trigger,name:n,definitions:e,options:{}}}function s0(n,e=null){return{type:Ie.Animate,styles:e,timings:n}}function N1(n,e=null){return{type:Ie.Sequence,steps:n,options:e}}function Nc(n){return{type:Ie.Style,styles:n,offset:null}}function o0(n,e,t=null){return{type:Ie.Transition,expr:n,animation:e,options:t}}function a0(n,e,t=null){return{type:Ie.Query,selector:n,animation:e,options:t}}function c0(n,e){return{type:Ie.Stagger,timings:n,animation:e}}var Ui=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Pc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Fl="!";function k1(n){return new q(3e3,!1)}function k5(){return new q(3100,!1)}function M5(){return new q(3101,!1)}function x5(n){return new q(3001,!1)}function O5(n){return new q(3003,!1)}function F5(n){return new q(3004,!1)}function x1(n,e){return new q(3005,!1)}function O1(){return new q(3006,!1)}function F1(){return new q(3007,!1)}function L1(n,e){return new q(3008,!1)}function V1(n){return new q(3002,!1)}function U1(n,e,t,r,i){return new q(3010,!1)}function j1(){return new q(3011,!1)}function B1(){return new q(3012,!1)}function $1(){return new q(3200,!1)}function H1(){return new q(3202,!1)}function q1(){return new q(3013,!1)}function z1(n){return new q(3014,!1)}function G1(n){return new q(3015,!1)}function W1(n){return new q(3016,!1)}function K1(n,e){return new q(3404,!1)}function L5(n){return new q(3502,!1)}function Q1(n){return new q(3503,!1)}function Y1(){return new q(3300,!1)}function J1(n){return new q(3504,!1)}function X1(n){return new q(3301,!1)}function Z1(n,e){return new q(3302,!1)}function eO(n){return new q(3303,!1)}function tO(n,e){return new q(3400,!1)}function nO(n){return new q(3401,!1)}function rO(n){return new q(3402,!1)}function iO(n,e){return new q(3505,!1)}function Os(n){switch(n.length){case 0:return new Ui;case 1:return n[0];default:return new Pc(n)}}function h0(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let d=c.get("offset"),h=d==o,m=h&&a||new Map;c.forEach((v,C)=>{let R=C,P=v;if(C!=="offset")switch(R=n.normalizePropertyName(R,i),P){case Fl:P=t.get(C);break;case Ar:P=r.get(C);break;default:P=n.normalizeStyleValue(C,R,P,i);break}m.set(R,P)}),h||s.push(m),a=m,o=d}),i.length)throw L5(i);return s}function e_(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&u0(t,"start",n)));break;case"done":n.onDone(()=>r(t&&u0(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&u0(t,"destroy",n)));break}}function u0(n,e,t){let r=t.totalTime,i=!!t.disabled,s=t_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function t_(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function qn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function f0(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var V5=typeof document>"u"?null:document.documentElement;function n_(n){let e=n.parentNode||n.host||null;return e===V5?null:e}function U5(n){return n.substring(1,6)=="ebkit"}var kc=null,M1=!1;function sO(n){kc||(kc=j5()||{},M1=kc.style?"WebkitAppearance"in kc.style:!1);let e=!0;return kc.style&&!U5(n)&&(e=n in kc.style,!e&&M1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in kc.style)),e}function j5(){return typeof document<"u"?document.body:null}function p0(n,e){for(;e;){if(e===n)return!0;e=n_(e)}return!1}function m0(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var B5=1e3,g0="{{",$5="}}",y0="ng-enter",r_="ng-leave",Cf="ng-trigger",Sf=".ng-trigger",_0="ng-animating",i_=".ng-animating";function ji(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:l0(parseFloat(e[1]),e[2])}function l0(n,e){return e==="s"?n*B5:n}function Df(n,e,t){return n.hasOwnProperty("duration")?n:q5(n,e,t)}var H5=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function q5(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(H5);if(o===null)return e.push(k1(n)),{duration:0,delay:0,easing:""};r=l0(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=l0(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(k5()),o=!0),i<0&&(e.push(M5()),o=!0),o&&e.splice(a,0,k1(n))}return{duration:r,delay:i,easing:s}}function oO(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function ri(n,e,t){e.forEach((r,i)=>{let s=s_(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ta(n,e){e.forEach((t,r)=>{let i=s_(r);n.style[i]=""})}function Ll(n){return Array.isArray(n)?n.length==1?n[0]:N1(n):n}function aO(n,e,t){let r=e.params||{},i=v0(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(x5(s))})}var d0=new RegExp(`${g0}\\s*(.+?)\\s*${$5}`,"g");function v0(n){let e=[];if(typeof n=="string"){let t;for(;t=d0.exec(n);)e.push(t[1]);d0.lastIndex=0}return e}function Vl(n,e,t){let r=`${n}`,i=r.replace(d0,(s,o)=>{let a=e[o];return a==null&&(t.push(O5(o)),a=""),a.toString()});return i==r?n:i}var z5=/-+([a-z0-9])/g;function s_(n){return n.replace(z5,(...e)=>e[1].toUpperCase())}function cO(n,e){return n===0||e===0}function uO(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,o_(n,a)))}}return e}function zn(n,e,t){switch(e.type){case Ie.Trigger:return n.visitTrigger(e,t);case Ie.State:return n.visitState(e,t);case Ie.Transition:return n.visitTransition(e,t);case Ie.Sequence:return n.visitSequence(e,t);case Ie.Group:return n.visitGroup(e,t);case Ie.Animate:return n.visitAnimate(e,t);case Ie.Keyframes:return n.visitKeyframes(e,t);case Ie.Style:return n.visitStyle(e,t);case Ie.Reference:return n.visitReference(e,t);case Ie.AnimateChild:return n.visitAnimateChild(e,t);case Ie.AnimateRef:return n.visitAnimateRef(e,t);case Ie.Query:return n.visitQuery(e,t);case Ie.Stagger:return n.visitStagger(e,t);default:throw F5(e.type)}}function o_(n,e){return window.getComputedStyle(n)[e]}var F0=(()=>{class n{validateStyleProperty(t){return sO(t)}containsElement(t,r){return p0(t,r)}getParentElement(t){return n_(t)}query(t,r,i){return m0(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Ui(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),xc=class{static NOOP=new F0},Oc=class{};var G5=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),d_=class extends Oc{normalizePropertyName(e,t){return s_(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(G5.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(x1(e,r))}return o+s}};var h_="*";function W5(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>K5(r,t,e)):t.push(n),t}function K5(n,e,t){if(n[0]==":"){let c=Q5(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(G1(n)),e;let i=r[1],s=r[2],o=r[3];e.push(lO(i,o));let a=i==h_&&o==h_;s[0]=="<"&&!a&&e.push(lO(o,i))}function Q5(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(W1(n)),"* => *"}}var a_=new Set(["true","1"]),c_=new Set(["false","0"]);function lO(n,e){let t=a_.has(n)||c_.has(n),r=a_.has(e)||c_.has(e);return(i,s)=>{let o=n==h_||n==i,a=e==h_||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?a_.has(n):c_.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?a_.has(e):c_.has(e)),o&&a}}var EO=":self",Y5=new RegExp(`s*${EO}s*,?`,"g");function IO(n,e,t,r){return new C0(n).build(e,t,r)}var dO="",C0=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new S0(t);return this._resetContextStyleTimingState(i),zn(this,Ll(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=dO,e.collectedStyles=new Map,e.collectedStyles.set(dO,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(O1()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ie.State){let c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=d}else if(a.type==Ie.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(F1())}),{type:Ie.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{v0(c).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&t.errors.push(L1(e.name,[...s.values()]))}return{type:Ie.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=zn(this,Ll(e.animation),t),i=W5(e.expr,t.errors);return{type:Ie.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Mc(e.options)}}visitSequence(e,t){return{type:Ie.Sequence,steps:e.steps.map(r=>zn(this,r,t)),options:Mc(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=zn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Ie.Group,steps:s,options:Mc(e.options)}}visitAnimate(e,t){let r=e9(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Nc({});if(s.type==Ie.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let d={};r.easing&&(d.easing=r.easing),o=Nc(d)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Ie.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Ar?r.push(a):t.errors.push(V1(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(g0)>=0){s=!0;break}}}),{type:Ie.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let d=t.collectedStyles.get(t.currentQuerySelector),h=d.get(c),m=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(U1(c,h.startTime,h.endTime,s,i)),m=!1),s=h.startTime),m&&d.set(c,{startTime:s,endTime:i}),t.options&&aO(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Ie.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(j1()),r;let i=1,s=0,o=[],a=!1,c=!1,d=0,h=e.steps.map(B=>{let W=this._makeStyleAst(B,t),Q=W.offset!=null?W.offset:Z5(W.styles),oe=0;return Q!=null&&(s++,oe=W.offset=Q),c=c||oe<0||oe>1,a=a||oe<d,d=oe,o.push(oe),W});c&&t.errors.push(B1()),a&&t.errors.push($1());let m=e.steps.length,v=0;s>0&&s<m?t.errors.push(H1()):s==0&&(v=i/(m-1));let C=m-1,R=t.currentTime,P=t.currentAnimateTimings,k=P.duration;return h.forEach((B,W)=>{let Q=v>0?W==C?1:v*W:o[W],oe=Q*k;t.currentTime=R+P.delay+oe,P.duration=oe,this._validateStyleAst(B,t),B.offset=Q,r.styles.push(B)}),r}visitReference(e,t){return{type:Ie.Reference,animation:zn(this,Ll(e.animation),t),options:Mc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ie.AnimateChild,options:Mc(e.options)}}visitAnimateRef(e,t){return{type:Ie.AnimateRef,animation:this.visitReference(e.animation,t),options:Mc(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=J5(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,qn(t.collectedStyles,t.currentQuerySelector,new Map);let a=zn(this,Ll(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Ie.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Mc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(q1());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Df(e.timings,t.errors,!0);return{type:Ie.Stagger,animation:zn(this,Ll(e.animation),t),timings:r,options:null}}};function J5(n){let e=!!n.split(/\s*,\s*/).find(t=>t==EO);return e&&(n=n.replace(Y5,"")),n=n.replace(/@\*/g,Sf).replace(/@\w+/g,t=>Sf+"-"+t.slice(1)).replace(/:animating/g,i_),[n,e]}function X5(n){return n?U({},n):null}var S0=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Z5(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function e9(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Df(n,e).duration;return E0(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=E0(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Df(t,e);return E0(i.duration,i.delay,i.easing)}function Mc(n){return n?(n=U({},n),n.params&&(n.params=X5(n.params))):n={},n}function E0(n,e,t){return{duration:n,delay:e,easing:t}}function L0(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Rf=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},t9=1,n9=":enter",r9=new RegExp(n9,"g"),i9=":leave",s9=new RegExp(i9,"g");function wO(n,e,t,r,i,s=new Map,o=new Map,a,c,d=[]){return new D0().buildKeyframes(n,e,t,r,i,s,o,a,c,d)}var D0=class{buildKeyframes(e,t,r,i,s,o,a,c,d,h=[]){d=d||new Rf;let m=new A0(e,t,d,i,s,h,[]);m.options=c;let v=c.delay?ji(c.delay):0;m.currentTimeline.delayNextStep(v),m.currentTimeline.setStyles([o],null,m.errors,c),zn(this,r,m);let C=m.timelines.filter(R=>R.containsAnimation());if(C.length&&a.size){let R;for(let P=C.length-1;P>=0;P--){let k=C[P];if(k.element===t){R=k;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([a],null,m.errors,c)}return C.length?C.map(R=>R.buildKeyframes()):[L0(t,[],[],[],0,v,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:ji(Vl(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?ji(r.duration):null,a=r.delay!=null?ji(r.delay):null;return o!==0&&e.forEach(c=>{let d=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),zn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Ie.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=f_);let o=ji(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>zn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?ji(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),zn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Vl(r,t.params,t.errors):r;return Df(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Ie.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let d=c.offset||0;a.forwardTime(d*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ji(i.delay):0;s&&(t.previousNode.type===Ie.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=f_);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,h)=>{t.currentQueryIndex=h;let m=t.createSubContext(e.options,d);s&&m.delayNextStep(s),d===t.element&&(c=m.currentTimeline),zn(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let v=m.currentTimeline.currentTime;o=Math.max(o,v)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let m=h.currentTime;zn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}},f_={},A0=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=f_;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new p_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=ji(r.duration)),r.delay!=null&&(i.delay=ji(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Vl(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=f_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new R0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(r9,"."+this._enterClassName),e=e.replace(s9,"."+this._leaveClassName);let c=r!=1,d=this._driver.query(this.element,e,c);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!s&&a.length==0&&o.push(z1(t)),a}},p_=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=t9,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ar),this._currentKeyframe.set(t,Ar);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=o9(e,this._globalTimelineStyles);for(let[a,c]of o){let d=Vl(c,s,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ar),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let d=new Map([...this._backFill,...a]);d.forEach((h,m)=>{h===Fl?e.add(m):h===Ar&&t.add(m)}),r||d.set("offset",c/this.duration),i.push(d)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return L0(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},R0=class extends p_{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let d=new Map(e[0]);d.set("offset",hO(a)),s.push(d);let h=e.length-1;for(let m=1;m<=h;m++){let v=new Map(e[m]),C=v.get("offset"),R=t+C*r;v.set("offset",hO(R/o)),s.push(v)}r=o,t=0,i="",e=s}return L0(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function hO(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function o9(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Ar)}else for(let[s,o]of i)t.set(s,o)}),t}function fO(n,e,t,r,i,s,o,a,c,d,h,m,v){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:h,totalTime:m,errors:v}}var I0={},m_=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return a9(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,d,h){let m=[],v=this.ast.options&&this.ast.options.params||I0,C=a&&a.params||I0,R=this.buildStyles(r,C,m),P=c&&c.params||I0,k=this.buildStyles(i,P,m),B=new Set,W=new Map,Q=new Map,oe=i==="void",ze={params:TO(P,v),delay:this.ast.options?.delay},me=h?[]:wO(e,t,this.ast.animation,s,o,R,k,ze,d,m),w=0;return me.forEach(y=>{w=Math.max(y.duration+y.delay,w)}),m.length?fO(t,this._triggerName,r,i,oe,R,k,[],[],W,Q,w,m):(me.forEach(y=>{let I=y.element,T=qn(W,I,new Set);y.preStyleProps.forEach(A=>T.add(A));let b=qn(Q,I,new Set);y.postStyleProps.forEach(A=>b.add(A)),I!==t&&B.add(I)}),fO(t,this._triggerName,r,i,oe,R,k,me,[...B.values()],W,Q,w))}};function a9(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function TO(n,e){let t=U({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var P0=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=TO(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Vl(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function c9(n,e,t){return new N0(n,e,t)}var N0=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new P0(i.style,s,r))}),pO(this.states,"true","1"),pO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new m_(e,i,this.states))}),this.fallbackTransition=u9(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function u9(n,e,t){let r=[(o,a)=>!0],i={type:Ie.Sequence,steps:[],options:null},s={type:Ie.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new m_(n,s,e)}function pO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var l9=new Rf,k0=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=IO(this._driver,t,r,i);if(r.length)throw Q1(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=h0(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=wO(this._driver,t,s,y0,r_,new Map,new Map,r,l9,i),o.forEach(h=>{let m=qn(a,h.element,new Map);h.postStyleProps.forEach(v=>m.set(v,null))})):(i.push(Y1()),o=[]),i.length)throw J1(i);a.forEach((h,m)=>{h.forEach((v,C)=>{h.set(C,this._driver.computeStyle(m,C,Ar))})});let c=o.map(h=>{let m=a.get(h.element);return this._buildPlayer(h,new Map,m)}),d=Os(c);return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw X1(e);return t}listen(e,t,r,i){let s=t_(t,"","","");return e_(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},mO="ng-animate-queued",d9=".ng-animate-queued",w0="ng-animate-disabled",h9=".ng-animate-disabled",f9="ng-star-inserted",p9=".ng-star-inserted",m9=[],bO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},g9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ii="__ng_removed",Pf=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=_9(i),r){let s=e,{value:o}=s,a=xo(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Af="void",T0=new Pf(Af),M0=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Rr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw Z1(r,t);if(r==null||r.length==0)throw eO(t);if(!v9(r))throw tO(r,t);let s=qn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=qn(this._engine.statesByElement,e,new Map);return a.has(t)||(Rr(e,Cf),Rr(e,Cf+"-"+t),a.set(t,T0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw nO(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Nf(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Rr(e,Cf),Rr(e,Cf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),d=new Pf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=T0),!(d.value===Af)&&c.value===d.value){if(!w9(c.params,d.params)){let P=[],k=s.matchStyles(c.value,c.params,P),B=s.matchStyles(d.value,d.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{ta(e,k),ri(e,B)})}return}let v=qn(this._engine.playersByElement,e,[]);v.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let C=s.matchTransition(c.value,d.value,e,d.params),R=!1;if(!C){if(!i)return;C=s.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:C,fromState:c,toState:d,player:o,isFallbackTransition:R}),R||(Rr(e,mO),o.onStart(()=>{Ul(e,mO)})),o.onDone(()=>{let P=this.players.indexOf(o);P>=0&&this.players.splice(P,1);let k=this._engine.playersByElement.get(e);if(k){let B=k.indexOf(o);B>=0&&k.splice(B,1)}}),this.players.push(o),v.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Sf,!0);r.forEach(i=>{if(i[ii])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,d)=>{if(o.set(d,c.value),this._triggers.has(d)){let h=this.trigger(e,d,Af,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Os(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,d=r.get(o)||T0,h=new Pf(Af),m=new Nf(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:d,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[ii];(!s||s===bO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Rr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=t_(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,e_(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},x0=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new M0(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let d=r.indexOf(c);r.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(u_(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!u_(t))return;let s=t[ii];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Rr(e,w0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ul(e,w0))}removeNode(e,t,r){if(u_(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ii]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return u_(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Sf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,i_,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Os(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ii];if(t&&t.setForRemoval){if(e[ii]=bO,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(w0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,h9,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Rr(i,f9)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Os(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw rO(e)}_flushAnimations(e,t){let r=new Rf,i=[],s=new Map,o=[],a=new Map,c=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(ne=>{h.add(ne);let ie=this.driver.query(ne,d9,!0);for(let se=0;se<ie.length;se++)h.add(ie[se])});let m=this.bodyNode,v=Array.from(this.statesByElement.keys()),C=_O(v,this.collectedEnterElements),R=new Map,P=0;C.forEach((ne,ie)=>{let se=y0+P++;R.set(ie,se),ne.forEach(Ae=>Rr(Ae,se))});let k=[],B=new Set,W=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){let ie=this.collectedLeaveElements[ne],se=ie[ii];se&&se.setForRemoval&&(k.push(ie),B.add(ie),se.hasAnimation?this.driver.query(ie,p9,!0).forEach(Ae=>B.add(Ae)):W.add(ie))}let Q=new Map,oe=_O(v,Array.from(B));oe.forEach((ne,ie)=>{let se=r_+P++;Q.set(ie,se),ne.forEach(Ae=>Rr(Ae,se))}),e.push(()=>{C.forEach((ne,ie)=>{let se=R.get(ie);ne.forEach(Ae=>Ul(Ae,se))}),oe.forEach((ne,ie)=>{let se=Q.get(ie);ne.forEach(Ae=>Ul(Ae,se))}),k.forEach(ne=>{this.processLeaveNode(ne)})});let ze=[],me=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(t).forEach(se=>{let Ae=se.player,wt=se.element;if(ze.push(Ae),this.collectedEnterElements.length){let pt=wt[ii];if(pt&&pt.setForMove){if(pt.previousTriggersValues&&pt.previousTriggersValues.has(se.triggerName)){let Yn=pt.previousTriggersValues.get(se.triggerName),ln=this.statesByElement.get(se.element);if(ln&&ln.has(se.triggerName)){let fr=ln.get(se.triggerName);fr.value=Yn,ln.set(se.triggerName,fr)}}Ae.destroy();return}}let kn=!m||!this.driver.containsElement(m,wt),yt=Q.get(wt),st=R.get(wt),Je=this._buildInstruction(se,r,st,yt,kn);if(Je.errors&&Je.errors.length){me.push(Je);return}if(kn){Ae.onStart(()=>ta(wt,Je.fromStyles)),Ae.onDestroy(()=>ri(wt,Je.toStyles)),i.push(Ae);return}if(se.isFallbackTransition){Ae.onStart(()=>ta(wt,Je.fromStyles)),Ae.onDestroy(()=>ri(wt,Je.toStyles)),i.push(Ae);return}let hr=[];Je.timelines.forEach(pt=>{pt.stretchStartingKeyframe=!0,this.disabledNodes.has(pt.element)||hr.push(pt)}),Je.timelines=hr,r.append(wt,Je.timelines);let Da={instruction:Je,player:Ae,element:wt};o.push(Da),Je.queriedElements.forEach(pt=>qn(a,pt,[]).push(Ae)),Je.preStyleProps.forEach((pt,Yn)=>{if(pt.size){let ln=c.get(Yn);ln||c.set(Yn,ln=new Set),pt.forEach((fr,mi)=>ln.add(mi))}}),Je.postStyleProps.forEach((pt,Yn)=>{let ln=d.get(Yn);ln||d.set(Yn,ln=new Set),pt.forEach((fr,mi)=>ln.add(mi))})});if(me.length){let ne=[];me.forEach(ie=>{ne.push(iO(ie.triggerName,ie.errors))}),ze.forEach(ie=>ie.destroy()),this.reportError(ne)}let w=new Map,y=new Map;o.forEach(ne=>{let ie=ne.element;r.has(ie)&&(y.set(ie,ie),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,w))}),i.forEach(ne=>{let ie=ne.element;this._getPreviousPlayers(ie,!1,ne.namespaceId,ne.triggerName,null).forEach(Ae=>{qn(w,ie,[]).push(Ae),Ae.destroy()})});let I=k.filter(ne=>vO(ne,c,d)),T=new Map;yO(T,this.driver,W,d,Ar).forEach(ne=>{vO(ne,c,d)&&I.push(ne)});let A=new Map;C.forEach((ne,ie)=>{yO(A,this.driver,new Set(ne),c,Fl)}),I.forEach(ne=>{let ie=T.get(ne),se=A.get(ne);T.set(ne,new Map([...ie?.entries()??[],...se?.entries()??[]]))});let E=[],lt=[],un={};o.forEach(ne=>{let{element:ie,player:se,instruction:Ae}=ne;if(r.has(ie)){if(h.has(ie)){se.onDestroy(()=>ri(ie,Ae.toStyles)),se.disabled=!0,se.overrideTotalTime(Ae.totalTime),i.push(se);return}let wt=un;if(y.size>1){let yt=ie,st=[];for(;yt=yt.parentNode;){let Je=y.get(yt);if(Je){wt=Je;break}st.push(yt)}st.forEach(Je=>y.set(Je,wt))}let kn=this._buildAnimation(se.namespaceId,Ae,w,s,A,T);if(se.setRealPlayer(kn),wt===un)E.push(se);else{let yt=this.playersByElement.get(wt);yt&&yt.length&&(se.parentPlayer=Os(yt)),i.push(se)}}else ta(ie,Ae.fromStyles),se.onDestroy(()=>ri(ie,Ae.toStyles)),lt.push(se),h.has(ie)&&i.push(se)}),lt.forEach(ne=>{let ie=s.get(ne.element);if(ie&&ie.length){let se=Os(ie);ne.setRealPlayer(se)}}),i.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<k.length;ne++){let ie=k[ne],se=ie[ii];if(Ul(ie,r_),se&&se.hasAnimation)continue;let Ae=[];if(a.size){let kn=a.get(ie);kn&&kn.length&&Ae.push(...kn);let yt=this.driver.query(ie,i_,!0);for(let st=0;st<yt.length;st++){let Je=a.get(yt[st]);Je&&Je.length&&Ae.push(...Je)}}let wt=Ae.filter(kn=>!kn.destroyed);wt.length?E9(this,ie,wt):this.processLeaveNode(ie)}return k.length=0,E.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();let ie=this.players.indexOf(ne);this.players.splice(ie,1)}),ne.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Af;a.forEach(d=>{d.queued||!c&&d.triggerName!=i||o.push(d)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let d=c.element,h=d!==s,m=qn(r,d,[]);this._getPreviousPlayers(d,h,o,a,t.toState).forEach(C=>{let R=C.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),C.destroy(),m.push(C)})}ta(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,d=[],h=new Set,m=new Set,v=t.timelines.map(R=>{let P=R.element;h.add(P);let k=P[ii];if(k&&k.removedBeforeQueried)return new Ui(R.duration,R.delay);let B=P!==c,W=I9((r.get(P)||m9).map(w=>w.getRealPlayer())).filter(w=>{let y=w;return y.element?y.element===P:!1}),Q=s.get(P),oe=o.get(P),ze=h0(this._normalizer,R.keyframes,Q,oe),me=this._buildPlayer(R,ze,W);if(R.subTimeline&&i&&m.add(P),B){let w=new Nf(e,a,P);w.setRealPlayer(me),d.push(w)}return me});d.forEach(R=>{qn(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>y9(this.playersByQueriedElement,R.element,R))}),h.forEach(R=>Rr(R,_0));let C=Os(v);return C.onDestroy(()=>{h.forEach(R=>Ul(R,_0)),ri(c,t.toStyles)}),m.forEach(R=>{qn(i,R,[]).push(C)}),C}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ui(e.duration,e.delay)}},Nf=class{namespaceId;triggerName;element;_player=new Ui;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>e_(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function y9(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function _9(n){return n??null}function u_(n){return n&&n.nodeType===1}function v9(n){return n=="start"||n=="done"}function gO(n,e){let t=n.style.display;return n.style.display=e??"none",t}function yO(n,e,t,r,i){let s=[];t.forEach(c=>s.push(gO(c)));let o=[];r.forEach((c,d)=>{let h=new Map;c.forEach(m=>{let v=e.computeStyle(d,m,i);h.set(m,v),(!v||v.length==0)&&(d[ii]=g9,o.push(d))}),n.set(d,h)});let a=0;return t.forEach(c=>gO(c,s[a++])),o}function _O(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let d=a.parentNode;return t.has(d)?c=d:i.has(d)?c=r:c=o(d),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Rr(n,e){n.classList?.add(e)}function Ul(n,e){n.classList?.remove(e)}function E9(n,e,t){Os(t).onDone(()=>n.processLeaveNode(e))}function I9(n){let e=[];return CO(n,e),e}function CO(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Pc?CO(r.players,e):e.push(r)}}function w9(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function vO(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var jl=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new x0(e.body,t,r),this._timelineEngine=new k0(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],d=[],h=IO(this._driver,s,c,d);if(c.length)throw K1(i,c);a=c9(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=f0(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=f0(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function T9(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=b0(e[0]),e.length>1&&(r=b0(e[e.length-1]))):e instanceof Map&&(t=b0(e)),t||r?new b9(n,t,r):null}var b9=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ri(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ri(this._element,this._initialStyles),this._endStyles&&(ri(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ta(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ta(this._element,this._endStyles),this._endStyles=null),ri(this._element,this._initialStyles),this._state=3)}}return n})();function b0(n){let e=null;return n.forEach((t,r)=>{C9(r)&&(e=e||new Map,e.set(r,t))}),e}function C9(n){return n==="display"||n==="position"}var g_=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:o_(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},y_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return p0(e,t)}getParentElement(e){return n_(e)}query(e,t,r){return m0(e,t,r)}computeStyle(e,t,r){return o_(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let d=new Map,h=o.filter(C=>C instanceof g_);cO(r,i)&&h.forEach(C=>{C.currentSnapshot.forEach((R,P)=>d.set(P,R))});let m=oO(t).map(C=>new Map(C));m=uO(e,m,d);let v=T9(e,m);return new g_(e,m,c,v)}};var l_="@",SO="@.disabled",__=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==l_&&t==SO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},O0=class extends __{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==l_?t.charAt(1)=="."&&t==SO?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==l_){let s=S9(e),o=t.slice(1),a="";return o.charAt(0)!=l_&&([o,a]=D9(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let d=c._data||-1;this.factory.scheduleListenerCallback(d,r,c)})}return this.delegate.listen(e,t,r,i)}};function S9(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function D9(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var v_=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let d=this._rendererCache,h=d.get(i);if(!h){let m=()=>d.delete(i);h=new __("",i,this.engine,m),d.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(s,o,e,d.name,d)};return t.data.animation.forEach(a),new O0(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var R9=(()=>{class n extends jl{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(pe(Dt),pe(xc),pe(Oc))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function P9(){return new d_}function N9(){return new v_(j(af),j(jl),j(tt))}var DO=[{provide:Oc,useFactory:P9},{provide:jl,useClass:R9},{provide:As,useFactory:N9}],ove=[{provide:xc,useClass:F0},{provide:Kg,useValue:"NoopAnimations"},...DO],k9=[{provide:xc,useFactory:()=>new y_},{provide:Kg,useFactory:()=>"BrowserAnimations"},...DO];function AO(){return Ni("NgEagerAnimations"),[...k9]}var U0=class{constructor(){}loadScript(e,t,r,i=null){if(typeof document<"u"&&!document.getElementById(e)){let s=document.createElement("script");s.async=!0,s.src=t,s.onload=r,i||(i=document.head),i.appendChild(s)}}},j0=class{constructor(){}},RO=()=>typeof window.google?.accounts<"u",x9=()=>{if(!RO())throw new Error("Google Accounts API is undefined")},V0=()=>(x9(),window.google.accounts),O9={oneTapEnabled:!0},B0=(()=>{class n extends U0{static{this.PROVIDER_ID="GOOGLE"}constructor(t,r){super(),this.clientId=t,this.initOptions=r,this.changeUser=new Et,this._socialUser=new Lt(null),this._accessToken=new Lt(null),this._receivedAccessToken=new Et,this.initOptions=U(U({},O9),this.initOptions),this._socialUser.pipe(Km(1)).subscribe(this.changeUser),this._accessToken.pipe(Km(1)).subscribe(this._receivedAccessToken)}initialize(t,r){return new Promise((i,s)=>{try{this.loadScript(n.PROVIDER_ID,this.getGoogleLoginScriptSrc(r||""),()=>{if(RO()){if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:o})=>{let a=this.createSocialUser(o);this._socialUser.next(a)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(Dn(o=>o===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(a=>a).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:a=>{a.error?this._accessToken.error({code:a.error,description:a.error_description,uri:a.error_uri}):this._accessToken.next(a.access_token)}})}i()}})}catch(o){s(o)}})}getLoginStatus(){return new Promise((t,r)=>{this._socialUser.value?t(this._socialUser.value):r(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,r)=>{V0().id.revoke(this._socialUser.value.id,i=>{i.error?r(i.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,r)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(fn(1)).subscribe(t)):this._socialUser.value?r("No token client was instantiated, you should specify some scopes."):r("You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,r)=>{this._tokenClient?this._accessToken.value?V0().oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):r("No access token to revoke"):r("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}async signOut(){V0().id.disableAutoSelect(),this._socialUser.next(null)}createSocialUser(t){let r=new j0;r.idToken=t;let i=this.decodeJwt(t);return r.id=i.sub,r.name=i.name,r.email=i.email,r.photoUrl=i.picture,r.firstName=i.given_name,r.lastName=i.family_name,r}decodeJwt(t){let i=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(i).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}getGoogleLoginScriptSrc(t){return t?`https://accounts.google.com/gsi/client?hl=${t}`:"https://accounts.google.com/gsi/client"}}return n})();var $0="Service workers are disabled or not supported by this browser",Bl=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new we(r=>r.error(new q(5601,!1)));else{let r=null,i=new Tt;this.worker=new we(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let s=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(Bn(()=>e.getRegistration().then(d=>{if(!d)throw new q(5601,!1);return d})));let o=new Tt;this.events=o.asObservable();let a=d=>{let{data:h}=d;h?.type&&o.next(h)};e.addEventListener("message",a),t?.get(ki,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(fn(1)).subscribe(i=>{i.postMessage(U({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Dn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(fn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Dn(i=>i.nonce===e),fn(1),We(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},F9=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Tt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=ys,this.notificationClicks=ys,this.notificationCloses=ys,this.pushSubscriptionChanges=ys,this.subscription=ys;return}this.messages=this.sw.eventsOfType("PUSH").pipe(We(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(We(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(We(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(We(i=>i.data)),this.pushManager=this.sw.registration.pipe(We(i=>i.pushManager));let r=this.pushManager.pipe(Bn(i=>i.getSubscription()));this.subscription=new we(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error($0));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(Bn(c=>c.subscribe(r)),fn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error($0));let t=r=>{if(r===null)throw new q(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new q(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(fn(1),Bn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(pe(Bl))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),L9=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ys,this.unrecoverable=ys;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($0));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new q(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(pe(Bl))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),NO=new Z("");function V9(){let n=j(kf);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=j(NO),t=j(tt),r=j(ki);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=PO(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),PO(+a[0])]);break;default:throw new q(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(ws(5604,!1)))})})}function PO(n){return new Promise(e=>setTimeout(e,n))}function U9(){let n=j(kf),e=j(mt),t=!0;return new Bl(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var kf=class{enabled;updateViaCache;type;scope;registrationStrategy};function kO(n,e={}){return mn([F9,L9,{provide:NO,useValue:n},{provide:kf,useValue:e},{provide:Bl,useFactory:U9},sy(V9)])}var MO=()=>{};var FO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},j9=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},E_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,m=(s&3)<<4|a>>4,v=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(v=64)),r.push(t[h],t[m],t[v],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):j9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||m==null)throw new q0;let v=s<<2|a>>4;if(r.push(v),d!==64){let C=a<<4&240|d>>2;if(r.push(C),m!==64){let R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},q0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},B9=function(n){let e=FO(n);return E_.encodeByteArray(e,!0)},xf=function(n){return B9(n).replace(/\./g,"")},I_=function(n){try{return E_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function G0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $9=()=>G0().__FIREBASE_DEFAULTS__,H9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&I_(n[1]);return e&&JSON.parse(e)},W0=()=>{try{return MO()||$9()||H9()||q9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},K0=n=>{var e,t;return(t=(e=W0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},w_=n=>{let e=K0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Q0=()=>{var n;return(n=W0())===null||n===void 0?void 0:n.config},Y0=n=>{var e;return(e=W0())===null||e===void 0?void 0:e[`_${n}`]};var Fc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Fs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $l(n){return(await fetch(n,{credentials:"include"})).ok}function T_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xf(JSON.stringify(t)),xf(JSON.stringify(o)),""].join(".")}var Mf={};function z9(){let n={prod:[],emulator:[]};for(let e of Object.keys(Mf))Mf[e]?n.emulator.push(e):n.prod.push(e);return n}function G9(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var xO=!1;function Hl(n,e){if(typeof window>"u"||typeof document>"u"||!Fs(window.location.host)||Mf[n]===e||Mf[n]||xO)return;Mf[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",s=z9().prod.length>0;function o(){let v=document.getElementById(r);v&&v.remove()}function a(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,C){v.setAttribute("width","24"),v.setAttribute("id",C),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{xO=!0,o()},v}function h(v,C){v.setAttribute("id",C),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){let v=G9(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),P=t("learnmore"),k=document.getElementById(P)||document.createElement("a"),B=t("preprendIcon"),W=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let Q=v.element;a(Q),h(k,P);let oe=d();c(W,B),Q.append(W,R,k,oe),document.body.appendChild(Q)}s?(R.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BO(){let n=vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Of(){try{return typeof indexedDB=="object"}catch{return!1}}function $O(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var W9="FirebaseError",Ln=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=W9,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,si.prototype.create)}},si=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?K9(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ln(i,a,r)}};function K9(n,e){return n.replace(Q9,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Q9=/\{\$([^}]+)}/g;function HO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(OO(s)&&OO(o)){if(!Bi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function OO(n){return n!==null&&typeof n=="object"}function Ff(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qO(n,e){let t=new z0(n,e);return t.subscribe.bind(t)}var z0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Y9(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=H0),i.error===void 0&&(i.error=H0),i.complete===void 0&&(i.complete=H0);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Y9(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function H0(){}var Dve=14400*1e3;function oi(n){return n&&n._delegate?n._delegate:n}var En=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lc="[DEFAULT]";var J0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Fc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X9(e))try{this.getOrInitializeService({instanceIdentifier:Lc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lc){return this.instances.has(e)}getOptions(e=Lc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J9(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lc){return this.component?this.component.multipleInstances?e:Lc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function J9(n){return n===Lc?void 0:n}function X9(n){return n.instantiationMode==="EAGER"}var b_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new J0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Z9=[],Ye=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ye||{}),eG={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},tG=Ye.INFO,nG={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},rG=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=nG[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$i=class{constructor(e){this.name=e,this._logLevel=tG,this._logHandler=rG,this._userLogHandler=null,Z9.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}};var iG=(n,e)=>e.some(t=>n instanceof t),zO,GO;function sG(){return zO||(zO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oG(){return GO||(GO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var WO=new WeakMap,Z0=new WeakMap,KO=new WeakMap,X0=new WeakMap,tC=new WeakMap;function aG(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Hi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&WO.set(t,n)}).catch(()=>{}),tC.set(e,n),e}function cG(n){if(Z0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Z0.set(n,e)}var eC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Z0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QO(n){eC=n(eC)}function uG(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(C_(this),e,...t);return KO.set(r,e.sort?e.sort():[e]),Hi(r)}:oG().includes(n)?function(...e){return n.apply(C_(this),e),Hi(WO.get(this))}:function(...e){return Hi(n.apply(C_(this),e))}}function lG(n){return typeof n=="function"?uG(n):(n instanceof IDBTransaction&&cG(n),iG(n,sG())?new Proxy(n,eC):n)}function Hi(n){if(n instanceof IDBRequest)return aG(n);if(X0.has(n))return X0.get(n);let e=lG(n);return e!==n&&(X0.set(n,e),tC.set(e,n)),e}var C_=n=>tC.get(n);function S_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Hi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Hi(o.result),c.oldVersion,c.newVersion,Hi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var dG=["get","getKey","getAll","getAllKeys","count"],hG=["put","add","delete","clear"],nC=new Map;function YO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nC.get(e))return nC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=hG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dG.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return nC.set(e,s),s}QO(n=>ae(U({},n),{get:(e,t,r)=>YO(e,t)||n.get(e,t,r),has:(e,t)=>!!YO(e,t)||n.has(e,t)}));var iC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fG(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function fG(n){let e=n.getComponent();return e?.type==="VERSION"}var sC="@firebase/app",JO="0.13.2";var Ls=new $i("@firebase/app"),pG="@firebase/app-compat",mG="@firebase/analytics-compat",gG="@firebase/analytics",yG="@firebase/app-check-compat",_G="@firebase/app-check",vG="@firebase/auth",EG="@firebase/auth-compat",IG="@firebase/database",wG="@firebase/data-connect",TG="@firebase/database-compat",bG="@firebase/functions",CG="@firebase/functions-compat",SG="@firebase/installations",DG="@firebase/installations-compat",AG="@firebase/messaging",RG="@firebase/messaging-compat",PG="@firebase/performance",NG="@firebase/performance-compat",kG="@firebase/remote-config",MG="@firebase/remote-config-compat",xG="@firebase/storage",OG="@firebase/storage-compat",FG="@firebase/firestore",LG="@firebase/ai",VG="@firebase/firestore-compat",UG="firebase",jG="11.10.0";var oC="[DEFAULT]",BG={[sC]:"fire-core",[pG]:"fire-core-compat",[gG]:"fire-analytics",[mG]:"fire-analytics-compat",[_G]:"fire-app-check",[yG]:"fire-app-check-compat",[vG]:"fire-auth",[EG]:"fire-auth-compat",[IG]:"fire-rtdb",[wG]:"fire-data-connect",[TG]:"fire-rtdb-compat",[bG]:"fire-fn",[CG]:"fire-fn-compat",[SG]:"fire-iid",[DG]:"fire-iid-compat",[AG]:"fire-fcm",[RG]:"fire-fcm-compat",[PG]:"fire-perf",[NG]:"fire-perf-compat",[kG]:"fire-rc",[MG]:"fire-rc-compat",[xG]:"fire-gcs",[OG]:"fire-gcs-compat",[FG]:"fire-fst",[VG]:"fire-fst-compat",[LG]:"fire-vertex","fire-js":"fire-js",[UG]:"fire-js-all"};var Lf=new Map,$G=new Map,aC=new Map;function XO(n,e){try{n.container.addComponent(e)}catch(t){Ls.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ur(n){let e=n.name;if(aC.has(e))return Ls.debug(`There were multiple attempts to register component ${e}.`),!1;aC.set(e,n);for(let t of Lf.values())XO(t,n);for(let t of $G.values())XO(t,n);return!0}function ra(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gn(n){return n==null?!1:n.settings!==void 0}var HG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},na=new si("app","Firebase",HG);var cC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw na.create("app-deleted",{appName:this._name})}};var qi=jG;function dC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:oC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw na.create("bad-app-name",{appName:String(i)});if(t||(t=Q0()),!t)throw na.create("no-options");let s=Lf.get(i);if(s){if(Bi(t,s.options)&&Bi(r,s.config))return s;throw na.create("duplicate-app",{appName:i})}let o=new b_(i);for(let c of aC.values())o.addComponent(c);let a=new cC(t,r,o);return Lf.set(i,a),a}function Vs(n=oC){let e=Lf.get(n);if(!e&&n===oC&&Q0())return dC();if(!e)throw na.create("no-app",{appName:n});return e}function D_(){return Array.from(Lf.values())}function ft(n,e,t){var r;let i=(r=BG[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ls.warn(a.join(" "));return}ur(new En(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qG="firebase-heartbeat-database",zG=1,Vf="firebase-heartbeat-store",rC=null;function nF(){return rC||(rC=S_(qG,zG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vf)}catch(t){console.warn(t)}}}}).catch(n=>{throw na.create("idb-open",{originalErrorMessage:n.message})})),rC}async function GG(n){try{let t=(await nF()).transaction(Vf),r=await t.objectStore(Vf).get(rF(n));return await t.done,r}catch(e){if(e instanceof Ln)Ls.warn(e.message);else{let t=na.create("idb-get",{originalErrorMessage:e?.message});Ls.warn(t.message)}}}async function ZO(n,e){try{let r=(await nF()).transaction(Vf,"readwrite");await r.objectStore(Vf).put(e,rF(n)),await r.done}catch(t){if(t instanceof Ln)Ls.warn(t.message);else{let r=na.create("idb-set",{originalErrorMessage:t?.message});Ls.warn(r.message)}}}function rF(n){return`${n.name}!${n.options.appId}`}var WG=1024,KG=30,uC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new lC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eF();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>KG){let o=YG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=eF(),{heartbeatsToSend:r,unsentEntries:i}=QG(this._heartbeatsCache.heartbeats),s=xf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ls.warn(t),""}}};function eF(){return new Date().toISOString().substring(0,10)}function QG(n,e=WG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var lC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Of()?$O().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await GG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ZO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ZO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function tF(n){return xf(JSON.stringify({version:2,heartbeats:n})).length}function YG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function JG(n){ur(new En("platform-logger",e=>new iC(e),"PRIVATE")),ur(new En("heartbeat",e=>new uC(e),"PRIVATE")),ft(sC,JO,n),ft(sC,JO,"esm2017"),ft("fire-js","")}JG("");var XG="firebase",ZG="11.10.0";ft(XG,ZG,"app");function iF(n){n===void 0&&(n=j(mt));let e=n.get(fl);return t=>new we(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var zi=new Vo("ANGULARFIRE2_VERSION");function Uc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ia=(n,e)=>{let t=e?[e]:D_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ql=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(ql||{}),sF=Qh()&&typeof Zone<"u"?ql.WARN:ql.SILENT;var A_=class{zone;delegate;constructor(e,t=FI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Gi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(tt);this.outsideAngular=t.runOutsideAngular(()=>new A_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new A_(typeof Zone>"u"?void 0:Zone.current,OI))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oF=!1;function e8(n,e){!oF&&(sF>ql.SILENT||Qh())&&(oF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),sF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function t8(n){let e=j(tt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Vc(n){let e=j(tt,{optional:!0});return e?e.run(()=>n()):n()}var n8=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),jt(t,()=>Vc(()=>n.apply(void 0,r)))),Us=(n,e,t)=>(t||=e?ql.WARN:ql.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(Gi),o=j(fl),a=j(St)}catch{return e8(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Vc(()=>o.add())),i[d]=n8(i[d],r,a));let c=t8(()=>n.apply(this,i));return e?c instanceof we?c.pipe(Lo(s.outsideAngular),Fo(s.insideAngular),iF(a)):c instanceof Promise?Vc(()=>{let d=o.add();return new Promise((h,m)=>{c.then(v=>jt(a,()=>Vc(()=>h(v))),v=>jt(a,()=>Vc(()=>m(v)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Vc(()=>c):c instanceof we?c.pipe(Lo(s.outsideAngular),Fo(s.insideAngular)):Vc(()=>c)});var ai=class{constructor(e){return e}},js=class{constructor(){return D_()}};function r8(n){return n&&n.length===1?n[0]:new ai(Vs())}var hC=new Z("angularfire2._apps"),i8={provide:ai,useFactory:r8,deps:[[new nn,hC]]},s8={provide:js,deps:[[new nn,hC]]};function o8(n){return(e,t)=>{let r=t.get(gc);ft("angularfire",zi.full,"core"),ft("angularfire",zi.full,"app"),ft("angular",rw.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ai(i)}}function aF(n,...e){return mn([i8,s8,{provide:hC,useFactory:o8(n),multi:!0,deps:[tt,mt,Gi,...e]}])}var fC=Us(dC,!0);var a8=new Map,c8={activated:!1,tokenObservers:[]},u8={initialized:!1,enabled:!1};function ci(n){return a8.get(n)||Object.assign({},c8)}function dF(){return u8}var l8="https://content-firebaseappcheck.googleapis.com/v1";var d8="exchangeDebugToken",cF={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},SEe=1440*60*1e3;var gC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Fc,this.pending.promise.catch(t=>{}),await h8(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Fc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function h8(n){return new Promise(e=>{setTimeout(e,n)})}var f8={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},sa=new si("appCheck","AppCheck",f8);function hF(n){if(!ci(n).activated)throw sa.create("use-before-activation",{appName:n.name})}async function fF({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let m=await i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(m){throw sa.create("fetch-network-error",{originalErrorMessage:m?.message})}if(o.status!==200)throw sa.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(m){throw sa.create("fetch-parse-error",{originalErrorMessage:m?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw sa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function pF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${l8}/projects/${t}/apps/${r}:${d8}?key=${i}`,body:{debug_token:e}}}var p8="firebase-app-check-database",m8=1,yC="firebase-app-check-store";var R_=null;function g8(){return R_||(R_=new Promise((n,e)=>{try{let t=indexedDB.open(p8,m8);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(sa.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;r.oldVersion===0&&i.createObjectStore(yC,{keyPath:"compositeKey"})}}catch(t){e(sa.create("storage-open",{originalErrorMessage:t?.message}))}}),R_)}function y8(n,e){return _8(v8(n),e)}async function _8(n,e){let r=(await g8()).transaction(yC,"readwrite"),s=r.objectStore(yC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(sa.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function v8(n){return`${n.options.appId}-${n.name}`}var Uf=new $i("@firebase/app-check");function pC(n,e){return Of()?y8(n,e).catch(t=>{Uf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mF(){return dF().enabled}async function gF(){let n=dF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var E8={error:"UNKNOWN_ERROR"};function I8(n){return E_.encodeString(JSON.stringify(n),!1)}async function _C(n,e=!1,t=!1){let r=n.app;hF(r);let i=ci(r),s=i.token,o;if(s&&!jf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(jf(d)?s=d:await pC(r,void 0))}if(!e&&s&&jf(s))return{token:s.token};let a=!1;if(mF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=fF(pF(r,await gF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await pC(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Uf.warn(d.message):t&&Uf.error(d),mC(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await ci(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Uf.warn(d.message):t&&Uf.error(d),o=d}let c;return s?o?jf(s)?c={token:s.token,internalError:o}:c=mC(o):(c={token:s.token},i.token=s,await pC(r,s)):c=mC(o),a&&C8(r,c),c}async function w8(n){let e=n.app;hF(e);let{provider:t}=ci(e);if(mF()){let r=await gF(),{token:i}=await fF(pF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function T8(n,e,t,r){let{app:i}=n,s=ci(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&jf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),uF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>uF(n))}function yF(n,e){let t=ci(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uF(n){let{app:e}=n,t=ci(e),r=t.tokenRefresher;r||(r=b8(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function b8(n){let{app:e}=n;return new gC(async()=>{let t=ci(e),r;if(t.token?r=await _C(n,!0):r=await _C(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cF.RETRIAL_MIN_WAIT,cF.RETRIAL_MAX_WAIT)}function C8(n,e){let t=ci(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function jf(n){return n.expireTimeMillis-Date.now()>0}function mC(n){return{token:I8(E8),error:n}}var vC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ci(this.app);for(let t of e)yF(this.app,t.next);return Promise.resolve()}};function S8(n,e){return new vC(n,e)}function D8(n){return{getToken:e=>_C(n,e),getLimitedUseToken:()=>w8(n),addTokenListener:e=>T8(n,"INTERNAL",e),removeTokenListener:e=>yF(n.app,e)}}var A8="@firebase/app-check",R8="0.10.1";var P8="app-check",lF="app-check-internal";function N8(){ur(new En(P8,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return S8(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lF).initialize()})),ur(new En(lF,n=>{let e=n.getProvider("app-check").getImmediate();return D8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ft(A8,R8)}N8();var k8="app-check";var oa=class{constructor(){return ia(k8)}};var M8=["localhost","0.0.0.0","127.0.0.1"],VEe=typeof window<"u"&&M8.includes(window.location.hostname);var _F=()=>{};var IF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},x8=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,m=(s&3)<<4|a>>4,v=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(v=64)),r.push(t[h],t[m],t[v],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):x8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||m==null)throw new IC;let v=s<<2|a>>4;if(r.push(v),d!==64){let C=a<<4&240|d>>2;if(r.push(C),m!==64){let R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},IC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},O8=function(n){let e=IF(n);return wF.encodeByteArray(e,!0)},$f=function(n){return O8(n).replace(/\./g,"")},N_=function(n){try{return wF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var F8=()=>TF().__FIREBASE_DEFAULTS__,L8=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},V8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&N_(n[1]);return e&&JSON.parse(e)},k_=()=>{try{return _F()||F8()||L8()||V8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TC=n=>k_()?.emulatorHosts?.[n],bF=n=>{let e=TC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bC=()=>k_()?.config,CC=n=>k_()?.[`_${n}`];var P_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function aa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M_(n){return(await fetch(n,{credentials:"include"})).ok}function CF(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=U({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$f(JSON.stringify(t)),$f(JSON.stringify(o)),""].join(".")}var Bf={};function U8(){let n={prod:[],emulator:[]};for(let e of Object.keys(Bf))Bf[e]?n.emulator.push(e):n.prod.push(e);return n}function j8(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var vF=!1;function x_(n,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||Bf[n]===e||Bf[n]||vF)return;Bf[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",s=U8().prod.length>0;function o(){let v=document.getElementById(r);v&&v.remove()}function a(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,C){v.setAttribute("width","24"),v.setAttribute("id",C),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{vF=!0,o()},v}function h(v,C){v.setAttribute("id",C),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){let v=j8(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),P=t("learnmore"),k=document.getElementById(P)||document.createElement("a"),B=t("preprendIcon"),W=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let Q=v.element;a(Q),h(k,P);let oe=d();c(W,B),Q.append(W,R,k,oe),document.body.appendChild(Q)}s?(R.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function B8(){let n=k_()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PF(){let n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NF(){return!B8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SC(){try{return typeof indexedDB=="object"}catch{return!1}}function kF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var $8="FirebaseError",lr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}},Bs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?H8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new lr(i,a,r)}};function H8(n,e){return n.replace(q8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var q8=/\{\$([^}]+)}/g;function MF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ui(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(EF(s)&&EF(o)){if(!ui(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function EF(n){return n!==null&&typeof n=="object"}function zl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xF(n,e){let t=new wC(n,e);return t.subscribe.bind(t)}var wC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");z8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=EC),i.error===void 0&&(i.error=EC),i.complete===void 0&&(i.complete=EC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function z8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function EC(){}var HEe=14400*1e3;function Mt(n){return n&&n._delegate?n._delegate:n}var Pr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jc="[DEFAULT]";var DC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new P_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W8(e))try{this.getOrInitializeService({instanceIdentifier:jc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jc){return this.instances.has(e)}getOptions(e=jc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:G8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jc){return this.component?this.component.multipleInstances?e:jc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function G8(n){return n===jc?void 0:n}function W8(n){return n.instantiationMode==="EAGER"}var O_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new DC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var K8=[],ke=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ke||{}),Q8={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Y8=ke.INFO,J8={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},X8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=J8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ca=class{constructor(e){this.name=e,this._logLevel=Y8,this._logHandler=X8,this._userLogHandler=null,K8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}};var RC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Z8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Z8(n){return n.getComponent()?.type==="VERSION"}var PC="@firebase/app",OF="0.14.7";var $s=new ca("@firebase/app"),eW="@firebase/app-compat",tW="@firebase/analytics-compat",nW="@firebase/analytics",rW="@firebase/app-check-compat",iW="@firebase/app-check",sW="@firebase/auth",oW="@firebase/auth-compat",aW="@firebase/database",cW="@firebase/data-connect",uW="@firebase/database-compat",lW="@firebase/functions",dW="@firebase/functions-compat",hW="@firebase/installations",fW="@firebase/installations-compat",pW="@firebase/messaging",mW="@firebase/messaging-compat",gW="@firebase/performance",yW="@firebase/performance-compat",_W="@firebase/remote-config",vW="@firebase/remote-config-compat",EW="@firebase/storage",IW="@firebase/storage-compat",wW="@firebase/firestore",TW="@firebase/ai",bW="@firebase/firestore-compat",CW="firebase",SW="12.8.0";var NC="[DEFAULT]",DW={[PC]:"fire-core",[eW]:"fire-core-compat",[nW]:"fire-analytics",[tW]:"fire-analytics-compat",[iW]:"fire-app-check",[rW]:"fire-app-check-compat",[sW]:"fire-auth",[oW]:"fire-auth-compat",[aW]:"fire-rtdb",[cW]:"fire-data-connect",[uW]:"fire-rtdb-compat",[lW]:"fire-fn",[dW]:"fire-fn-compat",[hW]:"fire-iid",[fW]:"fire-iid-compat",[pW]:"fire-fcm",[mW]:"fire-fcm-compat",[gW]:"fire-perf",[yW]:"fire-perf-compat",[_W]:"fire-rc",[vW]:"fire-rc-compat",[EW]:"fire-gcs",[IW]:"fire-gcs-compat",[wW]:"fire-fst",[bW]:"fire-fst-compat",[TW]:"fire-vertex","fire-js":"fire-js",[CW]:"fire-js-all"};var F_=new Map,AW=new Map,kC=new Map;function FF(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function la(n){let e=n.name;if(kC.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;kC.set(e,n);for(let t of F_.values())FF(t,n);for(let t of AW.values())FF(t,n);return!0}function qf(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dr(n){return n==null?!1:n.settings!==void 0}var RW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new Bs("app","Firebase",RW);var MC=class{constructor(e,t,r){this._isDeleted=!1,this._options=U({},e),this._config=U({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}};var da=SW;function Hs(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=U({name:NC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ua.create("bad-app-name",{appName:String(i)});if(t||(t=bC()),!t)throw ua.create("no-options");let s=F_.get(i);if(s){if(ui(t,s.options)&&ui(r,s.config))return s;throw ua.create("duplicate-app",{appName:i})}let o=new O_(i);for(let c of kC.values())o.addComponent(c);let a=new MC(t,r,o);return F_.set(i,a),a}function Nr(n=NC){let e=F_.get(n);if(!e&&n===NC&&bC())return Hs();if(!e)throw ua.create("no-app",{appName:n});return e}function li(n,e,t){let r=DW[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(o.join(" "));return}la(new Pr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var PW="firebase-heartbeat-database",NW=1,Hf="firebase-heartbeat-store",AC=null;function jF(){return AC||(AC=S_(PW,NW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ua.create("idb-open",{originalErrorMessage:n.message})})),AC}async function kW(n){try{let t=(await jF()).transaction(Hf),r=await t.objectStore(Hf).get(BF(n));return await t.done,r}catch(e){if(e instanceof lr)$s.warn(e.message);else{let t=ua.create("idb-get",{originalErrorMessage:e?.message});$s.warn(t.message)}}}async function LF(n,e){try{let r=(await jF()).transaction(Hf,"readwrite");await r.objectStore(Hf).put(e,BF(n)),await r.done}catch(t){if(t instanceof lr)$s.warn(t.message);else{let r=ua.create("idb-set",{originalErrorMessage:t?.message});$s.warn(r.message)}}}function BF(n){return`${n.name}!${n.options.appId}`}var MW=1024,xW=30,xC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new OC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=VF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>xW){let i=FW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=VF(),{heartbeatsToSend:t,unsentEntries:r}=OW(this._heartbeatsCache.heartbeats),i=$f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return $s.warn(e),""}}};function VF(){return new Date().toISOString().substring(0,10)}function OW(n,e=MW){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),UF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),UF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var OC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SC()?kF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await kW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return LF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return LF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function UF(n){return $f(JSON.stringify({version:2,heartbeats:n})).length}function FW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function LW(n){la(new Pr("platform-logger",e=>new RC(e),"PRIVATE")),la(new Pr("heartbeat",e=>new xC(e),"PRIVATE")),li(PC,OF,n),li(PC,OF,"esm2020"),li("fire-js","")}LW("");function nL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rL=nL,iL=new Bs("auth","Firebase",nL());var $_=new ca("@firebase/auth");function VW(n,...e){$_.logLevel<=ke.WARN&&$_.warn(`Auth (${da}): ${n}`,...e)}function V_(n,...e){$_.logLevel<=ke.ERROR&&$_.error(`Auth (${da}): ${n}`,...e)}function Ki(n,...e){throw ZC(n,...e)}function di(n,...e){return ZC(n,...e)}function XC(n,e,t){let r=ae(U({},rL()),{[e]:t});return new Bs("auth","Firebase",r).create(e,{appName:n.name})}function Bc(n){return XC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UW(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ki(n,"argument-error"),XC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ZC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iL.create(n,...e)}function _e(n,e,...t){if(!n)throw ZC(e,...t)}function qs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw V_(e),new Error(e)}function Gs(n,e){n||qs(e)}function VC(){return typeof self<"u"&&self.location?.href||""}function jW(){return $F()==="http:"||$F()==="https:"}function $F(){return typeof self<"u"&&self.location?.protocol||null}function BW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jW()||AF()||"connection"in navigator)?navigator.onLine:!0}function $W(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var $c=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gs(t>e,"Short delay should be less than long delay!"),this.isMobile=SF()||RF()}get(){return BW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function eS(n,e){Gs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var H_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var HW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zW=new $c(3e4,6e4);function tS(n,e){return n.tenantId&&!e.tenantId?ae(U({},e),{tenantId:n.tenantId}):e}async function Wl(n,e,t,r,i={}){return sL(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=zl(U({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=U({method:e,headers:c},s);return DF()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&aa(n.emulatorConfig.host)&&(d.credentials="include"),H_.fetch()(await oL(n,n.config.apiHost,t,a),d)})}async function sL(n,e,t){n._canInitEmulator=!1;let r=U(U({},HW),e);try{let i=new UC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw L_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw L_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw L_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw L_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw XC(n,h,d);Ki(n,h)}}catch(i){if(i instanceof lr)throw i;Ki(n,"network-request-failed",{message:String(i)})}}async function GW(n,e,t,r,i={}){let s=await Wl(n,e,t,r,i);return"mfaPendingCredential"in s&&Ki(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function oL(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?eS(n.config,i):`${n.config.apiScheme}://${i}`;return qW.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var UC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),zW.get())})}};function L_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=di(n,e,r);return i.customData._tokenResponse=t,i}async function WW(n,e){return Wl(n,"POST","/v1/accounts:delete",e)}async function q_(n,e){return Wl(n,"POST","/v1/accounts:lookup",e)}function zf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aL(n,e=!1){let t=Mt(n),r=await t.getIdToken(e),i=nS(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:zf(FC(i.auth_time)),issuedAtTime:zf(FC(i.iat)),expirationTime:zf(FC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function FC(n){return Number(n)*1e3}function nS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return V_("JWT malformed, contained fewer than 3 sections"),null;try{let i=N_(t);return i?JSON.parse(i):(V_("Failed to decode base64 JWT payload"),null)}catch(i){return V_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HF(n){let e=nS(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof lr&&KW(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function KW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var jC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Kf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zf(this.lastLoginAt),this.creationTime=zf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function z_(n){let e=n.auth,t=await n.getIdToken(),r=await Wf(n,q_(e,{idToken:t}));_e(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?uL(i.providerUserInfo):[],o=QW(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Kf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function cL(n){let e=Mt(n);await z_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uL(n){return n.map(r=>{var i=r,{providerId:e}=i,t=xo(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function YW(n,e){let t=await sL(n,{},async()=>{let r=zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await oL(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&aa(n.emulatorConfig.host)&&(c.credentials="include"),H_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JW(n,e){return Wl(n,"POST","/v2/accounts:revokeToken",tS(n,e))}var Gf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=HF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await YW(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return qs("not implemented")}};function ha(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fa=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=xo(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Wf(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aL(this,e)}reload(){return cL(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>U({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ae(U({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await z_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(Bc(this.auth));let e=await this.getIdToken();return await Wf(this,WW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ae(U({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>U({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:C,providerData:R,stsTokenManager:P}=t;_e(m&&P,e,"internal-error");let k=Gf.fromJSON(this.name,P);_e(typeof m=="string",e,"internal-error"),ha(r,e.name),ha(i,e.name),_e(typeof v=="boolean",e,"internal-error"),_e(typeof C=="boolean",e,"internal-error"),ha(s,e.name),ha(o,e.name),ha(a,e.name),ha(c,e.name),ha(d,e.name),ha(h,e.name);let B=new n({uid:m,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:C,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:k,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(B.providerData=R.map(W=>U({},W))),c&&(B._redirectEventId=c),B}static async _fromIdTokenResponse(e,t,r=!1){let i=new Gf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await z_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?uL(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Gf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var qF=new Map;function zs(n){Gs(n instanceof Function,"Expected a class definition");let e=qF.get(n);return e?(Gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qF.set(n,e),e)}var XW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),BC=XW;function U_(n,e,t){return`firebase:${n}:${e}:${t}`}var G_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=U_(this.userKey,i.apiKey,s),this.fullPersistenceKey=U_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await q_(this.auth,{idToken:e}).catch(()=>{});return t?fa._fromGetAccountInfoResponse(this.auth,t,e):null}return fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(zs(BC),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||zs(BC),o=U_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let m;if(typeof h=="string"){let v=await q_(e,{idToken:h}).catch(()=>{});if(!v)break;m=await fa._fromGetAccountInfoResponse(e,v,h)}else m=fa._fromJSON(e,h);d!==s&&(a=m),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function zF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mL(e))return"Blackberry";if(gL(e))return"Webos";if(dL(e))return"Safari";if((e.includes("chrome/")||hL(e))&&!e.includes("edge/"))return"Chrome";if(pL(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function lL(n=on()){return/firefox\//i.test(n)}function dL(n=on()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hL(n=on()){return/crios\//i.test(n)}function fL(n=on()){return/iemobile/i.test(n)}function pL(n=on()){return/android/i.test(n)}function mL(n=on()){return/blackberry/i.test(n)}function gL(n=on()){return/webos/i.test(n)}function rS(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZW(n=on()){return rS(n)&&!!window.navigator?.standalone}function eK(){return PF()&&document.documentMode===10}function yL(n=on()){return rS(n)||pL(n)||gL(n)||mL(n)||/windows phone/i.test(n)||fL(n)}function _L(n,e=[]){let t;switch(n){case"Browser":t=zF(on());break;case"Worker":t=`${zF(on())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${r}`}var $C=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function tK(n,e={}){return Wl(n,"GET","/v2/passwordPolicy",tS(n,e))}var nK=6,HC=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nK,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W_(this),this.idTokenSubscription=new W_(this),this.beforeStateQueue=new $C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await G_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await q_(this,{idToken:e}),r=await fa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await z_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$W()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(Bc(this));let t=e?Mt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(Bc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(Bc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await tK(this),t=new HC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await JW(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&zs(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await G_.create(this,[zs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_L(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&VW(`Error while retrieving App Check token: ${e.error}`),e?.token}};function tv(n){return Mt(n)}var W_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xF(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rK(n){iS=n}function iK(n){return iS.loadJS(n)}function sK(){return iS.gapiScript}function vL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function EL(n,e){let t=qf(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ui(s,e??{}))return i;Ki(i,"already-initialized")}return t.initialize({options:e})}function oK(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function IL(n,e,t){let r=tv(n);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=wL(e),{host:o,port:a}=aK(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(ui(d,r.config.emulator)&&ui(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,aa(o)?(M_(`${s}//${o}${c}`),x_("Auth",!0)):i||cK()}function wL(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aK(n){let e=wL(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:GF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:GF(o)}}}function GF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function cK(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Qf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,t){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}};async function Gl(n,e){return GW(n,"POST","/v1/accounts:signInWithIdp",tS(n,e))}var uK="http://localhost",K_=class n extends Qf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,s=xo(a,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Gl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Gl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Gl(e,t)}buildRequest(){let e={requestUri:uK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zl(t)}return e}};var Yf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Q_=class extends Yf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var sS=(()=>{class n extends Q_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return K_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Jf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await fa._fromIdTokenResponse(e,r,i),o=WF(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=WF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function WF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var zC=class n extends lr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function TL(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zC._fromErrorAndOperation(n,s,e,r):s})}async function lK(n,e,t=!1){let r=await Wf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Jf._forOperation(n,"link",r)}async function dK(n,e,t=!1){let{auth:r}=n;if(dr(r.app))return Promise.reject(Bc(r));let i="reauthenticate";try{let s=await Wf(n,TL(r,i,e,n),t);_e(s.idToken,r,"internal-error");let o=nS(s.idToken);_e(o,r,"internal-error");let{sub:a}=o;return _e(n.uid===a,r,"user-mismatch"),Jf._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ki(r,"user-mismatch"),s}}async function hK(n,e,t=!1){if(dr(n.app))return Promise.reject(Bc(n));let r="signIn",i=await TL(n,r,e),s=await Jf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function bL(n,e,t,r){return Mt(n).onIdTokenChanged(e,t,r)}function CL(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function nv(n,e,t,r){return Mt(n).onAuthStateChanged(e,t,r)}function oS(n){return Mt(n).signOut()}var Y_="__sak";var J_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Y_,"1"),this.storage.removeItem(Y_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var fK=1e3,pK=10,mK=(()=>{class n extends J_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);eK()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,pK):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},fK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),SL=mK;var gK=(()=>{class n extends J_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),aS=gK;function yK(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var _K=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await yK(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function cS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var GC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=cS("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Wi(){return window}function vK(n){Wi().location.href=n}function DL(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function EK(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IK(){return navigator?.serviceWorker?.controller||null}function wK(){return DL()?self:null}var AL="firebaseLocalStorageDb",TK=1,X_="firebaseLocalStorage",RL="fbase_key",Hc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function rv(n,e){return n.transaction([X_],e?"readwrite":"readonly").objectStore(X_)}function bK(){let n=indexedDB.deleteDatabase(AL);return new Hc(n).toPromise()}function WC(){let n=indexedDB.open(AL,TK);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(X_,{keyPath:RL})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(X_)?e(r):(r.close(),await bK(),e(await WC()))})})}async function KF(n,e,t){let r=rv(n,!0).put({[RL]:e,value:t});return new Hc(r).toPromise()}async function CK(n,e){let t=rv(n,!1).get(e),r=await new Hc(t).toPromise();return r===void 0?null:r.value}function QF(n,e){let t=rv(n,!0).delete(e);return new Hc(t).toPromise()}var SK=800,DK=3,AK=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await WC(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>DK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_K._getInstance(wK()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await EK(),!this.activeServiceWorker)return;this.sender=new GC(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||IK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await WC();return await KF(t,Y_,"1"),await QF(t,Y_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>KF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>CK(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>QF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=rv(s,!1).getAll();return new Hc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),PL=AK;var hIe=vL("rcb"),fIe=new $c(3e4,6e4);function NL(n,e){return e?zs(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xf=class extends Qf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function RK(n){return hK(n.auth,new Xf(n),n.bypassAuthState)}function PK(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),dK(t,new Xf(n),n.bypassAuthState)}async function NK(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),lK(t,new Xf(n),n.bypassAuthState)}var Z_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RK;case"linkViaPopup":case"linkViaRedirect":return NK;case"reauthViaPopup":case"reauthViaRedirect":return PK;default:Ki(this.auth,"internal-error")}}resolve(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var kK=new $c(2e3,1e4);async function uS(n,e,t){if(dr(n.app))return Promise.reject(di(n,"operation-not-supported-in-this-environment"));let r=tv(n);UW(n,e,Yf);let i=NL(r,t);return new MK(r,"signInViaPopup",e,i).executeNotNull()}var MK=(()=>{class n extends Z_{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return _e(t,this.auth,"internal-error"),t}async onExecution(){Gs(this.filter.length===1,"Popup operations only handle one event");let t=cS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,kK.get())};t()}}n.currentPopupAction=null;return n})(),xK="pendingRedirect",j_=new Map,KC=class extends Z_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=j_.get(this.auth._key());if(!e){try{let r=await OK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}j_.set(this.auth._key(),e)}return this.bypassAuthState||j_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function OK(n,e){let t=UK(e),r=LK(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function FK(n,e){j_.set(n._key(),e)}function LK(n){return zs(n._redirectPersistence)}function UK(n){return U_(xK,n.config.apiKey,n.name)}async function jK(n,e,t=!1){if(dr(n.app))return Promise.reject(Bc(n));let r=tv(n),i=NL(r,e),o=await new KC(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var BK=600*1e3,QC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$K(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kL(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BK&&this.cachedEventUids.clear(),this.cachedEventUids.has(YF(e))}saveEventToCache(e){this.cachedEventUids.add(YF(e)),this.lastProcessedEventTime=Date.now()}};function YF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kL({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $K(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kL(n);default:return!1}}async function HK(n,e={}){return Wl(n,"GET","/v1/projects",e)}var qK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zK=/^https?/;async function GK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await HK(n);for(let t of e)try{if(WK(t))return}catch{}Ki(n,"unauthorized-domain")}function WK(n){let e=VC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!zK.test(t))return!1;if(qK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var KK=new $c(3e4,6e4);function JF(){let n=Wi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function QK(n){return new Promise((e,t)=>{function r(){JF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JF(),t(di(n,"network-request-failed"))},timeout:KK.get()})}if(Wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wi().gapi?.load)r();else{let i=vL("iframefcb");return Wi()[i]=()=>{gapi.load?r():t(di(n,"network-request-failed"))},iK(`${sK()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw B_=null,e})}var B_=null;function YK(n){return B_=B_||QK(n),B_}var JK=new $c(5e3,15e3),XK="__/auth/iframe",ZK="emulator/auth/iframe",e7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n7(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?eS(e,ZK):`https://${n.config.authDomain}/${XK}`,r={apiKey:e.apiKey,appName:n.name,v:da},i=t7.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${zl(r).slice(1)}`}async function r7(n){let e=await YK(n),t=Wi().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:n7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=di(n,"network-request-failed"),a=Wi().setTimeout(()=>{s(o)},JK.get());function c(){Wi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var i7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s7=500,o7=600,a7="_blank",c7="http://localhost",ev=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function u7(n,e,t,r=s7,i=o7){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=ae(U({},i7),{width:r.toString(),height:i.toString(),top:s,left:o}),d=on().toLowerCase();t&&(a=hL(d)?a7:t),lL(d)&&(e=e||c7,c.scrollbars="yes");let h=Object.entries(c).reduce((v,[C,R])=>`${v}${C}=${R},`,"");if(ZW(d)&&a!=="_self")return l7(e||"",a),new ev(null);let m=window.open(e||"",a,h);_e(m,n,"popup-blocked");try{m.focus()}catch{}return new ev(m)}function l7(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var d7="__/auth/handler",h7="emulator/auth/handler",f7=encodeURIComponent("fac");async function XF(n,e,t,r,i,s){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:da,eventId:i};if(e instanceof Yf){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",MF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof Q_){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${f7}=${encodeURIComponent(c)}`:"";return`${p7(n)}?${zl(a).slice(1)}${d}`}function p7({config:n}){return n.emulator?eS(n,h7):`https://${n.authDomain}/${d7}`}var LC="webStorageSupport",YC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aS,this._completeRedirectFn=jK,this._overrideRedirectResult=FK}async _openPopup(e,t,r,i){Gs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=await XF(e,t,r,VC(),i);return u7(e,s,cS())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await XF(e,t,r,VC(),i);return vK(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Gs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await r7(e),r=new QC(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(LC,{type:LC},i=>{let s=i?.[0]?.[LC];s!==void 0&&t(!!s),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yL()||dL()||rS()}},ML=YC;var ZF="@firebase/auth",eL="1.12.0";var JC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function m7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g7(n){la(new Pr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_L(n)},d=new qC(r,i,s,c);return oK(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),la(new Pr("auth-internal",e=>{let t=tv(e.getProvider("auth").getImmediate());return(r=>new JC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(ZF,eL,m7(n)),li(ZF,eL,"esm2020")}var y7=300,_7=CC("authIdTokenMaxAge")||y7,tL=null,v7=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_7)return;let i=t?.token;tL!==i&&(tL=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lS(n=Nr()){let e=qf(n,"auth");if(e.isInitialized())return e.getImmediate();let t=EL(n,{popupRedirectResolver:ML,persistence:[PL,SL,aS]}),r=CC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=v7(s.toString());CL(t,o,()=>o(t.currentUser)),bL(t,a=>o(a))}}let i=TC("auth");return i&&IL(t,`http://${i}`),t}function E7(){return document.getElementsByTagName("head")?.[0]??document}rK({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=di("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",E7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g7("Browser");function KL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QL=KL,YL=new si("auth","Firebase",KL());var uv=new $i("@firebase/auth");function I7(n,...e){uv.logLevel<=Ye.WARN&&uv.warn(`Auth (${qi}): ${n}`,...e)}function sv(n,...e){uv.logLevel<=Ye.ERROR&&uv.error(`Auth (${qi}): ${n}`,...e)}function ga(n,...e){throw PS(n,...e)}function zc(n,...e){return PS(n,...e)}function JL(n,e,t){let r=Object.assign(Object.assign({},QL()),{[e]:t});return new si("auth","Firebase",r).create(e,{appName:n.name})}function qc(n){return JL(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YL.create(n,...e)}function ve(n,e,...t){if(!n)throw PS(e,...t)}function Ws(n){let e="INTERNAL ASSERTION FAILED: "+n;throw sv(e),new Error(e)}function ya(n,e){n||Ws(e)}function pS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function w7(){return xL()==="http:"||xL()==="https:"}function xL(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function T7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w7()||UO()||"connection"in navigator)?navigator.onLine:!0}function b7(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Gc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ya(t>e,"Short delay should be less than long delay!"),this.isMobile=LO()||jO()}get(){return T7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function NS(n,e){ya(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var lv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var C7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var S7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D7=new Gc(3e4,6e4);function kS(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Kl(n,e,t,r,i={}){return XL(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Ff(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return VO()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Fs(n.emulatorConfig.host)&&(d.credentials="include"),lv.fetch()(await ZL(n,n.config.apiHost,t,a),d)})}async function XL(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},C7),e);try{let i=new mS(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw iv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw iv(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw iv(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw iv(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw JL(n,h,d);ga(n,h)}}catch(i){if(i instanceof Ln)throw i;ga(n,"network-request-failed",{message:String(i)})}}async function A7(n,e,t,r,i={}){let s=await Kl(n,e,t,r,i);return"mfaPendingCredential"in s&&ga(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function ZL(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?NS(n.config,i):`${n.config.apiScheme}://${i}`;return S7.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var mS=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zc(this.auth,"network-request-failed")),D7.get())})}};function iv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=zc(n,e,r);return i.customData._tokenResponse=t,i}async function R7(n,e){return Kl(n,"POST","/v1/accounts:delete",e)}async function dv(n,e){return Kl(n,"POST","/v1/accounts:lookup",e)}function Zf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MS(n,e=!1){let t=oi(n),r=await t.getIdToken(e),i=xS(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Zf(dS(i.auth_time)),issuedAtTime:Zf(dS(i.iat)),expirationTime:Zf(dS(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function dS(n){return Number(n)*1e3}function xS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return sv("JWT malformed, contained fewer than 3 sections"),null;try{let i=I_(t);return i?JSON.parse(i):(sv("Failed to decode base64 JWT payload"),null)}catch(i){return sv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function OL(n){let e=xS(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ln&&P7(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function P7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gS=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var np=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zf(this.lastLoginAt),this.creationTime=Zf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function hv(n){var e;let t=n.auth,r=await n.getIdToken(),i=await tp(n,dv(t,{idToken:r}));ve(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eV(s.providerUserInfo):[],a=N7(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new np(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function OS(n){let e=oi(n);await hv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function N7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eV(n){return n.map(e=>{var{providerId:t}=e,r=LI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function k7(n,e){let t=await XL(n,{},async()=>{let r=Ff({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await ZL(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Fs(n.emulatorConfig.host)&&(c.credentials="include"),lv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M7(n,e){return Kl(n,"POST","/v2/accounts:revokeToken",kS(n,e))}var ep=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=OL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await k7(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ve(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ws("not implemented")}};function pa(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ma=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=LI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new np(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await tp(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MS(this,e)}reload(){return OS(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(qc(this.auth));let e=await this.getIdToken();return await tp(this,R7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,B=(d=t.createdAt)!==null&&d!==void 0?d:void 0,W=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:oe,isAnonymous:ze,providerData:me,stsTokenManager:w}=t;ve(Q&&w,e,"internal-error");let y=ep.fromJSON(this.name,w);ve(typeof Q=="string",e,"internal-error"),pa(m,e.name),pa(v,e.name),ve(typeof oe=="boolean",e,"internal-error"),ve(typeof ze=="boolean",e,"internal-error"),pa(C,e.name),pa(R,e.name),pa(P,e.name),pa(k,e.name),pa(B,e.name),pa(W,e.name);let I=new n({uid:Q,auth:e,email:v,emailVerified:oe,displayName:m,isAnonymous:ze,photoURL:R,phoneNumber:C,tenantId:P,stsTokenManager:y,createdAt:B,lastLoginAt:W});return me&&Array.isArray(me)&&(I.providerData=me.map(T=>Object.assign({},T))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new ep;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?eV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ep;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new np(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var FL=new Map;function Ks(n){ya(n instanceof Function,"Expected a class definition");let e=FL.get(n);return e?(ya(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FL.set(n,e),e)}var x7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yS=x7;function ov(n,e,t){return`firebase:${n}:${e}:${t}`}var fv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ov(this.userKey,i.apiKey,s),this.fullPersistenceKey=ov("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await dv(this.auth,{idToken:e}).catch(()=>{});return t?ma._fromGetAccountInfoResponse(this.auth,t,e):null}return ma._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Ks(yS),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Ks(yS),o=ov(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let m;if(typeof h=="string"){let v=await dv(e,{idToken:h}).catch(()=>{});if(!v)break;m=await ma._fromGetAccountInfoResponse(e,v,h)}else m=ma._fromJSON(e,h);d!==s&&(a=m),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function LL(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oV(e))return"Blackberry";if(aV(e))return"Webos";if(nV(e))return"Safari";if((e.includes("chrome/")||rV(e))&&!e.includes("edge/"))return"Chrome";if(sV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function tV(n=vn()){return/firefox\//i.test(n)}function nV(n=vn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rV(n=vn()){return/crios\//i.test(n)}function iV(n=vn()){return/iemobile/i.test(n)}function sV(n=vn()){return/android/i.test(n)}function oV(n=vn()){return/blackberry/i.test(n)}function aV(n=vn()){return/webos/i.test(n)}function FS(n=vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function O7(n=vn()){var e;return FS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F7(){return BO()&&document.documentMode===10}function cV(n=vn()){return FS(n)||sV(n)||aV(n)||oV(n)||/windows phone/i.test(n)||iV(n)}function uV(n,e=[]){let t;switch(n){case"Browser":t=LL(vn());break;case"Worker":t=`${LL(vn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qi}/${r}`}var _S=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function L7(n,e={}){return Kl(n,"GET","/v2/passwordPolicy",kS(n,e))}var V7=6,vS=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:V7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ES=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new _S(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ks(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await fv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await dv(this,{idToken:e}),r=await ma._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(qc(this));let t=e?oi(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(qc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(qc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await L7(this),t=new vS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new si("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await M7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ks(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await fv.create(this,[Ks(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&I7(`Error while retrieving App Check token: ${t.error}`),t?.token}};function LS(n){return oi(n)}var pv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qO(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var VS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U7(n){VS=n}function j7(n){return VS.loadJS(n)}function B7(){return VS.gapiScript}function lV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function US(n,e){let t=ra(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Bi(s,e??{}))return i;ga(i,"already-initialized")}return t.initialize({options:e})}function $7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ks);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function jS(n,e,t){let r=LS(n);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=dV(e),{host:o,port:a}=H7(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Bi(d,r.config.emulator)&&Bi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Fs(o)?($l(`${s}//${o}${c}`),Hl("Auth",!0)):i||q7()}function dV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function H7(n){let e=dV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:VL(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:VL(o)}}}function VL(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function q7(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var mv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ws("not implemented")}_getIdTokenResponse(e){return Ws("not implemented")}_linkToIdToken(e,t){return Ws("not implemented")}_getReauthenticationResolver(e){return Ws("not implemented")}};async function hS(n,e){return A7(n,"POST","/v1/accounts:signInWithIdp",kS(n,e))}var gv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var IS=class extends gv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var rp=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await ma._fromIdTokenResponse(e,r,i),o=UL(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=UL(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function UL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var wS=class n extends Ln{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function hV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wS._fromErrorAndOperation(n,s,e,r):s})}async function z7(n,e,t=!1){let r=await tp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return rp._forOperation(n,"link",r)}async function G7(n,e,t=!1){let{auth:r}=n;if(Gn(r.app))return Promise.reject(qc(r));let i="reauthenticate";try{let s=await tp(n,hV(r,i,e,n),t);ve(s.idToken,r,"internal-error");let o=xS(s.idToken);ve(o,r,"internal-error");let{sub:a}=o;return ve(n.uid===a,r,"user-mismatch"),rp._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ga(r,"user-mismatch"),s}}async function W7(n,e,t=!1){if(Gn(n.app))return Promise.reject(qc(n));let r="signIn",i=await hV(n,r,e),s=await rp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function BS(n,e,t,r){return oi(n).onIdTokenChanged(e,t,r)}function $S(n,e,t){return oi(n).beforeAuthStateChanged(e,t)}var yv="__sak";var _v=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yv,"1"),this.storage.removeItem(yv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var K7=1e3,Q7=10,Y7=(()=>{class n extends _v{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);F7()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Q7):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},K7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),fV=Y7;var J7=(()=>{class n extends _v{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),HS=J7;function X7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Z7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await X7(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function pV(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var TS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=pV("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Qi(){return window}function eQ(n){Qi().location.href=n}function mV(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function tQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nQ(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function rQ(){return mV()?self:null}var gV="firebaseLocalStorageDb",iQ=1,vv="firebaseLocalStorage",yV="fbase_key",Wc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Iv(n,e){return n.transaction([vv],e?"readwrite":"readonly").objectStore(vv)}function sQ(){let n=indexedDB.deleteDatabase(gV);return new Wc(n).toPromise()}function bS(){let n=indexedDB.open(gV,iQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(vv,{keyPath:yV})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(vv)?e(r):(r.close(),await sQ(),e(await bS()))})})}async function jL(n,e,t){let r=Iv(n,!0).put({[yV]:e,value:t});return new Wc(r).toPromise()}async function oQ(n,e){let t=Iv(n,!1).get(e),r=await new Wc(t).toPromise();return r===void 0?null:r.value}function BL(n,e){let t=Iv(n,!0).delete(e);return new Wc(t).toPromise()}var aQ=800,cQ=3,uQ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bS(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>cQ)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Z7._getInstance(rQ()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await tQ(),!this.activeServiceWorker)return;this.sender=new TS(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await bS();return await jL(t,yv,"1"),await BL(t,yv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>jL(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>oQ(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>BL(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=Iv(s,!1).getAll();return new Wc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),_V=uQ;var Hwe=lV("rcb"),qwe=new Gc(3e4,6e4);function lQ(n,e){return e?Ks(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ip=class extends mv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hS(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function dQ(n){return W7(n.auth,new ip(n),n.bypassAuthState)}function hQ(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),G7(t,new ip(n),n.bypassAuthState)}async function fQ(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),z7(t,new ip(n),n.bypassAuthState)}var CS=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dQ;case"linkViaPopup":case"linkViaRedirect":return fQ;case"reauthViaPopup":case"reauthViaRedirect":return hQ;default:ga(this.auth,"internal-error")}}resolve(e){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var zwe=new Gc(2e3,1e4);var pQ="pendingRedirect",av=new Map,SS=class extends CS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=av.get(this.auth._key());if(!e){try{let r=await mQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}av.set(this.auth._key(),e)}return this.bypassAuthState||av.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function mQ(n,e){let t=_Q(e),r=yQ(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function gQ(n,e){av.set(n._key(),e)}function yQ(n){return Ks(n._redirectPersistence)}function _Q(n){return ov(pQ,n.config.apiKey,n.name)}async function vQ(n,e,t=!1){if(Gn(n.app))return Promise.reject(qc(n));let r=LS(n),i=lQ(r,e),o=await new SS(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var EQ=600*1e3,DS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IQ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!vV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(zc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EQ&&this.cachedEventUids.clear(),this.cachedEventUids.has($L(e))}saveEventToCache(e){this.cachedEventUids.add($L(e)),this.lastProcessedEventTime=Date.now()}};function $L(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function IQ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vV(n);default:return!1}}async function wQ(n,e={}){return Kl(n,"GET","/v1/projects",e)}var TQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bQ=/^https?/;async function CQ(n){if(n.config.emulator)return;let{authorizedDomains:e}=await wQ(n);for(let t of e)try{if(SQ(t))return}catch{}ga(n,"unauthorized-domain")}function SQ(n){let e=pS(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!bQ.test(t))return!1;if(TQ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var DQ=new Gc(3e4,6e4);function HL(){let n=Qi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function AQ(n){return new Promise((e,t)=>{var r,i,s;function o(){HL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HL(),t(zc(n,"network-request-failed"))},timeout:DQ.get()})}if(!((i=(r=Qi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Qi().gapi)===null||s===void 0)&&s.load)o();else{let a=lV("iframefcb");return Qi()[a]=()=>{gapi.load?o():t(zc(n,"network-request-failed"))},j7(`${B7()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw cv=null,e})}var cv=null;function RQ(n){return cv=cv||AQ(n),cv}var PQ=new Gc(5e3,15e3),NQ="__/auth/iframe",kQ="emulator/auth/iframe",MQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OQ(n){let e=n.config;ve(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?NS(e,kQ):`https://${n.config.authDomain}/${NQ}`,r={apiKey:e.apiKey,appName:n.name,v:qi},i=xQ.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ff(r).slice(1)}`}async function FQ(n){let e=await RQ(n),t=Qi().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:OQ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=zc(n,"network-request-failed"),a=Qi().setTimeout(()=>{s(o)},PQ.get());function c(){Qi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var LQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VQ=500,UQ=600,jQ="_blank",BQ="http://localhost",Ev=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function $Q(n,e,t,r=VQ,i=UQ){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},LQ),{width:r.toString(),height:i.toString(),top:s,left:o}),d=vn().toLowerCase();t&&(a=rV(d)?jQ:t),tV(d)&&(e=e||BQ,c.scrollbars="yes");let h=Object.entries(c).reduce((v,[C,R])=>`${v}${C}=${R},`,"");if(O7(d)&&a!=="_self")return HQ(e||"",a),new Ev(null);let m=window.open(e||"",a,h);ve(m,n,"popup-blocked");try{m.focus()}catch{}return new Ev(m)}function HQ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var qQ="__/auth/handler",zQ="emulator/auth/handler",GQ=encodeURIComponent("fac");async function qL(n,e,t,r,i,s){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qi,eventId:i};if(e instanceof gv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",HO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof IS){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${GQ}=${encodeURIComponent(c)}`:"";return`${WQ(n)}?${Ff(a).slice(1)}${d}`}function WQ({config:n}){return n.emulator?NS(n,zQ):`https://${n.authDomain}/${qQ}`}var fS="webStorageSupport",AS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HS,this._completeRedirectFn=vQ,this._overrideRedirectResult=gQ}async _openPopup(e,t,r,i){var s;ya((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await qL(e,t,r,pS(),i);return $Q(e,o,pV())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await qL(e,t,r,pS(),i);return eQ(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ya(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await FQ(e),r=new DS(e);return t.register("authEvent",i=>(ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fS,{type:fS},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[fS];o!==void 0&&t(!!o),ga(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CQ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cV()||nV()||FS()}},EV=AS;var zL="@firebase/auth",GL="1.10.8";var RS=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function KQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QQ(n){ur(new En("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uV(n)},d=new ES(r,i,s,c);return $7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ur(new En("auth-internal",e=>{let t=LS(e.getProvider("auth").getImmediate());return(r=>new RS(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ft(zL,GL,KQ(n)),ft(zL,GL,"esm2017")}var YQ=300,JQ=Y0("authIdTokenMaxAge")||YQ,WL=null,XQ=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>JQ)return;let i=t?.token;WL!==i&&(WL=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qS(n=Vs()){let e=ra(n,"auth");if(e.isInitialized())return e.getImmediate();let t=US(n,{popupRedirectResolver:EV,persistence:[_V,fV,HS]}),r=Y0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=XQ(s.toString());$S(t,o,()=>o(t.currentUser)),BS(t,a=>o(a))}}let i=K0("auth");return i&&jS(t,`http://${i}`),t}function ZQ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}U7({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=zc("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",ZQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QQ("Browser");var IV="auth",sp=class{constructor(e){return e}},Kc=class{constructor(){return ia(IV)}};var zS=new Z("angularfire2.auth-instances");function GY(n,e){let t=Uc(IV,n,e);return t&&new sp(t)}function WY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sp(r)}}var KY={provide:Kc,deps:[[new nn,zS]]},QY={provide:sp,useFactory:GY,deps:[[new nn,zS],ai]};function wV(n,...e){return ft("angularfire",zi.full,"auth"),mn([QY,KY,{provide:zS,useFactory:WY(n),multi:!0,deps:[tt,mt,Gi,js,[new nn,oa],...e]}])}var TV=Us(qS,!0);var bV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CV={};var Qs,GS;(function(){var n;function e(w,y){function I(){}I.prototype=y.prototype,w.F=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(T,b,A){for(var E=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)E[lt-2]=arguments[lt];return y.prototype[b].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,I){I||(I=0);let T=Array(16);if(typeof y=="string")for(var b=0;b<16;++b)T[b]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(b=0;b<16;++b)T[b]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],b=w.g[2];let A=w.g[3],E;E=y+(A^I&(b^A))+T[0]+3614090360&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[1]+3905402710&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(A^I&(b^A))+T[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[5]+1200080426&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(A^I&(b^A))+T[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[9]+2336552879&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(A^I&(b^A))+T[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[13]+4254626195&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(b^A&(I^b))+T[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[6]+3225465664&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^A&(I^b))+T[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[10]+38016083&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^A&(I^b))+T[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[14]+3275163606&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^A&(I^b))+T[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[2]+4243563512&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(I^b^A)+T[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[8]+2272392833&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^A)+T[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[4]+1272893353&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^A)+T[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[0]+3936430074&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^A)+T[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[12]+3873151461&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(b^(I|~A))+T[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[7]+1126891415&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~A))+T[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[3]+2399980690&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~A))+T[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[15]+4264355552&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~A))+T[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[11]+3174756917&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.v=function(w,y){y===void 0&&(y=w.length);let I=y-this.blockSize,T=this.C,b=this.h,A=0;for(;A<y;){if(b==0)for(;A<=I;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<y;)if(T[b++]=w.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<y;)if(T[b++]=w[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=y},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,I=0;I<4;++I)for(let T=0;T<32;T+=8)w[y++]=this.g[I]>>>T&255;return w};function s(w,y){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function o(w,y){this.h=y;let I=[],T=!0;for(let b=w.length-1;b>=0;b--){let A=w[b]|0;T&&A==y||(I[b]=A,T=!1)}this.g=I}var a={};function c(w){return-128<=w&&w<128?s(w,function(y){return new o([y|0],y<0?-1:0)}):new o([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return k(d(-w));let y=[],I=1;for(let T=0;w>=I;T++)y[T]=w/I|0,I*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return k(h(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(y,8)),T=m;for(let A=0;A<w.length;A+=8){var b=Math.min(8,w.length-A);let E=parseInt(w.substring(A,A+b),y);b<8?(b=d(Math.pow(y,b)),T=T.j(b).add(d(E))):(T=T.j(I),T=T.add(d(E)))}return T}var m=c(0),v=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-k(this).m();let w=0,y=1;for(let I=0;I<this.g.length;I++){let T=this.i(I);w+=(T>=0?T:4294967296+T)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+k(this).toString(w);let y=d(Math.pow(w,6));var I=this;let T="";for(;;){let b=oe(I,y).g;I=B(I,b.j(y));let A=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=b,R(I))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=B(this,w),P(w)?-1:R(w)?0:1};function k(w){let y=w.g.length,I=[];for(let T=0;T<y;T++)I[T]=~w.g[T];return new o(I,~w.h).add(v)}n.abs=function(){return P(this)?k(this):this},n.add=function(w){let y=Math.max(this.g.length,w.g.length),I=[],T=0;for(let b=0;b<=y;b++){let A=T+(this.i(b)&65535)+(w.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,I[b]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function B(w,y){return w.add(k(y))}n.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?k(this).j(k(w)):k(k(this).j(w));if(P(w))return k(this.j(k(w)));if(this.l(C)<0&&w.l(C)<0)return d(this.m()*w.m());let y=this.g.length+w.g.length,I=[];for(var T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(let b=0;b<w.g.length;b++){let A=this.i(T)>>>16,E=this.i(T)&65535,lt=w.i(b)>>>16,un=w.i(b)&65535;I[2*T+2*b]+=E*un,W(I,2*T+2*b),I[2*T+2*b+1]+=A*un,W(I,2*T+2*b+1),I[2*T+2*b+1]+=E*lt,W(I,2*T+2*b+1),I[2*T+2*b+2]+=A*lt,W(I,2*T+2*b+2)}for(w=0;w<y;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=y;w<2*y;w++)I[w]=0;return new o(I,0)};function W(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function Q(w,y){this.g=w,this.h=y}function oe(w,y){if(R(y))throw Error("division by zero");if(R(w))return new Q(m,m);if(P(w))return y=oe(k(w),y),new Q(k(y.g),k(y.h));if(P(y))return y=oe(w,k(y)),new Q(k(y.g),y.h);if(w.g.length>30){if(P(w)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var I=v,T=y;T.l(w)<=0;)I=ze(I),T=ze(T);var b=me(I,1),A=me(T,1);for(T=me(T,2),I=me(I,2);!R(T);){var E=A.add(T);E.l(w)<=0&&(b=b.add(I),A=E),T=me(T,1),I=me(I,1)}return y=B(w,b.j(y)),new Q(b,y)}for(b=m;w.l(y)>=0;){for(I=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=d(I),E=A.j(y);P(E)||E.l(w)>0;)I-=T,A=d(I),E=A.j(y);R(A)&&(A=v),b=b.add(A),w=B(w,E)}return new Q(b,w)}n.B=function(w){return oe(this,w).h},n.and=function(w){let y=Math.max(this.g.length,w.g.length),I=[];for(let T=0;T<y;T++)I[T]=this.i(T)&w.i(T);return new o(I,this.h&w.h)},n.or=function(w){let y=Math.max(this.g.length,w.g.length),I=[];for(let T=0;T<y;T++)I[T]=this.i(T)|w.i(T);return new o(I,this.h|w.h)},n.xor=function(w){let y=Math.max(this.g.length,w.g.length),I=[];for(let T=0;T<y;T++)I[T]=this.i(T)^w.i(T);return new o(I,this.h^w.h)};function ze(w){let y=w.g.length+1,I=[];for(let T=0;T<y;T++)I[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(I,w.h)}function me(w,y){let I=y>>5;y%=32;let T=w.g.length-I,b=[];for(let A=0;A<T;A++)b[A]=y>0?w.i(A+I)>>>y|w.i(A+I+1)<<32-y:w.i(A+I);return new o(b,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,GS=CV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Qs=CV.Integer=o}).apply(typeof bV<"u"?bV:typeof self<"u"?self:typeof window<"u"?window:{});var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ys={};var WS,YY,Ql,KS,op,Tv,QS,YS,JS;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof wv=="object"&&wv];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var _=r;l=l.split(".");for(var D=0;D<l.length-1;D++){var N=l[D];if(!(N in _))break e;_=_[N]}l=l[l.length-1],D=_[l],p=p(D),p!=D&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var _=[],D;for(D in p)Object.prototype.hasOwnProperty.call(p,D)&&_.push([D,p[D]]);return _}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,_){return l.call.apply(l.bind,arguments)}function d(l,p,_){return d=c,d.apply(null,arguments)}function h(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function m(l,p){function _(){}_.prototype=p.prototype,l.Z=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Ob=function(D,N,F){for(var K=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)K[ge-2]=arguments[ge];return p.prototype[N].apply(D,K)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function C(l){let p=l.length;if(p>0){let _=Array(p);for(let D=0;D<p;D++)_[D]=l[D];return _}return[]}function R(l,p){for(let D=1;D<arguments.length;D++){let N=arguments[D];var _=typeof N;if(_=_!="object"?_:N?Array.isArray(N)?"array":_:"null",_=="array"||_=="object"&&typeof N.length=="number"){_=l.length||0;let F=N.length||0;l.length=_+F;for(let K=0;K<F;K++)l[_+K]=N[K]}else l.push(N)}}class P{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function B(){var l=w;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,_){let D=Q.get();D.set(p,_),this.h?this.h.next=D:this.g=D,this.h=D}}var Q=new P(()=>new oe,l=>l.reset());class oe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,me=!1,w=new W,y=()=>{let l=Promise.resolve(void 0);ze=()=>{l.then(I)}};function I(){for(var l;l=B();){try{l.h.call(l.g)}catch(_){k(_)}var p=Q;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}me=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let _=()=>{};o.addEventListener("test",_,p),o.removeEventListener("test",_,p)}catch{}return l})();function E(l){return/^[\s\xa0]*$/.test(l)}function lt(l,p){b.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}m(lt,b),lt.prototype.init=function(l,p){let _=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(_=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var un="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ie(l,p,_,D,N){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!D,this.ha=N,this.key=++ne,this.da=this.fa=!1}function se(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ae(l,p,_){for(let D in l)p.call(_,l[D],D,l)}function wt(l,p){for(let _ in l)p.call(void 0,l[_],_,l)}function kn(l){let p={};for(let _ in l)p[_]=l[_];return p}let yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(l,p){let _,D;for(let N=1;N<arguments.length;N++){D=arguments[N];for(_ in D)l[_]=D[_];for(let F=0;F<yt.length;F++)_=yt[F],Object.prototype.hasOwnProperty.call(D,_)&&(l[_]=D[_])}}function Je(l){this.src=l,this.g={},this.h=0}Je.prototype.add=function(l,p,_,D,N){let F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);let K=Da(l,p,D,N);return K>-1?(p=l[K],_||(p.fa=!1)):(p=new ie(p,this.src,F,!!D,N),p.fa=_,l.push(p)),p};function hr(l,p){let _=p.type;if(_ in l.g){var D=l.g[_],N=Array.prototype.indexOf.call(D,p,void 0),F;(F=N>=0)&&Array.prototype.splice.call(D,N,1),F&&(se(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Da(l,p,_,D){for(let N=0;N<l.length;++N){let F=l[N];if(!F.da&&F.listener==p&&F.capture==!!_&&F.ha==D)return N}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),Yn={};function ln(l,p,_,D,N){if(D&&D.once)return vu(l,p,_,D,N);if(Array.isArray(p)){for(let F=0;F<p.length;F++)ln(l,p[F],_,D,N);return null}return _=Tu(_),l&&l[un]?l.J(p,_,a(D)?!!D.capture:!!D,N):fr(l,p,_,!1,D,N)}function fr(l,p,_,D,N,F){if(!p)throw Error("Invalid event type");let K=a(N)?!!N.capture:!!N,ge=wu(l);if(ge||(l[pt]=ge=new Je(l)),_=ge.add(p,_,D,K,F),_.proxy)return _;if(D=mi(),_.proxy=D,D.src=l,D.listener=_,l.addEventListener)A||(N=K),N===void 0&&(N=!1),l.addEventListener(p.toString(),D,N);else if(l.attachEvent)l.attachEvent(Iu(p.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function mi(){function l(_){return p.call(l.src,l.listener,_)}let p=Kp;return l}function vu(l,p,_,D,N){if(Array.isArray(p)){for(let F=0;F<p.length;F++)vu(l,p[F],_,D,N);return null}return _=Tu(_),l&&l[un]?l.K(p,_,a(D)?!!D.capture:!!D,N):fr(l,p,_,!0,D,N)}function Eu(l,p,_,D,N){if(Array.isArray(p))for(var F=0;F<p.length;F++)Eu(l,p[F],_,D,N);else D=a(D)?!!D.capture:!!D,_=Tu(_),l&&l[un]?(l=l.i,F=String(p).toString(),F in l.g&&(p=l.g[F],_=Da(p,_,D,N),_>-1&&(se(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete l.g[F],l.h--)))):l&&(l=wu(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Da(p,_,D,N)),(_=l>-1?p[l]:null)&&Aa(_))}function Aa(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[un])hr(p.i,l);else{var _=l.type,D=l.proxy;p.removeEventListener?p.removeEventListener(_,D,l.capture):p.detachEvent?p.detachEvent(Iu(_),D):p.addListener&&p.removeListener&&p.removeListener(D),(_=wu(p))?(hr(_,l),_.h==0&&(_.src=null,p[pt]=null)):se(l)}}}function Iu(l){return l in Yn?Yn[l]:Yn[l]="on"+l}function Kp(l,p){if(l.da)l=!0;else{p=new lt(p,this);let _=l.listener,D=l.ha||l.src;l.fa&&Aa(l),l=_.call(D,p)}return l}function wu(l){return l=l[pt],l instanceof Je?l:null}var Ld="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tu(l){return typeof l=="function"?l:(l[Ld]||(l[Ld]=function(p){return l.handleEvent(p)}),l[Ld])}function Kt(){T.call(this),this.i=new Je(this),this.M=this,this.G=null}m(Kt,T),Kt.prototype[un]=!0,Kt.prototype.removeEventListener=function(l,p,_,D){Eu(this,l,p,_,D)};function Qt(l,p){var _,D=l.G;if(D)for(_=[];D;D=D.G)_.push(D);if(l=l.M,D=p.type||p,typeof p=="string")p=new b(p,l);else if(p instanceof b)p.target=p.target||l;else{var N=p;p=new b(D,l),st(p,N)}N=!0;let F,K;if(_)for(K=_.length-1;K>=0;K--)F=p.g=_[K],N=Ra(F,D,!0,p)&&N;if(F=p.g=l,N=Ra(F,D,!0,p)&&N,N=Ra(F,D,!1,p)&&N,_)for(K=0;K<_.length;K++)F=p.g=_[K],N=Ra(F,D,!1,p)&&N}Kt.prototype.N=function(){if(Kt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let _=l.g[p];for(let D=0;D<_.length;D++)se(_[D]);delete l.g[p],l.h--}}this.G=null},Kt.prototype.J=function(l,p,_,D){return this.i.add(String(l),p,!1,_,D)},Kt.prototype.K=function(l,p,_,D){return this.i.add(String(l),p,!0,_,D)};function Ra(l,p,_,D){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let F=0;F<p.length;++F){let K=p[F];if(K&&!K.da&&K.capture==_){let ge=K.listener,u=K.ha||K.src;K.fa&&hr(l.i,K),N=ge.call(u,D)!==!1&&N}}return N&&!D.defaultPrevented}function cI(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function bu(l){l.g=cI(()=>{l.g=null,l.i&&(l.i=!1,bu(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class Vd extends T{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:bu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(l){T.call(this),this.h=l,this.g={}}m(ds,T);var Yt=[];function en(l){Ae(l.g,function(p,_){this.g.hasOwnProperty(_)&&Aa(p)},l),l.g={}}ds.prototype.N=function(){ds.Z.N.call(this),en(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ho=o.JSON.stringify,Qp=o.JSON.parse,Yp=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Jp(){}function fo(){}var po={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cu(){b.call(this,"d")}m(Cu,b);function Pa(){b.call(this,"c")}m(Pa,b);var hs={},Xp=null;function mo(){return Xp=Xp||new Kt}hs.Ia="serverreachability";function Ud(l){b.call(this,hs.Ia,l)}m(Ud,b);function go(l){let p=mo();Qt(p,new Ud(p))}hs.STAT_EVENT="statevent";function yo(l,p){b.call(this,hs.STAT_EVENT,l),this.stat=p}m(yo,b);function Jt(l){let p=mo();Qt(p,new yo(p,l))}hs.Ja="timingevent";function Su(l,p){b.call(this,hs.Ja,l),this.size=p}m(Su,b);function Jn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function _o(){this.g=!0}_o.prototype.ua=function(){this.g=!1};function Du(l,p,_,D,N,F){l.info(function(){if(l.g)if(F){var K="",ge=F.split("&");for(let f=0;f<ge.length;f++){var u=ge[f].split("=");if(u.length>1){let g=u[0];u=u[1];let S=g.split("_");K=S.length>=2&&S[1]=="type"?K+(g+"="+u+"&"):K+(g+"=redacted&")}}}else K=null;else K=F;return"XMLHTTP REQ ("+D+") [attempt "+N+"]: "+p+`
`+_+`
`+K})}function Zp(l,p,_,D,N,F,K){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+N+"]: "+p+`
`+_+`
`+F+" "+K})}function pr(l,p,_,D){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+dn(l,_)+(D?" "+D:"")})}function em(l,p){l.info(function(){return"TIMEOUT: "+p})}_o.prototype.info=function(){};function dn(l,p){if(!l.g)return p;if(!p)return null;try{let F=JSON.parse(p);if(F){for(l=0;l<F.length;l++)if(Array.isArray(F[l])){var _=F[l];if(!(_.length<2)){var D=_[1];if(Array.isArray(D)&&!(D.length<1)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(let K=1;K<D.length;K++)D[K]=""}}}}return ho(F)}catch{return p}}var Na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Eo;function jd(){}m(jd,Jp),jd.prototype.g=function(){return new XMLHttpRequest},Eo=new jd;function ka(l){return encodeURIComponent(String(l))}function Io(l){var p=1;l=l.split(":");let _=[];for(;p>0&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function gi(l,p,_,D){this.j=l,this.i=p,this.l=_,this.S=D||1,this.V=new ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tm}function tm(){this.i=null,this.g="",this.h=!1}var Ma={},Au={};function xa(l,p,_){l.M=1,l.A=Va(Xn(p)),l.u=_,l.R=!0,Oa(l,null)}function Oa(l,p){l.F=Date.now(),wo(l),l.B=Xn(l.A);var _=l.B,D=l.S;Array.isArray(D)||(D=[String(D)]),am(_.i,"t",D),l.C=0,_=l.j.L,l.h=new tm,l.g=Bu(l.j,_?p:null,!l.u),l.P>0&&(l.O=new Vd(d(l.Y,l,l.g),l.P)),p=l.V,_=l.g,D=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(Yt[0]=N.toString()),N=Yt);for(let F=0;F<N.length;F++){let K=ln(_,N[F],D||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=l.J?kn(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),go(),Du(l.i,l.v,l.B,l.l,l.S,l.u)}gi.prototype.ba=function(l){l=l.target;let p=this.O;p&&Ge(l)==3?p.j():this.Y(l)},gi.prototype.Y=function(l){try{if(l==this.g)e:{let ge=Ge(this.g),u=this.g.ya(),f=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||pm(this.g)))){this.K||ge!=4||u==7||(u==8||f<=0?go(3):go(2)),Pu(this);var p=this.g.ca();this.X=p;var _=yi(this);if(this.o=p==200,Zp(this.i,this.v,this.B,this.l,this.S,ge,p),this.o){if(this.U&&!this.L){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(D)){var F=D;break t}}F=null}if(l=F)pr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bo(this,l);else{this.o=!1,this.m=3,Jt(12),fs(this),To(this);break e}}if(this.R){l=!0;let g;for(;!this.K&&this.C<_.length;)if(g=nm(this,_),g==Au){ge==4&&(this.m=4,Jt(14),l=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(g==Ma){this.m=4,Jt(15),pr(this.i,this.l,_,"[Invalid Chunk]"),l=!1;break}else pr(this.i,this.l,g,null),bo(this,g);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||_.length!=0||this.h.h||(this.m=1,Jt(16),l=!1),this.o=this.o&&l,!l)pr(this.i,this.l,_,"[Invalid Chunked Response]"),fs(this),To(this);else if(_.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Vu(K),K.P=!0,Jt(11))}}else pr(this.i,this.l,_,null),bo(this,_);ge==4&&fs(this),this.o&&!this.K&&(ge==4?eh(this.j,this):(this.o=!1,wo(this)))}else uI(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),fs(this),To(this)}}}catch{}};function yi(l){if(!Bd(l))return l.g.la();let p=pm(l.g);if(p==="")return"";let _="",D=p.length,N=Ge(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return fs(l),To(l),"";l.h.i=new o.TextDecoder}for(let F=0;F<D;F++)l.h.h=!0,_+=l.h.i.decode(p[F],{stream:!(N&&F==D-1)});return p.length=0,l.h.g+=_,l.C=0,l.h.g}function Bd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function nm(l,p){var _=l.C,D=p.indexOf(`
`,_);return D==-1?Au:(_=Number(p.substring(_,D)),isNaN(_)?Ma:(D+=1,D+_>p.length?Au:(p=p.slice(D,D+_),l.C=D+_,p)))}gi.prototype.cancel=function(){this.K=!0,fs(this)};function wo(l){l.T=Date.now()+l.H,Ru(l,l.H)}function Ru(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Jn(d(l.aa,l),p)}function Pu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}gi.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(em(this.i,this.B),this.M!=2&&(go(),Jt(17)),fs(this),this.m=2,To(this)):Ru(this,this.T-l)};function To(l){l.j.I==0||l.K||eh(l.j,l)}function fs(l){Pu(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,en(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function bo(l,p){try{var _=l.j;if(_.I!=0&&(_.g==l||Fa(_.h,l))){if(!l.L&&Fa(_.h,l)&&_.I==3){try{var D=_.Ba.g.parse(p)}catch{D=null}if(Array.isArray(D)&&D.length==3){var N=D;if(N[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<l.F)Uu(_),ps(_);else break e;ko(_),Jt(18)}}else _.xa=N[1],0<_.xa-_.K&&N[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Jn(d(_.Va,_),6e3));_i(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ei(_,11)}else if((l.L||_.g==l)&&Uu(_),!E(p))for(N=_.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],g=f[0];if(!(g<=_.K))if(_.K=g,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let S=f[3];S!=null&&(_.ka=S,_.j.info("VER="+_.ka));let M=f[4];M!=null&&(_.za=M,_.j.info("SVER="+_.za));let L=f[5];L!=null&&typeof L=="number"&&L>0&&(D=1.5*L,_.O=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;let G=l.g;if(G){let $e=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($e){var F=D.h;F.g||$e.indexOf("spdy")==-1&&$e.indexOf("quic")==-1&&$e.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&($d(F,F.h),F.h=null))}if(D.G){let Rt=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Rt&&(D.wa=Rt,ot(D.J,D.G,Rt))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-l.F,_.j.info("Handshake RTT: "+_.T+"ms")),D=_;var K=l;if(D.na=ju(D,D.L?D.ba:null,D.W),K.L){Hd(D.h,K);var ge=K,u=D.O;u&&(ge.H=u),ge.D&&(Pu(ge),wo(ge)),D.g=K}else Lu(D);_.i.length>0&&Un(_)}else f[0]!="stop"&&f[0]!="close"||Ei(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Ei(_,7):Fu(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}go(4)}catch{}}var rm=class{constructor(l,p){this.g=l,this.map=p}};function Nu(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Co(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _i(l){return l.h?1:l.g?l.g.size:0}function Fa(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function $d(l,p){l.g?l.g.add(p):l.h=p}function Hd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Nu.prototype.cancel=function(){if(this.i=qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function qd(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let _ of l.g.values())p=p.concat(_.G);return p}return C(l.i)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gd(l,p){if(l){l=l.split("&");for(let _=0;_<l.length;_++){let D=l[_].indexOf("="),N,F=null;D>=0?(N=l[_].substring(0,D),F=l[_].substring(D+1)):N=l[_],p(N,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function mr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof mr?(this.l=l.l,So(this,l.j),this.o=l.o,this.g=l.g,La(this,l.u),this.h=l.h,Wd(this,cm(l.i)),this.m=l.m):l&&(p=String(l).match(zd))?(this.l=!1,So(this,p[1]||"",!0),this.o=Ua(p[2]||""),this.g=Ua(p[3]||"",!0),La(this,p[4]),this.h=Ua(p[5]||"",!0),Wd(this,p[6]||"",!0),this.m=Ua(p[7]||"")):(this.l=!1,this.i=new Vr(null,this.l))}mr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(Zn(p,ja,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Zn(p,ja,!0),"@"),l.push(ka(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&l.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Zn(_,_.charAt(0)=="/"?im:ku,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Zn(_,Mu)),l.join("")},mr.prototype.resolve=function(l){let p=Xn(this),_=!!l.j;_?So(p,l.j):_=!!l.o,_?p.o=l.o:_=!!l.g,_?p.g=l.g:_=l.u!=null;var D=l.h;if(_)La(p,l.u);else if(_=!!l.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var N=p.h.lastIndexOf("/");N!=-1&&(D=p.h.slice(0,N+1)+D)}if(N=D,N==".."||N==".")D="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){D=N.lastIndexOf("/",0)==0,N=N.split("/");let F=[];for(let K=0;K<N.length;){let ge=N[K++];ge=="."?D&&K==N.length&&F.push(""):ge==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),D&&K==N.length&&F.push("")):(F.push(ge),D=!0)}D=F.join("/")}else D=N}return _?p.h=D:_=l.i.toString()!=="",_?Wd(p,cm(l.i)):_=!!l.m,_&&(p.m=l.m),p};function Xn(l){return new mr(l)}function So(l,p,_){l.j=_?Ua(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function La(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Wd(l,p,_){p instanceof Vr?(l.i=p,Ba(l.i,l.l)):(_||(p=Zn(p,dt)),l.i=new Vr(p,l.l))}function ot(l,p,_){l.i.set(p,_)}function Va(l){return ot(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ua(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Zn(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,Lr),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Lr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ja=/[#\/\?@]/g,ku=/[#\?:]/g,im=/[#\?]/g,dt=/[#\?@]/g,Mu=/#/g;function Vr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function er(l){l.g||(l.g=new Map,l.h=0,l.i&&Gd(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Vr.prototype,n.add=function(l,p){er(this),this.i=null,l=Do(this,l);let _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function sm(l,p){er(l),p=Do(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Kd(l,p){return er(l),p=Do(l,p),l.g.has(p)}n.forEach=function(l,p){er(this),this.g.forEach(function(_,D){_.forEach(function(N){l.call(p,N,D,this)},this)},this)};function om(l,p){er(l);let _=[];if(typeof p=="string")Kd(l,p)&&(_=_.concat(l.g.get(Do(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)_=_.concat(l[p]);return _}n.set=function(l,p){return er(this),this.i=null,l=Do(this,l),Kd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=om(this,l),l.length>0?String(l[0]):p):p};function am(l,p,_){sm(l,p),_.length>0&&(l.i=null,l.g.set(Do(l,p),C(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let D=0;D<p.length;D++){var _=p[D];let N=ka(_);_=om(this,_);for(let F=0;F<_.length;F++){let K=N;_[F]!==""&&(K+="="+ka(_[F])),l.push(K)}}return this.i=l.join("&")};function cm(l){let p=new Vr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function Do(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Ba(l,p){p&&!l.j&&(er(l),l.i=null,l.g.forEach(function(_,D){let N=D.toLowerCase();D!=N&&(sm(this,D),am(this,N,_))},l)),l.j=p}function vi(l,p){let _=new _o;if(o.Image){let D=new Image;D.onload=h(Ur,_,"TestLoadImage: loaded",!0,p,D),D.onerror=h(Ur,_,"TestLoadImage: error",!1,p,D),D.onabort=h(Ur,_,"TestLoadImage: abort",!1,p,D),D.ontimeout=h(Ur,_,"TestLoadImage: timeout",!1,p,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else p(!1)}function um(l,p){let _=new _o,D=new AbortController,N=setTimeout(()=>{D.abort(),Ur(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:D.signal}).then(F=>{clearTimeout(N),F.ok?Ur(_,"TestPingServer: ok",!0,p):Ur(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Ur(_,"TestPingServer: error",!1,p)})}function Ur(l,p,_,D,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),D(_)}catch{}}function lm(){this.g=new Yp}function jr(l){this.i=l.Sb||null,this.h=l.ab||!1}m(jr,Jp),jr.prototype.g=function(){return new xu(this.i,this.h)};function xu(l,p){Kt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(xu,Kt),n=xu.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Vn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vn(this)),this.g&&(this.readyState=3,Vn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function dm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?$a(this):Vn(this),this.readyState==3&&dm(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,$a(this))},n.Na=function(l){this.g&&(this.response=l,$a(this))},n.ga=function(){this.g&&$a(this)};function $a(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Vn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function Vn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function hm(l){let p="";return Ae(l,function(_,D){p+=D,p+=":",p+=_,p+=`\r
`}),p}function Qd(l,p,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=hm(_),typeof l=="string"?_!=null&&ka(_):ot(l,p,_))}function at(l){Kt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(at,Kt);var Ou=/^https?$/i,fm=["POST","PUT"];n=at.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Eo.g(),this.g.onreadystatechange=v(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(F){Ao(this,F);return}if(l=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var N in D)_.set(N,D[N]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let F of D.keys())_.set(F,D.get(F));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(fm,p,void 0)>=0)||D||N||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,K]of _)this.g.setRequestHeader(F,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(F){Ao(this,F)}};function Ao(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Ro(l),Po(l)}function Ro(l){l.A||(l.A=!0,Qt(l,"complete"),Qt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Qt(this,"complete"),Qt(this,"abort"),Po(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Po(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yd(this):this.Xa())},n.Xa=function(){Yd(this)};function Yd(l){if(l.h&&typeof s<"u"){if(l.v&&Ge(l)==4)setTimeout(l.Ca.bind(l),0);else if(Qt(l,"readystatechange"),Ge(l)==4){l.h=!1;try{let F=l.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var D;if(D=F===0){let K=String(l.D).match(zd)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),D=!Ou.test(K?K.toLowerCase():"")}_=D}if(_)Qt(l,"complete"),Qt(l,"success");else{l.o=6;try{var N=Ge(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",Ro(l)}}finally{Po(l)}}}}function Po(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let _=l.g;l.g=null,p||Qt(l,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ge(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Ge(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Qp(p)}};function pm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function uI(l){let p={};l=(l.g&&Ge(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(E(l[D]))continue;var _=Io(l[D]);let N=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let F=p[N]||[];p[N]=F,F.push(_)}wt(p,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function Jd(l){this.za=0,this.i=[],this.j=new _o,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=No("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=No("baseRetryDelayMs",5e3,l),this.Za=No("retryDelaySeedMs",1e4,l),this.Ta=No("forwardChannelMaxRetries",2,l),this.va=No("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Nu(l&&l.concurrentRequestLimit),this.Ba=new lm,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Jd.prototype,n.ka=8,n.I=1,n.connect=function(l,p,_,D){Jt(0),this.W=l,this.H=p||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.J=ju(this,null,this.W),Un(this)};function Fu(l){if(Xd(l),l.I==3){var p=l.V++,_=Xn(l.J);if(ot(_,"SID",l.M),ot(_,"RID",p),ot(_,"TYPE","terminate"),Br(l,_),p=new gi(l,l.j,p),p.M=2,p.A=Va(Xn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=p.A,_=!0),_||(p.g=Bu(p.j,null),p.g.ea(p.A)),p.F=Date.now(),wo(p)}th(l)}function ps(l){l.g&&(Vu(l),l.g.cancel(),l.g=null)}function Xd(l){ps(l),l.v&&(o.clearTimeout(l.v),l.v=null),Uu(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Un(l){if(!Co(l.h)&&!l.m){l.m=!0;var p=l.Ea;ze||y(),me||(ze(),me=!0),w.add(p,l),l.D=0}}function mm(l,p){return _i(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Jn(d(l.Ea,l,p),Mo(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new gi(this,this.j,l),F=this.o;if(this.U&&(F?(F=kn(F),st(F,this.U)):F=this.U),this.u!==null||this.R||(N.J=F,F=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(p+=D,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Zd(this,N,p),_=Xn(this.J),ot(_,"RID",l),ot(_,"CVER",22),this.G&&ot(_,"X-HTTP-Session-Id",this.G),Br(this,_),F&&(this.R?p="headers="+ka(hm(F))+"&"+p:this.u&&Qd(_,this.u,F)),$d(this.h,N),this.Ra&&ot(_,"TYPE","init"),this.S?(ot(_,"$req",p),ot(_,"SID","null"),N.U=!0,xa(N,_,null)):xa(N,_,p),this.I=2}}else this.I==3&&(l?gm(this,l):this.i.length==0||Co(this.h)||gm(this))};function gm(l,p){var _;p?_=p.l:_=l.V++;let D=Xn(l.J);ot(D,"SID",l.M),ot(D,"RID",_),ot(D,"AID",l.K),Br(l,D),l.u&&l.o&&Qd(D,l.u,l.o),_=new gi(l,l.j,_,l.D+1),l.u===null&&(_.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Zd(l,_,1e3),_.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),$d(l.h,_),xa(_,D,p)}function Br(l,p){l.H&&Ae(l.H,function(_,D){ot(p,D,_)}),l.l&&Ae({},function(_,D){ot(p,D,_)})}function Zd(l,p,_){_=Math.min(l.i.length,_);let D=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let ge=-1;for(;;){let u=["count="+_];ge==-1?_>0?(ge=N[0].g,u.push("ofs="+ge)):ge=0:u.push("ofs="+ge);let f=!0;for(let g=0;g<_;g++){var F=N[g].g;let S=N[g].map;if(F-=ge,F<0)ge=Math.max(0,N[g].g-100),f=!1;else try{F="req"+F+"_"||"";try{var K=S instanceof Map?S:Object.entries(S);for(let[M,L]of K){let G=L;a(L)&&(G=ho(L)),u.push(F+M+"="+encodeURIComponent(G))}}catch(M){throw u.push(F+"type="+encodeURIComponent("_badmap")),M}}catch{D&&D(S)}}if(f){K=u.join("&");break e}}K=void 0}return l=l.i.splice(0,_),p.G=l,K}function Lu(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ze||y(),me||(ze(),me=!0),w.add(p,l),l.A=0}}function ko(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Jn(d(l.Da,l),Mo(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Ha(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Jn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),ps(this),Ha(this))};function Vu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ha(l){l.g=new gi(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=Xn(l.na);ot(p,"RID","rpc"),ot(p,"SID",l.M),ot(p,"AID",l.K),ot(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&ot(p,"TO",l.ia),ot(p,"TYPE","xmlhttp"),Br(l,p),l.u&&l.o&&Qd(p,l.u,l.o),l.O&&(l.g.H=l.O);var _=l.g;l=l.ba,_.M=1,_.A=Va(Xn(p)),_.u=null,_.R=!0,Oa(_,l)}n.Va=function(){this.C!=null&&(this.C=null,ps(this),ko(this),Jt(19))};function Uu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function eh(l,p){var _=null;if(l.g==p){Uu(l),Vu(l),l.g=null;var D=2}else if(Fa(l.h,p))_=p.G,Hd(l.h,p),D=1;else return;if(l.I!=0){if(p.o)if(D==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;D=mo(),Qt(D,new Su(D,_)),Un(l)}else Lu(l);else if(N=p.m,N==3||N==0&&p.X>0||!(D==1&&mm(l,p)||D==2&&ko(l)))switch(_&&_.length>0&&(p=l.h,p.i=p.i.concat(_)),N){case 1:Ei(l,5);break;case 4:Ei(l,10);break;case 3:Ei(l,6);break;default:Ei(l,2)}}}function Mo(l,p){let _=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(_*=2),_*p}function Ei(l,p){if(l.j.info("Error code "+p),p==2){var _=d(l.bb,l),D=l.Ua;let N=!D;D=new mr(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||So(D,"https"),Va(D),N?vi(D.toString(),_):um(D.toString(),_)}else Jt(2);l.I=0,l.l&&l.l.pa(p),th(l),Xd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function th(l){if(l.I=0,l.ja=[],l.l){let p=qd(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ja,p),R(l.ja,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.oa()}}function ju(l,p,_){var D=_ instanceof mr?Xn(_):new mr(_);if(D.g!="")p&&(D.g=p+"."+D.g),La(D,D.u);else{var N=o.location;D=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let F=new mr(null);D&&So(F,D),p&&(F.g=p),N&&La(F,N),_&&(F.h=_),D=F}return _=l.G,p=l.wa,_&&p&&ot(D,_,p),ot(D,"VER",l.ka),Br(l,D),D}function Bu(l,p,_){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new at(new jr({ab:_})):new at(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}n=nh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ms(){}ms.prototype.g=function(l,p){return new Tn(l,p)};function Tn(l,p){Kt.call(this),this.g=new Jd(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!E(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new gs(this)}m(Tn,Kt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Fu(this.g)},Tn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.v&&(_={},_.__data__=ho(l),l=_);p.i.push(new rm(p.Ya++,l)),p.I==3&&Un(p)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Fu(this.g),delete this.g,Tn.Z.N.call(this)};function rh(l){Cu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}m(rh,Cu);function Ii(){Pa.call(this),this.status=1}m(Ii,Pa);function gs(l){this.g=l}m(gs,nh),gs.prototype.ra=function(){Qt(this.g,"a")},gs.prototype.qa=function(l){Qt(this.g,new rh(l))},gs.prototype.pa=function(l){Qt(this.g,new Ii)},gs.prototype.oa=function(){Qt(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,JS=Ys.createWebChannelTransport=function(){return new ms},YS=Ys.getStatEventTarget=function(){return mo()},QS=Ys.Event=hs,Tv=Ys.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,op=Ys.ErrorCode=Na,vo.COMPLETE="complete",KS=Ys.EventType=vo,fo.EventType=po,po.OPEN="a",po.CLOSE="b",po.ERROR="c",po.MESSAGE="d",Kt.prototype.listen=Kt.prototype.J,Ql=Ys.WebChannel=fo,YY=Ys.FetchXmlHttpFactory=jr,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,WS=Ys.XhrIo=at}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");var pd="12.8.0";function h2(n){pd=n}var Jc=new ca("@firebase/firestore");function Yl(){return Jc.logLevel}function te(n,...e){if(Jc.logLevel<=ke.DEBUG){let t=e.map(RA);Jc.debug(`Firestore (${pd}): ${n}`,...t)}}function eo(n,...e){if(Jc.logLevel<=ke.ERROR){let t=e.map(RA);Jc.error(`Firestore (${pd}): ${n}`,...t)}}function _a(n,...e){if(Jc.logLevel<=ke.WARN){let t=e.map(RA);Jc.warn(`Firestore (${pd}): ${n}`,...t)}}function RA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,f2(n,r,t)}function f2(n,e,t){let r=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw eo(r),new Error(r)}function rt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||f2(e,i,r)}function Ce(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},X=class extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Js=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Pv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Nv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}},rD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},kv=class{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Js;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Js,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Js)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new Pv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new an(e)}},iD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},sD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new iD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);let r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function JY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Xc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=JY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function oD(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return XS(i)===XS(s)?Oe(i,s):XS(i)?1:-1}return Oe(n.length,e.length)}var XY=55296,ZY=57343;function XS(n){let e=n.charCodeAt(0);return e>=XY&&e<=ZY}function rd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var SV="__name__",Ov=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):oD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}},vt=class n extends Ov{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new X(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},eJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kn=class n extends Ov{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return eJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SV}static keyField(){return new n([SV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(vt.fromString(e))}static fromName(e){return new n(vt.fromString(e).popFirst(5))}static empty(){return new n(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new vt(e.slice()))}};function p2(n,e,t){if(!t)throw new X(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m2(n,e,t,r){if(e===!0&&r===!0)throw new X(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DV(n){if(!ce.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AV(n){if(ce.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function g2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fe(12329,{type:typeof n})}function ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=bp(n);throw new X(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ot(n,e){let t={typeString:n};return e&&(t.value=e),t}function md(n,e){if(!g2(n))throw new X(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new X(H.INVALID_ARGUMENT,t);return!0}var RV=-62135596800,PV=1e6,Ft=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*PV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RV)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PV}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(md(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-RV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:Ot("string",Ft._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ft(0,0))}static max(){return new n(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hp=-1,Fv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Fv.UNKNOWN_ID=-1;function tJ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Ft(t+1,0):new Ft(t,r));return new Zc(i,ce.empty(),e)}function nJ(n){return new Zc(n.readTime,n.key,hp)}var Zc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),ce.empty(),hp)}static max(){return new n(De.max(),ce.empty(),hp)}};function rJ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var iJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",aD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function gd(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==iJ)throw n;te("LocalStore","Unexpectedly lost primary lease")}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function sJ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yd(n){return n.name==="IndexedDbTransactionError"}var PA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),NA=-1;function dE(n){return n==null}function fp(n){return n===0&&1/n==-1/0}function oJ(n){return typeof n=="number"&&Number.isInteger(n)&&!fp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var y2="";function aJ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NV(e)),e=cJ(n.get(t),e);return NV(e)}function cJ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case y2:t+="";break;default:t+=s}}return t}function NV(n){return n+y2+""}var uJ="remoteDocuments",_2="owner";var v2="mutationQueues";var E2="mutations";var I2="documentMutations",lJ="remoteDocumentsV14";var w2="remoteDocumentGlobal";var T2="targets";var b2="targetDocuments";var C2="targetGlobal",S2="collectionParents";var D2="clientMetadata";var A2="bundles";var R2="namedQueries";var dJ="indexConfiguration";var hJ="indexState";var fJ="indexEntries";var P2="documentOverlays";var pJ="globals";var mJ=[v2,E2,I2,uJ,T2,_2,C2,b2,D2,w2,S2,A2,R2],GTe=[...mJ,P2],gJ=[v2,E2,I2,lJ,T2,_2,C2,b2,D2,w2,S2,A2,R2,P2],yJ=gJ,_J=[...yJ,dJ,hJ,fJ];var WTe=[..._J,pJ];function kV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ta(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function N2(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var At=class n{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}},ed=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}};Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1;Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var cn=class n{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Lv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mr=class n{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new n([])}unionWith(e){let t=new cn(Kn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Vv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var In=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vv("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};In.EMPTY_BYTE_STRING=new In("");var vJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(n){if(rt(!!n,39018),typeof n=="string"){let e=0,t=vJ.exec(n);if(rt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function no(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}var k2="server_timestamp",M2="__type__",x2="__previous_value__",O2="__local_write_time__";function hE(n){return(n?.mapValue?.fields||{})[M2]?.stringValue===k2}function fE(n){let e=n.mapValue.fields[x2];return hE(e)?fE(e):e}function pp(n){let e=to(n.mapValue.fields[O2].timestampValue);return new Ft(e.seconds,e.nanos)}var cD=class{constructor(e,t,r,i,s,o,a,c,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}},Uv="(default)",mp=class n{constructor(e,t){this.projectId=e,this.database=t||Uv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Uv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function F2(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new X(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mp(n.options.projectId,e)}var kA="__type__",L2="__max__",bv={mapValue:{fields:{__type__:{stringValue:L2}}}},MA="__vector__",id="value";function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hE(n)?4:U2(n)?9007199254740991:V2(n)?10:11:fe(28295,{value:n})}function ns(n,e){if(n===e)return!0;let t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pp(n).isEqual(pp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=to(i.timestampValue),a=to(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return no(i.bytesValue).isEqual(no(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return It(i.geoPointValue.latitude)===It(s.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return It(i.integerValue)===It(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=It(i.doubleValue),a=It(s.doubleValue);return o===a?fp(o)===fp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return rd(n.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(kV(o)!==kV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ns(o[c],a[c])))return!1;return!0})(n,e);default:return fe(52216,{left:n})}}function gp(n,e){return(n.values||[]).find(t=>ns(t,e))!==void 0}function sd(n,e){if(n===e)return 0;let t=va(n),r=va(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=It(s.integerValue||s.doubleValue),c=It(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return MV(n.timestampValue,e.timestampValue);case 4:return MV(pp(n),pp(e));case 5:return oD(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=no(s),c=no(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Oe(a[d],c[d]);if(h!==0)return h}return Oe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Oe(It(s.latitude),It(o.latitude));return a!==0?a:Oe(It(s.longitude),It(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xV(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[id]?.arrayValue,h=c[id]?.arrayValue,m=Oe(d?.values?.length||0,h?.values?.length||0);return m!==0?m:xV(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===bv.mapValue&&o===bv.mapValue)return 0;if(s===bv.mapValue)return 1;if(o===bv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){let v=oD(c[m],h[m]);if(v!==0)return v;let C=sd(a[c[m]],d[h[m]]);if(C!==0)return C}return Oe(c.length,h.length)})(n.mapValue,e.mapValue);default:throw fe(23264,{he:t})}}function MV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=to(n),r=to(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function xV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=sd(t[i],r[i]);if(s)return s}return Oe(t.length,r.length)}function od(n){return uD(n)}function uD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=to(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return no(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=uD(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${uD(t.fields[o])}`;return i+"}"})(n.mapValue):fe(61005,{value:n})}function Dv(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=fE(n);return e?16+Dv(e):16;case 5:return 2*n.stringValue.length;case 6:return no(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Dv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ta(r.fields,(s,o)=>{i+=s.length+Dv(o)}),i})(n.mapValue);default:throw fe(13486,{value:n})}}function xA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lD(n){return!!n&&"integerValue"in n}function OA(n){return!!n&&"arrayValue"in n}function OV(n){return!!n&&"nullValue"in n}function FV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Av(n){return!!n&&"mapValue"in n}function V2(n){return(n?.mapValue?.fields||{})[kA]?.stringValue===MA}function up(n){if(n.geoPointValue)return{geoPointValue:U({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:U({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=up(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=up(n.arrayValue.values[t]);return e}return U({},n)}function U2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===L2}var QTe={mapValue:{fields:{[kA]:{stringValue:MA},[id]:{arrayValue:{}}}}};var Wn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Av(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=up(t)}setAll(e){let t=Kn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=up(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Av(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Av(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(up(this.value))}};function j2(n){let e=[];return Ta(n.fields,(t,r)=>{let i=new Kn([t]);if(Av(r)){let s=j2(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Mr(e)}var hi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),Wn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var eu=class{constructor(e,t){this.position=e,this.inclusive=t}};function LV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),t.key):r=sd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ns(n.position[t],e.position[t]))return!1;return!0}var tu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function EJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var jv=class{},xt=class n extends jv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hD(e,t,r):t==="array-contains"?new mD(e,r):t==="in"?new gD(e,r):t==="not-in"?new yD(e,r):t==="array-contains-any"?new _D(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fD(e,r):new pD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sd(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(sd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xr=class n extends jv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return B2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function B2(n){return n.op==="and"}function $2(n){return IJ(n)&&B2(n)}function IJ(n){for(let e of n.filters)if(e instanceof xr)return!1;return!0}function dD(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+od(n.value);if($2(n))return n.filters.map(e=>dD(e)).join(",");{let e=n.filters.map(t=>dD(t)).join(",");return`${n.op}(${e})`}}function H2(n,e){return n instanceof xt?(function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&ns(r.value,i.value)})(n,e):n instanceof xr?(function(r,i){return i instanceof xr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&H2(o,i.filters[a]),!0):!1})(n,e):void fe(19439)}function q2(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${od(t.value)}`})(n):n instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(q2).join(" ,")+"}"})(n):"Filter"}var hD=class extends xt{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){let t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}},fD=class extends xt{constructor(e,t){super(e,"in",t),this.keys=z2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pD=class extends xt{constructor(e,t){super(e,"not-in",t),this.keys=z2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function z2(n,e){return(e.arrayValue?.values||[]).map(t=>ce.fromName(t.referenceValue))}var mD=class extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return OA(t)&&gp(t.arrayValue,this.value)}},gD=class extends xt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gp(this.value.arrayValue,t)}},yD=class extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gp(this.value.arrayValue,t)}},_D=class extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!OA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gp(this.value.arrayValue,r))}};var vD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function UV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new vD(n,e,t,r,i,s,o)}function FA(n){let e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),dE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>od(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>od(r)).join(",")),e.Te=t}return e.Te}function LA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!H2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VV(n.startAt,e.startAt)&&VV(n.endAt,e.endAt)}function ED(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var nu=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function wJ(n,e,t,r,i,s,o,a){return new nu(n,e,t,r,i,s,o,a)}function pE(n){return new nu(n)}function jV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TJ(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function VA(n){return n.collectionGroup!==null}function td(n){let e=Ce(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new cn(Kn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new tu(s,r))}),t.has(Kn.keyField().canonicalString())||e.Ie.push(new tu(Kn.keyField(),r))}return e.Ie}function Ji(n){let e=Ce(n);return e.Ee||(e.Ee=bJ(e,td(n))),e.Ee}function bJ(n,e){if(n.limitType==="F")return UV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new tu(i.field,s)});let t=n.endAt?new eu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new eu(n.startAt.position,n.startAt.inclusive):null;return UV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mE(n,e){let t=n.filters.concat([e]);return new nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bv(n,e,t){return new nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gE(n,e){return LA(Ji(n),Ji(e))&&n.limitType===e.limitType}function G2(n){return`${FA(Ji(n))}|lt:${n.limitType}`}function Jl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>q2(i)).join(", ")}]`),dE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>od(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>od(i)).join(",")),`Target(${r})`})(Ji(n))}; limitType=${n.limitType})`}function yE(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of td(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=LV(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,td(r),i)||r.endAt&&!(function(o,a,c){let d=LV(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,td(r),i))})(n,e)}function CJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function W2(n){return(e,t)=>{let r=!1;for(let i of td(n)){let s=SJ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function SJ(n,e,t){let r=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?sd(c,d):fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:n.dir})}}var ro=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return N2(this.inner)}size(){return this.innerSize}};var DJ=new At(ce.comparator);function io(){return DJ}var K2=new At(ce.comparator);function cp(...n){let e=K2;for(let t of n)e=e.insert(t.key,t);return e}function Q2(n){let e=K2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qc(){return lp()}function Y2(){return lp()}function lp(){return new ro(n=>n.toString(),(n,e)=>n.isEqual(e))}var AJ=new At(ce.comparator),RJ=new cn(ce.comparator);function Me(...n){let e=RJ;for(let t of n)e=e.add(t);return e}var PJ=new cn(Oe);function NJ(){return PJ}function UA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fp(e)?"-0":e}}function J2(n){return{integerValue:""+n}}function kJ(n,e){return oJ(e)?J2(e):UA(n,e)}var ad=class{constructor(){this._=void 0}};function MJ(n,e,t){return n instanceof cd?(function(i,s){let o={fields:{[M2]:{stringValue:k2},[O2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hE(s)&&(s=fE(s)),s&&(o.fields[x2]=s),{mapValue:o}})(t,e):n instanceof ru?Z2(n,e):n instanceof iu?eU(n,e):(function(i,s){let o=X2(i,s),a=BV(o)+BV(i.Ae);return lD(o)&&lD(i.Ae)?J2(a):UA(i.serializer,a)})(n,e)}function xJ(n,e,t){return n instanceof ru?Z2(n,e):n instanceof iu?eU(n,e):t}function X2(n,e){return n instanceof ud?(function(r){return lD(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var cd=class extends ad{},ru=class extends ad{constructor(e){super(),this.elements=e}};function Z2(n,e){let t=tU(e);for(let r of n.elements)t.some(i=>ns(i,r))||t.push(r);return{arrayValue:{values:t}}}var iu=class extends ad{constructor(e){super(),this.elements=e}};function eU(n,e){let t=tU(e);for(let r of n.elements)t=t.filter(i=>!ns(i,r));return{arrayValue:{values:t}}}var ud=class extends ad{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function BV(n){return It(n.integerValue||n.doubleValue)}function tU(n){return OA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function OJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ru&&i instanceof ru||r instanceof iu&&i instanceof iu?rd(r.elements,i.elements,ns):r instanceof ud&&i instanceof ud?ns(r.Ae,i.Ae):r instanceof cd&&i instanceof cd})(n.transform,e.transform)}var ID=class{constructor(e,t){this.version=e,this.transformResults=t}},Xi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Rv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ld=class{};function nU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dd(n.key,Xi.none()):new su(n.key,n.data,Xi.none());{let t=n.data,r=Wn.empty(),i=new cn(Kn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rs(n.key,r,new Mr(i.toArray()),Xi.none())}}function FJ(n,e,t){n instanceof su?(function(i,s,o){let a=i.value.clone(),c=HV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof rs?(function(i,s,o){if(!Rv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=HV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(rU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function dp(n,e,t,r){return n instanceof su?(function(s,o,a,c){if(!Rv(s.precondition,o))return a;let d=s.value.clone(),h=qV(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof rs?(function(s,o,a,c){if(!Rv(s.precondition,o))return a;let d=qV(s.fieldTransforms,c,o),h=o.data;return h.setAll(rU(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(s,o,a){return Rv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function LJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=X2(r.transform,i||null);s!=null&&(t===null&&(t=Wn.empty()),t.set(r.field,s))}return t||null}function $V(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rd(r,i,(s,o)=>OJ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var su=class extends ld{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rs=class extends ld{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function rU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function HV(n,e,t){let r=new Map;rt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xJ(o,a,t[i]))}return r}function qV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,MJ(s,o,e))}return r}var dd=class extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wD=class extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var TD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&FJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=dp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=dp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Y2();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=nU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&rd(this.mutations,e.mutations,(t,r)=>$V(t,r))&&rd(this.baseMutations,e.baseMutations,(t,r)=>$V(t,r))}},bD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return AJ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var CD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var SD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var zt,Ve;function VJ(n){switch(n){case H.OK:return fe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return fe(15467,{code:n})}}function iU(n){if(n===void 0)return eo("GRPC error has no .code"),H.UNKNOWN;switch(n){case zt.OK:return H.OK;case zt.CANCELLED:return H.CANCELLED;case zt.UNKNOWN:return H.UNKNOWN;case zt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case zt.INTERNAL:return H.INTERNAL;case zt.UNAVAILABLE:return H.UNAVAILABLE;case zt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case zt.NOT_FOUND:return H.NOT_FOUND;case zt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case zt.ABORTED:return H.ABORTED;case zt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case zt.DATA_LOSS:return H.DATA_LOSS;default:return fe(39323,{code:n})}}(Ve=zt||(zt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";var UJ=null;function jJ(){return new TextEncoder}var BJ=new Qs([4294967295,4294967295],0);function zV(n){let e=jJ().encode(n),t=new GS;return t.update(e),new Uint8Array(t.digest())}function GV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qs([t,r],0),new Qs([i,s],0)]}var DD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yc(`Invalid padding: ${t}`);if(r<0)throw new Yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Qs.fromNumber(r)));return i.compare(BJ)===1&&(i=new Qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=zV(e),[r,i]=GV(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=zV(e),[r,i]=GV(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.be(o)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Yc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $v=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,yp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new At(Oe),io(),Me())}},yp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Me(),Me(),Me())}};var nd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},Hv=class{constructor(e,t){this.targetId=e,this.Ce=t}},qv=class{constructor(e,t,r=In.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},zv=class{constructor(){this.ve=0,this.Fe=WV(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),r=Me();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new yp(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=WV()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},AD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=io(),this.He=Cv(),this.Je=Cv(),this.Ze=new At(Oe)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(ED(s))if(r===0){let o=new ce(s.path);this.et(t,o,hi.newNoDocument(o,De.min()))}else rt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}UJ?.lt((function(h,m,v,C,R){let P={localCacheCount:h,existenceFilterCount:m.count,databaseId:v.database,projectId:v.projectId},k=m.unchangedNames;return k&&(P.bloomFilter={applied:R===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:B=>C?.mightContain(B)??!1}),P})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=no(r).toUint8Array()}catch(c){if(c instanceof Vv)return _a("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new DD(o,i,s)}catch(c){return _a(c instanceof Yc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&ED(a.target)){let c=new ce(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,hi.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.Ke())}});let r=Me();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new $v(e,t,this.Ze,this.je,r);return this.je=io(),this.He=Cv(),this.Je=Cv(),this.Ze=new At(Oe),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zv,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new cn(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new cn(Oe),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Cv(){return new At(ce.comparator)}function WV(){return new At(ce.comparator)}var $J={asc:"ASCENDING",desc:"DESCENDING"},HJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qJ={and:"AND",or:"OR"},RD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function PD(n,e){return n.useProto3Json||dE(e)?e:{value:e}}function Gv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zJ(n,e){return Gv(n,e.toTimestamp())}function Zi(n){return rt(!!n,49232),De.fromTimestamp((function(t){let r=to(t);return new Ft(r.seconds,r.nanos)})(n))}function jA(n,e){return ND(n,e).canonicalString()}function ND(n,e){let t=(function(i){return new vt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oU(n){let e=vt.fromString(n);return rt(dU(e),10190,{key:e.toString()}),e}function kD(n,e){return jA(n.databaseId,e.path)}function ZS(n,e){let t=oU(e);if(t.get(1)!==n.databaseId.projectId)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(cU(t))}function aU(n,e){return jA(n.databaseId,e)}function GJ(n){let e=oU(n);return e.length===4?vt.emptyPath():cU(e)}function MD(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cU(n){return rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KV(n,e,t){return{name:kD(n,e),fields:t.value.mapValue.fields}}function WJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(rt(h===void 0||typeof h=="string",58123),In.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),In.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?H.UNKNOWN:iU(d.code);return new X(h,d.message||"")})(o);t=new qv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ZS(n,r.document.name),s=Zi(r.document.updateTime),o=r.document.createTime?Zi(r.document.createTime):De.min(),a=new Wn({mapValue:{fields:r.document.fields}}),c=hi.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new nd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ZS(n,r.document),s=r.readTime?Zi(r.readTime):De.min(),o=hi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new nd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ZS(n,r.document),s=r.removedTargetIds||[];t=new nd([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new SD(i,s),a=r.targetId;t=new Hv(a,o)}}return t}function KJ(n,e){let t;if(e instanceof su)t={update:KV(n,e.key,e.value)};else if(e instanceof dd)t={delete:kD(n,e.key)};else if(e instanceof rs)t={update:KV(n,e.key,e.data),updateMask:rX(e.fieldMask)};else{if(!(e instanceof wD))return fe(16599,{dt:e.type});t={verify:kD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof cd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ru)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof iu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ud)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw fe(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:zJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)})(n,e.precondition)),t}function QJ(n,e){return n&&n.length>0?(rt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Zi(i.updateTime):Zi(s);return o.isEqual(De.min())&&(o=Zi(s)),new ID(o,i.transformResults||[])})(t,e))):[]}function YJ(n,e){return{documents:[aU(n,e.path)]}}function JJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aU(n,i);let s=(function(d){if(d.length!==0)return lU(xr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(v){return{field:Xl(v.field),direction:eX(v.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=PD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function XJ(n){let e=GJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){rt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(m){let v=uU(m);return v instanceof xr&&$2(v)?v.getFilters():[v]})(t.where));let o=[];t.orderBy&&(o=(function(m){return m.map(v=>(function(R){return new tu(Zl(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(v))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let v;return v=typeof m=="object"?m.value:m,dE(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(m){let v=!!m.before,C=m.values||[];return new eu(C,v)})(t.startAt));let d=null;return t.endAt&&(d=(function(m){let v=!m.before,C=m.values||[];return new eu(C,v)})(t.endAt)),wJ(e,i,o,s,a,"F",c,d)}function ZJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uU(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zl(t.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zl(t.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Zl(t.unaryFilter.field);return xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Zl(t.unaryFilter.field);return xt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(Zl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map(r=>uU(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(t.compositeFilter.op))})(n):fe(30097,{filter:n})}function eX(n){return $J[n]}function tX(n){return HJ[n]}function nX(n){return qJ[n]}function Xl(n){return{fieldPath:n.canonicalString()}}function Zl(n){return Kn.fromServerFormat(n.fieldPath)}function lU(n){return n instanceof xt?(function(t){if(t.op==="=="){if(FV(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NAN"}};if(OV(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FV(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NAN"}};if(OV(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(t.field),op:tX(t.op),value:t.value}}})(n):n instanceof xr?(function(t){let r=t.getFilters().map(i=>lU(i));return r.length===1?r[0]:{compositeFilter:{op:nX(t.op),filters:r}}})(n):fe(54877,{filter:n})}function rX(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function hU(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var _p=class n{constructor(e,t,r,i,s=De.min(),o=De.min(),a=In.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xD=class{constructor(e){this.yt=e}};function fU(n){let e=XJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bv(e,e.limit,"L"):e}var Wv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),fp(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=to(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(no(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?U2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):V2(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):fe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=id,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Wv.Wt=new Wv;var OD=class{constructor(){this.Sn=new FD}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Zc.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Zc.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},FD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cn(vt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cn(vt.comparator)).toArray()}};var YTe=new Uint8Array(0);var QV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pU=41943040,kr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(pU,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);var vp=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var YV="LruGarbageCollector",iX=1048576;function JV([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var LD=class{constructor(e){this.Pr=e,this.buffer=new cn(JV),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();JV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},VD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){te(YV,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yd(t)?te(YV,"Ignoring IndexedDB error during garbage collection: ",t):await gd(t)}await this.Ar(3e5)})}},UD=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(PA.ce);let r=new LD(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(QV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QV):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Yl()<=ke.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}};function sX(n,e){return new UD(n,e)}var jD=class{constructor(){this.changes=new ro(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var BD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $D=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&dp(r.mutation,i,Mr.empty(),Ft.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){let i=Qc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=cp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Qc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=io(),o=lp(),a=(function(){return lp()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof rs)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),dp(h.mutation,d,h.mutation.getFieldMask(),Ft.now())):o.set(d.key,Mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new BD(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=lp(),i=new At((o,a)=>o-a),s=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Mr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let m=(i.get(a.batchId)||Me()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,m=Y2();h.forEach(v=>{if(!s.has(v)){let C=nU(t.get(v),r.get(v));C!==null&&m.set(v,C),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return TJ(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(Qc()),a=hp,c=s;return o.next(d=>z.forEach(d,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(v=>{c=c.insert(h,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Me())).next(h=>({batchId:a,changes:Q2(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let i=cp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=cp();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,c=>{let d=(function(m,v){return new nu(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,hi.newInvalidDocument(h)))});let a=cp();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&dp(h.mutation,d,Mr.empty(),Ft.now()),yE(t,d)&&(a=a.insert(c,d))}),a})}};var HD=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zi(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:fU(i.bundledQuery),readTime:Zi(i.readTime)}})(t)),z.resolve()}};var qD=class{constructor(){this.overlays=new At(ce.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Qc();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=Qc(),s=t.length+1,o=new ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new At((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Qc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Qc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return z.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new CD(t,r));let s=this.Lr.get(t);s===void 0&&(s=Me(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}};var zD=class{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var Ep=class{constructor(){this.kr=new cn(Gt.Kr),this.qr=new cn(Gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new Gt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Gt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new ce(new vt([])),r=new Gt(t,e),i=new Gt(t,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new ce(new vt([])),r=new Gt(t,e),i=new Gt(t,e+1),s=Me();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Gt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Gt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ce.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||ce.comparator(e.key,t.key)}};var GD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new cn(Gt.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new TD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Jr=this.Jr.add(new Gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?NA:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Oe);return t.forEach(i=>{let s=new Gt(i,0),o=new Gt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ce.isDocumentKey(s)||(s=s.child(""));let o=new Gt(new ce(s),0),a=new cn(Oe);return this.Jr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),z.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,i=>{let s=new Gt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new Gt(t,0),i=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var WD=class{constructor(e){this.ti=e,this.docs=(function(){return new At(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():hi.newInvalidDocument(t))}getEntries(e,t){let r=io();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():hi.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=io(),o=t.path,a=new ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||rJ(nJ(h),r)<=0||(i.has(h.key)||yE(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){fe(9500)}ni(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KD(this)}getSize(e){return z.resolve(this.size)}},KD=class extends jD{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var QD=class{constructor(e){this.persistence=e,this.ri=new ro(t=>FA(t),LA),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new Ep,this.targetCount=0,this.oi=vp._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new vp(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}};var Kv=class{constructor(e,t){this._i={},this.overlays={},this.ai=new PA(0),this.ui=!1,this.ui=!0,this.ci=new zD,this.referenceDelegate=e(this),this.li=new QD(this),this.indexManager=new OD,this.remoteDocumentCache=(function(i){return new WD(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new xD(t),this.Pi=new HD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new GD(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);let i=new YD(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return z.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},YD=class extends aD{constructor(e){super(),this.currentSequenceNumber=e}},JD=class n{constructor(e){this.persistence=e,this.Ri=new Ep,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw fe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,r=>{let i=ce.fromPath(r);return this.mi(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Qv=class n{constructor(e,t){this.persistence=e,this.fi=new ro(r=>aJ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sX(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return z.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Dv(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var XD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Me(),i=Me();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var ZD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var eA=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return NF()?8:sJ(on())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.gs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ZD;return this.ys(e,t,o).next(a=>{if(s.result=a,this.As)return this.ws(e,t,o,a.size)})}).next(()=>s.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Yl()<=ke.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Yl()<=ke.DEBUG&&te("QueryEngine","Query:",Jl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Yl()<=ke.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(t))):z.resolve())}gs(e,t){if(jV(t))return z.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Bv(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Me(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ss(t,d,o,c.readTime)?this.gs(e,Bv(t,null,"F")):this.Ds(e,d,t,c)}))})))}ps(e,t,r,i){return jV(t)||i.isEqual(De.min())?z.resolve(null):this.fs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ss(t,o,r,i)?z.resolve(null):(Yl()<=ke.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jl(t)),this.Ds(e,o,t,tJ(i,hp)).next(a=>a))})}bs(e,t){let r=new cn(W2(e));return t.forEach((i,s)=>{yE(e,s)&&(r=r.add(s))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return Yl()<=ke.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Jl(t)),this.fs.getDocumentsMatchingQuery(e,t,Zc.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var BA="LocalStore",oX=3e8,tA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new At(Oe),this.Fs=new ro(s=>FA(s),LA),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $D(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function aX(n,e,t,r){return new tA(n,e,t,r)}async function mU(n,e){let t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Me();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function cX(n,e){let t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let m=d.batch,v=m.keys(),C=z.resolve();return v.forEach(R=>{C=C.next(()=>h.getEntry(c,R)).next(P=>{let k=d.docVersions.get(R);rt(k!==null,48541),P.version.compareTo(k)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),C.next(()=>a.mutationQueue.removeMutationBatch(c,m))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Me();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gU(n){let e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function uX(n,e){let t=Ce(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((h,m)=>{let v=i.get(m);if(!v)return;a.push(t.li.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.li.addMatchingKeys(s,h.addedDocuments,m)));let C=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(In.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(m,C),(function(P,k,B){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=oX?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(v,C,h)&&a.push(t.li.updateTargetData(s,C))});let c=io(),d=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(lX(s,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(De.min())){let h=t.li.getLastRemoteSnapshotVersion(s).next(m=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.vs=i,s))}function lX(n,e,t){let r=Me(),i=Me();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=io();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):te(BA,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function dX(n,e){let t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=NA),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hX(n,e){let t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):t.li.allocateTargetId(r).next(o=>(i=new _p(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function nA(n,e,t){let r=Ce(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!yd(o))throw o;te(BA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function XV(n,e,t){let r=Ce(n),i=De.min(),s=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let m=Ce(c),v=m.Fs.get(h);return v!==void 0?z.resolve(m.vs.get(v)):m.li.getTargetData(d,h)})(r,o,Ji(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:Me())).next(a=>(fX(r,CJ(e),a),{documents:a,ks:s})))}function fX(n,e,t){let r=n.Ms.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ms.set(e,r)}var Yv=class{constructor(){this.activeTargetIds=NJ()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rA=class{constructor(){this.vo=new Yv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Yv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iA=class{Mo(e){}shutdown(){}};var ZV="ConnectivityMonitor",Jv=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){te(ZV,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){te(ZV,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sv=null;function sA(){return Sv===null?Sv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sv++,"0x"+Sv.toString(16)}var eD="RestConnection",pX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},oA=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Uv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=sA(),a=this.Qo(e,t.toUriEncodedString());te(eD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,s);let{host:d}=new URL(a),h=aa(d);return this.zo(e,a,c,r,h).then(m=>(te(eD,`Received RPC '${e}' ${o}: `,m),m),m=>{throw _a(eD,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",r),m})}jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,t){let r=pX[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var aA=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Nn="WebChannelConnection",ap=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},Xv=class n extends oA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=YS();ap(e,QS.STAT_EVENT,t=>{t.stat===Tv.PROXY?te(Nn,"STAT_EVENT: detected buffering proxy"):t.stat===Tv.NOPROXY&&te(Nn,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,s){let o=sA();return new Promise((a,c)=>{let d=new WS;d.setWithCredentials(!0),d.listenOnce(KS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case op.NO_ERROR:let m=d.getResponseJson();te(Nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case op.TIMEOUT:te(Nn,`RPC '${e}' ${o} timed out`),c(new X(H.DEADLINE_EXCEEDED,"Request time out"));break;case op.HTTP_ERROR:let v=d.getStatus();if(te(Nn,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let R=C?.error;if(R&&R.status&&R.message){let P=(function(B){let W=B.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(W)>=0?W:H.UNKNOWN})(R.status);c(new X(P,R.message))}else c(new X(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(H.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{te(Nn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);te(Nn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=sA(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let d=s.join("");te(Nn,`Creating RPC '${e}' stream ${i}: ${d}`,a);let h=o.createWebChannel(d,a);this.I_(h);let m=!1,v=!1,C=new aA({Ho:R=>{v?te(Nn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(te(Nn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),te(Nn,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},Jo:()=>h.close()});return ap(h,Ql.EventType.OPEN,()=>{v||(te(Nn,`RPC '${e}' stream ${i} transport opened.`),C.i_())}),ap(h,Ql.EventType.CLOSE,()=>{v||(v=!0,te(Nn,`RPC '${e}' stream ${i} transport closed`),C.o_(),this.E_(h))}),ap(h,Ql.EventType.ERROR,R=>{v||(v=!0,_a(Nn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.o_(new X(H.UNAVAILABLE,"The operation could not be completed")))}),ap(h,Ql.EventType.MESSAGE,R=>{if(!v){let P=R.data[0];rt(!!P,16349);let k=P,B=k?.error||k[0]?.error;if(B){te(Nn,`RPC '${e}' stream ${i} received error:`,B);let W=B.status,Q=(function(me){let w=zt[me];if(w!==void 0)return iU(w)})(W),oe=B.message;Q===void 0&&(Q=H.INTERNAL,oe="Unknown error status: "+W+" with message "+B.message),v=!0,C.o_(new X(Q,oe)),h.close()}else te(Nn,`RPC '${e}' stream ${i} received:`,P),C.__(P)}}),n.u_(),setTimeout(()=>{C.s_()},0),C}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return JS()}};function mX(n){return new Xv(n)}function tD(){return typeof document<"u"?document:null}function Cp(n){return new RD(n,!0)}Xv.c_=!1;var Zv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var e2="PersistentStream",eE=class{constructor(e,t,r,i,s,o,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(eo(t.toString()),eo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new X(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return te(e2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(te(e2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cA=class extends eE{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=WJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Zi(o.readTime):De.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=MD(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=ED(c)?{documents:YJ(s,c)}:{query:JJ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sU(s,o.resumeToken);let d=PD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Gv(s,o.snapshotVersion.toTimestamp());let d=PD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=ZJ(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=MD(this.serializer),t.removeTarget=e,this.K_(t)}},uA=class extends eE{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=QJ(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=MD(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>KJ(this.serializer,r))};this.K_(t)}};var lA=class{},dA=class extends lA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,ND(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(H.UNKNOWN,s.toString())})}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,ND(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function gX(n,e,t,r){return new dA(n,e,t,r)}var hA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(eo(t),this.aa=!1):te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ou="RemoteStore",fA=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{lu(this)&&(te(ou,"Restarting streams for network reachability change."),await(async function(c){let d=Ce(c);d.Ea.add(4),await Sp(d),d.Va.set("Unknown"),d.Ea.delete(4),await _E(d)})(this))})}),this.Va=new hA(r,i)}};async function _E(n){if(lu(n))for(let e of n.Ra)await e(!0)}async function Sp(n){for(let e of n.Ra)await e(!1)}function yU(n,e){let t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zA(t)?qA(t):_d(t).O_()&&HA(t,e))}function $A(n,e){let t=Ce(n),r=_d(t);t.Ia.delete(e),r.O_()&&_U(t,e),t.Ia.size===0&&(r.O_()?r.L_():lu(t)&&t.Va.set("Unknown"))}function HA(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_d(n).Z_(e)}function _U(n,e){n.da.$e(e),_d(n).X_(e)}function qA(n){n.da=new AD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_d(n).start(),n.Va.ua()}function zA(n){return lu(n)&&!_d(n).x_()&&n.Ia.size>0}function lu(n){return Ce(n).Ea.size===0}function vU(n){n.da=void 0}async function yX(n){n.Va.set("Online")}async function _X(n){n.Ia.forEach((e,t)=>{HA(n,e)})}async function vX(n,e){vU(n),zA(n)?(n.Va.ha(e),qA(n)):n.Va.set("Unknown")}async function EX(n,e,t){if(n.Va.set("Online"),e instanceof qv&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){te(ou,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tE(n,r)}else if(e instanceof nd?n.da.Xe(e):e instanceof Hv?n.da.st(e):n.da.tt(e),!t.isEqual(De.min()))try{let r=await gU(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.da.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(In.EMPTY_BYTE_STRING,h.snapshotVersion)),_U(s,c);let m=new _p(h.target,c,d,h.sequenceNumber);HA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){te(ou,"Failed to raise snapshot:",r),await tE(n,r)}}async function tE(n,e,t){if(!yd(e))throw e;n.Ea.add(1),await Sp(n),n.Va.set("Offline"),t||(t=()=>gU(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{te(ou,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _E(n)})}function EU(n,e){return e().catch(t=>tE(n,t,e))}async function vE(n){let e=Ce(n),t=Ea(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:NA;for(;IX(e);)try{let i=await dX(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,wX(e,i)}catch(i){await tE(e,i)}IU(e)&&wU(e)}function IX(n){return lu(n)&&n.Ta.length<10}function wX(n,e){n.Ta.push(e);let t=Ea(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function IU(n){return lu(n)&&!Ea(n).x_()&&n.Ta.length>0}function wU(n){Ea(n).start()}async function TX(n){Ea(n).ra()}async function bX(n){let e=Ea(n);for(let t of n.Ta)e.ea(t.mutations)}async function CX(n,e,t){let r=n.Ta.shift(),i=bD.from(r,e,t);await EU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await vE(n)}async function SX(n,e){e&&Ea(n).Y_&&await(async function(r,i){if((function(o){return VJ(o)&&o!==H.ABORTED})(i.code)){let s=r.Ta.shift();Ea(r).B_(),await EU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vE(r)}})(n,e),IU(n)&&wU(n)}async function t2(n,e){let t=Ce(n);t.asyncQueue.verifyOperationInProgress(),te(ou,"RemoteStore received new credentials");let r=lu(t);t.Ea.add(3),await Sp(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _E(t)}async function DX(n,e){let t=Ce(n);e?(t.Ea.delete(2),await _E(t)):e||(t.Ea.add(2),await Sp(t),t.Va.set("Unknown"))}function _d(n){return n.ma||(n.ma=(function(t,r,i){let s=Ce(t);return s.sa(),new cA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:yX.bind(null,n),Yo:_X.bind(null,n),t_:vX.bind(null,n),J_:EX.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),zA(n)?qA(n):n.Va.set("Unknown")):(await n.ma.stop(),vU(n))})),n.ma}function Ea(n){return n.fa||(n.fa=(function(t,r,i){let s=Ce(t);return s.sa(),new uA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:TX.bind(null,n),t_:SX.bind(null,n),ta:bX.bind(null,n),na:CX.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await vE(n)):(await n.fa.stop(),n.Ta.length>0&&(te(ou,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var pA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function GA(n,e){if(eo("AsyncQueue",`${e}: ${n}`),yd(n))return new X(H.UNAVAILABLE,`${e}: ${n}`);throw n}var Ip=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=cp(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var nE=class{constructor(){this.ga=new At(ce.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):fe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},au=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ip.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var mA=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},gA=class{constructor(){this.queries=n2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ce(t),s=i.queries;i.queries=n2(),s.forEach((o,a)=>{for(let c of a.ba)c.onError(r)})})(this,new X(H.ABORTED,"Firestore shutting down"))}};function n2(){return new ro(n=>G2(n),gE)}async function AX(n,e){let t=Ce(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new mA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=GA(o,`Initialization of query '${Jl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&WA(t)}async function RX(n,e){let t=Ce(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function PX(n,e){let t=Ce(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&WA(t)}function NX(n,e,t){let r=Ce(n),i=r.queries.get(e);if(i)for(let s of i.ba)s.onError(t);r.queries.delete(e)}function WA(n){n.Ca.forEach(e=>{e.next()})}var yA,r2;(r2=yA||(yA={})).Ma="default",r2.Cache="cache";var _A=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new au(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yA.Cache}};var rE=class{constructor(e){this.key=e}},iE=class{constructor(e){this.key=e}},vA=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.eu=W2(e),this.tu=new Ip(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new nE,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{let v=i.get(h),C=yE(this.query,m)?m:null,R=!!v&&this.mutatedKeys.has(v.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),k=!1;v&&C?v.data.isEqual(C.data)?R!==P&&(r.track({type:3,doc:C}),k=!0):this.su(v,C)||(r.track({type:2,doc:C}),k=!0,(c&&this.eu(C,c)>0||d&&this.eu(C,d)<0)&&(a=!0)):!v&&C?(r.track({type:0,doc:C}),k=!0):v&&!C&&(r.track({type:1,doc:v}),k=!0,(c||d)&&(a=!0)),k&&(C?(o=o.add(C),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,m)=>(function(C,R){let P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Vt:k})}};return P(C)-P(R)})(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new au(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new iE(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new rE(r))}),t}cu(e){this.Za=e.ks,this.Ya=Me();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},KA="SyncEngine",EA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},IA=class{constructor(e){this.key=e,this.hu=!1}},wA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ro(a=>G2(a),gE),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(ce.comparator),this.Au=new Map,this.Vu=new Ep,this.du={},this.mu=new Map,this.fu=vp.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function kX(n,e,t=!0){let r=AU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await TU(r,e,t,!0),i}async function MX(n,e){let t=AU(n);await TU(t,e,!0,!1)}async function TU(n,e,t,r){let i=await hX(n.localStore,Ji(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await xX(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&yU(n.remoteStore,i),a}async function xX(n,e,t,r,i){n.pu=(m,v,C)=>(async function(P,k,B,W){let Q=k.view.ru(B);Q.Ss&&(Q=await XV(P.localStore,k.query,!1).then(({documents:w})=>k.view.ru(w,Q)));let oe=W&&W.targetChanges.get(k.targetId),ze=W&&W.targetMismatches.get(k.targetId)!=null,me=k.view.applyChanges(Q,P.isPrimaryClient,oe,ze);return s2(P,k.targetId,me.au),me.snapshot})(n,m,v,C);let s=await XV(n.localStore,e,!0),o=new vA(e,s.ks),a=o.ru(s.documents),c=yp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);s2(n,t,d.au);let h=new EA(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function OX(n,e,t){let r=Ce(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!gE(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$A(r.remoteStore,i.targetId),TA(r,i.targetId)}).catch(gd)):(TA(r,i.targetId),await nA(r.localStore,i.targetId,!0))}async function FX(n,e){let t=Ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$A(t.remoteStore,r.targetId))}async function LX(n,e,t){let r=qX(n);try{let i=await(function(o,a){let c=Ce(o),d=Ft.now(),h=a.reduce((C,R)=>C.add(R.key),Me()),m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=io(),P=Me();return c.xs.getEntries(C,h).next(k=>{R=k,R.forEach((B,W)=>{W.isValidDocument()||(P=P.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,R)).next(k=>{m=k;let B=[];for(let W of a){let Q=LJ(W,m.get(W.key).overlayedDocument);Q!=null&&B.push(new rs(W.key,Q,j2(Q.value.mapValue),Xi.exists(!0)))}return c.mutationQueue.addMutationBatch(C,d,B,a)}).next(k=>{v=k;let B=k.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(C,k.batchId,B)})}).then(()=>({batchId:v.batchId,changes:Q2(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.du[o.currentUser.toKey()];d||(d=new At(Oe)),d=d.insert(a,c),o.du[o.currentUser.toKey()]=d})(r,i.batchId,t),await Dp(r,i.changes),await vE(r.remoteStore)}catch(i){let s=GA(i,"Failed to persist write");t.reject(s)}}async function bU(n,e){let t=Ce(n);try{let r=await uX(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?rt(o.hu,14607):i.removedDocuments.size>0&&(rt(o.hu,42227),o.hu=!1))}),await Dp(t,r,e)}catch(r){await gd(r)}}function i2(n,e,t){let r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ce(o);c.onlineState=a;let d=!1;c.queries.forEach((h,m)=>{for(let v of m.ba)v.va(a)&&(d=!0)}),d&&WA(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VX(n,e,t){let r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new At(ce.comparator);o=o.insert(s,hi.newNoDocument(s,De.min()));let a=Me().add(s),c=new $v(De.min(),new Map,new At(Oe),o,a);await bU(r,c),r.Ru=r.Ru.remove(s),r.Au.delete(e),QA(r)}else await nA(r.localStore,e,!1).then(()=>TA(r,e,t)).catch(gd)}async function UX(n,e){let t=Ce(n),r=e.batch.batchId;try{let i=await cX(t.localStore,e);SU(t,r,null),CU(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Dp(t,i)}catch(i){await gd(i)}}async function jX(n,e,t){let r=Ce(n);try{let i=await(function(o,a){let c=Ce(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(rt(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);SU(r,e,t),CU(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Dp(r,i)}catch(i){await gd(i)}}function CU(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function SU(n,e,t){let r=Ce(n),i=r.du[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function TA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||DU(n,r)})}function DU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&($A(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),QA(n))}function s2(n,e,t){for(let r of t)r instanceof rE?(n.Vu.addReference(r.key,e),BX(n,r)):r instanceof iE?(te(KA,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||DU(n,r.key)):fe(19791,{wu:r})}function BX(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(te(KA,"New document in limbo: "+t),n.Eu.add(r),QA(n))}function QA(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ce(vt.fromString(e)),r=n.fu.next();n.Au.set(r,new IA(t)),n.Ru=n.Ru.insert(t,r),yU(n.remoteStore,new _p(Ji(pE(t.path)),r,"TargetPurposeLimboResolution",PA.ce))}}async function Dp(n,e,t){let r=Ce(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=XD.Es(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.J_(i),await(async function(c,d){let h=Ce(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(d,v=>z.forEach(v.Ts,C=>h.persistence.referenceDelegate.addReference(m,v.targetId,C)).next(()=>z.forEach(v.Is,C=>h.persistence.referenceDelegate.removeReference(m,v.targetId,C)))))}catch(m){if(!yd(m))throw m;te(BA,"Failed to update sequence numbers: "+m)}for(let m of d){let v=m.targetId;if(!m.fromCache){let C=h.vs.get(v),R=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(R);h.vs=h.vs.insert(v,P)}}})(r.localStore,s))}async function $X(n,e){let t=Ce(n);if(!t.currentUser.isEqual(e)){te(KA,"User change. New user:",e.toKey());let r=await mU(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new X(H.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dp(t,r.Ns)}}function HX(n,e){let t=Ce(n),r=t.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let i=Me(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function AU(n){let e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VX.bind(null,e),e.Pu.J_=PX.bind(null,e.eventManager),e.Pu.yu=NX.bind(null,e.eventManager),e}function qX(n){let e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jX.bind(null,e),e}var YA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Cp(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return aX(this.persistence,new eA,t.initialUser,this.serializer)}Cu(t){return new Kv(JD.Vi,this.serializer)}Du(t){return new rA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),sE=class extends YA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rt(this.persistence.referenceDelegate instanceof Qv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new VD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new Kv(r=>Qv.Vi(r,t),this.serializer)}};var RU=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>i2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$X.bind(null,this.syncEngine),await DX(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new gA})()}createDatastore(t){let r=Cp(t.databaseInfo.databaseId),i=mX(t.databaseInfo);return gX(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new fA(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>i2(this.syncEngine,r,0),(function(){return Jv.v()?new Jv:new iA})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,m){let v=new wA(s,o,a,c,d,h);return m&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ce(r);te(ou,"RemoteStore shutting down."),i.Ea.add(5),await Sp(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var bA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):eo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ia="FirestoreClient",CA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=Xc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te(Ia,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te(Ia,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=GA(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function nD(n,e){n.asyncQueue.verifyOperationInProgress(),te(Ia,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function o2(n,e){n.asyncQueue.verifyOperationInProgress();let t=await zX(n);te(Ia,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>t2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>t2(e.remoteStore,i)),n._onlineComponents=e}async function zX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te(Ia,"Using user provided OfflineComponentProvider");try{await nD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;_a("Error using user provided cache. Falling back to memory cache: "+t),await nD(n,new YA)}}else te(Ia,"Using default OfflineComponentProvider"),await nD(n,new sE(void 0));return n._offlineComponents}async function PU(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(te(Ia,"Using user provided OnlineComponentProvider"),await o2(n,n._uninitializedComponentsProvider._online)):(te(Ia,"Using default OnlineComponentProvider"),await o2(n,new RU))),n._onlineComponents}function GX(n){return PU(n).then(e=>e.syncEngine)}async function a2(n){let e=await PU(n),t=e.eventManager;return t.onListen=kX.bind(null,e.syncEngine),t.onUnlisten=OX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FX.bind(null,e.syncEngine),t}function NU(n,e,t,r){let i=new bA(r),s=new _A(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>AX(await a2(n),s)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>RX(await a2(n),s))}}function kU(n,e){let t=new Js;return n.asyncQueue.enqueueAndForget(async()=>LX(await GX(n),e,t)),t.promise}function MU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var WX="ComponentProvider",c2=new Map;function KX(n,e,t,r,i){return new cD(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,MU(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var xU="firestore.googleapis.com",u2=!0,oE=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xU,this.ssl=u2}else this.host=e.host,this.ssl=e.ssl??u2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iX)throw new X(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},hd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Nv;switch(r.type){case"firstParty":return new sD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=c2.get(t);r&&(te(WX,"Removing Datastore"),c2.delete(t),r.terminate())})(this),Promise.resolve()}};function OU(n,e,t,r={}){n=ss(n,hd);let i=aa(e),s=n._getSettings(),o=ae(U({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(M_(`https://${a}`),x_("Firestore",!0)),s.host!==xU&&s.host!==a&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=ae(U({},s),{host:a,ssl:i,emulatorOptions:r});if(!ui(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=an.MOCK_USER;else{d=CF(r.mockUserToken,n._app?.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new X(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new an(m)}n._authCredentials=new rD(new Pv(d,h))}}var wa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(md(t,n._jsonSchema))return new n(e,r||null,new ce(vt.fromString(t.referencePath)))}};Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Ot("string",Zt._jsonSchemaVersion),referencePath:Ot("string")};var Xs=class n extends wa{constructor(e,t,r){super(e,t,pE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function os(n,e,...t){if(n=Mt(n),p2("collection","path",e),n instanceof hd){let r=vt.fromString(e,...t);return AV(r),new Xs(n,null,r)}{if(!(n instanceof Zt||n instanceof Xs))throw new X(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vt.fromString(e,...t));return AV(r),new Xs(n.firestore,null,r)}}function as(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Xc.newId()),p2("doc","path",e),n instanceof hd){let r=vt.fromString(e,...t);return DV(r),new Zt(n,null,new ce(r))}{if(!(n instanceof Zt||n instanceof Xs))throw new X(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vt.fromString(e,...t));return DV(r),new Zt(n.firestore,n instanceof Xs?n.converter:null,new ce(r))}}var l2="AsyncQueue",aE=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zv(this,"async_queue_retry"),this._c=()=>{let r=tD();r&&te(l2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=tD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=tD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Js;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!yd(e))throw e;te(l2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,eo("INTERNAL UNHANDLED ERROR: ",d2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=pA.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&fe(47125,{Pc:d2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function d2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var is=class extends hd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new aE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new aE(e),this._firestoreClient=void 0,await e}}};function du(n,e){let t=typeof n=="object"?n:Nr(),r=typeof n=="string"?n:e||Uv,i=qf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=bF("firestore");s&&OU(i,...s)}return i}function EE(n){if(n._terminated)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QX(n),n._firestoreClient}function QX(n){let e=n._freezeSettings(),t=KX(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new CA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var es=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(In.fromBase64String(e))}catch(t){throw new X(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(md(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:Ot("string",es._jsonSchemaVersion),bytes:Ot("string")};var cu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fd=class{constructor(e){this._methodName=e}};var Zs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(md(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Zs._jsonSchemaVersion="firestore/geoPoint/1.0",Zs._jsonSchema={type:Ot("string",Zs._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};var ts=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(md(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new X(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:Ot("string",ts._jsonSchemaVersion),vectorValues:Ot("object")};var YX=/^__.*__$/,SA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}},cE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rs(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function FU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{dataSource:n})}}var DA=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(U(U({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return lE(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(FU(this.dataSource)&&YX.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},AA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cp(e)}createContext(e,t,r,i=!1){return new DA({dataSource:e,methodName:t,targetDoc:r,path:Kn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function IE(n){let e=n._freezeSettings(),t=Cp(n._databaseId);return new AA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LU(n,e,t,r,i,s={}){let o=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);JA("Data must be an object, but it was:",o,r);let a=BU(r,o),c,d;if(s.merge)c=new Mr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let m of s.mergeFields){let v=uu(e,m,t);if(!o.contains(v))throw new X(H.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);HU(h,v)||h.push(v)}c=new Mr(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new SA(new Wn(a),c,d)}var uE=class n extends fd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function VU(n,e,t,r){let i=n.createContext(1,e,t);JA("Data must be an object, but it was:",i,r);let s=[],o=Wn.empty();Ta(r,(c,d)=>{let h=XA(e,c,t);d=Mt(d);let m=i.childContextForFieldPath(h);if(d instanceof uE)s.push(h);else{let v=Ap(d,m);v!=null&&(s.push(h),o.set(h,v))}});let a=new Mr(s);return new cE(o,a,i.fieldTransforms)}function UU(n,e,t,r,i,s){let o=n.createContext(1,e,t),a=[uu(e,r,t)],c=[i];if(s.length%2!=0)throw new X(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(uu(e,s[v])),c.push(s[v+1]);let d=[],h=Wn.empty();for(let v=a.length-1;v>=0;--v)if(!HU(d,a[v])){let C=a[v],R=c[v];R=Mt(R);let P=o.childContextForFieldPath(C);if(R instanceof uE)d.push(C);else{let k=Ap(R,P);k!=null&&(d.push(C),h.set(C,k))}}let m=new Mr(d);return new cE(h,m,o.fieldTransforms)}function jU(n,e,t,r=!1){return Ap(t,n.createContext(r?4:3,e))}function Ap(n,e){if($U(n=Mt(n)))return JA("Unsupported field value:",e,n),BU(n,e);if(n instanceof fd)return(function(r,i){if(!FU(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Ap(a,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kJ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ft.fromDate(r);return{timestampValue:Gv(i.serializer,s)}}if(r instanceof Ft){let s=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gv(i.serializer,s)}}if(r instanceof Zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:sU(i.serializer,r._byteString)};if(r instanceof Zt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ts)return(function(o,a){let c=o instanceof ts?o.toArray():o;return{mapValue:{fields:{[kA]:{stringValue:MA},[id]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return UA(a.serializer,h)})}}}}}})(r,i);if(hU(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${bp(r)}`)})(n,e)}function BU(n,e){let t={};return N2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(n,(r,i)=>{let s=Ap(i,e.childContextForField(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function $U(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Zs||n instanceof es||n instanceof Zt||n instanceof fd||n instanceof ts||hU(n))}function JA(n,e,t){if(!$U(t)||!g2(t)){let r=bp(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function uu(n,e,t){if((e=Mt(e))instanceof cu)return e._internalPath;if(typeof e=="string")return XA(n,e);throw lE("Field path arguments must be of type string or ",n,!1,void 0,t)}var JX=new RegExp("[~\\*/\\[\\]]");function XA(n,e,t){if(e.search(JX)>=0)throw lE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cu(...e.split("."))._internalPath}catch{throw lE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lE(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new X(H.INVALID_ARGUMENT,a+n+c)}function HU(n,e){return n.some(t=>t.isEqual(e))}var wp=class{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ta(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[id].arrayValue?.values?.map(r=>It(r.doubleValue));return new ts(t)}convertGeoPoint(e){return new Zs(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=fE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pp(e));default:return null}}convertTimestamp(e){let t=to(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=vt.fromString(e);rt(dU(r),9688,{name:e});let i=new mp(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(t)||eo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Tp=class extends wp{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}};var qU="@firebase/firestore",zU="4.10.0";function GU(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var wE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ZA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(uu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ZA=class extends wE{data(){return super.data()}};function tZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rp=class{},eR=class extends Rp{};function QU(n,e,...t){let r=[];e instanceof Rp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof tR).length,a=s.filter(c=>c instanceof TE).length;if(o>1||o>0&&a>0)throw new X(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var TE=class n extends eR{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return JU(e._query,t),new wa(e.firestore,e.converter,mE(e._query,t))}_parse(e){let t=IE(e.firestore);return(function(s,o,a,c,d,h,m){let v;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){KU(m,h);let R=[];for(let P of m)R.push(WU(c,s,P));v={arrayValue:{values:R}}}else v=WU(c,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||KU(m,h),v=jU(a,o,m,h==="in"||h==="not-in");return xt.create(d,h,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function YU(n,e,t){let r=e,i=uu("where",n);return TE._create(i,r,t)}var tR=class n extends Rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)JU(o,c),o=mE(o,c)})(e._query,t),new wa(e.firestore,e.converter,mE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function WU(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new X(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VA(e)&&t.indexOf("/")!==-1)throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(vt.fromString(t));if(!ce.isDocumentKey(r))throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xA(n,new ce(r))}if(t instanceof Zt)return xA(n,t._key);throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bp(t)}.`)}function KU(n,e){if(!Array.isArray(n)||n.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JU(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function nZ(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var hu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fu=class n extends wE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(uu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};fu._jsonSchemaVersion="firestore/documentSnapshot/1.0",fu._jsonSchema={type:Ot("string",fu._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};var vd=class extends fu{data(e={}){return super.data(e)}},Ed=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vd(this._firestore,this._userDataWriter,r.key,r,new hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new vd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new vd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:rZ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function rZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:n})}}Ed._jsonSchemaVersion="firestore/querySnapshot/1.0",Ed._jsonSchema={type:Ot("string",Ed._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};function XU(n,e,t,...r){n=ss(n,Zt);let i=ss(n.firestore,is),s=IE(i),o;return o=typeof(e=Mt(e))=="string"||e instanceof cu?UU(s,"updateDoc",n._key,e,t,r):VU(s,"updateDoc",n._key,e),nR(i,[o.toMutation(n._key,Xi.exists(!0))])}function Id(n){return nR(ss(n.firestore,is),[new dd(n._key,Xi.none())])}function wd(n,e){let t=ss(n.firestore,is),r=as(n),i=nZ(n.converter,e),s=IE(n.firestore);return nR(t,[LU(s,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Xi.exists(!1))]).then(()=>r)}function Td(n,...e){n=Mt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||GU(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(GU(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let s,o,a;if(n instanceof Zt)o=ss(n.firestore,is),a=pE(n._key.path),s={next:d=>{e[r]&&e[r](iZ(o,n,d))},error:e[r+1],complete:e[r+2]};else{let d=ss(n,wa);o=ss(d.firestore,is),a=d._query;let h=new Tp(o);s={next:m=>{e[r]&&e[r](new Ed(o,h,d,m))},error:e[r+1],complete:e[r+2]},tZ(n._query)}let c=EE(o);return NU(c,a,i,s)}function nR(n,e){let t=EE(n);return kU(t,e)}function iZ(n,e,t){let r=t.docs.get(e._key),i=new Tp(n);return new fu(n,i,e._key,r,new hu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){h2(da),la(new Pr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new is(new kv(r.getProvider("auth-internal")),new xv(o,r.getProvider("app-check-internal")),F2(o,i),o);return s=U({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),li(qU,zU,e),li(qU,zU,"esm2020")})();var ZU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ej={};var bE,tj;(function(){var n;function e(w,y){function I(){}I.prototype=y.prototype,w.D=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(T,b,A){for(var E=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)E[lt-2]=arguments[lt];return y.prototype[b].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,I){I||(I=0);var T=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)T[b]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],b=w.g[2];var A=w.g[3],E=y+(A^I&(b^A))+T[0]+3614090360&4294967295;y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[1]+3905402710&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(A^I&(b^A))+T[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[5]+1200080426&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(A^I&(b^A))+T[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[9]+2336552879&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(A^I&(b^A))+T[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=A+(b^y&(I^b))+T[13]+4254626195&4294967295,A=y+(E<<12&4294967295|E>>>20),E=b+(I^A&(y^I))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(y^b&(A^y))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(b^A&(I^b))+T[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[6]+3225465664&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^A&(I^b))+T[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[10]+38016083&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^A&(I^b))+T[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[14]+3275163606&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^A&(I^b))+T[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(y^I))+T[2]+4243563512&4294967295,A=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(A^y))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^y&(b^A))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(I^b^A)+T[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[8]+2272392833&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^A)+T[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[4]+1272893353&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^A)+T[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[0]+3936430074&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^A)+T[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=A+(y^I^b)+T[12]+3873151461&4294967295,A=y+(E<<11&4294967295|E>>>21),E=b+(A^y^I)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^y)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(b^(I|~A))+T[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[7]+1126891415&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~A))+T[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[3]+2399980690&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~A))+T[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[15]+4264355552&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~A))+T[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=A+(I^(y|~b))+T[11]+3174756917&4294967295,A=y+(E<<10&4294967295|E>>>22),E=b+(y^(A|~I))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var I=y-this.blockSize,T=this.B,b=this.h,A=0;A<y;){if(b==0)for(;A<=I;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<y;)if(T[b++]=w.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<y;)if(T[b++]=w[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var I=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=I&255,I/=256;for(this.u(w),w=Array(16),y=I=0;4>y;++y)for(var T=0;32>T;T+=8)w[I++]=this.g[y]>>>T&255;return w};function s(w,y){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function o(w,y){this.h=y;for(var I=[],T=!0,b=w.length-1;0<=b;b--){var A=w[b]|0;T&&A==y||(I[b]=A,T=!1)}this.g=I}var a={};function c(w){return-128<=w&&128>w?s(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return k(d(-w));for(var y=[],I=1,T=0;w>=I;T++)y[T]=w/I|0,I*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return k(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),T=m,b=0;b<w.length;b+=8){var A=Math.min(8,w.length-b),E=parseInt(w.substring(b,b+A),y);8>A?(A=d(Math.pow(y,A)),T=T.j(A).add(d(E))):(T=T.j(I),T=T.add(d(E)))}return T}var m=c(0),v=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-k(this).m();for(var w=0,y=1,I=0;I<this.g.length;I++){var T=this.i(I);w+=(0<=T?T:4294967296+T)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+k(this).toString(w);for(var y=d(Math.pow(w,6)),I=this,T="";;){var b=oe(I,y).g;I=B(I,b.j(y));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=b,R(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=B(this,w),P(w)?-1:R(w)?0:1};function k(w){for(var y=w.g.length,I=[],T=0;T<y;T++)I[T]=~w.g[T];return new o(I,~w.h).add(v)}n.abs=function(){return P(this)?k(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],T=0,b=0;b<=y;b++){var A=T+(this.i(b)&65535)+(w.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,I[b]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function B(w,y){return w.add(k(y))}n.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?k(this).j(k(w)):k(k(this).j(w));if(P(w))return k(this.j(k(w)));if(0>this.l(C)&&0>w.l(C))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,I=[],T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<w.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,lt=w.i(b)>>>16,un=w.i(b)&65535;I[2*T+2*b]+=E*un,W(I,2*T+2*b),I[2*T+2*b+1]+=A*un,W(I,2*T+2*b+1),I[2*T+2*b+1]+=E*lt,W(I,2*T+2*b+1),I[2*T+2*b+2]+=A*lt,W(I,2*T+2*b+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new o(I,0)};function W(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function Q(w,y){this.g=w,this.h=y}function oe(w,y){if(R(y))throw Error("division by zero");if(R(w))return new Q(m,m);if(P(w))return y=oe(k(w),y),new Q(k(y.g),k(y.h));if(P(y))return y=oe(w,k(y)),new Q(k(y.g),y.h);if(30<w.g.length){if(P(w)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var I=v,T=y;0>=T.l(w);)I=ze(I),T=ze(T);var b=me(I,1),A=me(T,1);for(T=me(T,2),I=me(I,2);!R(T);){var E=A.add(T);0>=E.l(w)&&(b=b.add(I),A=E),T=me(T,1),I=me(I,1)}return y=B(w,b.j(y)),new Q(b,y)}for(b=m;0<=w.l(y);){for(I=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=d(I),E=A.j(y);P(E)||0<E.l(w);)I-=T,A=d(I),E=A.j(y);R(A)&&(A=v),b=b.add(A),w=B(w,E)}return new Q(b,w)}n.A=function(w){return oe(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)&w.i(T);return new o(I,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)|w.i(T);return new o(I,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)^w.i(T);return new o(I,this.h^w.h)};function ze(w){for(var y=w.g.length+1,I=[],T=0;T<y;T++)I[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(I,w.h)}function me(w,y){var I=y>>5;y%=32;for(var T=w.g.length-I,b=[],A=0;A<T;A++)b[A]=0<y?w.i(A+I)>>>y|w.i(A+I+1)<<32-y:w.i(A+I);return new o(b,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tj=ej.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,bE=ej.Integer=o}).apply(typeof ZU<"u"?ZU:typeof self<"u"?self:typeof window<"u"?window:{});var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},so={};var nj,sZ,rj,ij,sj,oj,aj,cj,uj;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof CE=="object"&&CE];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var M=u[S];if(!(M in g))break e;g=g[M]}u=u[u.length-1],S=g[u],f=f(S),f!=S&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,S=!1,M={next:function(){if(!S&&g<u.length){var L=g++;return{value:f(L,u[L]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function m(u,f,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function v(u,f,g){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,v.apply(null,arguments)}function C(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function R(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,M,L){for(var G=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)G[$e-2]=arguments[$e];return f.prototype[M].apply(S,G)}}function P(u){let f=u.length;if(0<f){let g=Array(f);for(let S=0;S<f;S++)g[S]=u[S];return g}return[]}function k(u,f){for(let g=1;g<arguments.length;g++){let S=arguments[g];if(c(S)){let M=u.length||0,L=S.length||0;u.length=M+L;for(let G=0;G<L;G++)u[M+G]=S[G]}else u.push(S)}}class B{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function W(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var ze=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function me(u,f,g){for(let S in u)f.call(g,u[S],S,u)}function w(u,f){for(let g in u)f.call(void 0,u[g],g,u)}function y(u){let f={};for(let g in u)f[g]=u[g];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let g,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(g in S)u[g]=S[g];for(let L=0;L<I.length;L++)g=I[L],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function b(u){var f=1;u=u.split(":");let g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Ae;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class lt{constructor(){this.h=this.g=null}add(f,g){let S=un.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var un=new B(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,se=!1,Ae=new lt,wt=()=>{let u=a.Promise.resolve(void 0);ie=()=>{u.then(kn)}};var kn=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(g){A(g)}var f=un;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}se=!1};function yt(){this.s=this.s,this.C=this.C}yt.prototype.s=!1,yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var Je=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u})();function hr(u,f){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ze){e:{try{oe(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Da[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&hr.aa.h.call(this)}}R(hr,st);var Da={2:"touch",3:"pen",4:"mouse"};hr.prototype.h=function(){hr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function ln(u,f,g,S,M){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=M,this.key=++Yn,this.da=this.fa=!1}function fr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function mi(u){this.src=u,this.g={},this.h=0}mi.prototype.add=function(u,f,g,S,M){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var G=Eu(u,f,S,M);return-1<G?(f=u[G],g||(f.fa=!1)):(f=new ln(f,this.src,L,!!S,M),f.fa=g,u.push(f)),f};function vu(u,f){var g=f.type;if(g in u.g){var S=u.g[g],M=Array.prototype.indexOf.call(S,f,void 0),L;(L=0<=M)&&Array.prototype.splice.call(S,M,1),L&&(fr(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Eu(u,f,g,S){for(var M=0;M<u.length;++M){var L=u[M];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==S)return M}return-1}var Aa="closure_lm_"+(1e6*Math.random()|0),Iu={};function Kp(u,f,g,S,M){if(S&&S.once)return Tu(u,f,g,S,M);if(Array.isArray(f)){for(var L=0;L<f.length;L++)Kp(u,f[L],g,S,M);return null}return g=ds(g),u&&u[pt]?u.K(f,g,d(S)?!!S.capture:!!S,M):wu(u,f,g,!1,S,M)}function wu(u,f,g,S,M,L){if(!f)throw Error("Invalid event type");var G=d(M)?!!M.capture:!!M,$e=bu(u);if($e||(u[Aa]=$e=new mi(u)),g=$e.add(f,g,S,G,L),g.proxy)return g;if(S=Ld(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)Je||(M=G),M===void 0&&(M=!1),u.addEventListener(f.toString(),S,M);else if(u.attachEvent)u.attachEvent(Ra(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ld(){function u(g){return f.call(u.src,u.listener,g)}let f=cI;return u}function Tu(u,f,g,S,M){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Tu(u,f[L],g,S,M);return null}return g=ds(g),u&&u[pt]?u.L(f,g,d(S)?!!S.capture:!!S,M):wu(u,f,g,!0,S,M)}function Kt(u,f,g,S,M){if(Array.isArray(f))for(var L=0;L<f.length;L++)Kt(u,f[L],g,S,M);else S=d(S)?!!S.capture:!!S,g=ds(g),u&&u[pt]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],g=Eu(L,g,S,M),-1<g&&(fr(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=bu(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Eu(f,g,S,M)),(g=-1<u?f[u]:null)&&Qt(g))}function Qt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[pt])vu(f.i,u);else{var g=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(g,S,u.capture):f.detachEvent?f.detachEvent(Ra(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=bu(f))?(vu(g,u),g.h==0&&(g.src=null,f[Aa]=null)):fr(u)}}}function Ra(u){return u in Iu?Iu[u]:Iu[u]="on"+u}function cI(u,f){if(u.da)u=!0;else{f=new hr(f,this);var g=u.listener,S=u.ha||u.src;u.fa&&Qt(u),u=g.call(S,f)}return u}function bu(u){return u=u[Aa],u instanceof mi?u:null}var Vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ds(u){return typeof u=="function"?u:(u[Vd]||(u[Vd]=function(f){return u.handleEvent(f)}),u[Vd])}function Yt(){yt.call(this),this.i=new mi(this),this.M=this,this.F=null}R(Yt,yt),Yt.prototype[pt]=!0,Yt.prototype.removeEventListener=function(u,f,g,S){Kt(this,u,f,g,S)};function en(u,f){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new st(f,u);else if(f instanceof st)f.target=f.target||u;else{var M=f;f=new st(S,u),T(f,M)}if(M=!0,g)for(var L=g.length-1;0<=L;L--){var G=f.g=g[L];M=ho(G,S,!0,f)&&M}if(G=f.g=u,M=ho(G,S,!0,f)&&M,M=ho(G,S,!1,f)&&M,g)for(L=0;L<g.length;L++)G=f.g=g[L],M=ho(G,S,!1,f)&&M}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],S=0;S<g.length;S++)fr(g[S]);delete u.g[f],u.h--}}this.F=null},Yt.prototype.K=function(u,f,g,S){return this.i.add(String(u),f,!1,g,S)},Yt.prototype.L=function(u,f,g,S){return this.i.add(String(u),f,!0,g,S)};function ho(u,f,g,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,L=0;L<f.length;++L){var G=f[L];if(G&&!G.da&&G.capture==g){var $e=G.listener,Rt=G.ha||G.src;G.fa&&vu(u.i,G),M=$e.call(Rt,S)!==!1&&M}}return M&&!S.defaultPrevented}function Qp(u,f,g){if(typeof u=="function")g&&(u=v(u,g));else if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Yp(u){u.g=Qp(()=>{u.g=null,u.i&&(u.i=!1,Yp(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Jp extends yt{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Yp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fo(u){yt.call(this),this.h=u,this.g={}}R(fo,yt);var po=[];function Cu(u){me(u.g,function(f,g){this.g.hasOwnProperty(g)&&Qt(f)},u),u.g={}}fo.prototype.N=function(){fo.aa.N.call(this),Cu(this)},fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pa=a.JSON.stringify,hs=a.JSON.parse,Xp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function mo(){}mo.prototype.h=null;function Ud(u){return u.h||(u.h=u.i())}function go(){}var yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jt(){st.call(this,"d")}R(Jt,st);function Su(){st.call(this,"c")}R(Su,st);var Jn={},_o=null;function Du(){return _o=_o||new Yt}Jn.La="serverreachability";function Zp(u){st.call(this,Jn.La,u)}R(Zp,st);function pr(u){let f=Du();en(f,new Zp(f))}Jn.STAT_EVENT="statevent";function em(u,f){st.call(this,Jn.STAT_EVENT,u),this.stat=f}R(em,st);function dn(u){let f=Du();en(f,new em(f,u))}Jn.Ma="timingevent";function Na(u,f){st.call(this,Jn.Ma,u),this.size=f}R(Na,st);function vo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function jd(u,f,g,S,M,L){u.info(function(){if(u.g)if(L)for(var G="",$e=L.split("&"),Rt=0;Rt<$e.length;Rt++){var He=$e[Rt].split("=");if(1<He.length){var bn=He[0];He=He[1];var Cn=bn.split("_");G=2<=Cn.length&&Cn[1]=="type"?G+(bn+"="+He+"&"):G+(bn+"=redacted&")}}else G=null;else G=L;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+f+`
`+g+`
`+G})}function ka(u,f,g,S,M,L,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+f+`
`+g+`
`+L+" "+G})}function Io(u,f,g,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+tm(u,g)+(S?" "+S:"")})}function gi(u,f){u.info(function(){return"TIMEOUT: "+f})}Eo.prototype.info=function(){};function tm(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return Pa(g)}catch{return f}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xa;function Oa(){}R(Oa,mo),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},xa=new Oa;function yi(u,f,g,S){this.j=u,this.i=f,this.l=g,this.R=S||1,this.U=new fo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var nm={},wo={};function Ru(u,f,g){u.L=1,u.v=Mu(Lr(f)),u.m=g,u.P=!0,Pu(u,null)}function Pu(u,f){u.F=Date.now(),bo(u),u.A=Lr(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),lm(g.i,"t",S),u.C=0,g=u.j.J,u.h=new Bd,u.g=p(u.j,g?f:null,!u.m),0<u.O&&(u.M=new Jp(v(u.Y,u,u.g),u.O)),f=u.U,g=u.g,S=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(po[0]=M.toString()),M=po);for(var L=0;L<M.length;L++){var G=Kp(g,M[L],S||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),pr(),jd(u.i,u.u,u.A,u.l,u.R,u.m)}yi.prototype.ca=function(u){u=u.target;let f=this.M;f&&Un(u)==3?f.j():this.Y(u)},yi.prototype.Y=function(u){try{if(u==this.g)e:{let Cn=Un(this.g);var f=this.g.Ba();let $u=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||mm(this.g)))){this.J||Cn!=4||f==7||(f==8||0>=$u?pr(3):pr(2)),Nu(this);var g=this.g.Z();this.X=g;t:if(To(this)){var S=mm(this.g);u="";var M=S.length,L=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Co(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(L&&f==M-1)});S.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,ka(this.i,this.u,this.A,this.l,this.R,Cn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Rt=this.g;if(($e=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W($e)){var He=$e;break t}}He=null}if(g=He)Io(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fa(this,g);else{this.o=!1,this.s=3,dn(12),_i(this),Co(this);break e}}if(this.P){g=!0;let $r;for(;!this.J&&this.C<G.length;)if($r=fs(this,G),$r==wo){Cn==4&&(this.s=4,dn(14),g=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if($r==nm){this.s=4,dn(15),Io(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else Io(this.i,this.l,$r,null),Fa(this,$r);if(To(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||G.length!=0||this.h.h||(this.s=1,dn(16),g=!1),this.o=this.o&&g,!g)Io(this.i,this.l,G,"[Invalid Chunked Response]"),_i(this),Co(this);else if(0<G.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Bu(bn),bn.M=!0,dn(11))}}else Io(this.i,this.l,G,null),Fa(this,G);Cn==4&&_i(this),this.o&&!this.J&&(Cn==4?Tn(this.j,this):(this.o=!1,bo(this)))}else gm(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),_i(this),Co(this)}}}catch{}};function To(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fs(u,f){var g=u.C,S=f.indexOf(`
`,g);return S==-1?wo:(g=Number(f.substring(g,S)),isNaN(g)?nm:(S+=1,S+g>f.length?wo:(f=f.slice(S,S+g),u.C=S+g,f)))}yi.prototype.cancel=function(){this.J=!0,_i(this)};function bo(u){u.S=Date.now()+u.I,rm(u,u.I)}function rm(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vo(v(u.ba,u),f)}function Nu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}yi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(gi(this.i,this.A),this.L!=2&&(pr(),dn(17)),_i(this),this.s=2,Co(this)):rm(this,this.S-u)};function Co(u){u.j.G==0||u.J||Tn(u.j,u)}function _i(u){Nu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Cu(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Fa(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Gd(g.h,u))){if(!u.K&&Gd(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)ms(g),ko(g);else break e;ju(g),dn(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=vo(v(g.Za,g),6e3));if(1>=zd(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ii(g,11)}else if((u.K||g.g==u)&&ms(g),!W(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let He=M[f];if(g.T=He[0],He=He[1],g.G==2)if(He[0]=="c"){g.K=He[1],g.ia=He[2];let bn=He[3];bn!=null&&(g.la=bn,g.j.info("VER="+g.la));let Cn=He[4];Cn!=null&&(g.Aa=Cn,g.j.info("SVER="+g.Aa));let $u=He[5];$u!=null&&typeof $u=="number"&&0<$u&&(S=1.5*$u,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;let $r=u.g;if($r){let ym=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ym){var L=S.h;L.g||ym.indexOf("spdy")==-1&&ym.indexOf("quic")==-1&&ym.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(mr(L,L.h),L.h=null))}if(S.D){let lI=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;lI&&(S.ya=lI,dt(S.I,S.D,lI))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var G=u;if(S.qa=l(S,S.J?S.ia:null,S.W),G.K){Xn(S.h,G);var $e=G,Rt=S.L;Rt&&($e.I=Rt),$e.B&&(Nu($e),bo($e)),S.g=G}else th(S);0<g.i.length&&Ha(g)}else He[0]!="stop"&&He[0]!="close"||Ii(g,7);else g.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ii(g,7):Lu(g):He[0]!="noop"&&g.l&&g.l.ta(He),g.v=0)}}pr(4)}catch{}}var $d=class{constructor(u,f){this.g=u,this.map=f}};function Hd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zd(u){return u.h?1:u.g?u.g.size:0}function Gd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function mr(u,f){u.g?u.g.add(f):u.h=f}function Xn(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Hd.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function So(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let g of u.g.values())f=f.concat(g.D);return f}return P(u.i)}function La(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,S=0;S<g;S++)f.push(u[S]);return f}f=[],g=0;for(S in u)f[g++]=u[S];return f}function Wd(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(let S in u)f[g++]=S;return f}}}function ot(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=Wd(u),S=La(u),M=S.length,L=0;L<M;L++)f.call(void 0,S[L],g&&g[L],u)}var Va=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ua(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),M=null;if(0<=S){var L=u[g].substring(0,S);M=u[g].substring(S+1)}else L=u[g];f(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Zn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Zn){this.h=u.h,ja(this,u.j),this.o=u.o,this.g=u.g,ku(this,u.s),this.l=u.l;var f=u.i,g=new Ba;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),im(this,g),this.m=u.m}else u&&(f=String(u).match(Va))?(this.h=!1,ja(this,f[1]||"",!0),this.o=Vr(f[2]||""),this.g=Vr(f[3]||"",!0),ku(this,f[4]),this.l=Vr(f[5]||"",!0),im(this,f[6]||"",!0),this.m=Vr(f[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}Zn.prototype.toString=function(){var u=[],f=this.j;f&&u.push(er(f,Kd,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(er(f,Kd,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(er(g,g.charAt(0)=="/"?am:om,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",er(g,Do)),u.join("")};function Lr(u){return new Zn(u)}function ja(u,f,g){u.j=g?Vr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ku(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function im(u,f,g){f instanceof Ba?(u.i=f,xu(u.i,u.h)):(g||(f=er(f,cm)),u.i=new Ba(f,u.h))}function dt(u,f,g){u.i.set(f,g)}function Mu(u){return dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Vr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function er(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,sm),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sm(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Kd=/[#\/\?@]/g,om=/[#\?:]/g,am=/[#\?]/g,cm=/[#\?@]/g,Do=/#/g;function Ba(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function vi(u){u.g||(u.g=new Map,u.h=0,u.i&&Ua(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Ba.prototype,n.add=function(u,f){vi(this),this.i=null,u=jr(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function um(u,f){vi(u),f=jr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ur(u,f){return vi(u),f=jr(u,f),u.g.has(f)}n.forEach=function(u,f){vi(this),this.g.forEach(function(g,S){g.forEach(function(M){u.call(f,M,S,this)},this)},this)},n.na=function(){vi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){let M=u[S];for(let L=0;L<M.length;L++)g.push(f[S])}return g},n.V=function(u){vi(this);let f=[];if(typeof u=="string")Ur(this,u)&&(f=f.concat(this.g.get(jr(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return vi(this),this.i=null,u=jr(this,u),Ur(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function lm(u,f,g){um(u,f),0<g.length&&(u.i=null,u.g.set(jr(u,f),P(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];let L=encodeURIComponent(String(S)),G=this.V(S);for(S=0;S<G.length;S++){var M=L;G[S]!==""&&(M+="="+encodeURIComponent(String(G[S]))),u.push(M)}}return this.i=u.join("&")};function jr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function xu(u,f){f&&!u.j&&(vi(u),u.i=null,u.g.forEach(function(g,S){var M=S.toLowerCase();S!=M&&(um(this,S),lm(this,M,g))},u)),u.j=f}function dm(u,f){let g=new Eo;if(a.Image){let S=new Image;S.onload=C(Vn,g,"TestLoadImage: loaded",!0,f,S),S.onerror=C(Vn,g,"TestLoadImage: error",!1,f,S),S.onabort=C(Vn,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=C(Vn,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function $a(u,f){let g=new Eo,S=new AbortController,M=setTimeout(()=>{S.abort(),Vn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(L=>{clearTimeout(M),L.ok?Vn(g,"TestPingServer: ok",!0,f):Vn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Vn(g,"TestPingServer: error",!1,f)})}function Vn(u,f,g,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(g)}catch{}}function hm(){this.g=new Xp}function Qd(u,f,g){let S=g||"";try{ot(u,function(M,L){let G=M;d(M)&&(G=Pa(M)),f.push(S+L+"="+encodeURIComponent(G))})}catch(M){throw f.push(S+"type="+encodeURIComponent("_badmap")),M}}function at(u){this.l=u.Ub||null,this.j=u.eb||!1}R(at,mo),at.prototype.g=function(){return new Ou(this.l,this.j)},at.prototype.i=(function(u){return function(){return u}})({});function Ou(u,f){Yt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ou,Yt),n=Ou.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ro(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function fm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ao(this):Ro(this),this.readyState==3&&fm(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ao(this))},n.Qa=function(u){this.g&&(this.response=u,Ao(this))},n.ga=function(){this.g&&Ao(this)};function Ao(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ro(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Ro(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Yd(u){let f="";return me(u,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Po(u,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Yd(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):dt(u,f,g))}function Ge(u){Yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ge,Yt);var pm=/^https?$/i,uI=["POST","PUT"];n=Ge.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xa.g(),this.v=this.o?Ud(this.o):Ud(xa),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){No(this,L);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)g.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let L of S.keys())g.set(L,S.get(L));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uI,f,void 0))||S||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,G]of g)this.g.setRequestHeader(L,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xd(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){No(this,L)}};function No(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Jd(u),ps(u)}function Jd(u){u.A||(u.A=!0,en(u,"complete"),en(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,en(this,"complete"),en(this,"abort"),ps(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ps(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fu(this):this.bb())},n.bb=function(){Fu(this)};function Fu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Un(u)!=4||u.Z()!=2)){if(u.u&&Un(u)==4)Qp(u.Ea,0,u);else if(en(u,"readystatechange"),Un(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=G===0){var M=String(u.D).match(Va)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),S=!pm.test(M?M.toLowerCase():"")}g=S}if(g)en(u,"complete"),en(u,"success");else{u.m=6;try{var L=2<Un(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",Jd(u)}}finally{ps(u)}}}}function ps(u,f){if(u.g){Xd(u);let g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||en(u,"ready");try{g.onreadystatechange=S}catch{}}}function Xd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),hs(f)}};function mm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function gm(u){let f={};u=(u.g&&2<=Un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(W(u[S]))continue;var g=b(u[S]);let M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let L=f[M]||[];f[M]=L,L.push(g)}w(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Zd(u){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,u),this.cb=Br("retryDelaySeedMs",1e4,u),this.Wa=Br("forwardChannelMaxRetries",2,u),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hd(u&&u.concurrentRequestLimit),this.Da=new hm,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zd.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,S){dn(0),this.W=u,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=l(this,null,this.W),Ha(this)};function Lu(u){if(Vu(u),u.G==3){var f=u.U++,g=Lr(u.I);if(dt(g,"SID",u.K),dt(g,"RID",f),dt(g,"TYPE","terminate"),Mo(u,g),f=new yi(u,u.j,f),f.L=2,f.v=Mu(Lr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),bo(f)}gs(u)}function ko(u){u.g&&(Bu(u),u.g.cancel(),u.g=null)}function Vu(u){ko(u),u.u&&(a.clearTimeout(u.u),u.u=null),ms(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ha(u){if(!qd(u.h)&&!u.s){u.s=!0;var f=u.Ga;ie||wt(),se||(ie(),se=!0),Ae.add(f,u),u.B=0}}function Uu(u,f){return zd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vo(v(u.Ga,u,f),rh(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let M=new yi(this,this.j,u),L=this.o;if(this.S&&(L?(L=y(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ei(this,M,f),g=Lr(this.I),dt(g,"RID",u),dt(g,"CVER",22),this.D&&dt(g,"X-HTTP-Session-Id",this.D),Mo(this,g),L&&(this.O?f="headers="+encodeURIComponent(String(Yd(L)))+"&"+f:this.m&&Po(g,this.m,L)),mr(this.h,M),this.Ua&&dt(g,"TYPE","init"),this.P?(dt(g,"$req",f),dt(g,"SID","null"),M.T=!0,Ru(M,g,null)):Ru(M,g,f),this.G=2}}else this.G==3&&(u?eh(this,u):this.i.length==0||qd(this.h)||eh(this))};function eh(u,f){var g;f?g=f.l:g=u.U++;let S=Lr(u.I);dt(S,"SID",u.K),dt(S,"RID",g),dt(S,"AID",u.T),Mo(u,S),u.m&&u.o&&Po(S,u.m,u.o),g=new yi(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Ei(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mr(u.h,g),Ru(g,S,f)}function Mo(u,f){u.H&&me(u.H,function(g,S){dt(f,S,g)}),u.l&&ot({},function(g,S){dt(f,S,g)})}function Ei(u,f,g){g=Math.min(u.i.length,g);var S=u.l?v(u.l.Na,u.l,u):null;e:{var M=u.i;let L=-1;for(;;){let G=["count="+g];L==-1?0<g?(L=M[0].g,G.push("ofs="+L)):L=0:G.push("ofs="+L);let $e=!0;for(let Rt=0;Rt<g;Rt++){let He=M[Rt].g,bn=M[Rt].map;if(He-=L,0>He)L=Math.max(0,M[Rt].g-100),$e=!1;else try{Qd(bn,G,"req"+He+"_")}catch{S&&S(bn)}}if($e){S=G.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,S}function th(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ie||wt(),se||(ie(),se=!0),Ae.add(f,u),u.v=0}}function ju(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vo(v(u.Fa,u),rh(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,nh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vo(v(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),ko(this),nh(this))};function Bu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function nh(u){u.g=new yi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Lr(u.qa);dt(f,"RID","rpc"),dt(f,"SID",u.K),dt(f,"AID",u.T),dt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&dt(f,"TO",u.ja),dt(f,"TYPE","xmlhttp"),Mo(u,f),u.m&&u.o&&Po(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Mu(Lr(f)),g.m=null,g.P=!0,Pu(g,u)}n.Za=function(){this.C!=null&&(this.C=null,ko(this),ju(this),dn(19))};function ms(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Tn(u,f){var g=null;if(u.g==f){ms(u),Bu(u),u.g=null;var S=2}else if(Gd(u.h,f))g=f.D,Xn(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;S=Du(),en(S,new Na(S,g)),Ha(u)}else th(u);else if(M=f.s,M==3||M==0&&0<f.X||!(S==1&&Uu(u,f)||S==2&&ju(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),M){case 1:Ii(u,5);break;case 4:Ii(u,10);break;case 3:Ii(u,6);break;default:Ii(u,2)}}}function rh(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Ii(u,f){if(u.j.info("Error code "+f),f==2){var g=v(u.fb,u),S=u.Xa;let M=!S;S=new Zn(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ja(S,"https"),Mu(S),M?dm(S.toString(),g):$a(S.toString(),g)}else dn(2);u.G=0,u.l&&u.l.sa(f),gs(u),Vu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function gs(u){if(u.G=0,u.ka=[],u.l){let f=So(u.h);(f.length!=0||u.i.length!=0)&&(k(u.ka,f),k(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function l(u,f,g){var S=g instanceof Zn?Lr(g):new Zn(g);if(S.g!="")f&&(S.g=f+"."+S.g),ku(S,S.s);else{var M=a.location;S=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var L=new Zn(null);S&&ja(L,S),f&&(L.g=f),M&&ku(L,M),g&&(L.l=g),S=L}return g=u.D,f=u.ya,g&&f&&dt(S,g,f),dt(S,"VER",u.la),Mo(u,S),S}function p(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ge(new at({eb:g})):new Ge(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(u,f){return new N(u,f)};function N(u,f){Yt.call(this),this.g=new Zd(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!W(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!W(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ge(this)}R(N,Yt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){Lu(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Pa(u),u=g);f.i.push(new $d(f.Ya++,u)),f.G==3&&Ha(f)},N.prototype.N=function(){this.g.l=null,delete this.j,Lu(this.g),delete this.g,N.aa.N.call(this)};function F(u){Jt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(F,Jt);function K(){Su.call(this),this.status=1}R(K,Su);function ge(u){this.g=u}R(ge,_),ge.prototype.ua=function(){en(this.g,"a")},ge.prototype.ta=function(u){en(this.g,new F(u))},ge.prototype.sa=function(u){en(this.g,new K)},ge.prototype.ra=function(){en(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,uj=so.createWebChannelTransport=function(){return new D},cj=so.getStatEventTarget=function(){return Du()},aj=so.Event=Jn,oj=so.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,sj=so.ErrorCode=Ma,Au.COMPLETE="complete",ij=so.EventType=Au,go.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,rj=so.WebChannel=go,sZ=so.FetchXmlHttpFactory=at,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,nj=so.XhrIo=Ge}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var lj="@firebase/firestore",dj="4.8.0";var wn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");var Fp="11.10.0";var Ad=new $i("@firebase/firestore");function fi(n,...e){if(Ad.logLevel<=Ye.DEBUG){let t=e.map(TR);Ad.debug(`Firestore (${Fp}): ${n}`,...t)}}function bj(n,...e){if(Ad.logLevel<=Ye.ERROR){let t=e.map(TR);Ad.error(`Firestore (${Fp}): ${n}`,...t)}}function oZ(n,...e){if(Ad.logLevel<=Ye.WARN){let t=e.map(TR);Ad.warn(`Firestore (${Fp}): ${n}`,...t)}}function TR(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Qn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Cj(n,r,t)}function Cj(n,e,t){let r=`FIRESTORE (${Fp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bj(r),new Error(r)}function pu(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Cj(e,i,r)}var je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fe=class extends Ln{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mu=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var SE=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iR=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wn.UNAUTHENTICATED))}shutdown(){}},sR=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},oR=class{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pu(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new mu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mu,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{fi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(fi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mu)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pu(typeof r.accessToken=="string",31837,{l:r}),new SE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return pu(e===null||typeof e=="string",2055,{h:e}),new wn(e)}},aR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},cR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},DE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},uR=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pu(this.o===void 0,3512);let r=s=>{s.error!=null&&fi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,fi("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{fi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):fi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new DE(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pu(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new DE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function aZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function cZ(){return new TextEncoder}var lR=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=aZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Or(n,e){return n<e?-1:n>e?1:0}function uZ(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Or(r,i);{let s=cZ(),o=lZ(s.encode(hj(n,t)),s.encode(hj(e,t)));return o!==0?o:Or(r,i)}}t+=r>65535?2:1}return Or(n.length,e.length)}function hj(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function lZ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Or(n[t],e[t]);return Or(n.length,e.length)}var fj="__name__",AE=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Qn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Qn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Or(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):uZ(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bE.fromString(e.substring(4,e.length-2))}},oo=class n extends AE{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Fe(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},dZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dR=class n extends AE{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return dZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fj}static keyField(){return new n([fj])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Fe(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Fe(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Fe(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Fe(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ao=class n{constructor(e){this.path=e}static fromPath(e){return new n(oo.fromString(e))}static fromName(e){return new n(oo.fromString(e).popFirst(5))}static empty(){return new n(oo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&oo.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return oo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new oo(e.slice()))}};function hZ(n,e,t,r){if(e===!0&&r===!0)throw new Fe(je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fZ(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pZ(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qn(12329,{type:typeof n})}function mZ(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pZ(n);throw new Fe(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Wt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Lp(n,e){if(!fZ(n))throw new Fe(je.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Fe(je.INVALID_ARGUMENT,t);return!0}var pj=-62135596800,mj=1e6,Pp=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mj);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pj)throw new Fe(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mj}_compareTo(e){return this.seconds===e.seconds?Or(this.nanoseconds,e.nanoseconds):Or(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Pp._jsonSchemaVersion="firestore/timestamp/1.0",Pp._jsonSchema={type:Wt("string",Pp._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};var hR=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};hR.UNKNOWN_ID=-1;function gZ(n){return n.name==="IndexedDbTransactionError"}function yZ(n){return n===0&&1/n==-1/0}var _Z="remoteDocuments",Sj="owner";var Dj="mutationQueues";var Aj="mutations";var Rj="documentMutations",vZ="remoteDocumentsV14";var Pj="remoteDocumentGlobal";var Nj="targets";var kj="targetDocuments";var Mj="targetGlobal",xj="collectionParents";var Oj="clientMetadata";var Fj="bundles";var Lj="namedQueries";var EZ="indexConfiguration";var IZ="indexState";var wZ="indexEntries";var Vj="documentOverlays";var TZ="globals";var bZ=[Dj,Aj,Rj,_Z,Nj,Sj,Mj,kj,Oj,Pj,xj,Fj,Lj],v0e=[...bZ,Vj],CZ=[Dj,Aj,Rj,vZ,Nj,Sj,Mj,kj,Oj,Pj,xj,Fj,Lj,Vj],SZ=CZ,DZ=[...SZ,EZ,IZ,wZ];var E0e=[...DZ,TZ];var Rd=class n{constructor(e,t){this.comparator=e,this.root=t||us.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,us.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}},bd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},us=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qn(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Qn(27949);return e+(this.isRed()?0:1)}};us.EMPTY=null,us.RED=!0,us.BLACK=!1;us.EMPTY=new class{constructor(){this.size=0}get key(){throw Qn(57766)}get value(){throw Qn(16141)}get color(){throw Qn(16727)}get left(){throw Qn(29726)}get right(){throw Qn(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new us(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var RE=class n{constructor(e){this.comparator=e,this.data=new Rd(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},PE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var fR=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ba=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fR("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Or(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ba.EMPTY_BYTE_STRING=new ba("");var AZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RZ(n){if(pu(!!n,39018),typeof n=="string"){let e=0,t=AZ.exec(n);if(pu(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Np(n.seconds),nanos:Np(n.nanos)}}function Np(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function PZ(n){return typeof n=="string"?ba.fromBase64String(n):ba.fromUint8Array(n)}var pR="(default)",mR=class n{constructor(e,t){this.projectId=e,this.database=t||pR}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===pR}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Uj="__type__",NZ="__max__";var jj="__vector__",Bj="value";function kZ(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Uj])===null||t===void 0?void 0:t.stringValue)===jj}function MZ(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NZ}var w0e={mapValue:{fields:{[Uj]:{stringValue:jj},[Bj]:{arrayValue:{}}}}};var gR=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function xZ(n){return new gR(n)}var T0e=new Rd(ao.comparator);var b0e=new Rd(ao.comparator);var C0e=new Rd(ao.comparator),S0e=new RE(ao.comparator);var D0e=new RE(Or);var gj,Ue;(Ue=gj||(gj={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var A0e=new bE([4294967295,4294967295],0);var NE=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Np(e.integerValue));else if("doubleValue"in e){let r=Np(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),yZ(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=RZ(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(PZ(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?MZ(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):kZ(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Qn(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Bj,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Np(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ao.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};NE.Ut=new NE;var R0e=new Uint8Array(0);var $j=41943040,cs=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs($j,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);var OZ=1048576;function rR(){return typeof document<"u"?document:null}var yR=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&fi("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var _R=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var yj,_j;(_j=yj||(yj={})).Fa="default",_j.Cache="cache";function FZ(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vj=new Map;var Hj="firestore.googleapis.com",Ej=!0,kE=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hj,this.ssl=Ej}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Ej;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$j;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OZ)throw new Fe(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FZ((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Fe(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Fe(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Fe(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ME=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new iR;switch(r.type){case"firstParty":return new cR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Fe(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=vj.get(t);r&&(fi("ComponentProvider","Removing Datastore"),vj.delete(t),r.terminate())})(this),Promise.resolve()}};function qj(n,e,t,r={}){var i;n=mZ(n,ME);let s=Fs(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&($l(`https://${c}`),Hl("Firestore",!0)),o.host!==Hj&&o.host!==c&&oZ("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Bi(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=wn.MOCK_USER;else{h=T_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Fe(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new wn(v)}n._authCredentials=new sR(new SE(h,m))}}var vR=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gu=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ER(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Lp(t,n._jsonSchema))return new n(e,r||null,new ao(oo.fromString(t.referencePath)))}};gu._jsonSchemaVersion="firestore/documentReference/1.0",gu._jsonSchema={type:Wt("string",gu._jsonSchemaVersion),referencePath:Wt("string")};var ER=class n extends vR{constructor(e,t,r){super(e,t,xZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gu(this.firestore,null,new ao(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var Ij="AsyncQueue",xE=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new yR(this,"async_queue_retry"),this.oc=()=>{let r=rR();r&&fi(Ij,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=rR();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=rR();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new mu;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!gZ(e))throw e;fi(Ij,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,bj("INTERNAL UNHANDLED ERROR: ",wj(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=_R.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Qn(47125,{hc:wj(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function wj(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var IR=class extends ME{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new xE(e),this._firestoreClient=void 0,await e}}};function zj(n,e){let t=typeof n=="object"?n:Vs(),r=typeof n=="string"?n:e||pR,i=ra(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=w_("firestore");s&&qj(i,...s)}return i}var kp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ba.fromBase64String(e))}catch(t){throw new Fe(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ba.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};kp._jsonSchemaVersion="firestore/bytes/1.0",kp._jsonSchema={type:Wt("string",kp._jsonSchemaVersion),bytes:Wt("string")};var OE=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Fe(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dR(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mp=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Or(this._lat,e._lat)||Or(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Lp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Mp._jsonSchemaVersion="firestore/geoPoint/1.0",Mp._jsonSchema={type:Wt("string",Mp._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};var xp=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Fe(je.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};xp._jsonSchemaVersion="firestore/vectorValue/1.0",xp._jsonSchema={type:Wt("string",xp._jsonSchemaVersion),vectorValues:Wt("object")};var LZ=new RegExp("[~\\*/\\[\\]]");function VZ(n,e,t){if(e.search(LZ)>=0)throw Tj(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new OE(...e.split("."))._internalPath}catch{throw Tj(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tj(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Fe(je.INVALID_ARGUMENT,a+n+c)}var FE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Gj("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},wR=class extends FE{data(){return super.data()}};function Gj(n,e){return typeof e=="string"?VZ(n,e):e instanceof OE?e._internalPath:e._delegate._internalPath}var Cd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Sd=class n extends FE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Gj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(je.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Sd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sd._jsonSchema={type:Wt("string",Sd._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};var Dd=class extends Sd{data(e={}){return super.data(e)}},Op=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Dd(this._firestore,this._userDataWriter,r.key,r,new Cd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Dd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Dd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:UZ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(je.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function UZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qn(61501,{type:n})}}Op._jsonSchemaVersion="firestore/querySnapshot/1.0",Op._jsonSchema={type:Wt("string",Op._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};(function(e,t=!0){(function(i){Fp=i})(qi),ur(new En("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new IR(new oR(r.getProvider("auth-internal")),new uR(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mR(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ft(lj,dj,e),ft(lj,dj,"esm2017")})();var Vp=class{constructor(e){return e}},Wj="firestore",bR=class{constructor(){return ia(Wj)}};var CR=new Z("angularfire2.firestore-instances");function jZ(n,e){let t=Uc(Wj,n,e);return t&&new Vp(t)}function BZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Vp(r)}}var $Z={provide:bR,deps:[[new nn,CR]]},HZ={provide:Vp,useFactory:jZ,deps:[[new nn,CR],ai]};function Kj(n,...e){return ft("angularfire",zi.full,"fst"),mn([HZ,$Z,{provide:CR,useFactory:BZ(n),multi:!0,deps:[tt,mt,Gi,js,[new nn,Kc],[new nn,oa],...e]}])}var Qj=Us(zj,!0);var tB="firebasestorage.googleapis.com",qZ="storageBucket",zZ=120*1e3,GZ=600*1e3;var ls=class n extends Ln{constructor(e,t,r=0){super(SR(e),`Firebase Storage: ${t} (${SR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return SR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},uo=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(uo||{});function SR(n){return"storage/"+n}function WZ(){let n="An unknown error occurred, please check the error payload for server response.";return new ls(uo.UNKNOWN,n)}function KZ(){return new ls(uo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QZ(){return new ls(uo.CANCELED,"User canceled the upload/download.")}function YZ(n){return new ls(uo.INVALID_URL,"Invalid URL '"+n+"'.")}function JZ(n){return new ls(uo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Yj(n){return new ls(uo.INVALID_ARGUMENT,n)}function nB(){return new ls(uo.APP_DELETED,"The Firebase app was deleted.")}function XZ(n){return new ls(uo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var co=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw JZ(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",C=new RegExp(`^https?://${m}/${h}/b/${i}/o${v}`,"i"),R={bucket:1,path:3},P=t===tB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",B=new RegExp(`^https?://${P}/${i}/${k}`,"i"),Q=[{regex:a,indices:c,postModify:s},{regex:C,indices:R,postModify:d},{regex:B,indices:{bucket:1,path:2},postModify:d}];for(let oe=0;oe<Q.length;oe++){let ze=Q[oe],me=ze.regex.exec(e);if(me){let w=me[ze.indices.bucket],y=me[ze.indices.path];y||(y=""),r=new n(w,y),ze.postModify(r);break}}if(r==null)throw YZ(e);return r}},DR=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function ZZ(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,n(C,c())},k)}function v(){s&&clearTimeout(s)}function C(k,...B){if(d){v();return}if(k){v(),h.call(null,k,...B);return}if(c()||o){v(),h.call(null,k,...B);return}r<64&&(r*=2);let Q;a===1?(a=2,Q=0):Q=(r+Math.random())*1e3,m(Q)}let R=!1;function P(k){R||(R=!0,v(),!d&&(i!==null?(k||(a=2),clearTimeout(i),m(0)):k||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,P(!0)},t),P}function eee(n){n(!1)}function tee(n){return n!==void 0}function Jj(n,e,t,r){if(r<e)throw Yj(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Yj(`Invalid value for '${n}'. Expected ${t} or less.`)}function nee(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var AR=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(AR||{});function ree(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var RR=class{constructor(e,t,r,i,s,o,a,c,d,h,m,v=!0,C=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=v,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Pd(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===AR.NO_ERROR,c=s.getStatus();if(!a||ree(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===AR.ABORT;r(!1,new Pd(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new Pd(d,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());tee(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=WZ();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?nB():QZ();o(c)}else{let c=KZ();o(c)}};this.canceled_?t(!1,new Pd(!1,null,!0)):this.backoffId_=ZZ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Pd=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function iee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function see(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function aee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function cee(n,e,t,r,i,s,o=!0,a=!1){let c=nee(n.urlParams),d=n.url+c,h=Object.assign({},n.headers);return oee(h,e),iee(h,t),see(h,s),aee(h,r),new RR(d,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}function uee(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function lee(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var KCe=256*1024;var PR=class n{constructor(e,t){this._service=e,t instanceof co?this._location=t:this._location=co.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new co(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lee(this._location.path)}get storage(){return this._service}get parent(){let e=uee(this._location.path);if(e===null)return null;let t=new co(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XZ(e)}};function Xj(n,e){let t=e?.[qZ];return t==null?null:co.makeFromBucketSpec(t,n)}function dee(n,e,t,r={}){n.host=`${e}:${t}`;let i=Fs(e);i&&($l(`https://${n.host}/b`),Hl("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:T_(s,n.app.options.projectId))}var NR=class{constructor(e,t,r,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=tB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zZ,this._maxUploadRetryTime=GZ,this._requests=new Set,i!=null?this._bucket=co.makeFromBucketSpec(i,this._host):this._bucket=Xj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=co.makeFromBucketSpec(this._url,e):this._bucket=Xj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new PR(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new DR(nB());{let o=cee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},Zj="@firebase/storage",eB="0.13.14";var rB="storage";function iB(n=Vs(),e){n=oi(n);let r=ra(n,rB).getImmediate({identifier:e}),i=w_("storage");return i&&sB(r,...i),r}function sB(n,e,t,r={}){dee(n,e,t,r)}function hee(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new NR(t,r,i,e,qi)}function fee(){ur(new En(rB,hee,"PUBLIC").setMultipleInstances(!0)),ft(Zj,eB,""),ft(Zj,eB,"esm2017")}fee();var Up=class{constructor(e){return e}},oB="storage",kR=class{constructor(){return ia(oB)}};var MR=new Z("angularfire2.storage-instances");function pee(n,e){let t=Uc(oB,n,e);return t&&new Up(t)}function mee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Up(r)}}var gee={provide:kR,deps:[[new nn,MR]]},yee={provide:Up,useFactory:pee,deps:[[new nn,MR],ai]};function aB(n,...e){return ft("angularfire",zi.full,"gcs"),mn([yee,gee,{provide:MR,useFactory:mee(n),multi:!0,deps:[tt,mt,Gi,js,[new nn,Kc],[new nn,oa],...e]}])}var cB=Us(iB,!0);function _ee(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var uB=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",_ee];var vee="firebase",Eee="12.8.0";li(vee,Eee,"app");var pi={production:!1,firebase:{apiKey:"AIzaSyB_9AlTCYi27xFQkP64f5aU4OrQBZ7TE8k",authDomain:"agilityasturias-4a107.firebaseapp.com",projectId:"agilityasturias-4a107",storageBucket:"agilityasturias-4a107.firebasestorage.app",messagingSenderId:"898271086134",appId:"1:898271086134:web:10e005442180b8d2943a97",measurementId:"G-N6SP2XNR7Q"}};var Fr=class n{auth;currentUserSignal=Pe(null);checkAuthLoading=Pe(!0);constructor(){let e;try{e=Nr()}catch{e=Hs(pi.firebase)}this.auth=lS(e),nv(this.auth,t=>{this.currentUserSignal.set(t),this.checkAuthLoading.set(!1)})}getAuthState(){return new Promise(e=>{let t=nv(this.auth,r=>{t(),e(r)})})}async loginWithGoogle(){let e=new sS;try{return(await uS(this.auth,e)).user}catch(t){throw console.error("Error logging in with Google",t),t}}async logout(){try{await oS(this.auth),this.currentUserSignal.set(null)}catch(e){throw console.error("Error logging out",e),e}}isLoggedIn=$n(()=>!!this.currentUserSignal());static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function Iee(n,e){n&1&&(x(0,"p"),V(1,"Bienvenido a Agility Asturias. Inicia sesi\xF3n para gestionar tus reservas."),O())}function wee(n,e){if(n&1){let t=xe();x(0,"div",6)(1,"button",7),re("click",function(){ue(t);let i=J();return le(i.login())}),Be(2,"img",8),V(3," Continuar con Google "),O()()}}function Tee(n,e){if(n&1){let t=xe();x(0,"div",9),Be(1,"img",10),x(2,"div")(3,"p",11),V(4),O(),x(5,"p",12),V(6),O(),x(7,"button",13),re("click",function(){ue(t);let i=J();return le(i.logout())}),V(8,"Cerrar Sesi\xF3n"),O()()()}if(n&2){let t=e.ngIf;$(),Y("src",t.photoURL,yn),$(3),qe(t.displayName),$(2),qe(t.email)}}var LE=class n{authService=j(Fr);constructor(){}async login(){try{await this.authService.loginWithGoogle()}catch(e){console.error(e)}}async logout(){await this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-area"],[4,"ngIf"],["class","google-btn-wrapper",4,"ngIf"],["class","user-info",4,"ngIf"],[1,"google-btn-wrapper"],[1,"btn-google",3,"click"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google logo"],[1,"user-info"],["alt","User photo",3,"src"],[1,"name"],[1,"email"],[1,"btn-logout",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),V(4,"Iniciar Sesi\xF3n"),O()(),Ee(5,Iee,2,0,"p",3)(6,wee,4,0,"div",4)(7,Tee,9,3,"div",5),O()()),t&2&&($(5),Y("ngIf",!r.authService.currentUserSignal()),$(),Y("ngIf",!r.authService.currentUserSignal()),$(),Y("ngIf",r.authService.currentUserSignal()))},dependencies:[rn,Fn],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;max-width:400px;width:100%;text-align:center}.google-btn-wrapper[_ngcontent-%COMP%]{margin:20px 0;display:flex;justify-content:center}.btn-google[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;background-color:#fff;color:#444;border:1px solid #ddd;border-radius:4px;padding:10px 20px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s;width:100%}.btn-google[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.btn-logout[_ngcontent-%COMP%]{margin-top:10px;padding:6px 12px;background-color:#f44;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#c00}.user-info[_ngcontent-%COMP%]{text-align:center;margin-top:20px;display:flex;flex-direction:column;align-items:center}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-bottom:10px}"]})};var VE=class n{constructor(e){this.location=e}get heroBackground(){return`linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${this.location.prepareExternalUrl("Images/Agility_Asturias_logo.jpg")}')`}static \u0275fac=function(t){return new(t||n)(he(Jo))};static \u0275cmp=_t({type:n,selectors:[["app-home"]],decls:23,vars:2,consts:[[1,"hero"],[1,"hero-content"],[1,"subtitle"],[1,"history-section"],[1,"container"],[1,"history-text"]],template:function(t,r){t&1&&(nt(0,"section",0)(1,"div",1)(2,"h2"),V(3,"Bienvenido a Agility Asturias"),ht(),nt(4,"p",2),V(5,"Perretes y agility en Asturias."),ht()()(),nt(6,"section",3)(7,"div",4)(8,"h3"),V(9,"Historia del Agility"),ht(),nt(10,"div",5)(11,"p"),V(12,"El Agility es un deporte canino que se origin\xF3 en el Reino Unido a finales de la d\xE9cada de 1970 y principios de la d\xE9cada de 1980. El primer evento de Agility tuvo lugar en 1978 en el Crufts Dog Show, uno de los mayores eventos de perros en el mundo."),ht(),nt(13,"p"),V(14,"El creador del Agility fue John Varley, quien trabajaba como entrenador de perros en el Crufts Dog Show. Varley estaba buscando una forma de entretener a la audiencia durante los descansos entre las competiciones de obediencia y decidi\xF3 crear un curso de obst\xE1culos para perros."),ht(),nt(15,"p"),V(16,"El curso de obst\xE1culos original constaba de saltos, t\xFAneles y aros, y estaba dise\xF1ado para poner a prueba la agilidad y la velocidad de los perros. La primera competici\xF3n de agility se llev\xF3 a cabo en 1978 en el Crufts Dog Show y fue un gran \xE9xito entre los participantes y el p\xFAblico."),ht(),nt(17,"p"),V(18,"A medida que el deporte creci\xF3 en popularidad, se establecieron organizaciones de agility en todo el mundo, incluyendo el Kennel Club en el Reino Unido y la United States Dog Agility Association en los Estados Unidos."),ht(),nt(19,"p"),V(20,"El agility se convirti\xF3 r\xE1pidamente en uno de los deportes caninos m\xE1s populares del mundo, con miles de perros y sus due\xF1os compitiendo en eventos y competiciones en todo el mundo. El deporte se ha diversificado en diferentes modalidades, como el jumping y la agilidad por equipos."),ht(),nt(21,"p"),V(22,"Hoy en d\xEDa, el agility es un deporte altamente competitivo que requiere una gran cantidad de entrenamiento y habilidades tanto por parte del perro como del manejador. A pesar de su naturaleza competitiva, tambi\xE9n es un deporte muy divertido y emocionante para perros y due\xF1os por igual."),ht()()()()),t&2&&wl("background-image",r.heroBackground)},styles:['.hero[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-attachment:fixed;height:70vh;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center;margin-bottom:0;position:relative}.hero-content[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:3rem;border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000004d;max-width:600px;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1rem;font-weight:700;text-transform:uppercase;letter-spacing:2px}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;margin-bottom:2rem;color:#f0f0f0}.cta-button[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;border:none;padding:12px 30px;font-size:1.1rem;border-radius:30px;cursor:pointer;transition:transform .2s,box-shadow .2s;font-weight:700;text-decoration:none;display:inline-block}.cta-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #ff7e0066}.history-section[_ngcontent-%COMP%]{padding:4rem 1rem;background-color:#f9f9f9;overflow:hidden}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--primary-blue);font-size:2.5rem;margin-bottom:4rem;position:relative;font-weight:800}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;width:80px;height:4px;background-color:var(--accent-orange);margin:15px auto 0;border-radius:2px}.timeline[_ngcontent-%COMP%]{position:relative;max-width:1000px;margin:0 auto}.timeline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:4px;background-color:#ddd;top:0;bottom:0;left:50%;margin-left:-2px;border-radius:2px}.timeline-item[_ngcontent-%COMP%]{padding:10px 40px;position:relative;background-color:inherit;width:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards;opacity:0}.timeline-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.timeline-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.timeline-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}.timeline-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s}.left[_ngcontent-%COMP%]{left:0}.right[_ngcontent-%COMP%]{left:50%}.timeline-icon[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;right:-20px;background-color:#fff;border:4px solid var(--accent-orange);top:20px;border-radius:50%;z-index:10;display:flex;align-items:center;justify-content:center;font-size:1.2rem;box-shadow:0 0 0 4px #fff,inset 0 2px #00000014}.right[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{left:-20px}.timeline-content[_ngcontent-%COMP%]{padding:20px 30px;background-color:#fff;position:relative;border-radius:8px;box-shadow:0 5px 15px #0000000d;transition:transform .3s,box-shadow .3s;border-left:4px solid var(--primary-blue)}.timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #0000001a}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left:none;border-right:4px solid var(--primary-blue)}.date[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#999;font-weight:700;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.timeline-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:1.4rem}.timeline-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6}@media(max-width:768px){.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem}.timeline[_ngcontent-%COMP%]:after{left:31px}.timeline-item[_ngcontent-%COMP%]{width:100%;padding-left:70px;padding-right:25px}.timeline-item.right[_ngcontent-%COMP%]{left:0}.left[_ngcontent-%COMP%]:after, .right[_ngcontent-%COMP%]:after{left:21px}.timeline-icon[_ngcontent-%COMP%]{left:11px!important;right:auto}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-right:none;border-left:4px solid var(--primary-blue)}}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}0%{opacity:0;transform:translateY(20px)}}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}0%{opacity:0}}']})};var _B=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(he(Rs),he(Jr))};static \u0275dir=$t({type:n})}return n})(),bee=(()=>{class n extends _B{static \u0275fac=(()=>{let t;return function(i){return(t||(t=mc(n)))(i||n)}})();static \u0275dir=$t({type:n,features:[Xr]})}return n})(),UR=new Z("");var Cee={provide:UR,useExisting:Ts(()=>xd),multi:!0};function See(){let n=br()?br().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Dee=new Z(""),xd=(()=>{class n extends _B{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!See())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(he(Rs),he(Jr),he(Dee,8))};static \u0275dir=$t({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&re("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Tl([Cee]),Xr]})}return n})();function jR(n){return n==null||BR(n)===0}function BR(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var $R=new Z(""),HR=new Z(""),Aee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lo=class{static min(e){return Ree(e)}static max(e){return Pee(e)}static required(e){return Nee(e)}static requiredTrue(e){return kee(e)}static email(e){return Mee(e)}static minLength(e){return xee(e)}static maxLength(e){return Oee(e)}static pattern(e){return Fee(e)}static nullValidator(e){return vB()}static compose(e){return CB(e)}static composeAsync(e){return DB(e)}};function Ree(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Pee(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Nee(n){return jR(n.value)?{required:!0}:null}function kee(n){return n.value===!0?null:{required:!0}}function Mee(n){return jR(n.value)||Aee.test(n.value)?null:{email:!0}}function xee(n){return e=>{let t=e.value?.length??BR(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Oee(n){return e=>{let t=e.value?.length??BR(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Fee(n){if(!n)return vB;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(jR(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function vB(n){return null}function EB(n){return n!=null}function IB(n){return Qo(n)?Ut(n):n}function wB(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function TB(n,e){return e.map(t=>t(n))}function Lee(n){return!n.validate}function bB(n){return n.map(e=>Lee(e)?e:t=>e.validate(t))}function CB(n){if(!n)return null;let e=n.filter(EB);return e.length==0?null:function(t){return wB(TB(t,e))}}function SB(n){return n!=null?CB(bB(n)):null}function DB(n){if(!n)return null;let e=n.filter(EB);return e.length==0?null:function(t){let r=TB(t,e).map(IB);return jI(r).pipe(We(wB))}}function AB(n){return n!=null?DB(bB(n)):null}function lB(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RB(n){return n._rawValidators}function PB(n){return n._rawAsyncValidators}function xR(n){return n?Array.isArray(n)?n:[n]:[]}function jE(n,e){return Array.isArray(n)?n.includes(e):n===e}function dB(n,e){let t=xR(e);return xR(n).forEach(i=>{jE(t,i)||t.push(i)}),t}function hB(n,e){return xR(e).filter(t=>!jE(n,t))}var BE=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SB(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},yu=class extends BE{name;get formDirective(){return null}get path(){return null}},_u=class extends BE{_parent=null;name=null;valueAccessor=null},$E=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var WE=(()=>{class n extends $E{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(_u,2))};static \u0275dir=$t({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Xr]})}return n})(),NB=(()=>{class n extends $E{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(yu,10))};static \u0275dir=$t({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&_n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Xr]})}return n})();var jp="VALID",UE="INVALID",Nd="PENDING",Bp="DISABLED",Ca=class{},HE=class extends Ca{value;source;constructor(e,t){super(),this.value=e,this.source=t}},$p=class extends Ca{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Hp=class extends Ca{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},kd=class extends Ca{status;source;constructor(e,t){super(),this.status=e,this.source=t}},OR=class extends Ca{source;constructor(e){super(),this.source=e}},zp=class extends Ca{source;constructor(e){super(),this.source=e}};function qR(n){return(KE(n)?n.validators:n)||null}function Vee(n){return Array.isArray(n)?SB(n):n||null}function zR(n,e){return(KE(e)?e.asyncValidators:n)||null}function Uee(n){return Array.isArray(n)?AB(n):n||null}function KE(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kB(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function MB(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var Md=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Bt(this.statusReactive)}set status(e){Bt(()=>this.statusReactive.set(e))}_status=$n(()=>this.statusReactive());statusReactive=Pe(void 0);get valid(){return this.status===jp}get invalid(){return this.status===UE}get pending(){return this.status==Nd}get disabled(){return this.status===Bp}get enabled(){return this.status!==Bp}errors;get pristine(){return Bt(this.pristineReactive)}set pristine(e){Bt(()=>this.pristineReactive.set(e))}_pristine=$n(()=>this.pristineReactive());pristineReactive=Pe(!0);get dirty(){return!this.pristine}get touched(){return Bt(this.touchedReactive)}set touched(e){Bt(()=>this.touchedReactive.set(e))}_touched=$n(()=>this.touchedReactive());touchedReactive=Pe(!1);get untouched(){return!this.touched}_events=new Tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hB(e,this._rawAsyncValidators))}hasValidator(e){return jE(this._rawValidators,e)}hasAsyncValidator(e){return jE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hp(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $p(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new $p(!0,r))}markAsPending(e={}){this.status=Nd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bp,this.errors=null,this._forEachChild(i=>{i.disable(ae(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new HE(this.value,r)),this._events.next(new kd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jp,this._forEachChild(r=>{r.enable(ae(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jp||this.status===Nd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new HE(this.value,t)),this._events.next(new kd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bp:jp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Nd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=IB(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new kd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?Bp:this.errors?UE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nd)?Nd:this._anyControlsHaveStatus(UE)?UE:jp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new $p(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Hp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){KE(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Vee(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Uee(this._rawAsyncValidators)}},qE=class extends Md{constructor(e,t,r){super(qR(t),zR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){MB(this,!0,e),Object.keys(e).forEach(r=>{kB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ae(U({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new zp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var FR=class extends qE{};var QE=new Z("",{factory:()=>YE}),YE="always";function xB(n,e){return[...e.path,n]}function LR(n,e,t=YE){GR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Bee(n,e),Hee(n,e),$ee(n,e),jee(n,e)}function fB(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),GE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function zE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jee(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function GR(n,e){let t=RB(n);e.validator!==null?n.setValidators(lB(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=PB(n);e.asyncValidator!==null?n.setAsyncValidators(lB(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();zE(e._rawValidators,i),zE(e._rawAsyncValidators,i)}function GE(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=RB(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=PB(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return zE(e._rawValidators,r),zE(e._rawAsyncValidators,r),t}function Bee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OB(n,e)})}function $ee(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OB(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Hee(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function qee(n,e){n==null,GR(n,e)}function zee(n,e){return GE(n,e)}function LB(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Gee(n){return Object.getPrototypeOf(n.constructor)===bee}function Wee(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function VB(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===xd?t=s:Gee(s)?r=s:i=s}),i||r||t||null}function Kee(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pB(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mB(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qp=class extends Md{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(qR(t),zR(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),KE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mB(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new zp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Qee=n=>n instanceof qp;var Yee={provide:_u,useExisting:Ts(()=>WR)},gB=Promise.resolve(),WR=(()=>{class n extends _u{_changeDetectorRef;callSetDisabledState;control=new qp;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Et;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VB(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),LB(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){LR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){gB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ic(r);gB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?xB(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(he(yu,9),he($R,10),he(HR,10),he(UR,10),he(Ec,8),he(QE,8))};static \u0275dir=$t({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Tl([Yee]),Xr,Pi]})}return n})();var UB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var VR=class extends Md{constructor(e,t,r){super(qR(t),zR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){MB(this,!1,e),e.forEach((r,i)=>{kB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],ae(U({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new zp(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var Jee=(()=>{class n extends yu{callSetDisabledState;get submitted(){return Bt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=$n(()=>this._submittedReactive());_submittedReactive=Pe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(GE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return LR(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fB(t.control||null,t,!1),Kee(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,Wee(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new OR(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(fB(r||null,t),Qee(i)&&(LR(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);qee(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&zee(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GR(this.form,this),this._oldForm&&GE(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(he($R,10),he(HR,10),he(QE,8))};static \u0275dir=$t({type:n,features:[Xr,Pi]})}return n})();var jB=new Z("");var Xee={provide:_u,useExisting:Ts(()=>KR)},KR=(()=>{class n extends _u{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Et;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VB(this,s)}ngOnChanges(t){this._added||this._setUpControl(),LB(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return xB(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(he(yu,13),he($R,10),he(HR,10),he(UR,10),he(jB,8))};static \u0275dir=$t({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Tl([Xee]),Xr,Pi]})}return n})();var Zee={provide:yu,useExisting:Ts(()=>QR)},QR=(()=>{class n extends Jee{form=null;ngSubmit=new Et;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=mc(n)))(i||n)}})();static \u0275dir=$t({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&re("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Tl([Zee]),Xr]})}return n})();var BB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=nr({})}return n})();function yB(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var $B=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return yB(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new qE(i,s)}record(t,r=null){let i=this._reduceControls(t);return new FR(i,r)}control(t,r,i){let s={};return this.useNonNullable?(yB(r)?s=r:(s.validators=r,s.asyncValidators=i),new qp(t,ae(U({},s),{nonNullable:!0}))):new qp(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new VR(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof qp)return t;if(t instanceof Md)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:QE,useValue:t.callSetDisabledState??YE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=nr({imports:[BB]})}return n})(),HB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jB,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:QE,useValue:t.callSetDisabledState??YE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=nr({imports:[BB]})}return n})();var XE=class n{firestore;reservationsSignal=Pe([]);unsubscribe=null;constructor(){let e;try{e=Nr()}catch{e=Hs(pi.firebase)}this.firestore=du(e);let t=os(this.firestore,"reservations");this.unsubscribe=Td(t,r=>{let i=r.docs.map(s=>U({id:s.id},s.data()));this.reservationsSignal.set(i)},r=>{console.error("Error reading reservations:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getReservations(){return this.reservationsSignal}async addReservation(e){let t=os(this.firestore,"reservations");return await wd(t,e)}async deleteReservation(e){let t=as(this.firestore,`reservations/${e}`);return await Id(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Od=class n{firestore;dogsSignal=Pe([]);unsubscribe=null;constructor(){let e;try{e=Nr()}catch{e=Hs(pi.firebase)}this.firestore=du(e)}subscribeToUserDogs(e){this.unsubscribe&&this.unsubscribe();let t=os(this.firestore,"dogs"),r=QU(t,YU("userId","==",e));this.unsubscribe=Td(r,i=>{let s=i.docs.map(o=>U({id:o.id},o.data()));this.dogsSignal.set(s)},i=>{console.error("Error reading dogs:",i)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getDogs(){return this.dogsSignal}async addDog(e){let t=os(this.firestore,"dogs");return await wd(t,e)}async deleteDog(e){let t=as(this.firestore,`dogs/${e}`);return await Id(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sa=class n{toasts=Pe([]);counter=0;show(e,t="info",r=3e3){let i=this.counter++,s={id:i,message:e,type:t,duration:r};this.toasts.update(o=>[...o,s]),r>0&&setTimeout(()=>{this.remove(i)},r)}success(e,t=3e3){this.show(e,"success",t)}error(e,t=4e3){this.show(e,"error",t)}info(e,t=3e3){this.show(e,"info",t)}warning(e,t=3e3){this.show(e,"warning",t)}remove(e){this.toasts.update(t=>t.filter(r=>r.id!==e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function ete(n,e){if(n&1&&(x(0,"div",36),V(1),O()),n&2){let t=e.$implicit;$(),Ht(" \u{1F43E} ",t," ")}}function tte(n,e){if(n&1&&(x(0,"div",34),Ee(1,ete,2,1,"div",35),O()),n&2){let t=J().$implicit;$(),Y("ngForOf",t.selectedDogs)}}function nte(n,e){if(n&1&&(x(0,"li",31)(1,"span",32),V(2),O(),Ee(3,tte,2,1,"div",33),O()),n&2){let t=e.$implicit;$(2),qe(t.userName),$(),Y("ngIf",t.selectedDogs&&t.selectedDogs.length)}}function rte(n,e){if(n&1&&(x(0,"div",29)(1,"ul"),Ee(2,nte,4,2,"li",30),O()()),n&2){let t=J(2).$implicit;$(2),Y("ngForOf",t.reservations)}}function ite(n,e){if(n&1){let t=xe();x(0,"div",25)(1,"button",26),re("click",function(){ue(t);let i=J().$implicit,s=J(2);return le(s.toggleAttendees(i.id))}),x(2,"span"),V(3),O(),x(4,"span",27),V(5,"\u25BC"),O()(),Ee(6,rte,3,1,"div",28),O()}if(n&2){let t=J().$implicit,r=J(2);$(3),Ht("Ver asistentes (",t.reservations.length,")"),$(),_n("open",r.expandedSlots().has(t.id)),$(2),Y("ngIf",r.expandedSlots().has(t.id))}}function ste(n,e){if(n&1){let t=xe();x(0,"button",37),re("click",function(){ue(t);let i=J().$implicit,s=J(2);return le(s.cancelSlot(i))}),V(1," Cancelar Reserva "),O()}}function ote(n,e){if(n&1){let t=xe();x(0,"button",38),re("click",function(){ue(t);let i=J().$implicit,s=J(2);return le(s.bookSlot(i))}),V(1),O()}if(n&2){let t=J().$implicit;Y("disabled",t.currentBookings>=t.maxBookings),$(),Ht(" ",t.currentBookings>=t.maxBookings?"Completo":"Reservar"," ")}}function ate(n,e){if(n&1&&(x(0,"div",12)(1,"div",13)(2,"span",14),V(3),O()(),x(4,"div",15)(5,"div",16)(6,"span",17),V(7,"Disponibilidad:"),O(),x(8,"span",18),V(9),O()(),x(10,"div",19),Be(11,"div",20),O()(),Ee(12,ite,7,4,"div",21),x(13,"div",22),Ee(14,ste,2,0,"button",23)(15,ote,2,2,"button",24),O()()),n&2){let t=e.$implicit;_n("full",t.currentBookings>=t.maxBookings),$(3),Wh("",t.startTime," - ",t.endTime),$(6),Wh("",t.currentBookings," / ",t.maxBookings),$(2),wl("width",t.currentBookings/t.maxBookings*100,"%"),$(),Y("ngIf",t.reservations&&t.reservations.length>0),$(2),Y("ngIf",t.isBookedByCurrentUser),$(),Y("ngIf",!t.isBookedByCurrentUser)}}function cte(n,e){if(n&1&&(x(0,"div")(1,"div",6)(2,"h3",7),V(3),x(4,"span",8),V(5),xi(6,"date"),O()(),x(7,"span",9),V(8),O()(),x(9,"div",10),Ee(10,ate,16,11,"div",11),O()()),n&2){let t=e.$implicit;$(3),Ht(" ",t.day," "),$(2),qe(Oi(6,8,t.slots[0].date,"dd/MM")),$(2),_n("morning",t.period==="Ma\xF1ana")("afternoon",t.period==="Tarde"),$(),Ht(" ",t.period," "),$(2),Y("ngForOf",t.slots)}}function ute(n,e){if(n&1){let t=xe();x(0,"div",48)(1,"p"),V(2,"\u26A0\uFE0F No tienes perros registrados."),O(),x(3,"a",49),re("click",function(){ue(t);let i=J(2);return le(i.closeModal())}),V(4,"Ir a mi perfil para a\xF1adir uno"),O()()}}function lte(n,e){if(n&1){let t=xe();x(0,"label",50)(1,"input",51),re("change",function(){let i=ue(t).$implicit,s=J(2);return le(s.toggleDogSelection(i.name))}),O(),Be(2,"span",52),x(3,"span",53),V(4),O()()}if(n&2){let t=e.$implicit,r=J(2);$(),Y("checked",r.selectedDogIds.has(t.name)),$(3),qe(t.name)}}function dte(n,e){if(n&1){let t=xe();x(0,"div",39),re("click",function(){ue(t);let i=J();return le(i.closeModal())}),x(1,"div",40),re("click",function(i){return ue(t),le(i.stopPropagation())}),x(2,"h3"),V(3,"Confirmar Reserva"),O(),x(4,"p"),V(5,"\xBFQu\xE9 d\xEDa? "),x(6,"strong"),V(7),O(),V(8," a las "),x(9,"strong"),V(10),O()(),x(11,"div",41)(12,"p"),V(13,"Selecciona los perretes que vendr\xE1n:"),O(),Ee(14,ute,5,0,"div",42),x(15,"div",43),Ee(16,lte,5,2,"label",44),O()(),x(17,"div",45)(18,"button",46),re("click",function(){ue(t);let i=J();return le(i.closeModal())}),V(19,"Cancelar"),O(),x(20,"button",47),re("click",function(){ue(t);let i=J();return le(i.confirmBooking())}),V(21),O()()()()}if(n&2){let t=J();$(7),qe(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.day),$(3),qe(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.startTime),$(4),Y("ngIf",t.myDogs().length===0),$(2),Y("ngForOf",t.myDogs()),$(4),Y("disabled",t.myDogs().length>0&&t.selectedDogIds.size===0||t.isSubmitting()),$(),Ht(" ",t.isSubmitting()?"Reservando...":"Confirmar"," ")}}var ZE=class n{authService=j(Fr);reservationService=j(XE);dogService=j(Od);toastService=j(Sa);isModalOpen=!1;isSubmitting=Pe(!1);selectedSlotForBooking=null;myDogs=this.dogService.getDogs();selectedDogIds=new Set;expandedSlots=Pe(new Set);selectedWeek=Pe("current");staticSlots=this.generateSlotsDefinition();constructor(){pl(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}toggleWeek(e){this.selectedWeek.set(e),this.expandedSlots.set(new Set)}getDatesForWeek(e){let t={},r=new Date,i=r.getDate()-(r.getDay()||7)+1+e*7,s=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"];for(let c=0;c<7;c++){let d=new Date(r.setDate(i+c)),h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),v=String(d.getDate()).padStart(2,"0");t[s[c]]=`${h}-${m}-${v}`}let o=new Date,a=o.getDay()||7;o.setDate(o.getDate()-a+1+e*7),o.setHours(0,0,0,0);for(let c=0;c<7;c++){let d=new Date(o);d.setDate(o.getDate()+c);let h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),v=String(d.getDate()).padStart(2,"0");t[s[c]]=`${h}-${m}-${v}`}return t}slots=$n(()=>{let e=this.reservationService.getReservations()(),t=this.authService.currentUserSignal(),i=this.selectedWeek()==="current"?0:1,s=this.getDatesForWeek(i),o=new Date,a=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0"),h=`${a}-${c}-${d}`;return this.staticSlots.map(v=>{let C=s[v.day],R=e.filter(B=>B.slotId===v.id&&B.date===C),P=R.reduce((B,W)=>{let Q=W.selectedDogs?.length||1;return B+Q},0),k=t?R.find(B=>B.userId===t.uid):void 0;return ae(U({},v),{date:C,currentBookings:P,isBookedByCurrentUser:!!k,userReservationId:k?.id,reservations:R})}).filter(v=>v.date>=h)});groupedSlots=$n(()=>{let e=this.slots();return["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes"].map(r=>{let i=e.filter(a=>a.day===r);if(i.length===0)return null;let o=parseInt(i[0].startTime.split(":")[0])<16?"Ma\xF1ana":"Tarde";return{day:r,period:o,slots:i}}).filter(r=>r!==null)});generateSlotsDefinition(){let e=[],t=1;return["Lunes","Jueves"].forEach(s=>{e.push({id:t++,day:s,startTime:"10:00",endTime:"11:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"11:30",endTime:"13:00",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"13:00",endTime:"14:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1})}),["Martes","Mi\xE9rcoles","Viernes"].forEach(s=>{e.push({id:t++,day:s,startTime:"16:30",endTime:"18:00",currentBookings:0,maxBookings:7,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"18:00",endTime:"19:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"19:30",endTime:"21:00",currentBookings:0,maxBookings:6,isBookedByCurrentUser:!1})}),e}bookSlot(e){if(!this.authService.currentUserSignal()){this.toastService.warning("Debes iniciar sesi\xF3n para reservar.");return}if(e.currentBookings>=e.maxBookings){this.toastService.error("Esta clase est\xE1 completa.");return}if(e.isBookedByCurrentUser){this.toastService.info("Ya tienes una reserva en este horario.");return}this.selectedSlotForBooking=e,this.selectedDogIds.clear(),this.isSubmitting.set(!1),this.isModalOpen=!0}toggleAttendees(e){let t=new Set(this.expandedSlots());t.has(e)?t.delete(e):t.add(e),this.expandedSlots.set(t)}toggleDogSelection(e){let t=new Set(this.selectedDogIds);t.has(e)?t.delete(e):t.add(e),this.selectedDogIds=t}closeModal(){this.isModalOpen=!1,this.selectedSlotForBooking=null,this.isSubmitting.set(!1)}async confirmBooking(){if(!this.selectedSlotForBooking||this.isSubmitting())return;if(this.selectedDogIds.size===0){this.toastService.warning("Por favor, selecciona al menos un perro.");return}let e=this.authService.currentUserSignal();if(!e)return;let t=this.slots().find(r=>r.id===this.selectedSlotForBooking.id);if(t){let r=this.selectedDogIds.size;if(t.currentBookings+r>t.maxBookings){let i=t.maxBookings-t.currentBookings;this.toastService.error(`No hay suficientes plazas. Intentas reservar para ${r} perro(s) pero solo quedan ${i} plazas.`);return}}this.isSubmitting.set(!0);try{let r=Array.from(this.selectedDogIds);await this.reservationService.addReservation({slotId:this.selectedSlotForBooking.id,userId:e.uid,userName:e.displayName||"Usuario",userEmail:e.email||"",day:this.selectedSlotForBooking.day,startTime:this.selectedSlotForBooking.startTime,date:this.selectedSlotForBooking.date,selectedDogs:r,createdAt:Date.now()}),this.closeModal(),this.toastService.success("\xA1Reserva confirmada con \xE9xito!")}catch(r){console.error("Error al reservar:",r),this.toastService.error("Hubo un error al realizar la reserva."),this.isSubmitting.set(!1)}}async cancelSlot(e){if(e.userReservationId&&confirm("\xBFQuieres cancelar tu reserva para esta clase?"))try{await this.reservationService.deleteReservation(e.userReservationId),this.toastService.success("Reserva cancelada correctamente.")}catch(t){console.error(t),this.toastService.error("Error al cancelar.")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-gestionar-reservas"]],decls:12,vars:6,consts:[[1,"reservations-container"],[1,"subtitle"],[1,"week-selector"],[3,"click"],[4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],[1,"header-container"],[1,"day-header"],[1,"date-label"],[1,"period-badge"],[1,"slots-grid"],["class","slot-card",3,"full",4,"ngFor","ngForOf"],[1,"slot-card"],[1,"slot-time"],[1,"time"],[1,"slot-status"],[1,"crowdedness"],[1,"label"],[1,"value"],[1,"progress-bar"],[1,"fill"],["class","attendees-section",4,"ngIf"],[1,"actions"],["class","book-btn cancel-btn",3,"click",4,"ngIf"],["class","book-btn",3,"disabled","click",4,"ngIf"],[1,"attendees-section"],[1,"toggle-attendees-btn",3,"click"],[1,"chevron"],["class","attendees-list",4,"ngIf"],[1,"attendees-list"],["class","attendee-item",4,"ngFor","ngForOf"],[1,"attendee-item"],[1,"attendee-name"],["class","attendee-dogs-container",4,"ngIf"],[1,"attendee-dogs-container"],["class","attendee-dog-single",4,"ngFor","ngForOf"],[1,"attendee-dog-single"],[1,"book-btn","cancel-btn",3,"click"],[1,"book-btn",3,"click","disabled"],[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"dog-selection"],["class","no-dogs-warning",4,"ngIf"],[1,"dog-checkboxes"],["class","dog-checkbox",4,"ngFor","ngForOf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"no-dogs-warning"],["routerLink","/perfil",3,"click"],[1,"dog-checkbox"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"dog-label"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"h2"),V(2,"Gestionar Reservas"),O(),x(3,"p",1),V(4,"Selecciona una franja horaria para reservar tu clase de Agility."),O(),x(5,"div",2)(6,"button",3),re("click",function(){return r.toggleWeek("current")}),V(7," Semana Actual "),O(),x(8,"button",3),re("click",function(){return r.toggleWeek("next")}),V(9," Semana Siguiente "),O()(),Ee(10,cte,11,11,"div",4),O(),Ee(11,dte,22,6,"div",5)),t&2&&($(6),_n("active",r.selectedWeek()==="current"),$(2),_n("active",r.selectedWeek()==="next"),$(2),Y("ngForOf",r.groupedSlots()),$(),Y("ngIf",r.isModalOpen))},dependencies:[rn,Sr,Fn,JE,wc],styles:[".reservations-container[_ngcontent-%COMP%]{padding:2rem 0}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:2rem}.week-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:3rem}.week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:2px solid var(--primary-blue);color:var(--primary-blue);padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:600;transition:all .2s}.week-selector[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%], .week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--primary-blue);color:#fff}.date-label[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-left:10px;font-weight:400}.header-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto 1rem;border-bottom:2px solid var(--secondary-yellow);padding-bottom:.5rem;display:flex;align-items:center;gap:1rem}.day-header[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);font-size:1.5rem}.period-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:999px;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.period-badge.morning[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00;border:1px solid #ffe0b2}.period-badge.afternoon[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;max-width:900px;margin:0 auto 2rem}.slot-card[_ngcontent-%COMP%]{background:var(--white);border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000000d;border:1px solid rgba(0,0,0,.05);display:flex;flex-direction:column;gap:1.25rem;transition:transform .2s ease}.slot-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.slot-time[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:1.1rem}.day[_ngcontent-%COMP%]{color:var(--primary-blue)}.slot-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.crowdedness[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:var(--text-light)}.progress-bar[_ngcontent-%COMP%]{height:6px;background-color:#eee;border-radius:3px;overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background-color:var(--secondary-yellow);transition:width .3s ease}.slot-card.full[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{background-color:#e57373}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.book-btn[_ngcontent-%COMP%]{flex:1;background-color:var(--primary-blue);color:var(--white);border:none;padding:.75rem;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.book-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:color-mix(in srgb,var(--primary-blue),black 10%)}.book-btn[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background-color:#ef5350}.cancel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#d32f2f}.attendees-section[_ngcontent-%COMP%]{margin:10px 0}.toggle-attendees-btn[_ngcontent-%COMP%]{width:100%;background:none;border:1px solid #ddd;border-radius:6px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:.9rem;color:#555;background-color:#fafafa;transition:background .2s}.toggle-attendees-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.chevron[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.chevron.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.attendees-list[_ngcontent-%COMP%]{margin-top:5px;padding:10px;background-color:#f5f7fa;border-radius:6px;font-size:.9rem;border:1px solid #eee}.attendees-title[_ngcontent-%COMP%]{margin:0 0 5px;font-weight:600;color:#555;font-size:.85rem}.attendees-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.attendee-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:4px;border-bottom:1px dotted #ddd;padding-bottom:2px}.attendee-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.attendee-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:2px}.attendee-dogs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding-left:10px}.attendee-dog-single[_ngcontent-%COMP%]{font-size:.85rem;color:#444;background-color:#e8f5e9;padding:2px 6px;border-radius:4px;width:fit-content}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--primary-blue)}.dog-selection[_ngcontent-%COMP%]{margin:20px 0}.dog-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.dog-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:#f0f0f0;padding:8px 12px;border-radius:20px;transition:background .2s}.dog-checkbox[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.dog-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.dog-checkbox[_ngcontent-%COMP%]:has(input:checked){background-color:var(--primary-blue);color:#fff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn-cancel[_ngcontent-%COMP%]{background:none;border:1px solid #ddd;padding:8px 16px;border-radius:6px;cursor:pointer}.btn-confirm[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:700}.btn-confirm[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.no-dogs-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:10px;border-radius:6px;font-size:.9rem;margin-bottom:10px}.no-dogs-warning[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#856404;text-decoration:underline}"]})};var eI=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-contacto"]],decls:47,vars:0,consts:[[1,"contact-container"],[1,"contact-header"],[1,"subtitle"],[1,"contact-wrapper"],[1,"info-column"],[1,"info-card"],[1,"info-item"],[1,"icon-box"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-content"],["href","https://wa.me/34633484345","target","_blank","rel","noopener noreferrer",1,"whatsapp-btn"],[1,"secondary-text","phone-number"],[1,"divider"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],["href","mailto:agilityasturias@gmail.com",1,"email-link"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"map-column"],[1,"map-card"],["src",xT`https://maps.google.com/maps?q=Agility+Asturias,+Langreo&t=&z=15&ie=UTF8&iwloc=&output=embed`,"width","100%","height","100%","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,r){t&1&&(nt(0,"div",0)(1,"div",1)(2,"h2"),V(3,"Cont\xE1ctanos"),ht(),nt(4,"p",2),V(5,"Estamos deseando conocerte a ti y a tu perro"),ht()(),nt(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),dl(),nt(11,"svg",8),Mi(12,"path",9),ht()(),hl(),nt(13,"div",10)(14,"h3"),V(15,"Tel\xE9fono / WhatsApp"),ht(),nt(16,"a",11),V(17," Chat en WhatsApp "),ht(),nt(18,"p",12),V(19,"633 48 43 45"),ht()()(),Mi(20,"div",13),nt(21,"div",6)(22,"div",7),dl(),nt(23,"svg",8),Mi(24,"path",14)(25,"polyline",15),ht()(),hl(),nt(26,"div",10)(27,"h3"),V(28,"Correo Electr\xF3nico"),ht(),nt(29,"a",16),V(30,"agilityasturias@gmail.com"),ht()()(),Mi(31,"div",13),nt(32,"div",6)(33,"div",7),dl(),nt(34,"svg",8),Mi(35,"path",17)(36,"circle",18),ht()(),hl(),nt(37,"div",10)(38,"h3"),V(39,"Ubicaci\xF3n"),ht(),nt(40,"address"),V(41," Antig\xFCo Campo de f\xFAtbol La Salle"),Mi(42,"br"),V(43," Langreo, Asturias, CP: 33939 "),ht()()()()(),nt(44,"div",19)(45,"div",20),Mi(46,"iframe",21),ht()()()())},styles:[".contact-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.contact-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}h2[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:2.5rem;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--text-light)}.contact-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:stretch}.info-card[_ngcontent-%COMP%]{background:var(--white);padding:2.5rem;border-radius:12px;box-shadow:0 4px 20px #0000000d;height:100%;display:flex;flex-direction:column;justify-content:center}.info-item[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:flex-start}.icon-box[_ngcontent-%COMP%]{background-color:#e3f2fd;color:var(--primary-blue);width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.info-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-light);margin:0 0 .5rem;font-weight:600}.phone-number[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--text-main);margin-top:.5rem;letter-spacing:.5px}.whatsapp-btn[_ngcontent-%COMP%]{display:inline-block;background-color:#25d366;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:500;text-decoration:none;transition:background-color .2s;margin-bottom:.25rem}.whatsapp-btn[_ngcontent-%COMP%]:hover{background-color:#1ebc57}.email-link[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:1.1rem;font-weight:500;text-decoration:none}.email-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.secondary-text[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);margin-top:.25rem}address[_ngcontent-%COMP%]{font-style:normal;color:var(--text-main);line-height:1.6;font-size:1.1rem}.divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:2rem 0}.map-card[_ngcontent-%COMP%]{height:100%;min-height:400px;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000000d}@media(max-width:900px){.contact-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-card[_ngcontent-%COMP%]{min-height:300px}.info-card[_ngcontent-%COMP%]{padding:2rem}}@media(max-width:600px){h2[_ngcontent-%COMP%]{font-size:2rem}.contact-container[_ngcontent-%COMP%]{padding:1rem .5rem}.info-card[_ngcontent-%COMP%]{padding:1.5rem}.info-item[_ngcontent-%COMP%]{gap:1rem}.icon-box[_ngcontent-%COMP%]{width:40px;height:40px}.phone-number[_ngcontent-%COMP%]{font-size:1.25rem}.whatsapp-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};function hte(n,e){if(n&1){let t=xe();x(0,"div",5),re("click",function(){let i=ue(t).index,s=J();return le(s.openLightbox(i))}),Be(1,"img",6),x(2,"div",7)(3,"span"),V(4),O()()()}if(n&2){let t=e.$implicit;$(),Y("src",t.url,yn)("alt",t.alt),$(3),qe(t.alt)}}function fte(n,e){if(n&1){let t=xe();x(0,"div",8),re("click",function(){ue(t);let i=J();return le(i.closeLightbox())}),x(1,"div",9),re("click",function(i){return ue(t),le(i.stopPropagation())}),x(2,"button",10),re("click",function(){ue(t);let i=J();return le(i.closeLightbox())}),V(3,"\xD7"),O(),x(4,"button",11),re("click",function(i){ue(t);let s=J();return le(s.prevImage(i))}),V(5,"\u276E"),O(),Be(6,"img",12),x(7,"button",13),re("click",function(i){ue(t);let s=J();return le(s.nextImage(i))}),V(8,"\u276F"),O(),x(9,"div",14),V(10),O()()()}if(n&2){let t=J();$(6),Y("src",t.images()[t.currentImageIndex()].url,yn)("alt",t.images()[t.currentImageIndex()].alt),$(4),Ht(" ",t.images()[t.currentImageIndex()].alt," ")}}var tI=class n{images=Pe([{url:"Images/Perros/Ana y Pompa.jpeg",alt:"Ana y Pompa"},{url:"Images/Perros/Carysse.jpeg",alt:"Carysse"},{url:"Images/Perros/Cris y Peca.jpeg",alt:"Cris y Peca"},{url:"Images/Perros/Diego Tuco y Ponga.jpeg",alt:"Diego Tuco y Ponga"},{url:"Images/Perros/Fiti\xF1o y Fits.jpeg",alt:"Fiti\xF1o y Fits"},{url:"Images/Perros/Golti.jpeg",alt:"Golti"},{url:"Images/Perros/Helena y Pumba.jpeg",alt:"Helena y Pumba"},{url:"Images/Perros/Jes\xFAs y Ginebra.jpeg",alt:"Jes\xFAs y Ginebra"},{url:"Images/Perros/Kinder.jpeg",alt:"Kinder"},{url:"Images/Perros/Leah.jpeg",alt:"Leah"},{url:"Images/Perros/Lyan y Boo.jpeg",alt:"Lyan y Boo"},{url:"Images/Perros/Lyan y Shaggy.jpeg",alt:"Lyan y Shaggy"},{url:"Images/Perros/Magda y Balto.jpeg",alt:"Magda y Balto"},{url:"Images/Perros/Marina-Chris Dafne.jpeg",alt:"Marina-Chris Dafne"},{url:"Images/Perros/Merle y Noly.jpeg",alt:"Merle y Noly"},{url:"Images/Perros/Moka.jpeg",alt:"Moka"},{url:"Images/Perros/Nala y Rosa.jpeg",alt:"Nala y Rosa"},{url:"Images/Perros/Narcea.jpeg",alt:"Narcea"},{url:"Images/Perros/Pompa.jpeg",alt:"Pompa"},{url:"Images/Perros/Pumba.jpeg",alt:"Pumba"},{url:"Images/Perros/Raylee.jpeg",alt:"Raylee"},{url:"Images/Perros/Sami.jpeg",alt:"Sami"},{url:"Images/Perros/Sami H.jpeg",alt:"Sami H"}]);lightboxOpen=Pe(!1);currentImageIndex=Pe(0);constructor(){this.shuffleImages()}shuffleImages(){let e=this.images();for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}this.images.set([...e])}openLightbox(e){this.currentImageIndex.set(e),this.lightboxOpen.set(!0),document.body.style.overflow="hidden"}closeLightbox(){this.lightboxOpen.set(!1),document.body.style.overflow="auto"}nextImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t+1)%r)}prevImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t-1+r)%r)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-galeria"]],decls:8,vars:3,consts:[[1,"gallery-container"],[1,"subtitle"],[1,"gallery-masonry"],["class","gallery-item",3,"click",4,"ngFor","ngForOf"],["class","lightbox",3,"click",4,"ngIf"],[1,"gallery-item",3,"click"],["loading","lazy",3,"src","alt"],[1,"overlay"],[1,"lightbox",3,"click"],[1,"lightbox-content",3,"click"],[1,"close-btn",3,"click"],[1,"nav-btn","prev",3,"click"],[1,"lightbox-img",3,"src","alt"],[1,"nav-btn","next",3,"click"],[1,"lightbox-caption"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"h2"),V(2,"Galer\xEDa"),O(),x(3,"p",1),V(4,"Momentos destacados de nuestro equipo."),O(),x(5,"div",2),Ee(6,hte,5,3,"div",3),O()(),Ee(7,fte,11,3,"div",4)),t&2&&($(5),Y("@listAnimation",r.images().length),$(),Y("ngForOf",r.images()),$(),Y("ngIf",r.lightboxOpen()))},dependencies:[rn,Sr,Fn],styles:[".gallery-container[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:1400px;margin:0 auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--primary-blue);font-size:2.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:3rem;font-size:1.1rem}.gallery-masonry[_ngcontent-%COMP%]{column-count:3;column-gap:1.5rem}.gallery-item[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:1.5rem;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;cursor:pointer;position:relative;transition:transform .3s cubic-bezier(.25,.8,.25,1),box-shadow .3s ease}.gallery-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;transition:transform .5s ease}.gallery-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000004d;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.gallery-item[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-weight:600;border:1px solid white;padding:.5rem 1rem;border-radius:20px;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.lightbox[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90vh;display:flex;flex-direction:column;align-items:center}.lightbox-img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;border-radius:4px;box-shadow:0 5px 30px #00000080}.lightbox-caption[_ngcontent-%COMP%]{color:#fff;margin-top:1rem;font-size:1.1rem;font-weight:300}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:none;border:none;color:#fff;font-size:2.5rem;cursor:pointer;line-height:1;padding:0}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#ffffff1a;border:none;color:#fff;font-size:2rem;cursor:pointer;padding:1rem;border-radius:50%;transition:background .2s}.nav-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.prev[_ngcontent-%COMP%]{left:-80px}.next[_ngcontent-%COMP%]{right:-80px}@media(max-width:900px){.gallery-masonry[_ngcontent-%COMP%]{column-count:2}}@media(max-width:600px){.gallery-masonry[_ngcontent-%COMP%]{column-count:1}.nav-btn[_ngcontent-%COMP%]{padding:.5rem;font-size:1.5rem}.prev[_ngcontent-%COMP%]{left:-10px}.next[_ngcontent-%COMP%]{right:-10px}.close-btn[_ngcontent-%COMP%]{top:-30px;right:10px}}"],data:{animation:[i0("listAnimation",[o0("* => *",[a0(":enter",[Nc({opacity:0,transform:"translateY(20px)"}),c0(100,[s0("0.5s ease-out",Nc({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};var Fd=class n{firestore;competitionsSignal=Pe([]);unsubscribe=null;constructor(){let e;try{e=Nr()}catch{e=Hs(pi.firebase)}this.firestore=du(e);let t=os(this.firestore,"competitions");this.unsubscribe=Td(t,r=>{let i=r.docs.map(s=>U({id:s.id},s.data()));this.competitionsSignal.set(i)},r=>{console.error("Error reading competitions:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getCompetitions(){return this.competitionsSignal}addCompetition(e){let t=os(this.firestore,"competitions");return wd(t,e)}updateCompetition(e){let t=as(this.firestore,`competitions/${e.id}`),s=e,{id:r}=s,i=xo(s,["id"]);return XU(t,i)}deleteCompetition(e){let t=as(this.firestore,`competitions/${e}`);return Id(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function pte(n,e){if(n&1&&(x(0,"span"),V(1),xi(2,"date"),O()),n&2){let t=J().$implicit;$(),qe(Oi(2,1,t.date,"d"))}}function mte(n,e){if(n&1){let t=xe();x(0,"div",8),re("click",function(){let i=ue(t).$implicit,s=J(2);return le(i.isCompetition&&s.openModal(i.competitionDetails))}),Ee(1,pte,3,4,"span",9),O()}if(n&2){let t=e.$implicit;_n("other-month",t.isOtherMonth)("weekend",t.isWeekend)("competition",t.isCompetition),$(),Y("ngIf",!t.isOtherMonth)}}function gte(n,e){if(n&1&&(x(0,"div",4)(1,"h2"),V(2),O(),x(3,"div",5)(4,"span"),V(5,"L"),O(),x(6,"span"),V(7,"M"),O(),x(8,"span"),V(9,"X"),O(),x(10,"span"),V(11,"J"),O(),x(12,"span"),V(13,"V"),O(),x(14,"span"),V(15,"S"),O(),x(16,"span"),V(17,"D"),O()(),x(18,"div",6),Ee(19,mte,2,7,"div",7),O()()),n&2){let t=e.$implicit;$(2),qe(t.name),$(17),Y("ngForOf",t.days)}}function yte(n,e){if(n&1){let t=xe();x(0,"div",15)(1,"img",21),re("click",function(){ue(t);let i=J(3);return le(i.expandImage())}),O()()}if(n&2){let t=J(3);$(),Y("src",t.selectedCompetition.cartel,yn)}}function _te(n,e){if(n&1){let t=xe();x(0,"div",22),re("click",function(){ue(t);let i=J(3);return le(i.closeImage())}),x(1,"div",23),Be(2,"img",24),O()()}if(n&2){let t=J(3);$(2),Y("src",t.selectedCompetition.cartel,yn)}}function vte(n,e){if(n&1&&(x(0,"div",14)(1,"h3"),V(2),O(),x(3,"div",15)(4,"strong"),V(5,"Fecha:"),O(),x(6,"span"),V(7),xi(8,"date"),O()(),x(9,"div",15)(10,"strong"),V(11,"Cierre Inscripci\xF3n:"),O(),x(12,"span"),V(13),xi(14,"date"),O()(),x(15,"div",15)(16,"strong"),V(17,"Forma de Pago:"),O(),x(18,"p",16),V(19),O()(),Ee(20,yte,2,1,"div",17)(21,_te,3,1,"div",18),x(22,"div",19)(23,"a",20),V(24," Inscribirse "),O()()()),n&2){let t=J(2);$(2),qe(t.selectedCompetition.lugar),$(5),qe(Oi(8,7,t.selectedCompetition.fechaEvento,"fullDate")),$(6),qe(Oi(14,10,t.selectedCompetition.fechaLimite,"shortDate")),$(6),qe(t.selectedCompetition.formaPago),$(),Y("ngIf",t.selectedCompetition.cartel),$(),Y("ngIf",t.isImageExpanded),$(2),Y("href",t.selectedCompetition.enlace,yn)}}function Ete(n,e){if(n&1){let t=xe();x(0,"div",10),re("click",function(){ue(t);let i=J();return le(i.closeModal())}),x(1,"div",11),re("click",function(i){return ue(t),le(i.stopPropagation())}),x(2,"button",12),re("click",function(){ue(t);let i=J();return le(i.closeModal())}),V(3,"\xD7"),O(),Ee(4,vte,25,13,"div",13),O()()}if(n&2){let t=J();$(4),Y("ngIf",t.selectedCompetition)}}var nI=class n{constructor(e){this.competitionService=e;this.competitions=this.competitionService.getCompetitions()}currentYear=2026;monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];competitions;months=$n(()=>{let e=[],t=this.competitions();for(let r=0;r<12;r++)e.push({name:this.monthNames[r],days:this.getDaysInMonth(r,t)});return e});selectedCompetition=null;isModalOpen=!1;getDaysInMonth(e,t){let r=[],i=new Date(this.currentYear,e,1),s=(i.getDay()+6)%7;for(let o=0;o<s;o++)r.push({date:new Date(this.currentYear,e,-o),isCompetition:!1,isWeekend:!1,isOtherMonth:!0});for(;i.getMonth()===e;){let o=i.getDay(),a=o===0||o===6,c=i.getFullYear(),d=(i.getMonth()+1).toString().padStart(2,"0"),h=i.getDate().toString().padStart(2,"0"),m=`${c}-${d}-${h}`,v=t.find(R=>R.fechaEvento===m),C=!!v;r.push({date:new Date(i),isCompetition:C,isWeekend:a,isOtherMonth:!1,competitionDetails:v}),i.setDate(i.getDate()+1)}return r}openModal(e){e&&(this.selectedCompetition=e,this.isModalOpen=!0,document.body.style.overflow="hidden")}closeModal(){this.isModalOpen=!1,this.selectedCompetition=null,this.isImageExpanded=!1,document.body.style.overflow="auto"}isImageExpanded=!1;expandImage(){this.isImageExpanded=!0}closeImage(){this.isImageExpanded=!1}static \u0275fac=function(t){return new(t||n)(he(Fd))};static \u0275cmp=_t({type:n,selectors:[["app-calendario"]],decls:6,vars:3,consts:[[1,"calendar-container"],[1,"months-grid"],["class","month-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"month-card"],[1,"weekdays"],[1,"days-grid"],["class","day",3,"other-month","weekend","competition","click",4,"ngFor","ngForOf"],[1,"day",3,"click"],[4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],["class","competition-details",4,"ngIf"],[1,"competition-details"],[1,"detail-row"],[1,"payment-info"],["class","detail-row",4,"ngIf"],["class","image-overlay",3,"click",4,"ngIf"],[1,"modal-actions"],["target","_blank",1,"btn-register",3,"href"],["alt","Cartel","title","Click para ampliar",1,"modal-poster",3,"click","src"],[1,"image-overlay",3,"click"],[1,"image-wrapper"],["alt","Cartel Ampliado",3,"src"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"h1"),V(2),O(),x(3,"div",1),Ee(4,gte,20,2,"div",2),O(),Ee(5,Ete,5,1,"div",3),O()),t&2&&($(2),Ht("Calendario de Competiciones ",r.currentYear),$(2),Y("ngForOf",r.months()),$(),Y("ngIf",r.isModalOpen))},dependencies:[rn,Sr,Fn,wc],styles:[".calendar-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto;text-align:center}h1[_ngcontent-%COMP%]{color:#036;margin-bottom:2rem}.months-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.month-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 5px #0000001a}.month-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#036;font-size:1.2rem;margin-bottom:1rem;text-transform:uppercase}.weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:.5rem;font-weight:700;color:#666}.days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:2px}.day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border-radius:4px;font-size:.9rem;position:relative}.day[_ngcontent-%COMP%]:not(.other-month):hover{background-color:#f0f0f0}.other-month[_ngcontent-%COMP%]{color:#ccc}.weekend[_ngcontent-%COMP%]{background-color:#fff3cd}.competition[_ngcontent-%COMP%]{background-color:#036;color:#fff;cursor:pointer;font-weight:700;transition:transform .2s,background-color .2s}.competition[_ngcontent-%COMP%]:hover{background-color:#004080;transform:scale(1.1);z-index:1;box-shadow:0 2px 4px #0003}.competition.weekend[_ngcontent-%COMP%]{background-color:#036}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 10px 25px #0003;text-align:left;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:2rem;line-height:1;cursor:pointer;color:#666;z-index:10}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.competition-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#036;margin-top:0;border-bottom:2px solid #FFCC00;padding-bottom:.5rem;margin-bottom:1.5rem}.detail-row[_ngcontent-%COMP%]{margin-bottom:1rem}.detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#555;margin-bottom:.25rem}.payment-info[_ngcontent-%COMP%]{margin:0;white-space:pre-wrap;background:#f8f9fa;padding:.5rem;border-radius:4px;font-size:.9rem}.modal-poster[_ngcontent-%COMP%]{width:100%;max-height:300px;object-fit:contain;border-radius:8px;margin-top:.5rem;box-shadow:0 4px 8px #0000001a;cursor:zoom-in;transition:transform .2s}.modal-poster[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;z-index:2000;display:flex;justify-content:center;align-items:center;cursor:zoom-out;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:95vw;max-height:95vh;object-fit:contain;border-radius:4px;box-shadow:0 0 20px #ffffff1a}.modal-actions[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.btn-register[_ngcontent-%COMP%]{display:inline-block;background:#036;color:#fff;padding:.75rem 2rem;border-radius:6px;text-decoration:none;font-weight:700;transition:background .2s}.btn-register[_ngcontent-%COMP%]:hover{background:#004080}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};var Gp=n=>({"is-invalid":n});function Ite(n,e){if(n&1){let t=xe();x(0,"button",6),re("click",function(){ue(t);let i=J();return le(i.initNewCompetition())}),x(1,"span"),V(2,"+"),O(),V(3," Nueva Competici\xF3n "),O()}}function wte(n,e){if(n&1){let t=xe();x(0,"button",7),re("click",function(){ue(t);let i=J();return le(i.toggleView())}),V(1," \u2190 Volver al Listado "),O()}}function Tte(n,e){if(n&1){let t=xe();x(0,"tr")(1,"td")(2,"strong"),V(3),O()(),x(4,"td"),V(5),xi(6,"date"),O(),x(7,"td"),V(8),xi(9,"date"),O(),x(10,"td",14)(11,"button",15),re("click",function(){let i=ue(t).$implicit,s=J(2);return le(s.editCompetition(i))}),V(12," Editar "),O(),x(13,"button",16),re("click",function(){let i=ue(t).$implicit,s=J(2);return le(s.deleteCompetition(i.id))}),V(14," Eliminar "),O()()()}if(n&2){let t=e.$implicit;$(3),qe(t.lugar),$(2),qe(Oi(6,3,t.fechaEvento,"dd/MM/yyyy")),$(3),qe(Oi(9,6,t.fechaLimite,"dd/MM/yyyy"))}}function bte(n,e){n&1&&(x(0,"tr")(1,"td",17),V(2," No hay competiciones registradas actualmente. "),O()())}function Cte(n,e){if(n&1&&(x(0,"div",8)(1,"div",9)(2,"table",10)(3,"thead")(4,"tr")(5,"th"),V(6,"Lugar"),O(),x(7,"th"),V(8,"Fecha Evento"),O(),x(9,"th"),V(10,"Cierre Inscripci\xF3n"),O(),x(11,"th",11),V(12,"Acciones"),O()()(),x(13,"tbody"),Ee(14,Tte,15,9,"tr",12)(15,bte,3,0,"tr",13),O()()()()),n&2){let t=J();$(14),Y("ngForOf",t.competitions()),$(),Y("ngIf",t.competitions().length===0)}}function Ste(n,e){n&1&&(x(0,"div",41),V(1," El lugar del evento es requerido. "),O())}function Dte(n,e){n&1&&(x(0,"div",41),V(1," La fecha del evento es requerida. "),O())}function Ate(n,e){n&1&&(x(0,"div",41),V(1," La fecha l\xEDmite es requerida. "),O())}function Rte(n,e){n&1&&(x(0,"div",41),V(1," La forma de pago es requerida. "),O())}function Pte(n,e){n&1&&(x(0,"div",41),V(1," Se requiere una URL v\xE1lida (http:// o https://). "),O())}function Nte(n,e){if(n&1&&(x(0,"div",42),Be(1,"img",43),O()),n&2){let t=J(2);$(),Y("src",t.f.cartel.value,yn)}}function kte(n,e){if(n&1){let t=xe();x(0,"div",18)(1,"h3",19),V(2),O(),x(3,"form",20),re("ngSubmit",function(){ue(t);let i=J();return le(i.onSubmit())}),x(4,"div",21)(5,"label",22),V(6,"Lugar del Evento"),O(),Be(7,"input",23),Ee(8,Ste,2,0,"div",24),O(),x(9,"div",25)(10,"div",26)(11,"label",27),V(12,"Fecha Evento"),O(),Be(13,"input",28),Ee(14,Dte,2,0,"div",24),O(),x(15,"div",26)(16,"label",29),V(17,"Fecha L\xEDmite de Inscripci\xF3n"),O(),Be(18,"input",30),Ee(19,Ate,2,0,"div",24),O()(),x(20,"div",21)(21,"label",31),V(22,"Forma de Pago"),O(),Be(23,"textarea",32),Ee(24,Rte,2,0,"div",24),O(),x(25,"div",21)(26,"label",33),V(27,"Enlace Inscripci\xF3n"),O(),Be(28,"input",34),Ee(29,Pte,2,0,"div",24),O(),x(30,"div",21)(31,"label",35),V(32,"Cartel (Imagen)"),O(),x(33,"input",36),re("change",function(i){ue(t);let s=J();return le(s.onFileSelected(i))}),O(),Ee(34,Nte,2,1,"div",37),O(),x(35,"div",38)(36,"button",39),V(37),O(),x(38,"button",40),re("click",function(){ue(t);let i=J();return le(i.toggleView())}),V(39," Cancelar "),O()()()()}if(n&2){let t=J();$(2),qe(t.isEditing()?"Editar Competici\xF3n":"Nueva Competici\xF3n"),$(),Y("formGroup",t.competitionForm),$(4),Y("ngClass",_c(14,Gp,t.submitted&&t.f.lugar.errors)),$(),Y("ngIf",t.submitted&&t.f.lugar.errors),$(5),Y("ngClass",_c(16,Gp,t.submitted&&t.f.fechaEvento.errors)),$(),Y("ngIf",t.submitted&&t.f.fechaEvento.errors),$(4),Y("ngClass",_c(18,Gp,t.submitted&&t.f.fechaLimite.errors)),$(),Y("ngIf",t.submitted&&t.f.fechaLimite.errors),$(4),Y("ngClass",_c(20,Gp,t.submitted&&t.f.formaPago.errors)),$(),Y("ngIf",t.submitted&&t.f.formaPago.errors),$(4),Y("ngClass",_c(22,Gp,t.submitted&&t.f.enlace.errors)),$(),Y("ngIf",t.submitted&&t.f.enlace.errors),$(5),Y("ngIf",t.f.cartel.value),$(3),Ht(" ",t.isEditing()?"Guardar Cambios":"Crear Competici\xF3n"," ")}}var rI=class n{constructor(e,t){this.fb=e;this.competitionService=t;this.competitions=this.competitionService.getCompetitions(),this.competitionForm=this.fb.group({lugar:["",lo.required],fechaEvento:["",lo.required],fechaLimite:["",lo.required],formaPago:["",lo.required],enlace:["",[lo.required,lo.pattern("https?://.+")]],cartel:[null]})}toastService=j(Sa);competitions;isEditing=Pe(!1);showForm=Pe(!1);competitionForm;submitted=!1;currentCompetitionId=null;get f(){return this.competitionForm.controls}toggleView(){this.showForm.update(e=>!e),this.showForm()||this.resetForm()}initNewCompetition(){this.resetForm(),this.showForm.set(!0),this.isEditing.set(!1)}existingCartel=null;editCompetition(e){this.currentCompetitionId=e.id,this.existingCartel=e.cartel,this.competitionForm.patchValue({lugar:e.lugar,fechaEvento:e.fechaEvento,fechaLimite:e.fechaLimite,formaPago:e.formaPago,enlace:e.enlace}),this.showForm.set(!0),this.isEditing.set(!0)}deleteCompetition(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar esta competici\xF3n?")&&this.competitionService.deleteCompetition(e)}async onFileSelected(e){let t=e.target.files[0];if(t)try{let r=await this.compressImage(t);if(r.length>800*1024){this.toastService.warning("La imagen sigue siendo demasiado pesada incluso despues de comprimir. Por favor, elige otra.");return}this.competitionForm.patchValue({cartel:r})}catch(r){console.error("Error handling image:",r),this.toastService.error("Hubo un error al procesar la imagen.")}}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target.result,o.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=800,h=800,m=o.width,v=o.height;if(m>v?m>d&&(v*=d/m,m=d):v>h&&(m*=h/v,v=h),a.width=m,a.height=v,c){c.drawImage(o,0,0,m,v);let C=a.toDataURL("image/jpeg",.7);t(C)}else r(new Error("Could not get canvas context"))},o.onerror=a=>r(a)},i.onerror=s=>r(s)})}onFileChange(e){this.onFileSelected(e)}async onSubmit(){if(this.submitted=!0,this.competitionForm.invalid)return;let e=this.competitionForm.value,t=e.cartel||(this.isEditing()?this.existingCartel:null),r=ae(U({},e),{cartel:t});this.isEditing()&&this.currentCompetitionId?(await this.competitionService.updateCompetition(U({id:this.currentCompetitionId},r)),this.toastService.success("Competici\xF3n actualizada")):(await this.competitionService.addCompetition(r),this.toastService.success("Competici\xF3n creada")),this.toggleView()}resetForm(){this.submitted=!1,this.currentCompetitionId=null,this.existingCartel=null,this.competitionForm.reset()}static \u0275fac=function(t){return new(t||n)(he($B),he(Fd))};static \u0275cmp=_t({type:n,selectors:[["app-crud-competicion"]],decls:8,vars:4,consts:[[1,"crud-container"],[1,"header"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","list-view",4,"ngIf"],["class","form-view",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"list-view"],[1,"table-responsive"],[1,"table"],[2,"width","150px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"actions"],["title","Editar",1,"btn-icon","edit",3,"click"],["title","Eliminar",1,"btn-icon","delete",3,"click"],["colspan","4",1,"empty-msg"],[1,"form-view"],[1,"form-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","lugar"],["type","text","id","lugar","formControlName","lugar","placeholder","Ej: Polideportivo Gij\xF3n",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-row"],[1,"form-group","col"],["for","fechaEvento"],["type","date","id","fechaEvento","formControlName","fechaEvento",1,"form-control",3,"ngClass"],["for","fechaLimite"],["type","date","id","fechaLimite","formControlName","fechaLimite",1,"form-control",3,"ngClass"],["for","formaPago"],["id","formaPago","formControlName","formaPago","rows","3","placeholder","Instrucciones de pago...",1,"form-control",3,"ngClass"],["for","enlace"],["type","url","id","enlace","formControlName","enlace","placeholder","https://...",1,"form-control",3,"ngClass"],["for","cartel"],["type","file","id","cartel","accept","image/*",1,"form-control",3,"change"],["class","mt-2",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"invalid-feedback"],[1,"mt-2"],["alt","Preview",2,"max-height","150px","border-radius","4px","box-shadow","0 2px 4px rgba(0,0,0,0.1)",3,"src"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"h2"),V(3,"Gesti\xF3n de Competiciones"),O(),Ee(4,Ite,4,0,"button",2)(5,wte,2,0,"button",3),O(),Ee(6,Cte,16,2,"div",4)(7,kte,40,24,"div",5),O()),t&2&&($(4),Y("ngIf",!r.showForm()),$(),Y("ngIf",r.showForm()),$(),Y("ngIf",!r.showForm()),$(),Y("ngIf",r.showForm()))},dependencies:[rn,tf,Sr,Fn,HB,UB,xd,WE,NB,QR,KR,wc],styles:[`.crud-container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:2.5rem;background:#fff;border-radius:12px;box-shadow:0 8px 24px #0033661a;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem;padding-bottom:1rem;border-bottom:2px solid #f0f2f5}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--primary-blue, #003366);font-weight:700}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:.95rem;transition:all .2s ease;display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#036,#004080);color:#fff;box-shadow:0 4px 6px #0363}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#004080,#00509e);box-shadow:0 6px 8px #00336640}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e6ea;color:#212529}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 4px 6px #28a74533}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);box-shadow:0 6px 8px #28a74540}.btn-cancel[_ngcontent-%COMP%]{background:transparent;color:#6c757d;border:1px solid #ced4da;margin-left:.75rem}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#343a40;border-color:#adb5bd}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e9ecef}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1rem;text-align:left;border-bottom:1px solid #e9ecef}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:3rem!important}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{padding:.4rem .8rem;border:1px solid #dee2e6;background:#fff;border-radius:4px;cursor:pointer;font-size:.85rem;transition:all .2s;color:#495057}.btn-icon.edit[_ngcontent-%COMP%]:hover{background:#fff3cd;color:#856404;border-color:#ffeeba}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#f8d7da;color:#721c24;border-color:#f5c6cb}.form-view[_ngcontent-%COMP%]{background:#f8f9fa;padding:2rem;border-radius:8px;border:1px solid #e9ecef;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:var(--primary-blue, #003366);font-size:1.4rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-group.col[_ngcontent-%COMP%]{flex:1}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#343a40;font-size:.95rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:6px;font-size:1rem;transition:border-color .2s,box-shadow .2s;box-sizing:border-box;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#004080;box-shadow:0 0 0 3px #0040801a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5zM6 8.2a.3.3 0 110-.6.3.3 0 010 .6z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;align-items:center}@media(max-width:768px){.crud-container[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.btn[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-top:.5rem;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}}`]})};function Mte(n,e){n&1&&(x(0,"div",13)(1,"p"),V(2,"A\xFAn no has a\xF1adido ning\xFAn perro."),O()())}function xte(n,e){if(n&1){let t=xe();x(0,"div",14)(1,"div",15),V(2,"\u{1F415}"),O(),x(3,"div",16)(4,"span",17),V(5),O()(),x(6,"button",18),re("click",function(){let i=ue(t).$implicit,s=J(2);return le(s.deleteDog(i.id))}),V(7,"\u{1F5D1}\uFE0F"),O()()}if(n&2){let t=e.$implicit;$(5),qe(t.name)}}function Ote(n,e){if(n&1){let t=xe();x(0,"div",1)(1,"div",2),Be(2,"img",3),x(3,"div",4)(4,"h2"),V(5),O(),x(6,"p"),V(7),O()()(),x(8,"div",5)(9,"h3"),V(10,"\u{1F436} Mis Perretes"),O(),x(11,"p",6),V(12,"A\xF1ade aqu\xED a tus compa\xF1eros de Agility."),O(),x(13,"div",7)(14,"input",8),cy("ngModelChange",function(i){ue(t);let s=J();return lb(s.newDogName,i)||(s.newDogName=i),le(i)}),re("keyup.enter",function(){ue(t);let i=J();return le(i.addDog())}),O(),x(15,"button",9),re("click",function(){ue(t);let i=J();return le(i.addDog())}),V(16," A\xF1adir Perro "),O()(),x(17,"div",10),Ee(18,Mte,3,0,"div",11)(19,xte,8,1,"div",12),O()()()}if(n&2){let t=e.ngIf,r=J();$(2),Y("src",t.photoURL||"assets/default-user.png",yn),$(3),qe(t.displayName),$(2),qe(t.email),$(7),ay("ngModel",r.newDogName),$(),Y("disabled",!r.newDogName().trim()),$(3),Y("ngIf",r.dogs().length===0),$(),Y("ngForOf",r.dogs())}}var iI=class n{authService=j(Fr);dogService=j(Od);newDogName=Pe("");dogs=this.dogService.getDogs();constructor(){pl(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}async addDog(){if(!this.newDogName().trim())return;let e=this.authService.currentUserSignal();if(e)try{await this.dogService.addDog({userId:e.uid,name:this.newDogName(),createdAt:Date.now()}),this.newDogName.set("")}catch(t){console.error("Error adding dog:",t)}}async deleteDog(e){confirm("\xBFSeguro que quieres eliminar a este perrete?")&&await this.dogService.deleteDog(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-perfil"]],decls:1,vars:1,consts:[["class","perfil-container",4,"ngIf"],[1,"perfil-container"],[1,"profile-header"],["alt","Avatar",1,"profile-avatar",3,"src"],[1,"profile-info"],[1,"dogs-section"],[1,"section-desc"],[1,"add-dog-form"],["type","text","placeholder","Nombre de tu perro...",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-add",3,"click","disabled"],[1,"dogs-list"],["class","empty-state",4,"ngIf"],["class","dog-card",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"dog-card"],[1,"dog-icon"],[1,"dog-info"],[1,"dog-name"],["title","Eliminar",1,"btn-delete",3,"click"]],template:function(t,r){t&1&&Ee(0,Ote,20,7,"div",0),t&2&&Y("ngIf",r.authService.currentUserSignal())},dependencies:[rn,Sr,Fn,JE,xd,WE,WR],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding-bottom:2rem;border-bottom:1px solid #eee;margin-bottom:2rem}.profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:3px solid var(--accent-orange);flex-shrink:0}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);word-break:break-word}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666;word-break:break-all}.dogs-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.5rem}.section-desc[_ngcontent-%COMP%]{color:#777;margin-bottom:1.5rem}.add-dog-form[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:2rem}.add-dog-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #ddd;border-radius:6px;font-size:1rem;min-width:0}.btn-add[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:0 20px;border-radius:6px;cursor:pointer;font-weight:700;transition:background .2s;white-space:nowrap}.btn-add[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#004494}.btn-add[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.dogs-list[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(100%,1fr))}.dog-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f9f9f9;padding:15px;border-radius:8px;border:1px solid #eee;transition:transform .2s}.dog-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#ddd}.dog-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:15px;background-color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;box-shadow:0 2px 4px #0000000d;flex-shrink:0}.dog-info[_ngcontent-%COMP%]{flex:1;min-width:0}.dog-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#333;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.2rem;opacity:.6;transition:opacity .2s;padding:10px}.btn-delete[_ngcontent-%COMP%]:hover{opacity:1}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;font-style:italic;background-color:#f9f9f9;border-radius:8px}@media(max-width:600px){.perfil-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.add-dog-form[_ngcontent-%COMP%]{flex-direction:column}.btn-add[_ngcontent-%COMP%]{width:100%;padding:12px}.dogs-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Wp=async(n,e)=>{let t=j(Fr),r=j(Rc);return await t.getAuthState()?!0:(r.navigate(["/login"]),!1)};var GB=[{path:"",component:VE},{path:"reservas",component:ZE,canActivate:[Wp]},{path:"contacto",component:eI},{path:"galeria",component:tI},{path:"calendario",component:nI,canActivate:[Wp]},{path:"gestionar-competiciones",component:rI,canActivate:[Wp]},{path:"perfil",component:iI,canActivate:[Wp]},{path:"login",component:LE}];Tx(uB);fC(pi.firebase);var WB={providers:[Qw(),AO(),r0(GB),{provide:vc,useValue:"es"},aF(()=>fC(pi.firebase)),Kj(()=>Qj()),wV(()=>TV()),aB(()=>cB()),{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:B0.PROVIDER_ID,provider:new B0("YOUR_GOOGLE_CLIENT_ID")}],onError:n=>{console.error(n)}}},kO("ngsw-worker.js",{enabled:!Qh(),registrationStrategy:"registerWhenStable:30000"})]};function Fte(n,e){if(n&1){let t=xe();x(0,"li")(1,"a",13),re("click",function(){ue(t);let i=J();return le(i.closeMenu())}),V(2,"Reservas"),O()()}}function Lte(n,e){if(n&1){let t=xe();x(0,"li")(1,"a",14),re("click",function(){ue(t);let i=J();return le(i.closeMenu())}),V(2,"Calendario"),O()()}}function Vte(n,e){if(n&1){let t=xe();x(0,"li")(1,"a",15),re("click",function(){ue(t);let i=J();return le(i.closeMenu())}),V(2,"Competiciones"),O()()}}function Ute(n,e){if(n&1){let t=xe();x(0,"a",16),re("click",function(){ue(t);let i=J();return le(i.closeMenu())}),V(1," Iniciar Sesi\xF3n "),O()}}function jte(n,e){if(n&1&&Be(0,"img",30),n&2){let t=J().ngIf;Y("src",t.photoURL,yn)}}function Bte(n,e){if(n&1&&(x(0,"div",31),V(1),O()),n&2){let t=J().ngIf;$(),Ht(" ",(t.displayName==null?null:t.displayName.charAt(0))||"U"," ")}}function $te(n,e){if(n&1){let t=xe();x(0,"div",32),re("click",function(){ue(t);let i=J(2);return le(i.closeMenu())}),O()}}function Hte(n,e){if(n&1){let t=xe();x(0,"div",17)(1,"button",18),re("click",function(i){ue(t);let s=J();return le(s.toggleUserMenu(i))}),Ee(2,jte,1,1,"img",19)(3,Bte,2,1,"ng-template",null,0,db),x(5,"span",20),V(6,"\u25BC"),O()(),x(7,"div",21)(8,"div",22)(9,"p",23),V(10),O(),x(11,"p",24),V(12),O()(),Be(13,"div",25),x(14,"a",26),re("click",function(){ue(t);let i=J();return le(i.closeMenu())}),V(15,"\u{1F436} Mis Perretes"),O(),x(16,"a",27),re("click",function(){ue(t);let i=J();return le(i.closeMenu())}),V(17,"\u{1F4C5} Mis Reservas"),O(),x(18,"button",28),re("click",function(){ue(t);let i=J();return le(i.logout())}),V(19,"\u{1F6AA} Cerrar Sesi\xF3n"),O()(),Ee(20,$te,1,0,"div",29),O()}if(n&2){let t=e.ngIf,r=ub(4),i=J();$(2),Y("ngIf",t.photoURL)("ngIfElse",r),$(5),_n("show",i.isUserMenuOpen),$(3),qe(t.displayName),$(2),qe(t.email),$(8),Y("ngIf",i.isUserMenuOpen)}}var sI=class n{isMenuOpen=!1;isUserMenuOpen=!1;authService=j(Fr);toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1,this.isUserMenuOpen=!1}toggleUserMenu(e){e&&(e.preventDefault(),e.stopPropagation()),this.isUserMenuOpen=!this.isUserMenuOpen}async logout(){await this.authService.logout(),this.closeMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-navbar"]],decls:26,vars:9,consts:[["defaultAvatar",""],[1,"app-header"],[1,"logo-area"],[1,"mobile-menu-btn",3,"click"],[1,"bar"],["src","Images/Agility_Asturias_logo.jpg","alt","Agility Asturias Logo",1,"nav-logo"],["routerLink","/",3,"click"],[4,"ngIf"],["routerLink","/galeria",3,"click"],["routerLink","/contacto",3,"click"],[1,"auth-item"],["routerLink","/login","class","login-btn",3,"click",4,"ngIf"],["class","user-dropdown-container",4,"ngIf"],["routerLink","/reservas",3,"click"],["routerLink","/calendario",3,"click"],["routerLink","/gestionar-competiciones",3,"click"],["routerLink","/login",1,"login-btn",3,"click"],[1,"user-dropdown-container"],[1,"user-avatar-btn",3,"click"],["alt","User","class","nav-user-img","referrerpolicy","no-referrer",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-arrow"],[1,"user-dropdown-menu"],[1,"user-header"],[1,"name"],[1,"email"],[1,"dropdown-divider"],["routerLink","/perfil",1,"dropdown-item",3,"click"],["routerLink","/reservas",1,"dropdown-item",3,"click"],[1,"dropdown-item","logout-item",3,"click"],["class","dropdown-backdrop",3,"click",4,"ngIf"],["alt","User","referrerpolicy","no-referrer",1,"nav-user-img",3,"src"],[1,"nav-user-img","default-avatar-placeholder"],[1,"dropdown-backdrop",3,"click"]],template:function(t,r){t&1&&(x(0,"header",1)(1,"div",2)(2,"button",3),re("click",function(){return r.toggleMenu()}),Be(3,"span",4)(4,"span",4)(5,"span",4),O(),Be(6,"img",5),x(7,"h1"),V(8,"Agility Asturias"),O()(),x(9,"nav")(10,"ul")(11,"li")(12,"a",6),re("click",function(){return r.closeMenu()}),V(13,"Home"),O()(),Ee(14,Fte,3,0,"li",7),x(15,"li")(16,"a",8),re("click",function(){return r.closeMenu()}),V(17,"Galer\xEDa"),O()(),Ee(18,Lte,3,0,"li",7)(19,Vte,3,0,"li",7),x(20,"li")(21,"a",9),re("click",function(){return r.closeMenu()}),V(22,"Contacto"),O()(),x(23,"li",10),Ee(24,Ute,2,0,"a",11)(25,Hte,21,7,"div",12),O()()()()),t&2&&($(2),_n("active",r.isMenuOpen),$(8),_n("active",r.isMenuOpen),$(4),Y("ngIf",r.authService.currentUserSignal()),$(4),Y("ngIf",r.authService.currentUserSignal()),$(),Y("ngIf",r.authService.currentUserSignal()),$(5),Y("ngIf",!r.authService.currentUserSignal()),$(),Y("ngIf",r.authService.currentUserSignal()))},dependencies:[Zy,rn,Fn],styles:[".app-header[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:var(--white);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.nav-logo[_ngcontent-%COMP%]{height:40px;width:auto;border-radius:4px}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);margin:0;font-size:1.5rem}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;gap:1.5rem;align-items:center}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--white);font-weight:500;text-decoration:none;transition:color .2s}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}.auth-item[_ngcontent-%COMP%]{margin-left:20px;position:relative}.login-btn[_ngcontent-%COMP%]{background-color:#ffffff26;padding:8px 16px;border-radius:20px;border:1px solid rgba(255,255,255,.3);transition:all .2s}.login-btn[_ngcontent-%COMP%]:hover{background-color:var(--white);color:var(--primary-blue)!important}.user-dropdown-container[_ngcontent-%COMP%]{position:relative}.user-avatar-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;gap:8px}.nav-user-img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid white}.default-avatar-placeholder[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;text-transform:uppercase}.dropdown-arrow[_ngcontent-%COMP%]{color:#fff;font-size:10px}.user-dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:120%;right:0;background:#fff;color:#333;min-width:200px;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:8px 0;display:none;flex-direction:column;z-index:1001;animation:_ngcontent-%COMP%_fadeIn .1s ease-out}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f8f9fa}.user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:14px;color:#333}.user-header[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:4px 0}.dropdown-item[_ngcontent-%COMP%]{padding:10px 16px;text-align:left;background:none;border:none;width:100%;cursor:pointer;color:#444!important;font-size:14px;transition:background .2s;display:block;box-sizing:border-box}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:var(--primary-blue)!important}.logout-item[_ngcontent-%COMP%]{color:#dc3545!important}.logout-item[_ngcontent-%COMP%]:hover{background-color:#fff1f2;color:#dc3545!important}.dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mobile-menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:space-between;width:30px;height:21px;background:transparent;border:none;cursor:pointer;padding:0;z-index:10}.mobile-menu-btn[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:100%;height:3px;background-color:var(--white);border-radius:3px;transition:all .3s ease-in-out}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(1){transform:translateY(9px) rotate(45deg)}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){opacity:0}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-9px) rotate(-45deg)}@media(max-width:768px){.app-header[_ngcontent-%COMP%]{padding:1rem}.logo-area[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.mobile-menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;flex-direction:column;width:100%;position:absolute;top:100%;left:0;background-color:var(--primary-blue);padding:1rem 0;box-shadow:0 4px 6px #0000001a;z-index:9;align-items:stretch}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 2rem;width:100%}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.auth-item[_ngcontent-%COMP%]{margin:10px 0 0;padding:10px 2rem;border-top:1px solid rgba(255,255,255,.1)}.login-btn[_ngcontent-%COMP%]{display:block;text-align:center;width:100%}.user-dropdown-menu[_ngcontent-%COMP%]{position:static;display:none;width:100%;box-shadow:none;border-radius:0;margin-top:10px}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-avatar-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;color:#fff}}"]})};var qte=(n,e)=>e.id;function zte(n,e){n&1&&(x(0,"span"),V(1,"\u2713"),O())}function Gte(n,e){n&1&&(x(0,"span"),V(1,"\u2715"),O())}function Wte(n,e){n&1&&(x(0,"span"),V(1,"\u26A0"),O())}function Kte(n,e){n&1&&(x(0,"span"),V(1,"\u2139"),O())}function Qte(n,e){if(n&1){let t=xe();x(0,"div",2),re("click",function(){let i=ue(t).$implicit,s=J();return le(s.toastService.remove(i.id))}),x(1,"div",3),rb(2,zte,2,0,"span")(3,Gte,2,0,"span")(4,Wte,2,0,"span")(5,Kte,2,0,"span"),O(),x(6,"div",4),V(7),O()()}if(n&2){let t=e.$implicit;Y("ngClass",t.type),$(2),sb(t.type==="success"?2:t.type==="error"?3:t.type==="warning"?4:5),$(5),Ht(" ",t.message," ")}}var oI=class n{toastService=j(Sa);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast",3,"click","ngClass"],[1,"toast-icon"],[1,"toast-content"]],template:function(t,r){t&1&&(x(0,"div",0),ob(1,Qte,8,3,"div",1,qte),O()),t&2&&($(),ab(r.toastService.toasts()))},dependencies:[rn,tf],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;pointer-events:none}.toast[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:16px 24px;min-width:300px;max-width:400px;box-shadow:0 8px 32px #0000001a;display:flex;align-items:center;gap:12px;animation:_ngcontent-%COMP%_slideIn .3s ease-out;pointer-events:auto;cursor:pointer;border-left:6px solid #ccc;transition:transform .2s,opacity .2s}.toast[_ngcontent-%COMP%]:hover{transform:translateY(-2px);opacity:.95}.toast.success[_ngcontent-%COMP%]{border-left-color:#10b981}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#10b981;background:#10b9811a}.toast.error[_ngcontent-%COMP%]{border-left-color:#ef4444}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#ef4444;background:#ef44441a}.toast.warning[_ngcontent-%COMP%]{border-left-color:#f59e0b}.toast.warning[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#f59e0b;background:#f59e0b1a}.toast.info[_ngcontent-%COMP%]{border-left-color:#3b82f6}.toast.info[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#3b82f6;background:#3b82f61a}.toast-icon[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-family:monospace}.toast-content[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:.95rem}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})};var aI=class n{title=Pe("AgilityAsturias");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-container"]],template:function(t,r){t&1&&(x(0,"div",0),Be(1,"app-navbar"),x(2,"main"),Be(3,"router-outlet"),O(),x(4,"footer")(5,"p"),V(6,"\xA9 2026 Agility Asturias"),O()(),Be(7,"app-toast"),O())},dependencies:[wf,sI,oI],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:var(--container-width);margin:0 auto;width:100%}footer[_ngcontent-%COMP%]{text-align:center;padding:1rem;background-color:#e0e0e0;font-size:.875rem}"]})};kb(aI,WB).catch(n=>console.error(n));
