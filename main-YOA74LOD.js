import{Ca as DA,Ra as AA,V as SA,a as z,ab as xA,b as de,c as Xp,d as hA,e as fA,f as b0,g as pA,h as mA,i as gA,j as yA,k as _A,l as vA,m as I0,n as Tr,o as EA,p as xi,q as wA,r as bA,s as IA,t as TA,u as CA,v as As,w as Ri,x as jd,za as T0}from"./chunk-2NGJIF3X.js";var An=null,Zp=!1,A0=1,_U=null,On=Symbol("SIGNAL");function ge(n){let e=An;return An=n,e}function tm(){return An}var xl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bd(n){if(Zp)throw new Error("");if(An===null)return;An.consumerOnSignalRead(n);let e=An.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=An.recomputing;if(r&&(t=e!==void 0?e.nextProducer:An.producers,t!==void 0&&t.producer===n)){An.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===An&&(!r||EU(i,An)))return;let o=Pl(An),s={producer:n,consumer:An,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};An.producersTail=s,e!==void 0?e.nextProducer=s:An.producers=s,o&&NA(n,s)}function RA(){A0++}function x0(n){if(!(Pl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===A0)){if(!n.producerMustRecompute(n)&&!zd(n)){D0(n);return}n.producerRecomputeValue(n),D0(n)}}function R0(n){if(n.consumers===void 0)return;let e=Zp;Zp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||vU(r)}}finally{Zp=e}}function P0(){return An?.consumerAllowSignalWrites!==!1}function vU(n){n.dirty=!0,R0(n),n.consumerMarkedDirty?.(n)}function D0(n){n.dirty=!1,n.lastCleanEpoch=A0}function Rl(n){return n&&PA(n),ge(n)}function PA(n){n.producersTail=void 0,n.recomputing=!0}function $d(n,e){ge(e),n&&MA(n)}function MA(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Pl(n))do t=M0(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function zd(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(x0(t),r!==t.version))return!0}return!1}function Pa(n){if(Pl(n)){let e=n.producers;for(;e!==void 0;)e=M0(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function NA(n,e){let t=n.consumersTail,r=Pl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)NA(i.producer,i)}function M0(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Pl(e)){let o=e.producers;for(;o!==void 0;)o=M0(o)}return t}function Pl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function N0(n){_U?.(n)}function EU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function k0(n,e){return Object.is(n,e)}function nm(n,e){let t=Object.create(wU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(x0(t),Bd(t),t.value===em)throw t.error;return t.value};return r[On]=t,N0(t),r}var C0=Symbol("UNSET"),S0=Symbol("COMPUTING"),em=Symbol("ERRORED"),wU=de(z({},xl),{value:C0,dirty:!0,error:null,equal:k0,kind:"computed",producerMustRecompute(n){return n.value===C0||n.value===S0},producerRecomputeValue(n){if(n.value===S0)throw new Error("");let e=n.value;n.value=S0;let t=Rl(n),r,i=!1;try{r=n.computation(),ge(null),i=e!==C0&&e!==em&&r!==em&&n.equal(e,r)}catch(o){r=em,n.error=o}finally{$d(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function bU(){throw new Error}var kA=bU;function OA(n){kA(n)}function O0(n){kA=n}var IU=null;function F0(n,e){let t=Object.create(rm);t.value=n,e!==void 0&&(t.equal=e);let r=()=>FA(t);return r[On]=t,N0(t),[r,s=>qd(t,s),s=>VA(t,s)]}function FA(n){return Bd(n),n.value}function qd(n,e){P0()||OA(n),n.equal(n.value,e)||(n.value=e,TU(n))}function VA(n,e){P0()||OA(n),qd(n,e(n.value))}var rm=de(z({},xl),{equal:k0,value:void 0,kind:"signal"});function TU(n){n.version++,RA(),R0(n),IU?.(n)}function V0(n){let e=ge(null);try{return n()}finally{ge(e)}}var L0=de(z({},xl),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function U0(n){if(n.dirty=!1,n.version>0&&!zd(n))return;n.version++;let e=Rl(n);try{n.cleanup(),n.fn()}finally{$d(n,e)}}function xe(n){return typeof n=="function"}function Ml(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var im=Ml(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ma(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var nn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(xe(r))try{r()}catch(o){e=o instanceof im?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{LA(o)}catch(s){e=e??[],s instanceof im?e=[...e,...s.errors]:e.push(s)}}if(e)throw new im(e)}}add(e){var t;if(e&&e!==this)if(this.closed)LA(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ma(t,e)}remove(e){let{_finalizers:t}=this;t&&Ma(t,e),e instanceof n&&e._removeParent(this)}};nn.EMPTY=(()=>{let n=new nn;return n.closed=!0,n})();var j0=nn.EMPTY;function om(n){return n instanceof nn||n&&"closed"in n&&xe(n.remove)&&xe(n.add)&&xe(n.unsubscribe)}function LA(n){xe(n)?n():n.unsubscribe()}var Kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Nl={setTimeout(n,e,...t){let{delegate:r}=Nl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Nl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function sm(n){Nl.setTimeout(()=>{let{onUnhandledError:e}=Kr;if(e)e(n);else throw n})}function Na(){}var UA=B0("C",void 0,void 0);function jA(n){return B0("E",void 0,n)}function BA(n){return B0("N",n,void 0)}function B0(n,e,t){return{kind:n,value:e,error:t}}var ka=null;function kl(n){if(Kr.useDeprecatedSynchronousErrorHandling){let e=!ka;if(e&&(ka={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ka;if(ka=null,t)throw r}}else n()}function $A(n){Kr.useDeprecatedSynchronousErrorHandling&&ka&&(ka.errorThrown=!0,ka.error=n)}var Oa=class extends nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,om(e)&&e.add(this)):this.destination=DU}static create(e,t,r){return new xs(e,t,r)}next(e){this.isStopped?z0(BA(e),this):this._next(e)}error(e){this.isStopped?z0(jA(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?z0(UA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CU=Function.prototype.bind;function $0(n,e){return CU.call(n,e)}var q0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){am(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){am(r)}else am(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){am(t)}}},xs=class extends Oa{constructor(e,t,r){super();let i;if(xe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Kr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$0(e.next,o),error:e.error&&$0(e.error,o),complete:e.complete&&$0(e.complete,o)}):i=e}this.destination=new q0(i)}};function am(n){Kr.useDeprecatedSynchronousErrorHandling?$A(n):sm(n)}function SU(n){throw n}function z0(n,e){let{onStoppedNotification:t}=Kr;t&&Nl.setTimeout(()=>t(n,e))}var DU={closed:!0,next:Na,error:SU,complete:Na};var Ol=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qr(n){return n}function H0(...n){return G0(n)}function G0(n){return n.length===0?Qr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=xU(t)?t:new xs(t,r,i);return kl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=zA(r),new r((i,o)=>{let s=new xs({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ol](){return this}pipe(...t){return G0(t)(this)}toPromise(t){return t=zA(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function zA(n){var e;return(e=n??Kr.Promise)!==null&&e!==void 0?e:Promise}function AU(n){return n&&xe(n.next)&&xe(n.error)&&xe(n.complete)}function xU(n){return n&&n instanceof Oa||AU(n)&&om(n)}function RU(n){return xe(n?.lift)}function et(n){return e=>{if(RU(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tt(n,e,t,r,i){return new W0(n,e,t,r,i)}var W0=class extends Oa{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var qA=Ml(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class n extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new cm(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qA}next(t){kl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){kl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){kl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?j0:(this.currentObservers=null,o.push(t),new nn(()=>{this.currentObservers=null,Ma(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Se;return t.source=this,t}}return n.create=(e,t)=>new cm(e,t),n})(),cm=class extends yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:j0}};var zt=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Hd={now(){return(Hd.delegate||Date).now()},delegate:void 0};var Fl=class extends yt{constructor(e=1/0,t=1/0,r=Hd){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var lm=class extends nn{constructor(e,t){super()}schedule(e,t=0){return this}};var Gd={setInterval(n,e,...t){let{delegate:r}=Gd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Gd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Vl=class extends lm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Gd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Gd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ma(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ll=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ll.now=Hd.now;var Ul=class extends Ll{constructor(e,t=Ll.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var K0=new Ul(Vl);var um=class extends Vl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var dm=class extends Ul{};var Q0=new dm(um);var gn=new Se(n=>n.complete());function HA(n){return n&&xe(n.schedule)}function GA(n){return n[n.length-1]}function hm(n){return xe(GA(n))?n.pop():void 0}function Rs(n){return HA(GA(n))?n.pop():void 0}function Y0(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function KA(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(r.next(h))}catch(m){s(m)}}function c(h){try{d(r.throw(h))}catch(m){s(m)}}function d(h){h.done?o(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function WA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fa(n){return this instanceof Fa?(this.v=n,this):new Fa(n)}function QA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(S){return function(M){return Promise.resolve(M).then(S,m)}}function a(S,M){r[S]&&(i[S]=function(k){return new Promise(function(V,q){o.push([S,k,V,q])>1||c(S,k)})},M&&(i[S]=M(i[S])))}function c(S,M){try{d(r[S](M))}catch(k){w(o[0][3],k)}}function d(S){S.value instanceof Fa?Promise.resolve(S.value.v).then(h,m):w(o[0][2],S)}function h(S){c("next",S)}function m(S){c("throw",S)}function w(S,M){S(M),o.shift(),o.length&&c(o[0][0],o[0][1])}}function YA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WA=="function"?WA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}var fm=n=>n&&typeof n.length=="number"&&typeof n!="function";function pm(n){return xe(n?.then)}function mm(n){return xe(n[Ol])}function gm(n){return Symbol.asyncIterator&&xe(n?.[Symbol.asyncIterator])}function ym(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _m=PU();function vm(n){return xe(n?.[_m])}function Em(n){return QA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Fa(t.read());if(i)return yield Fa(void 0);yield yield Fa(r)}}finally{t.releaseLock()}})}function wm(n){return xe(n?.getReader)}function qt(n){if(n instanceof Se)return n;if(n!=null){if(mm(n))return MU(n);if(fm(n))return NU(n);if(pm(n))return kU(n);if(gm(n))return JA(n);if(vm(n))return OU(n);if(wm(n))return FU(n)}throw ym(n)}function MU(n){return new Se(e=>{let t=n[Ol]();if(xe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NU(n){return new Se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function kU(n){return new Se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,sm)})}function OU(n){return new Se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function JA(n){return new Se(e=>{VU(n,e).catch(t=>e.error(t))})}function FU(n){return JA(Em(n))}function VU(n,e){var t,r,i,o;return KA(this,void 0,void 0,function*(){try{for(t=YA(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function zn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ps(n,e=0){return et((t,r)=>{t.subscribe(tt(r,i=>zn(r,n,()=>r.next(i),e),()=>zn(r,n,()=>r.complete(),e),i=>zn(r,n,()=>r.error(i),e)))})}function Ms(n,e=0){return et((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function XA(n,e){return qt(n).pipe(Ms(e),Ps(e))}function ZA(n,e){return qt(n).pipe(Ms(e),Ps(e))}function ex(n,e){return new Se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function tx(n,e){return new Se(t=>{let r;return zn(t,e,()=>{r=n[_m](),zn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}function bm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Se(t=>{zn(t,e,()=>{let r=n[Symbol.asyncIterator]();zn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function nx(n,e){return bm(Em(n),e)}function rx(n,e){if(n!=null){if(mm(n))return XA(n,e);if(fm(n))return ex(n,e);if(pm(n))return ZA(n,e);if(gm(n))return bm(n,e);if(vm(n))return tx(n,e);if(wm(n))return nx(n,e)}throw ym(n)}function Ht(n,e){return e?rx(n,e):qt(n)}function Le(...n){let e=Rs(n);return Ht(n,e)}function J0(n,e){let t=xe(n)?n:()=>n,r=i=>i.error(t());return new Se(e?i=>e.schedule(r,0,i):r)}function Wd(n){return!!n&&(n instanceof Se||xe(n.lift)&&xe(n.subscribe))}var mo=Ml(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Va(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new xs({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new mo)}});n.subscribe(o)})}function Ke(n,e){return et((t,r)=>{let i=0;t.subscribe(tt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:LU}=Array;function UU(n,e){return LU(e)?n(...e):n(e)}function Im(n){return Ke(e=>UU(n,e))}var{isArray:jU}=Array,{getPrototypeOf:BU,prototype:$U,keys:zU}=Object;function Tm(n){if(n.length===1){let e=n[0];if(jU(e))return{args:e,keys:null};if(qU(e)){let t=zU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function qU(n){return n&&typeof n=="object"&&BU(n)===$U}function Cm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function X0(...n){let e=Rs(n),t=hm(n),{args:r,keys:i}=Tm(n);if(r.length===0)return Ht([],e);let o=new Se(HU(r,e,i?s=>Cm(i,s):Qr));return t?o.pipe(Im(t)):o}function HU(n,e,t=Qr){return r=>{ix(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ix(e,()=>{let d=Ht(n[c],e),h=!1;d.subscribe(tt(r,m=>{o[c]=m,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ix(n,e,t){n?zn(t,n,e):e()}function ox(n,e,t,r,i,o,s,a){let c=[],d=0,h=0,m=!1,w=()=>{m&&!c.length&&!d&&e.complete()},S=k=>d<r?M(k):c.push(k),M=k=>{o&&e.next(k),d++;let V=!1;qt(t(k,h++)).subscribe(tt(e,q=>{i?.(q),o?S(q):e.next(q)},()=>{V=!0},void 0,()=>{if(V)try{for(d--;c.length&&d<r;){let q=c.shift();s?zn(e,s,()=>M(q)):M(q)}w()}catch(q){e.error(q)}}))};return n.subscribe(tt(e,S,()=>{m=!0,w()})),()=>{a?.()}}function Fn(n,e,t=1/0){return xe(e)?Fn((r,i)=>Ke((o,s)=>e(r,o,i,s))(qt(n(r,i))),t):(typeof e=="number"&&(t=e),et((r,i)=>ox(r,i,n,t)))}function sx(n=1/0){return Fn(Qr,n)}function ax(){return sx(1)}function jl(...n){return ax()(Ht(n,Rs(n)))}function Kd(n){return new Se(e=>{qt(n()).subscribe(e)})}function Z0(...n){let e=hm(n),{args:t,keys:r}=Tm(n),i=new Se(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,d=s;for(let h=0;h<s;h++){let m=!1;qt(t[h]).subscribe(tt(o,w=>{m||(m=!0,d--),a[h]=w},()=>c--,void 0,()=>{(!c||!m)&&(d||o.next(r?Cm(r,a):a),o.complete())}))}});return e?i.pipe(Im(e)):i}var go=new Se(Na);function Ct(n,e){return et((t,r)=>{let i=0;t.subscribe(tt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qd(n){return et((e,t)=>{let r=null,i=!1,o;r=e.subscribe(tt(t,void 0,void 0,s=>{o=qt(n(s,Qd(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Sm(n,e){return xe(e)?Fn(n,e,1):Fn(n,1)}function cx(n){return et((e,t)=>{let r=!1;e.subscribe(tt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yn(n){return n<=0?()=>gn:et((e,t)=>{let r=0;e.subscribe(tt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function lx(n=GU){return et((e,t)=>{let r=!1;e.subscribe(tt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function GU(){return new mo}function eE(n){return et((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,o)=>n(i,o,r)):Qr,yn(1),t?cx(e):lx(()=>new mo))}function Dm(n){return n<=0?()=>gn:et((e,t)=>{let r=[];e.subscribe(tt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Am(n){return Ct((e,t)=>n<=t)}function tE(...n){let e=Rs(n);return et((t,r)=>{(e?jl(n,t,e):jl(n,t)).subscribe(r)})}function qn(n,e){return et((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(tt(r,c=>{i?.unsubscribe();let d=0,h=o++;qt(n(c,h)).subscribe(i=tt(r,m=>r.next(e?e(c,m,h,d++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Yd(n){return et((e,t)=>{qt(n).subscribe(tt(t,()=>t.complete(),Na)),!t.closed&&e.subscribe(t)})}function Pi(n,e,t){let r=xe(n)||e||t?{next:n,error:e,complete:t}:n;return r?et((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(tt(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Qr}var nE;function xm(){return nE}function Mi(n){let e=nE;return nE=n,e}var ux=Symbol("NotFound");function Bl(n){return n===ux||n?.name==="\u0275NotFound"}var Ns=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},gE=new Ns("21.1.2");var Fm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,t){super(wo(e,t)),this.code=e}};function WU(n){return`NG0${Math.abs(n)}`}function wo(n,e){return`${WU(n)}${e?": "+e:""}`}var Yr=globalThis;function nt(n){for(let e in n)if(n[e]===nt)return e;throw Error("")}function mx(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(vo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Vm(n,e){return n?e?`${n} ${e}`:n:e||""}var KU=nt({__forward_ref__:nt});function Jr(n){return n.__forward_ref__=Jr,n.toString=function(){return vo(this())},n}function _n(n){return yE(n)?n():n}function yE(n){return typeof n=="function"&&n.hasOwnProperty(KU)&&n.__forward_ref__===Jr}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sr(n){return{providers:n.providers||[],imports:n.imports||[]}}function rh(n){return QU(n,Lm)}function _E(n){return rh(n)!==null}function QU(n,e){return n.hasOwnProperty(e)&&n[e]||null}function YU(n){let e=n?.[Lm]??null;return e||null}function iE(n){return n&&n.hasOwnProperty(Pm)?n[Pm]:null}var Lm=nt({\u0275prov:nt}),Pm=nt({\u0275inj:nt}),ie=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function vE(n){return n&&!!n.\u0275providers}var EE=nt({\u0275cmp:nt}),wE=nt({\u0275dir:nt}),bE=nt({\u0275pipe:nt}),IE=nt({\u0275mod:nt}),Xd=nt({\u0275fac:nt}),$a=nt({__NG_ELEMENT_ID__:nt}),dx=nt({__NG_ENV_ID__:nt});function TE(n){return Um(n,"@NgModule"),n[IE]||null}function Vs(n){return Um(n,"@Component"),n[EE]||null}function CE(n){return Um(n,"@Directive"),n[wE]||null}function gx(n){return Um(n,"@Pipe"),n[bE]||null}function Um(n,e){if(n==null)throw new G(-919,!1)}function zl(n){return typeof n=="string"?n:n==null?"":String(n)}var yx=nt({ngErrorCode:nt}),JU=nt({ngErrorMessage:nt}),XU=nt({ngTokenPath:nt});function SE(n,e){return _x("",-200,e)}function jm(n,e){throw new G(-201,!1)}function _x(n,e,t){let r=new G(e,n);return r[yx]=e,r[JU]=n,t&&(r[XU]=t),r}function ZU(n){return n[yx]}var oE;function vx(){return oE}function Vn(n){let e=oE;return oE=n,e}function DE(n,e,t){let r=rh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;jm(n,"")}var ej={},La=ej,sE="__NG_DI_FLAG__",aE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ua(t)||0;try{return this.injector.get(e,r&8?null:La,r)}catch(i){if(Bl(i))return i;throw i}}};function tj(n,e=0){let t=xm();if(t===void 0)throw new G(-203,!1);if(t===null)return DE(n,void 0,e);{let r=nj(e),i=t.retrieve(n,r);if(Bl(i)){if(r.optional)return null;throw i}return i}}function ve(n,e=0){return(vx()||tj)(_n(n),e)}function L(n,e){return ve(n,Ua(e))}function Ua(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function nj(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function cE(n){let e=[];for(let t=0;t<n.length;t++){let r=_n(n[t]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=rj(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ve(i,o))}else e.push(ve(r))}return e}function Ex(n,e){return n[sE]=e,n.prototype[sE]=e,n}function rj(n){return n[sE]}function ks(n,e){let t=n.hasOwnProperty(Xd);return t?n[Xd]:null}function Bm(n,e){n.forEach(t=>Array.isArray(t)?Bm(t,e):e(t))}function AE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ih(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function wx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function $m(n,e,t){let r=ql(n,e);return r>=0?n[r|1]=t:(r=~r,wx(n,r,e,t)),r}function zm(n,e){let t=ql(n,e);if(t>=0)return n[t|1]}function ql(n,e){return ij(n,e,1)}function ij(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ls={},Ln=[],za=new ie(""),xE=new ie("",-1),RE=new ie(""),Zd=class{get(e,t=La){if(t===La){let i=_x("",-201);throw i.name="\u0275NotFound",i}return t}};function vn(n){return{\u0275providers:n}}function bx(n){return vn([{provide:za,multi:!0,useValue:n}])}function Ix(...n){return{\u0275providers:PE(!0,n),\u0275fromNgModule:!0}}function PE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bm(e,s=>{let a=s;Mm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Tx(i,o),t}function Tx(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ME(i,o=>{e(o,r)})}}function Mm(n,e,t,r){if(n=_n(n),!n)return!1;let i=null,o=iE(n),s=!o&&Vs(n);if(!o&&!s){let c=n.ngModule;if(o=iE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)Mm(d,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;Bm(o.imports,h=>{Mm(h,e,t,r)&&(d||=[],d.push(h))}),d!==void 0&&Tx(d,e)}if(!a){let d=ks(i)||(()=>new i);e({provide:i,useFactory:d,deps:Ln},i),e({provide:RE,useValue:i,multi:!0},i),e({provide:za,useValue:()=>ve(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let d=n;ME(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function ME(n,e){for(let t of n)vE(t)&&(t=t.\u0275providers),Array.isArray(t)?ME(t,e):e(t)}var oj=nt({provide:String,useValue:nt});function Cx(n){return n!==null&&typeof n=="object"&&oj in n}function sj(n){return!!(n&&n.useExisting)}function aj(n){return!!(n&&n.useFactory)}function ja(n){return typeof n=="function"}function Sx(n){return!!n.useClass}var oh=new ie(""),Rm={},hx={},rE;function sh(){return rE===void 0&&(rE=new Zd),rE}var xt=class{},Ba=class extends xt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,uE(e,s=>this.processProvider(s)),this.records.set(xE,$l(void 0,this)),i.has("environment")&&this.records.set(xt,$l(void 0,this));let o=this.records.get(oh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(RE,Ln,{self:!0}))}retrieve(e,t){let r=Ua(t)||0;try{return this.get(e,La,r)}catch(i){if(Bl(i))return i;throw i}}destroy(){Jd(this),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return Jd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Jd(this);let t=Mi(this),r=Vn(void 0),i;try{return e()}finally{Mi(t),Vn(r)}}get(e,t=La,r){if(Jd(this),e.hasOwnProperty(dx))return e[dx](this);let i=Ua(r),o,s=Mi(this),a=Vn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=hj(e)&&rh(e);h&&this.injectableDefInScope(h)?d=$l(lE(e),Rm):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?sh():this.parent;return t=i&8&&t===La?null:t,c.get(e,t)}catch(c){let d=ZU(c);throw d===-200||d===-201?new G(d,null):c}finally{Vn(a),Mi(s)}}resolveInjectorInitializers(){let e=ge(null),t=Mi(this),r=Vn(void 0),i;try{let o=this.get(za,Ln,{self:!0});for(let s of o)s()}finally{Mi(t),Vn(r),ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_n(e);let t=ja(e)?e:_n(e&&e.provide),r=lj(e);if(!ja(e)&&e.multi===!0){let i=this.records.get(t);i||(i=$l(void 0,Rm,!0),i.factory=()=>cE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ge(null);try{if(t.value===hx)throw SE(vo(e));return t.value===Rm&&(t.value=hx,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&dj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=_n(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function lE(n){let e=rh(n),t=e!==null?e.factory:ks(n);if(t!==null)return t;if(n instanceof ie)throw new G(204,!1);if(n instanceof Function)return cj(n);throw new G(204,!1)}function cj(n){if(n.length>0)throw new G(204,!1);let t=YU(n);return t!==null?()=>t.factory(n):()=>new n}function lj(n){if(Cx(n))return $l(void 0,n.useValue);{let e=NE(n);return $l(e,Rm)}}function NE(n,e,t){let r;if(ja(n)){let i=_n(n);return ks(i)||lE(i)}else if(Cx(n))r=()=>_n(n.useValue);else if(aj(n))r=()=>n.useFactory(...cE(n.deps||[]));else if(sj(n))r=(i,o)=>ve(_n(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=_n(n&&(n.useClass||n.provide));if(uj(n))r=()=>new i(...cE(n.deps));else return ks(i)||lE(i)}return r}function Jd(n){if(n.destroyed)throw new G(205,!1)}function $l(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uj(n){return!!n.deps}function dj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hj(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function uE(n,e){for(let t of n)Array.isArray(t)?uE(t,e):t&&vE(t)?uE(t.\u0275providers,e):e(t)}function Gt(n,e){let t;n instanceof Ba?(Jd(n),t=n):t=new aE(n);let r,i=Mi(t),o=Vn(void 0);try{return e()}finally{Mi(i),Vn(o)}}function Dx(){return vx()!==void 0||xm()!=null}var Xr=0,be=1,Te=2,on=3,Cr=4,Sr=5,Hl=6,Gl=7,Ot=8,bo=9,ki=10,Et=11,Wl=12,kE=13,qa=14,ar=15,Ha=16,Ga=17,Wa=18,Io=19,OE=20,_o=21,qm=22,Os=23,cr=24,Ka=25,Qa=26,St=27,Ax=1,FE=6,Us=7,ah=8,ch=9,Ft=10;function Oi(n){return Array.isArray(n)&&typeof n[Ax]=="object"}function Zr(n){return Array.isArray(n)&&n[Ax]===!0}function VE(n){return(n.flags&4)!==0}function js(n){return n.componentOffset>-1}function lh(n){return(n.flags&1)===1}function Fi(n){return!!n.template}function Kl(n){return(n[Te]&512)!==0}function Ya(n){return(n[Te]&256)===256}var LE="svg",xx="math";function Dr(n){for(;Array.isArray(n);)n=n[Xr];return n}function UE(n,e){return Dr(e[n])}function ei(n,e){return Dr(e[n.index])}function uh(n,e){return n.data[e]}function dh(n,e){return n[e]}function jE(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ar(n,e){let t=e[n];return Oi(t)?t:t[Xr]}function Hm(n){return(n[Te]&128)===128}function Rx(n){return Zr(n[on])}function xr(n,e){return e==null?null:n[e]}function BE(n){n[Ga]=0}function $E(n){n[Te]&1024||(n[Te]|=1024,Hm(n)&&Ja(n))}function Px(n,e){for(;n>0;)e=e[qa],n--;return e}function hh(n){return!!(n[Te]&9216||n[cr]?.dirty)}function Gm(n){n[ki].changeDetectionScheduler?.notify(8),n[Te]&64&&(n[Te]|=1024),hh(n)&&Ja(n)}function Ja(n){n[ki].changeDetectionScheduler?.notify(0);let e=Fs(n);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!Hm(e)));)e=Fs(e)}function zE(n,e){if(Ya(n))throw new G(911,!1);n[_o]===null&&(n[_o]=[]),n[_o].push(e)}function Mx(n,e){if(n[_o]===null)return;let t=n[_o].indexOf(e);t!==-1&&n[_o].splice(t,1)}function Fs(n){let e=n[on];return Zr(e)?e[on]:e}function Nx(n){return n[Gl]??=[]}function kx(n){return n.cleanup??=[]}var Me={lFrame:Kx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dE=!1;function Ox(){return Me.lFrame.elementDepthCount}function Fx(){Me.lFrame.elementDepthCount++}function qE(){Me.lFrame.elementDepthCount--}function HE(){return Me.bindingsEnabled}function Vx(){return Me.skipHydrationRootTNode!==null}function GE(n){return Me.skipHydrationRootTNode===n}function WE(){Me.skipHydrationRootTNode=null}function Ne(){return Me.lFrame.lView}function sn(){return Me.lFrame.tView}function X(n){return Me.lFrame.contextLView=n,n[Ot]}function Z(n){return Me.lFrame.contextLView=null,n}function xn(){let n=KE();for(;n!==null&&n.type===64;)n=n.parent;return n}function KE(){return Me.lFrame.currentTNode}function Lx(){let n=Me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ql(n,e){let t=Me.lFrame;t.currentTNode=n,t.isParent=e}function QE(){return Me.lFrame.isParent}function Ux(){Me.lFrame.isParent=!1}function jx(){return Me.lFrame.contextLView}function YE(){return dE}function eh(n){let e=dE;return dE=n,e}function fh(){let n=Me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Bx(){return Me.lFrame.bindingIndex}function $x(n){return Me.lFrame.bindingIndex=n}function Xa(){return Me.lFrame.bindingIndex++}function Wm(n){let e=Me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function zx(){return Me.lFrame.inI18n}function qx(n,e){let t=Me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Km(e)}function Hx(){return Me.lFrame.currentDirectiveIndex}function Km(n){Me.lFrame.currentDirectiveIndex=n}function Gx(n){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function JE(n){Me.lFrame.currentQueryIndex=n}function fj(n){let e=n[be];return e.type===2?e.declTNode:e.type===1?n[Sr]:null}function XE(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=fj(o),i===null||(o=o[qa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Me.lFrame=Wx();return r.currentTNode=e,r.lView=n,!0}function Qm(n){let e=Wx(),t=n[be];Me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Wx(){let n=Me.lFrame,e=n===null?null:n.child;return e===null?Kx(n):e}function Kx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Qx(){let n=Me.lFrame;return Me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ZE=Qx;function Ym(){let n=Qx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yx(n){return(Me.lFrame.contextLView=Px(n,Me.lFrame.contextLView))[Ot]}function Vi(){return Me.lFrame.selectedIndex}function Bs(n){Me.lFrame.selectedIndex=n}function Jm(){let n=Me.lFrame;return uh(n.tView,n.selectedIndex)}function To(){Me.lFrame.currentNamespace=LE}function Co(){pj()}function pj(){Me.lFrame.currentNamespace=null}function Jx(){return Me.lFrame.currentNamespace}var Xx=!0;function Xm(){return Xx}function Zm(n){Xx=n}function hE(n,e=null,t=null,r){let i=ew(n,e,t,r);return i.resolveInjectorInitializers(),i}function ew(n,e=null,t=null,r,i=new Set){let o=[t||Ln,Ix(n)];return r=r||(typeof n=="object"?void 0:vo(n)),new Ba(o,e||sh(),r||null,i)}var ct=class n{static THROW_IF_NOT_FOUND=La;static NULL=new Zd;static create(e,t){if(Array.isArray(e))return hE({name:""},t,e,"");{let r=e.name??"";return hE({name:r},e.parent,e.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>ve(xE)});static __NG_ELEMENT_ID__=-1},Rt=new ie(""),Un=(()=>{class n{static __NG_ELEMENT_ID__=mj;static __NG_ENV_ID__=t=>t}return n})(),Nm=class extends Un{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ya(this._lView)}onDestroy(e){let t=this._lView;return zE(t,e),()=>Mx(t,e)}};function mj(){return new Nm(Ne())}var Zx=!1,e1=new ie(""),So=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new zt(!1);debugTaskTracker=L(e1,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Se(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),fE=class extends yt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Dx()&&(this.destroyRef=L(Un,{optional:!0})??void 0,this.pendingTasks=L(So,{optional:!0})??void 0)}emit(e){let t=ge(null);try{super.next(e)}finally{ge(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof nn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=fE;function km(...n){}function tw(n){let e,t;function r(){n=km;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function t1(n){return queueMicrotask(()=>n()),()=>{n=km}}var nw="isAngularZone",th=nw+"_ID",gj=0,Qe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Zx}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(nw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new G(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,yj,km,km);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},yj={};function rw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _j(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){tw(()=>{n.callbackScheduled=!1,pE(n),n.isCheckStableRunning=!0,rw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pE(n)}function vj(n){let e=()=>{_j(n)},t=gj++;n._inner=n._inner.fork({name:"angular",properties:{[nw]:!0,[th]:t,[th+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Ej(c))return r.invokeTask(o,s,a,c);try{return fx(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),px(n)}},onInvoke:(r,i,o,s,a,c,d)=>{try{return fx(n),r.invoke(o,s,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!wj(c)&&e(),px(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pE(n),rw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function px(n){n._nesting--,rw(n)}var nh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Ej(n){return n1(n,"__ignore_ng_zone__")}function wj(n){return n1(n,"__scheduler_tick__")}function n1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ni=class{_console=console;handleError(e){this._console.error("ERROR",e)}},lr=new ie("",{factory:()=>{let n=L(Qe),e=L(xt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ni),t.handleError(r))})}}}),r1={provide:za,useValue:()=>{let n=L(Ni,{optional:!0})},multi:!0},bj=new ie("",{factory:()=>{let n=L(Rt).defaultView;if(!n)return;let e=L(lr),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),L(Un).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function iw(){return vn([bx(()=>{L(bj)})])}function pe(n,e){let[t,r,i]=F0(n,e?.equal),o=t,s=o[On];return o.set=r,o.update=i,o.asReadonly=i1.bind(o),o}function i1(){let n=this[On];if(n.readonlyFn===void 0){let e=()=>this();e[On]=n,n.readonlyFn=e}return n.readonlyFn}var ph=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Ij}return n})();function Ij(){return new ph(Ne(),xn())}var Eo=class{},mh=new ie("",{factory:()=>!0});var ow=new ie(""),Yl=(()=>{class n{internalPendingTasks=L(So);scheduler=L(Eo);errorHandler=L(lr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),eg=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new mE})}return n})(),mE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Om=class{[On];constructor(e){this[On]=e}destroy(){this[On].destroy()}};function Za(n,e){let t=e?.injector??L(ct),r=e?.manualCleanup!==!0?t.get(Un):null,i,o=t.get(ph,null,{optional:!0}),s=t.get(Eo);return o!==null?(i=Sj(o.view,s,n),r instanceof Nm&&r._lView===o.view&&(r=null)):i=Dj(n,t.get(eg),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Om(i)}var o1=de(z({},L0),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=eh(!1);try{U0(this)}finally{eh(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=ge(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ge(n)}}}),Tj=de(z({},o1),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Pa(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),Cj=de(z({},o1),{consumerMarkedDirty(){this.view[Te]|=8192,Ja(this.view),this.notifier.notify(13)},destroy(){if(Pa(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Os]?.delete(this)}});function Sj(n,e,t){let r=Object.create(Cj);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=s1(r,t),n[Os]??=new Set,n[Os].add(r),r.consumerMarkedDirty(r),r}function Dj(n,e,t){let r=Object.create(Tj);return r.fn=s1(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function s1(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Pt(n){return V0(n)}function ru(n){return{toString:n}.toString()}var tg="__parameters__";function Nj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function kj(n,e,t){return ru(()=>{let r=Nj(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,d,h){let m=c.hasOwnProperty(tg)?c[tg]:Object.defineProperty(c,tg,{value:[]})[tg];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var an=Ex(kj("Optional"),8);function Oj(n){return typeof n=="function"}function O1(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var cg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},ji=(()=>{let n=()=>F1;return n.ngInherit=!0,n})();function F1(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vj),Fj}function Fj(){let n=L1(this),e=n?.current;if(e){let t=n.previous;if(t===Ls)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Vj(n,e,t,r,i){let o=this.declaredInputs[r],s=L1(n)||Lj(n,{previous:Ls,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new cg(d&&d.currentValue,t,c===Ls),O1(n,e,i,t)}var V1="__ngSimpleChanges__";function L1(n){return n[V1]||null}function Lj(n,e){return n[V1]=e}var a1=[];var rt=function(n,e=null,t){for(let r=0;r<a1.length;r++){let i=a1[r];i(n,e,t)}},ze=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ze||{});function Uj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=F1(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function U1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function og(n,e,t){j1(n,e,3,t)}function sg(n,e,t,r){(n[Te]&3)===t&&j1(n,e,t,r)}function sw(n,e){let t=n[Te];(t&3)===e&&(t&=16383,t+=1,n[Te]=t)}function j1(n,e,t,r){let i=r!==void 0?n[Ga]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ga]+=65536),(a<o||o==-1)&&(jj(n,t,e,c),n[Ga]=(n[Ga]&4294901760)+c+2),c++}function c1(n,e){rt(ze.LifecycleHookStart,n,e);let t=ge(null);try{e.call(n)}finally{ge(t),rt(ze.LifecycleHookEnd,n,e)}}function jj(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Te]>>14<n[Ga]>>16&&(n[Te]&3)===e&&(n[Te]+=16384,c1(a,o)):c1(a,o)}var Xl=-1,tc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Bj(n){return(n.flags&8)!==0}function $j(n){return(n.flags&16)!==0}function zj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];qj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function B1(n){return n===3||n===4||n===6}function qj(n){return n.charCodeAt(0)===64}function Zl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?l1(n,t,i,null,e[++r]):l1(n,t,i,null,null))}}return n}function l1(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function $1(n){return n!==Xl}function lg(n){return n&32767}function Hj(n){return n>>16}function ug(n,e){let t=Hj(n),r=e;for(;t>0;)r=r[qa],t--;return r}var yw=!0;function dg(n){let e=yw;return yw=n,e}var Gj=256,z1=Gj-1,q1=5,Wj=0,Li={};function Kj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty($a)&&(r=t[$a]),r==null&&(r=t[$a]=Wj++);let i=r&z1,o=1<<i;e.data[n+(i>>q1)]|=o}function hg(n,e){let t=H1(n,e);if(t!==-1)return t;let r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,aw(r.data,n),aw(e,null),aw(r.blueprint,null));let i=Uw(n,e),o=n.injectorIndex;if($1(i)){let s=lg(i),a=ug(i,e),c=a[be].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|c[s+d]}return e[o+8]=i,o}function aw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function H1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Uw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Y1(i),r===null)return Xl;if(t++,i=i[qa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Xl}function _w(n,e,t){Kj(n,e,t)}function Qj(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(B1(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function G1(n,e,t){if(t&8||n!==void 0)return n;jm(e,"NodeInjector")}function W1(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[bo],o=Vn(void 0);try{return i?i.get(e,r,t&8):DE(e,r,t&8)}finally{Vn(o)}}return G1(r,e,t)}function K1(n,e,t,r=0,i){if(n!==null){if(e[Te]&2048&&!(r&2)){let s=eB(n,e,t,r,Li);if(s!==Li)return s}let o=Q1(n,e,t,r,Li);if(o!==Li)return o}return W1(e,t,r,i)}function Q1(n,e,t,r,i){let o=Xj(t);if(typeof o=="function"){if(!XE(e,n,r))return r&1?G1(i,t,r):W1(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))jm(t);else return s}finally{ZE()}}else if(typeof o=="number"){let s=null,a=H1(n,e),c=Xl,d=r&1?e[ar][Sr]:null;for((a===-1||r&4)&&(c=a===-1?Uw(n,e):e[a+8],c===Xl||!d1(r,!1)?a=-1:(s=e[be],a=lg(c),e=ug(c,e)));a!==-1;){let h=e[be];if(u1(o,a,h.data)){let m=Yj(a,e,t,s,r,d);if(m!==Li)return m}c=e[a+8],c!==Xl&&d1(r,e[be].data[a+8]===d)&&u1(o,a,e)?(s=h,a=lg(c),e=ug(c,e)):a=-1}}return i}function Yj(n,e,t,r,i,o){let s=e[be],a=s.data[n+8],c=r==null?js(a)&&yw:r!=s&&(a.type&3)!==0,d=i&1&&o===a,h=Jj(a,s,t,c,d);return h!==null?fg(e,s,h,a,i):Li}function Jj(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,d=n.directiveEnd,h=o>>20,m=r?a:a+h,w=i?a+h:d;for(let S=m;S<w;S++){let M=s[S];if(S<c&&t===M||S>=c&&M.type===t)return S}if(i){let S=s[c];if(S&&Fi(S)&&S.type===t)return c}return null}function fg(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof tc){let a=o;if(a.resolving)throw SE("");let c=dg(a.canSeeViewProviders);a.resolving=!0;let d=s[t].type||s[t],h,m=a.injectImpl?Vn(a.injectImpl):null,w=XE(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Uj(t,s[t],e)}finally{m!==null&&Vn(m),dg(c),a.resolving=!1,ZE()}}return o}function Xj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($a)?n[$a]:void 0;return typeof e=="number"?e>=0?e&z1:Zj:e}function u1(n,e,t){let r=1<<n;return!!(t[e+(n>>q1)]&r)}function d1(n,e){return!(n&2)&&!(n&1&&e)}var ec=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return K1(this._tNode,this._lView,e,Ua(r),t)}};function Zj(){return new ec(xn(),Ne())}function Ao(n){return ru(()=>{let e=n.prototype.constructor,t=e[Xd]||vw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Xd]||vw(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function vw(n){return yE(n)?()=>{let e=vw(_n(n));return e&&e()}:ks(n)}function eB(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Te]&2048&&!Kl(s);){let a=Q1(o,s,t,r|2,Li);if(a!==Li)return a;let c=o.parent;if(!c){let d=s[OE];if(d){let h=d.get(t,Li,r);if(h!==Li)return h}c=Y1(s),s=s[qa]}o=c}return i}function Y1(n){let e=n[be],t=e.type;return t===2?e.declTNode:t===1?n[Sr]:null}function Ch(n){return Qj(xn(),n)}function tB(){return Ag(xn(),Ne())}function Ag(n,e){return new ur(ei(n,e))}var ur=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=tB}return n})();function J1(n){return(n.flags&128)===128}var jw=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(jw||{}),X1=new Map,nB=0;function rB(){return nB++}function iB(n){X1.set(n[Io],n)}function Ew(n){X1.delete(n[Io])}var h1="__ngContext__";function eu(n,e){Oi(e)?(n[h1]=e[Io],iB(e)):n[h1]=e}function Z1(n){return tR(n[Wl])}function eR(n){return tR(n[Cr])}function tR(n){for(;n!==null&&!Zr(n);)n=n[Cr];return n}var oB;function Bw(n){oB=n}var xg=new ie("",{factory:()=>sB}),sB="ng";var Rg=new ie(""),oc=new ie("",{providedIn:"platform",factory:()=>"unknown"}),Pg=new ie(""),Mg=new ie("",{factory:()=>L(Rt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nR="r";var rR="di";var iR=!1,oR=new ie("",{factory:()=>iR});var aB=(n,e,t,r)=>{};function cB(n,e,t,r){aB(n,e,t,r)}function $w(n){return(n.flags&32)===32}var lB=()=>null;function sR(n,e,t=!1){return lB(n,e,t)}function aR(n,e){let t=n.contentQueries;if(t!==null){let r=ge(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];JE(o),a.contentQueries(2,e[s],s)}}}finally{ge(r)}}}function ww(n,e,t){JE(0);let r=ge(null);try{e(n,t)}finally{ge(r)}}function cR(n,e,t){if(VE(e)){let r=ge(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ge(r)}}}var ri=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ri||{});var ng;function uB(){if(ng===void 0&&(ng=null,Yr.trustedTypes))try{ng=Yr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ng}function dB(n){return uB()?.createScriptURL(n)||n}var rg;function hB(){if(rg===void 0&&(rg=null,Yr.trustedTypes))try{rg=Yr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rg}function f1(n){return hB()?.createScriptURL(n)||n}var pg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fm})`}};function iu(n){return n instanceof pg?n.changingThisBreaksApplicationSecurity:n}function zw(n,e){let t=lR(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Fm})`)}return t===e}function lR(n){return n instanceof pg&&n.getTypeName()||null}var fB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uR(n){return n=String(n),n.match(fB)?n:"unsafe:"+n}function pB(n,e){return n.createText(e)}function mB(n,e,t){n.setValue(e,t)}function dR(n,e,t){return n.createElement(e,t)}function mg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hR(n,e,t){n.appendChild(e,t)}function p1(n,e,t,r,i){r!==null?mg(n,e,t,r,i):hR(n,e,t)}function fR(n,e,t,r){n.removeChild(null,e,t,r)}function gB(n,e,t){n.setAttribute(e,"style",t)}function yB(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&zj(n,e,r),i!==null&&yB(n,e,i),o!==null&&gB(n,e,o)}var Ng=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ng||{});function Vt(n){let e=gR();return e?e.sanitize(Ng.URL,n)||"":zw(n,"URL")?iu(n):uR(zl(n))}function mR(n){let e=gR();if(e)return f1(e.sanitize(Ng.RESOURCE_URL,n)||"");if(zw(n,"ResourceURL"))return f1(iu(n));throw new G(904,!1)}function qw(n){return dB(n[0])}var _B=new Set(["embed","frame","iframe","media","script"]),vB=new Set(["base","link","script"]);function EB(n,e){return e==="src"&&_B.has(n)||e==="href"&&vB.has(n)||e==="xlink:href"&&n==="script"?mR:Vt}function Hw(n,e,t){return EB(e,t)(n)}function gR(){let n=Ne();return n&&n[ki].sanitizer}function yR(n){return n instanceof Function?n():n}function wB(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var _R="ng-template";function bB(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&wB(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Gw(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Gw(n){return n.type===4&&n.value!==_R}function IB(n,e,t){let r=n.type===4&&!t?_R:n.value;return e===r}function TB(n,e,t){let r=4,i=n.attrs,o=i!==null?DB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ti(r)&&!ti(c))return!1;if(s&&ti(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!IB(n,c,t)||c===""&&e.length===1){if(ti(r))return!1;s=!0}}else if(r&8){if(i===null||!bB(n,i,c,t)){if(ti(r))return!1;s=!0}}else{let d=e[++a],h=CB(c,i,Gw(n),t);if(h===-1){if(ti(r))return!1;s=!0;continue}if(d!==""){let m;if(h>o?m="":m=i[h+1].toLowerCase(),r&2&&d!==m){if(ti(r))return!1;s=!0}}}}return ti(r)||s}function ti(n){return(n&1)===0}function CB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return AB(e,n)}function SB(n,e,t=!1){for(let r=0;r<e.length;r++)if(TB(n,e[r],t))return!0;return!1}function DB(n){for(let e=0;e<n.length;e++){let t=n[e];if(B1(t))return e}return n.length}function AB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function m1(n,e){return n?":not("+e.trim()+")":e}function xB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ti(s)&&(e+=m1(o,i),i=""),r=s,o=o||!ti(r);t++}return i!==""&&(e+=m1(o,i)),e}function RB(n){return n.map(xB).join(",")}function PB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ti(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Hn={};function Ww(n,e,t,r,i,o,s,a,c,d,h){let m=St+r,w=m+i,S=MB(m,w),M=typeof d=="function"?d():d;return S[be]={type:n,blueprint:S,template:t,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:M,incompleteFirstPass:!1,ssrId:h}}function MB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Hn);return t}function NB(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ww(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Kw(n,e,t,r,i,o,s,a,c,d,h){let m=e.blueprint.slice();return m[Xr]=i,m[Te]=r|4|128|8|64|1024,(d!==null||n&&n[Te]&2048)&&(m[Te]|=2048),BE(m),m[on]=m[qa]=n,m[Ot]=t,m[ki]=s||n&&n[ki],m[Et]=a||n&&n[Et],m[bo]=c||n&&n[bo]||null,m[Sr]=o,m[Io]=rB(),m[Hl]=h,m[OE]=d,m[ar]=e.type==2?n[ar]:m,m}function kB(n,e,t){let r=ei(e,n),i=NB(t),o=n[ki].rendererFactory,s=Qw(n,Kw(n,i,null,vR(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function vR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function ER(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Qw(n,e){return n[Wl]?n[kE][Cr]=e:n[Wl]=e,n[kE]=e,e}function N(n=1){wR(sn(),Ne(),Vi()+n,!1)}function wR(n,e,t,r){if(!r)if((e[Te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&og(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sg(e,o,0,t)}Bs(t)}var kg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(kg||{});function bw(n,e,t,r){let i=ge(null);try{let[o,s,a]=n.inputs[t],c=null;(s&kg.SignalBased)!==0&&(c=e[o][On]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):O1(e,c,o,r)}finally{ge(i)}}var Ui=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ui||{}),OB;function Yw(n,e){return OB(n,e)}var nc=new Set,Og=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Og||{}),sc=new ie(""),g1=new Set;function oi(n){g1.has(n)||(g1.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Jw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),bR=[0,1,2,3],IR=(()=>{class n{ngZone=L(Qe);scheduler=L(Eo);errorHandler=L(Ni,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(sc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&rt(ze.AfterRenderHooksStart),this.executing=!0;for(let r of bR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&rt(ze.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Ka]??=[]).push(t),Ja(r),r[Te]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Og.AFTER_NEXT_RENDER,t):t()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),gg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ka];e&&(this.view[Ka]=e.filter(t=>t!==this))}};function Sh(n,e){let t=e?.injector??L(ct);return oi("NgAfterNextRender"),LB(n,t,e,!0)}function VB(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function LB(n,e,t,r){let i=e.get(Jw);i.impl??=e.get(IR);let o=e.get(sc,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Un):null,a=e.get(ph,null,{optional:!0}),c=new gg(i.impl,VB(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var TR=new ie("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:L(xt)})});function CR(n,e,t){let r=n.get(TR);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function UB(n,e){let t=n.get(TR);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function jB(n,e){for(let[t,r]of e)CR(n,r.animateFns)}function y1(n,e,t,r){let i=n?.[Qa]?.enter;e!==null&&i&&i.has(t.index)&&jB(r,i)}function Jl(n,e,t,r,i,o,s,a){if(i!=null){let c,d=!1;Zr(i)?c=i:Oi(i)&&(d=!0,i=i[Xr]);let h=Dr(i);n===0&&r!==null?(y1(a,r,o,t),s==null?hR(e,r,h):mg(e,r,h,s||null,!0)):n===1&&r!==null?(y1(a,r,o,t),mg(e,r,h,s||null,!0)):n===2?_1(a,o,t,m=>{fR(e,h,d,m)}):n===3&&_1(a,o,t,()=>{e.destroyNode(h)}),c!=null&&ZB(e,n,t,c,o,r,s)}}function BB(n,e){SR(n,e),e[Xr]=null,e[Sr]=null}function $B(n,e,t,r,i,o){r[Xr]=i,r[Sr]=e,Vg(n,r,t,1,i,o)}function SR(n,e){e[ki].changeDetectionScheduler?.notify(9),Vg(n,e,e[Et],2,null,null)}function zB(n){let e=n[Wl];if(!e)return cw(n[be],n);for(;e;){let t=null;if(Oi(e))t=e[Wl];else{let r=e[Ft];r&&(t=r)}if(!t){for(;e&&!e[Cr]&&e!==n;)Oi(e)&&cw(e[be],e),e=e[on];e===null&&(e=n),Oi(e)&&cw(e[be],e),t=e&&e[Cr]}e=t}}function Xw(n,e){let t=n[ch],r=t.indexOf(e);t.splice(r,1)}function Fg(n,e){if(Ya(e))return;let t=e[Et];t.destroyNode&&Vg(n,e,t,3,null,null),zB(e)}function cw(n,e){if(Ya(e))return;let t=ge(null);try{e[Te]&=-129,e[Te]|=256,e[cr]&&Pa(e[cr]),GB(n,e),HB(n,e),e[be].type===1&&e[Et].destroy();let r=e[Ha];if(r!==null&&Zr(e[on])){r!==e[on]&&Xw(r,e);let i=e[Wa];i!==null&&i.detachView(n)}Ew(e)}finally{ge(t)}}function _1(n,e,t,r){let i=n?.[Qa];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&nc.add(n[Io]),CR(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let d=s.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),qB(n,r)}else n&&nc.delete(n[Io]),r(!1)},i)}function qB(n,e){let t=n[Qa]?.running;if(t){t.then(()=>{n[Qa].running=void 0,nc.delete(n[Io]),e(!0)});return}e(!1)}function HB(n,e){let t=n.cleanup,r=e[Gl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Gl]=null);let i=e[_o];if(i!==null){e[_o]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Os];if(o!==null){e[Os]=null;for(let s of o)s.destroy()}}function GB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof tc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];rt(ze.LifecycleHookStart,a,c);try{c.call(a)}finally{rt(ze.LifecycleHookEnd,a,c)}}else{rt(ze.LifecycleHookStart,i,o);try{o.call(i)}finally{rt(ze.LifecycleHookEnd,i,o)}}}}}function WB(n,e,t){return KB(n,e.parent,t)}function KB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xr];if(js(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ri.None||i===ri.Emulated)return null}return ei(r,t)}function QB(n,e,t){return JB(n,e,t)}function YB(n,e,t){return n.type&40?ei(n,t):null}var JB=YB,v1;function Zw(n,e,t,r){let i=WB(n,r,e),o=e[Et],s=r.parent||e[Sr],a=QB(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)p1(o,i,t[c],a,!1);else p1(o,i,t,a,!1);v1!==void 0&&v1(o,r,e,t,i)}function yh(n,e){if(e!==null){let t=e.type;if(t&3)return ei(e,n);if(t&4)return Iw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return yh(n,r);{let i=n[e.index];return Zr(i)?Iw(-1,i):Dr(i)}}else{if(t&128)return yh(n,e.next);if(t&32)return Yw(e,n)()||Dr(n[e.index]);{let r=DR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fs(n[ar]);return yh(i,r)}else return yh(n,e.next)}}}return null}function DR(n,e){if(e!==null){let r=n[ar][Sr],i=e.projection;return r.projection[i]}return null}function Iw(n,e){let t=Ft+n+1;if(t<e.length){let r=e[t],i=r[be].firstChild;if(i!==null)return yh(r,i)}return e[Us]}function eb(n,e,t,r,i,o,s){for(;t!=null;){let a=r[bo];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(s&&e===0&&(c&&eu(Dr(c),r),t.flags|=2),!$w(t))if(d&8)eb(n,e,t.child,r,i,o,!1),Jl(e,n,a,i,c,t,o,r);else if(d&32){let h=Yw(t,r),m;for(;m=h();)Jl(e,n,a,i,m,t,o,r);Jl(e,n,a,i,c,t,o,r)}else d&16?XB(n,e,r,t,i,o):Jl(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Vg(n,e,t,r,i,o){eb(t,r,n.firstChild,e,i,o,!1)}function XB(n,e,t,r,i,o){let s=t[ar],c=s[Sr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Jl(e,n,t[bo],i,h,r,o,t)}else{let d=c,h=s[on];J1(r)&&(d.flags|=128),eb(n,e,d,h,i,o,!0)}}function ZB(n,e,t,r,i,o,s){let a=r[Us],c=Dr(r);a!==c&&Jl(e,n,t,o,a,i,s);for(let d=Ft;d<r.length;d++){let h=r[d];Vg(h[be],h,n,e,o,a)}}function e4(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ui.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ui.Important),n.setStyle(t,r,i,o))}}function AR(n,e,t,r,i){let o=Vi(),s=r&2;try{Bs(-1),s&&e.length>St&&wR(n,e,St,!1);let a=s?ze.TemplateUpdateStart:ze.TemplateCreateStart;rt(a,i,t),t(r,i)}finally{Bs(o);let a=s?ze.TemplateUpdateEnd:ze.TemplateCreateEnd;rt(a,i,t)}}function tb(n,e,t){a4(n,e,t),(t.flags&64)===64&&c4(n,e,t)}function Lg(n,e,t=ei){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function t4(n,e,t,r){let o=r.get(oR,iR)||t===ri.ShadowDom||t===ri.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return n4(s),s}function n4(n){r4(n)}var r4=()=>null;function i4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function xR(n,e,t,r,i,o){let s=e[be];if(nb(n,s,e,t,r)){js(n)&&s4(e,n.index);return}n.type&3&&(t=i4(t)),o4(n,e,t,r,i,o)}function o4(n,e,t,r,i,o){if(n.type&3){let s=ei(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function s4(n,e){let t=Ar(e,n);t[Te]&16||(t[Te]|=64)}function a4(n,e,t){let r=t.directiveStart,i=t.directiveEnd;js(t)&&kB(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||hg(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=fg(e,n,s,t);if(eu(c,e),o!==null&&h4(e,s-r,c,a,t,o),Fi(a)){let d=Ar(t.index,e);d[Ot]=fg(e,n,s,t)}}}function c4(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Hx();try{Bs(o);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Km(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&l4(c,d)}}finally{Bs(-1),Km(s)}}function l4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function RR(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];SB(e,o.selectors,!1)&&(r??=[],Fi(o)?r.unshift(o):r.push(o))}return r}function u4(n,e,t,r,i,o){let s=ei(n,e);d4(e[Et],s,o,n.value,t,r,i)}function d4(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?zl(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function h4(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],d=s[a+1];bw(r,t,c,d)}}function PR(n,e,t,r,i){let o=St+t,s=e[be],a=i(s,e,n,r,t);e[o]=a,Ql(n,!0);let c=n.type===2;return c?(pR(e[Et],a,n),(Ox()===0||lh(n))&&eu(a,e),Fx()):eu(a,e),Xm()&&(!c||!$w(n))&&Zw(s,e,a,n),n}function MR(n){let e=n;return QE()?Ux():(e=e.parent,Ql(e,!1)),e}function f4(n,e){let t=n[bo];if(!t)return;let r;try{r=t.get(lr,null)}catch{r=null}r?.(e)}function nb(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],h=s[c+1],m=e.data[d];bw(m,t[d],h,i),a=!0}if(o)for(let c of o){let d=t[c],h=e.data[c];bw(h,d,r,i),a=!0}return a}function p4(n,e){let t=Ar(e,n),r=t[be];m4(r,t);let i=t[Xr];i!==null&&t[Hl]===null&&(t[Hl]=sR(i,t[bo])),rt(ze.ComponentStart);try{rb(r,t,t[Ot])}finally{rt(ze.ComponentEnd,t[Ot])}}function m4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function rb(n,e,t){Qm(e);try{let r=n.viewQuery;r!==null&&ww(1,r,t);let i=n.template;i!==null&&AR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wa]?.finishViewCreation(n),n.staticContentQueries&&aR(n,e),n.staticViewQueries&&ww(2,n.viewQuery,t);let o=n.components;o!==null&&g4(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Te]&=-5,Ym()}}function g4(n,e){for(let t=0;t<e.length;t++)p4(n,e[t])}function Ug(n,e,t,r){let i=ge(null);try{let o=e.tView,a=n[Te]&4096?4096:16,c=Kw(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Ha]=d;let h=n[Wa];return h!==null&&(c[Wa]=h.createEmbeddedView(o)),rb(o,c,t),c}finally{ge(i)}}function Eh(n,e){return!e||e.firstChild===null||J1(n)}function wh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Dr(o)),Zr(o)&&NR(o,r);let s=t.type;if(s&8)wh(n,e,t.child,r);else if(s&32){let a=Yw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=DR(e,t);if(Array.isArray(a))r.push(...a);else{let c=Fs(e[ar]);wh(c[be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function NR(n,e){for(let t=Ft;t<n.length;t++){let r=n[t],i=r[be].firstChild;i!==null&&wh(r[be],r,i,e)}n[Us]!==n[Xr]&&e.push(n[Us])}function kR(n){if(n[Ka]!==null){for(let e of n[Ka])e.impl.addSequence(e);n[Ka].length=0}}var OR=[];function y4(n){return n[cr]??_4(n)}function _4(n){let e=OR.pop()??Object.create(E4);return e.lView=n,e}function v4(n){n.lView[cr]!==n&&(n.lView=null,OR.push(n))}var E4=de(z({},xl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ja(n.lView)},consumerOnSignalRead(){this.lView[cr]=this}});function w4(n){let e=n[cr]??Object.create(b4);return e.lView=n,e}var b4=de(z({},xl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Fs(n.lView);for(;e&&!FR(e[be]);)e=Fs(e);e&&$E(e)},consumerOnSignalRead(){this.lView[cr]=this}});function FR(n){return n.type!==2}function VR(n){if(n[Os]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Os])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Te]&8192)}}var I4=100;function LR(n,e=0){let r=n[ki].rendererFactory,i=!1;i||r.begin?.();try{T4(n,e)}finally{i||r.end?.()}}function T4(n,e){let t=YE();try{eh(!0),Tw(n,e);let r=0;for(;hh(n);){if(r===I4)throw new G(103,!1);r++,Tw(n,1)}}finally{eh(t)}}function C4(n,e,t,r){if(Ya(e))return;let i=e[Te],o=!1,s=!1;Qm(e);let a=!0,c=null,d=null;o||(FR(n)?(d=y4(e),c=Rl(d)):tm()===null?(a=!1,d=w4(e),c=Rl(d)):e[cr]&&(Pa(e[cr]),e[cr]=null));try{BE(e),$x(n.bindingStartIndex),t!==null&&AR(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let S=n.preOrderCheckHooks;S!==null&&og(e,S,null)}else{let S=n.preOrderHooks;S!==null&&sg(e,S,0,null),sw(e,0)}if(s||S4(e),VR(e),UR(e,0),n.contentQueries!==null&&aR(n,e),!o)if(h){let S=n.contentCheckHooks;S!==null&&og(e,S)}else{let S=n.contentHooks;S!==null&&sg(e,S,1),sw(e,1)}A4(n,e);let m=n.components;m!==null&&BR(e,m,0);let w=n.viewQuery;if(w!==null&&ww(2,w,r),!o)if(h){let S=n.viewCheckHooks;S!==null&&og(e,S)}else{let S=n.viewHooks;S!==null&&sg(e,S,2),sw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[qm]){for(let S of e[qm])S();e[qm]=null}o||(kR(e),e[Te]&=-73)}catch(h){throw o||Ja(e),h}finally{d!==null&&($d(d,c),a&&v4(d)),Ym()}}function UR(n,e){for(let t=Z1(n);t!==null;t=eR(t))for(let r=Ft;r<t.length;r++){let i=t[r];jR(i,e)}}function S4(n){for(let e=Z1(n);e!==null;e=eR(e)){if(!(e[Te]&2))continue;let t=e[ch];for(let r=0;r<t.length;r++){let i=t[r];$E(i)}}}function D4(n,e,t){rt(ze.ComponentStart);let r=Ar(e,n);try{jR(r,t)}finally{rt(ze.ComponentEnd,r[Ot])}}function jR(n,e){Hm(n)&&Tw(n,e)}function Tw(n,e){let r=n[be],i=n[Te],o=n[cr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&zd(o)),s||=!1,o&&(o.dirty=!1),n[Te]&=-9217,s)C4(r,n,r.template,n[Ot]);else if(i&8192){let a=ge(null);try{VR(n),UR(n,1);let c=r.components;c!==null&&BR(n,c,1),kR(n)}finally{ge(a)}}}function BR(n,e,t){for(let r=0;r<e.length;r++)D4(n,e[r],t)}function A4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Bs(~i);else{let o=i,s=t[++r],a=t[++r];qx(s,o);let c=e[o];rt(ze.HostBindingsUpdateStart,c);try{a(2,c)}finally{rt(ze.HostBindingsUpdateEnd,c)}}}}finally{Bs(-1)}}function ib(n,e){let t=YE()?64:1088;for(n[ki].changeDetectionScheduler?.notify(e);n;){n[Te]|=t;let r=Fs(n);if(Kl(n)&&!r)return n;n=r}return null}function $R(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function zR(n,e){let t=Ft+e;if(t<n.length)return n[t]}function jg(n,e,t,r=!0){let i=e[be];if(x4(i,e,n,t),r){let s=Iw(t,n),a=e[Et],c=a.parentNode(n[Us]);c!==null&&$B(i,n[Sr],a,e,c,s)}let o=e[Hl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qR(n,e){let t=bh(n,e);return t!==void 0&&Fg(t[be],t),t}function bh(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t];if(r){let i=r[Ha];i!==null&&i!==n&&Xw(i,r),e>0&&(n[t-1][Cr]=r[Cr]);let o=ih(n,Ft+e);BB(r[be],r);let s=o[Wa];s!==null&&s.detachView(o[be]),r[on]=null,r[Cr]=null,r[Te]&=-129}return r}function x4(n,e,t,r){let i=Ft+r,o=t.length;r>0&&(t[i-1][Cr]=e),r<o-Ft?(e[Cr]=t[i],AE(t,Ft+r,e)):(t.push(e),e[Cr]=null),e[on]=t;let s=e[Ha];s!==null&&t!==s&&HR(s,e);let a=e[Wa];a!==null&&a.insertView(n),Gm(e),e[Te]|=128}function HR(n,e){let t=n[ch],r=e[on];if(Oi(r))n[Te]|=2;else{let i=r[on][ar];e[ar]!==i&&(n[Te]|=2)}t===null?n[ch]=[e]:t.push(e)}var $s=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[be];return wh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return Ya(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[on];if(Zr(e)){let t=e[ah],r=t?t.indexOf(this):-1;r>-1&&(bh(e,r),ih(t,r))}this._attachedToViewContainer=!1}Fg(this._lView[be],this._lView)}onDestroy(e){zE(this._lView,e)}markForCheck(){ib(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Te]&=-129}reattach(){Gm(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,LR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kl(this._lView),t=this._lView[Ha];t!==null&&!e&&Xw(t,this._lView),SR(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let t=Kl(this._lView),r=this._lView[Ha];r!==null&&!t&&HR(r,this._lView),Gm(this._lView)}};var Dh=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=R4;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Ug(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new $s(o)}}return n})();function R4(){return GR(xn(),Ne())}function GR(n,e){return n.type&4?new Dh(e,n,Ag(n,e)):null}function Ah(n,e,t,r,i){let o=n.data[e];if(o===null)o=P4(n,e,t,r,i),zx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Lx();o.injectorIndex=s===null?-1:s.injectorIndex}return Ql(o,!0),o}function P4(n,e,t,r,i){let o=KE(),s=QE(),a=s?o:o&&o.parent,c=n.data[e]=N4(n,a,t,e,r,i);return M4(n,c,o,s),c}function M4(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function N4(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Vx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function k4(n){let e=n[FE]??[],r=n[on][Et],i=[];for(let o of e)o.data[rR]!==void 0?i.push(o):O4(o,r);n[FE]=i}function O4(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[nR];for(;t<i;){let o=r.nextSibling;fR(e,r,!1),r=o,t++}}}var F4=()=>null,V4=()=>null;function Cw(n,e){return F4(n,e)}function WR(n,e,t){return V4(n,e,t)}var KR=class{},Bg=class{},Sw=class{resolveComponentFactory(e){throw new G(917,!1)}},xh=class{static NULL=new Sw},Do=class{},si=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>L4()}return n})();function L4(){let n=Ne(),e=xn(),t=Ar(e.index,n);return(Oi(t)?t:n)[Et]}var QR=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var ag={},Dw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ag,r);return i!==ag||t===ag?i:this.parentInjector.get(e,t,r)}};function yg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Vm(i,a);else if(o==2){let c=a,d=e[++s];r=Vm(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ue(n,e=0){let t=Ne();if(t===null)return ve(n,e);let r=xn();return K1(r,t,_n(n),e)}function YR(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,d=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(s);break}B4(n,e,t,a,o,c,d)}o!==null&&r!==null&&U4(t,r,o)}function U4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function j4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function B4(n,e,t,r,i,o,s){let a=r.length,c=null;for(let w=0;w<a;w++){let S=r[w];c===null&&Fi(S)&&(c=S,j4(n,t,w)),_w(hg(t,e),n,S.type)}W4(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let w=0;w<a;w++){let S=r[w];S.providersResolver&&S.providersResolver(S)}let d=!1,h=!1,m=ER(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let w=0;w<a;w++){let S=r[w];if(t.mergedAttrs=Zl(t.mergedAttrs,S.hostAttrs),z4(n,t,e,m,S),G4(m,S,i),s!==null&&s.has(S)){let[k,V]=s.get(S);t.directiveToIndex.set(S.type,[m,k+t.directiveStart,V+t.directiveStart])}else(o===null||!o.has(S))&&t.directiveToIndex.set(S.type,m);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let M=S.type.prototype;!d&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}$4(n,t,o)}function $4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))E1(0,e,i,r),E1(1,e,i,r),b1(e,r,!1);else{let o=t.get(i);w1(0,e,o,r),w1(1,e,o,r),b1(e,r,!0)}}}function E1(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),JR(e,o)}}function w1(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),JR(e,s)}}function JR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function b1(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Gw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let d=o[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function z4(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ks(i.type,!0)),s=new tc(o,Fi(i),ue,null);n.blueprint[r]=s,t[r]=s,q4(n,e,r,ER(n,t,i.hostVars,Hn),i)}function q4(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;H4(s)!=a&&s.push(a),s.push(t,r,o)}}function H4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function G4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fi(e)&&(t[""]=n)}}function W4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XR(n,e,t,r,i,o,s,a){let c=e[be],d=c.consts,h=xr(d,s),m=Ah(c,n,t,r,h);return o&&YR(c,e,m,xr(d,a),i),m.mergedAttrs=Zl(m.mergedAttrs,m.attrs),m.attrs!==null&&yg(m,m.attrs,!1),m.mergedAttrs!==null&&yg(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function ZR(n,e){U1(n,e),VE(e)&&n.queries.elementEnd(e)}function K4(n,e,t,r,i,o){let s=e.consts,a=xr(s,i),c=Ah(e,n,t,r,a);if(c.mergedAttrs=Zl(c.mergedAttrs,c.attrs),o!=null){let d=xr(s,o);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&yg(c,c.attrs,!1),c.mergedAttrs!==null&&yg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ob(n){return tP(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function eP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function tP(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function sb(n,e,t){return n[e]=t}function ii(n,e,t){if(t===Hn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function _g(n,e,t,r){let i=ii(n,e,t);return ii(n,e+1,r)||i}function Q4(n,e,t,r,i,o){let s=_g(n,e,t,r);return _g(n,e+2,i,o)||s}function lw(n,e,t){return function r(i){let o=js(n)?Ar(n.index,e):e;ib(o,5);let s=e[Ot],a=I1(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=I1(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function I1(n,e,t,r){let i=ge(null);try{return rt(ze.OutputStart,e,t),t(r)!==!1}catch(o){return f4(n,o),!1}finally{rt(ze.OutputEnd,e,t),ge(i)}}function Y4(n,e,t,r,i,o,s,a){let c=lh(n),d=!1,h=null;if(!r&&c&&(h=X4(e,t,o,n.index)),h!==null){let m=h.__ngLastListenerFn__||h;m.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,d=!0}else{let m=ei(n,t),w=r?r(m):m;cB(t,w,o,a);let S=i.listen(w,o,a);if(!J4(o)){let M=r?k=>r(Dr(k[n.index])):n.index;nP(M,e,t,o,a,S,!1)}}return d}function J4(n){return n.startsWith("animation")||n.startsWith("transition")}function X4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Gl],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function nP(n,e,t,r,i,o,s){let a=e.firstCreatePass?kx(e):null,c=Nx(t),d=c.length;c.push(i,o),a&&a.push(r,n,d,(d+1)*(s?-1:1))}function T1(n,e,t,r,i,o){let s=e[t],a=e[be],d=a.data[t].outputs[r],m=s[d].subscribe(o);nP(n.index,a,e,i,o,m,!0)}var Aw=Symbol("BINDING");var vg=class extends xh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vs(e);return new tu(t,this.ngModule)}};function Z4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&kg.SignalBased)!==0};return i&&(o.transform=i),o})}function e3(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function t3(n,e,t){let r=e instanceof xt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Dw(t,r):t}function n3(n){let e=n.get(Do,null);if(e===null)throw new G(407,!1);let t=n.get(QR,null),r=n.get(Eo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function r3(n,e){let t=rP(n);return dR(e,t,t==="svg"?LE:t==="math"?xx:null)}function rP(n){return(n.selectors[0][0]||"div").toLowerCase()}var tu=class extends Bg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Z4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=e3(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){rt(ze.DynamicComponentStart);let a=ge(null);try{let c=this.componentDef,d=i3(r,c,s,o),h=t3(c,i||this.ngModule,e),m=n3(h),w=m.rendererFactory.createRenderer(null,c),S=r?t4(w,r,c.encapsulation,h):r3(c,w),M=s?.some(C1)||o?.some(q=>typeof q!="function"&&q.bindings.some(C1)),k=Kw(null,d,null,512|vR(c),null,null,m,w,h,null,sR(S,h,!0));k[St]=S,Qm(k);let V=null;try{let q=XR(St,k,2,"#host",()=>d.directiveRegistry,!0,0);pR(w,S,q),eu(S,k),tb(d,k,q),cR(d,q,k),ZR(d,q),t!==void 0&&s3(q,this.ngContentSelectors,t),V=Ar(q.index,k),k[Ot]=V[Ot],rb(d,k,null)}catch(q){throw V!==null&&Ew(V),Ew(k),q}finally{rt(ze.DynamicComponentEnd),Ym()}return new Eg(this.componentType,k,!!M)}finally{ge(a)}}};function i3(n,e,t,r){let i=n?["ng-version","21.1.2"]:PB(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Aw].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let m=r[h];if(typeof m!="function")for(let w of m.bindings){a+=w[Aw].requiredVars;let S=h+1;w.create&&(w.targetIdx=S,(o??=[]).push(w)),w.update&&(w.targetIdx=S,(s??=[]).push(w))}}let c=[e];if(r)for(let h of r){let m=typeof h=="function"?h:h.type,w=CE(m);c.push(w)}return Ww(0,null,o3(o,s),1,a,c,null,null,null,[i],null)}function o3(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function C1(n){let e=n[Aw].kind;return e==="input"||e==="twoWay"}var Eg=class extends KR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=uh(t[be],St),this.location=Ag(this._tNode,t),this.instance=Ar(this._tNode.index,t)[Ot],this.hostView=this.changeDetectorRef=new $s(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=nb(r,i[be],i,e,t);this.previousInputValues.set(e,t);let s=Ar(r.index,i);ib(s,1)}get injector(){return new ec(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function s3(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ac=(()=>{class n{static __NG_ELEMENT_ID__=a3}return n})();function a3(){let n=xn();return l3(n,Ne())}var c3=ac,iP=class extends c3{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ag(this._hostTNode,this._hostLView)}get injector(){return new ec(this._hostTNode,this._hostLView)}get parentInjector(){let e=Uw(this._hostTNode,this._hostLView);if($1(e)){let t=ug(e,this._hostLView),r=lg(e),i=t[be].data[r+8];return new ec(i,t)}else return new ec(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=S1(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Cw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Eh(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!Oj(e),d;if(c)d=t;else{let V=t||{};d=V.index,r=V.injector,i=V.projectableNodes,o=V.environmentInjector||V.ngModuleRef,s=V.directives,a=V.bindings}let h=c?e:new tu(Vs(e)),m=r||this.parentInjector;if(!o&&h.ngModule==null){let q=(c?m:this.parentInjector).get(xt,null);q&&(o=q)}let w=Vs(h.componentType??{}),S=Cw(this._lContainer,w?.id??null),M=S?.firstChild??null,k=h.create(m,i,M,o,s,a);return this.insertImpl(k.hostView,d,Eh(this._hostTNode,S)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Rx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[on],d=new iP(c,c[Sr],c[on]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return jg(s,i,o,r),e.attachToViewContainerRef(),AE(uw(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=S1(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=bh(this._lContainer,t);r&&(ih(uw(this._lContainer),t),Fg(r[be],r))}detach(e){let t=this._adjustIndex(e,-1),r=bh(this._lContainer,t);return r&&ih(uw(this._lContainer),t)!=null?new $s(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function S1(n){return n[ah]}function uw(n){return n[ah]||(n[ah]=[])}function l3(n,e){let t,r=e[n.index];return Zr(r)?t=r:(t=$R(r,e,null,n),e[n.index]=t,Qw(e,t)),d3(t,e,n,r),new iP(t,n,e)}function u3(n,e){let t=n[Et],r=t.createComment(""),i=ei(e,n),o=t.parentNode(i);return mg(t,o,r,t.nextSibling(i),!1),r}var d3=p3,h3=()=>!1;function f3(n,e,t){return h3(n,e,t)}function p3(n,e,t,r){if(n[Us])return;let i;t.type&8?i=Dr(r):i=u3(e,t),n[Us]=i}var rc=class{},$g=class{};var wg=class extends rc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=TE(e);this._bootstrapComponents=yR(o.bootstrap),this._r3Injector=ew(e,t,[{provide:rc,useValue:this},{provide:xh,useValue:this.componentFactoryResolver},...r],vo(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bg=class extends $g{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new wg(this.moduleType,e,[])}};var Ih=class extends rc{injector;componentFactoryResolver=new vg(this);instance=null;constructor(e){super();let t=new Ba([...e.providers,{provide:rc,useValue:this},{provide:xh,useValue:this.componentFactoryResolver}],e.parent||sh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Rh(n,e,t=null){return new Ih({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var m3=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=PE(!1,t.type),i=r.length>0?Rh([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(ve(xt))})}return n})();function Ye(n){return ru(()=>{let e=oP(n),t=de(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===jw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(m3).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ri.Emulated,styles:n.styles||Ln,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&oi("NgStandalone"),sP(t);let r=n.dependencies;return t.directiveDefs=D1(r,g3),t.pipeDefs=D1(r,gx),t.id=v3(t),t})}function g3(n){return Vs(n)||CE(n)}function Rr(n){return ru(()=>({type:n.type,bootstrap:n.bootstrap||Ln,declarations:n.declarations||Ln,imports:n.imports||Ln,exports:n.exports||Ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function y3(n,e){if(n==null)return Ls;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=kg.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function _3(n){if(n==null)return Ls;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function wt(n){return ru(()=>{let e=oP(n);return sP(e),e})}function zg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function oP(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ls,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:y3(n.inputs,e),outputs:_3(n.outputs),debugInfo:null}}function sP(n){n.features?.forEach(e=>e(n))}function D1(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function v3(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function E3(n){return Object.getPrototypeOf(n.prototype).constructor}function dr(n){let e=E3(n.type),t=!0,r=[n];for(;e;){let i;if(Fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=dw(n.inputs),s.declaredInputs=dw(n.declaredInputs),s.outputs=dw(n.outputs);let a=i.hostBindings;a&&C3(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&I3(n,c),d&&T3(n,d),w3(n,i),mx(n.outputs,i.outputs),Fi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===dr&&(t=!1)}}e=Object.getPrototypeOf(e)}b3(r)}function w3(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function b3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zl(i.hostAttrs,t=Zl(t,i.hostAttrs))}}function dw(n){return n===Ls?{}:n===Ln?[]:n}function I3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function T3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function C3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function aP(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Zl(n.mergedAttrs,n.attrs);let h=n.tView=Ww(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ql(n,!1);let c=D3(t,e,n,r);Xm()&&Zw(t,e,c,n),eu(c,e);let d=$R(c,e,c,n);e[r+St]=d,Qw(e,d),f3(d,n,e)}function S3(n,e,t,r,i,o,s,a,c,d,h){let m=t+St,w;return e.firstCreatePass?(w=Ah(e,m,4,s||null,a||null),HE()&&YR(e,n,w,xr(e.consts,d),RR),U1(e,w)):w=e.data[m],aP(w,n,e,t,r,i,o,c),lh(w)&&tb(e,n,w),d!=null&&Lg(n,w,h),w}function Ig(n,e,t,r,i,o,s,a,c,d,h){let m=t+St,w;if(e.firstCreatePass){if(w=Ah(e,m,4,s||null,a||null),d!=null){let S=xr(e.consts,d);w.localNames=[];for(let M=0;M<S.length;M+=2)w.localNames.push(S[M],-1)}}else w=e.data[m];return aP(w,n,e,t,r,i,o,c),d!=null&&Lg(n,w,h),w}function ne(n,e,t,r,i,o,s,a){let c=Ne(),d=sn(),h=xr(d.consts,o);return S3(c,d,n,e,t,r,i,h,void 0,s,a),ne}var D3=A3;function A3(n,e,t,r){return Zm(!0),e[Et].createComment("")}var ab=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function cP(n){return typeof n=="function"&&n[On]!==void 0}function cb(n){return cP(n)&&typeof n.set=="function"}var lb=new ie("");function zs(n){return!!n&&typeof n.then=="function"}function ub(n){return!!n&&typeof n.subscribe=="function"}var db=new ie("");function qg(n){return vn([{provide:db,multi:!0,useValue:n}])}var hb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=L(db,{optional:!0})??[];injector=L(ct);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Gt(this.injector,i);if(zs(o))t.push(o);else if(ub(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hg=new ie("");function lP(){O0(()=>{let n="";throw new G(600,n)})}function uP(n){return n.isBoundToModule}var x3=10;var ai=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(lr);afterRenderManager=L(Jw);zonelessEnabled=L(mh);rootEffectScheduler=L(eg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new yt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(So);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ke(t=>!t))}constructor(){L(sc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=L(xt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ct.NULL){return this._injector.get(Qe).run(()=>{rt(ze.BootstrapComponentStart);let s=t instanceof Bg;if(!this._injector.get(hb).done){let M="";throw new G(405,M)}let c;s?c=t:c=this._injector.get(xh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=uP(c)?void 0:this._injector.get(rc),h=r||c.selector,m=c.create(i,[],h,d),w=m.location.nativeElement,S=m.injector.get(lb,null);return S?.registerApplication(w),m.onDestroy(()=>{this.detachView(m.hostView),_h(this.components,m),S?.unregisterApplication(w)}),this._loadComponent(m),rt(ze.BootstrapComponentEnd,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){rt(ze.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Og.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw rt(ze.ChangeDetectionEnd),new G(101,!1);let t=ge(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ge(t),this.afterTick.next(),rt(ze.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Do,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<x3;){rt(ze.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{rt(ze.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!hh(i))continue;let o=r&&!this.zonelessEnabled?0:1;LR(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>hh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;_h(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Hg,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>_h(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _h(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ph(n,e,t,r){let i=Ne(),o=Xa();if(ii(i,o,e)){let s=sn(),a=Jm();u4(a,i,n,e,t,r)}return Ph}var ooe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var xw=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function hw(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function R3(n,e,t,r){let i,o,s=0,a=n.length-1,c=void 0;if(Array.isArray(e)){ge(r);let d=e.length-1;for(ge(null);s<=a&&s<=d;){let h=n.at(s),m=e[s],w=hw(s,h,s,m,t);if(w!==0){w<0&&n.updateValue(s,m),s++;continue}let S=n.at(a),M=e[d],k=hw(a,S,d,M,t);if(k!==0){k<0&&n.updateValue(a,M),a--,d--;continue}let V=t(s,h),q=t(a,S),ee=t(s,m);if(Object.is(ee,q)){let Y=t(d,M);Object.is(Y,V)?(n.swap(s,a),n.updateValue(a,M),d--,a--):n.move(a,s),n.updateValue(s,m),s++;continue}if(i??=new Tg,o??=x1(n,s,a,t),Rw(n,i,s,ee))n.updateValue(s,m),s++,a++;else if(o.has(ee))i.set(V,n.detach(s)),a--;else{let Y=n.create(s,e[s]);n.attach(s,Y),s++,a++}}for(;s<=d;)A1(n,i,t,s,e[s]),s++}else if(e!=null){ge(r);let d=e[Symbol.iterator]();ge(null);let h=d.next();for(;!h.done&&s<=a;){let m=n.at(s),w=h.value,S=hw(s,m,s,w,t);if(S!==0)S<0&&n.updateValue(s,w),s++,h=d.next();else{i??=new Tg,o??=x1(n,s,a,t);let M=t(s,w);if(Rw(n,i,s,M))n.updateValue(s,w),s++,a++,h=d.next();else if(!o.has(M))n.attach(s,n.create(s,w)),s++,a++,h=d.next();else{let k=t(s,m);i.set(k,n.detach(s)),a--}}}for(;!h.done;)A1(n,i,t,n.length,h.value),h=d.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(d=>{n.destroy(d)})}function Rw(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function A1(n,e,t,r,i){if(Rw(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function x1(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Tg=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function fb(n,e,t,r,i,o,s,a){oi("NgControlFlow");let c=Ne(),d=sn(),h=xr(d.consts,o);return Ig(c,d,n,e,t,r,i,h,256,s,a),pb}function pb(n,e,t,r,i,o,s,a){oi("NgControlFlow");let c=Ne(),d=sn(),h=xr(d.consts,o);return Ig(c,d,n,e,t,r,i,h,512,s,a),pb}function mb(n,e){oi("NgControlFlow");let t=Ne(),r=Xa(),i=t[r]!==Hn?t[r]:-1,o=i!==-1?Cg(t,St+i):void 0,s=0;if(ii(t,r,n)){let a=ge(null);try{if(o!==void 0&&qR(o,s),n!==-1){let c=St+n,d=Cg(t,c),h=kw(t[be],c),m=WR(d,h,t),w=Ug(t,h,e,{dehydratedView:m});jg(d,w,s,Eh(h,m))}}finally{ge(a)}}else if(o!==void 0){let a=zR(o,s);a!==void 0&&(a[Ot]=e)}}var Pw=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ft}};var Mw=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function gb(n,e,t,r,i,o,s,a,c,d,h,m,w){oi("NgControlFlow");let S=Ne(),M=sn(),k=c!==void 0,V=Ne(),q=a?s.bind(V[ar][Ot]):s,ee=new Mw(k,q);V[St+n]=ee,Ig(S,M,n+1,e,t,r,i,xr(M.consts,o),256),k&&Ig(S,M,n+2,c,d,h,m,xr(M.consts,w),512)}var Nw=class extends xw{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ft}at(e){return this.getLView(e)[Ot].$implicit}attach(e,t){let r=t[Hl];this.needsIndexUpdate||=e!==this.length,jg(this.lContainer,t,e,Eh(this.templateTNode,r)),P3(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,M3(this.lContainer,e),N3(this.lContainer,e)}create(e,t){let r=Cw(this.lContainer,this.templateTNode.tView.ssrId);return Ug(this.hostLView,this.templateTNode,new Pw(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Fg(e[be],e)}updateValue(e,t){this.getLView(e)[Ot].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ot].$index=e}getLView(e){return k3(this.lContainer,e)}};function yb(n){let e=ge(null),t=Vi();try{let r=Ne(),i=r[be],o=r[t],s=t+1,a=Cg(r,s);if(o.liveCollection===void 0){let d=kw(i,s);o.liveCollection=new Nw(a,r,d)}else o.liveCollection.reset();let c=o.liveCollection;if(R3(c,n,o.trackByFn,e),c.updateIndexes(),o.hasEmptyBlock){let d=Xa(),h=c.length===0;if(ii(r,d,h)){let m=t+2,w=Cg(r,m);if(h){let S=kw(i,m),M=WR(w,S,r),k=Ug(r,S,void 0,{dehydratedView:M});jg(w,k,0,Eh(S,M))}else i.firstUpdatePass&&k4(w),qR(w,0)}}}finally{ge(e)}}function Cg(n,e){return n[e]}function P3(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t],i=r?r[Qa]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[bo];UB(o,i),nc.delete(r[Io]),i.detachedLeaveAnimationFns=void 0}}function M3(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t],i=r?r[Qa]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function N3(n,e){return bh(n,e)}function k3(n,e){return zR(n,e)}function kw(n,e){return uh(n,e)}function B(n,e,t){let r=Ne(),i=Xa();if(ii(r,i,e)){let o=sn(),s=Jm();xR(s,r,n,e,r[Et],t)}return B}function Ow(n,e,t,r,i){nb(e,n,t,i?"class":"style",r)}function C(n,e,t,r){let i=Ne(),o=i[be],s=n+St,a=o.firstCreatePass?XR(s,i,2,e,RR,HE(),t,r):o.data[s];if(PR(a,i,n,e,dP),lh(a)){let c=i[be];tb(c,i,a),cR(c,a,i)}return r!=null&&Lg(i,a),C}function A(){let n=sn(),e=xn(),t=MR(e);return n.firstCreatePass&&ZR(n,t),GE(t)&&WE(),qE(),t.classesWithoutHost!=null&&Bj(t)&&Ow(n,t,Ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&$j(t)&&Ow(n,t,Ne(),t.stylesWithoutHost,!1),A}function ye(n,e,t,r){return C(n,e,t,r),A(),ye}function Wt(n,e,t,r){let i=Ne(),o=i[be],s=n+St,a=o.firstCreatePass?K4(s,o,2,e,t,r):o.data[s];return PR(a,i,n,e,dP),r!=null&&Lg(i,a),Wt}function En(){let n=xn(),e=MR(n);return GE(e)&&WE(),qE(),En}function Bi(n,e,t,r){return Wt(n,e,t,r),En(),Bi}var dP=(n,e,t,r,i)=>(Zm(!0),dR(e[Et],r,Jx()));function me(){return Ne()}var gh=void 0;function O3(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var F3=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",gh,gh,gh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",O3],vh={};function _b(n,e,t){typeof e!="string"&&(t=e,e=n[Dt.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),vh[e]=n,t&&(vh[e][Dt.ExtraData]=t)}function hr(n){let e=V3(n),t=R1(e);if(t)return t;let r=e.split("-")[0];if(t=R1(r),t)return t;if(r==="en")return F3;throw new G(701,!1)}function R1(n){return n in vh||(vh[n]=Yr.ng&&Yr.ng.common&&Yr.ng.common.locales&&Yr.ng.common.locales[n]),vh[n]}var Dt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Dt||{});function V3(n){return n.toLowerCase().replace(/_/g,"-")}var Mh="en-US";var L3=Mh;function hP(n){typeof n=="string"&&(L3=n.toLowerCase().replace(/_/g,"-"))}function K(n,e,t){let r=Ne(),i=sn(),o=xn();return fP(i,r,r[Et],o,n,e,t),K}function fP(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=lw(r,e,o),Y4(r,n,e,s,t,i,o,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let m=0;m<h.length;m+=2){let w=h[m],S=h[m+1];c??=lw(r,e,o),T1(r,e,w,S,i,c)}if(d&&d.length)for(let m of d)c??=lw(r,e,o),T1(r,e,m,i,i,c)}}function $(n=1){return Yx(n)}function cc(n){let e=jx();return dh(e,St+n)}function ig(n,e){return n<<17|e<<2}function ic(n){return n>>17&32767}function U3(n){return(n&2)==2}function j3(n,e){return n&131071|e<<17}function Fw(n){return n|2}function nu(n){return(n&131068)>>2}function fw(n,e){return n&-131069|e<<2}function B3(n){return(n&1)===1}function Vw(n){return n|1}function $3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ic(s),c=nu(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let m=t;h=m[1],(h===null||ql(m,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let w=ic(n[a+1]);n[r+1]=ig(w,a),w!==0&&(n[w+1]=fw(n[w+1],r)),n[a+1]=j3(n[a+1],r)}else n[r+1]=ig(a,0),a!==0&&(n[a+1]=fw(n[a+1],r)),a=r;else n[r+1]=ig(c,0),a===0?a=r:n[c+1]=fw(n[c+1],r),c=r;d&&(n[r+1]=Fw(n[r+1])),P1(n,h,r,!0),P1(n,h,r,!1),z3(e,h,n,r,o),s=ig(a,c),o?e.classBindings=s:e.styleBindings=s}function z3(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ql(o,e)>=0&&(t[r+1]=Vw(t[r+1]))}function P1(n,e,t,r){let i=n[t+1],o=e===null,s=r?ic(i):nu(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],d=n[s+1];q3(c,e)&&(a=!0,n[s+1]=r?Vw(d):Fw(d)),s=r?ic(d):nu(d)}a&&(n[t+1]=r?Fw(i):Vw(i))}function q3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ql(n,e)>=0:!1}var ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function H3(n){return n.substring(ni.key,ni.keyEnd)}function G3(n){return W3(n),pP(n,mP(n,0,ni.textEnd))}function pP(n,e){let t=ni.textEnd;return t===e?-1:(e=ni.keyEnd=K3(n,ni.key=e,t),mP(n,e,t))}function W3(n){ni.key=0,ni.keyEnd=0,ni.value=0,ni.valueEnd=0,ni.textEnd=n.length}function mP(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function K3(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function xo(n,e,t){return gP(n,e,t,!1),xo}function At(n,e){return gP(n,e,null,!0),At}function Nh(n){Y3(n6,Q3,n,!0)}function Q3(n,e){for(let t=G3(e);t>=0;t=pP(e,t))$m(n,H3(e),!0)}function gP(n,e,t,r){let i=Ne(),o=sn(),s=Wm(2);if(o.firstUpdatePass&&_P(o,n,s,r),e!==Hn&&ii(i,s,e)){let a=o.data[Vi()];vP(o,a,i,i[Et],n,i[s+1]=i6(e,t),r,s)}}function Y3(n,e,t,r){let i=sn(),o=Wm(2);i.firstUpdatePass&&_P(i,null,o,r);let s=Ne();if(t!==Hn&&ii(s,o,t)){let a=i.data[Vi()];if(EP(a,r)&&!yP(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Vm(c,t||"")),Ow(i,a,s,t,r)}else r6(i,a,s,s[Et],s[o+1],s[o+1]=t6(n,e,t),r,o)}}function yP(n,e){return e>=n.expandoStartIndex}function _P(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Vi()],s=yP(n,t);EP(o,r)&&e===null&&!s&&(e=!1),e=J3(i,o,e,r),$3(i,o,e,t,s,r)}}function J3(n,e,t,r){let i=Gx(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=pw(null,n,e,t,r),t=Th(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=pw(i,n,e,t,r),o===null){let c=X3(n,e,r);c!==void 0&&Array.isArray(c)&&(c=pw(null,n,e,c[1],r),c=Th(c,e.attrs,r),Z3(n,e,r,c))}else o=e6(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function X3(n,e,t){let r=t?e.classBindings:e.styleBindings;if(nu(r)!==0)return n[ic(r)]}function Z3(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ic(i)]=r}function e6(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Th(r,s,t)}return Th(r,e.attrs,t)}function pw(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Th(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Th(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),$m(n,s,t?!0:e[++o]))}return n===void 0?null:n}function t6(n,e,t){if(t==null||t==="")return Ln;let r=[],i=iu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(i instanceof Set)for(let o of i)n(r,o,!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function n6(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&$m(n,r,t)}function r6(n,e,t,r,i,o,s,a){i===Hn&&(i=Ln);let c=0,d=0,h=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;h!==null||m!==null;){let w=c<i.length?i[c+1]:void 0,S=d<o.length?o[d+1]:void 0,M=null,k;h===m?(c+=2,d+=2,w!==S&&(M=m,k=S)):m===null||h!==null&&h<m?(c+=2,M=h):(d+=2,M=m,k=S),M!==null&&vP(n,e,t,r,M,k,s,a),h=c<i.length?i[c]:null,m=d<o.length?o[d]:null}}function vP(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=B3(d)?M1(c,e,t,i,nu(d),s):void 0;if(!Sg(h)){Sg(o)||U3(d)&&(o=M1(c,null,t,i,a,s));let m=UE(Vi(),t);e4(r,s,m,i,o)}}function M1(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,m=h===null,w=t[i+1];w===Hn&&(w=m?Ln:void 0);let S=m?zm(w,r):h===r?w:void 0;if(d&&!Sg(S)&&(S=zm(c,r)),Sg(S)&&(a=S,s))return a;let M=n[i+1];i=s?ic(M):nu(M)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=zm(c,r))}return a}function Sg(n){return n!==void 0}function i6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vo(iu(n)))),n}function EP(n,e){return(n.flags&(e?8:16))!==0}function P(n,e=""){let t=Ne(),r=sn(),i=n+St,o=r.firstCreatePass?Ah(r,i,1,e,null):r.data[i],s=o6(r,t,o,e);t[i]=s,Xm()&&Zw(r,t,s,o),Ql(o,!1)}var o6=(n,e,t,r)=>(Zm(!0),pB(e[Et],r));function s6(n,e,t,r=""){return ii(n,Xa(),t)?e+zl(t)+r:Hn}function a6(n,e,t,r,i,o=""){let s=Bx(),a=_g(n,s,t,i);return Wm(2),a?e+zl(t)+r+zl(i)+o:Hn}function he(n){return ke("",n),he}function ke(n,e,t){let r=Ne(),i=s6(r,n,e,t);return i!==Hn&&wP(r,Vi(),i),ke}function kh(n,e,t,r,i){let o=Ne(),s=a6(o,n,e,t,r,i);return s!==Hn&&wP(o,Vi(),s),kh}function wP(n,e,t){let r=UE(e,n);mB(n[Et],r,t)}function Oh(n,e,t){cb(e)&&(e=e());let r=Ne(),i=Xa();if(ii(r,i,e)){let o=sn(),s=Jm();xR(s,r,n,e,r[Et],t)}return Oh}function Gg(n,e){let t=cb(n);return t&&n.set(e),t}function Fh(n,e){let t=Ne(),r=sn(),i=xn();return fP(r,t,t[Et],i,n,e),Fh}function N1(n,e,t){let r=sn();r.firstCreatePass&&bP(e,r.data,r.blueprint,Fi(n),t)}function bP(n,e,t,r,i){if(n=_n(n),Array.isArray(n))for(let o=0;o<n.length;o++)bP(n[o],e,t,r,i);else{let o=sn(),s=Ne(),a=xn(),c=ja(n)?n:_n(n.provide),d=NE(n),h=a.providerIndexes&1048575,m=a.directiveStart,w=a.providerIndexes>>20;if(ja(n)||!n.multi){let S=new tc(d,i,ue,null),M=gw(c,e,i?h:h+w,m);M===-1?(_w(hg(a,s),o,c),mw(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)):(t[M]=S,s[M]=S)}else{let S=gw(c,e,h+w,m),M=gw(c,e,h,h+w),k=S>=0&&t[S],V=M>=0&&t[M];if(i&&!V||!i&&!k){_w(hg(a,s),o,c);let q=u6(i?l6:c6,t.length,i,r,d,n);!i&&V&&(t[M].providerFactory=q),mw(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),s.push(q)}else{let q=IP(t[i?M:S],d,!i&&r);mw(o,n,S>-1?S:M,q)}!i&&r&&V&&t[M].componentProviders++}}}function mw(n,e,t,r){let i=ja(e),o=Sx(e);if(i||o){let c=(o?_n(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function IP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function c6(n,e,t,r,i){return Lw(this.multi,[])}function l6(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=fg(r,r[be],this.providerFactory.index,i);s=c.slice(0,a),Lw(o,s);for(let d=a;d<c.length;d++)s.push(c[d])}else s=[],Lw(o,s);return s}function Lw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function u6(n,e,t,r,i,o){let s=new tc(n,t,ue,null);return s.multi=[],s.index=e,s.componentProviders=0,IP(s,i,r&&!t),s}function qs(n,e){return t=>{t.providersResolver=(r,i)=>N1(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>N1(r,i?i(e):e,!0))}}function Vh(n,e,t){return TP(Ne(),fh(),n,e,t)}function vb(n,e){let t=n[e];return t===Hn?void 0:t}function TP(n,e,t,r,i,o){let s=e+t;return ii(n,s,i)?sb(n,s+1,o?r.call(o,i):r(i)):vb(n,s+1)}function d6(n,e,t,r,i,o,s){let a=e+t;return _g(n,a,i,o)?sb(n,a+2,s?r.call(s,i,o):r(i,o)):vb(n,a+2)}function h6(n,e,t,r,i,o,s,a,c){let d=e+t;return Q4(n,d,i,o,s,a)?sb(n,d+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):vb(n,d+4)}function cn(n,e){let t=sn(),r,i=n+St;t.firstCreatePass?(r=f6(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ks(r.type,!0)),s,a=Vn(ue);try{let c=dg(!1),d=o();return dg(c),jE(t,Ne(),i,d),d}finally{Vn(a)}}function f6(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Eb(n,e,t){let r=n+St,i=Ne(),o=dh(i,r);return wb(i,r)?TP(i,fh(),e,o.transform,t,o):o.transform(t)}function fr(n,e,t,r){let i=n+St,o=Ne(),s=dh(o,i);return wb(o,i)?d6(o,fh(),e,s.transform,t,r,s):s.transform(t,r)}function Wg(n,e,t,r,i,o){let s=n+St,a=Ne(),c=dh(a,s);return wb(a,s)?h6(a,fh(),e,c.transform,t,r,i,o,c):c.transform(t,r,i,o)}function wb(n,e){return n[be].data[e].pure}function lc(n,e){return GR(n,e)}var Dg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},bb=(()=>{class n{compileModuleSync(t){return new bg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=TE(t),o=yR(i.declarations).reduce((s,a)=>{let c=Vs(a);return c&&s.push(new tu(c)),s},[]);return new Dg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var CP=(()=>{class n{applicationErrorHandler=L(lr);appRef=L(ai);taskService=L(So);ngZone=L(Qe);zonelessEnabled=L(mh);tracing=L(sc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new nn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(th):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(ow,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?t1:tw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(th+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SP(){return[{provide:Eo,useExisting:CP},{provide:Qe,useClass:nh},{provide:mh,useValue:!0}]}function p6(){return typeof $localize<"u"&&$localize.locale||Mh}var uc=new ie("",{factory:()=>L(uc,{optional:!0,skipSelf:!0})||p6()});function pt(n,e){return nm(n,e?.equal)}var PP=Symbol("InputSignalNode#UNSET"),P6=de(z({},rm),{transformFn:void 0,applyValueToInputSignal(n,e){qd(n,e)}});function MP(n,e){let t=Object.create(P6);t.value=n,t.transformFn=e?.transform;function r(){if(Bd(t),t.value===PP){let i=null;throw new G(-950,i)}return t.value}return r[On]=t,r}var Qg=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ch(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function DP(n,e){return MP(n,e)}function M6(n){return MP(PP,n)}var NP=(DP.required=M6,DP);var Ib=new ie(""),N6=new ie("");function Lh(n){return!n.moduleRef}function k6(n){let e=Lh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Qe);return t.run(()=>{Lh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(lr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Lh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ib);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ib);s.add(o),n.moduleRef.onDestroy(()=>{_h(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return F6(r,t,()=>{let o=e.get(So),s=o.add(),a=e.get(hb);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(uc,Mh);if(hP(c||Mh),!e.get(N6,!0))return Lh(n)?e.get(ai):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Lh(n)){let h=e.get(ai);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return O6?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{o.remove(s)})})})}var O6;function F6(n,e,t){try{let r=t();return zs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Kg=null;function V6(n=[],e){return ct.create({name:e,providers:[{provide:oh,useValue:"platform"},{provide:Ib,useValue:new Set([()=>Kg=null])},...n]})}function L6(n=[]){if(Kg)return Kg;let e=V6(n);return Kg=e,lP(),U6(e),e}function U6(n){let e=n.get(Rg,null);Gt(n,()=>{e?.forEach(t=>t())})}function Uh(){return!1}var j6=1e4;var ode=j6-1e3;var Hs=(()=>{class n{static __NG_ELEMENT_ID__=B6}return n})();function B6(n){return $6(xn(),Ne(),(n&16)===16)}function $6(n,e,t){if(js(n)&&!t){let r=Ar(n.index,e);return new $s(r,r)}else if(n.type&175){let r=e[ar];return new $s(r,e)}return null}var Tb=class{constructor(){}supports(e){return ob(e)}create(e){return new Cb(e)}},z6=(n,e)=>e,Cb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||z6}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<AP(r,i,o)?t:r,a=AP(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,h=c-i;if(d!=h){for(let w=0;w<d;w++){let S=w<o.length?o[w]:o[w]=0,M=S+w;h<=M&&M<d&&(o[w]=S+1)}let m=s.previousIndex;o[m]=h-d}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ob(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,eP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Sb(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Sb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Db=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Yg=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Db,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function AP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function xP(){return new Ab([new Tb])}var Ab=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:xP});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=L(n,{optional:!0,skipSelf:!0});return n.create(t,r||xP())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new G(901,!1)}}return n})();function kP(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;rt(ze.BootstrapApplicationStart);try{let o=i?.injector??L6(r),s=[SP(),r1,...t||[]],a=new Ih({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return k6({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{rt(ze.BootstrapApplicationEnd)}}function dc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var OP=null;function Pr(){return OP}function xb(n){OP??=n}var jh=class{},Jg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>L(FP),providedIn:"platform"})}return n})();var FP=(()=>{class n extends Jg{_location;_history;_doc=L(Rt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(t){let r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function UP(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function VP(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Gs(n){return n&&n[0]!=="?"?`?${n}`:n}var ou=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>L(H6),providedIn:"root"})}return n})(),q6=new ie(""),H6=(()=>{class n extends ou{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return UP(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Gs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Gs(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Gs(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ve(Jg),ve(q6,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ws=(()=>{class n{_subject=new yt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=K6(VP(LP(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Gs(r))}normalize(t){return n.stripTrailingSlash(W6(this._basePath,LP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Gs;static joinWithSlash=UP;static stripTrailingSlash=VP;static \u0275fac=function(r){return new(r||n)(ve(ou))};static \u0275prov=re({token:n,factory:()=>G6(),providedIn:"root"})}return n})();function G6(){return new Ws(ve(ou))}function W6(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function LP(n){return n.replace(/\/index.html$/,"")}function K6(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Rn||{}),lt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(lt||{}),Wn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Wn||{}),Po={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function qP(n){return hr(n)[Dt.LocaleId]}function HP(n,e,t){let r=hr(n),i=[r[Dt.DayPeriodsFormat],r[Dt.DayPeriodsStandalone]],o=Mr(i,e);return Mr(o,t)}function GP(n,e,t){let r=hr(n),i=[r[Dt.DaysFormat],r[Dt.DaysStandalone]],o=Mr(i,e);return Mr(o,t)}function WP(n,e,t){let r=hr(n),i=[r[Dt.MonthsFormat],r[Dt.MonthsStandalone]],o=Mr(i,e);return Mr(o,t)}function KP(n,e){let r=hr(n)[Dt.Eras];return Mr(r,e)}function Bh(n,e){let t=hr(n);return Mr(t[Dt.DateFormat],e)}function $h(n,e){let t=hr(n);return Mr(t[Dt.TimeFormat],e)}function zh(n,e){let r=hr(n)[Dt.DateTimeFormat];return Mr(r,e)}function qh(n,e){let t=hr(n),r=t[Dt.NumberSymbols][e];if(typeof r>"u"){if(e===Po.CurrencyDecimal)return t[Dt.NumberSymbols][Po.Decimal];if(e===Po.CurrencyGroup)return t[Dt.NumberSymbols][Po.Group]}return r}function QP(n){if(!n[Dt.ExtraData])throw new G(2303,!1)}function YP(n){let e=hr(n);return QP(e),(e[Dt.ExtraData][2]||[]).map(r=>typeof r=="string"?Rb(r):[Rb(r[0]),Rb(r[1])])}function JP(n,e,t){let r=hr(n);QP(r);let i=[r[Dt.ExtraData][0],r[Dt.ExtraData][1]],o=Mr(i,e)||[];return Mr(o,t)||[]}function Mr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new G(2304,!1)}function Rb(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Q6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xg={},Y6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function XP(n,e,t,r){let i=o$(n);e=Ro(t,e)||e;let s=[],a;for(;e;)if(a=Y6.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=eM(r,c),i=i$(i,r));let d="";return s.forEach(h=>{let m=n$(h);d+=m?m(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function ry(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ro(n,e){let t=qP(n);if(Xg[t]??={},Xg[t][e])return Xg[t][e];let r="";switch(e){case"shortDate":r=Bh(n,Wn.Short);break;case"mediumDate":r=Bh(n,Wn.Medium);break;case"longDate":r=Bh(n,Wn.Long);break;case"fullDate":r=Bh(n,Wn.Full);break;case"shortTime":r=$h(n,Wn.Short);break;case"mediumTime":r=$h(n,Wn.Medium);break;case"longTime":r=$h(n,Wn.Long);break;case"fullTime":r=$h(n,Wn.Full);break;case"short":let i=Ro(n,"shortTime"),o=Ro(n,"shortDate");r=Zg(zh(n,Wn.Short),[i,o]);break;case"medium":let s=Ro(n,"mediumTime"),a=Ro(n,"mediumDate");r=Zg(zh(n,Wn.Medium),[s,a]);break;case"long":let c=Ro(n,"longTime"),d=Ro(n,"longDate");r=Zg(zh(n,Wn.Long),[c,d]);break;case"full":let h=Ro(n,"fullTime"),m=Ro(n,"fullDate");r=Zg(zh(n,Wn.Full),[h,m]);break}return r&&(Xg[t][e]=r),r}function Zg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ci(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function J6(n,e){return ci(n,3).substring(0,e)}function Kt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=X6(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return J6(a,e);let c=qh(s,Po.MinusSign);return ci(a,e,c,r,i)}}function X6(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new G(2301,!1)}}function mt(n,e,t=Rn.Format,r=!1){return function(i,o){return Z6(i,o,n,e,t,r)}}function Z6(n,e,t,r,i,o){switch(t){case 2:return WP(e,i,r)[n.getMonth()];case 1:return GP(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let d=YP(e),h=JP(e,i,r),m=d.findIndex(w=>{if(Array.isArray(w)){let[S,M]=w,k=s>=S.hours&&a>=S.minutes,V=s<M.hours||s===M.hours&&a<M.minutes;if(S.hours<M.hours){if(k&&V)return!0}else if(k||V)return!0}else if(w.hours===s&&w.minutes===a)return!0;return!1});if(m!==-1)return h[m]}return HP(e,i,r)[s<12?0:1];case 3:return KP(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new G(2302,!1)}}function ey(n){return function(e,t,r){let i=-1*r,o=qh(t,Po.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ci(s,2,o)+ci(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+ci(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+ci(s,2,o)+":"+ci(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+ci(s,2,o)+":"+ci(Math.abs(i%60),2,o);default:throw new G(2310,!1)}}}var e$=0,ny=4;function t$(n){let e=ry(n,e$,1).getDay();return ry(n,0,1+(e<=ny?ny:ny+7)-e)}function ZP(n){let e=n.getDay(),t=e===0?-3:ny-e;return ry(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Pb(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=ZP(t),s=t$(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ci(i,n,qh(r,Po.MinusSign))}}function ty(n,e=!1){return function(t,r){let o=ZP(t).getFullYear();return ci(o,n,qh(r,Po.MinusSign),e)}}var Mb={};function n$(n){if(Mb[n])return Mb[n];let e;switch(n){case"G":case"GG":case"GGG":e=mt(3,lt.Abbreviated);break;case"GGGG":e=mt(3,lt.Wide);break;case"GGGGG":e=mt(3,lt.Narrow);break;case"y":e=Kt(0,1,0,!1,!0);break;case"yy":e=Kt(0,2,0,!0,!0);break;case"yyy":e=Kt(0,3,0,!1,!0);break;case"yyyy":e=Kt(0,4,0,!1,!0);break;case"Y":e=ty(1);break;case"YY":e=ty(2,!0);break;case"YYY":e=ty(3);break;case"YYYY":e=ty(4);break;case"M":case"L":e=Kt(1,1,1);break;case"MM":case"LL":e=Kt(1,2,1);break;case"MMM":e=mt(2,lt.Abbreviated);break;case"MMMM":e=mt(2,lt.Wide);break;case"MMMMM":e=mt(2,lt.Narrow);break;case"LLL":e=mt(2,lt.Abbreviated,Rn.Standalone);break;case"LLLL":e=mt(2,lt.Wide,Rn.Standalone);break;case"LLLLL":e=mt(2,lt.Narrow,Rn.Standalone);break;case"w":e=Pb(1);break;case"ww":e=Pb(2);break;case"W":e=Pb(1,!0);break;case"d":e=Kt(2,1);break;case"dd":e=Kt(2,2);break;case"c":case"cc":e=Kt(7,1);break;case"ccc":e=mt(1,lt.Abbreviated,Rn.Standalone);break;case"cccc":e=mt(1,lt.Wide,Rn.Standalone);break;case"ccccc":e=mt(1,lt.Narrow,Rn.Standalone);break;case"cccccc":e=mt(1,lt.Short,Rn.Standalone);break;case"E":case"EE":case"EEE":e=mt(1,lt.Abbreviated);break;case"EEEE":e=mt(1,lt.Wide);break;case"EEEEE":e=mt(1,lt.Narrow);break;case"EEEEEE":e=mt(1,lt.Short);break;case"a":case"aa":case"aaa":e=mt(0,lt.Abbreviated);break;case"aaaa":e=mt(0,lt.Wide);break;case"aaaaa":e=mt(0,lt.Narrow);break;case"b":case"bb":case"bbb":e=mt(0,lt.Abbreviated,Rn.Standalone,!0);break;case"bbbb":e=mt(0,lt.Wide,Rn.Standalone,!0);break;case"bbbbb":e=mt(0,lt.Narrow,Rn.Standalone,!0);break;case"B":case"BB":case"BBB":e=mt(0,lt.Abbreviated,Rn.Format,!0);break;case"BBBB":e=mt(0,lt.Wide,Rn.Format,!0);break;case"BBBBB":e=mt(0,lt.Narrow,Rn.Format,!0);break;case"h":e=Kt(3,1,-12);break;case"hh":e=Kt(3,2,-12);break;case"H":e=Kt(3,1);break;case"HH":e=Kt(3,2);break;case"m":e=Kt(4,1);break;case"mm":e=Kt(4,2);break;case"s":e=Kt(5,1);break;case"ss":e=Kt(5,2);break;case"S":e=Kt(6,1);break;case"SS":e=Kt(6,2);break;case"SSS":e=Kt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=ey(0);break;case"ZZZZZ":e=ey(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ey(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=ey(2);break;default:return null}return Mb[n]=e,e}function eM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function r$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function i$(n,e,t){let i=n.getTimezoneOffset(),o=eM(e,i);return r$(n,-1*(o-i))}function o$(n){if(jP(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return ry(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Q6))return s$(r)}let e=new Date(n);if(!jP(e))throw new G(2311,!1);return e}function s$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,d),e}function jP(n){return n instanceof Date&&!isNaN(n.valueOf())}var Nb=/\s+/,BP=[],hc=(()=>{class n{_ngEl;_renderer;initialClasses=BP;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Nb):BP}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Nb):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Nb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ue(ur),ue(si))};static \u0275dir=wt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var iy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ln=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new iy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),$P(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);$P(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue(ac),ue(Dh),ue(Ab))};static \u0275dir=wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function $P(n,e){n.context.$implicit=e.item}var Lt=(()=>{class n{_viewContainer;_context=new oy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zP(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zP(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue(ac),ue(Dh))};static \u0275dir=wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),oy=class{$implicit=null;ngIf=null};function zP(n,e){if(n&&!n.createEmbeddedView)throw new G(2020,!1)}function tM(n,e){return new G(2100,!1)}var a$=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,kb=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw tM(n,t);return t.replace(a$,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=zg({name:"titlecase",type:n,pure:!0})}return n})();var c$="mediumDate",nM=new ie(""),rM=new ie(""),Mo=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??c$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return XP(t,s,o||this.locale,a)}catch(s){throw tM(n,s.message)}}static \u0275fac=function(r){return new(r||n)(ue(uc,16),ue(nM,24),ue(rM,24))};static \u0275pipe=zg({name:"date",type:n,pure:!0})}return n})();var bt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=sr({})}return n})();function Ob(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Hh=class{};function iM(n,e,t){return _b(n,e,t)}var oM="browser";var Gh=class{_doc;constructor(e){this._doc=e}manager},sy=(()=>{class n extends Gh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ve(Rt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),ly=new ie(""),Ub=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof sy));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof sy);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ve(ly),ve(Qe))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Fb="ng-app-id";function sM(n){for(let e of n)e.remove()}function aM(n,e){let t=e.createElement("style");return t.textContent=n,t}function l$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Fb}="${e}"],link[${Fb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Fb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Lb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var jb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,l$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,aM);r?.forEach(i=>this.addUsage(i,this.external,Lb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(sM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])sM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,aM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Lb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ve(Rt),ve(xg),ve(Mg,8),ve(oc))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Vb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bb=/%COMP%/g;var lM="%COMP%",u$=`_nghost-${lM}`,d$=`_ngcontent-${lM}`,h$=!0,f$=new ie("",{factory:()=>h$});function p$(n){return d$.replace(Bb,n)}function m$(n){return u$.replace(Bb,n)}function uM(n,e){return e.map(t=>t.replace(Bb,n))}var Qh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=d,this.defaultRenderer=new Wh(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof cy?i.applyToHost(t):i instanceof Kh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.tracingService;switch(r.encapsulation){case ri.Emulated:o=new cy(c,d,r,this.appId,h,s,a,m);break;case ri.ShadowDom:return new ay(c,t,r,s,a,this.nonce,m,d);case ri.ExperimentalIsolatedShadowDom:return new ay(c,t,r,s,a,this.nonce,m);default:o=new Kh(c,d,r,h,s,a,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ve(Ub),ve(jb),ve(xg),ve(f$),ve(Rt),ve(Qe),ve(Mg),ve(sc,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Wh=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Vb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(cM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Vb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Vb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ui.DashCase|Ui.Important)?e.style.setProperty(t,r,i&Ui.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ui.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Pr().getGlobalEventTarget(this.doc,e),!e))throw new G(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function cM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ay=class extends Wh{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=uM(r.id,d);for(let m of d){let w=document.createElement("style");s&&w.setAttribute("nonce",s),w.textContent=m,this.shadowRoot.appendChild(w)}let h=r.getExternalStyles?.();if(h)for(let m of h){let w=Lb(m,i);s&&w.setAttribute("nonce",s),this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Kh=class extends Wh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?uM(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&nc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cy=class extends Kh{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,d),this.contentAttr=p$(d),this.hostAttr=m$(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var uy=class n extends jh{supportsDOMEvents=!0;static makeCurrent(){xb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=g$();return t==null?null:y$(t)}resetBaseElement(){Yh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ob(document.cookie,e)}},Yh=null;function g$(){return Yh=Yh||document.head.querySelector("base"),Yh?Yh.getAttribute("href"):null}function y$(n){return new URL(n,document.baseURI).pathname}var _$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),dM=["alt","control","meta","shift"],v$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},E$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hM=(()=>{class n extends Gh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),dM.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=v$[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),dM.forEach(s=>{if(s!==i){let a=E$[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ve(Rt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();async function $b(n,e,t){let r=z({rootComponent:n},w$(e,t));return kP(r)}function w$(n,e){return{platformRef:e?.platformRef,appProviders:[...S$,...n?.providers??[]],platformProviders:C$}}function b$(){uy.makeCurrent()}function I$(){return new Ni}function T$(){return Bw(document),document}var C$=[{provide:oc,useValue:oM},{provide:Rg,useValue:b$,multi:!0},{provide:Rt,useFactory:T$}];var S$=[{provide:oh,useValue:"root"},{provide:Ni,useFactory:I$},{provide:ly,useClass:sy,multi:!0},{provide:ly,useClass:hM,multi:!0},Qh,jb,Ub,{provide:Do,useExisting:Qh},{provide:Hh,useClass:_$},[]];var fM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ve(Rt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var De="primary",lf=Symbol("RouteTitle"),Wb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function mc(n){return new Wb(n)}function zb(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(i[0]===":")t[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function IM(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},d=n.slice(0,r.length);return zb(r,d,c)?{consumed:d,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!zb(o,n.slice(0,o.length),a)||!zb(s,n.slice(n.length-s.length),a)?null:{consumed:n,posParams:a}}function gy(n){return new Promise((e,t)=>{n.pipe(yo()).subscribe({next:r=>e(r),error:r=>t(r)})})}function A$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$i(n[t],e[t]))return!1;return!0}function $i(n,e){let t=n?Kb(n):void 0,r=e?Kb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!TM(n[i],e[i]))return!1;return!0}function Kb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function x$(n){return n.length>0?n[n.length-1]:null}function _c(n){return Wd(n)?n:zs(n)?Ht(Promise.resolve(n)):Le(n)}function CM(n){return Wd(n)?gy(n):Promise.resolve(n)}var R$={exact:DM,subset:AM},SM={exact:P$,subset:M$,ignored:()=>!0};function pM(n,e,t){return R$[t.paths](n.root,e.root,t.matrixParams)&&SM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function P$(n,e){return $i(n,e)}function DM(n,e,t){if(!fc(n.segments,e.segments)||!fy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DM(n.children[r],e.children[r],t))return!1;return!0}function M$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TM(n[t],e[t]))}function AM(n,e,t){return xM(n,e,e.segments,t)}function xM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!fc(i,t)||e.hasChildren()||!fy(i,t,r))}else if(n.segments.length===t.length){if(!fc(n.segments,t)||!fy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!AM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!fc(n.segments,i)||!fy(n.segments,i,r)||!n.children[De]?!1:xM(n.children[De],e,o,r)}}function fy(n,e,t){return e.every((r,i)=>SM[t](n[i].parameters,r.parameters))}var ui=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mc(this.queryParams),this._queryParamMap}toString(){return O$.serialize(this)}},Je=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return py(this)}},Ks=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=mc(this.parameters),this._parameterMap}toString(){return PM(this)}};function N$(n,e){return fc(n,e)&&n.every((t,r)=>$i(t.parameters,e[r].parameters))}function fc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function k$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===De&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==De&&(t=t.concat(e(i,r)))}),t}var uf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new Qs,providedIn:"root"})}return n})(),Qs=class{parse(e){let t=new Yb(e);return new ui(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Jh(e.root,!0)}`,r=L$(e.queryParams),i=typeof e.fragment=="string"?`#${F$(e.fragment)}`:"";return`${t}${r}${i}`}},O$=new Qs;function py(n){return n.segments.map(e=>PM(e)).join("/")}function Jh(n,e){if(!n.hasChildren())return py(n);if(e){let t=n.children[De]?Jh(n.children[De],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==De&&r.push(`${i}:${Jh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=k$(n,(r,i)=>i===De?[Jh(n.children[De],!1)]:[`${i}:${Jh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[De]!=null?`${py(n)}/${t[0]}`:`${py(n)}/(${t.join("//")})`}}function RM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dy(n){return RM(n).replace(/%3B/gi,";")}function F$(n){return encodeURI(n)}function Qb(n){return RM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function my(n){return decodeURIComponent(n)}function mM(n){return my(n.replace(/\+/g,"%20"))}function PM(n){return`${Qb(n.path)}${V$(n.parameters)}`}function V$(n){return Object.entries(n).map(([e,t])=>`;${Qb(e)}=${Qb(t)}`).join("")}function L$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${dy(t)}=${dy(i)}`).join("&"):`${dy(t)}=${dy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var U$=/^[^\/()?;#]+/;function qb(n){let e=n.match(U$);return e?e[0]:""}var j$=/^[^\/()?;=#]+/;function B$(n){let e=n.match(j$);return e?e[0]:""}var $$=/^[^=?&#]+/;function z$(n){let e=n.match($$);return e?e[0]:""}var q$=/^[^&#]+/;function H$(n){let e=n.match(q$);return e?e[0]:""}var Yb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Je([],{}):new Je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[De]=new Je(e,t)),r}parseSegment(){let e=qb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Ks(my(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=B$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=qb(this.remaining);i&&(r=i,this.capture(r))}e[my(t)]=my(r)}parseQueryParam(e){let t=z$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=H$(this.remaining);s&&(r=s,this.capture(r))}let i=mM(t),o=mM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=De);let s=this.parseChildren();t[o??De]=Object.keys(s).length===1&&s[De]?s[De]:new Je([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function MM(n){return n.segments.length>0?new Je([],{[De]:n}):n}function NM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=NM(i);if(r===De&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Je(n.segments,e);return G$(t)}function G$(n){if(n.numberOfChildren===1&&n.children[De]){let e=n.children[De];return new Je(n.segments.concat(e.segments),e.children)}return n}function Ys(n){return n instanceof ui}function kM(n,e,t=null,r=null,i=new Qs){let o=OM(n);return FM(o,e,t,r,i)}function OM(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let a=new Je(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=MM(r);return e??i}function FM(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return Hb(o,o,o,t,r,i);let s=W$(e);if(s.toRoot())return Hb(o,o,new Je([],{}),t,r,i);let a=K$(s,o,n),c=a.processChildren?Zh(a.segmentGroup,a.index,s.commands):LM(a.segmentGroup,a.index,s.commands);return Hb(o,a.segmentGroup,c,t,r,i)}function yy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function nf(n){return typeof n=="object"&&n!=null&&n.outlets}function gM(n,e,t){n||="\u0275";let r=new ui;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function Hb(n,e,t,r,i,o){let s={};for(let[d,h]of Object.entries(r??{}))s[d]=Array.isArray(h)?h.map(m=>gM(d,m,o)):gM(d,h,o);let a;n===e?a=t:a=VM(n,e,t);let c=MM(NM(a));return new ui(c,s,i)}function VM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=VM(o,e,t)}),new Je(n.segments,r)}var _y=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yy(r[0]))throw new G(4003,!1);let i=r.find(nf);if(i&&i!==x$(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function W$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new _y(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new _y(t,e,r)}var au=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function K$(n,e,t){if(n.isAbsolute)return new au(e,!0,0);if(!t)return new au(e,!1,NaN);if(t.parent===null)return new au(t,!0,0);let r=yy(n.commands[0])?0:1,i=t.segments.length-1+r;return Q$(t,i,n.numberOfDoubleDots)}function Q$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new au(r,!1,i-o)}function Y$(n){return nf(n[0])?n[0].outlets:{[De]:n}}function LM(n,e,t){if(n??=new Je([],{}),n.segments.length===0&&n.hasChildren())return Zh(n,e,t);let r=J$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Je(n.segments.slice(0,r.pathIndex),{});return o.children[De]=new Je(n.segments.slice(r.pathIndex),n.children),Zh(o,0,i)}else return r.match&&i.length===0?new Je(n.segments,{}):r.match&&!n.hasChildren()?Jb(n,e,t):r.match?Zh(n,0,i):Jb(n,e,t)}function Zh(n,e,t){if(t.length===0)return new Je(n.segments,{});{let r=Y$(t),i={};if(Object.keys(r).some(o=>o!==De)&&n.children[De]&&n.numberOfChildren===1&&n.children[De].segments.length===0){let o=Zh(n.children[De],e,t);return new Je(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=LM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Je(n.segments,i)}}function J$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(nf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!_M(c,d,s))return o;r+=2}else{if(!_M(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(nf(o)){let c=X$(o.outlets);return new Je(r,c)}if(i===0&&yy(t[0])){let c=n.segments[e];r.push(new Ks(c.path,yM(t[0]))),i++;continue}let s=nf(o)?o.outlets[De]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&yy(a)?(r.push(new Ks(s,yM(a))),i+=2):(r.push(new Ks(s,{})),i++)}return new Je(r,{})}function X$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Jb(new Je([],{}),0,r))}),e}function yM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _M(n,e,t){return n==t.path&&$i(e,t.parameters)}var ef="imperative",un=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(un||{}),gr=class{id;url;constructor(e,t){this.id=e,this.url=t}},gc=class extends gr{type=un.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zi=class extends gr{urlAfterRedirects;type=un.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Pn||{}),rf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(rf||{}),Nr=class extends gr{reason;code;type=un.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function UM(n){return n instanceof Nr&&(n.code===Pn.Redirect||n.code===Pn.SupersededByNewNavigation)}var ko=class extends gr{reason;code;type=un.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},yc=class extends gr{error;target;type=un.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lu=class extends gr{urlAfterRedirects;state;type=un.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vy=class extends gr{urlAfterRedirects;state;type=un.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ey=class extends gr{urlAfterRedirects;state;shouldActivate;type=un.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wy=class extends gr{urlAfterRedirects;state;type=un.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},by=class extends gr{urlAfterRedirects;state;type=un.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iy=class{route;type=un.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ty=class{route;type=un.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cy=class{snapshot;type=un.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sy=class{snapshot;type=un.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dy=class{snapshot;type=un.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ay=class{snapshot;type=un.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var uu=class{},du=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Z$(n){return!(n instanceof uu)&&!(n instanceof du)}var xy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new pu(this.rootInjector)}},pu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ve(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ry=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Xb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Xb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Zb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zb(e,this._root).map(t=>t.value)}};function Xb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Xb(n,t);if(r)return r}return null}function Zb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Zb(n,t);if(r.length)return r.unshift(e),r}return[]}var mr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function su(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var of=class extends Ry{snapshot;constructor(e,t){super(e),this.snapshot=t,aI(this,e)}toString(){return this.snapshot.toString()}};function jM(n,e){let t=e5(n,e),r=new zt([new Ks("",{})]),i=new zt({}),o=new zt({}),s=new zt({}),a=new zt(""),c=new Oo(r,i,s,a,o,De,n,t.root);return c.snapshot=t.root,new of(new mr(c,[]),t)}function e5(n,e){let t={},r={},i={},s=new pc([],t,i,"",r,De,n,null,{},e);return new sf("",new mr(s,[]))}var Oo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(d=>d[lf]))??Le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(e=>mc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(e=>mc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Py(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&$M(i)&&(r.resolve[lf]=i.title),r}var pc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[lf]}constructor(e,t,r,i,o,s,a,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sf=class extends Ry{url;constructor(e,t){super(t),this.url=e,aI(this,t)}toString(){return BM(this._root)}};function aI(n,e){e.value._routerState=n,e.children.forEach(t=>aI(n,t))}function BM(n){let e=n.children.length>0?` { ${n.children.map(BM).join(", ")} } `:"";return`${n.value}${e}`}function Gb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$i(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$i(e.params,t.params)||n.paramsSubject.next(t.params),A$(e.url,t.url)||n.urlSubject.next(t.url),$i(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function eI(n,e){let t=$i(n.params,e.params)&&N$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||eI(n.parent,e.parent))}function $M(n){return typeof n.title=="string"||n.title===null}var zM=new ie(""),df=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=De;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=NP();parentContexts=L(pu);location=L(ac);changeDetector=L(Hs);inputBinder=L(Oy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new tI(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ji]})}return n})(),tI=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Oo?this.route:e===pu?this.childContexts:e===zM?this.outletData:this.parent.get(e,t)}},Oy=new ie("");var cI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ye({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ye(0,"router-outlet")},dependencies:[df],encapsulation:2})}return n})();function lI(n){let e=n.children&&n.children.map(lI),t=e?de(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==De&&(t.component=cI),t}function t5(n,e,t){let r=af(n,e._root,t?t._root:void 0);return new of(r,e)}function af(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=n5(n,e,t);return new mr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>af(n,a)),s}}let r=r5(e.value),i=e.children.map(o=>af(n,o));return new mr(r,i)}}function n5(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return af(n,r,i);return af(n,r)})}function r5(n){return new Oo(new zt(n.url),new zt(n.params),new zt(n.queryParams),new zt(n.fragment),new zt(n.data),n.outlet,n.component,n)}var hu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},qM="ngNavigationCancelingError";function My(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ys(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HM(!1,Pn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[qM]=!0,t.cancellationCode=e,t}function i5(n){return GM(n)&&Ys(n.url)}function GM(n){return!!n&&n[qM]}var nI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=su(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=su(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=su(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=su(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ay(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Sy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Gb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ny=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},cu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function o5(n,e,t){let r=n._root,i=e?e._root:null;return Xh(r,i,t,[r.value])}function s5(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function mu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!_E(n)?n:e.get(n):r}function Xh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=su(e);return n.children.forEach(s=>{a5(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tf(a,t.getContext(s),i)),i}function a5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=c5(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ny(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Xh(n,e,a?a.children:null,r,i):Xh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cu(a.outlet.component,s))}else s&&tf(e,a,i),i.canActivateChecks.push(new Ny(r)),o.component?Xh(n,null,a?a.children:null,r,i):Xh(n,null,t,r,i);return i}function c5(n,e,t){if(typeof t=="function")return Gt(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!fc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fc(n.url,e.url)||!$i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eI(n,e)||!$i(n.queryParams,e.queryParams);default:return!eI(n,e)}}function tf(n,e,t){let r=su(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tf(s,e.children.getContext(o),t):tf(s,null,t):tf(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new cu(e.outlet.component,i)):t.canDeactivateChecks.push(new cu(null,i)):t.canDeactivateChecks.push(new cu(null,i))}function hf(n){return typeof n=="function"}function l5(n){return typeof n=="boolean"}function u5(n){return n&&hf(n.canLoad)}function d5(n){return n&&hf(n.canActivate)}function h5(n){return n&&hf(n.canActivateChild)}function f5(n){return n&&hf(n.canDeactivate)}function p5(n){return n&&hf(n.canMatch)}function WM(n){return n instanceof mo||n?.name==="EmptyError"}var hy=Symbol("INITIAL_VALUE");function fu(){return qn(n=>X0(n.map(e=>e.pipe(yn(1),tE(hy)))).pipe(Ke(e=>{for(let t of e)if(t!==!0){if(t===hy)return hy;if(t===!1||m5(t))return t}return!0}),Ct(e=>e!==hy),yn(1)))}function m5(n){return Ys(n)||n instanceof hu}function KM(n){return n.aborted?Le(void 0).pipe(yn(1)):new Se(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function QM(n){return Yd(KM(n))}function g5(n){return Fn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?Le(de(z({},e),{guardsResult:!0})):y5(o,t,r).pipe(Fn(s=>s&&l5(s)?_5(t,i,n):Le(s)),Ke(s=>de(z({},e),{guardsResult:s})))})}function y5(n,e,t){return Ht(n).pipe(Fn(r=>I5(r.component,r.route,t,e)),yo(r=>r!==!0,!0))}function _5(n,e,t){return Ht(e).pipe(Sm(r=>jl(E5(r.route.parent,t),v5(r.route,t),b5(n,r.path),w5(n,r.route))),yo(r=>r!==!0,!0))}function v5(n,e){return n!==null&&e&&e(new Dy(n)),Le(!0)}function E5(n,e){return n!==null&&e&&e(new Cy(n)),Le(!0)}function w5(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Le(!0);let r=t.map(i=>Kd(()=>{let o=e._environmentInjector,s=mu(i,o),a=d5(s)?s.canActivate(e,n):Gt(o,()=>s(e,n));return _c(a).pipe(yo())}));return Le(r).pipe(fu())}function b5(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>s5(o)).filter(o=>o!==null).map(o=>Kd(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,d=mu(a,c),h=h5(d)?d.canActivateChild(t,n):Gt(c,()=>d(t,n));return _c(h).pipe(yo())});return Le(s).pipe(fu())}));return Le(i).pipe(fu())}function I5(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Le(!0);let o=i.map(s=>{let a=e._environmentInjector,c=mu(s,a),d=f5(c)?c.canDeactivate(n,e,t,r):Gt(a,()=>c(n,e,t,r));return _c(d).pipe(yo())});return Le(o).pipe(fu())}function T5(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return Le(!0);let s=o.map(a=>{let c=mu(a,n),d=u5(c)?c.canLoad(e,t):Gt(n,()=>c(e,t)),h=_c(d);return i?h.pipe(QM(i)):h});return Le(s).pipe(fu(),YM(r))}function YM(n){return H0(Pi(e=>{if(typeof e!="boolean")throw My(n,e)}),Ke(e=>e===!0))}function C5(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return Le(!0);let s=o.map(a=>{let c=mu(a,n),d=p5(c)?c.canMatch(e,t):Gt(n,()=>c(e,t));return _c(d).pipe(QM(i))});return Le(s).pipe(fu(),YM(r))}var No=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},cf=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function S5(n){throw new G(4e3,!1)}function D5(n){throw HM(!1,Pn.GuardRejected)}var rI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[De])throw S5(`${e.redirectTo}`);i=i.children[De]}}async applyRedirectCommands(e,t,r,i,o){let s=await A5(t,i,o);if(s instanceof ui)throw new cf(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new cf(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ui(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Je(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function A5(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:d,data:h,title:m,paramMap:w,queryParamMap:S}=e;return gy(_c(Gt(t,()=>r({params:d,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:m,paramMap:w,queryParamMap:S}))))}function x5(n,e){return n.providers&&!n._injector&&(n._injector=Rh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function li(n){return n.outlet||De}function R5(n,e){let t=n.filter(r=>li(r)===e);return t.push(...n.filter(r=>li(r)!==e)),t}var iI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function P5(n,e,t,r,i,o){let s=JM(n,e,t);return s.matched?(r=x5(e,r),C5(r,e,t,i,o).pipe(Ke(a=>a===!0?s:z({},iI)))):Le(s)}function JM(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},iI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IM)(t,n,e);if(!i)return z({},iI);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?z(z({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vM(n,e,t,r){return t.length>0&&k5(n,t,r)?{segmentGroup:new Je(e,N5(r,new Je(t,n.children))),slicedSegments:[]}:t.length===0&&O5(n,t,r)?{segmentGroup:new Je(n.segments,M5(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Je(n.segments,n.children),slicedSegments:t}}function M5(n,e,t,r){let i={};for(let o of t)if(Fy(n,e,o)&&!r[li(o)]){let s=new Je([],{});i[li(o)]=s}return z(z({},r),i)}function N5(n,e){let t={};t[De]=e;for(let r of n)if(r.path===""&&li(r)!==De){let i=new Je([],{});t[li(r)]=i}return t}function k5(n,e,t){return t.some(r=>Fy(n,e,r)&&li(r)!==De)}function O5(n,e,t){return t.some(r=>Fy(n,e,r))}function Fy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function F5(n,e,t){return e.length===0&&!n.children[t]}var oI=class{};async function V5(n,e,t,r,i,o,s="emptyOnly",a){return new sI(n,e,t,r,i,s,o,a).recognize()}var L5=31,sI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new rI(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}async recognize(){let e=vM(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new mr(r,t),o=new sf("",i),s=kM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new pc([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,De,t),rootSnapshot:t}}catch(r){if(r instanceof cf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof No?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof mr?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let d=r.children[c],h=R5(t,c),m=await this.processSegmentGroup(e,h,d,c,i);s.push(...m)}let a=XM(s);return U5(a),a}async processSegment(e,t,r,i,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a)}catch(d){if(d instanceof No||WM(d))continue;throw d}if(F5(r,i,o))return new oI;throw new No(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,c){if(li(r)!==s&&(s===De||!Fy(i,o,r)))throw new No(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c);throw new No(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:m,remainingSegments:w}=JM(t,i,o);if(!c)throw new No(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>L5&&(this.allowRedirects=!1));let S=new pc(o,d,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,EM(i),li(i),i.component??i._loadedComponent??null,i,wM(i),e),M=Py(S,a,this.paramsInheritanceStrategy);if(S.params=Object.freeze(M.params),S.data=Object.freeze(M.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let k=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,S,e),V=await this.applyRedirects.lineralizeSegments(i,k);return this.processSegment(e,r,t,V.concat(w),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await gy(P5(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new No(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:w}=a,S=new pc(m,h,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,EM(r),li(r),r.component??r._loadedComponent??null,r,wM(r),e),M=Py(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(M.params),S.data=Object.freeze(M.data);let{segmentGroup:k,slicedSegments:V}=vM(t,m,w,c);if(V.length===0&&k.hasChildren()){let Y=await this.processChildren(d,c,k,S);return new mr(S,Y)}if(c.length===0&&V.length===0)return new mr(S,[]);let q=li(r)===o,ee=await this.processSegment(d,c,k,V,q?De:o,!0,S);return new mr(S,ee instanceof mr?[ee]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let o=t._loadedNgModuleFactory;return o&&!t._loadedInjector&&(t._loadedInjector=o.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await gy(T5(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,t._loadedNgModuleFactory=o.factory,o}throw D5(t)}return{routes:[],injector:e}}};function U5(n){n.sort((e,t)=>e.value.outlet===De?-1:t.value.outlet===De?1:e.value.outlet.localeCompare(t.value.outlet))}function j5(n){let e=n.value.routeConfig;return e&&e.path===""}function XM(n){let e=[],t=new Set;for(let r of n){if(!j5(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=XM(r.children);e.push(new mr(r.value,i))}return e.filter(r=>!t.has(r))}function EM(n){return n.data||{}}function wM(n){return n.resolve||{}}function B5(n,e,t,r,i,o,s){return Fn(async a=>{let{state:c,tree:d}=await V5(n,e,t,r,a.extractedUrl,i,o,s);return de(z({},a),{targetSnapshot:c,urlAfterRedirects:d})})}function $5(n){return Fn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Le(e);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of ZM(a))o.add(c);let s=0;return Ht(o).pipe(Sm(a=>i.has(a)?z5(a,t,n):(a.data=Py(a,a.parent,n).resolve,Le(void 0))),Pi(()=>s++),Dm(1),Fn(a=>s===o.size?Le(e):gn))})}function ZM(n){let e=n.children.map(t=>ZM(t)).flat();return[n,...e]}function z5(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!$M(r)&&(i[lf]=r.title),Kd(()=>(n.data=Py(n,n.parent,t).resolve,q5(i,n,e).pipe(Ke(o=>(n._resolvedData=o,n.data=z(z({},n.data),o),null)))))}function q5(n,e,t){let r=Kb(n);if(r.length===0)return Le({});let i={};return Ht(r).pipe(Fn(o=>H5(n[o],e,t).pipe(yo(),Pi(s=>{if(s instanceof hu)throw My(new Qs,s);i[o]=s}))),Dm(1),Ke(()=>i),Qd(o=>WM(o)?gn:J0(o)))}function H5(n,e,t){let r=e._environmentInjector,i=mu(n,r),o=i.resolve?i.resolve(e,t):Gt(r,()=>i(e,t));return _c(o)}function bM(n){return qn(e=>{let t=n(e);return t?Ht(t).pipe(Ke(()=>e)):Le(e)})}var uI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===De);return r}getResolvedTitleForRoute(t){return t.data[lf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>L(eN),providedIn:"root"})}return n})(),eN=(()=>{class n extends uI{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ve(fM))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gu=new ie("",{factory:()=>({})}),ff=new ie(""),tN=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=L(bb);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await CM(Gt(t,()=>r.loadComponent())),s=await iN(rN(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await nN(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function nN(n,e,t,r){let i=await CM(Gt(t,()=>n.loadChildren())),o=await iN(rN(i)),s;o instanceof $g||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,c,d=!1,h;return Array.isArray(s)?(c=s,d=!0):(a=s.create(t).injector,h=s,c=a.get(ff,[],{optional:!0,self:!0}).flat()),{routes:c.map(lI),injector:a,factory:h}}function G5(n){return n&&typeof n=="object"&&"default"in n}function rN(n){return G5(n)?n.default:n}async function iN(n){return n}var Vy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>L(W5),providedIn:"root"})}return n})(),W5=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oN=new ie("");var K5=()=>{},sN=new ie(""),aN=(()=>{class n{currentNavigation=pe(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=pe(null);events=new yt;transitionAbortWithErrorSubject=new yt;configLoader=L(tN);environmentInjector=L(xt);destroyRef=L(Un);urlSerializer=L(uf);rootContexts=L(pu);location=L(Ws);inputBindingEnabled=L(Oy,{optional:!0})!==null;titleStrategy=L(uI);options=L(gu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=L(Vy);createViewTransition=L(oN,{optional:!0});navigationErrorHandler=L(sN,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Iy(i)),r=i=>this.events.next(new Ty(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Pt(()=>{this.transitions?.next(de(z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new zt(null),this.transitions.pipe(Ct(r=>r!==null),qn(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return Le(r).pipe(qn(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pn.SupersededByNewNavigation),gn;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?de(z({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload")return this.events.next(new ko(a.id,this.urlSerializer.serialize(a.rawUrl),"",rf.IgnoredSameUrlNavigation)),a.resolve(!1),gn;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Le(a).pipe(qn(m=>(this.events.next(new gc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?gn:Promise.resolve(m))),B5(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Pi(m=>{r.targetSnapshot=m.targetSnapshot,r.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(S=>(S.finalUrl=m.urlAfterRedirects,S));let w=new lu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:m,extractedUrl:w,source:S,restoredState:M,extras:k}=a,V=new gc(m,this.urlSerializer.serialize(w),S,M);this.events.next(V);let q=jM(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=de(z({},a),{targetSnapshot:q,urlAfterRedirects:w,extras:de(z({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(ee=>(ee.finalUrl=w,ee)),Le(r)}else return this.events.next(new ko(a.id,this.urlSerializer.serialize(a.extractedUrl),"",rf.IgnoredByUrlHandlingStrategy)),a.resolve(!1),gn}),Ke(a=>{let c=new vy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=de(z({},a),{guards:o5(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),g5(a=>this.events.next(a)),qn(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw My(this.urlSerializer,a.guardsResult);let c=new Ey(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return gn;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Pn.GuardRejected),gn;if(a.guards.canActivateChecks.length===0)return Le(a);let d=new wy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!s())return gn;let h=!1;return Le(a).pipe($5(this.paramsInheritanceStrategy),Pi({next:()=>{h=!0;let m=new by(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)},complete:()=>{h||this.cancelNavigationTransition(a,"",Pn.NoDataFromResolver)}}))}),bM(a=>{let c=h=>{let m=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let w=h._environmentInjector;m.push(this.configLoader.loadComponent(w,h.routeConfig).then(S=>{h.component=S}))}for(let w of h.children)m.push(...c(w));return m},d=c(a.targetSnapshot.root);return d.length===0?Le(a):Ht(Promise.all(d).then(()=>a))}),bM(()=>this.afterPreactivation()),qn(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?Ht(d).pipe(Ke(()=>r)):Le(r)}),yn(1),Ke(a=>{let c=t5(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=de(z({},a),{targetRouterState:c}),this.currentNavigation.update(d=>(d.targetRouterState=c,d)),this.events.next(new uu),s()&&(new nI(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(d=>(d.abort=K5,d)),this.lastSuccessfulNavigation.set(Pt(this.currentNavigation)),this.events.next(new zi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Yd(KM(o.signal).pipe(Ct(()=>!i&&!r.targetRouterState),Pi(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Pn.Aborted)}))),Pi({complete:()=>{i=!0}}),Yd(this.transitionAbortWithErrorSubject.pipe(Pi(a=>{throw a}))),eE(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Pn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Qd(a=>{if(i=!0,this.destroyed)return r.resolve(!1),gn;if(GM(a))this.events.next(new Nr(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),i5(a)?this.events.next(new du(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new yc(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=Gt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof hu){let{message:h,cancellationCode:m}=My(this.urlSerializer,d);this.events.next(new Nr(r.id,this.urlSerializer.serialize(r.extractedUrl),h,m)),this.events.next(new du(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return gn}))}))}cancelNavigationTransition(t,r,i){let o=new Nr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Pt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q5(n){return n!==ef}var cN=new ie("");var lN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>L(Y5),providedIn:"root"})}return n})(),ky=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},Y5=(()=>{class n extends ky{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ao(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dI=(()=>{class n{urlSerializer=L(uf);options=L(gu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=L(Ws);urlHandlingStrategy=L(Vy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ui;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ui?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=jM(null,L(xt));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>L(J5),providedIn:"root"})}return n})(),J5=(()=>{class n extends dI{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof gc?this.updateStateMemento():t instanceof ko?this.commitTransition(r):t instanceof lu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof uu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Nr&&!UM(t)?this.restoreHistory(r):t instanceof yc?this.restoreHistory(r,!0):t instanceof zi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=z(z({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=z(z({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ao(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hI(n,e){n.events.pipe(Ct(t=>t instanceof zi||t instanceof Nr||t instanceof yc||t instanceof ko),Ke(t=>t instanceof zi||t instanceof ko?0:(t instanceof Nr?t.code===Pn.Redirect||t.code===Pn.SupersededByNewNavigation:!1)?2:1),Ct(t=>t!==2),yn(1)).subscribe(()=>{e()})}var uN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=L(ab);stateManager=L(dI);options=L(gu,{optional:!0})||{};pendingTasks=L(So);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=L(aN);urlSerializer=L(uf);location=L(Ws);urlHandlingStrategy=L(Vy);injector=L(xt);_events=new yt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=L(lN);injectorCleanup=L(cN,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=L(ff,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!L(Oy,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new nn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Pt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Nr&&r.code!==Pn.Redirect&&r.code!==Pn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof zi)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof du){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=z({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Q5(i.source)},s);this.scheduleNavigation(a,ef,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Z$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ef,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(lr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Pt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=z(z({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let w=i?i.snapshot:this.routerState.snapshot.root;m=OM(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return FM(m,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ys(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ef,null,r)}navigate(t,r={skipLocationChange:!1}){return X5(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(wo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},uN):r===!1?i=z({},dN):i=r,Ys(t))return pM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((m,w)=>{a=m,c=w});let h=this.pendingTasks.add();return hI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X5(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new G(4008,!1)}var yu=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=pe(null);get href(){return Pt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new yt;applicationErrorHandler=L(lr);options=L(gu,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(L(new Qg("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof zi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ys(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ys(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ue(yr),ue(Oo),Ch("tabindex"),ue(si),ue(ur),ue(ou))};static \u0275dir=wt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&K("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ph("href",i.reactiveHref(),Hw)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",dc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",dc],replaceUrl:[2,"replaceUrl","replaceUrl",dc],routerLink:"routerLink"},features:[ji]})}return n})();var t9=new ie("");function fI(n,...e){return vn([{provide:ff,multi:!0,useValue:n},[],{provide:Oo,useFactory:n9},{provide:Hg,multi:!0,useFactory:r9},e.map(t=>t.\u0275providers)])}function n9(){return L(yr).routerState.root}function r9(){let n=L(ct);return e=>{let t=n.get(ai);if(e!==t.components[0])return;let r=n.get(yr),i=n.get(i9);n.get(o9)===1&&r.initialNavigation(),n.get(s9,null,{optional:!0})?.setUpPreloading(),n.get(t9,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var i9=new ie("",{factory:()=>new yt}),o9=new ie("",{factory:()=>1});var s9=new ie("");var Ce=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Ce||{}),kr="*";function pI(n,e){return{type:Ce.Trigger,name:n,definitions:e,options:{}}}function mI(n,e=null){return{type:Ce.Animate,styles:e,timings:n}}function hN(n,e=null){return{type:Ce.Sequence,steps:n,options:e}}function Ec(n){return{type:Ce.Style,styles:n,offset:null}}function gI(n,e,t=null){return{type:Ce.Transition,expr:n,animation:e,options:t}}function yI(n,e,t=null){return{type:Ce.Query,selector:n,animation:e,options:t}}function _I(n,e){return{type:Ce.Stagger,timings:n,animation:e}}var qi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},vc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},_u="!";function fN(n){return new G(3e3,!1)}function a9(){return new G(3100,!1)}function c9(){return new G(3101,!1)}function l9(n){return new G(3001,!1)}function u9(n){return new G(3003,!1)}function d9(n){return new G(3004,!1)}function mN(n,e){return new G(3005,!1)}function gN(){return new G(3006,!1)}function yN(){return new G(3007,!1)}function _N(n,e){return new G(3008,!1)}function vN(n){return new G(3002,!1)}function EN(n,e,t,r,i){return new G(3010,!1)}function wN(){return new G(3011,!1)}function bN(){return new G(3012,!1)}function IN(){return new G(3200,!1)}function TN(){return new G(3202,!1)}function CN(){return new G(3013,!1)}function SN(n){return new G(3014,!1)}function DN(n){return new G(3015,!1)}function AN(n){return new G(3016,!1)}function xN(n,e){return new G(3404,!1)}function h9(n){return new G(3502,!1)}function RN(n){return new G(3503,!1)}function PN(){return new G(3300,!1)}function MN(n){return new G(3504,!1)}function NN(n){return new G(3301,!1)}function kN(n,e){return new G(3302,!1)}function ON(n){return new G(3303,!1)}function FN(n,e){return new G(3400,!1)}function VN(n){return new G(3401,!1)}function LN(n){return new G(3402,!1)}function UN(n,e){return new G(3505,!1)}function Fo(n){switch(n.length){case 0:return new qi;case 1:return n[0];default:return new vc(n)}}function bI(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let d=c.get("offset"),h=d==s,m=h&&a||new Map;c.forEach((w,S)=>{let M=S,k=w;if(S!=="offset")switch(M=n.normalizePropertyName(M,i),k){case _u:k=t.get(S);break;case kr:k=r.get(S);break;default:k=n.normalizeStyleValue(S,M,k,i);break}m.set(M,k)}),h||o.push(m),a=m,s=d}),i.length)throw h9(i);return o}function Ly(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&vI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&vI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&vI(t,"destroy",n)));break}}function vI(n,e,t){let r=t.totalTime,i=!!t.disabled,o=Uy(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function Uy(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Kn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function II(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var f9=typeof document>"u"?null:document.documentElement;function jy(n){let e=n.parentNode||n.host||null;return e===f9?null:e}function p9(n){return n.substring(1,6)=="ebkit"}var wc=null,pN=!1;function jN(n){wc||(wc=m9()||{},pN=wc.style?"WebkitAppearance"in wc.style:!1);let e=!0;return wc.style&&!p9(n)&&(e=n in wc.style,!e&&pN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in wc.style)),e}function m9(){return typeof document<"u"?document.body:null}function TI(n,e){for(;e;){if(e===n)return!0;e=jy(e)}return!1}function CI(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var g9=1e3,SI="{{",y9="}}",DI="ng-enter",By="ng-leave",pf="ng-trigger",mf=".ng-trigger",AI="ng-animating",$y=".ng-animating";function Hi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EI(parseFloat(e[1]),e[2])}function EI(n,e){return e==="s"?n*g9:n}function gf(n,e,t){return n.hasOwnProperty("duration")?n:v9(n,e,t)}var _9=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function v9(n,e,t){let r,i=0,o="";if(typeof n=="string"){let s=n.match(_9);if(s===null)return e.push(fN(n)),{duration:0,delay:0,easing:""};r=EI(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(i=EI(parseFloat(a),s[4]));let c=s[5];c&&(o=c)}else r=n;if(!t){let s=!1,a=e.length;r<0&&(e.push(a9()),s=!0),i<0&&(e.push(c9()),s=!0),s&&e.splice(a,0,fN(n))}return{duration:r,delay:i,easing:o}}function BN(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function di(n,e,t){e.forEach((r,i)=>{let o=zy(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Js(n,e){e.forEach((t,r)=>{let i=zy(r);n.style[i]=""})}function vu(n){return Array.isArray(n)?n.length==1?n[0]:hN(n):n}function $N(n,e,t){let r=e.params||{},i=xI(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(l9(o))})}var wI=new RegExp(`${SI}\\s*(.+?)\\s*${y9}`,"g");function xI(n){let e=[];if(typeof n=="string"){let t;for(;t=wI.exec(n);)e.push(t[1]);wI.lastIndex=0}return e}function Eu(n,e,t){let r=`${n}`,i=r.replace(wI,(o,s)=>{let a=e[s];return a==null&&(t.push(u9(s)),a=""),a.toString()});return i==r?n:i}var E9=/-+([a-z0-9])/g;function zy(n){return n.replace(E9,(...e)=>e[1].toUpperCase())}function zN(n,e){return n===0||e===0}function qN(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,qy(n,a)))}}return e}function Qn(n,e,t){switch(e.type){case Ce.Trigger:return n.visitTrigger(e,t);case Ce.State:return n.visitState(e,t);case Ce.Transition:return n.visitTransition(e,t);case Ce.Sequence:return n.visitSequence(e,t);case Ce.Group:return n.visitGroup(e,t);case Ce.Animate:return n.visitAnimate(e,t);case Ce.Keyframes:return n.visitKeyframes(e,t);case Ce.Style:return n.visitStyle(e,t);case Ce.Reference:return n.visitReference(e,t);case Ce.AnimateChild:return n.visitAnimateChild(e,t);case Ce.AnimateRef:return n.visitAnimateRef(e,t);case Ce.Query:return n.visitQuery(e,t);case Ce.Stagger:return n.visitStagger(e,t);default:throw d9(e.type)}}function qy(n,e){return window.getComputedStyle(n)[e]}var GI=(()=>{class n{validateStyleProperty(t){return jN(t)}containsElement(t,r){return TI(t,r)}getParentElement(t){return jy(t)}query(t,r,i){return CI(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new qi(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Ic=class{static NOOP=new GI},Tc=class{};var w9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Qy=class extends Tc{normalizePropertyName(e,t){return zy(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(w9.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(mN(e,r))}return s+o}};var Yy="*";function b9(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>I9(r,t,e)):t.push(n),t}function I9(n,e,t){if(n[0]==":"){let c=T9(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(DN(n)),e;let i=r[1],o=r[2],s=r[3];e.push(HN(i,s));let a=i==Yy&&s==Yy;o[0]=="<"&&!a&&e.push(HN(s,i))}function T9(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(AN(n)),"* => *"}}var Hy=new Set(["true","1"]),Gy=new Set(["false","0"]);function HN(n,e){let t=Hy.has(n)||Gy.has(n),r=Hy.has(e)||Gy.has(e);return(i,o)=>{let s=n==Yy||n==i,a=e==Yy||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?Hy.has(n):Gy.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Hy.has(e):Gy.has(e)),s&&a}}var tk=":self",C9=new RegExp(`s*${tk}s*,?`,"g");function nk(n,e,t,r){return new OI(n).build(e,t,r)}var GN="",OI=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new FI(t);return this._resetContextStyleTimingState(i),Qn(this,vu(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=GN,e.collectedStyles=new Map,e.collectedStyles.set(GN,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(gN()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ce.State){let c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,o.push(this.visitState(c,t))}),c.name=d}else if(a.type==Ce.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(yN())}),{type:Ce.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{xI(c).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&t.errors.push(_N(e.name,[...o.values()]))}return{type:Ce.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Qn(this,vu(e.animation),t),i=b9(e.expr,t.errors);return{type:Ce.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:bc(e.options)}}visitSequence(e,t){return{type:Ce.Sequence,steps:e.steps.map(r=>Qn(this,r,t)),options:bc(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=Qn(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Ce.Group,steps:o,options:bc(e.options)}}visitAnimate(e,t){let r=x9(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Ec({});if(o.type==Ce.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let d={};r.easing&&(d.easing=r.easing),s=Ec(d)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Ce.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===kr?r.push(a):t.errors.push(vN(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(SI)>=0){o=!0;break}}}),{type:Ce.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let d=t.collectedStyles.get(t.currentQuerySelector),h=d.get(c),m=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(t.errors.push(EN(c,h.startTime,h.endTime,o,i)),m=!1),o=h.startTime),m&&d.set(c,{startTime:o,endTime:i}),t.options&&$N(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Ce.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(wN()),r;let i=1,o=0,s=[],a=!1,c=!1,d=0,h=e.steps.map(q=>{let ee=this._makeStyleAst(q,t),Y=ee.offset!=null?ee.offset:A9(ee.styles),le=0;return Y!=null&&(o++,le=ee.offset=Y),c=c||le<0||le>1,a=a||le<d,d=le,s.push(le),ee});c&&t.errors.push(bN()),a&&t.errors.push(IN());let m=e.steps.length,w=0;o>0&&o<m?t.errors.push(TN()):o==0&&(w=i/(m-1));let S=m-1,M=t.currentTime,k=t.currentAnimateTimings,V=k.duration;return h.forEach((q,ee)=>{let Y=w>0?ee==S?1:w*ee:s[ee],le=Y*V;t.currentTime=M+k.delay+le,k.duration=le,this._validateStyleAst(q,t),q.offset=Y,r.styles.push(q)}),r}visitReference(e,t){return{type:Ce.Reference,animation:Qn(this,vu(e.animation),t),options:bc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ce.AnimateChild,options:bc(e.options)}}visitAnimateRef(e,t){return{type:Ce.AnimateRef,animation:this.visitReference(e.animation,t),options:bc(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=S9(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Kn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Qn(this,vu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Ce.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:bc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(CN());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:gf(e.timings,t.errors,!0);return{type:Ce.Stagger,animation:Qn(this,vu(e.animation),t),timings:r,options:null}}};function S9(n){let e=!!n.split(/\s*,\s*/).find(t=>t==tk);return e&&(n=n.replace(C9,"")),n=n.replace(/@\*/g,mf).replace(/@\w+/g,t=>mf+"-"+t.slice(1)).replace(/:animating/g,$y),[n,e]}function D9(n){return n?z({},n):null}var FI=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function A9(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function x9(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=gf(n,e).duration;return RI(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=RI(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=gf(t,e);return RI(i.duration,i.delay,i.easing)}function bc(n){return n?(n=z({},n),n.params&&(n.params=D9(n.params))):n={},n}function RI(n,e,t){return{duration:n,delay:e,easing:t}}function WI(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var _f=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},R9=1,P9=":enter",M9=new RegExp(P9,"g"),N9=":leave",k9=new RegExp(N9,"g");function rk(n,e,t,r,i,o=new Map,s=new Map,a,c,d=[]){return new VI().buildKeyframes(n,e,t,r,i,o,s,a,c,d)}var VI=class{buildKeyframes(e,t,r,i,o,s,a,c,d,h=[]){d=d||new _f;let m=new LI(e,t,d,i,o,h,[]);m.options=c;let w=c.delay?Hi(c.delay):0;m.currentTimeline.delayNextStep(w),m.currentTimeline.setStyles([s],null,m.errors,c),Qn(this,r,m);let S=m.timelines.filter(M=>M.containsAnimation());if(S.length&&a.size){let M;for(let k=S.length-1;k>=0;k--){let V=S[k];if(V.element===t){M=V;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([a],null,m.errors,c)}return S.length?S.map(M=>M.buildKeyframes()):[WI(t,[],[],[],0,w,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:Hi(Eu(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?Hi(r.duration):null,a=r.delay!=null?Hi(r.delay):null;return s!==0&&e.forEach(c=>{let d=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Qn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==Ce.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Jy);let s=Hi(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Qn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Hi(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Qn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Eu(r,t.params,t.errors):r;return gf(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==Ce.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let d=c.offset||0;a.forwardTime(d*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Hi(i.delay):0;o&&(t.previousNode.type===Ce.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Jy);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,h)=>{t.currentQueryIndex=h;let m=t.createSubContext(e.options,d);o&&m.delayNextStep(o),d===t.element&&(c=m.currentTimeline),Qn(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let w=m.currentTimeline.currentTime;s=Math.max(s,w)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let m=h.currentTime;Qn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}},Jy={},LI=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Jy;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new Xy(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Hi(r.duration)),r.delay!=null&&(i.delay=Hi(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Eu(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Jy,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new UI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(M9,"."+this._enterClassName),e=e.replace(k9,"."+this._leaveClassName);let c=r!=1,d=this._driver.query(this.element,e,c);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!o&&a.length==0&&s.push(SN(t)),a}},Xy=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=R9,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||kr),this._currentKeyframe.set(t,kr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=O9(e,this._globalTimelineStyles);for(let[a,c]of s){let d=Eu(c,o,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??kr),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let d=new Map([...this._backFill,...a]);d.forEach((h,m)=>{h===_u?e.add(m):h===kr&&t.add(m)}),r||d.set("offset",c/this.duration),i.push(d)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return WI(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},UI=class extends Xy{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let d=new Map(e[0]);d.set("offset",WN(a)),o.push(d);let h=e.length-1;for(let m=1;m<=h;m++){let w=new Map(e[m]),S=w.get("offset"),M=t+S*r;w.set("offset",WN(M/s)),o.push(w)}r=s,t=0,i="",e=o}return WI(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function WN(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function O9(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,kr)}else for(let[o,s]of i)t.set(o,s)}),t}function KN(n,e,t,r,i,o,s,a,c,d,h,m,w){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:h,totalTime:m,errors:w}}var PI={},Zy=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return F9(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,d,h){let m=[],w=this.ast.options&&this.ast.options.params||PI,S=a&&a.params||PI,M=this.buildStyles(r,S,m),k=c&&c.params||PI,V=this.buildStyles(i,k,m),q=new Set,ee=new Map,Y=new Map,le=i==="void",$e={params:ik(k,w),delay:this.ast.options?.delay},Ee=h?[]:rk(e,t,this.ast.animation,o,s,M,V,$e,d,m),b=0;return Ee.forEach(y=>{b=Math.max(y.duration+y.delay,b)}),m.length?KN(t,this._triggerName,r,i,le,M,V,[],[],ee,Y,b,m):(Ee.forEach(y=>{let E=y.element,I=Kn(ee,E,new Set);y.preStyleProps.forEach(R=>I.add(R));let T=Kn(Y,E,new Set);y.postStyleProps.forEach(R=>T.add(R)),E!==t&&q.add(E)}),KN(t,this._triggerName,r,i,le,M,V,Ee,[...q.values()],ee,Y,b))}};function F9(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function ik(n,e){let t=z({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var jI=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=ik(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Eu(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function V9(n,e,t){return new BI(n,e,t)}var BI=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new jI(i.style,o,r))}),QN(this.states,"true","1"),QN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Zy(e,i,this.states))}),this.fallbackTransition=L9(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function L9(n,e,t){let r=[(s,a)=>!0],i={type:Ce.Sequence,steps:[],options:null},o={type:Ce.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Zy(n,o,e)}function QN(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var U9=new _f,$I=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=nk(this._driver,t,r,i);if(r.length)throw RN(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=bI(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=rk(this._driver,t,o,DI,By,new Map,new Map,r,U9,i),s.forEach(h=>{let m=Kn(a,h.element,new Map);h.postStyleProps.forEach(w=>m.set(w,null))})):(i.push(PN()),s=[]),i.length)throw MN(i);a.forEach((h,m)=>{h.forEach((w,S)=>{h.set(S,this._driver.computeStyle(m,S,kr))})});let c=s.map(h=>{let m=a.get(h.element);return this._buildPlayer(h,new Map,m)}),d=Fo(c);return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw NN(e);return t}listen(e,t,r,i){let o=Uy(t,"","","");return Ly(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},YN="ng-animate-queued",j9=".ng-animate-queued",MI="ng-animate-disabled",B9=".ng-animate-disabled",$9="ng-star-inserted",z9=".ng-star-inserted",q9=[],ok={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},H9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hi="__ng_removed",vf=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=W9(i),r){let o=e,{value:s}=o,a=Xp(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},yf="void",NI=new vf(yf),zI=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Or(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw kN(r,t);if(r==null||r.length==0)throw ON(t);if(!K9(r))throw FN(r,t);let o=Kn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=Kn(this._engine.statesByElement,e,new Map);return a.has(t)||(Or(e,pf),Or(e,pf+"-"+t),a.set(t,NI)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw VN(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new Ef(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Or(e,pf),Or(e,pf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),d=new vf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=NI),!(d.value===yf)&&c.value===d.value){if(!J9(c.params,d.params)){let k=[],V=o.matchStyles(c.value,c.params,k),q=o.matchStyles(d.value,d.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{Js(e,V),di(e,q)})}return}let w=Kn(this._engine.playersByElement,e,[]);w.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let S=o.matchTransition(c.value,d.value,e,d.params),M=!1;if(!S){if(!i)return;S=o.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:S,fromState:c,toState:d,player:s,isFallbackTransition:M}),M||(Or(e,YN),s.onStart(()=>{wu(e,YN)})),s.onDone(()=>{let k=this.players.indexOf(s);k>=0&&this.players.splice(k,1);let V=this._engine.playersByElement.get(e);if(V){let q=V.indexOf(s);q>=0&&V.splice(q,1)}}),this.players.push(s),w.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,mf,!0);r.forEach(i=>{if(i[hi])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,d)=>{if(s.set(d,c.value),this._triggers.has(d)){let h=this.trigger(e,d,yf,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Fo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,d=r.get(s)||NI,h=new vf(yf),m=new Ef(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:d,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[hi];(!o||o===ok)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Or(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=Uy(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Ly(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},qI=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new zI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let d=r.indexOf(c);r.splice(d+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(Wy(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Wy(t))return;let o=t[hi];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Or(e,MI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wu(e,MI))}removeNode(e,t,r){if(Wy(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[hi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Wy(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,mf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,$y,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fo(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[hi];if(t&&t.setForRemoval){if(e[hi]=ok,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(MI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,B9,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Or(i,$9)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Fo(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw LN(e)}_flushAnimations(e,t){let r=new _f,i=[],o=new Map,s=[],a=new Map,c=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(se=>{h.add(se);let ae=this.driver.query(se,j9,!0);for(let ce=0;ce<ae.length;ce++)h.add(ae[ce])});let m=this.bodyNode,w=Array.from(this.statesByElement.keys()),S=ZN(w,this.collectedEnterElements),M=new Map,k=0;S.forEach((se,ae)=>{let ce=DI+k++;M.set(ae,ce),se.forEach(Pe=>Or(Pe,ce))});let V=[],q=new Set,ee=new Set;for(let se=0;se<this.collectedLeaveElements.length;se++){let ae=this.collectedLeaveElements[se],ce=ae[hi];ce&&ce.setForRemoval&&(V.push(ae),q.add(ae),ce.hasAnimation?this.driver.query(ae,z9,!0).forEach(Pe=>q.add(Pe)):ee.add(ae))}let Y=new Map,le=ZN(w,Array.from(q));le.forEach((se,ae)=>{let ce=By+k++;Y.set(ae,ce),se.forEach(Pe=>Or(Pe,ce))}),e.push(()=>{S.forEach((se,ae)=>{let ce=M.get(ae);se.forEach(Pe=>wu(Pe,ce))}),le.forEach((se,ae)=>{let ce=Y.get(ae);se.forEach(Pe=>wu(Pe,ce))}),V.forEach(se=>{this.processLeaveNode(se)})});let $e=[],Ee=[];for(let se=this._namespaceList.length-1;se>=0;se--)this._namespaceList[se].drainQueuedTransitions(t).forEach(ce=>{let Pe=ce.player,Tt=ce.element;if($e.push(Pe),this.collectedEnterElements.length){let ft=Tt[hi];if(ft&&ft.setForMove){if(ft.previousTriggersValues&&ft.previousTriggersValues.has(ce.triggerName)){let tr=ft.previousTriggersValues.get(ce.triggerName),pn=this.statesByElement.get(ce.element);if(pn&&pn.has(ce.triggerName)){let wr=pn.get(ce.triggerName);wr.value=tr,pn.set(ce.triggerName,wr)}}Pe.destroy();return}}let kn=!m||!this.driver.containsElement(m,Tt),gt=Y.get(Tt),ot=M.get(Tt),Ze=this._buildInstruction(ce,r,ot,gt,kn);if(Ze.errors&&Ze.errors.length){Ee.push(Ze);return}if(kn){Pe.onStart(()=>Js(Tt,Ze.fromStyles)),Pe.onDestroy(()=>di(Tt,Ze.toStyles)),i.push(Pe);return}if(ce.isFallbackTransition){Pe.onStart(()=>Js(Tt,Ze.fromStyles)),Pe.onDestroy(()=>di(Tt,Ze.toStyles)),i.push(Pe);return}let Er=[];Ze.timelines.forEach(ft=>{ft.stretchStartingKeyframe=!0,this.disabledNodes.has(ft.element)||Er.push(ft)}),Ze.timelines=Er,r.append(Tt,Ze.timelines);let pa={instruction:Ze,player:Pe,element:Tt};s.push(pa),Ze.queriedElements.forEach(ft=>Kn(a,ft,[]).push(Pe)),Ze.preStyleProps.forEach((ft,tr)=>{if(ft.size){let pn=c.get(tr);pn||c.set(tr,pn=new Set),ft.forEach((wr,bi)=>pn.add(bi))}}),Ze.postStyleProps.forEach((ft,tr)=>{let pn=d.get(tr);pn||d.set(tr,pn=new Set),ft.forEach((wr,bi)=>pn.add(bi))})});if(Ee.length){let se=[];Ee.forEach(ae=>{se.push(UN(ae.triggerName,ae.errors))}),$e.forEach(ae=>ae.destroy()),this.reportError(se)}let b=new Map,y=new Map;s.forEach(se=>{let ae=se.element;r.has(ae)&&(y.set(ae,ae),this._beforeAnimationBuild(se.player.namespaceId,se.instruction,b))}),i.forEach(se=>{let ae=se.element;this._getPreviousPlayers(ae,!1,se.namespaceId,se.triggerName,null).forEach(Pe=>{Kn(b,ae,[]).push(Pe),Pe.destroy()})});let E=V.filter(se=>ek(se,c,d)),I=new Map;XN(I,this.driver,ee,d,kr).forEach(se=>{ek(se,c,d)&&E.push(se)});let R=new Map;S.forEach((se,ae)=>{XN(R,this.driver,new Set(se),c,_u)}),E.forEach(se=>{let ae=I.get(se),ce=R.get(se);I.set(se,new Map([...ae?.entries()??[],...ce?.entries()??[]]))});let v=[],ut=[],fn={};s.forEach(se=>{let{element:ae,player:ce,instruction:Pe}=se;if(r.has(ae)){if(h.has(ae)){ce.onDestroy(()=>di(ae,Pe.toStyles)),ce.disabled=!0,ce.overrideTotalTime(Pe.totalTime),i.push(ce);return}let Tt=fn;if(y.size>1){let gt=ae,ot=[];for(;gt=gt.parentNode;){let Ze=y.get(gt);if(Ze){Tt=Ze;break}ot.push(gt)}ot.forEach(Ze=>y.set(Ze,Tt))}let kn=this._buildAnimation(ce.namespaceId,Pe,b,o,R,I);if(ce.setRealPlayer(kn),Tt===fn)v.push(ce);else{let gt=this.playersByElement.get(Tt);gt&&gt.length&&(ce.parentPlayer=Fo(gt)),i.push(ce)}}else Js(ae,Pe.fromStyles),ce.onDestroy(()=>di(ae,Pe.toStyles)),ut.push(ce),h.has(ae)&&i.push(ce)}),ut.forEach(se=>{let ae=o.get(se.element);if(ae&&ae.length){let ce=Fo(ae);se.setRealPlayer(ce)}}),i.forEach(se=>{se.parentPlayer?se.syncPlayerEvents(se.parentPlayer):se.destroy()});for(let se=0;se<V.length;se++){let ae=V[se],ce=ae[hi];if(wu(ae,By),ce&&ce.hasAnimation)continue;let Pe=[];if(a.size){let kn=a.get(ae);kn&&kn.length&&Pe.push(...kn);let gt=this.driver.query(ae,$y,!0);for(let ot=0;ot<gt.length;ot++){let Ze=a.get(gt[ot]);Ze&&Ze.length&&Pe.push(...Ze)}}let Tt=Pe.filter(kn=>!kn.destroyed);Tt.length?Q9(this,ae,Tt):this.processLeaveNode(ae)}return V.length=0,v.forEach(se=>{this.players.push(se),se.onDone(()=>{se.destroy();let ae=this.players.indexOf(se);this.players.splice(ae,1)}),se.play()}),v}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==yf;a.forEach(d=>{d.queued||!c&&d.triggerName!=i||s.push(d)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let d=c.element,h=d!==o,m=Kn(r,d,[]);this._getPreviousPlayers(d,h,s,a,t.toState).forEach(S=>{let M=S.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),S.destroy(),m.push(S)})}Js(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,d=[],h=new Set,m=new Set,w=t.timelines.map(M=>{let k=M.element;h.add(k);let V=k[hi];if(V&&V.removedBeforeQueried)return new qi(M.duration,M.delay);let q=k!==c,ee=Y9((r.get(k)||q9).map(b=>b.getRealPlayer())).filter(b=>{let y=b;return y.element?y.element===k:!1}),Y=o.get(k),le=s.get(k),$e=bI(this._normalizer,M.keyframes,Y,le),Ee=this._buildPlayer(M,$e,ee);if(M.subTimeline&&i&&m.add(k),q){let b=new Ef(e,a,k);b.setRealPlayer(Ee),d.push(b)}return Ee});d.forEach(M=>{Kn(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>G9(this.playersByQueriedElement,M.element,M))}),h.forEach(M=>Or(M,AI));let S=Fo(w);return S.onDestroy(()=>{h.forEach(M=>wu(M,AI)),di(c,t.toStyles)}),m.forEach(M=>{Kn(i,M,[]).push(S)}),S}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new qi(e.duration,e.delay)}},Ef=class{namespaceId;triggerName;element;_player=new qi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Ly(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Kn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function G9(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function W9(n){return n??null}function Wy(n){return n&&n.nodeType===1}function K9(n){return n=="start"||n=="done"}function JN(n,e){let t=n.style.display;return n.style.display=e??"none",t}function XN(n,e,t,r,i){let o=[];t.forEach(c=>o.push(JN(c)));let s=[];r.forEach((c,d)=>{let h=new Map;c.forEach(m=>{let w=e.computeStyle(d,m,i);h.set(m,w),(!w||w.length==0)&&(d[hi]=H9,s.push(d))}),n.set(d,h)});let a=0;return t.forEach(c=>JN(c,o[a++])),s}function ZN(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let d=a.parentNode;return t.has(d)?c=d:i.has(d)?c=r:c=s(d),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function Or(n,e){n.classList?.add(e)}function wu(n,e){n.classList?.remove(e)}function Q9(n,e,t){Fo(t).onDone(()=>n.processLeaveNode(e))}function Y9(n){let e=[];return sk(n,e),e}function sk(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof vc?sk(r.players,e):e.push(r)}}function J9(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function ek(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var bu=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new qI(e.body,t,r),this._timelineEngine=new $I(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],d=[],h=nk(this._driver,o,c,d);if(c.length)throw xN(i,c);a=V9(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=II(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=II(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function X9(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kI(e[0]),e.length>1&&(r=kI(e[e.length-1]))):e instanceof Map&&(t=kI(e)),t||r?new Z9(n,t,r):null}var Z9=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&di(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(di(this._element,this._initialStyles),this._endStyles&&(di(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Js(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Js(this._element,this._endStyles),this._endStyles=null),di(this._element,this._initialStyles),this._state=3)}}return n})();function kI(n){let e=null;return n.forEach((t,r)=>{ez(r)&&(e=e||new Map,e.set(r,t))}),e}function ez(n){return n==="display"||n==="position"}var e_=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:qy(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},t_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return TI(e,t)}getParentElement(e){return jy(e)}query(e,t,r){return CI(e,t,r)}computeStyle(e,t,r){return qy(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let d=new Map,h=s.filter(S=>S instanceof e_);zN(r,i)&&h.forEach(S=>{S.currentSnapshot.forEach((M,k)=>d.set(k,M))});let m=BN(t).map(S=>new Map(S));m=qN(e,m,d);let w=X9(e,m);return new e_(e,m,c,w)}};var Ky="@",ak="@.disabled",n_=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Ky&&t==ak?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},HI=class extends n_{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Ky?t.charAt(1)=="."&&t==ak?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Ky){let o=tz(e),s=t.slice(1),a="";return s.charAt(0)!=Ky&&([s,a]=nz(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let d=c._data||-1;this.factory.scheduleListenerCallback(d,r,c)})}return this.delegate.listen(e,t,r,i)}};function tz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function nz(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var r_=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let d=this._rendererCache,h=d.get(i);if(!h){let m=()=>d.delete(i);h=new n_("",i,this.engine,m),d.set(i,h)}return h}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(o,s,e,d.name,d)};return t.data.animation.forEach(a),new HI(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var iz=(()=>{class n extends bu{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(ve(Rt),ve(Ic),ve(Tc))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function oz(){return new Qy}function sz(){return new r_(L(Qh),L(bu),L(Qe))}var ck=[{provide:Tc,useFactory:oz},{provide:bu,useClass:iz},{provide:Do,useFactory:sz}],Ape=[{provide:Ic,useClass:GI},{provide:Pg,useValue:"NoopAnimations"},...ck],az=[{provide:Ic,useFactory:()=>new t_},{provide:Pg,useFactory:()=>"BrowserAnimations"},...ck];function lk(){return oi("NgEagerAnimations"),[...az]}var QI=class{constructor(){}loadScript(e,t,r,i=null){if(typeof document<"u"&&!document.getElementById(e)){let o=document.createElement("script");o.async=!0,o.src=t,o.onload=r,i||(i=document.head),i.appendChild(o)}}},YI=class{constructor(){}},uk=()=>typeof window.google?.accounts<"u",cz=()=>{if(!uk())throw new Error("Google Accounts API is undefined")},KI=()=>(cz(),window.google.accounts),lz={oneTapEnabled:!0},JI=(()=>{class n extends QI{static{this.PROVIDER_ID="GOOGLE"}constructor(t,r){super(),this.clientId=t,this.initOptions=r,this.changeUser=new vt,this._socialUser=new zt(null),this._accessToken=new zt(null),this._receivedAccessToken=new vt,this.initOptions=z(z({},lz),this.initOptions),this._socialUser.pipe(Am(1)).subscribe(this.changeUser),this._accessToken.pipe(Am(1)).subscribe(this._receivedAccessToken)}initialize(t,r){return new Promise((i,o)=>{try{this.loadScript(n.PROVIDER_ID,this.getGoogleLoginScriptSrc(r||""),()=>{if(uk()){if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:s})=>{let a=this.createSocialUser(s);this._socialUser.next(a)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(Ct(s=>s===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let s=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(a=>a).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:s,prompt:this.initOptions.prompt,callback:a=>{a.error?this._accessToken.error({code:a.error,description:a.error_description,uri:a.error_uri}):this._accessToken.next(a.access_token)}})}i()}})}catch(s){o(s)}})}getLoginStatus(){return new Promise((t,r)=>{this._socialUser.value?t(this._socialUser.value):r(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,r)=>{KI().id.revoke(this._socialUser.value.id,i=>{i.error?r(i.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,r)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(yn(1)).subscribe(t)):this._socialUser.value?r("No token client was instantiated, you should specify some scopes."):r("You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,r)=>{this._tokenClient?this._accessToken.value?KI().oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):r("No access token to revoke"):r("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}async signOut(){KI().id.disableAutoSelect(),this._socialUser.next(null)}createSocialUser(t){let r=new YI;r.idToken=t;let i=this.decodeJwt(t);return r.id=i.sub,r.name=i.name,r.email=i.email,r.photoUrl=i.picture,r.firstName=i.given_name,r.lastName=i.family_name,r}decodeJwt(t){let i=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(i).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}getGoogleLoginScriptSrc(t){return t?`https://accounts.google.com/gsi/client?hl=${t}`:"https://accounts.google.com/gsi/client"}}return n})();var XI="Service workers are disabled or not supported by this browser",Iu=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Se(r=>r.error(new G(5601,!1)));else{let r=null,i=new yt;this.worker=new Se(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let o=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(qn(()=>e.getRegistration().then(d=>{if(!d)throw new G(5601,!1);return d})));let s=new yt;this.events=s.asObservable();let a=d=>{let{data:h}=d;h?.type&&s.next(h)};e.addEventListener("message",a),t?.get(ai,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(yn(1)).subscribe(i=>{i.postMessage(z({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Ct(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(yn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Ct(i=>i.nonce===e),yn(1),Ke(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},uz=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new yt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=go,this.notificationClicks=go,this.notificationCloses=go,this.pushSubscriptionChanges=go,this.subscription=go;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ke(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ke(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Ke(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Ke(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ke(i=>i.pushManager));let r=this.pushManager.pipe(qn(i=>i.getSubscription()));this.subscription=new Se(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(XI));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(qn(c=>c.subscribe(r)),yn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(XI));let t=r=>{if(r===null)throw new G(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new G(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(yn(1),qn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ve(Iu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),dz=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=go,this.unrecoverable=go;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(XI));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new G(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ve(Iu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),hk=new ie("");function hz(){let n=L(wf);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=L(hk),t=L(Qe),r=L(ai);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=dk(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),dk(+a[0])]);break;default:throw new G(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(wo(5604,!1)))})})}function dk(n){return new Promise(e=>setTimeout(e,n))}function fz(){let n=L(wf),e=L(ct),t=!0;return new Iu(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var wf=class{enabled;updateViaCache;type;scope;registrationStrategy};function fk(n,e={}){return vn([uz,dz,{provide:hk,useValue:n},{provide:wf,useValue:e},{provide:Iu,useFactory:fz},qg(hz)])}var pk=()=>{};var yk=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},i_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=o>>2,m=(o&3)<<4|a>>4,w=(a&15)<<2|d>>6,S=d&63;c||(S=64,s||(w=64)),r.push(t[h],t[m],t[w],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||d==null||m==null)throw new eT;let w=o<<2|a>>4;if(r.push(w),d!==64){let S=a<<4&240|d>>2;if(r.push(S),m!==64){let M=d<<6&192|m;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},eT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mz=function(n){let e=yk(n);return i_.encodeByteArray(e,!0)},If=function(n){return mz(n).replace(/\./g,"")},o_=function(n){try{return i_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var gz=()=>nT().__FIREBASE_DEFAULTS__,yz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_z=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&o_(n[1]);return e&&JSON.parse(e)},rT=()=>{try{return pk()||gz()||yz()||_z()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iT=n=>{var e,t;return(t=(e=rT())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},s_=n=>{let e=iT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oT=()=>{var n;return(n=rT())===null||n===void 0?void 0:n.config},sT=n=>{var e;return(e=rT())===null||e===void 0?void 0:e[`_${n}`]};var Cc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Vo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tu(n){return(await fetch(n,{credentials:"include"})).ok}function a_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[If(JSON.stringify(t)),If(JSON.stringify(s)),""].join(".")}var bf={};function vz(){let n={prod:[],emulator:[]};for(let e of Object.keys(bf))bf[e]?n.emulator.push(e):n.prod.push(e);return n}function Ez(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var mk=!1;function Cu(n,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||bf[n]===e||bf[n]||mk)return;bf[n]=e;function t(w){return`__firebase__banner__${w}`}let r="__firebase__banner",o=vz().prod.length>0;function s(){let w=document.getElementById(r);w&&w.remove()}function a(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function c(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function d(){let w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{mk=!0,s()},w}function h(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function m(){let w=Ez(r),S=t("text"),M=document.getElementById(S)||document.createElement("span"),k=t("learnmore"),V=document.getElementById(k)||document.createElement("a"),q=t("preprendIcon"),ee=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){let Y=w.element;a(Y),h(V,k);let le=d();c(ee,q),Y.append(ee,M,V,le),document.body.appendChild(Y)}o?(M.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function vk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ek(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bk(){let n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Tf(){try{return typeof indexedDB=="object"}catch{return!1}}function Ik(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var wz="FirebaseError",jn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fi.prototype.create)}},fi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?bz(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new jn(i,a,r)}};function bz(n,e){return n.replace(Iz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Iz=/\{\$([^}]+)}/g;function Tk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(gk(o)&&gk(s)){if(!Gi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function gk(n){return n!==null&&typeof n=="object"}function Cf(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ck(n,e){let t=new tT(n,e);return t.subscribe.bind(t)}var tT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Tz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ZI),i.error===void 0&&(i.error=ZI),i.complete===void 0&&(i.complete=ZI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Tz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ZI(){}var Qpe=14400*1e3;function pi(n){return n&&n._delegate?n._delegate:n}var bn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Sc="[DEFAULT]";var aT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Cc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sz(e))try{this.getOrInitializeService({instanceIdentifier:Sc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sc){return this.instances.has(e)}getOptions(e=Sc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sc){return this.component?this.component.multipleInstances?e:Sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Cz(n){return n===Sc?void 0:n}function Sz(n){return n.instantiationMode==="EAGER"}var c_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new aT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Dz=[],Xe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Xe||{}),Az={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},xz=Xe.INFO,Rz={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Pz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Rz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wi=class{constructor(e){this.name=e,this._logLevel=xz,this._logHandler=Pz,this._userLogHandler=null,Dz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Az[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}};var lT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Mz(n){let e=n.getComponent();return e?.type==="VERSION"}var uT="@firebase/app",Sk="0.13.2";var Lo=new Wi("@firebase/app"),Nz="@firebase/app-compat",kz="@firebase/analytics-compat",Oz="@firebase/analytics",Fz="@firebase/app-check-compat",Vz="@firebase/app-check",Lz="@firebase/auth",Uz="@firebase/auth-compat",jz="@firebase/database",Bz="@firebase/data-connect",$z="@firebase/database-compat",zz="@firebase/functions",qz="@firebase/functions-compat",Hz="@firebase/installations",Gz="@firebase/installations-compat",Wz="@firebase/messaging",Kz="@firebase/messaging-compat",Qz="@firebase/performance",Yz="@firebase/performance-compat",Jz="@firebase/remote-config",Xz="@firebase/remote-config-compat",Zz="@firebase/storage",eq="@firebase/storage-compat",tq="@firebase/firestore",nq="@firebase/ai",rq="@firebase/firestore-compat",iq="firebase",oq="11.10.0";var dT="[DEFAULT]",sq={[uT]:"fire-core",[Nz]:"fire-core-compat",[Oz]:"fire-analytics",[kz]:"fire-analytics-compat",[Vz]:"fire-app-check",[Fz]:"fire-app-check-compat",[Lz]:"fire-auth",[Uz]:"fire-auth-compat",[jz]:"fire-rtdb",[Bz]:"fire-data-connect",[$z]:"fire-rtdb-compat",[zz]:"fire-fn",[qz]:"fire-fn-compat",[Hz]:"fire-iid",[Gz]:"fire-iid-compat",[Wz]:"fire-fcm",[Kz]:"fire-fcm-compat",[Qz]:"fire-perf",[Yz]:"fire-perf-compat",[Jz]:"fire-rc",[Xz]:"fire-rc-compat",[Zz]:"fire-gcs",[eq]:"fire-gcs-compat",[tq]:"fire-fst",[rq]:"fire-fst-compat",[nq]:"fire-vertex","fire-js":"fire-js",[iq]:"fire-js-all"};var Sf=new Map,aq=new Map,hT=new Map;function Dk(n,e){try{n.container.addComponent(e)}catch(t){Lo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _r(n){let e=n.name;if(hT.has(e))return Lo.debug(`There were multiple attempts to register component ${e}.`),!1;hT.set(e,n);for(let t of Sf.values())Dk(t,n);for(let t of aq.values())Dk(t,n);return!0}function Zs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yn(n){return n==null?!1:n.settings!==void 0}var cq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new fi("app","Firebase",cq);var fT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}};var Ki=oq;function gT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:dT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Xs.create("bad-app-name",{appName:String(i)});if(t||(t=oT()),!t)throw Xs.create("no-options");let o=Sf.get(i);if(o){if(Gi(t,o.options)&&Gi(r,o.config))return o;throw Xs.create("duplicate-app",{appName:i})}let s=new c_(i);for(let c of hT.values())s.addComponent(c);let a=new fT(t,r,s);return Sf.set(i,a),a}function Uo(n=dT){let e=Sf.get(n);if(!e&&n===dT&&oT())return gT();if(!e)throw Xs.create("no-app",{appName:n});return e}function l_(){return Array.from(Sf.values())}function ht(n,e,t){var r;let i=(r=sq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lo.warn(a.join(" "));return}_r(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var lq="firebase-heartbeat-database",uq=1,Df="firebase-heartbeat-store",cT=null;function Pk(){return cT||(cT=hA(lq,uq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Df)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xs.create("idb-open",{originalErrorMessage:n.message})})),cT}async function dq(n){try{let t=(await Pk()).transaction(Df),r=await t.objectStore(Df).get(Mk(n));return await t.done,r}catch(e){if(e instanceof jn)Lo.warn(e.message);else{let t=Xs.create("idb-get",{originalErrorMessage:e?.message});Lo.warn(t.message)}}}async function Ak(n,e){try{let r=(await Pk()).transaction(Df,"readwrite");await r.objectStore(Df).put(e,Mk(n)),await r.done}catch(t){if(t instanceof jn)Lo.warn(t.message);else{let r=Xs.create("idb-set",{originalErrorMessage:t?.message});Lo.warn(r.message)}}}function Mk(n){return`${n.name}!${n.options.appId}`}var hq=1024,fq=30,pT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new mT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xk();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>fq){let s=mq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Lo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=xk(),{heartbeatsToSend:r,unsentEntries:i}=pq(this._heartbeatsCache.heartbeats),o=If(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Lo.warn(t),""}}};function xk(){return new Date().toISOString().substring(0,10)}function pq(n,e=hq){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Rk(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Rk(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var mT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tf()?Ik().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await dq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Ak(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Ak(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function Rk(n){return If(JSON.stringify({version:2,heartbeats:n})).length}function mq(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function gq(n){_r(new bn("platform-logger",e=>new lT(e),"PRIVATE")),_r(new bn("heartbeat",e=>new pT(e),"PRIVATE")),ht(uT,Sk,n),ht(uT,Sk,"esm2017"),ht("fire-js","")}gq("");var yq="firebase",_q="11.10.0";ht(yq,_q,"app");function Su(n,e){let t=e?.injector??L(ct),r=new Fl(1),i=Za(()=>{let o;try{o=n()}catch(s){Pt(()=>r.error(s));return}Pt(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(Un).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function Nk(n){n===void 0&&(n=L(ct));let e=n.get(Yl);return t=>new Se(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Qi=new Ns("ANGULARFIRE2_VERSION");function Ac(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ea=(n,e)=>{let t=e?[e]:l_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Du=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Du||{}),kk=Uh()&&typeof Zone<"u"?Du.WARN:Du.SILENT;var u_=class{zone;delegate;constructor(e,t=Q0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Yi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=L(Qe);this.outsideAngular=t.runOutsideAngular(()=>new u_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new u_(typeof Zone>"u"?void 0:Zone.current,K0))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ok=!1;function vq(n,e){!Ok&&(kk>Du.SILENT||Uh())&&(Ok=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),kk>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Eq(n){let e=L(Qe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Dc(n){let e=L(Qe,{optional:!0});return e?e.run(()=>n()):n()}var wq=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Gt(t,()=>Dc(()=>n.apply(void 0,r)))),jo=(n,e,t)=>(t||=e?Du.WARN:Du.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=L(Yi),s=L(Yl),a=L(xt)}catch{return vq(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Dc(()=>s.add())),i[d]=wq(i[d],r,a));let c=Eq(()=>n.apply(this,i));return e?c instanceof Se?c.pipe(Ms(o.outsideAngular),Ps(o.insideAngular),Nk(a)):c instanceof Promise?Dc(()=>{let d=s.add();return new Promise((h,m)=>{c.then(w=>Gt(a,()=>Dc(()=>h(w))),w=>Gt(a,()=>Dc(()=>m(w)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Dc(()=>c):c instanceof Se?c.pipe(Ms(o.outsideAngular),Ps(o.insideAngular)):Dc(()=>c)});var mi=class{constructor(e){return e}},Bo=class{constructor(){return l_()}};function bq(n){return n&&n.length===1?n[0]:new mi(Uo())}var yT=new ie("angularfire2._apps"),Iq={provide:mi,useFactory:bq,deps:[[new an,yT]]},Tq={provide:Bo,deps:[[new an,yT]]};function Cq(n){return(e,t)=>{let r=t.get(oc);ht("angularfire",Qi.full,"core"),ht("angularfire",Qi.full,"app"),ht("angular",gE.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new mi(i)}}function Fk(n,...e){return vn([Iq,Tq,{provide:yT,useFactory:Cq(n),multi:!0,deps:[Qe,ct,Yi,...e]}])}var _T=jo(gT,!0);var Sq=new Map,Dq={activated:!1,tokenObservers:[]},Aq={initialized:!1,enabled:!1};function gi(n){return Sq.get(n)||Object.assign({},Dq)}function jk(){return Aq}var xq="https://content-firebaseappcheck.googleapis.com/v1";var Rq="exchangeDebugToken",Vk={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},zme=1440*60*1e3;var wT=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Cc,this.pending.promise.catch(t=>{}),await Pq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Cc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Pq(n){return new Promise(e=>{setTimeout(e,n)})}var Mq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ta=new fi("appCheck","AppCheck",Mq);function Bk(n){if(!gi(n).activated)throw ta.create("use-before-activation",{appName:n.name})}async function $k({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let m=await i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(m){throw ta.create("fetch-network-error",{originalErrorMessage:m?.message})}if(s.status!==200)throw ta.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(m){throw ta.create("fetch-parse-error",{originalErrorMessage:m?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ta.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function zk(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${xq}/projects/${t}/apps/${r}:${Rq}?key=${i}`,body:{debug_token:e}}}var Nq="firebase-app-check-database",kq=1,bT="firebase-app-check-store";var d_=null;function Oq(){return d_||(d_=new Promise((n,e)=>{try{let t=indexedDB.open(Nq,kq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ta.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;r.oldVersion===0&&i.createObjectStore(bT,{keyPath:"compositeKey"})}}catch(t){e(ta.create("storage-open",{originalErrorMessage:t?.message}))}}),d_)}function Fq(n,e){return Vq(Lq(n),e)}async function Vq(n,e){let r=(await Oq()).transaction(bT,"readwrite"),o=r.objectStore(bT).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var d;a(ta.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function Lq(n){return`${n.options.appId}-${n.name}`}var Af=new Wi("@firebase/app-check");function vT(n,e){return Tf()?Fq(n,e).catch(t=>{Af.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function qk(){return jk().enabled}async function Hk(){let n=jk();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Uq={error:"UNKNOWN_ERROR"};function jq(n){return i_.encodeString(JSON.stringify(n),!1)}async function IT(n,e=!1,t=!1){let r=n.app;Bk(r);let i=gi(r),o=i.token,s;if(o&&!xf(o)&&(i.token=void 0,o=void 0),!o){let d=await i.cachedTokenPromise;d&&(xf(d)?o=d:await vT(r,void 0))}if(!e&&o&&xf(o))return{token:o.token};let a=!1;if(qk())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=$k(zk(r,await Hk()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await vT(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Af.warn(d.message):t&&Af.error(d),ET(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await gi(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Af.warn(d.message):t&&Af.error(d),s=d}let c;return o?s?xf(o)?c={token:o.token,internalError:s}:c=ET(s):(c={token:o.token},i.token=o,await vT(r,o)):c=ET(s),a&&qq(r,c),c}async function Bq(n){let e=n.app;Bk(e);let{provider:t}=gi(e);if(qk()){let r=await Hk(),{token:i}=await $k(zk(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function $q(n,e,t,r){let{app:i}=n,o=gi(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xf(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Lk(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Lk(n))}function Gk(n,e){let t=gi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Lk(n){let{app:e}=n,t=gi(e),r=t.tokenRefresher;r||(r=zq(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zq(n){let{app:e}=n;return new wT(async()=>{let t=gi(e),r;if(t.token?r=await IT(n,!0):r=await IT(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Vk.RETRIAL_MIN_WAIT,Vk.RETRIAL_MAX_WAIT)}function qq(n,e){let t=gi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xf(n){return n.expireTimeMillis-Date.now()>0}function ET(n){return{token:jq(Uq),error:n}}var TT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gi(this.app);for(let t of e)Gk(this.app,t.next);return Promise.resolve()}};function Hq(n,e){return new TT(n,e)}function Gq(n){return{getToken:e=>IT(n,e),getLimitedUseToken:()=>Bq(n),addTokenListener:e=>$q(n,"INTERNAL",e),removeTokenListener:e=>Gk(n.app,e)}}var Wq="@firebase/app-check",Kq="0.10.1";var Qq="app-check",Uk="app-check-internal";function Yq(){_r(new bn(Qq,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Hq(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Uk).initialize()})),_r(new bn(Uk,n=>{let e=n.getProvider("app-check").getImmediate();return Gq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(Wq,Kq)}Yq();var Jq="app-check";var na=class{constructor(){return ea(Jq)}};var Xq=["localhost","0.0.0.0","127.0.0.1"],tge=typeof window<"u"&&Xq.includes(window.location.hostname);function aO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var cO=aO,lO=new fi("auth","Firebase",aO());var y_=new Wi("@firebase/auth");function Zq(n,...e){y_.logLevel<=Xe.WARN&&y_.warn(`Auth (${Ki}): ${n}`,...e)}function f_(n,...e){y_.logLevel<=Xe.ERROR&&y_.error(`Auth (${Ki}): ${n}`,...e)}function oa(n,...e){throw qT(n,...e)}function Rc(n,...e){return qT(n,...e)}function uO(n,e,t){let r=Object.assign(Object.assign({},cO()),{[e]:t});return new fi("auth","Firebase",r).create(e,{appName:n.name})}function xc(n){return uO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lO.create(n,...e)}function Ie(n,e,...t){if(!n)throw qT(e,...t)}function $o(n){let e="INTERNAL ASSERTION FAILED: "+n;throw f_(e),new Error(e)}function sa(n,e){n||$o(e)}function AT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function eH(){return Wk()==="http:"||Wk()==="https:"}function Wk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function tH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eH()||Ek()||"connection"in navigator)?navigator.onLine:!0}function nH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Pc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,sa(t>e,"Short delay should be less than long delay!"),this.isMobile=_k()||wk()}get(){return tH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function HT(n,e){sa(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var __=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oH=new Pc(3e4,6e4);function GT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Au(n,e,t,r,i={}){return dO(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Cf(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},o);return vk()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Vo(n.emulatorConfig.host)&&(d.credentials="include"),__.fetch()(await hO(n,n.config.apiHost,t,a),d)})}async function dO(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},rH),e);try{let i=new xT(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw h_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw h_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw h_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw h_(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw uO(n,h,d);oa(n,h)}}catch(i){if(i instanceof jn)throw i;oa(n,"network-request-failed",{message:String(i)})}}async function sH(n,e,t,r,i={}){let o=await Au(n,e,t,r,i);return"mfaPendingCredential"in o&&oa(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function hO(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?HT(n.config,i):`${n.config.apiScheme}://${i}`;return iH.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var xT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Rc(this.auth,"network-request-failed")),oH.get())})}};function h_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Rc(n,e,r);return i.customData._tokenResponse=t,i}async function aH(n,e){return Au(n,"POST","/v1/accounts:delete",e)}async function v_(n,e){return Au(n,"POST","/v1/accounts:lookup",e)}function Rf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WT(n,e=!1){let t=pi(n),r=await t.getIdToken(e),i=KT(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Rf(CT(i.auth_time)),issuedAtTime:Rf(CT(i.iat)),expirationTime:Rf(CT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function CT(n){return Number(n)*1e3}function KT(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return f_("JWT malformed, contained fewer than 3 sections"),null;try{let i=o_(t);return i?JSON.parse(i):(f_("Failed to decode base64 JWT payload"),null)}catch(i){return f_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Kk(n){let e=KT(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Mf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof jn&&cH(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function cH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var RT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Nf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rf(this.lastLoginAt),this.creationTime=Rf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function E_(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Mf(n,v_(t,{idToken:r}));Ie(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fO(o.providerUserInfo):[],a=lH(n.providerData,s),c=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!a?.length,h=c?d:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Nf(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function QT(n){let e=pi(n);await E_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fO(n){return n.map(e=>{var{providerId:t}=e,r=Y0(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function uH(n,e){let t=await dO(n,{},async()=>{let r=Cf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await hO(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Vo(n.emulatorConfig.host)&&(c.credentials="include"),__.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dH(n,e){return Au(n,"POST","/v2/accounts:revokeToken",GT(n,e))}var Pf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let t=Kk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await uH(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ie(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return $o("not implemented")}};function ra(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ia=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Y0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Nf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await Mf(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WT(this,e)}reload(){return QT(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await E_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(xc(this.auth));let e=await this.getIdToken();return await Mf(this,aH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,d,h;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,V=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ee=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:le,isAnonymous:$e,providerData:Ee,stsTokenManager:b}=t;Ie(Y&&b,e,"internal-error");let y=Pf.fromJSON(this.name,b);Ie(typeof Y=="string",e,"internal-error"),ra(m,e.name),ra(w,e.name),Ie(typeof le=="boolean",e,"internal-error"),Ie(typeof $e=="boolean",e,"internal-error"),ra(S,e.name),ra(M,e.name),ra(k,e.name),ra(V,e.name),ra(q,e.name),ra(ee,e.name);let E=new n({uid:Y,auth:e,email:w,emailVerified:le,displayName:m,isAnonymous:$e,photoURL:M,phoneNumber:S,tenantId:k,stsTokenManager:y,createdAt:q,lastLoginAt:ee});return Ee&&Array.isArray(Ee)&&(E.providerData=Ee.map(I=>Object.assign({},I))),V&&(E._redirectEventId=V),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new Pf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await E_(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Ie(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Pf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Nf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,d),c}};var Qk=new Map;function zo(n){sa(n instanceof Function,"Expected a class definition");let e=Qk.get(n);return e?(sa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Qk.set(n,e),e)}var hH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),PT=hH;function p_(n,e,t){return`firebase:${n}:${e}:${t}`}var w_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=p_(this.userKey,i.apiKey,o),this.fullPersistenceKey=p_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await v_(this.auth,{idToken:e}).catch(()=>{});return t?ia._fromGetAccountInfoResponse(this.auth,t,e):null}return ia._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(zo(PT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),o=i[0]||zo(PT),s=p_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(s);if(h){let m;if(typeof h=="string"){let w=await v_(e,{idToken:h}).catch(()=>{});if(!w)break;m=await ia._fromGetAccountInfoResponse(e,w,h)}else m=ia._fromJSON(e,h);d!==o&&(a=m),o=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new n(o,e,r))}};function Yk(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vO(e))return"Blackberry";if(EO(e))return"Webos";if(mO(e))return"Safari";if((e.includes("chrome/")||gO(e))&&!e.includes("edge/"))return"Chrome";if(_O(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function pO(n=wn()){return/firefox\//i.test(n)}function mO(n=wn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gO(n=wn()){return/crios\//i.test(n)}function yO(n=wn()){return/iemobile/i.test(n)}function _O(n=wn()){return/android/i.test(n)}function vO(n=wn()){return/blackberry/i.test(n)}function EO(n=wn()){return/webos/i.test(n)}function YT(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fH(n=wn()){var e;return YT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pH(){return bk()&&document.documentMode===10}function wO(n=wn()){return YT(n)||_O(n)||EO(n)||vO(n)||/windows phone/i.test(n)||yO(n)}function bO(n,e=[]){let t;switch(n){case"Browser":t=Yk(wn());break;case"Worker":t=`${Yk(wn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ki}/${r}`}var MT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function mH(n,e={}){return Au(n,"GET","/v2/passwordPolicy",GT(n,e))}var gH=6,NT=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:gH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var kT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b_(this),this.idTokenSubscription=new b_(this),this.beforeStateQueue=new MT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zo(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await w_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await v_(this,{idToken:e}),r=await ia._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await E_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(xc(this));let t=e?pi(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(xc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(xc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await mH(this),t=new NT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await dH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&zo(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await w_.create(this,[zo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Zq(`Error while retrieving App Check token: ${t.error}`),t?.token}};function JT(n){return pi(n)}var b_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ck(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var XT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yH(n){XT=n}function _H(n){return XT.loadJS(n)}function vH(){return XT.gapiScript}function IO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ZT(n,e){let t=Zs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Gi(o,e??{}))return i;oa(i,"already-initialized")}return t.initialize({options:e})}function EH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function eC(n,e,t){let r=JT(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=TO(e),{host:s,port:a}=wH(e),c=a===null?"":`:${a}`,d={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Gi(d,r.config.emulator)&&Gi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Vo(s)?(Tu(`${o}//${s}${c}`),Cu("Auth",!0)):i||bH()}function TO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wH(n){let e=TO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Jk(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Jk(s)}}}function Jk(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var I_=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $o("not implemented")}_getIdTokenResponse(e){return $o("not implemented")}_linkToIdToken(e,t){return $o("not implemented")}_getReauthenticationResolver(e){return $o("not implemented")}};async function ST(n,e){return sH(n,"POST","/v1/accounts:signInWithIdp",GT(n,e))}var T_=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var OT=class extends T_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var kf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await ia._fromIdTokenResponse(e,r,i),s=Xk(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=Xk(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function Xk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var FT=class n extends jn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function CO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?FT._fromErrorAndOperation(n,o,e,r):o})}async function IH(n,e,t=!1){let r=await Mf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return kf._forOperation(n,"link",r)}async function TH(n,e,t=!1){let{auth:r}=n;if(Yn(r.app))return Promise.reject(xc(r));let i="reauthenticate";try{let o=await Mf(n,CO(r,i,e,n),t);Ie(o.idToken,r,"internal-error");let s=KT(o.idToken);Ie(s,r,"internal-error");let{sub:a}=s;return Ie(n.uid===a,r,"user-mismatch"),kf._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&oa(r,"user-mismatch"),o}}async function CH(n,e,t=!1){if(Yn(n.app))return Promise.reject(xc(n));let r="signIn",i=await CO(n,r,e),o=await kf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function tC(n,e,t,r){return pi(n).onIdTokenChanged(e,t,r)}function nC(n,e,t){return pi(n).beforeAuthStateChanged(e,t)}var C_="__sak";var S_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(C_,"1"),this.storage.removeItem(C_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var SH=1e3,DH=10,AH=(()=>{class n extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);pH()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,DH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},SH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),SO=AH;var xH=(()=>{class n extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),rC=xH;function RH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var PH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async h=>h(r.origin,s)),d=await RH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function DO(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var VT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let d=DO("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){let w=m;if(w.data.eventId===d)switch(w.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(w.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Ji(){return window}function MH(n){Ji().location.href=n}function AO(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function NH(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function OH(){return AO()?self:null}var xO="firebaseLocalStorageDb",FH=1,D_="firebaseLocalStorage",RO="fbase_key",Mc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function x_(n,e){return n.transaction([D_],e?"readwrite":"readonly").objectStore(D_)}function VH(){let n=indexedDB.deleteDatabase(xO);return new Mc(n).toPromise()}function LT(){let n=indexedDB.open(xO,FH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(D_,{keyPath:RO})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(D_)?e(r):(r.close(),await VH(),e(await LT()))})})}async function Zk(n,e,t){let r=x_(n,!0).put({[RO]:e,value:t});return new Mc(r).toPromise()}async function LH(n,e){let t=x_(n,!1).get(e),r=await new Mc(t).toPromise();return r===void 0?null:r.value}function eO(n,e){let t=x_(n,!0).delete(e);return new Mc(t).toPromise()}var UH=800,jH=3,BH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>jH)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=PH._getInstance(OH()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await NH(),!this.activeServiceWorker)return;this.sender=new VT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await LT();return await Zk(t,C_,"1"),await eO(t,C_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zk(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>LH(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>eO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=x_(o,!1).getAll();return new Mc(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),PO=BH;var dge=IO("rcb"),hge=new Pc(3e4,6e4);function $H(n,e){return e?zo(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Of=class extends I_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ST(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ST(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ST(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function zH(n){return CH(n.auth,new Of(n),n.bypassAuthState)}function qH(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),TH(t,new Of(n),n.bypassAuthState)}async function HH(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),IH(t,new Of(n),n.bypassAuthState)}var UT=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zH;case"linkViaPopup":case"linkViaRedirect":return HH;case"reauthViaPopup":case"reauthViaRedirect":return qH;default:oa(this.auth,"internal-error")}}resolve(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var fge=new Pc(2e3,1e4);var GH="pendingRedirect",m_=new Map,jT=class extends UT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=m_.get(this.auth._key());if(!e){try{let r=await WH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}m_.set(this.auth._key(),e)}return this.bypassAuthState||m_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function WH(n,e){let t=YH(e),r=QH(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function KH(n,e){m_.set(n._key(),e)}function QH(n){return zo(n._redirectPersistence)}function YH(n){return p_(GH,n.config.apiKey,n.name)}async function JH(n,e,t=!1){if(Yn(n.app))return Promise.reject(xc(n));let r=JT(n),i=$H(r,e),s=await new jT(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var XH=600*1e3,BT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!MO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Rc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XH&&this.cachedEventUids.clear(),this.cachedEventUids.has(tO(e))}saveEventToCache(e){this.cachedEventUids.add(tO(e)),this.lastProcessedEventTime=Date.now()}};function tO(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MO(n);default:return!1}}async function e8(n,e={}){return Au(n,"GET","/v1/projects",e)}var t8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n8=/^https?/;async function r8(n){if(n.config.emulator)return;let{authorizedDomains:e}=await e8(n);for(let t of e)try{if(i8(t))return}catch{}oa(n,"unauthorized-domain")}function i8(n){let e=AT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!n8.test(t))return!1;if(t8.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var o8=new Pc(3e4,6e4);function nO(){let n=Ji().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function s8(n){return new Promise((e,t)=>{var r,i,o;function s(){nO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nO(),t(Rc(n,"network-request-failed"))},timeout:o8.get()})}if(!((i=(r=Ji().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ji().gapi)===null||o===void 0)&&o.load)s();else{let a=IO("iframefcb");return Ji()[a]=()=>{gapi.load?s():t(Rc(n,"network-request-failed"))},_H(`${vH()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw g_=null,e})}var g_=null;function a8(n){return g_=g_||s8(n),g_}var c8=new Pc(5e3,15e3),l8="__/auth/iframe",u8="emulator/auth/iframe",d8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f8(n){let e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?HT(e,u8):`https://${n.config.authDomain}/${l8}`,r={apiKey:e.apiKey,appName:n.name,v:Ki},i=h8.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Cf(r).slice(1)}`}async function p8(n){let e=await a8(n),t=Ji().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:f8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d8,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Rc(n,"network-request-failed"),a=Ji().setTimeout(()=>{o(s)},c8.get());function c(){Ji().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var m8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g8=500,y8=600,_8="_blank",v8="http://localhost",A_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function E8(n,e,t,r=g8,i=y8){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},m8),{width:r.toString(),height:i.toString(),top:o,left:s}),d=wn().toLowerCase();t&&(a=gO(d)?_8:t),pO(d)&&(e=e||v8,c.scrollbars="yes");let h=Object.entries(c).reduce((w,[S,M])=>`${w}${S}=${M},`,"");if(fH(d)&&a!=="_self")return w8(e||"",a),new A_(null);let m=window.open(e||"",a,h);Ie(m,n,"popup-blocked");try{m.focus()}catch{}return new A_(m)}function w8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var b8="__/auth/handler",I8="emulator/auth/handler",T8=encodeURIComponent("fac");async function rO(n,e,t,r,i,o){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ki,eventId:i};if(e instanceof T_){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Tk(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(o||{}))s[h]=m}if(e instanceof OT){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${T8}=${encodeURIComponent(c)}`:"";return`${C8(n)}?${Cf(a).slice(1)}${d}`}function C8({config:n}){return n.emulator?HT(n,I8):`https://${n.authDomain}/${b8}`}var DT="webStorageSupport",$T=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rC,this._completeRedirectFn=JH,this._overrideRedirectResult=KH}async _openPopup(e,t,r,i){var o;sa((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await rO(e,t,r,AT(),i);return E8(e,s,DO())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await rO(e,t,r,AT(),i);return MH(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(sa(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await p8(e),r=new BT(e);return t.register("authEvent",i=>(Ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DT,{type:DT},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[DT];s!==void 0&&t(!!s),oa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wO()||mO()||YT()}},NO=$T;var iO="@firebase/auth",oO="1.10.8";var zT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function S8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D8(n){_r(new bn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ie(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bO(n)},d=new kT(r,i,o,c);return EH(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_r(new bn("auth-internal",e=>{let t=JT(e.getProvider("auth").getImmediate());return(r=>new zT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ht(iO,oO,S8(n)),ht(iO,oO,"esm2017")}var A8=300,x8=sT("authIdTokenMaxAge")||A8,sO=null,R8=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>x8)return;let i=t?.token;sO!==i&&(sO=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function iC(n=Uo()){let e=Zs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ZT(n,{popupRedirectResolver:NO,persistence:[PO,SO,rC]}),r=sT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=R8(o.toString());nC(t,s,()=>s(t.currentUser)),tC(t,a=>s(a))}}let i=iT("auth");return i&&eC(t,`http://${i}`),t}function P8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Rc("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",P8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D8("Browser");var kO="auth",Ff=class{constructor(e){return e}},Nc=class{constructor(){return ea(kO)}};var oC=new ie("angularfire2.auth-instances");function TG(n,e){let t=Ac(kO,n,e);return t&&new Ff(t)}function CG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ff(r)}}var SG={provide:Nc,deps:[[new an,oC]]},DG={provide:Ff,useFactory:TG,deps:[[new an,oC],mi]};function OO(n,...e){return ht("angularfire",Qi.full,"auth"),vn([DG,SG,{provide:oC,useFactory:CG(n),multi:!0,deps:[Qe,ct,Yi,Bo,[new an,na],...e]}])}var FO=jo(iC,!0);var VO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LO={};var qo,sC;(function(){var n;function e(b,y){function E(){}E.prototype=y.prototype,b.F=y.prototype,b.prototype=new E,b.prototype.constructor=b,b.D=function(I,T,R){for(var v=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)v[ut-2]=arguments[ut];return y.prototype[T].apply(I,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,y,E){E||(E=0);let I=Array(16);if(typeof y=="string")for(var T=0;T<16;++T)I[T]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(T=0;T<16;++T)I[T]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=b.g[0],E=b.g[1],T=b.g[2];let R=b.g[3],v;v=y+(R^E&(T^R))+I[0]+3614090360&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[1]+3905402710&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[3]+3250441966&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(R^E&(T^R))+I[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[5]+1200080426&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[7]+4249261313&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(R^E&(T^R))+I[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[9]+2336552879&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[11]+2304563134&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(R^E&(T^R))+I[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[13]+4254626195&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[15]+1236535329&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(T^R&(E^T))+I[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[6]+3225465664&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[0]+3921069994&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(T^R&(E^T))+I[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[10]+38016083&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[4]+3889429448&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(T^R&(E^T))+I[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[14]+3275163606&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[8]+1163531501&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(T^R&(E^T))+I[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[2]+4243563512&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[12]+2368359562&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(E^T^R)+I[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[8]+2272392833&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[14]+4259657740&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(E^T^R)+I[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[4]+1272893353&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[10]+3200236656&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(E^T^R)+I[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[0]+3936430074&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[6]+76029189&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(E^T^R)+I[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[12]+3873151461&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[2]+3299628645&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(T^(E|~R))+I[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[7]+1126891415&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[5]+4237533241&4294967295,E=T+(v<<21&4294967295|v>>>11),v=y+(T^(E|~R))+I[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[3]+2399980690&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[1]+2240044497&4294967295,E=T+(v<<21&4294967295|v>>>11),v=y+(T^(E|~R))+I[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[15]+4264355552&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[13]+1309151649&4294967295,E=T+(v<<21&4294967295|v>>>11),v=y+(T^(E|~R))+I[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[11]+3174756917&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.v=function(b,y){y===void 0&&(y=b.length);let E=y-this.blockSize,I=this.C,T=this.h,R=0;for(;R<y;){if(T==0)for(;R<=E;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<y;)if(I[T++]=b.charCodeAt(R++),T==this.blockSize){i(this,I),T=0;break}}else for(;R<y;)if(I[T++]=b[R++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=y},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;y=this.o*8;for(var E=b.length-8;E<b.length;++E)b[E]=y&255,y/=256;for(this.v(b),b=Array(16),y=0,E=0;E<4;++E)for(let I=0;I<32;I+=8)b[y++]=this.g[E]>>>I&255;return b};function o(b,y){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=y(b)}function s(b,y){this.h=y;let E=[],I=!0;for(let T=b.length-1;T>=0;T--){let R=b[T]|0;I&&R==y||(E[T]=R,I=!1)}this.g=E}var a={};function c(b){return-128<=b&&b<128?o(b,function(y){return new s([y|0],y<0?-1:0)}):new s([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return m;if(b<0)return V(d(-b));let y=[],E=1;for(let I=0;b>=E;I++)y[I]=b/E|0,E*=4294967296;return new s(y,0)}function h(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return V(h(b.substring(1),y));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(y,8)),I=m;for(let R=0;R<b.length;R+=8){var T=Math.min(8,b.length-R);let v=parseInt(b.substring(R,R+T),y);T<8?(T=d(Math.pow(y,T)),I=I.j(T).add(d(v))):(I=I.j(E),I=I.add(d(v)))}return I}var m=c(0),w=c(1),S=c(16777216);n=s.prototype,n.m=function(){if(k(this))return-V(this).m();let b=0,y=1;for(let E=0;E<this.g.length;E++){let I=this.i(E);b+=(I>=0?I:4294967296+I)*y,y*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(M(this))return"0";if(k(this))return"-"+V(this).toString(b);let y=d(Math.pow(b,6));var E=this;let I="";for(;;){let T=le(E,y).g;E=q(E,T.j(y));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(b);if(E=T,M(E))return R+I;for(;R.length<6;)R="0"+R;I=R+I}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function M(b){if(b.h!=0)return!1;for(let y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function k(b){return b.h==-1}n.l=function(b){return b=q(this,b),k(b)?-1:M(b)?0:1};function V(b){let y=b.g.length,E=[];for(let I=0;I<y;I++)E[I]=~b.g[I];return new s(E,~b.h).add(w)}n.abs=function(){return k(this)?V(this):this},n.add=function(b){let y=Math.max(this.g.length,b.g.length),E=[],I=0;for(let T=0;T<=y;T++){let R=I+(this.i(T)&65535)+(b.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);I=v>>>16,R&=65535,v&=65535,E[T]=v<<16|R}return new s(E,E[E.length-1]&-2147483648?-1:0)};function q(b,y){return b.add(V(y))}n.j=function(b){if(M(this)||M(b))return m;if(k(this))return k(b)?V(this).j(V(b)):V(V(this).j(b));if(k(b))return V(this.j(V(b)));if(this.l(S)<0&&b.l(S)<0)return d(this.m()*b.m());let y=this.g.length+b.g.length,E=[];for(var I=0;I<2*y;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(let T=0;T<b.g.length;T++){let R=this.i(I)>>>16,v=this.i(I)&65535,ut=b.i(T)>>>16,fn=b.i(T)&65535;E[2*I+2*T]+=v*fn,ee(E,2*I+2*T),E[2*I+2*T+1]+=R*fn,ee(E,2*I+2*T+1),E[2*I+2*T+1]+=v*ut,ee(E,2*I+2*T+1),E[2*I+2*T+2]+=R*ut,ee(E,2*I+2*T+2)}for(b=0;b<y;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=y;b<2*y;b++)E[b]=0;return new s(E,0)};function ee(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function Y(b,y){this.g=b,this.h=y}function le(b,y){if(M(y))throw Error("division by zero");if(M(b))return new Y(m,m);if(k(b))return y=le(V(b),y),new Y(V(y.g),V(y.h));if(k(y))return y=le(b,V(y)),new Y(V(y.g),y.h);if(b.g.length>30){if(k(b)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var E=w,I=y;I.l(b)<=0;)E=$e(E),I=$e(I);var T=Ee(E,1),R=Ee(I,1);for(I=Ee(I,2),E=Ee(E,2);!M(I);){var v=R.add(I);v.l(b)<=0&&(T=T.add(E),R=v),I=Ee(I,1),E=Ee(E,1)}return y=q(b,T.j(y)),new Y(T,y)}for(T=m;b.l(y)>=0;){for(E=Math.max(1,Math.floor(b.m()/y.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),R=d(E),v=R.j(y);k(v)||v.l(b)>0;)E-=I,R=d(E),v=R.j(y);M(R)&&(R=w),T=T.add(R),b=q(b,v)}return new Y(T,b)}n.B=function(b){return le(this,b).h},n.and=function(b){let y=Math.max(this.g.length,b.g.length),E=[];for(let I=0;I<y;I++)E[I]=this.i(I)&b.i(I);return new s(E,this.h&b.h)},n.or=function(b){let y=Math.max(this.g.length,b.g.length),E=[];for(let I=0;I<y;I++)E[I]=this.i(I)|b.i(I);return new s(E,this.h|b.h)},n.xor=function(b){let y=Math.max(this.g.length,b.g.length),E=[];for(let I=0;I<y;I++)E[I]=this.i(I)^b.i(I);return new s(E,this.h^b.h)};function $e(b){let y=b.g.length+1,E=[];for(let I=0;I<y;I++)E[I]=b.i(I)<<1|b.i(I-1)>>>31;return new s(E,b.h)}function Ee(b,y){let E=y>>5;y%=32;let I=b.g.length-E,T=[];for(let R=0;R<I;R++)T[R]=y>0?b.i(R+E)>>>y|b.i(R+E+1)<<32-y:b.i(R+E);return new s(T,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sC=LO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,qo=LO.Integer=s}).apply(typeof VO<"u"?VO:typeof self<"u"?self:typeof window<"u"?window:{});var R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={};var aC,AG,xu,cC,Vf,P_,lC,uC,dC;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof R_=="object"&&R_];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(u,p){if(p)e:{var _=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var O=u[x];if(!(O in _))break e;_=_[O]}u=u[u.length-1],x=_[u],p=p(x),p!=x&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(p){var _=[],x;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&_.push([x,p[x]]);return _}});var o=o||{},s=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,_){return u.call.apply(u.bind,arguments)}function d(u,p,_){return d=c,d.apply(null,arguments)}function h(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function m(u,p){function _(){}_.prototype=p.prototype,u.Z=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(x,O,U){for(var J=Array(arguments.length-2),we=2;we<arguments.length;we++)J[we-2]=arguments[we];return p.prototype[O].apply(x,J)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function S(u){let p=u.length;if(p>0){let _=Array(p);for(let x=0;x<p;x++)_[x]=u[x];return _}return[]}function M(u,p){for(let x=1;x<arguments.length;x++){let O=arguments[x];var _=typeof O;if(_=_!="object"?_:O?Array.isArray(O)?"array":_:"null",_=="array"||_=="object"&&typeof O.length=="number"){_=u.length||0;let U=O.length||0;u.length=_+U;for(let J=0;J<U;J++)u[_+J]=O[J]}else u.push(O)}}class k{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function V(u){s.setTimeout(()=>{throw u},0)}function q(){var u=b;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,_){let x=Y.get();x.set(p,_),this.h?this.h.next=x:this.g=x,this.h=x}}var Y=new k(()=>new le,u=>u.reset());class le{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,Ee=!1,b=new ee,y=()=>{let u=Promise.resolve(void 0);$e=()=>{u.then(E)}};function E(){for(var u;u=q();){try{u.h.call(u.g)}catch(_){V(_)}var p=Y;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}Ee=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let _=()=>{};s.addEventListener("test",_,p),s.removeEventListener("test",_,p)}catch{}return u})();function v(u){return/^[\s\xa0]*$/.test(u)}function ut(u,p){T.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}m(ut,T),ut.prototype.init=function(u,p){let _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(_=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ut.Z.h.call(this)},ut.prototype.h=function(){ut.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fn="closure_listenable_"+(Math.random()*1e6|0),se=0;function ae(u,p,_,x,O){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!x,this.ha=O,this.key=++se,this.da=this.fa=!1}function ce(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pe(u,p,_){for(let x in u)p.call(_,u[x],x,u)}function Tt(u,p){for(let _ in u)p.call(void 0,u[_],_,u)}function kn(u){let p={};for(let _ in u)p[_]=u[_];return p}let gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(u,p){let _,x;for(let O=1;O<arguments.length;O++){x=arguments[O];for(_ in x)u[_]=x[_];for(let U=0;U<gt.length;U++)_=gt[U],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function Ze(u){this.src=u,this.g={},this.h=0}Ze.prototype.add=function(u,p,_,x,O){let U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);let J=pa(u,p,x,O);return J>-1?(p=u[J],_||(p.fa=!1)):(p=new ae(p,this.src,U,!!x,O),p.fa=_,u.push(p)),p};function Er(u,p){let _=p.type;if(_ in u.g){var x=u.g[_],O=Array.prototype.indexOf.call(x,p,void 0),U;(U=O>=0)&&Array.prototype.splice.call(x,O,1),U&&(ce(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function pa(u,p,_,x){for(let O=0;O<u.length;++O){let U=u[O];if(!U.da&&U.listener==p&&U.capture==!!_&&U.ha==x)return O}return-1}var ft="closure_lm_"+(Math.random()*1e6|0),tr={};function pn(u,p,_,x,O){if(x&&x.once)return ol(u,p,_,x,O);if(Array.isArray(p)){for(let U=0;U<p.length;U++)pn(u,p[U],_,x,O);return null}return _=ll(_),u&&u[fn]?u.J(p,_,a(x)?!!x.capture:!!x,O):wr(u,p,_,!1,x,O)}function wr(u,p,_,x,O,U){if(!p)throw Error("Invalid event type");let J=a(O)?!!O.capture:!!O,we=cl(u);if(we||(u[ft]=we=new Ze(u)),_=we.add(p,_,x,J,U),_.proxy)return _;if(x=bi(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)R||(O=J),O===void 0&&(O=!1),u.addEventListener(p.toString(),x,O);else if(u.attachEvent)u.attachEvent(al(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function bi(){function u(_){return p.call(u.src,u.listener,_)}let p=Ap;return u}function ol(u,p,_,x,O){if(Array.isArray(p)){for(let U=0;U<p.length;U++)ol(u,p[U],_,x,O);return null}return _=ll(_),u&&u[fn]?u.K(p,_,a(x)?!!x.capture:!!x,O):wr(u,p,_,!0,x,O)}function sl(u,p,_,x,O){if(Array.isArray(p))for(var U=0;U<p.length;U++)sl(u,p[U],_,x,O);else x=a(x)?!!x.capture:!!x,_=ll(_),u&&u[fn]?(u=u.i,U=String(p).toString(),U in u.g&&(p=u.g[U],_=pa(p,_,x,O),_>-1&&(ce(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete u.g[U],u.h--)))):u&&(u=cl(u))&&(p=u.g[p.toString()],u=-1,p&&(u=pa(p,_,x,O)),(_=u>-1?p[u]:null)&&ma(_))}function ma(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[fn])Er(p.i,u);else{var _=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(_,x,u.capture):p.detachEvent?p.detachEvent(al(_),x):p.addListener&&p.removeListener&&p.removeListener(x),(_=cl(p))?(Er(_,u),_.h==0&&(_.src=null,p[ft]=null)):ce(u)}}}function al(u){return u in tr?tr[u]:tr[u]="on"+u}function Ap(u,p){if(u.da)u=!0;else{p=new ut(p,this);let _=u.listener,x=u.ha||u.src;u.fa&&ma(u),u=_.call(x,p)}return u}function cl(u){return u=u[ft],u instanceof Ze?u:null}var vd="__closure_events_fn_"+(Math.random()*1e9>>>0);function ll(u){return typeof u=="function"?u:(u[vd]||(u[vd]=function(p){return u.handleEvent(p)}),u[vd])}function Xt(){I.call(this),this.i=new Ze(this),this.M=this,this.G=null}m(Xt,I),Xt.prototype[fn]=!0,Xt.prototype.removeEventListener=function(u,p,_,x){sl(this,u,p,_,x)};function Zt(u,p){var _,x=u.G;if(x)for(_=[];x;x=x.G)_.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new T(p,u);else if(p instanceof T)p.target=p.target||u;else{var O=p;p=new T(x,u),ot(p,O)}O=!0;let U,J;if(_)for(J=_.length-1;J>=0;J--)U=p.g=_[J],O=ga(U,x,!0,p)&&O;if(U=p.g=u,O=ga(U,x,!0,p)&&O,O=ga(U,x,!1,p)&&O,_)for(J=0;J<_.length;J++)U=p.g=_[J],O=ga(U,x,!1,p)&&O}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var u=this.i;for(let p in u.g){let _=u.g[p];for(let x=0;x<_.length;x++)ce(_[x]);delete u.g[p],u.h--}}this.G=null},Xt.prototype.J=function(u,p,_,x){return this.i.add(String(u),p,!1,_,x)},Xt.prototype.K=function(u,p,_,x){return this.i.add(String(u),p,!0,_,x)};function ga(u,p,_,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let U=0;U<p.length;++U){let J=p[U];if(J&&!J.da&&J.capture==_){let we=J.listener,l=J.ha||J.src;J.fa&&Er(u.i,J),O=we.call(l,x)!==!1&&O}}return O&&!x.defaultPrevented}function v0(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:s.setTimeout(u,p||0)}function ul(u){u.g=v0(()=>{u.g=null,u.i&&(u.i=!1,ul(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class Ed extends I{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function co(u){I.call(this),this.h=u,this.g={}}m(co,I);var en=[];function rn(u){Pe(u.g,function(p,_){this.g.hasOwnProperty(_)&&ma(p)},u),u.g={}}co.prototype.N=function(){co.Z.N.call(this),rn(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=s.JSON.stringify,xp=s.JSON.parse,Rp=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function Pp(){}function as(){}var cs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dl(){T.call(this,"d")}m(dl,T);function ya(){T.call(this,"c")}m(ya,T);var lo={},Mp=null;function ls(){return Mp=Mp||new Xt}lo.Ia="serverreachability";function wd(u){T.call(this,lo.Ia,u)}m(wd,T);function us(u){let p=ls();Zt(p,new wd(p))}lo.STAT_EVENT="statevent";function ds(u,p){T.call(this,lo.STAT_EVENT,u),this.stat=p}m(ds,T);function tn(u){let p=ls();Zt(p,new ds(p,u))}lo.Ja="timingevent";function hl(u,p){T.call(this,lo.Ja,u),this.size=p}m(hl,T);function nr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},p)}function hs(){this.g=!0}hs.prototype.ua=function(){this.g=!1};function fl(u,p,_,x,O,U){u.info(function(){if(u.g)if(U){var J="",we=U.split("&");for(let f=0;f<we.length;f++){var l=we[f].split("=");if(l.length>1){let g=l[0];l=l[1];let D=g.split("_");J=D.length>=2&&D[1]=="type"?J+(g+"="+l+"&"):J+(g+"=redacted&")}}}else J=null;else J=U;return"XMLHTTP REQ ("+x+") [attempt "+O+"]: "+p+`
`+_+`
`+J})}function Np(u,p,_,x,O,U,J){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+O+"]: "+p+`
`+_+`
`+U+" "+J})}function br(u,p,_,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+mn(u,_)+(x?" "+x:"")})}function kp(u,p){u.info(function(){return"TIMEOUT: "+p})}hs.prototype.info=function(){};function mn(u,p){if(!u.g)return p;if(!p)return null;try{let U=JSON.parse(p);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var _=U[u];if(!(_.length<2)){var x=_[1];if(Array.isArray(x)&&!(x.length<1)){var O=x[0];if(O!="noop"&&O!="stop"&&O!="close")for(let J=1;J<x.length;J++)x[J]=""}}}}return ss(U)}catch{return p}}var _a={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ps;function bd(){}m(bd,Pp),bd.prototype.g=function(){return new XMLHttpRequest},ps=new bd;function va(u){return encodeURIComponent(String(u))}function ms(u){var p=1;u=u.split(":");let _=[];for(;p>0&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function Ii(u,p,_,x){this.j=u,this.i=p,this.l=_,this.S=x||1,this.V=new co(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Op}function Op(){this.i=null,this.g="",this.h=!1}var Ea={},pl={};function wa(u,p,_){u.M=1,u.A=Ca(rr(p)),u.u=_,u.R=!0,ba(u,null)}function ba(u,p){u.F=Date.now(),gs(u),u.B=rr(u.A);var _=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),Bp(_.i,"t",x),u.C=0,_=u.j.L,u.h=new Op,u.g=Dl(u.j,_?p:null,!u.u),u.P>0&&(u.O=new Ed(d(u.Y,u,u.g),u.P)),p=u.V,_=u.g,x=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(en[0]=O.toString()),O=en);for(let U=0;U<O.length;U++){let J=pn(_,O[U],x||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.J?kn(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),us(),fl(u.i,u.v,u.B,u.l,u.S,u.u)}Ii.prototype.ba=function(u){u=u.target;let p=this.O;p&&We(u)==3?p.j():this.Y(u)},Ii.prototype.Y=function(u){try{if(u==this.g)e:{let we=We(this.g),l=this.g.ya(),f=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Kp(this.g)))){this.K||we!=4||l==7||(l==8||f<=0?us(3):us(2)),gl(this);var p=this.g.ca();this.X=p;var _=Ti(this);if(this.o=p==200,Np(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var x,O=this.g;if((x=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(x)){var U=x;break t}}U=null}if(u=U)br(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_s(this,u);else{this.o=!1,this.m=3,tn(12),uo(this),ys(this);break e}}if(this.R){u=!0;let g;for(;!this.K&&this.C<_.length;)if(g=Fp(this,_),g==pl){we==4&&(this.m=4,tn(14),u=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(g==Ea){this.m=4,tn(15),br(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else br(this.i,this.l,g,null),_s(this,g);if(Id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||_.length!=0||this.h.h||(this.m=1,tn(16),u=!1),this.o=this.o&&u,!u)br(this.i,this.l,_,"[Invalid Chunked Response]"),uo(this),ys(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Tl(J),J.P=!0,tn(11))}}else br(this.i,this.l,_,null),_s(this,_);we==4&&uo(this),this.o&&!this.K&&(we==4?Fd(this.j,this):(this.o=!1,gs(this)))}else E0(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,tn(12)):(this.m=0,tn(13)),uo(this),ys(this)}}}catch{}};function Ti(u){if(!Id(u))return u.g.la();let p=Kp(u.g);if(p==="")return"";let _="",x=p.length,O=We(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return uo(u),ys(u),"";u.h.i=new s.TextDecoder}for(let U=0;U<x;U++)u.h.h=!0,_+=u.h.i.decode(p[U],{stream:!(O&&U==x-1)});return p.length=0,u.h.g+=_,u.C=0,u.h.g}function Id(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Fp(u,p){var _=u.C,x=p.indexOf(`
`,_);return x==-1?pl:(_=Number(p.substring(_,x)),isNaN(_)?Ea:(x+=1,x+_>p.length?pl:(p=p.slice(x,x+_),u.C=x+_,p)))}Ii.prototype.cancel=function(){this.K=!0,uo(this)};function gs(u){u.T=Date.now()+u.H,ml(u,u.H)}function ml(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=nr(d(u.aa,u),p)}function gl(u){u.D&&(s.clearTimeout(u.D),u.D=null)}Ii.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(kp(this.i,this.B),this.M!=2&&(us(),tn(17)),uo(this),this.m=2,ys(this)):ml(this,this.T-u)};function ys(u){u.j.I==0||u.K||Fd(u.j,u)}function uo(u){gl(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,rn(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function _s(u,p){try{var _=u.j;if(_.I!=0&&(_.g==u||Ia(_.h,u))){if(!u.L&&Ia(_.h,u)&&_.I==3){try{var x=_.Ba.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var O=x;if(O[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Cl(_),ho(_);else break e;Ss(_),tn(18)}}else _.xa=O[1],0<_.xa-_.K&&O[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=nr(d(_.Va,_),6e3));Ci(_.h)<=1&&_.ta&&(_.ta=void 0)}else Di(_,11)}else if((u.L||_.g==u)&&Cl(_),!v(p))for(O=_.Ba.g.parse(p),p=0;p<O.length;p++){let f=O[p],g=f[0];if(!(g<=_.K))if(_.K=g,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let D=f[3];D!=null&&(_.ka=D,_.j.info("VER="+_.ka));let F=f[4];F!=null&&(_.za=F,_.j.info("SVER="+_.za));let j=f[5];j!=null&&typeof j=="number"&&j>0&&(x=1.5*j,_.O=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;let Q=u.g;if(Q){let qe=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qe){var U=x.h;U.g||qe.indexOf("spdy")==-1&&qe.indexOf("quic")==-1&&qe.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Td(U,U.h),U.h=null))}if(x.G){let kt=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;kt&&(x.wa=kt,st(x.J,x.G,kt))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),x=_;var J=u;if(x.na=Sl(x,x.L?x.ba:null,x.W),J.L){Cd(x.h,J);var we=J,l=x.O;l&&(we.H=l),we.D&&(gl(we),gs(we)),x.g=J}else Il(x);_.i.length>0&&$n(_)}else f[0]!="stop"&&f[0]!="close"||Di(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Di(_,7):bl(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}us(4)}catch{}}var Vp=class{constructor(u,p){this.g=u,this.map=p}};function yl(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ci(u){return u.h?1:u.g?u.g.size:0}function Ia(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Td(u,p){u.g?u.g.add(p):u.h=p}function Cd(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}yl.prototype.cancel=function(){if(this.i=Sd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Sd(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let _ of u.g.values())p=p.concat(_.G);return p}return S(u.i)}var Dd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ad(u,p){if(u){u=u.split("&");for(let _=0;_<u.length;_++){let x=u[_].indexOf("="),O,U=null;x>=0?(O=u[_].substring(0,x),U=u[_].substring(x+1)):O=u[_],p(O,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ir(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Ir?(this.l=u.l,Es(this,u.j),this.o=u.o,this.g=u.g,Ta(this,u.u),this.h=u.h,xd(this,$p(u.i)),this.m=u.m):u&&(p=String(u).match(Dd))?(this.l=!1,Es(this,p[1]||"",!0),this.o=Sa(p[2]||""),this.g=Sa(p[3]||"",!0),Ta(this,p[4]),this.h=Sa(p[5]||"",!0),xd(this,p[6]||"",!0),this.m=Sa(p[7]||"")):(this.l=!1,this.i=new zr(null,this.l))}Ir.prototype.toString=function(){let u=[];var p=this.j;p&&u.push(ir(p,Da,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ir(p,Da,!0),"@"),u.push(va(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ir(_,_.charAt(0)=="/"?Lp:_l,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ir(_,vl)),u.join("")},Ir.prototype.resolve=function(u){let p=rr(this),_=!!u.j;_?Es(p,u.j):_=!!u.o,_?p.o=u.o:_=!!u.g,_?p.g=u.g:_=u.u!=null;var x=u.h;if(_)Ta(p,u.u);else if(_=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var O=p.h.lastIndexOf("/");O!=-1&&(x=p.h.slice(0,O+1)+x)}if(O=x,O==".."||O==".")x="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){x=O.lastIndexOf("/",0)==0,O=O.split("/");let U=[];for(let J=0;J<O.length;){let we=O[J++];we=="."?x&&J==O.length&&U.push(""):we==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),x&&J==O.length&&U.push("")):(U.push(we),x=!0)}x=U.join("/")}else x=O}return _?p.h=x:_=u.i.toString()!=="",_?xd(p,$p(u.i)):_=!!u.m,_&&(p.m=u.m),p};function rr(u){return new Ir(u)}function Es(u,p,_){u.j=_?Sa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ta(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function xd(u,p,_){p instanceof zr?(u.i=p,Aa(u.i,u.l)):(_||(p=ir(p,dt)),u.i=new zr(p,u.l))}function st(u,p,_){u.i.set(p,_)}function Ca(u){return st(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Sa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ir(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,$r),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $r(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Da=/[#\/\?@]/g,_l=/[#\?:]/g,Lp=/[#\?]/g,dt=/[#\?@]/g,vl=/#/g;function zr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function or(u){u.g||(u.g=new Map,u.h=0,u.i&&Ad(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=zr.prototype,n.add=function(u,p){or(this),this.i=null,u=ws(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Up(u,p){or(u),p=ws(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Rd(u,p){return or(u),p=ws(u,p),u.g.has(p)}n.forEach=function(u,p){or(this),this.g.forEach(function(_,x){_.forEach(function(O){u.call(p,O,x,this)},this)},this)};function jp(u,p){or(u);let _=[];if(typeof p=="string")Rd(u,p)&&(_=_.concat(u.g.get(ws(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)_=_.concat(u[p]);return _}n.set=function(u,p){return or(this),this.i=null,u=ws(this,u),Rd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=jp(this,u),u.length>0?String(u[0]):p):p};function Bp(u,p,_){Up(u,p),_.length>0&&(u.i=null,u.g.set(ws(u,p),S(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(let x=0;x<p.length;x++){var _=p[x];let O=va(_);_=jp(this,_);for(let U=0;U<_.length;U++){let J=O;_[U]!==""&&(J+="="+va(_[U])),u.push(J)}}return this.i=u.join("&")};function $p(u){let p=new zr;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function ws(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Aa(u,p){p&&!u.j&&(or(u),u.i=null,u.g.forEach(function(_,x){let O=x.toLowerCase();x!=O&&(Up(this,x),Bp(this,O,_))},u)),u.j=p}function Si(u,p){let _=new hs;if(s.Image){let x=new Image;x.onload=h(qr,_,"TestLoadImage: loaded",!0,p,x),x.onerror=h(qr,_,"TestLoadImage: error",!1,p,x),x.onabort=h(qr,_,"TestLoadImage: abort",!1,p,x),x.ontimeout=h(qr,_,"TestLoadImage: timeout",!1,p,x),s.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function zp(u,p){let _=new hs,x=new AbortController,O=setTimeout(()=>{x.abort(),qr(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(U=>{clearTimeout(O),U.ok?qr(_,"TestPingServer: ok",!0,p):qr(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),qr(_,"TestPingServer: error",!1,p)})}function qr(u,p,_,x,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),x(_)}catch{}}function qp(){this.g=new Rp}function Hr(u){this.i=u.Sb||null,this.h=u.ab||!1}m(Hr,Pp),Hr.prototype.g=function(){return new El(this.i,this.h)};function El(u,p){Xt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(El,Xt),n=El.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Bn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||s).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hp(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hp(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?xa(this):Bn(this),this.readyState==3&&Hp(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,xa(this))},n.Na=function(u){this.g&&(this.response=u,xa(this))},n.ga=function(){this.g&&xa(this)};function xa(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Bn(u)}n.setRequestHeader=function(u,p){this.A.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Bn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Gp(u){let p="";return Pe(u,function(_,x){p+=x,p+=":",p+=_,p+=`\r
`}),p}function Pd(u,p,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=Gp(_),typeof u=="string"?_!=null&&va(_):st(u,p,_))}function at(u){Xt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(at,Xt);var wl=/^https?$/i,Wp=["POST","PUT"];n=at.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,p,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ps.g(),this.g.onreadystatechange=w(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){bs(this,U);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var O in x)_.set(O,x[O]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(let U of x.keys())_.set(U,x.get(U));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),O=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(Wp,p,void 0)>=0)||x||O||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,J]of _)this.g.setRequestHeader(U,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){bs(this,U)}};function bs(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Is(u),Ts(u)}function Is(u){u.A||(u.A=!0,Zt(u,"complete"),Zt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Zt(this,"complete"),Zt(this,"abort"),Ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Md(this):this.Xa())},n.Xa=function(){Md(this)};function Md(u){if(u.h&&typeof o<"u"){if(u.v&&We(u)==4)setTimeout(u.Ca.bind(u),0);else if(Zt(u,"readystatechange"),We(u)==4){u.h=!1;try{let U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var x;if(x=U===0){let J=String(u.D).match(Dd)[1]||null;!J&&s.self&&s.self.location&&(J=s.self.location.protocol.slice(0,-1)),x=!wl.test(J?J.toLowerCase():"")}_=x}if(_)Zt(u,"complete"),Zt(u,"success");else{u.o=6;try{var O=We(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",Is(u)}}finally{Ts(u)}}}}function Ts(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let _=u.g;u.g=null,p||Zt(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function We(u){return u.g?u.g.readyState:0}n.ca=function(){try{return We(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),xp(p)}};function Kp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function E0(u){let p={};u=(u.g&&We(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(v(u[x]))continue;var _=ms(u[x]);let O=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let U=p[O]||[];p[O]=U,U.push(_)}Tt(p,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Nd(u){this.za=0,this.i=[],this.j=new hs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cs("baseRetryDelayMs",5e3,u),this.Za=Cs("retryDelaySeedMs",1e4,u),this.Ta=Cs("forwardChannelMaxRetries",2,u),this.va=Cs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new yl(u&&u.concurrentRequestLimit),this.Ba=new qp,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Nd.prototype,n.ka=8,n.I=1,n.connect=function(u,p,_,x){tn(0),this.W=u,this.H=p||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.J=Sl(this,null,this.W),$n(this)};function bl(u){if(kd(u),u.I==3){var p=u.V++,_=rr(u.J);if(st(_,"SID",u.M),st(_,"RID",p),st(_,"TYPE","terminate"),Gr(u,_),p=new Ii(u,u.j,p),p.M=2,p.A=Ca(rr(_)),_=!1,s.navigator&&s.navigator.sendBeacon)try{_=s.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&s.Image&&(new Image().src=p.A,_=!0),_||(p.g=Dl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),gs(p)}Vd(u)}function ho(u){u.g&&(Tl(u),u.g.cancel(),u.g=null)}function kd(u){ho(u),u.v&&(s.clearTimeout(u.v),u.v=null),Cl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function $n(u){if(!vs(u.h)&&!u.m){u.m=!0;var p=u.Ea;$e||y(),Ee||($e(),Ee=!0),b.add(p,u),u.D=0}}function Qp(u,p){return Ci(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=nr(d(u.Ea,u,p),Ds(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let O=new Ii(this,this.j,u),U=this.o;if(this.U&&(U?(U=kn(U),ot(U,this.U)):U=this.U),this.u!==null||this.R||(O.J=U,U=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Od(this,O,p),_=rr(this.J),st(_,"RID",u),st(_,"CVER",22),this.G&&st(_,"X-HTTP-Session-Id",this.G),Gr(this,_),U&&(this.R?p="headers="+va(Gp(U))+"&"+p:this.u&&Pd(_,this.u,U)),Td(this.h,O),this.Ra&&st(_,"TYPE","init"),this.S?(st(_,"$req",p),st(_,"SID","null"),O.U=!0,wa(O,_,null)):wa(O,_,p),this.I=2}}else this.I==3&&(u?Yp(this,u):this.i.length==0||vs(this.h)||Yp(this))};function Yp(u,p){var _;p?_=p.l:_=u.V++;let x=rr(u.J);st(x,"SID",u.M),st(x,"RID",_),st(x,"AID",u.K),Gr(u,x),u.u&&u.o&&Pd(x,u.u,u.o),_=new Ii(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Od(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Td(u.h,_),wa(_,x,p)}function Gr(u,p){u.H&&Pe(u.H,function(_,x){st(p,x,_)}),u.l&&Pe({},function(_,x){st(p,x,_)})}function Od(u,p,_){_=Math.min(u.i.length,_);let x=u.l?d(u.l.Ka,u.l,u):null;e:{var O=u.i;let we=-1;for(;;){let l=["count="+_];we==-1?_>0?(we=O[0].g,l.push("ofs="+we)):we=0:l.push("ofs="+we);let f=!0;for(let g=0;g<_;g++){var U=O[g].g;let D=O[g].map;if(U-=we,U<0)we=Math.max(0,O[g].g-100),f=!1;else try{U="req"+U+"_"||"";try{var J=D instanceof Map?D:Object.entries(D);for(let[F,j]of J){let Q=j;a(j)&&(Q=ss(j)),l.push(U+F+"="+encodeURIComponent(Q))}}catch(F){throw l.push(U+"type="+encodeURIComponent("_badmap")),F}}catch{x&&x(D)}}if(f){J=l.join("&");break e}}J=void 0}return u=u.i.splice(0,_),p.G=u,J}function Il(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;$e||y(),Ee||($e(),Ee=!0),b.add(p,u),u.A=0}}function Ss(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=nr(d(u.Da,u),Ds(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Ra(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=nr(d(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tn(10),ho(this),Ra(this))};function Tl(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function Ra(u){u.g=new Ii(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=rr(u.na);st(p,"RID","rpc"),st(p,"SID",u.M),st(p,"AID",u.K),st(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&st(p,"TO",u.ia),st(p,"TYPE","xmlhttp"),Gr(u,p),u.u&&u.o&&Pd(p,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ca(rr(p)),_.u=null,_.R=!0,ba(_,u)}n.Va=function(){this.C!=null&&(this.C=null,ho(this),Ss(this),tn(19))};function Cl(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function Fd(u,p){var _=null;if(u.g==p){Cl(u),Tl(u),u.g=null;var x=2}else if(Ia(u.h,p))_=p.G,Cd(u.h,p),x=1;else return;if(u.I!=0){if(p.o)if(x==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var O=u.D;x=ls(),Zt(x,new hl(x,_)),$n(u)}else Il(u);else if(O=p.m,O==3||O==0&&p.X>0||!(x==1&&Qp(u,p)||x==2&&Ss(u)))switch(_&&_.length>0&&(p=u.h,p.i=p.i.concat(_)),O){case 1:Di(u,5);break;case 4:Di(u,10);break;case 3:Di(u,6);break;default:Di(u,2)}}}function Ds(u,p){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*p}function Di(u,p){if(u.j.info("Error code "+p),p==2){var _=d(u.bb,u),x=u.Ua;let O=!x;x=new Ir(x||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Es(x,"https"),Ca(x),O?Si(x.toString(),_):zp(x.toString(),_)}else tn(2);u.I=0,u.l&&u.l.pa(p),Vd(u),kd(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Vd(u){if(u.I=0,u.ja=[],u.l){let p=Sd(u.h);(p.length!=0||u.i.length!=0)&&(M(u.ja,p),M(u.ja,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.oa()}}function Sl(u,p,_){var x=_ instanceof Ir?rr(_):new Ir(_);if(x.g!="")p&&(x.g=p+"."+x.g),Ta(x,x.u);else{var O=s.location;x=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;let U=new Ir(null);x&&Es(U,x),p&&(U.g=p),O&&Ta(U,O),_&&(U.h=_),x=U}return _=u.G,p=u.wa,_&&p&&st(x,_,p),st(x,"VER",u.ka),Gr(u,x),x}function Dl(u,p,_){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new at(new Hr({ab:_})):new at(u.ma),p.Fa(u.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ld(){}n=Ld.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fo(){}fo.prototype.g=function(u,p){return new Cn(u,p)};function Cn(u,p){Xt.call(this),this.g=new Nd(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!v(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new po(this)}m(Cn,Xt),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){bl(this.g)},Cn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=ss(u),u=_);p.i.push(new Vp(p.Ya++,u)),p.I==3&&$n(p)},Cn.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,Cn.Z.N.call(this)};function Ud(u){dl.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}m(Ud,dl);function Ai(){ya.call(this),this.status=1}m(Ai,ya);function po(u){this.g=u}m(po,Ld),po.prototype.ra=function(){Zt(this.g,"a")},po.prototype.qa=function(u){Zt(this.g,new Ud(u))},po.prototype.pa=function(u){Zt(this.g,new Ai)},po.prototype.oa=function(){Zt(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,dC=Ho.createWebChannelTransport=function(){return new fo},uC=Ho.getStatEventTarget=function(){return ls()},lC=Ho.Event=lo,P_=Ho.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,Vf=Ho.ErrorCode=_a,fs.COMPLETE="complete",cC=Ho.EventType=fs,as.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,xu=Ho.WebChannel=as,AG=Ho.FetchXmlHttpFactory=Hr,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,aC=Ho.XhrIo=at}).apply(typeof R_<"u"?R_:typeof self<"u"?self:typeof window<"u"?window:{});var dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");var Qu="12.8.0";function TF(n){Qu=n}var Fc=new wA("@firebase/firestore");function Ru(){return Fc.logLevel}function oe(n,...e){if(Fc.logLevel<=xi.DEBUG){let t=e.map(BS);Fc.debug(`Firestore (${Qu}): ${n}`,...t)}}function Ko(n,...e){if(Fc.logLevel<=xi.ERROR){let t=e.map(BS);Fc.error(`Firestore (${Qu}): ${n}`,...t)}}function aa(n,...e){if(Fc.logLevel<=xi.WARN){let t=e.map(BS);Fc.warn(`Firestore (${Qu}): ${n}`,...t)}}function BS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function _e(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,CF(n,r,t)}function CF(n,e,t){let r=`FIRESTORE (${Qu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ko(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||CF(e,i,r)}function Ae(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends vA{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var yi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var L_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},U_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}},yC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},j_=class{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new yi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new yi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new L_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new dn(e)}},_C=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},vC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _C(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},B_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,TA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);let r=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new B_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function xG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Vc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=xG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Fe(n,e){return n<e?-1:n>e?1:0}function EC(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return hC(i)===hC(o)?Fe(i,o):hC(i)?1:-1}return Fe(n.length,e.length)}var RG=55296,PG=57343;function hC(n){let e=n.charCodeAt(0);return e>=RG&&e<=PG}function Vu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var UO="__name__",z_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Fe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):EC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qo.fromString(e.substring(4,e.length-2))}},_t=class n extends z_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new te(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},MG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xn=class n extends z_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return MG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UO}static keyField(){return new n([UO])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new te(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(_t.fromString(e))}static fromName(e){return new n(_t.fromString(e).popFirst(5))}static empty(){return new n(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _t(e.slice()))}};function SF(n,e,t){if(!t)throw new te(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DF(n,e,t,r){if(e===!0&&r===!0)throw new te(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jO(n){if(!fe.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BO(n){if(fe.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function np(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=np(n);throw new te(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Yu(n,e){if(!AF(n))throw new te(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new te(H.INVALID_ARGUMENT,t);return!0}var $O=-62135596800,zO=1e6,Bt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*zO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$O)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zO}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-$O;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:jt("string",Bt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};var Re=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Bt(0,0))}static max(){return new n(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var zf=-1,q_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};q_.UNKNOWN_ID=-1;function NG(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new Bt(t+1,0):new Bt(t,r));return new Lc(i,fe.empty(),e)}function kG(n){return new Lc(n.readTime,n.key,zf)}var Lc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Re.min(),fe.empty(),zf)}static max(){return new n(Re.max(),fe.empty(),zf)}};function OG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}var FG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Ju(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==FG)throw n;oe("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let d=c;t(e[d]).next(h=>{s[d]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function VG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xu(n){return n.name==="IndexedDbTransactionError"}var $S=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),zS=-1;function Ev(n){return n==null}function qf(n){return n===0&&1/n==-1/0}function LG(n){return typeof n=="number"&&Number.isInteger(n)&&!qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var xF="";function UG(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qO(e)),e=jG(n.get(t),e);return qO(e)}function jG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case xF:t+="";break;default:t+=o}}return t}function qO(n){return n+xF+""}var BG="remoteDocuments",RF="owner";var PF="mutationQueues";var MF="mutations";var NF="documentMutations",$G="remoteDocumentsV14";var kF="remoteDocumentGlobal";var OF="targets";var FF="targetDocuments";var VF="targetGlobal",LF="collectionParents";var UF="clientMetadata";var jF="bundles";var BF="namedQueries";var zG="indexConfiguration";var qG="indexState";var HG="indexEntries";var $F="documentOverlays";var GG="globals";var WG=[PF,MF,NF,BG,OF,RF,VF,FF,UF,kF,LF,jF,BF],gye=[...WG,$F],KG=[PF,MF,NF,$G,OF,RF,VF,FF,UF,kF,LF,jF,BF,$F],QG=KG,YG=[...QG,zG,qG,HG];var yye=[...YG,GG];function HO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function da(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Mt=class n{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}},ku=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}};Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1;Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var hn=class n{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new H_(this.data.getIterator())}getIteratorFrom(e){return new H_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},H_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vr=class n{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new n([])}unionWith(e){let t=new hn(Xn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var G_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var In=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new G_("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};In.EMPTY_BYTE_STRING=new In("");var JG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(n){if(it(!!n,39018),typeof n=="string"){let e=0,t=JG.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yo(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}var qF="server_timestamp",HF="__type__",GF="__previous_value__",WF="__local_write_time__";function wv(n){return(n?.mapValue?.fields||{})[HF]?.stringValue===qF}function bv(n){let e=n.mapValue.fields[GF];return wv(e)?bv(e):e}function Hf(n){let e=Qo(n.mapValue.fields[WF].timestampValue);return new Bt(e.seconds,e.nanos)}var bC=class{constructor(e,t,r,i,o,s,a,c,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}},W_="(default)",Gf=class n{constructor(e,t){this.projectId=e,this.database=t||W_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===W_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function KF(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new te(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gf(n.options.projectId,e)}var qS="__type__",QF="__max__",M_={mapValue:{fields:{__type__:{stringValue:QF}}}},HS="__vector__",Lu="value";function ca(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wv(n)?4:JF(n)?9007199254740991:YF(n)?10:11:_e(28295,{value:n})}function ro(n,e){if(n===e)return!0;let t=ca(n);if(t!==ca(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hf(n).isEqual(Hf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Qo(i.timestampValue),a=Qo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Yo(i.bytesValue).isEqual(Yo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return It(i.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return It(i.integerValue)===It(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=It(i.doubleValue),a=It(o.doubleValue);return s===a?qf(s)===qf(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Vu(n.arrayValue.values||[],e.arrayValue.values||[],ro);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(HO(s)!==HO(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ro(s[c],a[c])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function Wf(n,e){return(n.values||[]).find(t=>ro(t,e))!==void 0}function Uu(n,e){if(n===e)return 0;let t=ca(n),r=ca(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=It(o.integerValue||o.doubleValue),c=It(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return GO(n.timestampValue,e.timestampValue);case 4:return GO(Hf(n),Hf(e));case 5:return EC(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Yo(o),c=Yo(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Fe(a[d],c[d]);if(h!==0)return h}return Fe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Fe(It(o.latitude),It(s.latitude));return a!==0?a:Fe(It(o.longitude),It(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return WO(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},c=s.fields||{},d=a[Lu]?.arrayValue,h=c[Lu]?.arrayValue,m=Fe(d?.values?.length||0,h?.values?.length||0);return m!==0?m:WO(d,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===M_.mapValue&&s===M_.mapValue)return 0;if(o===M_.mapValue)return 1;if(s===M_.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){let w=EC(c[m],h[m]);if(w!==0)return w;let S=Uu(a[c[m]],d[h[m]]);if(S!==0)return S}return Fe(c.length,h.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function GO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);let t=Qo(n),r=Qo(e),i=Fe(t.seconds,r.seconds);return i!==0?i:Fe(t.nanos,r.nanos)}function WO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Uu(t[i],r[i]);if(o)return o}return Fe(t.length,r.length)}function ju(n){return IC(n)}function IC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Qo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=IC(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${IC(t.fields[s])}`;return i+"}"})(n.mapValue):_e(61005,{value:n})}function O_(n){switch(ca(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=bv(n);return e?16+O_(e):16;case 5:return 2*n.stringValue.length;case 6:return Yo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+O_(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return da(r.fields,(o,s)=>{i+=o.length+O_(s)}),i})(n.mapValue);default:throw _e(13486,{value:n})}}function GS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function TC(n){return!!n&&"integerValue"in n}function WS(n){return!!n&&"arrayValue"in n}function KO(n){return!!n&&"nullValue"in n}function QO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function F_(n){return!!n&&"mapValue"in n}function YF(n){return(n?.mapValue?.fields||{})[qS]?.stringValue===HS}function jf(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return da(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jf(n.arrayValue.values[t]);return e}return z({},n)}function JF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===QF}var vye={mapValue:{fields:{[qS]:{stringValue:HS},[Lu]:{arrayValue:{}}}}};var Jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!F_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jf(t)}setAll(e){let t=Xn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=jf(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());F_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];F_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){da(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(jf(this.value))}};function XF(n){let e=[];return da(n.fields,(t,r)=>{let i=new Xn([t]);if(F_(r)){let o=XF(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Vr(e)}var vi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Re.min(),Re.min(),Re.min(),Jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Re.min(),Re.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Re.min(),Re.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Uc=class{constructor(e,t){this.position=e,this.inclusive=t}};function YO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=fe.comparator(fe.fromName(s.referenceValue),t.key):r=Uu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function JO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ro(n.position[t],e.position[t]))return!1;return!0}var jc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function XG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var K_=class{},Ut=class n extends K_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SC(e,t,r):t==="array-contains"?new xC(e,r):t==="in"?new RC(e,r):t==="not-in"?new PC(e,r):t==="array-contains-any"?new MC(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DC(e,r):new AC(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uu(t,this.value)):t!==null&&ca(this.value)===ca(t)&&this.matchesComparison(Uu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Lr=class n extends K_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return ZF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function ZF(n){return n.op==="and"}function eV(n){return ZG(n)&&ZF(n)}function ZG(n){for(let e of n.filters)if(e instanceof Lr)return!1;return!0}function CC(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+ju(n.value);if(eV(n))return n.filters.map(e=>CC(e)).join(",");{let e=n.filters.map(t=>CC(t)).join(",");return`${n.op}(${e})`}}function tV(n,e){return n instanceof Ut?(function(r,i){return i instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&ro(r.value,i.value)})(n,e):n instanceof Lr?(function(r,i){return i instanceof Lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&tV(s,i.filters[a]),!0):!1})(n,e):void _e(19439)}function nV(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${ju(t.value)}`})(n):n instanceof Lr?(function(t){return t.op.toString()+" {"+t.getFilters().map(nV).join(" ,")+"}"})(n):"Filter"}var SC=class extends Ut{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},DC=class extends Ut{constructor(e,t){super(e,"in",t),this.keys=rV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},AC=class extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=rV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function rV(n,e){return(e.arrayValue?.values||[]).map(t=>fe.fromName(t.referenceValue))}var xC=class extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return WS(t)&&Wf(t.arrayValue,this.value)}},RC=class extends Ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Wf(this.value.arrayValue,t)}},PC=class extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wf(this.value.arrayValue,t)}},MC=class extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!WS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wf(this.value.arrayValue,r))}};var NC=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function XO(n,e=null,t=[],r=[],i=null,o=null,s=null){return new NC(n,e,t,r,i,o,s)}function KS(n){let e=Ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>CC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Ev(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ju(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ju(r)).join(",")),e.Te=t}return e.Te}function QS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JO(n.startAt,e.startAt)&&JO(n.endAt,e.endAt)}function kC(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Bc=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function eW(n,e,t,r,i,o,s,a){return new Bc(n,e,t,r,i,o,s,a)}function rp(n){return new Bc(n)}function ZO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tW(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function YS(n){return n.collectionGroup!==null}function Ou(n){let e=Ae(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new hn(Xn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new jc(o,r))}),t.has(Xn.keyField().canonicalString())||e.Ie.push(new jc(Xn.keyField(),r))}return e.Ie}function Zi(n){let e=Ae(n);return e.Ee||(e.Ee=nW(e,Ou(n))),e.Ee}function nW(n,e){if(n.limitType==="F")return XO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new jc(i.field,o)});let t=n.endAt?new Uc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uc(n.startAt.position,n.startAt.inclusive):null;return XO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Iv(n,e){let t=n.filters.concat([e]);return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Q_(n,e,t){return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tv(n,e){return QS(Zi(n),Zi(e))&&n.limitType===e.limitType}function iV(n){return`${KS(Zi(n))}|lt:${n.limitType}`}function Pu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nV(i)).join(", ")}]`),Ev(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ju(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ju(i)).join(",")),`Target(${r})`})(Zi(n))}; limitType=${n.limitType})`}function Cv(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ou(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let d=YO(s,a,c);return s.inclusive?d<=0:d<0})(r.startAt,Ou(r),i)||r.endAt&&!(function(s,a,c){let d=YO(s,a,c);return s.inclusive?d>=0:d>0})(r.endAt,Ou(r),i))})(n,e)}function rW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oV(n){return(e,t)=>{let r=!1;for(let i of Ou(n)){let o=iW(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iW(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),d=a.data.field(o);return c!==null&&d!==null?Uu(c,d):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:n.dir})}}var Jo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return zF(this.inner)}size(){return this.innerSize}};var oW=new Mt(fe.comparator);function Xo(){return oW}var sV=new Mt(fe.comparator);function Uf(...n){let e=sV;for(let t of n)e=e.insert(t.key,t);return e}function aV(n){let e=sV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kc(){return Bf()}function cV(){return Bf()}function Bf(){return new Jo(n=>n.toString(),(n,e)=>n.isEqual(e))}var sW=new Mt(fe.comparator),aW=new hn(fe.comparator);function Oe(...n){let e=aW;for(let t of n)e=e.add(t);return e}var cW=new hn(Fe);function lW(){return cW}function JS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function lV(n){return{integerValue:""+n}}function uW(n,e){return LG(e)?lV(e):JS(n,e)}var Bu=class{constructor(){this._=void 0}};function dW(n,e,t){return n instanceof $u?(function(i,o){let s={fields:{[HF]:{stringValue:qF},[WF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wv(o)&&(o=bv(o)),o&&(s.fields[GF]=o),{mapValue:s}})(t,e):n instanceof $c?dV(n,e):n instanceof zc?hV(n,e):(function(i,o){let s=uV(i,o),a=eF(s)+eF(i.Ae);return TC(s)&&TC(i.Ae)?lV(a):JS(i.serializer,a)})(n,e)}function hW(n,e,t){return n instanceof $c?dV(n,e):n instanceof zc?hV(n,e):t}function uV(n,e){return n instanceof zu?(function(r){return TC(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var $u=class extends Bu{},$c=class extends Bu{constructor(e){super(),this.elements=e}};function dV(n,e){let t=fV(e);for(let r of n.elements)t.some(i=>ro(i,r))||t.push(r);return{arrayValue:{values:t}}}var zc=class extends Bu{constructor(e){super(),this.elements=e}};function hV(n,e){let t=fV(e);for(let r of n.elements)t=t.filter(i=>!ro(i,r));return{arrayValue:{values:t}}}var zu=class extends Bu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function eF(n){return It(n.integerValue||n.doubleValue)}function fV(n){return WS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof $c&&i instanceof $c||r instanceof zc&&i instanceof zc?Vu(r.elements,i.elements,ro):r instanceof zu&&i instanceof zu?ro(r.Ae,i.Ae):r instanceof $u&&i instanceof $u})(n.transform,e.transform)}var OC=class{constructor(e,t){this.version=e,this.transformResults=t}},_i=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function V_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qu=class{};function pV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hu(n.key,_i.none()):new qc(n.key,n.data,_i.none());{let t=n.data,r=Jn.empty(),i=new hn(Xn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new io(n.key,r,new Vr(i.toArray()),_i.none())}}function pW(n,e,t){n instanceof qc?(function(i,o,s){let a=i.value.clone(),c=nF(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof io?(function(i,o,s){if(!V_(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=nF(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(mV(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function $f(n,e,t,r){return n instanceof qc?(function(o,s,a,c){if(!V_(o.precondition,s))return a;let d=o.value.clone(),h=rF(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof io?(function(o,s,a,c){if(!V_(o.precondition,s))return a;let d=rF(o.fieldTransforms,c,s),h=s.data;return h.setAll(mV(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(o,s,a){return V_(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function mW(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=uV(r.transform,i||null);o!=null&&(t===null&&(t=Jn.empty()),t.set(r.field,o))}return t||null}function tF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vu(r,i,(o,s)=>fW(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var qc=class extends qu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},io=class extends qu{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function mV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function nF(n,e,t){let r=new Map;it(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,hW(s,a,t[i]))}return r}function rF(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,dW(o,s,e))}return r}var Hu=class extends qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},FC=class extends qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var VC=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&pW(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$f(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$f(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=cV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=pV(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Vu(this.mutations,e.mutations,(t,r)=>tF(t,r))&&Vu(this.baseMutations,e.baseMutations,(t,r)=>tF(t,r))}},LC=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return sW})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var UC=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Qt,Ue;function gW(n){switch(n){case H.OK:return _e(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function gV(n){if(n===void 0)return Ko("GRPC error has no .code"),H.UNKNOWN;switch(n){case Qt.OK:return H.OK;case Qt.CANCELLED:return H.CANCELLED;case Qt.UNKNOWN:return H.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return H.INTERNAL;case Qt.UNAVAILABLE:return H.UNAVAILABLE;case Qt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Qt.NOT_FOUND:return H.NOT_FOUND;case Qt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Qt.ABORTED:return H.ABORTED;case Qt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Qt.DATA_LOSS:return H.DATA_LOSS;default:return _e(39323,{code:n})}}(Ue=Qt||(Qt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var yW=null;function _W(){return new TextEncoder}var vW=new qo([4294967295,4294967295],0);function iF(n){let e=_W().encode(n),t=new sC;return t.update(e),new Uint8Array(t.digest())}function oF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qo([t,r],0),new qo([i,o],0)]}var BC=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(qo.fromNumber(r)));return i.compare(vW)===1&&(i=new qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=iF(e),[r,i]=oF(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=iF(e),[r,i]=oF(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Oc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Y_=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Re.min(),i,new Mt(Fe),Xo(),Oe())}},Kf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Oe(),Oe(),Oe())}};var Fu=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},J_=class{constructor(e,t){this.targetId=e,this.Ce=t}},X_=class{constructor(e,t,r=In.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Z_=class{constructor(){this.ve=0,this.Fe=sF(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),r=Oe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_e(38017,{changeType:o})}}),new Kf(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=sF()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},$C=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xo(),this.He=N_(),this.Je=N_(),this.Ze=new Mt(Fe)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(kC(o))if(r===0){let s=new fe(o.path);this.et(t,s,vi.newNoDocument(s,Re.min()))}else it(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}yW?.lt((function(h,m,w,S,M){let k={localCacheCount:h,existenceFilterCount:m.count,databaseId:w.database,projectId:w.projectId},V=m.unchangedNames;return V&&(k.bloomFilter={applied:M===0,hashCount:V?.hashCount??0,bitmapLength:V?.bits?.bitmap?.length??0,padding:V?.bits?.padding??0,mightContain:q=>S?.mightContain(q)??!1}),k})(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Yo(r).toUint8Array()}catch(c){if(c instanceof G_)return aa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new BC(s,i,o)}catch(c){return aa(c instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&kC(a.target)){let c=new fe(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,vi.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.Ke())}});let r=Oe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Y_(e,t,this.Ze,this.je,r);return this.je=Xo(),this.He=N_(),this.Je=N_(),this.Ze=new Mt(Fe),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Z_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new hn(Fe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new hn(Fe),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Z_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function N_(){return new Mt(fe.comparator)}function sF(){return new Mt(fe.comparator)}var EW={asc:"ASCENDING",desc:"DESCENDING"},wW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bW={and:"AND",or:"OR"},zC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qC(n,e){return n.useProto3Json||Ev(e)?e:{value:e}}function ev(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IW(n,e){return ev(n,e.toTimestamp())}function eo(n){return it(!!n,49232),Re.fromTimestamp((function(t){let r=Qo(t);return new Bt(r.seconds,r.nanos)})(n))}function XS(n,e){return HC(n,e).canonicalString()}function HC(n,e){let t=(function(i){return new _t(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _V(n){let e=_t.fromString(n);return it(IV(e),10190,{key:e.toString()}),e}function GC(n,e){return XS(n.databaseId,e.path)}function fC(n,e){let t=_V(e);if(t.get(1)!==n.databaseId.projectId)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(EV(t))}function vV(n,e){return XS(n.databaseId,e)}function TW(n){let e=_V(n);return e.length===4?_t.emptyPath():EV(e)}function WC(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EV(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function aF(n,e,t){return{name:GC(n,e),fields:t.value.mapValue.fields}}function CW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,h){return d.useProto3Json?(it(h===void 0||typeof h=="string",58123),In.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),In.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(d){let h=d.code===void 0?H.UNKNOWN:gV(d.code);return new te(h,d.message||"")})(s);t=new X_(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fC(n,r.document.name),o=eo(r.document.updateTime),s=r.document.createTime?eo(r.document.createTime):Re.min(),a=new Jn({mapValue:{fields:r.document.fields}}),c=vi.newFoundDocument(i,o,s,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Fu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fC(n,r.document),o=r.readTime?eo(r.readTime):Re.min(),s=vi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Fu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fC(n,r.document),o=r.removedTargetIds||[];t=new Fu([],o,i,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new jC(i,o),a=r.targetId;t=new J_(a,s)}}return t}function SW(n,e){let t;if(e instanceof qc)t={update:aF(n,e.key,e.value)};else if(e instanceof Hu)t={delete:GC(n,e.key)};else if(e instanceof io)t={update:aF(n,e.key,e.data),updateMask:OW(e.fieldMask)};else{if(!(e instanceof FC))return _e(16599,{dt:e.type});t={verify:GC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof $u)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $c)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zu)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw _e(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:IW(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e(27497)})(n,e.precondition)),t}function DW(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?eo(i.updateTime):eo(o);return s.isEqual(Re.min())&&(s=eo(o)),new OC(s,i.transformResults||[])})(t,e))):[]}function AW(n,e){return{documents:[vV(n,e.path)]}}function xW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vV(n,i);let o=(function(d){if(d.length!==0)return bV(Lr.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(d){if(d.length!==0)return d.map(h=>(function(w){return{field:Mu(w.field),direction:MW(w.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=qC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function RW(n){let e=TW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(m){let w=wV(m);return w instanceof Lr&&eV(w)?w.getFilters():[w]})(t.where));let s=[];t.orderBy&&(s=(function(m){return m.map(w=>(function(M){return new jc(Nu(M.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(w))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let w;return w=typeof m=="object"?m.value:m,Ev(w)?null:w})(t.limit));let c=null;t.startAt&&(c=(function(m){let w=!!m.before,S=m.values||[];return new Uc(S,w)})(t.startAt));let d=null;return t.endAt&&(d=(function(m){let w=!m.before,S=m.values||[];return new Uc(S,w)})(t.endAt)),eW(e,i,s,o,a,"F",c,d)}function PW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Nu(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Nu(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Nu(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Nu(t.unaryFilter.field);return Ut.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Nu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Lr.create(t.compositeFilter.filters.map(r=>wV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function MW(n){return EW[n]}function NW(n){return wW[n]}function kW(n){return bW[n]}function Mu(n){return{fieldPath:n.canonicalString()}}function Nu(n){return Xn.fromServerFormat(n.fieldPath)}function bV(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(QO(t.value))return{unaryFilter:{field:Mu(t.field),op:"IS_NAN"}};if(KO(t.value))return{unaryFilter:{field:Mu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QO(t.value))return{unaryFilter:{field:Mu(t.field),op:"IS_NOT_NAN"}};if(KO(t.value))return{unaryFilter:{field:Mu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(t.field),op:NW(t.op),value:t.value}}})(n):n instanceof Lr?(function(t){let r=t.getFilters().map(i=>bV(i));return r.length===1?r[0]:{compositeFilter:{op:kW(t.op),filters:r}}})(n):_e(54877,{filter:n})}function OW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function TV(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var Qf=class n{constructor(e,t,r,i,o=Re.min(),s=Re.min(),a=In.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var KC=class{constructor(e){this.yt=e}};function CV(n){let e=RW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Q_(e,e.limit,"L"):e}var tv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),qf(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Qo(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Yo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?JF(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):YF(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):_e(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Lu,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};tv.Wt=new tv;var QC=class{constructor(){this.Sn=new YC}addToCollectionParentIndex(e,t){return this.Sn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Lc.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Lc.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},YC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hn(_t.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(_t.comparator)).toArray()}};var Eye=new Uint8Array(0);var cF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SV=41943040,Fr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(SV,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var Yf=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var lF="LruGarbageCollector",FW=1048576;function uF([n,e],[t,r]){let i=Fe(n,t);return i===0?Fe(e,r):i}var JC=class{constructor(e){this.Pr=e,this.buffer=new hn(uF),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();uF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},XC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){oe(lF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xu(t)?oe(lF,"Ignoring IndexedDB error during garbage collection: ",t):await Ju(t)}await this.Ar(3e5)})}},ZC=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve($S.ce);let r=new JC(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(cF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cF):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,s,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Ru()<=xi.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}};function VW(n,e){return new ZC(n,e)}var eS=class{constructor(){this.changes=new Jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$f(r.mutation,i,Vr.empty(),Bt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){let i=kc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Uf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=kc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Xo(),s=Bf(),a=(function(){return Bf()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof io)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),$f(h.mutation,d,h.mutation.getFieldMask(),Bt.now())):s.set(d.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>a.set(d,new tS(h,s.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Bf(),i=new Mt((s,a)=>s-a),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Vr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let m=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,m=cV();h.forEach(w=>{if(!o.has(w)){let S=pV(t.get(w),r.get(w));S!==null&&m.set(w,S),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,m))}return W.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return tW(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):W.resolve(kc()),a=zf,c=o;return s.next(d=>W.forEach(d,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(w=>{c=c.insert(h,w)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,Oe())).next(h=>({batchId:a,changes:aV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=Uf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Uf();return this.indexManager.getCollectionParents(e,o).next(a=>W.forEach(a,c=>{let d=(function(m,w){return new Bc(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,w)=>{s=s.insert(m,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,vi.newInvalidDocument(h)))});let a=Uf();return s.forEach((c,d)=>{let h=o.get(c);h!==void 0&&$f(h.mutation,d,Vr.empty(),Bt.now()),Cv(t,d)&&(a=a.insert(c,d))}),a})}};var rS=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return W.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:eo(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:CV(i.bundledQuery),readTime:eo(i.readTime)}})(t)),W.resolve()}};var iS=class{constructor(){this.overlays=new Mt(fe.comparator),this.Lr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kc();return W.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=kc(),o=t.length+1,s=new fe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Mt((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=kc(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=kc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new UC(t,r));let o=this.Lr.get(t);o===void 0&&(o=Oe(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var oS=class{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var Jf=class{constructor(){this.kr=new hn(Yt.Kr),this.qr=new hn(Yt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new Yt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Yt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new fe(new _t([])),r=new Yt(t,e),i=new Yt(t,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new fe(new _t([])),r=new Yt(t,e),i=new Yt(t,e+1),o=Oe();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Yt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Yt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return fe.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}};var sS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new hn(Yt.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new VC(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Jr=this.Jr.add(new Yt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(s)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?zS:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Yt(t,0),i=new Yt(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Fe);return t.forEach(i=>{let o=new Yt(i,0),s=new Yt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),W.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;fe.isDocumentKey(o)||(o=o.child(""));let s=new Yt(new fe(o),0),a=new hn(Fe);return this.Jr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},s),W.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return W.forEach(t.mutations,i=>{let o=new Yt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new Yt(t,0),i=this.Jr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aS=class{constructor(e){this.ti=e,this.docs=(function(){return new Mt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():vi.newInvalidDocument(t))}getEntries(e,t){let r=Xo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():vi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Xo(),s=t.path,a=new fe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||OG(kG(h),r)<=0||(i.has(h.key)||Cv(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,t,r,i){_e(9500)}ni(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cS(this)}getSize(e){return W.resolve(this.size)}},cS=class extends eS{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var lS=class{constructor(e){this.persistence=e,this.ri=new Jo(t=>KS(t),QS),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new Jf,this.targetCount=0,this.oi=Yf._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),W.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Yf(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.lr(t),W.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(o).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),W.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.si.containsKey(t))}};var nv=class{constructor(e,t){this._i={},this.overlays={},this.ai=new $S(0),this.ui=!1,this.ui=!0,this.ci=new oS,this.referenceDelegate=e(this),this.li=new lS(this),this.indexManager=new QC,this.remoteDocumentCache=(function(i){return new aS(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new KC(t),this.Pi=new rS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new sS(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);let i=new uS(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return W.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},uS=class extends wC{constructor(e){super(),this.currentSequenceNumber=e}},dS=class n{constructor(e){this.persistence=e,this.Ri=new Jf,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,r=>{let i=fe.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,Re.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},rv=class n{constructor(e,t){this.persistence=e,this.fi=new Jo(r=>UG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VW(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return W.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),W.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=O_(e.data.value)),t}wr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Oe(),i=Oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var fS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pS=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return _A()?8:VG(yA())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fS;return this.ys(e,t,s).next(a=>{if(o.result=a,this.As)return this.ws(e,t,s,a.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Ru()<=xi.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Pu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Ru()<=xi.DEBUG&&oe("QueryEngine","Query:",Pu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ru()<=xi.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Pu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zi(t))):W.resolve())}gs(e,t){if(ZO(t))return W.resolve(null);let r=Zi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Q_(t,null,"F"),r=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Oe(...o);return this.fs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ss(t,d,s,c.readTime)?this.gs(e,Q_(t,null,"F")):this.Ds(e,d,t,c)}))})))}ps(e,t,r,i){return ZO(t)||i.isEqual(Re.min())?W.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ss(t,s,r,i)?W.resolve(null):(Ru()<=xi.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pu(t)),this.Ds(e,s,t,NG(i,zf)).next(a=>a))})}bs(e,t){let r=new hn(oV(e));return t.forEach((i,o)=>{Cv(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return Ru()<=xi.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Pu(t)),this.fs.getDocumentsMatchingQuery(e,t,Lc.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ZS="LocalStore",LW=3e8,mS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Mt(Fe),this.Fs=new Jo(o=>KS(o),QS),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nS(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function UW(n,e,t,r){return new mS(n,e,t,r)}async function DV(n,e){let t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Oe();for(let d of i){s.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of o){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:s,addedBatchIds:a}))})})}function jW(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let m=d.batch,w=m.keys(),S=W.resolve();return w.forEach(M=>{S=S.next(()=>h.getEntry(c,M)).next(k=>{let V=d.docVersions.get(M);it(V!==null,48541),k.version.compareTo(V)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(c,m))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Oe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function AV(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function BW(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((h,m)=>{let w=i.get(m);if(!w)return;a.push(t.li.removeMatchingKeys(o,h.removedDocuments,m).next(()=>t.li.addMatchingKeys(o,h.addedDocuments,m)));let S=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(In.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(m,S),(function(k,V,q){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=LW?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(w,S,h)&&a.push(t.li.updateTargetData(o,S))});let c=Xo(),d=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($W(o,s,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(Re.min())){let h=t.li.getLastRemoteSnapshotVersion(o).next(m=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(t.vs=i,o))}function $W(n,e,t){let r=Oe(),i=Oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Xo();return t.forEach((a,c)=>{let d=o.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):oe(ZS,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Bs:s,Ls:i}})}function zW(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zS),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qW(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,W.resolve(i)):t.li.allocateTargetId(r).next(s=>(i=new Qf(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function gS(n,e,t){let r=Ae(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Xu(s))throw s;oe(ZS,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function dF(n,e,t){let r=Ae(n),i=Re.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,d,h){let m=Ae(c),w=m.Fs.get(h);return w!==void 0?W.resolve(m.vs.get(w)):m.li.getTargetData(d,h)})(r,s,Zi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Re.min(),t?o:Oe())).next(a=>(HW(r,rW(e),a),{documents:a,ks:o})))}function HW(n,e,t){let r=n.Ms.get(e)||Re.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var iv=class{constructor(){this.activeTargetIds=lW()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yS=class{constructor(){this.vo=new iv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new iv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _S=class{Mo(e){}shutdown(){}};var hF="ConnectivityMonitor",ov=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){oe(hF,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){oe(hF,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var k_=null;function vS(){return k_===null?k_=(function(){return 268435456+Math.round(2147483648*Math.random())})():k_++,"0x"+k_.toString(16)}var pC="RestConnection",GW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},ES=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===W_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=vS(),a=this.Qo(e,t.toUriEncodedString());oe(pC,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,o);let{host:d}=new URL(a),h=b0(d);return this.zo(e,a,c,r,h).then(m=>(oe(pC,`Received RPC '${e}' ${s}: `,m),m),m=>{throw aa(pC,`RPC '${e}' ${s} failed with error: `,m,"url: ",a,"request:",r),m})}jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=GW[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var wS=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Mn="WebChannelConnection",Lf=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},sv=class n extends ES{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=uC();Lf(e,lC.STAT_EVENT,t=>{t.stat===P_.PROXY?oe(Mn,"STAT_EVENT: detected buffering proxy"):t.stat===P_.NOPROXY&&oe(Mn,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let s=vS();return new Promise((a,c)=>{let d=new aC;d.setWithCredentials(!0),d.listenOnce(cC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vf.NO_ERROR:let m=d.getResponseJson();oe(Mn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case Vf.TIMEOUT:oe(Mn,`RPC '${e}' ${s} timed out`),c(new te(H.DEADLINE_EXCEEDED,"Request time out"));break;case Vf.HTTP_ERROR:let w=d.getStatus();if(oe(Mn,`RPC '${e}' ${s} failed with status:`,w,"response text:",d.getResponseText()),w>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let M=S?.error;if(M&&M.status&&M.message){let k=(function(q){let ee=q.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ee)>=0?ee:H.UNKNOWN})(M.status);c(new te(k,M.message))}else c(new te(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new te(H.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{oe(Mn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);oe(Mn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=vS(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let d=o.join("");oe(Mn,`Creating RPC '${e}' stream ${i}: ${d}`,a);let h=s.createWebChannel(d,a);this.I_(h);let m=!1,w=!1,S=new wS({Ho:M=>{w?oe(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(oe(Mn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),oe(Mn,`RPC '${e}' stream ${i} sending:`,M),h.send(M))},Jo:()=>h.close()});return Lf(h,xu.EventType.OPEN,()=>{w||(oe(Mn,`RPC '${e}' stream ${i} transport opened.`),S.i_())}),Lf(h,xu.EventType.CLOSE,()=>{w||(w=!0,oe(Mn,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(h))}),Lf(h,xu.EventType.ERROR,M=>{w||(w=!0,aa(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),S.o_(new te(H.UNAVAILABLE,"The operation could not be completed")))}),Lf(h,xu.EventType.MESSAGE,M=>{if(!w){let k=M.data[0];it(!!k,16349);let V=k,q=V?.error||V[0]?.error;if(q){oe(Mn,`RPC '${e}' stream ${i} received error:`,q);let ee=q.status,Y=(function(Ee){let b=Qt[Ee];if(b!==void 0)return gV(b)})(ee),le=q.message;Y===void 0&&(Y=H.INTERNAL,le="Unknown error status: "+ee+" with message "+q.message),w=!0,S.o_(new te(Y,le)),h.close()}else oe(Mn,`RPC '${e}' stream ${i} received:`,k),S.__(k)}}),n.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return dC()}};function WW(n){return new sv(n)}function mC(){return typeof document<"u"?document:null}function ip(n){return new zC(n,!0)}sv.c_=!1;var av=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var fF="PersistentStream",cv=class{constructor(e,t,r,i,o,s,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new av(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Ko(t.toString()),Ko("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new te(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(fF,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(oe(fF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bS=class extends cv{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=CW(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Re.min():s.readTime?eo(s.readTime):Re.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=WC(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=kC(c)?{documents:AW(o,c)}:{query:xW(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=yV(o,s.resumeToken);let d=qC(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Re.min())>0){a.readTime=ev(o,s.snapshotVersion.toTimestamp());let d=qC(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=PW(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=WC(this.serializer),t.removeTarget=e,this.K_(t)}},IS=class extends cv{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=DW(e.writeResults,e.commitTime),r=eo(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=WC(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>SW(this.serializer,r))};this.K_(t)}};var TS=class{},CS=class extends TS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,HC(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(H.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.jo(e,HC(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(H.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function KW(n,e,t,r){return new CS(n,e,t,r)}var SS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ko(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Hc="RemoteStore",DS=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(async()=>{Qc(this)&&(oe(Hc,"Restarting streams for network reachability change."),await(async function(c){let d=Ae(c);d.Ea.add(4),await op(d),d.Va.set("Unknown"),d.Ea.delete(4),await Sv(d)})(this))})}),this.Va=new SS(r,i)}};async function Sv(n){if(Qc(n))for(let e of n.Ra)await e(!0)}async function op(n){for(let e of n.Ra)await e(!1)}function xV(n,e){let t=Ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rD(t)?nD(t):Zu(t).O_()&&tD(t,e))}function eD(n,e){let t=Ae(n),r=Zu(t);t.Ia.delete(e),r.O_()&&RV(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qc(t)&&t.Va.set("Unknown"))}function tD(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zu(n).Z_(e)}function RV(n,e){n.da.$e(e),Zu(n).X_(e)}function nD(n){n.da=new $C({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Zu(n).start(),n.Va.ua()}function rD(n){return Qc(n)&&!Zu(n).x_()&&n.Ia.size>0}function Qc(n){return Ae(n).Ea.size===0}function PV(n){n.da=void 0}async function QW(n){n.Va.set("Online")}async function YW(n){n.Ia.forEach((e,t)=>{tD(n,e)})}async function JW(n,e){PV(n),rD(n)?(n.Va.ha(e),nD(n)):n.Va.set("Unknown")}async function XW(n,e,t){if(n.Va.set("Online"),e instanceof X_&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){oe(Hc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lv(n,r)}else if(e instanceof Fu?n.da.Xe(e):e instanceof J_?n.da.st(e):n.da.tt(e),!t.isEqual(Re.min()))try{let r=await AV(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.da.Tt(s);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,d)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(In.EMPTY_BYTE_STRING,h.snapshotVersion)),RV(o,c);let m=new Qf(h.target,c,d,h.sequenceNumber);tD(o,m)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){oe(Hc,"Failed to raise snapshot:",r),await lv(n,r)}}async function lv(n,e,t){if(!Xu(e))throw e;n.Ea.add(1),await op(n),n.Va.set("Offline"),t||(t=()=>AV(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe(Hc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sv(n)})}function MV(n,e){return e().catch(t=>lv(n,t,e))}async function Dv(n){let e=Ae(n),t=la(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zS;for(;ZW(e);)try{let i=await zW(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,e7(e,i)}catch(i){await lv(e,i)}NV(e)&&kV(e)}function ZW(n){return Qc(n)&&n.Ta.length<10}function e7(n,e){n.Ta.push(e);let t=la(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function NV(n){return Qc(n)&&!la(n).x_()&&n.Ta.length>0}function kV(n){la(n).start()}async function t7(n){la(n).ra()}async function n7(n){let e=la(n);for(let t of n.Ta)e.ea(t.mutations)}async function r7(n,e,t){let r=n.Ta.shift(),i=LC.from(r,e,t);await MV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Dv(n)}async function i7(n,e){e&&la(n).Y_&&await(async function(r,i){if((function(s){return gW(s)&&s!==H.ABORTED})(i.code)){let o=r.Ta.shift();la(r).B_(),await MV(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Dv(r)}})(n,e),NV(n)&&kV(n)}async function pF(n,e){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),oe(Hc,"RemoteStore received new credentials");let r=Qc(t);t.Ea.add(3),await op(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sv(t)}async function o7(n,e){let t=Ae(n);e?(t.Ea.delete(2),await Sv(t)):e||(t.Ea.add(2),await op(t),t.Va.set("Unknown"))}function Zu(n){return n.ma||(n.ma=(function(t,r,i){let o=Ae(t);return o.sa(),new bS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:QW.bind(null,n),Yo:YW.bind(null,n),t_:JW.bind(null,n),J_:XW.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),rD(n)?nD(n):n.Va.set("Unknown")):(await n.ma.stop(),PV(n))})),n.ma}function la(n){return n.fa||(n.fa=(function(t,r,i){let o=Ae(t);return o.sa(),new IS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:t7.bind(null,n),t_:i7.bind(null,n),ta:n7.bind(null,n),na:r7.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await Dv(n)):(await n.fa.stop(),n.Ta.length>0&&(oe(Hc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var AS=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iD(n,e){if(Ko("AsyncQueue",`${e}: ${n}`),Xu(n))return new te(H.UNAVAILABLE,`${e}: ${n}`);throw n}var Xf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=Uf(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var uv=class{constructor(){this.ga=new Mt(fe.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Gc=class n{constructor(e,t,r,i,o,s,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Xf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var xS=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},RS=class{constructor(){this.queries=mF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ae(t),o=i.queries;i.queries=mF(),o.forEach((s,a)=>{for(let c of a.ba)c.onError(r)})})(this,new te(H.ABORTED,"Firestore shutting down"))}};function mF(){return new Jo(n=>iV(n),Tv)}async function oD(n,e){let t=Ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new xS,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=iD(s,`Initialization of query '${Pu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&aD(t)}async function sD(n,e){let t=Ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function s7(n,e){let t=Ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ba)a.Fa(i)&&(r=!0);s.wa=i}}r&&aD(t)}function a7(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function aD(n){n.Ca.forEach(e=>{e.next()})}var PS,gF;(gF=PS||(PS={})).Ma="default",gF.Cache="cache";var Zf=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==PS.Cache}};var dv=class{constructor(e){this.key=e}},hv=class{constructor(e){this.key=e}},MS=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=oV(e),this.tu=new Xf(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new uv,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{let w=i.get(h),S=Cv(this.query,m)?m:null,M=!!w&&this.mutatedKeys.has(w.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),V=!1;w&&S?w.data.isEqual(S.data)?M!==k&&(r.track({type:3,doc:S}),V=!0):this.su(w,S)||(r.track({type:2,doc:S}),V=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(a=!0)):!w&&S?(r.track({type:0,doc:S}),V=!0):w&&!S&&(r.track({type:1,doc:w}),V=!0,(c||d)&&(a=!0)),V&&(S?(s=s.add(S),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Ss:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,m)=>(function(S,M){let k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:V})}};return k(S)-k(M)})(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,s.length!==0||d?{snapshot:new Gc(this.query,e.tu,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new hv(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new dv(r))}),t}cu(e){this.Za=e.ks,this.Ya=Oe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},cD="SyncEngine",NS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},kS=class{constructor(e){this.key=e,this.hu=!1}},OS=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Jo(a=>iV(a),Tv),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(fe.comparator),this.Au=new Map,this.Vu=new Jf,this.du={},this.mu=new Map,this.fu=Yf.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function c7(n,e,t=!0){let r=jV(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await OV(r,e,t,!0),i}async function l7(n,e){let t=jV(n);await OV(t,e,!0,!1)}async function OV(n,e,t,r){let i=await qW(n.localStore,Zi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await u7(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&xV(n.remoteStore,i),a}async function u7(n,e,t,r,i){n.pu=(m,w,S)=>(async function(k,V,q,ee){let Y=V.view.ru(q);Y.Ss&&(Y=await dF(k.localStore,V.query,!1).then(({documents:b})=>V.view.ru(b,Y)));let le=ee&&ee.targetChanges.get(V.targetId),$e=ee&&ee.targetMismatches.get(V.targetId)!=null,Ee=V.view.applyChanges(Y,k.isPrimaryClient,le,$e);return _F(k,V.targetId,Ee.au),Ee.snapshot})(n,m,w,S);let o=await dF(n.localStore,e,!0),s=new MS(e,o.ks),a=s.ru(o.documents),c=Kf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(a,n.isPrimaryClient,c);_F(n,t,d.au);let h=new NS(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function d7(n,e,t){let r=Ae(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Tv(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eD(r.remoteStore,i.targetId),FS(r,i.targetId)}).catch(Ju)):(FS(r,i.targetId),await gS(r.localStore,i.targetId,!0))}async function h7(n,e){let t=Ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eD(t.remoteStore,r.targetId))}async function f7(n,e,t){let r=E7(n);try{let i=await(function(s,a){let c=Ae(s),d=Bt.now(),h=a.reduce((S,M)=>S.add(M.key),Oe()),m,w;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let M=Xo(),k=Oe();return c.xs.getEntries(S,h).next(V=>{M=V,M.forEach((q,ee)=>{ee.isValidDocument()||(k=k.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,M)).next(V=>{m=V;let q=[];for(let ee of a){let Y=mW(ee,m.get(ee.key).overlayedDocument);Y!=null&&q.push(new io(ee.key,Y,XF(Y.value.mapValue),_i.exists(!0)))}return c.mutationQueue.addMutationBatch(S,d,q,a)}).next(V=>{w=V;let q=V.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(S,V.batchId,q)})}).then(()=>({batchId:w.batchId,changes:aV(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let d=s.du[s.currentUser.toKey()];d||(d=new Mt(Fe)),d=d.insert(a,c),s.du[s.currentUser.toKey()]=d})(r,i.batchId,t),await sp(r,i.changes),await Dv(r.remoteStore)}catch(i){let o=iD(i,"Failed to persist write");t.reject(o)}}async function FV(n,e){let t=Ae(n);try{let r=await BW(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?it(s.hu,14607):i.removedDocuments.size>0&&(it(s.hu,42227),s.hu=!1))}),await sp(t,r,e)}catch(r){await Ju(r)}}function yF(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Ae(s);c.onlineState=a;let d=!1;c.queries.forEach((h,m)=>{for(let w of m.ba)w.va(a)&&(d=!0)}),d&&aD(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function p7(n,e,t){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Mt(fe.comparator);s=s.insert(o,vi.newNoDocument(o,Re.min()));let a=Oe().add(o),c=new Y_(Re.min(),new Map,new Mt(Fe),s,a);await FV(r,c),r.Ru=r.Ru.remove(o),r.Au.delete(e),lD(r)}else await gS(r.localStore,e,!1).then(()=>FS(r,e,t)).catch(Ju)}async function m7(n,e){let t=Ae(n),r=e.batch.batchId;try{let i=await jW(t.localStore,e);LV(t,r,null),VV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await sp(t,i)}catch(i){await Ju(i)}}async function g7(n,e,t){let r=Ae(n);try{let i=await(function(s,a){let c=Ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(it(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);LV(r,e,t),VV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await sp(r,i)}catch(i){await Ju(i)}}function VV(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function LV(n,e,t){let r=Ae(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function FS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||UV(n,r)})}function UV(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(eD(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),lD(n))}function _F(n,e,t){for(let r of t)r instanceof dv?(n.Vu.addReference(r.key,e),y7(n,r)):r instanceof hv?(oe(cD,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||UV(n,r.key)):_e(19791,{wu:r})}function y7(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(oe(cD,"New document in limbo: "+t),n.Eu.add(r),lD(n))}function lD(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new fe(_t.fromString(e)),r=n.fu.next();n.Au.set(r,new kS(t)),n.Ru=n.Ru.insert(t,r),xV(n.remoteStore,new Qf(Zi(rp(t.path)),r,"TargetPurposeLimboResolution",$S.ce))}}async function sp(n,e,t){let r=Ae(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=hS.Es(c.targetId,d);o.push(h)}}))}),await Promise.all(s),r.Pu.J_(i),await(async function(c,d){let h=Ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>W.forEach(d,w=>W.forEach(w.Ts,S=>h.persistence.referenceDelegate.addReference(m,w.targetId,S)).next(()=>W.forEach(w.Is,S=>h.persistence.referenceDelegate.removeReference(m,w.targetId,S)))))}catch(m){if(!Xu(m))throw m;oe(ZS,"Failed to update sequence numbers: "+m)}for(let m of d){let w=m.targetId;if(!m.fromCache){let S=h.vs.get(w),M=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(M);h.vs=h.vs.insert(w,k)}}})(r.localStore,o))}async function _7(n,e){let t=Ae(n);if(!t.currentUser.isEqual(e)){oe(cD,"User change. New user:",e.toKey());let r=await DV(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new te(H.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sp(t,r.Ns)}}function v7(n,e){let t=Ae(n),r=t.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let i=Oe(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function jV(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p7.bind(null,e),e.Pu.J_=s7.bind(null,e.eventManager),e.Pu.yu=a7.bind(null,e.eventManager),e}function E7(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g7.bind(null,e),e}var uD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ip(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return UW(this.persistence,new pS,t.initialUser,this.serializer)}Cu(t){return new nv(dS.Vi,this.serializer)}Du(t){return new yS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),fv=class extends uD{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof rv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new XC(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new nv(r=>rv.Vi(r,t),this.serializer)}};var BV=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_7.bind(null,this.syncEngine),await o7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new RS})()}createDatastore(t){let r=ip(t.databaseInfo.databaseId),i=WW(t.databaseInfo);return KW(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new DS(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>yF(this.syncEngine,r,0),(function(){return ov.v()?new ov:new _S})())}createSyncEngine(t,r){return(function(o,s,a,c,d,h,m){let w=new OS(o,s,a,c,d,h);return m&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ae(r);oe(Hc,"RemoteStore shutting down."),i.Ea.add(5),await op(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var ep=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ko("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ua="FirestoreClient",VS=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=Vc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{oe(ua,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(oe(ua,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=iD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function gC(n,e){n.asyncQueue.verifyOperationInProgress(),oe(ua,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function vF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await w7(n);oe(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>pF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>pF(e.remoteStore,i)),n._onlineComponents=e}async function w7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(ua,"Using user provided OfflineComponentProvider");try{await gC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;aa("Error using user provided cache. Falling back to memory cache: "+t),await gC(n,new uD)}}else oe(ua,"Using default OfflineComponentProvider"),await gC(n,new fv(void 0));return n._offlineComponents}async function $V(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(ua,"Using user provided OnlineComponentProvider"),await vF(n,n._uninitializedComponentsProvider._online)):(oe(ua,"Using default OnlineComponentProvider"),await vF(n,new BV))),n._onlineComponents}function b7(n){return $V(n).then(e=>e.syncEngine)}async function pv(n){let e=await $V(n),t=e.eventManager;return t.onListen=c7.bind(null,e.syncEngine),t.onUnlisten=d7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=h7.bind(null,e.syncEngine),t}function zV(n,e,t,r){let i=new ep(r),o=new Zf(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>oD(await pv(n),o)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>sD(await pv(n),o))}}function qV(n,e,t={}){let r=new yi;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,d){let h=new ep({next:w=>{h.Nu(),s.enqueueAndForget(()=>sD(o,m));let S=w.docs.has(a);!S&&w.fromCache?d.reject(new te(H.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&c&&c.source==="server"?d.reject(new te(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),m=new Zf(rp(a.path),h,{includeMetadataChanges:!0,Ka:!0});return oD(o,m)})(await pv(n),n.asyncQueue,e,t,r)),r.promise}function HV(n,e,t={}){let r=new yi;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,d){let h=new ep({next:w=>{h.Nu(),s.enqueueAndForget(()=>sD(o,m)),w.fromCache&&c.source==="server"?d.reject(new te(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),m=new Zf(a,h,{includeMetadataChanges:!0,Ka:!0});return oD(o,m)})(await pv(n),n.asyncQueue,e,t,r)),r.promise}function GV(n,e){let t=new yi;return n.asyncQueue.enqueueAndForget(async()=>f7(await b7(n),e,t)),t.promise}function WV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var I7="ComponentProvider",EF=new Map;function T7(n,e,t,r,i){return new bC(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,WV(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var KV="firestore.googleapis.com",wF=!0,mv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KV,this.ssl=wF}else this.host=e.host,this.ssl=e.ssl??wF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FW)throw new te(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new U_;switch(r.type){case"firstParty":return new vC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=EF.get(t);r&&(oe(I7,"Removing Datastore"),EF.delete(t),r.terminate())})(this),Promise.resolve()}};function QV(n,e,t,r={}){n=Nn(n,Gu);let i=b0(e),o=n._getSettings(),s=de(z({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(pA(`https://${a}`),gA("Firestore",!0)),o.host!==KV&&o.host!==a&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=de(z({},o),{host:a,ssl:i,emulatorOptions:r});if(!I0(c,s)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=dn.MOCK_USER;else{d=mA(r.mockUserToken,n._app?.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new te(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new dn(m)}n._authCredentials=new yC(new L_(d,h))}}var Zo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yu(t,n._jsonSchema))return new n(e,r||null,new fe(_t.fromString(t.referencePath)))}};$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:jt("string",$t._jsonSchemaVersion),referencePath:jt("string")};var Go=class n extends Zo{constructor(e,t,r){super(e,t,rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ur(n,e,...t){if(n=Tr(n),SF("collection","path",e),n instanceof Gu){let r=_t.fromString(e,...t);return BO(r),new Go(n,null,r)}{if(!(n instanceof $t||n instanceof Go))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_t.fromString(e,...t));return BO(r),new Go(n.firestore,null,r)}}function Zn(n,e,...t){if(n=Tr(n),arguments.length===1&&(e=Vc.newId()),SF("doc","path",e),n instanceof Gu){let r=_t.fromString(e,...t);return jO(r),new $t(n,null,new fe(r))}{if(!(n instanceof $t||n instanceof Go))throw new te(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_t.fromString(e,...t));return jO(r),new $t(n.firestore,n instanceof Go?n.converter:null,new fe(r))}}var bF="AsyncQueue",gv=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new av(this,"async_queue_retry"),this._c=()=>{let r=mC();r&&oe(bF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=mC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=mC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new yi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xu(e))throw e;oe(bF,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ko("INTERNAL UNHANDLED ERROR: ",IF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=AS.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&_e(47125,{Pc:IF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function IF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var vr=class extends Gu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gv(e),this._firestoreClient=void 0,await e}}};function es(n,e){let t=typeof n=="object"?n:Ri(),r=typeof n=="string"?n:e||W_,i=IA(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=fA("firestore");o&&QV(i,...o)}return i}function ed(n){if(n._terminated)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||C7(n),n._firestoreClient}function C7(n){let e=n._freezeSettings(),t=T7(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VS(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var to=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(In.fromBase64String(e))}catch(t){throw new te(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};to._jsonSchemaVersion="firestore/bytes/1.0",to._jsonSchema={type:jt("string",to._jsonSchemaVersion),bytes:jt("string")};var Wc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wu=class{constructor(e){this._methodName=e}};var Wo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Yu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Wo._jsonSchemaVersion="firestore/geoPoint/1.0",Wo._jsonSchema={type:jt("string",Wo._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};var no=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new te(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};no._jsonSchemaVersion="firestore/vectorValue/1.0",no._jsonSchema={type:jt("string",no._jsonSchemaVersion),vectorValues:jt("object")};var S7=/^__.*__$/,LS=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,t,this.fieldTransforms):new qc(e,this.data,t,this.fieldTransforms)}},yv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new io(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function YV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:n})}}var US=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(z(z({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return vv(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(YV(this.dataSource)&&S7.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},jS=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ip(e)}createContext(e,t,r,i=!1){return new US({dataSource:e,methodName:t,targetDoc:r,path:Xn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ap(n){let e=n._freezeSettings(),t=ip(n._databaseId);return new jS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dD(n,e,t,r,i,o={}){let s=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);hD("Data must be an object, but it was:",s,r);let a=eL(r,s),c,d;if(o.merge)c=new Vr(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let m of o.mergeFields){let w=Kc(e,m,t);if(!s.contains(w))throw new te(H.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nL(h,w)||h.push(w)}c=new Vr(h),d=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=s.fieldTransforms;return new LS(new Jn(a),c,d)}var _v=class n extends Wu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function JV(n,e,t,r){let i=n.createContext(1,e,t);hD("Data must be an object, but it was:",i,r);let o=[],s=Jn.empty();da(r,(c,d)=>{let h=fD(e,c,t);d=Tr(d);let m=i.childContextForFieldPath(h);if(d instanceof _v)o.push(h);else{let w=cp(d,m);w!=null&&(o.push(h),s.set(h,w))}});let a=new Vr(o);return new yv(s,a,i.fieldTransforms)}function XV(n,e,t,r,i,o){let s=n.createContext(1,e,t),a=[Kc(e,r,t)],c=[i];if(o.length%2!=0)throw new te(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(Kc(e,o[w])),c.push(o[w+1]);let d=[],h=Jn.empty();for(let w=a.length-1;w>=0;--w)if(!nL(d,a[w])){let S=a[w],M=c[w];M=Tr(M);let k=s.childContextForFieldPath(S);if(M instanceof _v)d.push(S);else{let V=cp(M,k);V!=null&&(d.push(S),h.set(S,V))}}let m=new Vr(d);return new yv(h,m,s.fieldTransforms)}function ZV(n,e,t,r=!1){return cp(t,n.createContext(r?4:3,e))}function cp(n,e){if(tL(n=Tr(n)))return hD("Unsupported field value:",e,n),eL(n,e);if(n instanceof Wu)return(function(r,i){if(!YV(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=cp(a,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Bt.fromDate(r);return{timestampValue:ev(i.serializer,o)}}if(r instanceof Bt){let o=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ev(i.serializer,o)}}if(r instanceof Wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof to)return{bytesValue:yV(i.serializer,r._byteString)};if(r instanceof $t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:XS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof no)return(function(s,a){let c=s instanceof no?s.toArray():s;return{mapValue:{fields:{[qS]:{stringValue:HS},[Lu]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return JS(a.serializer,h)})}}}}}})(r,i);if(TV(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${np(r)}`)})(n,e)}function eL(n,e){let t={};return zF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(n,(r,i)=>{let o=cp(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function tL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bt||n instanceof Wo||n instanceof to||n instanceof $t||n instanceof Wu||n instanceof no||TV(n))}function hD(n,e,t){if(!tL(t)||!AF(t)){let r=np(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Kc(n,e,t){if((e=Tr(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return fD(n,e);throw vv("Field path arguments must be of type string or ",n,!1,void 0,t)}var D7=new RegExp("[~\\*/\\[\\]]");function fD(n,e,t){if(e.search(D7)>=0)throw vv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch{throw vv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vv(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new te(H.INVALID_ARGUMENT,a+n+c)}function nL(n,e){return n.some(t=>t.isEqual(e))}var tp=class{convertValue(e,t="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return da(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Lu].arrayValue?.values?.map(r=>It(r.doubleValue));return new no(t)}convertGeoPoint(e){return new Wo(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=bv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hf(e));default:return null}}convertTimestamp(e){let t=Qo(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_t.fromString(e);it(IV(r),9688,{name:e});let i=new Gf(r.get(1),r.get(3)),o=new fe(r.popFirst(5));return i.isEqual(t)||Ko(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Ku=class extends tp{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}};var rL="@firebase/firestore",iL="4.10.0";function oL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Av=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Kc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},pD=class extends Av{data(){return super.data()}};function cL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lp=class{},mD=class extends lp{};function lL(n,e,...t){let r=[];e instanceof lp&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof gD).length,a=o.filter(c=>c instanceof xv).length;if(s>1||s>0&&a>0)throw new te(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var xv=class n extends mD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return dL(e._query,t),new Zo(e.firestore,e.converter,Iv(e._query,t))}_parse(e){let t=ap(e.firestore);return(function(o,s,a,c,d,h,m){let w;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){aL(m,h);let M=[];for(let k of m)M.push(sL(c,o,k));w={arrayValue:{values:M}}}else w=sL(c,o,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||aL(m,h),w=ZV(a,s,m,h==="in"||h==="not-in");return Ut.create(d,h,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function uL(n,e,t){let r=e,i=Kc("where",n);return xv._create(i,r,t)}var gD=class n extends lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Lr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)dL(s,c),s=Iv(s,c)})(e._query,t),new Zo(e.firestore,e.converter,Iv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function sL(n,e,t){if(typeof(t=Tr(t))=="string"){if(t==="")throw new te(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YS(e)&&t.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_t.fromString(t));if(!fe.isDocumentKey(r))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return GS(n,new fe(r))}if(t instanceof $t)return GS(n,t._key);throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(t)}.`)}function aL(n,e){if(!Array.isArray(n)||n.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dL(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Yc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jc=class n extends Av{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Kc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Jc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jc._jsonSchema={type:jt("string",Jc._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};var td=class extends Jc{data(e={}){return super.data(e)}},Xc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new td(this._firestore,this._userDataWriter,r.key,r,new Yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new td(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new td(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:P7(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function P7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}Xc._jsonSchemaVersion="firestore/querySnapshot/1.0",Xc._jsonSchema={type:jt("string",Xc._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};function fL(n){n=Nn(n,$t);let e=Nn(n.firestore,vr),t=ed(e);return qV(t,n._key).then(r=>gL(e,n,r))}function pL(n){n=Nn(n,Zo);let e=Nn(n.firestore,vr),t=ed(e),r=new Ku(e);return cL(n._query),HV(t,n._query).then(i=>new Xc(e,r,n,i))}function mL(n,e,t){n=Nn(n,$t);let r=Nn(n.firestore,vr),i=hL(n.converter,e,t),o=ap(r);return Rv(r,[dD(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_i.none())])}function up(n,e,t,...r){n=Nn(n,$t);let i=Nn(n.firestore,vr),o=ap(i),s;return s=typeof(e=Tr(e))=="string"||e instanceof Wc?XV(o,"updateDoc",n._key,e,t,r):JV(o,"updateDoc",n._key,e),Rv(i,[s.toMutation(n._key,_i.exists(!0))])}function nd(n){return Rv(Nn(n.firestore,vr),[new Hu(n._key,_i.none())])}function rd(n,e){let t=Nn(n.firestore,vr),r=Zn(n),i=hL(n.converter,e),o=ap(n.firestore);return Rv(t,[dD(o,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_i.exists(!1))]).then(()=>r)}function id(n,...e){n=Tr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||oL(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(oL(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,s,a;if(n instanceof $t)s=Nn(n.firestore,vr),a=rp(n._key.path),o={next:d=>{e[r]&&e[r](gL(s,n,d))},error:e[r+1],complete:e[r+2]};else{let d=Nn(n,Zo);s=Nn(d.firestore,vr),a=d._query;let h=new Ku(s);o={next:m=>{e[r]&&e[r](new Xc(s,h,d,m))},error:e[r+1],complete:e[r+2]},cL(n._query)}let c=ed(s);return zV(c,a,i,o)}function Rv(n,e){let t=ed(n);return GV(t,e)}function gL(n,e,t){let r=t.docs.get(e._key),i=new Ku(n);return new Jc(n,i,e._key,r,new Yc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){TF(CA),bA(new EA("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new vr(new j_(r.getProvider("auth-internal")),new $_(s,r.getProvider("app-check-internal")),KF(s,i),s);return o=z({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),jd(rL,iL,e),jd(rL,iL,"esm2020")})();var yL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_L={};var Pv,vL;(function(){var n;function e(b,y){function E(){}E.prototype=y.prototype,b.D=y.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(I,T,R){for(var v=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)v[ut-2]=arguments[ut];return y.prototype[T].apply(I,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,y,E){E||(E=0);var I=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)I[T]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=b.g[0],E=b.g[1],T=b.g[2];var R=b.g[3],v=y+(R^E&(T^R))+I[0]+3614090360&4294967295;y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[1]+3905402710&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[3]+3250441966&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(R^E&(T^R))+I[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[5]+1200080426&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[7]+4249261313&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(R^E&(T^R))+I[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[9]+2336552879&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[11]+2304563134&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(R^E&(T^R))+I[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(T^y&(E^T))+I[13]+4254626195&4294967295,R=y+(v<<12&4294967295|v>>>20),v=T+(E^R&(y^E))+I[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=E+(y^T&(R^y))+I[15]+1236535329&4294967295,E=T+(v<<22&4294967295|v>>>10),v=y+(T^R&(E^T))+I[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[6]+3225465664&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[0]+3921069994&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(T^R&(E^T))+I[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[10]+38016083&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[4]+3889429448&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(T^R&(E^T))+I[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[14]+3275163606&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[8]+1163531501&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(T^R&(E^T))+I[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^T&(y^E))+I[2]+4243563512&4294967295,R=y+(v<<9&4294967295|v>>>23),v=T+(y^E&(R^y))+I[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(T^R))+I[12]+2368359562&4294967295,E=T+(v<<20&4294967295|v>>>12),v=y+(E^T^R)+I[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[8]+2272392833&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[14]+4259657740&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(E^T^R)+I[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[4]+1272893353&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[10]+3200236656&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(E^T^R)+I[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[0]+3936430074&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[6]+76029189&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(E^T^R)+I[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^T)+I[12]+3873151461&4294967295,R=y+(v<<11&4294967295|v>>>21),v=T+(R^y^E)+I[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=E+(T^R^y)+I[2]+3299628645&4294967295,E=T+(v<<23&4294967295|v>>>9),v=y+(T^(E|~R))+I[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[7]+1126891415&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[5]+4237533241&4294967295,E=T+(v<<21&4294967295|v>>>11),v=y+(T^(E|~R))+I[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[3]+2399980690&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[1]+2240044497&4294967295,E=T+(v<<21&4294967295|v>>>11),v=y+(T^(E|~R))+I[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[15]+4264355552&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[13]+1309151649&4294967295,E=T+(v<<21&4294967295|v>>>11),v=y+(T^(E|~R))+I[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~T))+I[11]+3174756917&4294967295,R=y+(v<<10&4294967295|v>>>22),v=T+(y^(R|~E))+I[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=E+(R^(T|~y))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var E=y-this.blockSize,I=this.B,T=this.h,R=0;R<y;){if(T==0)for(;R<=E;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<y;)if(I[T++]=b.charCodeAt(R++),T==this.blockSize){i(this,I),T=0;break}}else for(;R<y;)if(I[T++]=b[R++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var E=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=E&255,E/=256;for(this.u(b),b=Array(16),y=E=0;4>y;++y)for(var I=0;32>I;I+=8)b[E++]=this.g[y]>>>I&255;return b};function o(b,y){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=y(b)}function s(b,y){this.h=y;for(var E=[],I=!0,T=b.length-1;0<=T;T--){var R=b[T]|0;I&&R==y||(E[T]=R,I=!1)}this.g=E}var a={};function c(b){return-128<=b&&128>b?o(b,function(y){return new s([y|0],0>y?-1:0)}):new s([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return V(d(-b));for(var y=[],E=1,I=0;b>=E;I++)y[I]=b/E|0,E*=4294967296;return new s(y,0)}function h(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return V(h(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),I=m,T=0;T<b.length;T+=8){var R=Math.min(8,b.length-T),v=parseInt(b.substring(T,T+R),y);8>R?(R=d(Math.pow(y,R)),I=I.j(R).add(d(v))):(I=I.j(E),I=I.add(d(v)))}return I}var m=c(0),w=c(1),S=c(16777216);n=s.prototype,n.m=function(){if(k(this))return-V(this).m();for(var b=0,y=1,E=0;E<this.g.length;E++){var I=this.i(E);b+=(0<=I?I:4294967296+I)*y,y*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M(this))return"0";if(k(this))return"-"+V(this).toString(b);for(var y=d(Math.pow(b,6)),E=this,I="";;){var T=le(E,y).g;E=q(E,T.j(y));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=T,M(E))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function M(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function k(b){return b.h==-1}n.l=function(b){return b=q(this,b),k(b)?-1:M(b)?0:1};function V(b){for(var y=b.g.length,E=[],I=0;I<y;I++)E[I]=~b.g[I];return new s(E,~b.h).add(w)}n.abs=function(){return k(this)?V(this):this},n.add=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],I=0,T=0;T<=y;T++){var R=I+(this.i(T)&65535)+(b.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);I=v>>>16,R&=65535,v&=65535,E[T]=v<<16|R}return new s(E,E[E.length-1]&-2147483648?-1:0)};function q(b,y){return b.add(V(y))}n.j=function(b){if(M(this)||M(b))return m;if(k(this))return k(b)?V(this).j(V(b)):V(V(this).j(b));if(k(b))return V(this.j(V(b)));if(0>this.l(S)&&0>b.l(S))return d(this.m()*b.m());for(var y=this.g.length+b.g.length,E=[],I=0;I<2*y;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<b.g.length;T++){var R=this.i(I)>>>16,v=this.i(I)&65535,ut=b.i(T)>>>16,fn=b.i(T)&65535;E[2*I+2*T]+=v*fn,ee(E,2*I+2*T),E[2*I+2*T+1]+=R*fn,ee(E,2*I+2*T+1),E[2*I+2*T+1]+=v*ut,ee(E,2*I+2*T+1),E[2*I+2*T+2]+=R*ut,ee(E,2*I+2*T+2)}for(I=0;I<y;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=y;I<2*y;I++)E[I]=0;return new s(E,0)};function ee(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function Y(b,y){this.g=b,this.h=y}function le(b,y){if(M(y))throw Error("division by zero");if(M(b))return new Y(m,m);if(k(b))return y=le(V(b),y),new Y(V(y.g),V(y.h));if(k(y))return y=le(b,V(y)),new Y(V(y.g),y.h);if(30<b.g.length){if(k(b)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var E=w,I=y;0>=I.l(b);)E=$e(E),I=$e(I);var T=Ee(E,1),R=Ee(I,1);for(I=Ee(I,2),E=Ee(E,2);!M(I);){var v=R.add(I);0>=v.l(b)&&(T=T.add(E),R=v),I=Ee(I,1),E=Ee(E,1)}return y=q(b,T.j(y)),new Y(T,y)}for(T=m;0<=b.l(y);){for(E=Math.max(1,Math.floor(b.m()/y.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=d(E),v=R.j(y);k(v)||0<v.l(b);)E-=I,R=d(E),v=R.j(y);M(R)&&(R=w),T=T.add(R),b=q(b,v)}return new Y(T,b)}n.A=function(b){return le(this,b).h},n.and=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)&b.i(I);return new s(E,this.h&b.h)},n.or=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)|b.i(I);return new s(E,this.h|b.h)},n.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)^b.i(I);return new s(E,this.h^b.h)};function $e(b){for(var y=b.g.length+1,E=[],I=0;I<y;I++)E[I]=b.i(I)<<1|b.i(I-1)>>>31;return new s(E,b.h)}function Ee(b,y){var E=y>>5;y%=32;for(var I=b.g.length-E,T=[],R=0;R<I;R++)T[R]=0<y?b.i(R+E)>>>y|b.i(R+E+1)<<32-y:b.i(R+E);return new s(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vL=_L.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Pv=_L.Integer=s}).apply(typeof yL<"u"?yL:typeof self<"u"?self:typeof window<"u"?window:{});var Mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ts={};var EL,M7,wL,bL,IL,TL,CL,SL,DL;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mv=="object"&&Mv];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var D=0;D<l.length-1;D++){var F=l[D];if(!(F in g))break e;g=g[F]}l=l[l.length-1],D=g[l],f=f(D),f!=D&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var g=0,D=!1,F={next:function(){if(!D&&g<l.length){var j=g++;return{value:f(j,l[j]),done:!1}}return D=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,g){return g})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function m(l,f,g){if(!l)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,D),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function w(l,f,g){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,w.apply(null,arguments)}function S(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var D=g.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function M(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(D,F,j){for(var Q=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Q[qe-2]=arguments[qe];return f.prototype[F].apply(D,Q)}}function k(l){let f=l.length;if(0<f){let g=Array(f);for(let D=0;D<f;D++)g[D]=l[D];return g}return[]}function V(l,f){for(let g=1;g<arguments.length;g++){let D=arguments[g];if(c(D)){let F=l.length||0,j=D.length||0;l.length=F+j;for(let Q=0;Q<j;Q++)l[F+Q]=D[Q]}else l.push(D)}}class q{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ee(l){return/^[\s\xa0]*$/.test(l)}function Y(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function le(l){return le[" "](l),l}le[" "]=function(){};var $e=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Ee(l,f,g){for(let D in l)f.call(g,l[D],D,l)}function b(l,f){for(let g in l)f.call(void 0,l[g],g,l)}function y(l){let f={};for(let g in l)f[g]=l[g];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(l,f){let g,D;for(let F=1;F<arguments.length;F++){D=arguments[F];for(g in D)l[g]=D[g];for(let j=0;j<E.length;j++)g=E[j],Object.prototype.hasOwnProperty.call(D,g)&&(l[g]=D[g])}}function T(l){var f=1;l=l.split(":");let g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function R(l){a.setTimeout(()=>{throw l},0)}function v(){var l=Pe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ut{constructor(){this.h=this.g=null}add(f,g){let D=fn.get();D.set(f,g),this.h?this.h.next=D:this.g=D,this.h=D}}var fn=new q(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ce=!1,Pe=new ut,Tt=()=>{let l=a.Promise.resolve(void 0);ae=()=>{l.then(kn)}};var kn=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(g){R(g)}var f=fn;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ce=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var Ze=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l})();function Er(l,f){if(ot.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if($e){e:{try{le(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:pa[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Er.aa.h.call(this)}}M(Er,ot);var pa={2:"touch",3:"pen",4:"mouse"};Er.prototype.h=function(){Er.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),tr=0;function pn(l,f,g,D,F){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!D,this.ha=F,this.key=++tr,this.da=this.fa=!1}function wr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function bi(l){this.src=l,this.g={},this.h=0}bi.prototype.add=function(l,f,g,D,F){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var Q=sl(l,f,D,F);return-1<Q?(f=l[Q],g||(f.fa=!1)):(f=new pn(f,this.src,j,!!D,F),f.fa=g,l.push(f)),f};function ol(l,f){var g=f.type;if(g in l.g){var D=l.g[g],F=Array.prototype.indexOf.call(D,f,void 0),j;(j=0<=F)&&Array.prototype.splice.call(D,F,1),j&&(wr(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function sl(l,f,g,D){for(var F=0;F<l.length;++F){var j=l[F];if(!j.da&&j.listener==f&&j.capture==!!g&&j.ha==D)return F}return-1}var ma="closure_lm_"+(1e6*Math.random()|0),al={};function Ap(l,f,g,D,F){if(D&&D.once)return ll(l,f,g,D,F);if(Array.isArray(f)){for(var j=0;j<f.length;j++)Ap(l,f[j],g,D,F);return null}return g=co(g),l&&l[ft]?l.K(f,g,d(D)?!!D.capture:!!D,F):cl(l,f,g,!1,D,F)}function cl(l,f,g,D,F,j){if(!f)throw Error("Invalid event type");var Q=d(F)?!!F.capture:!!F,qe=ul(l);if(qe||(l[ma]=qe=new bi(l)),g=qe.add(f,g,D,Q,j),g.proxy)return g;if(D=vd(),g.proxy=D,D.src=l,D.listener=g,l.addEventListener)Ze||(F=Q),F===void 0&&(F=!1),l.addEventListener(f.toString(),D,F);else if(l.attachEvent)l.attachEvent(ga(f.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return g}function vd(){function l(g){return f.call(l.src,l.listener,g)}let f=v0;return l}function ll(l,f,g,D,F){if(Array.isArray(f)){for(var j=0;j<f.length;j++)ll(l,f[j],g,D,F);return null}return g=co(g),l&&l[ft]?l.L(f,g,d(D)?!!D.capture:!!D,F):cl(l,f,g,!0,D,F)}function Xt(l,f,g,D,F){if(Array.isArray(f))for(var j=0;j<f.length;j++)Xt(l,f[j],g,D,F);else D=d(D)?!!D.capture:!!D,g=co(g),l&&l[ft]?(l=l.i,f=String(f).toString(),f in l.g&&(j=l.g[f],g=sl(j,g,D,F),-1<g&&(wr(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete l.g[f],l.h--)))):l&&(l=ul(l))&&(f=l.g[f.toString()],l=-1,f&&(l=sl(f,g,D,F)),(g=-1<l?f[l]:null)&&Zt(g))}function Zt(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ft])ol(f.i,l);else{var g=l.type,D=l.proxy;f.removeEventListener?f.removeEventListener(g,D,l.capture):f.detachEvent?f.detachEvent(ga(g),D):f.addListener&&f.removeListener&&f.removeListener(D),(g=ul(f))?(ol(g,l),g.h==0&&(g.src=null,f[ma]=null)):wr(l)}}}function ga(l){return l in al?al[l]:al[l]="on"+l}function v0(l,f){if(l.da)l=!0;else{f=new Er(f,this);var g=l.listener,D=l.ha||l.src;l.fa&&Zt(l),l=g.call(D,f)}return l}function ul(l){return l=l[ma],l instanceof bi?l:null}var Ed="__closure_events_fn_"+(1e9*Math.random()>>>0);function co(l){return typeof l=="function"?l:(l[Ed]||(l[Ed]=function(f){return l.handleEvent(f)}),l[Ed])}function en(){gt.call(this),this.i=new bi(this),this.M=this,this.F=null}M(en,gt),en.prototype[ft]=!0,en.prototype.removeEventListener=function(l,f,g,D){Xt(this,l,f,g,D)};function rn(l,f){var g,D=l.F;if(D)for(g=[];D;D=D.F)g.push(D);if(l=l.M,D=f.type||f,typeof f=="string")f=new ot(f,l);else if(f instanceof ot)f.target=f.target||l;else{var F=f;f=new ot(D,l),I(f,F)}if(F=!0,g)for(var j=g.length-1;0<=j;j--){var Q=f.g=g[j];F=ss(Q,D,!0,f)&&F}if(Q=f.g=l,F=ss(Q,D,!0,f)&&F,F=ss(Q,D,!1,f)&&F,g)for(j=0;j<g.length;j++)Q=f.g=g[j],F=ss(Q,D,!1,f)&&F}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],D=0;D<g.length;D++)wr(g[D]);delete l.g[f],l.h--}}this.F=null},en.prototype.K=function(l,f,g,D){return this.i.add(String(l),f,!1,g,D)},en.prototype.L=function(l,f,g,D){return this.i.add(String(l),f,!0,g,D)};function ss(l,f,g,D){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,j=0;j<f.length;++j){var Q=f[j];if(Q&&!Q.da&&Q.capture==g){var qe=Q.listener,kt=Q.ha||Q.src;Q.fa&&ol(l.i,Q),F=qe.call(kt,D)!==!1&&F}}return F&&!D.defaultPrevented}function xp(l,f,g){if(typeof l=="function")g&&(l=w(l,g));else if(l&&typeof l.handleEvent=="function")l=w(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Rp(l){l.g=xp(()=>{l.g=null,l.i&&(l.i=!1,Rp(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class Pp extends gt{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Rp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function as(l){gt.call(this),this.h=l,this.g={}}M(as,gt);var cs=[];function dl(l){Ee(l.g,function(f,g){this.g.hasOwnProperty(g)&&Zt(f)},l),l.g={}}as.prototype.N=function(){as.aa.N.call(this),dl(this)},as.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ya=a.JSON.stringify,lo=a.JSON.parse,Mp=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ls(){}ls.prototype.h=null;function wd(l){return l.h||(l.h=l.i())}function us(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tn(){ot.call(this,"d")}M(tn,ot);function hl(){ot.call(this,"c")}M(hl,ot);var nr={},hs=null;function fl(){return hs=hs||new en}nr.La="serverreachability";function Np(l){ot.call(this,nr.La,l)}M(Np,ot);function br(l){let f=fl();rn(f,new Np(f))}nr.STAT_EVENT="statevent";function kp(l,f){ot.call(this,nr.STAT_EVENT,l),this.stat=f}M(kp,ot);function mn(l){let f=fl();rn(f,new kp(f,l))}nr.Ma="timingevent";function _a(l,f){ot.call(this,nr.Ma,l),this.size=f}M(_a,ot);function fs(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function bd(l,f,g,D,F,j){l.info(function(){if(l.g)if(j)for(var Q="",qe=j.split("&"),kt=0;kt<qe.length;kt++){var He=qe[kt].split("=");if(1<He.length){var Sn=He[0];He=He[1];var Dn=Sn.split("_");Q=2<=Dn.length&&Dn[1]=="type"?Q+(Sn+"="+He+"&"):Q+(Sn+"=redacted&")}}else Q=null;else Q=j;return"XMLHTTP REQ ("+D+") [attempt "+F+"]: "+f+`
`+g+`
`+Q})}function va(l,f,g,D,F,j,Q){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+F+"]: "+f+`
`+g+`
`+j+" "+Q})}function ms(l,f,g,D){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Op(l,g)+(D?" "+D:"")})}function Ii(l,f){l.info(function(){return"TIMEOUT: "+f})}ps.prototype.info=function(){};function Op(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var D=g[l];if(!(2>D.length)){var F=D[1];if(Array.isArray(F)&&!(1>F.length)){var j=F[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Q=1;Q<F.length;Q++)F[Q]=""}}}}return ya(g)}catch{return f}}var Ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wa;function ba(){}M(ba,ls),ba.prototype.g=function(){return new XMLHttpRequest},ba.prototype.i=function(){return{}},wa=new ba;function Ti(l,f,g,D){this.j=l,this.i=f,this.l=g,this.R=D||1,this.U=new as(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Id}function Id(){this.i=null,this.g="",this.h=!1}var Fp={},gs={};function ml(l,f,g){l.L=1,l.v=vl($r(f)),l.m=g,l.P=!0,gl(l,null)}function gl(l,f){l.F=Date.now(),_s(l),l.A=$r(l.v);var g=l.A,D=l.R;Array.isArray(D)||(D=[String(D)]),qp(g.i,"t",D),l.C=0,g=l.j.J,l.h=new Id,l.g=p(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Pp(w(l.Y,l,l.g),l.O)),f=l.U,g=l.g,D=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(cs[0]=F.toString()),F=cs);for(var j=0;j<F.length;j++){var Q=Ap(g,F[j],D||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),br(),bd(l.i,l.u,l.A,l.l,l.R,l.m)}Ti.prototype.ca=function(l){l=l.target;let f=this.M;f&&$n(l)==3?f.j():this.Y(l)},Ti.prototype.Y=function(l){try{if(l==this.g)e:{let Dn=$n(this.g);var f=this.g.Ba();let Al=this.g.Z();if(!(3>Dn)&&(Dn!=3||this.g&&(this.h.h||this.g.oa()||Qp(this.g)))){this.J||Dn!=4||f==7||(f==8||0>=Al?br(3):br(2)),yl(this);var g=this.g.Z();this.X=g;t:if(ys(this)){var D=Qp(this.g);l="";var F=D.length,j=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ci(this),vs(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(D[f],{stream:!(j&&f==F-1)});D.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=g==200,va(this.i,this.u,this.A,this.l,this.R,Dn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,kt=this.g;if((qe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(qe)){var He=qe;break t}}He=null}if(g=He)ms(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ia(this,g);else{this.o=!1,this.s=3,mn(12),Ci(this),vs(this);break e}}if(this.P){g=!0;let Wr;for(;!this.J&&this.C<Q.length;)if(Wr=uo(this,Q),Wr==gs){Dn==4&&(this.s=4,mn(14),g=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==Fp){this.s=4,mn(15),ms(this.i,this.l,Q,"[Invalid Chunk]"),g=!1;break}else ms(this.i,this.l,Wr,null),Ia(this,Wr);if(ys(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dn!=4||Q.length!=0||this.h.h||(this.s=1,mn(16),g=!1),this.o=this.o&&g,!g)ms(this.i,this.l,Q,"[Invalid Chunked Response]"),Ci(this),vs(this);else if(0<Q.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Dl(Sn),Sn.M=!0,mn(11))}}else ms(this.i,this.l,Q,null),Ia(this,Q);Dn==4&&Ci(this),this.o&&!this.J&&(Dn==4?Cn(this.j,this):(this.o=!1,_s(this)))}else Yp(this.g),g==400&&0<Q.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),Ci(this),vs(this)}}}catch{}};function ys(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function uo(l,f){var g=l.C,D=f.indexOf(`
`,g);return D==-1?gs:(g=Number(f.substring(g,D)),isNaN(g)?Fp:(D+=1,D+g>f.length?gs:(f=f.slice(D,D+g),l.C=D+g,f)))}Ti.prototype.cancel=function(){this.J=!0,Ci(this)};function _s(l){l.S=Date.now()+l.I,Vp(l,l.I)}function Vp(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=fs(w(l.ba,l),f)}function yl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ti.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Ii(this.i,this.A),this.L!=2&&(br(),mn(17)),Ci(this),this.s=2,vs(this)):Vp(this,this.S-l)};function vs(l){l.j.G==0||l.J||Cn(l.j,l)}function Ci(l){yl(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,dl(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ia(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Ad(g.h,l))){if(!l.K&&Ad(g.h,l)&&g.G==3){try{var D=g.Da.g.parse(f)}catch{D=null}if(Array.isArray(D)&&D.length==3){var F=D;if(F[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)fo(g),Ss(g);else break e;Sl(g),mn(18)}}else g.za=F[1],0<g.za-g.T&&37500>F[2]&&g.F&&g.v==0&&!g.C&&(g.C=fs(w(g.Za,g),6e3));if(1>=Dd(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ai(g,11)}else if((l.K||g.g==l)&&fo(g),!ee(f))for(F=g.Da.g.parse(f),f=0;f<F.length;f++){let He=F[f];if(g.T=He[0],He=He[1],g.G==2)if(He[0]=="c"){g.K=He[1],g.ia=He[2];let Sn=He[3];Sn!=null&&(g.la=Sn,g.j.info("VER="+g.la));let Dn=He[4];Dn!=null&&(g.Aa=Dn,g.j.info("SVER="+g.Aa));let Al=He[5];Al!=null&&typeof Al=="number"&&0<Al&&(D=1.5*Al,g.L=D,g.j.info("backChannelRequestTimeoutMs_="+D)),D=g;let Wr=l.g;if(Wr){let Jp=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jp){var j=D.h;j.g||Jp.indexOf("spdy")==-1&&Jp.indexOf("quic")==-1&&Jp.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ir(j,j.h),j.h=null))}if(D.D){let w0=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;w0&&(D.ya=w0,dt(D.I,D.D,w0))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),D=g;var Q=l;if(D.qa=u(D,D.J?D.ia:null,D.W),Q.K){rr(D.h,Q);var qe=Q,kt=D.L;kt&&(qe.I=kt),qe.B&&(yl(qe),_s(qe)),D.g=Q}else Vd(D);0<g.i.length&&Ra(g)}else He[0]!="stop"&&He[0]!="close"||Ai(g,7);else g.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ai(g,7):Il(g):He[0]!="noop"&&g.l&&g.l.ta(He),g.v=0)}}br(4)}catch{}}var Td=class{constructor(l,f){this.g=l,this.map=f}};function Cd(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sd(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Dd(l){return l.h?1:l.g?l.g.size:0}function Ad(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Ir(l,f){l.g?l.g.add(f):l.h=f}function rr(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Cd.prototype.cancel=function(){if(this.i=Es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Es(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let g of l.g.values())f=f.concat(g.D);return f}return k(l.i)}function Ta(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],g=l.length,D=0;D<g;D++)f.push(l[D]);return f}f=[],g=0;for(D in l)f[g++]=l[D];return f}function xd(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(let D in l)f[g++]=D;return f}}}function st(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=xd(l),D=Ta(l),F=D.length,j=0;j<F;j++)f.call(void 0,D[j],g&&g[j],l)}var Ca=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sa(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var D=l[g].indexOf("="),F=null;if(0<=D){var j=l[g].substring(0,D);F=l[g].substring(D+1)}else j=l[g];f(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ir(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ir){this.h=l.h,Da(this,l.j),this.o=l.o,this.g=l.g,_l(this,l.s),this.l=l.l;var f=l.i,g=new Aa;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Lp(this,g),this.m=l.m}else l&&(f=String(l).match(Ca))?(this.h=!1,Da(this,f[1]||"",!0),this.o=zr(f[2]||""),this.g=zr(f[3]||"",!0),_l(this,f[4]),this.l=zr(f[5]||"",!0),Lp(this,f[6]||"",!0),this.m=zr(f[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}ir.prototype.toString=function(){var l=[],f=this.j;f&&l.push(or(f,Rd,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(or(f,Rd,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(or(g,g.charAt(0)=="/"?Bp:jp,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",or(g,ws)),l.join("")};function $r(l){return new ir(l)}function Da(l,f,g){l.j=g?zr(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function _l(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Lp(l,f,g){f instanceof Aa?(l.i=f,El(l.i,l.h)):(g||(f=or(f,$p)),l.i=new Aa(f,l.h))}function dt(l,f,g){l.i.set(f,g)}function vl(l){return dt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function zr(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function or(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Up),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Up(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Rd=/[#\/\?@]/g,jp=/[#\?:]/g,Bp=/[#\?]/g,$p=/[#\?@]/g,ws=/#/g;function Aa(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Si(l){l.g||(l.g=new Map,l.h=0,l.i&&Sa(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Aa.prototype,n.add=function(l,f){Si(this),this.i=null,l=Hr(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function zp(l,f){Si(l),f=Hr(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function qr(l,f){return Si(l),f=Hr(l,f),l.g.has(f)}n.forEach=function(l,f){Si(this),this.g.forEach(function(g,D){g.forEach(function(F){l.call(f,F,D,this)},this)},this)},n.na=function(){Si(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let D=0;D<f.length;D++){let F=l[D];for(let j=0;j<F.length;j++)g.push(f[D])}return g},n.V=function(l){Si(this);let f=[];if(typeof l=="string")qr(this,l)&&(f=f.concat(this.g.get(Hr(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},n.set=function(l,f){return Si(this),this.i=null,l=Hr(this,l),qr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function qp(l,f,g){zp(l,f),0<g.length&&(l.i=null,l.g.set(Hr(l,f),k(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var D=f[g];let j=encodeURIComponent(String(D)),Q=this.V(D);for(D=0;D<Q.length;D++){var F=j;Q[D]!==""&&(F+="="+encodeURIComponent(String(Q[D]))),l.push(F)}}return this.i=l.join("&")};function Hr(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function El(l,f){f&&!l.j&&(Si(l),l.i=null,l.g.forEach(function(g,D){var F=D.toLowerCase();D!=F&&(zp(this,D),qp(this,F,g))},l)),l.j=f}function Hp(l,f){let g=new ps;if(a.Image){let D=new Image;D.onload=S(Bn,g,"TestLoadImage: loaded",!0,f,D),D.onerror=S(Bn,g,"TestLoadImage: error",!1,f,D),D.onabort=S(Bn,g,"TestLoadImage: abort",!1,f,D),D.ontimeout=S(Bn,g,"TestLoadImage: timeout",!1,f,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else f(!1)}function xa(l,f){let g=new ps,D=new AbortController,F=setTimeout(()=>{D.abort(),Bn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:D.signal}).then(j=>{clearTimeout(F),j.ok?Bn(g,"TestPingServer: ok",!0,f):Bn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),Bn(g,"TestPingServer: error",!1,f)})}function Bn(l,f,g,D,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),D(g)}catch{}}function Gp(){this.g=new Mp}function Pd(l,f,g){let D=g||"";try{st(l,function(F,j){let Q=F;d(F)&&(Q=ya(F)),f.push(D+j+"="+encodeURIComponent(Q))})}catch(F){throw f.push(D+"type="+encodeURIComponent("_badmap")),F}}function at(l){this.l=l.Ub||null,this.j=l.eb||!1}M(at,ls),at.prototype.g=function(){return new wl(this.l,this.j)},at.prototype.i=(function(l){return function(){return l}})({});function wl(l,f){en.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(wl,en),n=wl.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Is(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?bs(this):Is(this),this.readyState==3&&Wp(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,bs(this))},n.Qa=function(l){this.g&&(this.response=l,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Is(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Is(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Md(l){let f="";return Ee(l,function(g,D){f+=D,f+=":",f+=g,f+=`\r
`}),f}function Ts(l,f,g){e:{for(D in g){var D=!1;break e}D=!0}D||(g=Md(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):dt(l,f,g))}function We(l){en.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(We,en);var Kp=/^https?$/i,E0=["POST","PUT"];n=We.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,g,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wa.g(),this.v=this.o?wd(this.o):wd(wa),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(j){Cs(this,j);return}if(l=g||"",g=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var F in D)g.set(F,D[F]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let j of D.keys())g.set(j,D.get(j));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(E0,f,void 0))||D||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,Q]of g)this.g.setRequestHeader(j,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kd(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){Cs(this,j)}};function Cs(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Nd(l),ho(l)}function Nd(l){l.A||(l.A=!0,rn(l,"complete"),rn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,rn(this,"complete"),rn(this,"abort"),ho(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ho(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bl(this):this.bb())},n.bb=function(){bl(this)};function bl(l){if(l.h&&typeof s<"u"&&(!l.v[1]||$n(l)!=4||l.Z()!=2)){if(l.u&&$n(l)==4)xp(l.Ea,0,l);else if(rn(l,"readystatechange"),$n(l)==4){l.h=!1;try{let Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var D;if(D=Q===0){var F=String(l.D).match(Ca)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),D=!Kp.test(F?F.toLowerCase():"")}g=D}if(g)rn(l,"complete"),rn(l,"success");else{l.m=6;try{var j=2<$n(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Nd(l)}}finally{ho(l)}}}}function ho(l,f){if(l.g){kd(l);let g=l.g,D=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||rn(l,"ready");try{g.onreadystatechange=D}catch{}}}function kd(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function $n(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),lo(f)}};function Qp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Yp(l){let f={};l=(l.g&&2<=$n(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(ee(l[D]))continue;var g=T(l[D]);let F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let j=f[F]||[];f[F]=j,j.push(g)}b(f,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Od(l){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,l),this.cb=Gr("retryDelaySeedMs",1e4,l),this.Wa=Gr("forwardChannelMaxRetries",2,l),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Cd(l&&l.concurrentRequestLimit),this.Da=new Gp,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Od.prototype,n.la=8,n.G=1,n.connect=function(l,f,g,D){mn(0),this.W=l,this.H=f||{},g&&D!==void 0&&(this.H.OSID=g,this.H.OAID=D),this.F=this.X,this.I=u(this,null,this.W),Ra(this)};function Il(l){if(Tl(l),l.G==3){var f=l.U++,g=$r(l.I);if(dt(g,"SID",l.K),dt(g,"RID",f),dt(g,"TYPE","terminate"),Ds(l,g),f=new Ti(l,l.j,f),f.L=2,f.v=vl($r(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),_s(f)}po(l)}function Ss(l){l.g&&(Dl(l),l.g.cancel(),l.g=null)}function Tl(l){Ss(l),l.u&&(a.clearTimeout(l.u),l.u=null),fo(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ra(l){if(!Sd(l.h)&&!l.s){l.s=!0;var f=l.Ga;ae||Tt(),ce||(ae(),ce=!0),Pe.add(f,l),l.B=0}}function Cl(l,f){return Dd(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=fs(w(l.Ga,l,f),Ud(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let F=new Ti(this,this.j,l),j=this.o;if(this.S&&(j?(j=y(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(F.H=j,j=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var D=this.i[g];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(f+=D,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Di(this,F,f),g=$r(this.I),dt(g,"RID",l),dt(g,"CVER",22),this.D&&dt(g,"X-HTTP-Session-Id",this.D),Ds(this,g),j&&(this.O?f="headers="+encodeURIComponent(String(Md(j)))+"&"+f:this.m&&Ts(g,this.m,j)),Ir(this.h,F),this.Ua&&dt(g,"TYPE","init"),this.P?(dt(g,"$req",f),dt(g,"SID","null"),F.T=!0,ml(F,g,null)):ml(F,g,f),this.G=2}}else this.G==3&&(l?Fd(this,l):this.i.length==0||Sd(this.h)||Fd(this))};function Fd(l,f){var g;f?g=f.l:g=l.U++;let D=$r(l.I);dt(D,"SID",l.K),dt(D,"RID",g),dt(D,"AID",l.T),Ds(l,D),l.m&&l.o&&Ts(D,l.m,l.o),g=new Ti(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Di(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ir(l.h,g),ml(g,D,f)}function Ds(l,f){l.H&&Ee(l.H,function(g,D){dt(f,D,g)}),l.l&&st({},function(g,D){dt(f,D,g)})}function Di(l,f,g){g=Math.min(l.i.length,g);var D=l.l?w(l.l.Na,l.l,l):null;e:{var F=l.i;let j=-1;for(;;){let Q=["count="+g];j==-1?0<g?(j=F[0].g,Q.push("ofs="+j)):j=0:Q.push("ofs="+j);let qe=!0;for(let kt=0;kt<g;kt++){let He=F[kt].g,Sn=F[kt].map;if(He-=j,0>He)j=Math.max(0,F[kt].g-100),qe=!1;else try{Pd(Sn,Q,"req"+He+"_")}catch{D&&D(Sn)}}if(qe){D=Q.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,D}function Vd(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ae||Tt(),ce||(ae(),ce=!0),Pe.add(f,l),l.v=0}}function Sl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=fs(w(l.Fa,l),Ud(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=fs(w(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mn(10),Ss(this),Ld(this))};function Dl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ld(l){l.g=new Ti(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=$r(l.qa);dt(f,"RID","rpc"),dt(f,"SID",l.K),dt(f,"AID",l.T),dt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&dt(f,"TO",l.ja),dt(f,"TYPE","xmlhttp"),Ds(l,f),l.m&&l.o&&Ts(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=vl($r(f)),g.m=null,g.P=!0,gl(g,l)}n.Za=function(){this.C!=null&&(this.C=null,Ss(this),Sl(this),mn(19))};function fo(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Cn(l,f){var g=null;if(l.g==f){fo(l),Dl(l),l.g=null;var D=2}else if(Ad(l.h,f))g=f.D,rr(l.h,f),D=1;else return;if(l.G!=0){if(f.o)if(D==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;D=fl(),rn(D,new _a(D,g)),Ra(l)}else Vd(l);else if(F=f.s,F==3||F==0&&0<f.X||!(D==1&&Cl(l,f)||D==2&&Sl(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),F){case 1:Ai(l,5);break;case 4:Ai(l,10);break;case 3:Ai(l,6);break;default:Ai(l,2)}}}function Ud(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Ai(l,f){if(l.j.info("Error code "+f),f==2){var g=w(l.fb,l),D=l.Xa;let F=!D;D=new ir(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Da(D,"https"),vl(D),F?Hp(D.toString(),g):xa(D.toString(),g)}else mn(2);l.G=0,l.l&&l.l.sa(f),po(l),Tl(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))};function po(l){if(l.G=0,l.ka=[],l.l){let f=Es(l.h);(f.length!=0||l.i.length!=0)&&(V(l.ka,f),V(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function u(l,f,g){var D=g instanceof ir?$r(g):new ir(g);if(D.g!="")f&&(D.g=f+"."+D.g),_l(D,D.s);else{var F=a.location;D=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var j=new ir(null);D&&Da(j,D),f&&(j.g=f),F&&_l(j,F),g&&(j.l=g),D=j}return g=l.D,f=l.ya,g&&f&&dt(D,g,f),dt(D,"VER",l.la),Ds(l,D),D}function p(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new We(new at({eb:g})):new We(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function x(){}x.prototype.g=function(l,f){return new O(l,f)};function O(l,f){en.call(this),this.g=new Od(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ee(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ee(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new we(this)}M(O,en),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){Il(this.g)},O.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=ya(l),l=g);f.i.push(new Td(f.Ya++,l)),f.G==3&&Ra(f)},O.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,O.aa.N.call(this)};function U(l){tn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}M(U,tn);function J(){hl.call(this),this.status=1}M(J,hl);function we(l){this.g=l}M(we,_),we.prototype.ua=function(){rn(this.g,"a")},we.prototype.ta=function(l){rn(this.g,new U(l))},we.prototype.sa=function(l){rn(this.g,new J)},we.prototype.ra=function(){rn(this.g,"b")},x.prototype.createWebChannel=x.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,DL=ts.createWebChannelTransport=function(){return new x},SL=ts.getStatEventTarget=function(){return fl()},CL=ts.Event=nr,TL=ts.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,IL=ts.ErrorCode=Ea,pl.COMPLETE="complete",bL=ts.EventType=pl,us.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",en.prototype.listen=en.prototype.K,wL=ts.WebChannel=us,M7=ts.FetchXmlHttpFactory=at,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,EL=ts.XhrIo=We}).apply(typeof Mv<"u"?Mv:typeof self<"u"?self:typeof window<"u"?window:{});var AL="@firebase/firestore",xL="4.8.0";var Tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");var yp="11.10.0";var ld=new Wi("@firebase/firestore");function Ei(n,...e){if(ld.logLevel<=Xe.DEBUG){let t=e.map(VD);ld.debug(`Firestore (${yp}): ${n}`,...t)}}function $L(n,...e){if(ld.logLevel<=Xe.ERROR){let t=e.map(VD);ld.error(`Firestore (${yp}): ${n}`,...t)}}function N7(n,...e){if(ld.logLevel<=Xe.WARN){let t=e.map(VD);ld.warn(`Firestore (${yp}): ${n}`,...t)}}function VD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function er(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zL(n,r,t)}function zL(n,e,t){let r=`FIRESTORE (${yp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $L(r),new Error(r)}function Zc(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||zL(e,i,r)}var Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var el=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Nv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_D=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tn.UNAUTHENTICATED))}shutdown(){}},vD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ED=class{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zc(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new el;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new el,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{Ei("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Ei("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new el)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ei("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zc(typeof r.accessToken=="string",31837,{l:r}),new Nv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Zc(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}},wD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},bD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},kv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ID=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zc(this.o===void 0,3512);let r=o=>{o.error!=null&&Ei("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,Ei("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Ei("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Ei("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zc(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function k7(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function O7(){return new TextEncoder}var TD=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=k7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function jr(n,e){return n<e?-1:n>e?1:0}function F7(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return jr(r,i);{let o=O7(),s=V7(o.encode(RL(n,t)),o.encode(RL(e,t)));return s!==0?s:jr(r,i)}}t+=r>65535?2:1}return jr(n.length,e.length)}function RL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function V7(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return jr(n[t],e[t]);return jr(n.length,e.length)}var PL="__name__",Ov=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&er(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&er(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return jr(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):F7(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pv.fromString(e.substring(4,e.length-2))}},ns=class n extends Ov{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Ve(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},L7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,CD=class n extends Ov{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return L7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PL}static keyField(){return new n([PL])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Ve(Be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ve(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ve(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var rs=class n{constructor(e){this.path=e}static fromPath(e){return new n(ns.fromString(e))}static fromName(e){return new n(ns.fromString(e).popFirst(5))}static empty(){return new n(ns.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ns.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ns.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ns(e.slice()))}};function U7(n,e,t,r){if(e===!0&&r===!0)throw new Ve(Be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j7(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function B7(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":er(12329,{type:typeof n})}function $7(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=B7(n);throw new Ve(Be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jt(n,e){let t={typeString:n};return e&&(t.value=e),t}function _p(n,e){if(!j7(n))throw new Ve(Be.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ve(Be.INVALID_ARGUMENT,t);return!0}var ML=-62135596800,NL=1e6,dp=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*NL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ML)throw new Ve(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NL}_compareTo(e){return this.seconds===e.seconds?jr(this.nanoseconds,e.nanoseconds):jr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_p(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-ML;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};dp._jsonSchemaVersion="firestore/timestamp/1.0",dp._jsonSchema={type:Jt("string",dp._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};var SD=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};SD.UNKNOWN_ID=-1;function z7(n){return n.name==="IndexedDbTransactionError"}function q7(n){return n===0&&1/n==-1/0}var H7="remoteDocuments",qL="owner";var HL="mutationQueues";var GL="mutations";var WL="documentMutations",G7="remoteDocumentsV14";var KL="remoteDocumentGlobal";var QL="targets";var YL="targetDocuments";var JL="targetGlobal",XL="collectionParents";var ZL="clientMetadata";var e2="bundles";var t2="namedQueries";var W7="indexConfiguration";var K7="indexState";var Q7="indexEntries";var n2="documentOverlays";var Y7="globals";var J7=[HL,GL,WL,H7,QL,qL,JL,YL,ZL,KL,XL,e2,t2],B_e=[...J7,n2],X7=[HL,GL,WL,G7,QL,qL,JL,YL,ZL,KL,XL,e2,t2,n2],Z7=X7,eK=[...Z7,W7,K7,Q7];var $_e=[...eK,Y7];var ud=class n{constructor(e,t){this.comparator=e,this.root=t||so.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,so.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,so.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new od(this.root,e,this.comparator,!1)}getReverseIterator(){return new od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new od(this.root,e,this.comparator,!0)}},od=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},so=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw er(43730,{key:this.key,value:this.value});if(this.right.isRed())throw er(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw er(27949);return e+(this.isRed()?0:1)}};so.EMPTY=null,so.RED=!0,so.BLACK=!1;so.EMPTY=new class{constructor(){this.size=0}get key(){throw er(57766)}get value(){throw er(16141)}get color(){throw er(16727)}get left(){throw er(29726)}get right(){throw er(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new so(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Fv=class n{constructor(e){this.comparator=e,this.data=new ud(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Vv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var DD=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ha=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new DD("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ha.EMPTY_BYTE_STRING=new ha("");var tK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nK(n){if(Zc(!!n,39018),typeof n=="string"){let e=0,t=tK.exec(n);if(Zc(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hp(n.seconds),nanos:hp(n.nanos)}}function hp(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rK(n){return typeof n=="string"?ha.fromBase64String(n):ha.fromUint8Array(n)}var AD="(default)",xD=class n{constructor(e,t){this.projectId=e,this.database=t||AD}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===AD}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var r2="__type__",iK="__max__";var i2="__vector__",o2="value";function oK(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[r2])===null||t===void 0?void 0:t.stringValue)===i2}function sK(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iK}var q_e={mapValue:{fields:{[r2]:{stringValue:i2},[o2]:{arrayValue:{}}}}};var RD=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function aK(n){return new RD(n)}var H_e=new ud(rs.comparator);var G_e=new ud(rs.comparator);var W_e=new ud(rs.comparator),K_e=new Fv(rs.comparator);var Q_e=new Fv(jr);var kL,je;(je=kL||(kL={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";var Y_e=new Pv([4294967295,4294967295],0);var Lv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(hp(e.integerValue));else if("doubleValue"in e){let r=hp(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),q7(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=nK(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(rK(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?sK(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):oK(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):er(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=o2,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(hp(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),rs.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Lv.Ut=new Lv;var J_e=new Uint8Array(0);var s2=41943040,oo=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(s2,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);var cK=1048576;function yD(){return typeof document<"u"?document:null}var PD=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Ei("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var MD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new el,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(Be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var OL,FL;(FL=OL||(OL={})).Fa="default",FL.Cache="cache";function lK(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var VL=new Map;var a2="firestore.googleapis.com",LL=!0,Uv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a2,this.ssl=LL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:LL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cK)throw new Ve(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lK((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ve(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ve(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ve(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jv=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _D;switch(r.type){case"firstParty":return new bD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=VL.get(t);r&&(Ei("ComponentProvider","Removing Datastore"),VL.delete(t),r.terminate())})(this),Promise.resolve()}};function c2(n,e,t,r={}){var i;n=$7(n,jv);let o=Vo(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Tu(`https://${c}`),Cu("Firestore",!0)),s.host!==a2&&s.host!==c&&N7("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Gi(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Tn.MOCK_USER;else{h=a_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ve(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Tn(w)}n._authCredentials=new vD(new Nv(h,m))}}var ND=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},tl=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_p(t,n._jsonSchema))return new n(e,r||null,new rs(ns.fromString(t.referencePath)))}};tl._jsonSchemaVersion="firestore/documentReference/1.0",tl._jsonSchema={type:Jt("string",tl._jsonSchemaVersion),referencePath:Jt("string")};var kD=class n extends ND{constructor(e,t,r){super(e,t,aK(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new tl(this.firestore,null,new rs(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var UL="AsyncQueue",Bv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new PD(this,"async_queue_retry"),this.oc=()=>{let r=yD();r&&Ei(UL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=yD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=yD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new el;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!z7(e))throw e;Ei(UL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,$L("INTERNAL UNHANDLED ERROR: ",jL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=MD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&er(47125,{hc:jL(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function jL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var OD=class extends jv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Bv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Bv(e),this._firestoreClient=void 0,await e}}};function l2(n,e){let t=typeof n=="object"?n:Uo(),r=typeof n=="string"?n:e||AD,i=Zs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=s_("firestore");o&&c2(i,...o)}return i}var fp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ha.fromBase64String(e))}catch(t){throw new Ve(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ha.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_p(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};fp._jsonSchemaVersion="firestore/bytes/1.0",fp._jsonSchema={type:Jt("string",fp._jsonSchemaVersion),bytes:Jt("string")};var $v=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new CD(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pp=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return jr(this._lat,e._lat)||jr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(_p(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pp._jsonSchemaVersion="firestore/geoPoint/1.0",pp._jsonSchema={type:Jt("string",pp._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};var mp=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_p(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve(Be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};mp._jsonSchemaVersion="firestore/vectorValue/1.0",mp._jsonSchema={type:Jt("string",mp._jsonSchemaVersion),vectorValues:Jt("object")};var uK=new RegExp("[~\\*/\\[\\]]");function dK(n,e,t){if(e.search(uK)>=0)throw BL(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $v(...e.split("."))._internalPath}catch{throw BL(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BL(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ve(Be.INVALID_ARGUMENT,a+n+c)}var zv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new tl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new FD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(u2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},FD=class extends zv{data(){return super.data()}};function u2(n,e){return typeof e=="string"?dK(n,e):e instanceof $v?e._internalPath:e._delegate._internalPath}var sd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ad=class n extends zv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(u2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(Be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ad._jsonSchemaVersion="firestore/documentSnapshot/1.0",ad._jsonSchema={type:Jt("string",ad._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var cd=class extends ad{data(e={}){return super.data(e)}},gp=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cd(this._firestore,this._userDataWriter,r.key,r,new sd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:hK(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(Be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=TD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function hK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return er(61501,{type:n})}}gp._jsonSchemaVersion="firestore/querySnapshot/1.0",gp._jsonSchema={type:Jt("string",gp._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};(function(e,t=!0){(function(i){yp=i})(Ki),_r(new bn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new OD(new ED(r.getProvider("auth-internal")),new ID(s,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xD(d.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ht(AL,xL,e),ht(AL,xL,"esm2017")})();var vp=class{constructor(e){return e}},d2="firestore",LD=class{constructor(){return ea(d2)}};var UD=new ie("angularfire2.firestore-instances");function fK(n,e){let t=Ac(d2,n,e);return t&&new vp(t)}function pK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vp(r)}}var mK={provide:LD,deps:[[new an,UD]]},gK={provide:vp,useFactory:fK,deps:[[new an,UD],mi]};function h2(n,...e){return ht("angularfire",Qi.full,"fst"),vn([gK,mK,{provide:UD,useFactory:pK(n),multi:!0,deps:[Qe,ct,Yi,Bo,[new an,Nc],[new an,na],...e]}])}var f2=jo(l2,!0);var v2="firebasestorage.googleapis.com",yK="storageBucket",_K=120*1e3,vK=600*1e3;var ao=class n extends jn{constructor(e,t,r=0){super(jD(e),`Firebase Storage: ${t} (${jD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},os=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(os||{});function jD(n){return"storage/"+n}function EK(){let n="An unknown error occurred, please check the error payload for server response.";return new ao(os.UNKNOWN,n)}function wK(){return new ao(os.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bK(){return new ao(os.CANCELED,"User canceled the upload/download.")}function IK(n){return new ao(os.INVALID_URL,"Invalid URL '"+n+"'.")}function TK(n){return new ao(os.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function p2(n){return new ao(os.INVALID_ARGUMENT,n)}function E2(){return new ao(os.APP_DELETED,"The Firebase app was deleted.")}function CK(n){return new ao(os.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var is=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw TK(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(le){le.path.charAt(le.path.length-1)==="/"&&(le.path_=le.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function d(le){le.path_=decodeURIComponent(le.path)}let h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",S=new RegExp(`^https?://${m}/${h}/b/${i}/o${w}`,"i"),M={bucket:1,path:3},k=t===v2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",q=new RegExp(`^https?://${k}/${i}/${V}`,"i"),Y=[{regex:a,indices:c,postModify:o},{regex:S,indices:M,postModify:d},{regex:q,indices:{bucket:1,path:2},postModify:d}];for(let le=0;le<Y.length;le++){let $e=Y[le],Ee=$e.regex.exec(e);if(Ee){let b=Ee[$e.indices.bucket],y=Ee[$e.indices.path];y||(y=""),r=new n(b,y),$e.postModify(r);break}}if(r==null)throw IK(e);return r}},BD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function SK(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let d=!1;function h(...V){d||(d=!0,e.apply(null,V))}function m(V){i=setTimeout(()=>{i=null,n(S,c())},V)}function w(){o&&clearTimeout(o)}function S(V,...q){if(d){w();return}if(V){w(),h.call(null,V,...q);return}if(c()||s){w(),h.call(null,V,...q);return}r<64&&(r*=2);let Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,m(Y)}let M=!1;function k(V){M||(M=!0,w(),!d&&(i!==null?(V||(a=2),clearTimeout(i),m(0)):V||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,k(!0)},t),k}function DK(n){n(!1)}function AK(n){return n!==void 0}function m2(n,e,t,r){if(r<e)throw p2(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw p2(`Invalid value for '${n}'. Expected ${t} or less.`)}function xK(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var $D=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})($D||{});function RK(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var zD=class{constructor(e,t,r,i,o,s,a,c,d,h,m,w=!0,S=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=w,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,k)=>{this.resolve_=M,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new dd(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===$D.NO_ERROR,c=o.getStatus();if(!a||RK(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===$D.ABORT;r(!1,new dd(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new dd(d,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());AK(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=EK();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?E2():bK();s(c)}else{let c=wK();s(c)}};this.canceled_?t(!1,new dd(!1,null,!0)):this.backoffId_=SK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},dd=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function PK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function MK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function OK(n,e,t,r,i,o,s=!0,a=!1){let c=xK(n.urlParams),d=n.url+c,h=Object.assign({},n.headers);return NK(h,e),PK(h,t),MK(h,o),kK(h,r),new zD(d,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function FK(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function LK(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var g0e=256*1024;var qD=class n{constructor(e,t){this._service=e,t instanceof is?this._location=t:this._location=is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LK(this._location.path)}get storage(){return this._service}get parent(){let e=FK(this._location.path);if(e===null)return null;let t=new is(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw CK(e)}};function g2(n,e){let t=e?.[yK];return t==null?null:is.makeFromBucketSpec(t,n)}function UK(n,e,t,r={}){n.host=`${e}:${t}`;let i=Vo(e);i&&(Tu(`https://${n.host}/b`),Cu("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:a_(o,n.app.options.projectId))}var HD=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=v2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_K,this._maxUploadRetryTime=vK,this._requests=new Set,i!=null?this._bucket=is.makeFromBucketSpec(i,this._host):this._bucket=g2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=g2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qD(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new BD(E2());{let s=OK(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},y2="@firebase/storage",_2="0.13.14";var w2="storage";function b2(n=Uo(),e){n=pi(n);let r=Zs(n,w2).getImmediate({identifier:e}),i=s_("storage");return i&&I2(r,...i),r}function I2(n,e,t,r={}){UK(n,e,t,r)}function jK(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new HD(t,r,i,e,Ki)}function BK(){_r(new bn(w2,jK,"PUBLIC").setMultipleInstances(!0)),ht(y2,_2,""),ht(y2,_2,"esm2017")}BK();var Ep=class{constructor(e){return e}},T2="storage",GD=class{constructor(){return ea(T2)}};var WD=new ie("angularfire2.storage-instances");function $K(n,e){let t=Ac(T2,n,e);return t&&new Ep(t)}function zK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ep(r)}}var qK={provide:GD,deps:[[new an,WD]]},HK={provide:Ep,useFactory:$K,deps:[[new an,WD],mi]};function C2(n,...e){return ht("angularfire",Qi.full,"gcs"),vn([HK,qK,{provide:WD,useFactory:zK(n),multi:!0,deps:[Qe,ct,Yi,Bo,[new an,Nc],[new an,na],...e]}])}var S2=jo(b2,!0);function GK(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var D2=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",GK];var WK="firebase",KK="12.8.0";jd(WK,KK,"app");var wi={production:!1,firebase:{apiKey:"AIzaSyB_9AlTCYi27xFQkP64f5aU4OrQBZ7TE8k",authDomain:"agilityasturias-4a107.firebaseapp.com",projectId:"agilityasturias-4a107",storageBucket:"agilityasturias-4a107.firebasestorage.app",messagingSenderId:"898271086134",appId:"1:898271086134:web:10e005442180b8d2943a97",measurementId:"G-N6SP2XNR7Q"}};var Nt=class n{auth;firestore;currentUserSignal=pe(null);userProfileSignal=pe(null);checkAuthLoading=pe(!0);constructor(){let e;try{e=Ri()}catch{e=As(wi.firebase)}this.auth=xA(e),this.firestore=es(e),T0(this.auth,async t=>{this.currentUserSignal.set(t),t?await this.fetchUserProfile(t):this.userProfileSignal.set(null),this.checkAuthLoading.set(!1)})}async fetchUserProfile(e){let t=Zn(this.firestore,"users",e.uid),r=await fL(t);if(r.exists())this.userProfileSignal.set(r.data());else{let i={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",role:"user"};await mL(t,i),this.userProfileSignal.set(i)}}getAuthState(){return new Promise(e=>{let t=T0(this.auth,r=>{t(),e(r)})})}async loginWithGoogle(){let e=new SA;try{return(await AA(this.auth,e)).user}catch(t){throw console.error("Error logging in with Google",t),t}}async logout(){try{await DA(this.auth),this.currentUserSignal.set(null),this.userProfileSignal.set(null)}catch(e){throw console.error("Error logging out",e),e}}isLoggedIn=pt(()=>!!this.currentUserSignal());isMember=pt(()=>{let e=this.userProfileSignal();return["member","staff","admin"].includes(e?.role||"")});isStaff=pt(()=>{let e=this.userProfileSignal();return["staff","admin"].includes(e?.role||"")});isAdmin=pt(()=>this.userProfileSignal()?.role==="admin");async getAllUsers(){let e=Ur(this.firestore,"users");return(await pL(e)).docs.map(r=>r.data())}async updateUserRole(e,t){let r=Zn(this.firestore,"users",e);await up(r,{role:t});let i=this.currentUserSignal();if(i&&i.uid===e){let o=this.userProfileSignal();o&&this.userProfileSignal.set(de(z({},o),{role:t}))}}async updateDisplayName(e){let t=this.auth.currentUser;if(!t)throw new Error("No user logged in");let r=Zn(this.firestore,"users",t.uid);await up(r,{displayName:e}),await import("./chunk-3FBQDIHY.js").then(o=>o.updateProfile(t,{displayName:e}));let i=this.userProfileSignal();i&&this.userProfileSignal.set(de(z({},i),{displayName:e}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function QK(n,e){n&1&&(C(0,"p"),P(1,"Bienvenido a Agility Asturias. Inicia sesi\xF3n para gestionar tus reservas."),A())}function YK(n,e){if(n&1){let t=me();C(0,"div",6)(1,"button",7),K("click",function(){X(t);let i=$();return Z(i.login())}),ye(2,"img",8),P(3," Continuar con Google "),A()()}}function JK(n,e){if(n&1){let t=me();C(0,"div",9),ye(1,"img",10),C(2,"div")(3,"p",11),P(4),A(),C(5,"p",12),P(6),A(),C(7,"button",13),K("click",function(){X(t);let i=$();return Z(i.logout())}),P(8,"Cerrar Sesi\xF3n"),A()()()}if(n&2){let t=e.ngIf;N(),B("src",t.photoURL,Vt),N(3),he(t.displayName),N(2),he(t.email)}}var qv=class n{authService=L(Nt);constructor(){}async login(){try{await this.authService.loginWithGoogle()}catch(e){console.error(e)}}async logout(){await this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-area"],[4,"ngIf"],["class","google-btn-wrapper",4,"ngIf"],["class","user-info",4,"ngIf"],[1,"google-btn-wrapper"],[1,"btn-google",3,"click"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google logo"],[1,"user-info"],["alt","User photo",3,"src"],[1,"name"],[1,"email"],[1,"btn-logout",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),P(4,"Iniciar Sesi\xF3n"),A()(),ne(5,QK,2,0,"p",3)(6,YK,4,0,"div",4)(7,JK,9,3,"div",5),A()()),t&2&&(N(5),B("ngIf",!r.authService.currentUserSignal()),N(),B("ngIf",!r.authService.currentUserSignal()),N(),B("ngIf",r.authService.currentUserSignal()))},dependencies:[bt,Lt],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;max-width:400px;width:100%;text-align:center}.google-btn-wrapper[_ngcontent-%COMP%]{margin:20px 0;display:flex;justify-content:center}.btn-google[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;background-color:#fff;color:#444;border:1px solid #ddd;border-radius:4px;padding:10px 20px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s;width:100%}.btn-google[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.btn-logout[_ngcontent-%COMP%]{margin-top:10px;padding:6px 12px;background-color:#f44;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#c00}.user-info[_ngcontent-%COMP%]{text-align:center;margin-top:20px;display:flex;flex-direction:column;align-items:center}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-bottom:10px}"]})};var Hv=class n{constructor(e){this.location=e}get heroBackground(){return`linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${this.location.prepareExternalUrl("Images/Perros/Pumba.jpeg")}')`}static \u0275fac=function(t){return new(t||n)(ue(Ws))};static \u0275cmp=Ye({type:n,selectors:[["app-home"]],decls:116,vars:2,consts:[[1,"hero"],[1,"hero-overlay"],[1,"hero-content"],[1,"hero-badge"],[1,"subtitle"],[1,"hero-btns"],["routerLink","/contacto",1,"btn","btn-primary"],["routerLink","/galeria",1,"btn","btn-outline"],[1,"social-links"],["href","https://www.instagram.com/agility.asturias/","target","_blank","rel","noopener noreferrer","aria-label","Instagram",1,"social-btn","instagram"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"],["href","https://www.facebook.com/AgilityAsturias/photos","target","_blank","rel","noopener noreferrer","aria-label","Facebook",1,"social-btn","facebook"],["d","M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"],[1,"scroll-indicator"],[1,"arrow"],[1,"features-section"],[1,"container"],[1,"feature-card","fade-in"],[1,"icon-wrapper"],[1,"feature-card","fade-in","delay-1"],[1,"feature-card","fade-in","delay-2"],[1,"history-section"],[1,"section-intro"],[1,"timeline"],[1,"timeline-item","left"],[1,"timeline-icon"],[1,"timeline-content"],[1,"date"],[1,"timeline-item","right"],[1,"cta-section"],[1,"cta-content"],["routerLink","/contacto",1,"btn","btn-large"]],template:function(t,r){t&1&&(C(0,"section",0),ye(1,"div",1),C(2,"div",2)(3,"span",3),P(4,"Club Deportivo"),A(),C(5,"h1"),P(6,"Agility Asturias"),A(),C(7,"p",4),P(8,"M\xE1s que un deporte, una conexi\xF3n \xFAnica con tu perro."),A(),C(9,"div",5)(10,"a",6),P(11,"\xA1Ven a probar!"),A(),C(12,"a",7),P(13,"Ver Galer\xEDa"),A()(),C(14,"div",8)(15,"a",9),To(),C(16,"svg",10),ye(17,"path",11),A()(),Co(),C(18,"a",12),To(),C(19,"svg",10),ye(20,"path",13),A()()()(),Co(),C(21,"div",14)(22,"span"),P(23,"Descubre m\xE1s"),A(),C(24,"div",15),P(25,"\u2193"),A()()(),C(26,"section",16)(27,"div",17)(28,"div",18)(29,"div",19),P(30,"\u{1F415}"),A(),C(31,"h3"),P(32,"V\xEDnculo"),A(),C(33,"p"),P(34,"Refuerza la relaci\xF3n con tu perro a trav\xE9s del trabajo en equipo y la diversi\xF3n compartida."),A()(),C(35,"div",20)(36,"div",19),P(37,"\u{1F3C6}"),A(),C(38,"h3"),P(39,"Competici\xF3n"),A(),C(40,"p"),P(41,"Participa en eventos locales y nacionales con el apoyo de nuestros entrenadores expertos."),A()(),C(42,"div",21)(43,"div",19),P(44,"\u{1F333}"),A(),C(45,"h3"),P(46,"Naturaleza"),A(),C(47,"p"),P(48,"Disfruta de nuestras instalaciones al aire libre en un entorno perfecto para el deporte."),A()()()(),C(49,"section",22)(50,"div",17)(51,"h3"),P(52,"Historia del Agility"),A(),C(53,"p",23),P(54,"De entretenimiento en descansos a deporte mundial."),A(),C(55,"div",24)(56,"div",25)(57,"div",26),P(58,"\u{1F3C1}"),A(),C(59,"div",27)(60,"span",28),P(61,"1978 - El Origen"),A(),C(62,"h4"),P(63,"Crufts Dog Show"),A(),C(64,"p"),P(65,"El Agility naci\xF3 en el Reino Unido de la mano de "),C(66,"strong"),P(67,"John Varley"),A(),P(68,", entrenador en el prestigioso Crufts Dog Show. Buscaba una forma original de entretener a la audiencia durante los descansos de las pruebas de obediencia, inspir\xE1ndose en los concursos h\xEDpicos de salto."),A()()(),C(69,"div",29)(70,"div",26),P(71,"\u{1F6A7}"),A(),C(72,"div",27)(73,"span",28),P(74,"El Primer Circuito"),A(),C(75,"h4"),P(76,"Velocidad y Agilidad"),A(),C(77,"p"),P(78,"El circuito original constaba de saltos, t\xFAneles y aros dise\xF1ados para poner a prueba la agilidad. La primera demostraci\xF3n fue un \xE9xito tan rotundo entre participantes y p\xFAblico que r\xE1pidamente se convirti\xF3 en una disciplina propia."),A()()(),C(79,"div",25)(80,"div",26),P(81,"\u{1F30D}"),A(),C(82,"div",27)(83,"span",28),P(84,"A\xF1os 80 - Expansi\xF3n"),A(),C(85,"h4"),P(86,"Organizaci\xF3n Mundial"),A(),C(87,"p"),P(88,"El deporte creci\xF3 r\xE1pidamente. Se fundaron organizaciones clave como el "),C(89,"strong"),P(90,"Kennel Club"),A(),P(91," en Reino Unido y la "),C(92,"strong"),P(93,"USDAA"),A(),P(94," en Estados Unidos, estableciendo reglamentos y estandarizando la competici\xF3n a nivel global."),A()()(),C(95,"div",29)(96,"div",26),P(97,"\u{1F680}"),A(),C(98,"div",27)(99,"span",28),P(100,"Actualidad"),A(),C(101,"h4"),P(102,"Deporte de \xC9lite y Diversi\xF3n"),A(),C(103,"p"),P(104,"Hoy es uno de los deportes caninos m\xE1s populares, con modalidades como "),C(105,"em"),P(106,"Jumping"),A(),P(107," o agilidad por equipos. Requiere un gran entrenamiento y compenetraci\xF3n, pero sobre todo, sigue siendo una actividad divertida y emocionante para disfrutar con tu perro."),A()()()()()(),C(108,"section",30)(109,"div",31)(110,"h2"),P(111,"\xBFListo para empezar?"),A(),C(112,"p"),P(113,"\xDAnete a Agility Asturias y descubre todo lo que tu perro y t\xFA pod\xE9is lograr juntos."),A(),C(114,"a",32),P(115,"Contactar Ahora"),A()()()),t&2&&xo("background-image",r.heroBackground)},dependencies:[yu],styles:['[_nghost-%COMP%]{display:block;width:100%;overflow-x:hidden}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1.5rem}.hero[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-attachment:fixed;height:90vh;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center;position:relative}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0006,#000000d9);z-index:1}.hero-content[_ngcontent-%COMP%]{position:relative;z-index:2;max-width:800px;padding:2rem;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.hero-badge[_ngcontent-%COMP%]{display:inline-block;background-color:var(--accent-orange);color:#fff;padding:6px 12px;border-radius:20px;font-size:.9rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:1rem;box-shadow:0 4px 10px #0000004d;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4.5rem;margin:.5rem 0;font-weight:800;line-height:1.1;text-align:center;text-shadow:2px 2px 10px rgba(0,0,0,.9)}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;margin-bottom:2.5rem;color:#fff;text-shadow:1px 1px 4px rgba(0,0,0,.9)}.hero-btns[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center}.btn[_ngcontent-%COMP%]{padding:14px 28px;border-radius:30px;font-weight:600;text-decoration:none;transition:all .3s ease;font-size:1.1rem;cursor:pointer;display:inline-block}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:2px solid var(--primary-blue);box-shadow:0 4px 15px #00449466}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00337a;border-color:#00337a;transform:translateY(-3px);box-shadow:0 8px 20px #00449499}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid white}.btn-outline[_ngcontent-%COMP%]:hover{background-color:#fff;color:var(--primary-blue);transform:translateY(-3px)}.scroll-indicator[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:50%;transform:translate(-50%);z-index:2;display:flex;flex-direction:column;align-items:center;gap:10px;opacity:.8;animation:_ngcontent-%COMP%_bounce 2s infinite}.features-section[_ngcontent-%COMP%]{padding:5rem 0;background-color:#fff}.features-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px}.feature-card[_ngcontent-%COMP%]{background:#fff;padding:2.5rem;border-radius:16px;text-align:center;box-shadow:0 4px 20px #0000000d;transition:transform .3s ease,box-shadow .3s ease;border:1px solid #f0f0f0}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 15px 30px #0000001a;border-color:var(--accent-orange-light, #ffd8a8)}.icon-wrapper[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1.5rem;display:inline-block;padding:15px;background-color:#f9f9f9;border-radius:50%;width:80px;height:80px;line-height:80px;box-shadow:inset 0 0 10px #0000000d}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--primary-blue);font-size:1.5rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6}.history-section[_ngcontent-%COMP%]{padding:5rem 0;background-color:#f8f9fa;position:relative;overflow:hidden}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--primary-blue);font-size:2.5rem;font-weight:800}.section-intro[_ngcontent-%COMP%]{text-align:center;max-width:600px;margin:0 auto 4rem;color:#777;font-size:1.2rem}.timeline[_ngcontent-%COMP%]{position:relative;max-width:900px;margin:0 auto}.timeline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:4px;background-color:#e9ecef;top:0;bottom:0;left:50%;margin-left:-2px;border-radius:2px}.timeline-item[_ngcontent-%COMP%]{padding:10px 40px;position:relative;width:50%;box-sizing:border-box;opacity:0;animation:_ngcontent-%COMP%_fadeIn .8s ease-out forwards}.timeline-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.timeline-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.timeline-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}.timeline-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s}.left[_ngcontent-%COMP%]{left:0}.right[_ngcontent-%COMP%]{left:50%}.timeline-icon[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;right:-25px;top:20px;background-color:#fff;border:4px solid var(--accent-orange);border-radius:50%;z-index:10;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 4px 10px #0000001a}.right[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{left:-25px}.timeline-content[_ngcontent-%COMP%]{padding:25px;background-color:#fff;border-radius:12px;box-shadow:0 5px 20px #0000000d;position:relative;transition:transform .3s}.timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.timeline-content[_ngcontent-%COMP%]:after{content:"";position:absolute;top:30px;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;z-index:1}.left[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:after{right:-10px;border-left:10px solid white}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:after{left:-10px;border-right:10px solid white}.date[_ngcontent-%COMP%]{display:block;font-size:.85rem;color:var(--accent-orange);font-weight:700;margin-bottom:5px;text-transform:uppercase}.timeline-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:1.3rem}.timeline-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.95rem;line-height:1.6}.cta-section[_ngcontent-%COMP%]{padding:6rem 1rem;background-color:var(--primary-blue);background-image:linear-gradient(135deg,var(--primary-blue) 0%,#002a60 100%);color:#fff;text-align:center}.cta-content[_ngcontent-%COMP%]{max-width:700px;margin:0 auto}.cta-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8rem;margin-bottom:1.5rem}.cta-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:2.5rem;opacity:.9}.btn-large[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;padding:16px 40px;font-size:1.2rem;border-radius:50px;text-decoration:none;font-weight:700;display:inline-block;transition:all .3s;box-shadow:0 10px 20px #0003}.btn-large[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:#f93;box-shadow:0 15px 30px #0000004d}@media(max-width:768px){.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.hero-btn[_ngcontent-%COMP%]{flex-direction:column}.timeline[_ngcontent-%COMP%]:after{left:31px}.timeline-item[_ngcontent-%COMP%]{width:100%;padding-left:70px;padding-right:20px}.timeline-item.right[_ngcontent-%COMP%]{left:0}.timeline-icon[_ngcontent-%COMP%]{left:6px!important;right:auto}.left[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:after, .right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:after{left:-10px;right:auto;border-right:10px solid white;border-left:none}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translate(-50%)}40%{transform:translate(-50%,-10px)}60%{transform:translate(-50%,-5px)}}.social-links[_ngcontent-%COMP%]{margin-top:2rem;display:flex;gap:20px;justify-content:center}.social-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;background-color:#fff3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border-radius:50%;color:#fff;transition:all .3s ease;border:1px solid rgba(255,255,255,.3)}.social-btn[_ngcontent-%COMP%]:hover{transform:translateY(-5px);background-color:#fff}.social-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.instagram[_ngcontent-%COMP%]:hover{color:#e1306c}.facebook[_ngcontent-%COMP%]:hover{color:#1877f2}']})};var V2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ue(si),ue(ur))};static \u0275dir=wt({type:n})}return n})(),ZD=(()=>{class n extends V2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ao(n)))(i||n)}})();static \u0275dir=wt({type:n,features:[dr]})}return n})(),Dp=new ie("");var XK={provide:Dp,useExisting:Jr(()=>md),multi:!0};function ZK(){let n=Pr()?Pr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var eQ=new ie(""),md=(()=>{class n extends V2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!ZK())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ue(si),ue(ur),ue(eQ,8))};static \u0275dir=wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&K("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[qs([XK]),dr]})}return n})();function eA(n){return n==null||tA(n)===0}function tA(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var nA=new ie(""),rA=new ie(""),tQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,nl=class{static min(e){return nQ(e)}static max(e){return rQ(e)}static required(e){return iQ(e)}static requiredTrue(e){return oQ(e)}static email(e){return sQ(e)}static minLength(e){return aQ(e)}static maxLength(e){return cQ(e)}static pattern(e){return lQ(e)}static nullValidator(e){return L2()}static compose(e){return q2(e)}static composeAsync(e){return G2(e)}};function nQ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function rQ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function iQ(n){return eA(n.value)?{required:!0}:null}function oQ(n){return n.value===!0?null:{required:!0}}function sQ(n){return eA(n.value)||tQ.test(n.value)?null:{email:!0}}function aQ(n){return e=>{let t=e.value?.length??tA(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function cQ(n){return e=>{let t=e.value?.length??tA(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function lQ(n){if(!n)return L2;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(eA(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function L2(n){return null}function U2(n){return n!=null}function j2(n){return zs(n)?Ht(n):n}function B2(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function $2(n,e){return e.map(t=>t(n))}function uQ(n){return!n.validate}function z2(n){return n.map(e=>uQ(e)?e:t=>e.validate(t))}function q2(n){if(!n)return null;let e=n.filter(U2);return e.length==0?null:function(t){return B2($2(t,e))}}function H2(n){return n!=null?q2(z2(n)):null}function G2(n){if(!n)return null;let e=n.filter(U2);return e.length==0?null:function(t){let r=$2(t,e).map(j2);return Z0(r).pipe(Ke(B2))}}function W2(n){return n!=null?G2(z2(n)):null}function A2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function K2(n){return n._rawValidators}function Q2(n){return n._rawAsyncValidators}function KD(n){return n?Array.isArray(n)?n:[n]:[]}function Wv(n,e){return Array.isArray(n)?n.includes(e):n===e}function x2(n,e){let t=KD(e);return KD(n).forEach(i=>{Wv(t,i)||t.push(i)}),t}function R2(n,e){return KD(e).filter(t=>!Wv(n,t))}var Kv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=H2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=W2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},rl=class extends Kv{name;get formDirective(){return null}get path(){return null}},il=class extends Kv{_parent=null;name=null;valueAccessor=null},Qv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var e0=(()=>{class n extends Qv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(il,2))};static \u0275dir=wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&At("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[dr]})}return n})(),Y2=(()=>{class n extends Qv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(rl,10))};static \u0275dir=wt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&At("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[dr]})}return n})();var wp="VALID",Gv="INVALID",hd="PENDING",bp="DISABLED",fa=class{},Yv=class extends fa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ip=class extends fa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Tp=class extends fa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},fd=class extends fa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},QD=class extends fa{source;constructor(e){super(),this.source=e}},Sp=class extends fa{source;constructor(e){super(),this.source=e}};function iA(n){return(t0(n)?n.validators:n)||null}function dQ(n){return Array.isArray(n)?H2(n):n||null}function oA(n,e){return(t0(e)?e.asyncValidators:n)||null}function hQ(n){return Array.isArray(n)?W2(n):n||null}function t0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function J2(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[t])throw new G(1001,"")}function X2(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new G(1002,"")})}var pd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pt(this.statusReactive)}set status(e){Pt(()=>this.statusReactive.set(e))}_status=pt(()=>this.statusReactive());statusReactive=pe(void 0);get valid(){return this.status===wp}get invalid(){return this.status===Gv}get pending(){return this.status==hd}get disabled(){return this.status===bp}get enabled(){return this.status!==bp}errors;get pristine(){return Pt(this.pristineReactive)}set pristine(e){Pt(()=>this.pristineReactive.set(e))}_pristine=pt(()=>this.pristineReactive());pristineReactive=pe(!0);get dirty(){return!this.pristine}get touched(){return Pt(this.touchedReactive)}set touched(e){Pt(()=>this.touchedReactive.set(e))}_touched=pt(()=>this.touchedReactive());touchedReactive=pe(!1);get untouched(){return!this.touched}_events=new yt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(x2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(x2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(R2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(R2(e,this._rawAsyncValidators))}hasValidator(e){return Wv(this._rawValidators,e)}hasAsyncValidator(e){return Wv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Tp(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Tp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ip(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ip(!0,r))}markAsPending(e={}){this.status=hd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bp,this.errors=null,this._forEachChild(i=>{i.disable(de(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yv(this.value,r)),this._events.next(new fd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wp,this._forEachChild(r=>{r.enable(de(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wp||this.status===hd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yv(this.value,t)),this._events.next(new fd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bp:wp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=hd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=j2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new fd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?bp:this.errors?Gv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hd)?hd:this._anyControlsHaveStatus(Gv)?Gv:wp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ip(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Tp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){t0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hQ(this._rawAsyncValidators)}},Jv=class extends pd{constructor(e,t,r){super(iA(t),oA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){X2(this,!0,e),Object.keys(e).forEach(r=>{J2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,de(z({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Sp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var YD=class extends Jv{};var n0=new ie("",{factory:()=>r0}),r0="always";function Z2(n,e){return[...e.path,n]}function JD(n,e,t=r0){sA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pQ(n,e),gQ(n,e),mQ(n,e),fQ(n,e)}function P2(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Zv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Xv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function sA(n,e){let t=K2(n);e.validator!==null?n.setValidators(A2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Q2(n);e.asyncValidator!==null?n.setAsyncValidators(A2(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Xv(e._rawValidators,i),Xv(e._rawAsyncValidators,i)}function Zv(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=K2(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Q2(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Xv(e._rawValidators,r),Xv(e._rawAsyncValidators,r),t}function pQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&eU(n,e)})}function mQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&eU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function eU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function yQ(n,e){n==null,sA(n,e)}function _Q(n,e){return Zv(n,e)}function tU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vQ(n){return Object.getPrototypeOf(n.constructor)===ZD}function EQ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===md?t=o:vQ(o)?r=o:i=o}),i||r||t||null}function wQ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function M2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function N2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Cp=class extends pd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(iA(t),oA(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),t0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(N2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Sp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){M2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){M2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){N2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bQ=n=>n instanceof Cp;var IQ={provide:il,useExisting:Jr(()=>aA)},k2=Promise.resolve(),aA=(()=>{class n extends il{_changeDetectorRef;callSetDisabledState;control=new Cp;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){JD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){k2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&dc(r);k2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Z2(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ue(rl,9),ue(nA,10),ue(rA,10),ue(Dp,10),ue(Hs,8),ue(n0,8))};static \u0275dir=wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[qs([IQ]),dr,ji]})}return n})();var rU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=wt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var XD=class extends pd{constructor(e,t,r){super(iA(t),oA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){X2(this,!1,e),e.forEach((r,i)=>{J2(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],de(z({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Sp(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var TQ=(()=>{class n extends rl{callSetDisabledState;get submitted(){return Pt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=pt(()=>this._submittedReactive());_submittedReactive=pe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Zv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return JD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){P2(t.control||null,t,!1),wQ(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,EQ(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new QD(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(P2(r||null,t),bQ(i)&&(JD(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);yQ(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&_Q(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sA(this.form,this),this._oldForm&&Zv(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(ue(nA,10),ue(rA,10),ue(n0,8))};static \u0275dir=wt({type:n,features:[dr,ji]})}return n})();var iU=new ie("");var CQ={provide:il,useExisting:Jr(()=>cA)},cA=(()=>{class n extends il{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new vt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nU(this,o)}ngOnChanges(t){this._added||this._setUpControl(),tU(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Z2(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(ue(rl,13),ue(nA,10),ue(rA,10),ue(Dp,10),ue(iU,8))};static \u0275dir=wt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[qs([CQ]),dr,ji]})}return n})();var SQ={provide:rl,useExisting:Jr(()=>lA)},lA=(()=>{class n extends TQ{form=null;ngSubmit=new vt;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ao(n)))(i||n)}})();static \u0275dir=wt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&K("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[qs([SQ]),dr]})}return n})(),DQ={provide:Dp,useExisting:Jr(()=>i0),multi:!0};function oU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function AQ(n){return n.split(":")[0]}var i0=(()=>{class n extends ZD{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=L(ai).injector;destroyRef=L(Un);cdr=L(Hs);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Sh({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=oU(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=AQ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ao(n)))(i||n)}})();static \u0275dir=wt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&K("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[qs([DQ]),dr]})}return n})(),sU=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(oU(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ue(ur),ue(si),ue(i0,9))};static \u0275dir=wt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),xQ={provide:Dp,useExisting:Jr(()=>aU),multi:!0};function O2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function RQ(n){return n.split(":")[0]}var aU=(()=>{class n extends ZD{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],d=this._getOptionValue(c.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=RQ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ao(n)))(i||n)}})();static \u0275dir=wt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&K("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[qs([xQ]),dr]})}return n})(),cU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(O2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(O2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ue(ur),ue(si),ue(aU,9))};static \u0275dir=wt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var lU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=sr({})}return n})();function F2(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var uU=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return F2(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Jv(i,o)}record(t,r=null){let i=this._reduceControls(t);return new YD(i,r)}control(t,r,i){let o={};return this.useNonNullable?(F2(r)?o=r:(o.validators=r,o.asyncValidators=i),new Cp(t,de(z({},o),{nonNullable:!0}))):new Cp(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new XD(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Cp)return t;if(t instanceof pd)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var o0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:n0,useValue:t.callSetDisabledState??r0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=sr({imports:[lU]})}return n})(),dU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iU,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:n0,useValue:t.callSetDisabledState??r0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=sr({imports:[lU]})}return n})();var gd=class n{firestore;reservationsSignal=pe([]);unsubscribe=null;constructor(){let e;try{e=Ri()}catch{e=As(wi.firebase)}this.firestore=es(e);let t=Ur(this.firestore,"reservations");this.unsubscribe=id(t,r=>{let i=r.docs.map(o=>z({id:o.id},o.data()));this.reservationsSignal.set(i)},r=>{console.error("Error reading reservations:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getReservations(){return this.reservationsSignal}async addReservation(e){let t=Ur(this.firestore,"reservations");return await rd(t,e)}async deleteReservation(e){let t=Zn(this.firestore,`reservations/${e}`);return await nd(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var yd=class n{firestore;dogsSignal=pe([]);unsubscribe=null;constructor(){let e;try{e=Ri()}catch{e=As(wi.firebase)}this.firestore=es(e)}subscribeToUserDogs(e){this.unsubscribe&&this.unsubscribe();let t=Ur(this.firestore,"dogs"),r=lL(t,uL("userId","==",e));this.unsubscribe=id(r,i=>{let o=i.docs.map(s=>z({id:s.id},s.data()));this.dogsSignal.set(o)},i=>{console.error("Error reading dogs:",i)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getDogs(){return this.dogsSignal}async addDog(e){let t=Ur(this.firestore,"dogs");return await rd(t,e)}async deleteDog(e){let t=Zn(this.firestore,`dogs/${e}`);return await nd(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var Br=class n{toasts=pe([]);counter=0;show(e,t="info",r=3e3){let i=this.counter++,o={id:i,message:e,type:t,duration:r};this.toasts.update(s=>[...s,o]),r>0&&setTimeout(()=>{this.remove(i)},r)}success(e,t=3e3){this.show(e,"success",t)}error(e,t=4e3){this.show(e,"error",t)}info(e,t=3e3){this.show(e,"info",t)}warning(e,t=3e3){this.show(e,"warning",t)}remove(e){this.toasts.update(t=>t.filter(r=>r.id!==e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function PQ(n,e){if(n&1&&(C(0,"div",36),P(1),A()),n&2){let t=e.$implicit;N(),ke(" \u{1F43E} ",t," ")}}function MQ(n,e){if(n&1&&(C(0,"div",34),ne(1,PQ,2,1,"div",35),A()),n&2){let t=$().$implicit;N(),B("ngForOf",t.selectedDogs)}}function NQ(n,e){if(n&1&&(C(0,"li",31)(1,"span",32),P(2),A(),ne(3,MQ,2,1,"div",33),A()),n&2){let t=e.$implicit;N(2),he(t.userName),N(),B("ngIf",t.selectedDogs&&t.selectedDogs.length)}}function kQ(n,e){if(n&1&&(C(0,"div",29)(1,"ul"),ne(2,NQ,4,2,"li",30),A()()),n&2){let t=$(2).$implicit;N(2),B("ngForOf",t.reservations)}}function OQ(n,e){if(n&1){let t=me();C(0,"div",25)(1,"button",26),K("click",function(){X(t);let i=$().$implicit,o=$(2);return Z(o.toggleAttendees(i.id))}),C(2,"span"),P(3),A(),C(4,"span",27),P(5,"\u25BC"),A()(),ne(6,kQ,3,1,"div",28),A()}if(n&2){let t=$().$implicit,r=$(2);N(3),ke("Ver asistentes (",t.reservations.length,")"),N(),At("open",r.expandedSlots().has(t.id)),N(2),B("ngIf",r.expandedSlots().has(t.id))}}function FQ(n,e){if(n&1){let t=me();C(0,"button",37),K("click",function(){X(t);let i=$().$implicit,o=$(2);return Z(o.cancelSlot(i))}),P(1," Cancelar Reserva "),A()}}function VQ(n,e){if(n&1){let t=me();C(0,"button",38),K("click",function(){X(t);let i=$().$implicit,o=$(2);return Z(o.bookSlot(i))}),P(1),A()}if(n&2){let t=$().$implicit;B("disabled",t.currentBookings>=t.maxBookings),N(),ke(" ",t.currentBookings>=t.maxBookings?"Completo":"Reservar"," ")}}function LQ(n,e){if(n&1&&(C(0,"div",12)(1,"div",13)(2,"span",14),P(3),A()(),C(4,"div",15)(5,"div",16)(6,"span",17),P(7,"Disponibilidad:"),A(),C(8,"span",18),P(9),A()(),C(10,"div",19),ye(11,"div",20),A()(),ne(12,OQ,7,4,"div",21),C(13,"div",22),ne(14,FQ,2,0,"button",23)(15,VQ,2,2,"button",24),A()()),n&2){let t=e.$implicit;At("full",t.currentBookings>=t.maxBookings),N(3),kh("",t.startTime," - ",t.endTime),N(6),kh("",t.currentBookings," / ",t.maxBookings),N(2),xo("width",t.currentBookings/t.maxBookings*100,"%"),N(),B("ngIf",t.reservations&&t.reservations.length>0),N(2),B("ngIf",t.isBookedByCurrentUser),N(),B("ngIf",!t.isBookedByCurrentUser)}}function UQ(n,e){if(n&1&&(C(0,"div")(1,"div",6)(2,"h3",7),P(3),C(4,"span",8),P(5),cn(6,"date"),A()(),C(7,"span",9),P(8),A()(),C(9,"div",10),ne(10,LQ,16,11,"div",11),A()()),n&2){let t=e.$implicit;N(3),ke(" ",t.day," "),N(2),he(fr(6,8,t.slots[0].date,"dd/MM")),N(2),At("morning",t.period==="Ma\xF1ana")("afternoon",t.period==="Tarde"),N(),ke(" ",t.period," "),N(2),B("ngForOf",t.slots)}}function jQ(n,e){if(n&1){let t=me();C(0,"div",49)(1,"p"),P(2,"\u26A0\uFE0F No tienes perros registrados."),A(),C(3,"a",50),K("click",function(){X(t);let i=$(2);return Z(i.closeModal())}),P(4,"Ir a mi perfil para a\xF1adir uno"),A()()}}function BQ(n,e){if(n&1){let t=me();C(0,"label",51)(1,"input",52),K("change",function(){let i=X(t).$implicit,o=$(2);return Z(o.toggleDogSelection(i.name))}),A(),C(2,"span",53),P(3),A()()}if(n&2){let t=e.$implicit,r=$(2);N(),B("checked",r.selectedDogIds.has(t.name)),N(2),ke("\u{1F43E} ",t.name)}}function $Q(n,e){if(n&1){let t=me();C(0,"div",39),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),C(1,"div",40),K("click",function(i){return X(t),Z(i.stopPropagation())}),C(2,"h3"),P(3,"\u{1F4C5} Confirmar Reserva"),A(),C(4,"p"),P(5,"\xBFQuieres reservar plaza para el "),C(6,"strong"),P(7),A(),P(8," a las "),C(9,"strong"),P(10),A(),P(11,"?"),A(),C(12,"div",41)(13,"p",42),P(14,"Selecciona los perretes que vendr\xE1n:"),A(),ne(15,jQ,5,0,"div",43),C(16,"div",44),ne(17,BQ,4,2,"label",45),A()(),C(18,"div",46)(19,"button",47),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),P(20,"Cancelar"),A(),C(21,"button",48),K("click",function(){X(t);let i=$();return Z(i.confirmBooking())}),P(22),A()()()()}if(n&2){let t=$();N(7),he(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.day),N(3),he(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.startTime),N(5),B("ngIf",t.myDogs().length===0),N(2),B("ngForOf",t.myDogs()),N(4),B("disabled",t.myDogs().length>0&&t.selectedDogIds.size===0||t.isSubmitting()),N(),ke(" ",t.isSubmitting()?"Reservando...":"Confirmar Reserva"," ")}}var s0=class n{authService=L(Nt);reservationService=L(gd);dogService=L(yd);toastService=L(Br);isModalOpen=!1;isSubmitting=pe(!1);selectedSlotForBooking=null;myDogs=this.dogService.getDogs();selectedDogIds=new Set;expandedSlots=pe(new Set);selectedWeek=pe("current");staticSlots=this.generateSlotsDefinition();constructor(){Za(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}toggleWeek(e){this.selectedWeek.set(e),this.expandedSlots.set(new Set)}getDatesForWeek(e){let t={},r=new Date,i=r.getDate()-(r.getDay()||7)+1+e*7,o=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"];for(let c=0;c<7;c++){let d=new Date(r.setDate(i+c)),h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),w=String(d.getDate()).padStart(2,"0");t[o[c]]=`${h}-${m}-${w}`}let s=new Date,a=s.getDay()||7;s.setDate(s.getDate()-a+1+e*7),s.setHours(0,0,0,0);for(let c=0;c<7;c++){let d=new Date(s);d.setDate(s.getDate()+c);let h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),w=String(d.getDate()).padStart(2,"0");t[o[c]]=`${h}-${m}-${w}`}return t}slots=pt(()=>{let e=this.reservationService.getReservations()(),t=this.authService.currentUserSignal(),i=this.selectedWeek()==="current"?0:1,o=this.getDatesForWeek(i),s=new Date,a=s.getFullYear(),c=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0"),h=`${a}-${c}-${d}`;return this.staticSlots.map(w=>{let S=o[w.day],M=e.filter(q=>q.slotId===w.id&&q.date===S),k=M.reduce((q,ee)=>{let Y=ee.selectedDogs?.length||1;return q+Y},0),V=t?M.find(q=>q.userId===t.uid):void 0;return de(z({},w),{date:S,currentBookings:k,isBookedByCurrentUser:!!V,userReservationId:V?.id,reservations:M})}).filter(w=>w.date>=h)});groupedSlots=pt(()=>{let e=this.slots();return["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes"].map(r=>{let i=e.filter(a=>a.day===r);if(i.length===0)return null;let s=parseInt(i[0].startTime.split(":")[0])<16?"Ma\xF1ana":"Tarde";return{day:r,period:s,slots:i}}).filter(r=>r!==null)});generateSlotsDefinition(){let e=[],t=1;return["Lunes","Jueves"].forEach(o=>{e.push({id:t++,day:o,startTime:"10:00",endTime:"11:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:o,startTime:"11:30",endTime:"13:00",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:o,startTime:"13:00",endTime:"14:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1})}),["Martes","Mi\xE9rcoles","Viernes"].forEach(o=>{e.push({id:t++,day:o,startTime:"16:30",endTime:"18:00",currentBookings:0,maxBookings:7,isBookedByCurrentUser:!1}),e.push({id:t++,day:o,startTime:"18:00",endTime:"19:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:o,startTime:"19:30",endTime:"21:00",currentBookings:0,maxBookings:6,isBookedByCurrentUser:!1})}),e}bookSlot(e){if(!this.authService.currentUserSignal()){this.toastService.warning("Debes iniciar sesi\xF3n para reservar.");return}if(e.currentBookings>=e.maxBookings){this.toastService.error("Esta clase est\xE1 completa.");return}if(e.isBookedByCurrentUser){this.toastService.info("Ya tienes una reserva en este horario.");return}this.selectedSlotForBooking=e,this.selectedDogIds.clear(),this.isSubmitting.set(!1),this.isModalOpen=!0}toggleAttendees(e){let t=new Set(this.expandedSlots());t.has(e)?t.delete(e):t.add(e),this.expandedSlots.set(t)}toggleDogSelection(e){let t=new Set(this.selectedDogIds);t.has(e)?t.delete(e):t.add(e),this.selectedDogIds=t}closeModal(){this.isModalOpen=!1,this.selectedSlotForBooking=null,this.isSubmitting.set(!1)}async confirmBooking(){if(!this.selectedSlotForBooking||this.isSubmitting())return;if(this.selectedDogIds.size===0){this.toastService.warning("Por favor, selecciona al menos un perro.");return}let e=this.authService.currentUserSignal();if(!e)return;let t=this.authService.userProfileSignal();if(!e||!t)return;let r=this.slots().find(i=>i.id===this.selectedSlotForBooking.id);if(r){let i=this.selectedDogIds.size;if(r.currentBookings+i>r.maxBookings){let o=r.maxBookings-r.currentBookings;this.toastService.error(`No hay suficientes plazas. Intentas reservar para ${i} perro(s) pero solo quedan ${o} plazas.`);return}}this.isSubmitting.set(!0);try{let i=Array.from(this.selectedDogIds);await this.reservationService.addReservation({slotId:this.selectedSlotForBooking.id,userId:e.uid,userName:t.displayName||"Usuario",userEmail:e.email||"",day:this.selectedSlotForBooking.day,startTime:this.selectedSlotForBooking.startTime,date:this.selectedSlotForBooking.date,selectedDogs:i,createdAt:Date.now()}),this.closeModal(),this.toastService.success("\xA1Reserva confirmada con \xE9xito!")}catch(i){console.error("Error al reservar:",i),this.toastService.error("Hubo un error al realizar la reserva."),this.isSubmitting.set(!1)}}async cancelSlot(e){if(e.userReservationId&&confirm("\xBFQuieres cancelar tu reserva para esta clase?"))try{await this.reservationService.deleteReservation(e.userReservationId),this.toastService.success("Reserva cancelada correctamente.")}catch(t){console.error(t),this.toastService.error("Error al cancelar.")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-gestionar-reservas"]],decls:12,vars:6,consts:[[1,"reservations-container"],[1,"subtitle"],[1,"week-selector"],[3,"click"],[4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],[1,"header-container"],[1,"day-header"],[1,"date-label"],[1,"period-badge"],[1,"slots-grid"],["class","slot-card",3,"full",4,"ngFor","ngForOf"],[1,"slot-card"],[1,"slot-time"],[1,"time"],[1,"slot-status"],[1,"crowdedness"],[1,"label"],[1,"value"],[1,"progress-bar"],[1,"fill"],["class","attendees-section",4,"ngIf"],[1,"actions"],["class","book-btn cancel-btn",3,"click",4,"ngIf"],["class","book-btn",3,"disabled","click",4,"ngIf"],[1,"attendees-section"],[1,"toggle-attendees-btn",3,"click"],[1,"chevron"],["class","attendees-list",4,"ngIf"],[1,"attendees-list"],["class","attendee-item",4,"ngFor","ngForOf"],[1,"attendee-item"],[1,"attendee-name"],["class","attendee-dogs-container",4,"ngIf"],[1,"attendee-dogs-container"],["class","attendee-dog-single",4,"ngFor","ngForOf"],[1,"attendee-dog-single"],[1,"book-btn","cancel-btn",3,"click"],[1,"book-btn",3,"click","disabled"],[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"dog-selection"],[2,"margin","0 0 1rem 0","font-weight","600","color","#555"],["class","no-dogs-warning",4,"ngIf"],[1,"dog-checkboxes"],["class","dog-checkbox",4,"ngFor","ngForOf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"no-dogs-warning"],["routerLink","/perfil",3,"click"],[1,"dog-checkbox"],["type","checkbox",3,"change","checked"],[1,"dog-label"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"h2"),P(2,"Gestionar Reservas"),A(),C(3,"p",1),P(4,"Selecciona una franja horaria para reservar tu clase de Agility."),A(),C(5,"div",2)(6,"button",3),K("click",function(){return r.toggleWeek("current")}),P(7," Semana Actual "),A(),C(8,"button",3),K("click",function(){return r.toggleWeek("next")}),P(9," Semana Siguiente "),A()(),ne(10,UQ,11,11,"div",4),A(),ne(11,$Q,23,6,"div",5)),t&2&&(N(6),At("active",r.selectedWeek()==="current"),N(2),At("active",r.selectedWeek()==="next"),N(2),B("ngForOf",r.groupedSlots()),N(),B("ngIf",r.isModalOpen))},dependencies:[bt,ln,Lt,o0,Mo],styles:[".reservations-container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:2.5rem;background:#fff;border-radius:12px;box-shadow:0 8px 24px #0033661a;animation:_ngcontent-%COMP%_fadeIn .4s ease-out}h2[_ngcontent-%COMP%]{text-align:center;color:var(--primary-blue);font-size:2rem;margin-bottom:.5rem;font-weight:700}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:2.5rem;font-size:1.05rem}.week-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:0;margin-bottom:3rem;background:#f1f3f5;padding:4px;border-radius:50px;width:fit-content;margin-left:auto;margin-right:auto}.week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:10px 30px;border-radius:40px;cursor:pointer;font-weight:600;color:#666;transition:all .3s cubic-bezier(.25,.8,.25,1);font-size:.95rem}.week-selector[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;box-shadow:0 4px 12px #0363}.week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){color:var(--primary-blue);background-color:#0033660d}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:2.5rem 0 1.5rem;padding-bottom:.75rem;border-bottom:2px solid #f0f2f5}.day-header[_ngcontent-%COMP%]{margin:0;color:var(--text-main);font-size:1.4rem;font-weight:700;display:flex;align-items:baseline;gap:10px}.date-label[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);font-weight:500;background:#f8f9fa;padding:2px 8px;border-radius:6px}.period-badge[_ngcontent-%COMP%]{padding:.4rem 1rem;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.period-badge.morning[_ngcontent-%COMP%]{background-color:#fff8e1;color:#f57c00}.period-badge.afternoon[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}.slot-card[_ngcontent-%COMP%]{background:var(--white);border-radius:12px;padding:1.5rem;border:1px solid #e9ecef;transition:all .2s ease;display:flex;flex-direction:column;gap:1.25rem;position:relative;overflow:hidden}.slot-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #00000014;border-color:transparent}.slot-card.full[_ngcontent-%COMP%]{background:snow}.slot-card.full[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]{color:#999}.slot-time[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;color:var(--primary-blue);display:flex;justify-content:space-between;align-items:center}.crowdedness[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.85rem;color:var(--text-light);font-weight:500}.progress-bar[_ngcontent-%COMP%]{height:8px;background-color:#f0f2f5;border-radius:4px;overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--secondary-yellow),#fdd835);border-radius:4px;transition:width .4s ease}.slot-card.full[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{background:#ff5252}.attendees-section[_ngcontent-%COMP%]{margin-top:auto}.toggle-attendees-btn[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:8px 0;display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:.9rem;color:var(--text-light);transition:color .2s;font-weight:500}.toggle-attendees-btn[_ngcontent-%COMP%]:hover{color:var(--primary-blue);background-color:transparent}.chevron[_ngcontent-%COMP%]{transition:transform .3s ease;font-size:.75rem}.attendees-list[_ngcontent-%COMP%]{margin-top:8px;padding:12px;background-color:#f8f9fa;border-radius:8px;font-size:.9rem;border:1px solid #f0f2f5;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.attendee-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:8px;padding-bottom:8px;border-bottom:1px dashed #e0e0e0}.attendee-item[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.attendee-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-main)}.attendee-dogs-container[_ngcontent-%COMP%]{padding-left:0;margin-top:4px;display:flex;flex-wrap:wrap;gap:6px}.attendee-dog-single[_ngcontent-%COMP%]{font-size:.8rem;color:#2e7d32;background-color:#e8f5e9;padding:2px 8px;border-radius:12px;font-weight:500}.actions[_ngcontent-%COMP%]{margin-top:.5rem}.book-btn[_ngcontent-%COMP%]{width:100%;background:var(--primary-blue);color:#fff;border:none;padding:.85rem;border-radius:8px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .2s;box-shadow:0 4px 6px #00336626}.book-btn[_ngcontent-%COMP%]:hover:not([disabled]){transform:translateY(-1px);box-shadow:0 6px 12px #0363;background:#004080}.book-btn[disabled][_ngcontent-%COMP%]{background-color:#e0e0e0;color:#999;box-shadow:none;cursor:not-allowed;transform:none}.cancel-btn[_ngcontent-%COMP%]{background:#fff;color:#d32f2f;border:2px solid #ffcdd2;box-shadow:none}.cancel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#ffebee;border-color:#ef5350;box-shadow:0 2px 5px #d32f2f1a}.modal-backdrop[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:0;border-radius:16px;border:none;box-shadow:0 20px 40px #00000040;overflow:hidden;max-width:450px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding:1.5rem;background:#f8f9fa;border-bottom:1px solid #eee;font-size:1.3rem;display:flex;align-items:center;gap:10px}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 1.5rem;margin:1.5rem 0;color:var(--text-main);line-height:1.6}.dog-selection[_ngcontent-%COMP%]{padding:0 1.5rem}.no-dogs-warning[_ngcontent-%COMP%]{margin:0 1.5rem;border:1px solid #ffeeba;background:#fff3cd}.dog-checkboxes[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.dog-checkbox[_ngcontent-%COMP%]{display:block;position:relative}.dog-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.dog-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:12px;background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;font-weight:600;color:var(--text-light);transition:all .2s;cursor:pointer}.dog-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .dog-label[_ngcontent-%COMP%]{background:#e3f2fd;border-color:var(--primary-blue);color:var(--primary-blue);box-shadow:0 2px 5px #0033661a}.dog-checkbox[_ngcontent-%COMP%]:hover   .dog-label[_ngcontent-%COMP%]{border-color:#ccc}.checkmark[_ngcontent-%COMP%]{display:none}.modal-actions[_ngcontent-%COMP%]{padding:1.5rem;background:#f8f9fa;border-top:1px solid #eee;margin-top:1.5rem}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1rem;border-radius:8px}.btn-cancel[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;color:var(--text-light)}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f1f3f5;color:var(--text-main)}.btn-confirm[_ngcontent-%COMP%]{background:var(--primary-blue);color:#fff;box-shadow:0 4px 6px #0363}.btn-confirm[_ngcontent-%COMP%]:hover:not([disabled]){transform:translateY(-1px);box-shadow:0 6px 10px #00336640}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(max-width:600px){.reservations-container[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}.slots-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}.week-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:3rem}.week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:2px solid var(--primary-blue);color:var(--primary-blue);padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:600;transition:all .2s}.week-selector[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%], .week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--primary-blue);color:#fff}.date-label[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-left:10px;font-weight:400}.header-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto 1rem;border-bottom:2px solid var(--secondary-yellow);padding-bottom:.5rem;display:flex;align-items:center;gap:1rem}.day-header[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);font-size:1.5rem}.period-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:999px;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.period-badge.morning[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00;border:1px solid #ffe0b2}.period-badge.afternoon[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;max-width:900px;margin:0 auto 2rem}.slot-card[_ngcontent-%COMP%]{background:var(--white);border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000000d;border:1px solid rgba(0,0,0,.05);display:flex;flex-direction:column;gap:1.25rem;transition:transform .2s ease}.slot-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.slot-time[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:1.1rem}.day[_ngcontent-%COMP%]{color:var(--primary-blue)}.slot-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.crowdedness[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:var(--text-light)}.progress-bar[_ngcontent-%COMP%]{height:6px;background-color:#eee;border-radius:3px;overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background-color:var(--secondary-yellow);transition:width .3s ease}.slot-card.full[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{background-color:#e57373}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.book-btn[_ngcontent-%COMP%]{flex:1;background-color:var(--primary-blue);color:var(--white);border:none;padding:.75rem;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.book-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:color-mix(in srgb,var(--primary-blue),black 10%)}.book-btn[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background-color:#ef5350}.cancel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#d32f2f}.attendees-section[_ngcontent-%COMP%]{margin:10px 0}.toggle-attendees-btn[_ngcontent-%COMP%]{width:100%;background:none;border:1px solid #ddd;border-radius:6px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:.9rem;color:#555;background-color:#fafafa;transition:background .2s}.toggle-attendees-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.chevron[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.chevron.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.attendees-list[_ngcontent-%COMP%]{margin-top:5px;padding:10px;background-color:#f5f7fa;border-radius:6px;font-size:.9rem;border:1px solid #eee}.attendees-title[_ngcontent-%COMP%]{margin:0 0 5px;font-weight:600;color:#555;font-size:.85rem}.attendees-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.attendee-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:4px;border-bottom:1px dotted #ddd;padding-bottom:2px}.attendee-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.attendee-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:2px}.attendee-dogs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding-left:10px}.attendee-dog-single[_ngcontent-%COMP%]{font-size:.85rem;color:#444;background-color:#e8f5e9;padding:2px 6px;border-radius:4px;width:fit-content}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--primary-blue)}.dog-selection[_ngcontent-%COMP%]{margin:20px 0}.dog-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.dog-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:#f0f0f0;padding:8px 12px;border-radius:20px;transition:background .2s}.dog-checkbox[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.dog-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.dog-checkbox[_ngcontent-%COMP%]:has(input:checked){background-color:var(--primary-blue);color:#fff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn-cancel[_ngcontent-%COMP%]{background:none;border:1px solid #ddd;padding:8px 16px;border-radius:6px;cursor:pointer}.btn-confirm[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:700}.btn-confirm[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.no-dogs-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:10px;border-radius:6px;font-size:.9rem;margin-bottom:10px}.no-dogs-warning[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#856404;text-decoration:underline}"]})};var a0=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-contacto"]],decls:47,vars:0,consts:[[1,"contact-container"],[1,"contact-header"],[1,"subtitle"],[1,"contact-wrapper"],[1,"info-column"],[1,"info-card"],[1,"info-item"],[1,"icon-box"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-content"],["href","https://wa.me/34633484345","target","_blank","rel","noopener noreferrer",1,"whatsapp-btn"],[1,"secondary-text","phone-number"],[1,"divider"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],["href","mailto:agilityasturias@gmail.com",1,"email-link"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"map-column"],[1,"map-card"],["src",qw`https://maps.google.com/maps?q=Agility+Asturias,+Langreo&t=&z=15&ie=UTF8&iwloc=&output=embed`,"width","100%","height","100%","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,r){t&1&&(Wt(0,"div",0)(1,"div",1)(2,"h2"),P(3,"Cont\xE1ctanos"),En(),Wt(4,"p",2),P(5,"Estamos deseando conocerte a ti y a tu perro"),En()(),Wt(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),To(),Wt(11,"svg",8),Bi(12,"path",9),En()(),Co(),Wt(13,"div",10)(14,"h3"),P(15,"Tel\xE9fono / WhatsApp"),En(),Wt(16,"a",11),P(17," Chat en WhatsApp "),En(),Wt(18,"p",12),P(19,"633 48 43 45"),En()()(),Bi(20,"div",13),Wt(21,"div",6)(22,"div",7),To(),Wt(23,"svg",8),Bi(24,"path",14)(25,"polyline",15),En()(),Co(),Wt(26,"div",10)(27,"h3"),P(28,"Correo Electr\xF3nico"),En(),Wt(29,"a",16),P(30,"agilityasturias@gmail.com"),En()()(),Bi(31,"div",13),Wt(32,"div",6)(33,"div",7),To(),Wt(34,"svg",8),Bi(35,"path",17)(36,"circle",18),En()(),Co(),Wt(37,"div",10)(38,"h3"),P(39,"Ubicaci\xF3n"),En(),Wt(40,"address"),P(41," Antig\xFCo Campo de f\xFAtbol La Salle"),Bi(42,"br"),P(43," Langreo, Asturias, CP: 33939 "),En()()()()(),Wt(44,"div",19)(45,"div",20),Bi(46,"iframe",21),En()()()())},styles:[".contact-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.contact-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}h2[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:2.5rem;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--text-light)}.contact-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:stretch}.info-card[_ngcontent-%COMP%]{background:var(--white);padding:2.5rem;border-radius:12px;box-shadow:0 4px 20px #0000000d;height:100%;display:flex;flex-direction:column;justify-content:center}.info-item[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:flex-start}.icon-box[_ngcontent-%COMP%]{background-color:#e3f2fd;color:var(--primary-blue);width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.info-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-light);margin:0 0 .5rem;font-weight:600}.phone-number[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--text-main);margin-top:.5rem;letter-spacing:.5px}.whatsapp-btn[_ngcontent-%COMP%]{display:inline-block;background-color:#25d366;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:500;text-decoration:none;transition:background-color .2s;margin-bottom:.25rem}.whatsapp-btn[_ngcontent-%COMP%]:hover{background-color:#1ebc57}.email-link[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:1.1rem;font-weight:500;text-decoration:none}.email-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.secondary-text[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);margin-top:.25rem}address[_ngcontent-%COMP%]{font-style:normal;color:var(--text-main);line-height:1.6;font-size:1.1rem}.divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:2rem 0}.map-card[_ngcontent-%COMP%]{height:100%;min-height:400px;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000000d}@media(max-width:900px){.contact-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-card[_ngcontent-%COMP%]{min-height:300px}.info-card[_ngcontent-%COMP%]{padding:2rem}}@media(max-width:600px){h2[_ngcontent-%COMP%]{font-size:2rem}.contact-container[_ngcontent-%COMP%]{padding:1rem .5rem}.info-card[_ngcontent-%COMP%]{padding:1.5rem}.info-item[_ngcontent-%COMP%]{gap:1rem}.icon-box[_ngcontent-%COMP%]{width:40px;height:40px}.phone-number[_ngcontent-%COMP%]{font-size:1.25rem}.whatsapp-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};function zQ(n,e){if(n&1){let t=me();C(0,"div",5),K("click",function(){let i=X(t).index,o=$();return Z(o.openLightbox(i))}),ye(1,"img",6),C(2,"div",7)(3,"span"),P(4),A()()()}if(n&2){let t=e.$implicit;N(),B("src",t.url,Vt)("alt",t.alt),N(3),he(t.alt)}}function qQ(n,e){if(n&1){let t=me();C(0,"div",8),K("click",function(){X(t);let i=$();return Z(i.closeLightbox())}),C(1,"div",9),K("click",function(i){return X(t),Z(i.stopPropagation())}),C(2,"button",10),K("click",function(){X(t);let i=$();return Z(i.closeLightbox())}),P(3,"\xD7"),A(),C(4,"button",11),K("click",function(i){X(t);let o=$();return Z(o.prevImage(i))}),P(5,"\u276E"),A(),ye(6,"img",12),C(7,"button",13),K("click",function(i){X(t);let o=$();return Z(o.nextImage(i))}),P(8,"\u276F"),A(),C(9,"div",14),P(10),A()()()}if(n&2){let t=$();N(6),B("src",t.images()[t.currentImageIndex()].url,Vt)("alt",t.images()[t.currentImageIndex()].alt),N(4),ke(" ",t.images()[t.currentImageIndex()].alt," ")}}var c0=class n{images=pe([{url:"Images/Perros/Ana y Pompa.jpeg",alt:"Ana y Pompa"},{url:"Images/Perros/Carysse.jpeg",alt:"Carysse"},{url:"Images/Perros/Cris y Peca.jpeg",alt:"Cris y Peca"},{url:"Images/Perros/Diego Tuco y Ponga.jpeg",alt:"Diego Tuco y Ponga"},{url:"Images/Perros/Fiti\xF1o y Fits.jpeg",alt:"Fiti\xF1o y Fits"},{url:"Images/Perros/Golti.jpeg",alt:"Golti"},{url:"Images/Perros/Helena y Pumba.jpeg",alt:"Helena y Pumba"},{url:"Images/Perros/Jes\xFAs y Ginebra.jpeg",alt:"Jes\xFAs y Ginebra"},{url:"Images/Perros/Kinder.jpeg",alt:"Kinder"},{url:"Images/Perros/Leah.jpeg",alt:"Leah"},{url:"Images/Perros/Lyan y Boo.jpeg",alt:"Lyan y Boo"},{url:"Images/Perros/Lyan y Shaggy.jpeg",alt:"Lyan y Shaggy"},{url:"Images/Perros/Magda y Balto.jpeg",alt:"Magda y Balto"},{url:"Images/Perros/Marina-Chris Dafne.jpeg",alt:"Marina-Chris Dafne"},{url:"Images/Perros/Merle y Noly.jpeg",alt:"Merle y Noly"},{url:"Images/Perros/Moka.jpeg",alt:"Moka"},{url:"Images/Perros/Nala y Rosa.jpeg",alt:"Nala y Rosa"},{url:"Images/Perros/Narcea.jpeg",alt:"Narcea"},{url:"Images/Perros/Pompa.jpeg",alt:"Pompa"},{url:"Images/Perros/Pumba.jpeg",alt:"Pumba"},{url:"Images/Perros/Raylee.jpeg",alt:"Raylee"},{url:"Images/Perros/Sami.jpeg",alt:"Sami"},{url:"Images/Perros/Sami H.jpeg",alt:"Sami H"}]);lightboxOpen=pe(!1);currentImageIndex=pe(0);constructor(){this.shuffleImages()}shuffleImages(){let e=this.images();for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}this.images.set([...e])}openLightbox(e){this.currentImageIndex.set(e),this.lightboxOpen.set(!0),document.body.style.overflow="hidden"}closeLightbox(){this.lightboxOpen.set(!1),document.body.style.overflow="auto"}nextImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t+1)%r)}prevImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t-1+r)%r)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-galeria"]],decls:8,vars:3,consts:[[1,"gallery-container"],[1,"subtitle"],[1,"gallery-masonry"],["class","gallery-item",3,"click",4,"ngFor","ngForOf"],["class","lightbox",3,"click",4,"ngIf"],[1,"gallery-item",3,"click"],["loading","lazy",3,"src","alt"],[1,"overlay"],[1,"lightbox",3,"click"],[1,"lightbox-content",3,"click"],[1,"close-btn",3,"click"],[1,"nav-btn","prev",3,"click"],[1,"lightbox-img",3,"src","alt"],[1,"nav-btn","next",3,"click"],[1,"lightbox-caption"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"h2"),P(2,"Galer\xEDa"),A(),C(3,"p",1),P(4,"Momentos destacados de nuestro equipo."),A(),C(5,"div",2),ne(6,zQ,5,3,"div",3),A()(),ne(7,qQ,11,3,"div",4)),t&2&&(N(5),B("@listAnimation",r.images().length),N(),B("ngForOf",r.images()),N(),B("ngIf",r.lightboxOpen()))},dependencies:[bt,ln,Lt],styles:[".gallery-container[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:1400px;margin:0 auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--primary-blue);font-size:2.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:3rem;font-size:1.1rem}.gallery-masonry[_ngcontent-%COMP%]{column-count:3;column-gap:1.5rem}.gallery-item[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:1.5rem;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;cursor:pointer;position:relative;transition:transform .3s cubic-bezier(.25,.8,.25,1),box-shadow .3s ease}.gallery-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;transition:transform .5s ease}.gallery-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000004d;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.gallery-item[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-weight:600;border:1px solid white;padding:.5rem 1rem;border-radius:20px;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.lightbox[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90vh;display:flex;flex-direction:column;align-items:center}.lightbox-img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;border-radius:4px;box-shadow:0 5px 30px #00000080}.lightbox-caption[_ngcontent-%COMP%]{color:#fff;margin-top:1rem;font-size:1.1rem;font-weight:300}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:none;border:none;color:#fff;font-size:2.5rem;cursor:pointer;line-height:1;padding:0}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#ffffff1a;border:none;color:#fff;font-size:2rem;cursor:pointer;padding:1rem;border-radius:50%;transition:background .2s}.nav-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.prev[_ngcontent-%COMP%]{left:-80px}.next[_ngcontent-%COMP%]{right:-80px}@media(max-width:900px){.gallery-masonry[_ngcontent-%COMP%]{column-count:2}}@media(max-width:600px){.gallery-masonry[_ngcontent-%COMP%]{column-count:1}.nav-btn[_ngcontent-%COMP%]{padding:.5rem;font-size:1.5rem}.prev[_ngcontent-%COMP%]{left:-10px}.next[_ngcontent-%COMP%]{right:-10px}.close-btn[_ngcontent-%COMP%]{top:-30px;right:10px}}"],data:{animation:[pI("listAnimation",[gI("* => *",[yI(":enter",[Ec({opacity:0,transform:"translateY(20px)"}),_I(100,[mI("0.5s ease-out",Ec({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};var _d=class n{firestore;competitionsSignal=pe([]);unsubscribe=null;constructor(){let e;try{e=Ri()}catch{e=As(wi.firebase)}this.firestore=es(e);let t=Ur(this.firestore,"competitions");this.unsubscribe=id(t,r=>{let i=r.docs.map(o=>z({id:o.id},o.data()));this.competitionsSignal.set(i)},r=>{console.error("Error reading competitions:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getCompetitions(){return this.competitionsSignal}addCompetition(e){let t=Ur(this.firestore,"competitions");return rd(t,e)}updateCompetition(e){let t=Zn(this.firestore,`competitions/${e.id}`),o=e,{id:r}=o,i=Xp(o,["id"]);return up(t,i)}deleteCompetition(e){let t=Zn(this.firestore,`competitions/${e}`);return nd(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function HQ(n,e){if(n&1&&(C(0,"span"),P(1),cn(2,"date"),A()),n&2){let t=$().$implicit;N(),he(fr(2,1,t.date,"d"))}}function GQ(n,e){if(n&1&&(C(0,"div"),P(1),A()),n&2){let t=e.$implicit;N(),ke(" \u26A0\uFE0F Cierre: ",t.nombre||t.lugar," ")}}function WQ(n,e){if(n&1&&(C(0,"div",21)(1,"div",22),ne(2,GQ,2,1,"div",23),A()()),n&2){let t=$().$implicit;N(2),B("ngForOf",t.deadlines)}}function KQ(n,e){if(n&1){let t=me();C(0,"div",18),K("click",function(){let i=X(t).$implicit,o=$(2);return Z((i.competitions.length>0||i.deadlines.length>0)&&o.openModal(i))}),ne(1,HQ,3,4,"span",19)(2,WQ,3,1,"div",20),A()}if(n&2){let t=e.$implicit;At("other-month",t.isOtherMonth)("weekend",t.isWeekend)("competition",t.isCompetition)("other-event",t.isOtherEvent)("today",t.isToday),N(),B("ngIf",!t.isOtherMonth),N(),B("ngIf",t.deadlines.length>0&&!t.isOtherMonth)}}function QQ(n,e){if(n&1&&(C(0,"div",14)(1,"h2"),P(2),A(),C(3,"div",15)(4,"span"),P(5,"L"),A(),C(6,"span"),P(7,"M"),A(),C(8,"span"),P(9,"X"),A(),C(10,"span"),P(11,"J"),A(),C(12,"span"),P(13,"V"),A(),C(14,"span"),P(15,"S"),A(),C(16,"span"),P(17,"D"),A()(),C(18,"div",16),ne(19,KQ,3,12,"div",17),A()()),n&2){let t=e.$implicit;N(2),he(t.name),N(17),B("ngForOf",t.days)}}function YQ(n,e){if(n&1){let t=me();C(0,"div",33),K("click",function(){let i=X(t).$implicit,o=$(3);return Z(o.selectCompetitionFromList(i))}),C(1,"div",34)(2,"span",35),P(3),A(),C(4,"span",36),P(5),A()(),C(6,"div",37),P(7),A()()}if(n&2){let t=e.$implicit;xo("border-left",t.tipo==="otros"?"4px solid var(--other-bg)":"4px solid var(--accent-color)"),N(3),he(t.nombre||t.lugar),N(),At("type-other",t.tipo==="otros"),N(),ke(" ",t.tipo==="otros"?"Otro":"Competici\xF3n"," "),N(2),ke("\u{1F4CD} ",t.lugar)}}function JQ(n,e){if(n&1&&(C(0,"div",30)(1,"h3"),P(2,"\u{1F4C5} Eventos del D\xEDa"),A(),C(3,"div",31),ne(4,YQ,8,7,"div",32),A()()),n&2){let t=$(2);N(4),B("ngForOf",t.selectedCompetitions)}}function XQ(n,e){if(n&1){let t=me();C(0,"button",47),K("click",function(){X(t);let i=$(3);return Z(i.backToList())}),P(1," \u2190 Volver al listado "),A()}}function ZQ(n,e){if(n&1&&(C(0,"p",48),P(1),A()),n&2){let t=$(3);N(),ke(" \u{1F4CD} ",t.selectedCompetition.lugar," ")}}function eY(n,e){if(n&1&&(C(0,"span"),P(1),cn(2,"date"),A()),n&2){let t=$(3);N(),ke(" - ",fr(2,1,t.selectedCompetition.fechaFinEvento,"d MMM")," ")}}function tY(n,e){if(n&1&&(C(0,"div",52)(1,"span",53),P(2,"Cierre Inscripci\xF3n"),A(),C(3,"span",54),P(4),cn(5,"date"),A()()),n&2){let t=$(4);N(4),he(fr(5,1,t.selectedCompetition.fechaLimite,"shortDate"))}}function nY(n,e){if(n&1&&(C(0,"div",55)(1,"span",53),P(2,"Forma de Pago"),A(),C(3,"div",56),P(4),A()()),n&2){let t=$(4);N(4),he(t.selectedCompetition.formaPago)}}function rY(n,e){if(n&1&&(C(0,"div",49),ne(1,tY,6,4,"div",50)(2,nY,5,1,"div",51),A()),n&2){let t=$(3);N(),B("ngIf",t.selectedCompetition.fechaLimite),N(),B("ngIf",t.selectedCompetition.formaPago)}}function iY(n,e){if(n&1){let t=me();C(0,"div",57)(1,"img",58),K("click",function(){X(t);let i=$(3);return Z(i.expandImage())}),A(),C(2,"div",59),P(3,"Click para ampliar"),A()()}if(n&2){let t=$(3);N(),B("src",t.selectedCompetition.cartel,Vt)}}function oY(n,e){if(n&1&&(C(0,"div",60)(1,"a",61),P(2," Inscribirse Ahora "),A()()),n&2){let t=$(3);N(),B("href",t.selectedCompetition.enlace,Vt)}}function sY(n,e){if(n&1&&(C(0,"div",38),ne(1,XQ,2,0,"button",39),C(2,"div",40)(3,"h3"),P(4),A(),ne(5,ZQ,2,1,"p",41),C(6,"div",42),P(7),cn(8,"date"),ne(9,eY,3,4,"span",19),A()(),C(10,"div",43),ne(11,rY,3,2,"div",44)(12,iY,4,1,"div",45),A(),ne(13,oY,3,1,"div",46),A()),n&2){let t=$(2);N(),B("ngIf",t.selectedCompetitions.length>1),N(3),he(t.selectedCompetition.nombre||t.selectedCompetition.lugar),N(),B("ngIf",t.selectedCompetition.nombre&&t.selectedCompetition.lugar),N(),xo("background",t.selectedCompetition.tipo==="otros"?"var(--other-bg)":"var(--accent-color)")("color",t.selectedCompetition.tipo==="otros"?"white":"var(--primary-dark)"),N(),ke(" ",fr(8,12,t.selectedCompetition.fechaEvento,"d MMM")," "),N(2),B("ngIf",t.selectedCompetition.fechaFinEvento&&t.selectedCompetition.fechaFinEvento!==t.selectedCompetition.fechaEvento),N(2),B("ngIf",t.selectedCompetition.fechaLimite||t.selectedCompetition.formaPago),N(),B("ngIf",t.selectedCompetition.cartel),N(),B("ngIf",t.selectedCompetition.enlace)}}function aY(n,e){if(n&1){let t=me();C(0,"div",65)(1,"div",66),P(2),cn(3,"date"),C(4,"strong"),P(5),A()(),C(6,"button",67),K("click",function(){let i=X(t).$implicit,o=$(3);return Z(o.selectCompetitionFromList(i))}),P(7," Ver Evento "),A()()}if(n&2){let t=e.$implicit;N(2),ke(" ",fr(3,2,t.fechaLimite,"dd/MM/yyyy"),": \xDAltimo d\xEDa para "),N(3),he(t.nombre||t.lugar)}}function cY(n,e){if(n&1&&(C(0,"div",62)(1,"div",63),P(2," \u26A0\uFE0F Fin de Plazo de Inscripci\xF3n "),A(),ne(3,aY,8,5,"div",64),A()),n&2){let t=$(2);N(3),B("ngForOf",t.selectedDeadlines)}}function lY(n,e){if(n&1){let t=me();C(0,"div",24),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),C(1,"div",25),K("click",function(i){return X(t),Z(i.stopPropagation())}),C(2,"button",26),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),P(3,"\xD7"),A(),ne(4,JQ,5,1,"div",27)(5,sY,14,15,"div",28)(6,cY,4,1,"div",29),A()()}if(n&2){let t=$();N(4),B("ngIf",!t.selectedCompetition&&t.selectedCompetitions.length>0),N(),B("ngIf",t.selectedCompetition),N(),B("ngIf",t.selectedDeadlines.length>0&&!t.selectedCompetition)}}function uY(n,e){if(n&1){let t=me();C(0,"div",68),K("click",function(){X(t);let i=$();return Z(i.closeImage())}),C(1,"button",69),P(2,"\xD7"),A(),C(3,"div",70),ye(4,"img",71),A()()}if(n&2){let t=$();N(4),B("src",t.selectedCompetition.cartel,Vt)}}var l0=class n{constructor(e){this.competitionService=e;this.competitions=this.competitionService.getCompetitions()}currentYear=pe(new Date().getFullYear());monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];competitions;months=pt(()=>{let e=[],t=this.competitions(),r=this.currentYear();for(let i=0;i<12;i++)e.push({name:this.monthNames[i],days:this.getDaysInMonth(i,r,t)});return e});changeYear(e){this.currentYear.update(t=>t+e)}selectedCompetition=null;selectedCompetitions=[];selectedDeadlines=[];isModalOpen=!1;openModal(e){this.selectedCompetitions=e.competitions||[],this.selectedDeadlines=e.deadlines||[],this.selectedCompetitions.length===1?this.selectedCompetition=this.selectedCompetitions[0]:this.selectedCompetition=null,(this.selectedCompetitions.length>0||this.selectedDeadlines.length>0)&&(this.isModalOpen=!0,document.body.style.overflow="hidden")}selectCompetitionFromList(e){this.selectedCompetition=e}backToList(){this.selectedCompetition=null}getDaysInMonth(e,t,r){let i=[],o=new Date(t,e,1),s=(o.getDay()+6)%7,a=new Date;for(let c=0;c<s;c++)i.push({date:new Date(t,e,-c),isCompetition:!1,isOtherEvent:!1,isWeekend:!1,isOtherMonth:!0,isToday:!1,deadlines:[],competitions:[]});for(;o.getMonth()===e;){let c=o.getDay(),d=c===0||c===6,h=o.getFullYear(),m=(o.getMonth()+1).toString().padStart(2,"0"),w=o.getDate().toString().padStart(2,"0"),S=`${h}-${m}-${w}`,M=r.filter(Y=>{let le=Y.fechaEvento,$e=Y.fechaFinEvento||Y.fechaEvento;return S>=le&&S<=$e}),k=M.some(Y=>!Y.tipo||Y.tipo==="competicion"),V=M.some(Y=>Y.tipo==="otros"),q=o.getDate()===a.getDate()&&o.getMonth()===a.getMonth()&&o.getFullYear()===a.getFullYear(),ee=r.filter(Y=>Y.fechaLimite===S);i.push({date:new Date(o),isCompetition:k,isOtherEvent:V,isWeekend:d,isOtherMonth:!1,isToday:q,deadlines:ee,competitions:M,competitionDetails:M[0]}),o.setDate(o.getDate()+1)}return i}closeModal(){this.isModalOpen=!1,this.selectedCompetition=null,this.selectedCompetitions=[],this.isImageExpanded=!1,document.body.style.overflow="auto"}isImageExpanded=!1;expandImage(){this.isImageExpanded=!0}closeImage(){this.isImageExpanded=!1}static \u0275fac=function(t){return new(t||n)(ue(_d))};static \u0275cmp=Ye({type:n,selectors:[["app-calendario"]],decls:28,vars:4,consts:[[1,"calendar-container"],[1,"calendar-header"],[1,"year-navigation"],[1,"nav-btn",3,"click"],[1,"material-icons-outlined"],[1,"calendar-legend"],[1,"legend-item"],[1,"dot","competition-dot"],[1,"dot","other-dot"],[1,"dot","today-dot"],[1,"months-grid"],["class","month-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","image-overlay",3,"click",4,"ngIf"],[1,"month-card"],[1,"weekdays"],[1,"days-grid"],["class","day",3,"other-month","weekend","competition","other-event","today","click",4,"ngFor","ngForOf"],[1,"day",3,"click"],[4,"ngIf"],["class","deadline-dot",4,"ngIf"],[1,"deadline-dot"],[1,"deadline-tooltip"],[4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"modal-content","glass-effect",3,"click"],[1,"close-btn",3,"click"],["class","competition-list-view",4,"ngIf"],["class","competition-details",4,"ngIf"],["class","deadlines-section",4,"ngIf"],[1,"competition-list-view"],[1,"events-list"],["class","event-card-preview",3,"border-left","click",4,"ngFor","ngForOf"],[1,"event-card-preview",3,"click"],[1,"event-preview-header"],[1,"event-name"],[1,"event-type-badge"],[1,"event-preview-location"],[1,"competition-details"],["class","back-btn",3,"click",4,"ngIf"],[1,"modal-header"],["style","margin: 5px 0 10px 0; color: #555; font-size: 1rem; display: flex; align-items: center; gap: 5px;",4,"ngIf"],[1,"modal-date-badge"],[1,"modal-body"],["class","info-grid",4,"ngIf"],["class","poster-container",4,"ngIf"],["class","modal-actions",4,"ngIf"],[1,"back-btn",3,"click"],[2,"margin","5px 0 10px 0","color","#555","font-size","1rem","display","flex","align-items","center","gap","5px"],[1,"info-grid"],["class","info-item",4,"ngIf"],["class","info-item full-width",4,"ngIf"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-item","full-width"],[1,"payment-info"],[1,"poster-container"],["alt","Cartel","title","Click para ampliar",1,"modal-poster",3,"click","src"],[1,"expand-hint"],[1,"modal-actions"],["target","_blank",1,"btn-register",3,"href"],[1,"deadlines-section"],[1,"deadlines-title"],["class","deadlines-list-item",4,"ngFor","ngForOf"],[1,"deadlines-list-item"],[1,"deadline-info"],[1,"view-event-btn",3,"click"],[1,"image-overlay",3,"click"],[1,"close-overlay-btn"],[1,"image-wrapper"],["alt","Cartel Ampliado",3,"src"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),K("click",function(){return r.changeYear(-1)}),C(4,"span",4),P(5,"<"),A()(),C(6,"h1"),P(7),A(),C(8,"button",3),K("click",function(){return r.changeYear(1)}),C(9,"span",4),P(10,">"),A()()(),C(11,"div",5)(12,"div",6),ye(13,"span",7),C(14,"span"),P(15,"Competici\xF3n"),A()(),C(16,"div",6),ye(17,"span",8),C(18,"span"),P(19,"Otros Eventos"),A()(),C(20,"div",6),ye(21,"span",9),C(22,"span"),P(23,"Hoy"),A()()()(),C(24,"div",10),ne(25,QQ,20,2,"div",11),A(),ne(26,lY,7,3,"div",12)(27,uY,5,1,"div",13),A()),t&2&&(N(7),he(r.currentYear()),N(18),B("ngForOf",r.months()),N(),B("ngIf",r.isModalOpen),N(),B("ngIf",r.isImageExpanded))},dependencies:[bt,ln,Lt,Mo],styles:["[_nghost-%COMP%]{display:block;--primary-color: #003366;--primary-dark: #001f3f;--accent-color: #FFCC00;--text-color: #333;--text-light: #666;--bg-light: #f4f7f9;--card-bg: #ffffff;--weekend-bg: #f8f9fa;--competition-bg: linear-gradient(135deg, #003366 0%, #00509e 100%);--other-bg: linear-gradient(135deg, #2e7d32 0%, #43a047 100%);--shadow-sm: 0 4px 6px rgba(0, 0, 0, .05);--shadow-md: 0 8px 15px rgba(0, 0, 0, .1);--shadow-lg: 0 20px 40px rgba(0, 0, 0, .2);--radius: 12px}.calendar-container[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:1400px;margin:0 auto;font-family:Outfit,Segoe UI,sans-serif;color:var(--text-color)}.calendar-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:3rem;gap:1.5rem}.year-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;background:#fff;padding:.75rem 1.5rem;border-radius:50px;box-shadow:var(--shadow-sm)}.year-navigation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--primary-color);margin:0;line-height:1}.nav-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:var(--text-light);transition:all .2sease;display:flex;align-items:center;justify-content:center;padding:.5rem;border-radius:50%}.nav-btn[_ngcontent-%COMP%]:hover{background-color:#f0f4f8;color:var(--primary-color);transform:scale(1.1)}.calendar-legend[_ngcontent-%COMP%]{display:flex;gap:1.5rem;background:#fff;padding:.75rem 1.5rem;border-radius:50px;box-shadow:var(--shadow-sm);font-size:.9rem;font-weight:500}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.competition-dot[_ngcontent-%COMP%]{background:var(--competition-bg)}.today-dot[_ngcontent-%COMP%]{border:2px solid var(--accent-color)}.months-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:2rem}.month-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow-sm);transition:transform .3s ease,box-shadow .3s ease;border:1px solid rgba(0,0,0,.03)}.month-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-md)}.month-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.25rem;margin:0 0 1.25rem;text-transform:capitalize;font-weight:600;text-align:center;border-bottom:2px solid #f0f0f0;padding-bottom:.75rem}.weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:.75rem;text-align:center;font-size:.85rem;font-weight:700;color:#999;text-transform:uppercase;letter-spacing:1px}.days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}.day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;font-size:.95rem;font-weight:500;position:relative;cursor:default;transition:all .2s ease;color:var(--text-color);padding:2px}.deadline-text[_ngcontent-%COMP%]{font-size:.55rem;color:#d32f2f;font-weight:700;margin-top:2px;text-transform:uppercase;line-height:1;text-align:center}.day[_ngcontent-%COMP%]:not(.other-month):not(.competition):hover{background-color:#f0f4f8}.other-month[_ngcontent-%COMP%]{color:#e0e0e0}.weekend[_ngcontent-%COMP%]{color:#888;background-color:var(--weekend-bg);border-radius:50%}.today[_ngcontent-%COMP%]{border:2px solid var(--accent-color);border-radius:50%;font-weight:700;position:relative;z-index:1}.competition[_ngcontent-%COMP%]{background:var(--competition-bg);color:#fff;cursor:pointer;font-weight:700;box-shadow:0 3px 8px #0033664d}.competition[_ngcontent-%COMP%]:hover{transform:scale(1.15);z-index:2;box-shadow:0 6px 12px #0366}.other-event[_ngcontent-%COMP%]{background:var(--other-bg);color:#fff;cursor:pointer;font-weight:700;box-shadow:0 3px 8px #2e7d324d}.other-event[_ngcontent-%COMP%]:hover{transform:scale(1.15);z-index:2;box-shadow:0 6px 12px #2e7d3266}.other-dot[_ngcontent-%COMP%]{background:var(--other-bg)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00142899;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_fadeIn .3s cubic-bezier(.16,1,.3,1);padding:1rem}.modal-content.glass-effect[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);padding:2.5rem;border-radius:20px;width:100%;max-width:550px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:var(--shadow-lg);animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.16,1,.3,1);border:1px solid rgba(255,255,255,.2)}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1.25rem;right:1.25rem;background:#f0f0f0;border:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#666;cursor:pointer;transition:all .2s;z-index:10}.close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#000;transform:rotate(90deg)}.modal-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding-right:2rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .75rem;color:var(--primary-color);font-size:1.75rem;line-height:1.2}.modal-date-badge[_ngcontent-%COMP%]{display:inline-block;background:var(--accent-color);color:var(--primary-dark);font-weight:700;padding:.4rem 1rem;border-radius:20px;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.modal-body[_ngcontent-%COMP%]{margin-bottom:2rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.8rem;text-transform:uppercase;color:#888;margin-bottom:.25rem;font-weight:600}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:var(--text-color)}.info-item.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.payment-info[_ngcontent-%COMP%]{font-family:inherit;white-space:pre-wrap;background:#f8fbff;padding:1rem;border-radius:8px;font-size:.95rem;color:var(--primary-dark);border-left:4px solid var(--primary-color)}.poster-container[_ngcontent-%COMP%]{position:relative;margin-top:1.5rem;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-md)}.poster-container[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-lg)}.modal-poster[_ngcontent-%COMP%]{width:100%;max-height:350px;object-fit:cover;display:block;cursor:zoom-in;transition:transform .4s ease}.poster-container[_ngcontent-%COMP%]:hover   .modal-poster[_ngcontent-%COMP%]{transform:scale(1.03)}.expand-hint[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:.5rem;background:#0009;color:#fff;text-align:center;font-size:.8rem;opacity:0;transition:opacity .3s;pointer-events:none}.poster-container[_ngcontent-%COMP%]:hover   .expand-hint[_ngcontent-%COMP%]{opacity:1}.modal-actions[_ngcontent-%COMP%]{text-align:center}.btn-register[_ngcontent-%COMP%]{display:inline-block;width:100%;background:var(--competition-bg);color:#fff;padding:1rem;border-radius:50px;text-decoration:none;font-weight:700;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #0033664d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0366}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000f2;z-index:2000;display:flex;justify-content:center;align-items:center;cursor:zoom-out;animation:_ngcontent-%COMP%_fadeIn .3s ease}.close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem;background:none;border:none;color:#fff;font-size:3rem;cursor:pointer;opacity:.7;transition:opacity .2s}.close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:8px;box-shadow:0 0 50px #00000080}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@media(max-width:768px){.calendar-container[_ngcontent-%COMP%]{padding:1rem}.calendar-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.year-navigation[_ngcontent-%COMP%], .calendar-legend[_ngcontent-%COMP%]{width:100%;justify-content:center}.months-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-content.glass-effect[_ngcontent-%COMP%]{padding:1.5rem}}.deadline-dot[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:6px;height:6px;background-color:#d32f2f;border-radius:50%;z-index:5;cursor:help}.deadline-tooltip[_ngcontent-%COMP%]{position:absolute;bottom:100%;right:0;margin-bottom:5px;background:#000000e6;color:#fff;padding:.5rem;border-radius:4px;font-size:.75rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s;z-index:100;box-shadow:0 4px 6px #0003}.deadlines-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background-color:#ffebee;border:1px solid #ffcdd2;border-radius:8px;color:#c62828}.deadlines-title[_ngcontent-%COMP%]{font-weight:700;display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;font-size:1rem}.deadlines-list-item[_ngcontent-%COMP%]{padding:.5rem 0;font-size:.95rem;border-bottom:1px dashed rgba(198,40,40,.2);display:flex;justify-content:space-between;align-items:center;gap:1rem}.deadline-info[_ngcontent-%COMP%]{flex:1}.view-event-btn[_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff;border:none;padding:4px 10px;border-radius:4px;font-size:.8rem;cursor:pointer;font-weight:600;transition:background-color .2s;white-space:nowrap}.competition-list-view[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:2rem}.competition-list-view[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:center;color:var(--primary-dark)}.events-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.event-card-preview[_ngcontent-%COMP%]{background:#fff9;padding:1rem;border-radius:8px;cursor:pointer;transition:transform .2s,background-color .2s;box-shadow:0 2px 4px #0000000d}.event-card-preview[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background:#fff;box-shadow:0 4px 8px #0000001a}.event-preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.event-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#333}.event-type-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:2px 8px;border-radius:12px;background-color:var(--accent-color);color:var(--primary-dark);font-weight:600}.event-type-badge.type-other[_ngcontent-%COMP%]{background-color:var(--other-bg);color:#fff}.event-preview-location[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--primary-color);cursor:pointer;font-weight:600;margin-bottom:1rem;display:inline-flex;align-items:center;padding:0}.back-btn[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var uA=n=>({"is-invalid":n});function dY(n,e){if(n&1){let t=me();C(0,"button",7),K("click",function(){X(t);let i=$();return Z(i.initNewCompetition())}),C(1,"span"),P(2,"+"),A(),P(3," Nuevo Evento "),A()}}function hY(n,e){if(n&1){let t=me();C(0,"button",8),K("click",function(){X(t);let i=$();return Z(i.toggleView())}),P(1," \u2190 Volver al Listado "),A()}}function fY(n,e){if(n&1&&(C(0,"div",19),P(1),A()),n&2){let t=$().$implicit;N(),he(t.lugar)}}function pY(n,e){if(n&1&&(C(0,"span"),P(1),cn(2,"date"),A()),n&2){let t=$().$implicit;N(),ke(" - ",fr(2,1,t.fechaFinEvento,"dd/MM/yyyy")," ")}}function mY(n,e){if(n&1){let t=me();C(0,"tr")(1,"td")(2,"strong"),P(3),A(),ne(4,fY,2,1,"div",15),A(),C(5,"td"),P(6),cn(7,"date"),ne(8,pY,3,4,"span",14),A(),C(9,"td"),P(10),cn(11,"date"),A(),C(12,"td",16)(13,"button",17),K("click",function(){let i=X(t).$implicit,o=$(2);return Z(o.editCompetition(i))}),P(14," \u270F\uFE0F "),A(),C(15,"button",18),K("click",function(){let i=X(t).$implicit,o=$(2);return Z(o.deleteCompetition(i.id))}),P(16," \u{1F5D1}\uFE0F "),A()()()}if(n&2){let t=e.$implicit;N(),At("border-comp",!t.tipo||t.tipo==="competicion")("border-other",t.tipo==="otros"),N(2),he(t.nombre||t.lugar),N(),B("ngIf",t.nombre&&t.lugar),N(2),ke(" ",fr(7,9,t.fechaEvento,"dd/MM/yyyy")," "),N(2),B("ngIf",t.fechaFinEvento&&t.fechaFinEvento!==t.fechaEvento),N(2),he(fr(11,12,t.fechaLimite,"dd/MM/yyyy"))}}function gY(n,e){n&1&&(C(0,"tr")(1,"td",20),P(2," No hay eventos registrados actualmente. "),A()())}function yY(n,e){if(n&1&&(C(0,"div",9)(1,"div",10)(2,"table",11)(3,"thead")(4,"tr")(5,"th"),P(6,"Lugar"),A(),C(7,"th"),P(8,"Fecha Evento"),A(),C(9,"th"),P(10,"Cierre Inscripci\xF3n"),A(),C(11,"th",12),P(12,"Acciones"),A()()(),C(13,"tbody"),ne(14,mY,17,15,"tr",13)(15,gY,3,0,"tr",14),A()()()()),n&2){let t=$();N(14),B("ngForOf",t.competitions()),N(),B("ngIf",t.competitions().length===0)}}function _Y(n,e){n&1&&(C(0,"div",52),P(1," El nombre del evento es requerido. "),A())}function vY(n,e){n&1&&(C(0,"div",52),P(1," La fecha de inicio es requerida. "),A())}function EY(n,e){n&1&&(C(0,"div",52),P(1," Se requiere una URL v\xE1lida (http:// o https://). "),A())}function wY(n,e){if(n&1&&(C(0,"div",53),ye(1,"img",54),A()),n&2){let t=$(2);N(),B("src",t.f.cartel.value,Vt)}}function bY(n,e){if(n&1){let t=me();C(0,"div",21)(1,"h3",22),P(2),A(),C(3,"form",23),K("ngSubmit",function(){X(t);let i=$();return Z(i.onSubmit())}),C(4,"div",24)(5,"label",25),P(6,"Tipo de Evento"),A(),C(7,"select",26)(8,"option",27),P(9,"Competici\xF3n Agility"),A(),C(10,"option",28),P(11,"Otro Evento"),A()()(),C(12,"div",24)(13,"label",29),P(14,"Nombre del Evento"),A(),ye(15,"input",30),ne(16,_Y,2,0,"div",31),A(),C(17,"div",24)(18,"label",32),P(19,"Lugar del Evento"),A(),ye(20,"input",33),A(),C(21,"div",34)(22,"div",35)(23,"label",36),P(24,"Fecha Inicio"),A(),ye(25,"input",37),ne(26,vY,2,0,"div",31),A(),C(27,"div",35)(28,"label",38),P(29,"Fecha Fin"),A(),ye(30,"input",39),A()(),C(31,"div",34)(32,"div",35)(33,"label",40),P(34,"Fecha L\xEDmite de Inscripci\xF3n"),A(),ye(35,"input",41),A()(),C(36,"div",24)(37,"label",42),P(38,"Forma de Pago"),A(),ye(39,"textarea",43),A(),C(40,"div",24)(41,"label",44),P(42,"Enlace Inscripci\xF3n"),A(),ye(43,"input",45),ne(44,EY,2,0,"div",31),A(),C(45,"div",24)(46,"label",46),P(47,"Cartel (Imagen)"),A(),C(48,"input",47),K("change",function(i){X(t);let o=$();return Z(o.onFileSelected(i))}),A(),ne(49,wY,2,1,"div",48),A(),C(50,"div",49)(51,"button",50),P(52),A(),C(53,"button",51),K("click",function(){X(t);let i=$();return Z(i.toggleView())}),P(54," Cancelar "),A()()()()}if(n&2){let t=$();N(2),he(t.isEditing()?"Editar Evento":"Nuevo Evento"),N(),B("formGroup",t.competitionForm),N(12),B("ngClass",Vh(10,uA,t.submitted&&t.f.nombre.errors)),N(),B("ngIf",t.submitted&&t.f.nombre.errors),N(9),B("ngClass",Vh(12,uA,t.submitted&&t.f.fechaEvento.errors)),N(),B("ngIf",t.submitted&&t.f.fechaEvento.errors),N(17),B("ngClass",Vh(14,uA,t.submitted&&t.f.enlace.errors)),N(),B("ngIf",t.submitted&&(t.f.enlace.errors==null?null:t.f.enlace.errors.pattern)),N(5),B("ngIf",t.f.cartel.value),N(3),ke(" ",t.isEditing()?"Guardar Cambios":"Crear Evento"," ")}}function IY(n,e){if(n&1){let t=me();C(0,"div",55)(1,"div",56)(2,"h3"),P(3,"Eliminar Competici\xF3n"),A(),C(4,"p"),P(5,"\xBFEst\xE1s seguro de que deseas eliminar esta competici\xF3n? Esta acci\xF3n no se puede deshacer."),A(),C(6,"div",57)(7,"button",58),K("click",function(){X(t);let i=$();return Z(i.cancelDelete())}),P(8,"Cancelar"),A(),C(9,"button",59),K("click",function(){X(t);let i=$();return Z(i.confirmDelete())}),P(10,"Eliminar"),A()()()()}}var u0=class n{constructor(e,t){this.fb=e;this.competitionService=t;let r=this.competitionService.getCompetitions();this.competitions=pt(()=>[...r()].sort((i,o)=>new Date(i.fechaEvento).getTime()-new Date(o.fechaEvento).getTime())),this.competitionForm=this.fb.group({nombre:["",nl.required],lugar:[""],fechaEvento:["",nl.required],fechaFinEvento:[""],fechaLimite:[""],formaPago:[""],enlace:["",[nl.pattern("https?://.+")]],tipo:["competicion",nl.required],cartel:[null]})}toastService=L(Br);competitions;isEditing=pe(!1);showForm=pe(!1);competitionForm;submitted=!1;currentCompetitionId=null;showDeleteModal=pe(!1);competitionToDeleteId=null;get f(){return this.competitionForm.controls}toggleView(){this.showForm.update(e=>!e),this.showForm()||this.resetForm()}initNewCompetition(){this.resetForm(),this.showForm.set(!0),this.isEditing.set(!1)}existingCartel=null;editCompetition(e){this.currentCompetitionId=e.id,this.existingCartel=e.cartel,this.competitionForm.patchValue({nombre:e.nombre||"",lugar:e.lugar,fechaEvento:e.fechaEvento,fechaFinEvento:e.fechaFinEvento||"",fechaLimite:e.fechaLimite,formaPago:e.formaPago,enlace:e.enlace,tipo:e.tipo||"competicion"}),this.showForm.set(!0),this.isEditing.set(!0)}deleteCompetition(e){this.competitionToDeleteId=e,this.showDeleteModal.set(!0)}confirmDelete(){this.competitionToDeleteId&&this.competitionService.deleteCompetition(this.competitionToDeleteId).then(()=>{this.toastService.success("Competici\xF3n eliminada correctamente"),this.cancelDelete()}).catch(e=>{console.error(e),this.toastService.error("Error al eliminar la competici\xF3n"),this.cancelDelete()})}cancelDelete(){this.showDeleteModal.set(!1),this.competitionToDeleteId=null}async onFileSelected(e){let t=e.target.files[0];if(t)try{let r=await this.compressImage(t);if(r.length>800*1024){this.toastService.warning("La imagen sigue siendo demasiado pesada incluso despues de comprimir. Por favor, elige otra.");return}this.competitionForm.patchValue({cartel:r})}catch(r){console.error("Error handling image:",r),this.toastService.error("Hubo un error al procesar la imagen.")}}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=o=>{let s=new Image;s.src=o.target.result,s.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=800,h=800,m=s.width,w=s.height;if(m>w?m>d&&(w*=d/m,m=d):w>h&&(m*=h/w,w=h),a.width=m,a.height=w,c){c.drawImage(s,0,0,m,w);let S=a.toDataURL("image/jpeg",.7);t(S)}else r(new Error("Could not get canvas context"))},s.onerror=a=>r(a)},i.onerror=o=>r(o)})}onFileChange(e){this.onFileSelected(e)}async onSubmit(){if(this.submitted=!0,this.competitionForm.invalid)return;let e=this.competitionForm.value,t=e.cartel||(this.isEditing()?this.existingCartel:null),r=de(z({},e),{cartel:t});this.isEditing()&&this.currentCompetitionId?(await this.competitionService.updateCompetition(z({id:this.currentCompetitionId},r)),this.toastService.success("Competici\xF3n actualizada")):(await this.competitionService.addCompetition(r),this.toastService.success("Competici\xF3n creada")),this.toggleView()}resetForm(){this.submitted=!1,this.currentCompetitionId=null,this.existingCartel=null,this.competitionForm.reset({tipo:"competicion"})}static \u0275fac=function(t){return new(t||n)(ue(uU),ue(_d))};static \u0275cmp=Ye({type:n,selectors:[["app-crud-competicion"]],decls:9,vars:5,consts:[[1,"crud-container"],[1,"header"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","list-view",4,"ngIf"],["class","form-view",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"list-view"],[1,"table-responsive"],[1,"table"],[2,"width","150px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["style","font-size: 0.85em; color: #666; font-weight: normal;",4,"ngIf"],[1,"actions"],["title","Editar",1,"btn-icon","edit",3,"click"],["title","Eliminar",1,"btn-icon","delete",3,"click"],[2,"font-size","0.85em","color","#666","font-weight","normal"],["colspan","5",1,"empty-msg"],[1,"form-view"],[1,"form-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","tipo"],["id","tipo","formControlName","tipo",1,"form-control"],["value","competicion"],["value","otros"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Competici\xF3n Regional Agility",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","lugar"],["type","text","id","lugar","formControlName","lugar","placeholder","Ej: Polideportivo Gij\xF3n",1,"form-control"],[1,"form-row"],[1,"form-group","col"],["for","fechaEvento"],["type","date","id","fechaEvento","formControlName","fechaEvento",1,"form-control",3,"ngClass"],["for","fechaFinEvento"],["type","date","id","fechaFinEvento","formControlName","fechaFinEvento","placeholder","Opcional",1,"form-control"],["for","fechaLimite"],["type","date","id","fechaLimite","formControlName","fechaLimite",1,"form-control"],["for","formaPago"],["id","formaPago","formControlName","formaPago","rows","3","placeholder","Instrucciones de pago...",1,"form-control"],["for","enlace"],["type","url","id","enlace","formControlName","enlace","placeholder","https://...",1,"form-control",3,"ngClass"],["for","cartel"],["type","file","id","cartel","accept","image/*",1,"form-control",3,"change"],["class","mt-2",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"invalid-feedback"],[1,"mt-2"],["alt","Preview",2,"max-height","150px","border-radius","4px","box-shadow","0 2px 4px rgba(0,0,0,0.1)",3,"src"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-actions"],[1,"btn-cancel-modal",3,"click"],[1,"btn-delete-confirm",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"h2"),P(3,"Gesti\xF3n de Eventos"),A(),ne(4,dY,4,0,"button",2)(5,hY,2,0,"button",3),A(),ne(6,yY,16,2,"div",4)(7,bY,55,16,"div",5),A(),ne(8,IY,11,0,"div",6)),t&2&&(N(4),B("ngIf",!r.showForm()),N(),B("ngIf",r.showForm()),N(),B("ngIf",!r.showForm()),N(),B("ngIf",r.showForm()),N(),B("ngIf",r.showDeleteModal()))},dependencies:[bt,hc,ln,Lt,dU,rU,sU,cU,md,i0,e0,Y2,lA,cA,Mo],styles:[`[_nghost-%COMP%]{display:block;min-height:100vh;padding-top:80px;padding-bottom:3rem;background-color:var(--background-color, #f5f9fc)}.crud-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2.5rem;background:#fff;border-radius:12px;box-shadow:0 8px 24px #0033661a;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem;padding-bottom:1rem;border-bottom:2px solid #f0f2f5}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--primary-blue, #003366);font-weight:700}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:.95rem;transition:all .2s ease;display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#036,#004080);color:#fff;box-shadow:0 4px 6px #0363}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#004080,#00509e);box-shadow:0 6px 8px #00336640}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e6ea;color:#212529}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 4px 6px #28a74533}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);box-shadow:0 6px 8px #28a74540}.btn-cancel[_ngcontent-%COMP%]{background:transparent;color:#6c757d;border:1px solid #ced4da;margin-left:.75rem}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#343a40;border-color:#adb5bd}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e9ecef}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1rem;text-align:left;border-bottom:1px solid #e9ecef}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:3rem!important}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border:none;background:#f1f3f5;border-radius:50%;cursor:pointer;font-size:1.1rem;transition:all .2s cubic-bezier(.2,.8,.2,1);color:#495057;box-shadow:0 2px 4px #0000000d}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.btn-icon.edit[_ngcontent-%COMP%]{color:#036;background-color:#e3f2fd}.btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:#036;color:#fff}.btn-icon.delete[_ngcontent-%COMP%]{color:#d32f2f;background-color:#ffebee}.btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#d32f2f;color:#fff}.form-view[_ngcontent-%COMP%]{background:#f8f9fa;padding:2rem;border-radius:8px;border:1px solid #e9ecef;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:var(--primary-blue, #003366);font-size:1.4rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-group.col[_ngcontent-%COMP%]{flex:1}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#343a40;font-size:.95rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:6px;font-size:1rem;transition:border-color .2s,box-shadow .2s;box-sizing:border-box;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#004080;box-shadow:0 0 0 3px #0040801a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5zM6 8.2a.3.3 0 110-.6.3.3 0 010 .6z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;align-items:center}@media(max-width:768px){.crud-container[_ngcontent-%COMP%]{padding:1rem;margin:0 1rem;width:auto}.form-view[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.btn[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-top:.5rem;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2.5rem 2rem;border-radius:16px;width:90%;max-width:420px;box-shadow:0 20px 50px #0000004d;text-align:center;position:relative;border:none;animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.16,1,.3,1)}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e63946;margin-top:0;font-size:1.6rem;margin-bottom:1rem;display:flex;flex-direction:column;align-items:center;gap:.5rem}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"\\1f5d1\\fe0f";font-size:3rem;margin-bottom:.5rem;display:block}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;margin-bottom:2rem;line-height:1.6;font-size:1rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:8px;font-weight:600;font-size:1rem;cursor:pointer;border:none;transition:transform .2s,box-shadow .2s;min-width:120px}.btn-cancel-modal[_ngcontent-%COMP%]{background-color:#f1f3f5;color:#495057}.btn-cancel-modal[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.btn-delete-confirm[_ngcontent-%COMP%]{background-color:#e63946;color:#fff;box-shadow:0 4px 10px #e639464d}.btn-delete-confirm[_ngcontent-%COMP%]:hover{background-color:#d62828;transform:translateY(-2px);box-shadow:0 6px 15px #e6394666}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.border-comp[_ngcontent-%COMP%]{border-left:5px solid #003366!important;padding-left:15px!important}.border-other[_ngcontent-%COMP%]{border-left:5px solid #2e7d32!important;padding-left:15px!important}`]})};function TY(n,e){if(n&1){let t=me();C(0,"div",18)(1,"h2"),P(2),A(),C(3,"button",19),K("click",function(){X(t);let i=$(2);return Z(i.toggleEditName())}),P(4,"\u270F\uFE0F"),A()()}if(n&2){let t=$().ngIf;N(2),he(t.displayName)}}function CY(n,e){if(n&1){let t=me();C(0,"div",20)(1,"input",21),Fh("ngModelChange",function(i){X(t);let o=$(2);return Gg(o.editedName,i)||(o.editedName=i),Z(i)}),K("keyup.enter",function(){X(t);let i=$(2);return Z(i.saveName())}),A(),C(2,"div",22)(3,"button",23),K("click",function(){X(t);let i=$(2);return Z(i.saveName())}),P(4,"\u2705"),A(),C(5,"button",24),K("click",function(){X(t);let i=$(2);return Z(i.toggleEditName())}),P(6,"\u274C"),A()()()}if(n&2){let t=$(2);N(),Oh("ngModel",t.editedName)}}function SY(n,e){n&1&&(C(0,"div",25)(1,"p"),P(2,"A\xFAn no has a\xF1adido ning\xFAn perro."),A()())}function DY(n,e){if(n&1){let t=me();C(0,"div",26)(1,"div",27),P(2,"\u{1F415}"),A(),C(3,"div",28)(4,"span",29),P(5),A()(),C(6,"button",30),K("click",function(){let i=X(t).$implicit,o=$(2);return Z(o.deleteDog(i.id,i.name))}),P(7,"\u{1F5D1}\uFE0F"),A()()}if(n&2){let t=e.$implicit;N(5),he(t.name)}}function AY(n,e){if(n&1){let t=me();C(0,"div",31),K("click",function(){X(t);let i=$(2);return Z(i.closeDeleteModal())}),C(1,"div",32),K("click",function(i){return X(t),Z(i.stopPropagation())}),C(2,"div",33)(3,"h3"),P(4,"\xBFJubilar a tu perrete? \u{1F622}"),A(),C(5,"button",34),K("click",function(){X(t);let i=$(2);return Z(i.closeDeleteModal())}),P(6,"\xD7"),A()(),C(7,"div",35)(8,"p"),P(9," \xBFEst\xE1s seguro de que quieres jubilar a "),C(10,"strong"),P(11),A(),P(12," de tu perfil? "),A(),C(13,"p",36),P(14,"Esta acci\xF3n no se puede deshacer y perder\xE1s su historial."),A()(),C(15,"div",37)(16,"button",38),K("click",function(){X(t);let i=$(2);return Z(i.closeDeleteModal())}),P(17,"Cancelar"),A(),C(18,"button",39),K("click",function(){X(t);let i=$(2);return Z(i.confirmDelete())}),P(19," S\xED, Eliminar "),A()()()()}if(n&2){let t,r=$(2);N(11),he((t=r.dogToDelete())==null?null:t.name)}}function xY(n,e){if(n&1){let t=me();C(0,"div",1)(1,"div",2),ye(2,"img",3),C(3,"div",4)(4,"div",5),ne(5,TY,5,1,"div",6)(6,CY,7,1,"div",7),A(),C(7,"p"),P(8),A(),C(9,"span",8),P(10),cn(11,"titlecase"),A()()(),C(12,"div",9)(13,"h3"),P(14,"\u{1F436} Mis Perretes"),A(),C(15,"p",10),P(16,"A\xF1ade aqu\xED a tus compa\xF1eros de Agility."),A(),C(17,"div",11)(18,"input",12),Fh("ngModelChange",function(i){X(t);let o=$();return Gg(o.newDogName,i)||(o.newDogName=i),Z(i)}),K("keyup.enter",function(){X(t);let i=$();return Z(i.addDog())}),A(),C(19,"button",13),K("click",function(){X(t);let i=$();return Z(i.addDog())}),P(20," A\xF1adir Perro "),A()(),C(21,"div",14),ne(22,SY,3,0,"div",15)(23,DY,8,1,"div",16),A()(),ne(24,AY,20,1,"div",17),A()}if(n&2){let t=e.ngIf,r=$();N(2),B("src",t.photoURL||"assets/default-user.png",Vt),N(3),B("ngIf",!r.isEditingName()),N(),B("ngIf",r.isEditingName()),N(2),he(t.email),N(),B("ngClass",t.role),N(),he(Eb(11,11,t.role)),N(8),Oh("ngModel",r.newDogName),N(),B("disabled",!r.newDogName().trim()),N(3),B("ngIf",r.dogs().length===0),N(),B("ngForOf",r.dogs()),N(),B("ngIf",r.deleteModalOpen())}}var d0=class n{authService=L(Nt);dogService=L(yd);newDogName=pe("");dogs=this.dogService.getDogs();deleteModalOpen=pe(!1);dogToDelete=pe(null);isEditingName=pe(!1);editedName=pe("");constructor(){Za(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid);let t=this.authService.userProfileSignal();t&&this.editedName.set(t.displayName)})}toggleEditName(){if(this.isEditingName.set(!this.isEditingName()),this.isEditingName()){let e=this.authService.userProfileSignal();e&&this.editedName.set(e.displayName)}}async saveName(){if(this.editedName().trim())try{await this.authService.updateDisplayName(this.editedName()),this.isEditingName.set(!1)}catch(e){console.error("Error updating name:",e),alert("Error al actualizar el nombre")}}async addDog(){if(!this.newDogName().trim())return;let e=this.authService.currentUserSignal();if(e)try{await this.dogService.addDog({userId:e.uid,name:this.newDogName(),createdAt:Date.now()}),this.newDogName.set("")}catch(t){console.error("Error adding dog:",t)}}deleteDog(e,t){this.dogToDelete.set({id:e,name:t}),this.deleteModalOpen.set(!0)}closeDeleteModal(){this.deleteModalOpen.set(!1),this.dogToDelete.set(null)}async confirmDelete(){let e=this.dogToDelete();e&&(await this.dogService.deleteDog(e.id),this.closeDeleteModal())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-perfil"]],decls:1,vars:1,consts:[["class","perfil-container",4,"ngIf"],[1,"perfil-container"],[1,"profile-header"],["alt","Avatar","referrerpolicy","no-referrer",1,"profile-avatar",3,"src"],[1,"profile-info"],[1,"name-edit-container"],["class","name-display",4,"ngIf"],["class","name-input-group",4,"ngIf"],[1,"role-badge",3,"ngClass"],[1,"dogs-section"],[1,"section-desc"],[1,"add-dog-form"],["type","text","placeholder","Nombre de tu perro...",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-add",3,"click","disabled"],[1,"dogs-list"],["class","empty-state",4,"ngIf"],["class","dog-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"name-display"],["title","Editar nombre",1,"btn-icon-edit",3,"click"],[1,"name-input-group"],["type","text",1,"edit-name-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"edit-actions"],[1,"btn-check",3,"click"],[1,"btn-cancel-edit",3,"click"],[1,"empty-state"],[1,"dog-card"],[1,"dog-icon"],[1,"dog-info"],[1,"dog-name"],["title","Eliminar",1,"btn-delete",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content","glass-effect",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"note","warning"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm","btn-delete-action",3,"click"]],template:function(t,r){t&1&&ne(0,xY,25,13,"div",0),t&2&&B("ngIf",r.authService.userProfileSignal())},dependencies:[bt,hc,ln,Lt,o0,md,e0,aA,kb],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding-bottom:2rem;border-bottom:1px solid #eee;margin-bottom:2rem}.profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:3px solid var(--accent-orange);flex-shrink:0}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);word-break:break-word}.name-edit-container[_ngcontent-%COMP%]{margin-bottom:5px}.name-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.btn-icon-edit[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1rem;opacity:.5;transition:opacity .2s;padding:5px}.btn-icon-edit[_ngcontent-%COMP%]:hover{opacity:1}.name-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.edit-name-input[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid var(--primary-blue);border-radius:6px;font-size:1.1rem;font-weight:700;color:#333;width:200px}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:5px}.btn-check[_ngcontent-%COMP%], .btn-cancel-edit[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.1rem;padding:4px;transition:transform .1s}.btn-check[_ngcontent-%COMP%]:hover, .btn-cancel-edit[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666;word-break:break-all}.role-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:8px;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:600;background-color:#eee;color:#666;text-transform:uppercase}.role-badge.admin[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}.role-badge.staff[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.role-badge.member[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.dogs-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.5rem}.section-desc[_ngcontent-%COMP%]{color:#777;margin-bottom:1.5rem}.add-dog-form[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:2rem}.add-dog-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #ddd;border-radius:6px;font-size:1rem;min-width:0}.btn-add[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:0 20px;border-radius:6px;cursor:pointer;font-weight:700;transition:background .2s;white-space:nowrap}.btn-add[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#004494}.btn-add[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.dogs-list[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(100%,1fr))}.dog-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f9f9f9;padding:15px;border-radius:8px;border:1px solid #eee;transition:transform .2s}.dog-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#ddd}.dog-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:15px;background-color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;box-shadow:0 2px 4px #0000000d;flex-shrink:0}.dog-info[_ngcontent-%COMP%]{flex:1;min-width:0}.dog-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#333;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.2rem;opacity:.6;transition:opacity .2s;padding:10px}.btn-delete[_ngcontent-%COMP%]:hover{opacity:1}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;font-style:italic;background-color:#f9f9f9;border-radius:8px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;width:90%;max-width:450px;box-shadow:0 20px 50px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease;border:1px solid rgba(0,0,0,.1)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.4rem}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#999;transition:color .2s}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{margin-bottom:2rem;color:#444;line-height:1.6;font-size:1.05rem}.note[_ngcontent-%COMP%]{display:block;margin-top:1rem;font-size:.9rem;font-style:italic;background-color:#fff1f2;padding:10px;border-radius:6px}.note.warning[_ngcontent-%COMP%]{color:#d32f2f;border-left:4px solid #d32f2f}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.btn-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#666;border:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:background .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn-confirm[_ngcontent-%COMP%]{border:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;color:#fff;transition:transform .2s,background-color .2s}.btn-delete-action[_ngcontent-%COMP%]{background:#dc3545;box-shadow:0 4px 10px #dc35454d}.btn-delete-action[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:translateY(-2px);box-shadow:0 6px 15px #dc354566}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@media(max-width:600px){.perfil-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.add-dog-form[_ngcontent-%COMP%]{flex-direction:column}.btn-add[_ngcontent-%COMP%]{width:100%;padding:12px}.dogs-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var pU=async(n,e)=>{let t=L(Nt),r=L(yr);return await t.getAuthState()?!0:(r.navigate(["/login"]),!1)};var h0=async(n,e)=>{let t=L(Nt),r=L(yr);return t.checkAuthLoading()&&await Va(Su(t.checkAuthLoading).pipe(Ct(i=>!i))),t.isStaff()?!0:(r.navigate(["/"]),!1)};var mU=async(n,e)=>{let t=L(Nt),r=L(yr);return t.checkAuthLoading()&&await Va(Su(t.checkAuthLoading).pipe(Ct(i=>!i))),t.isAdmin()?!0:(r.navigate(["/"]),!1)};var dA=async(n,e)=>{let t=L(Nt),r=L(yr);return t.checkAuthLoading()&&await Va(Su(t.checkAuthLoading).pipe(Ct(i=>!i))),t.isMember()?!0:(r.navigate(["/"]),!1)};function RY(n,e){if(n&1){let t=me();C(0,"tr")(1,"td",7),ye(2,"img",8),C(3,"span"),P(4),A()(),C(5,"td"),P(6),A(),C(7,"td")(8,"span",9),P(9),A()(),C(10,"td")(11,"select",10),K("change",function(i){let o=X(t).$implicit,s=$(2);return Z(s.updateRole(o,i.target.value))}),C(12,"option",11),P(13,"Usuario"),A(),C(14,"option",12),P(15,"Miembro"),A(),C(16,"option",13),P(17,"Staff"),A(),C(18,"option",14),P(19,"Admin"),A()()()()}if(n&2){let t=e.$implicit;N(2),B("src",t.photoURL||"assets/default-avatar.png",Vt),N(2),he(t.displayName),N(2),he(t.email),N(2),Nh(t.role),N(),he(t.role),N(2),B("value",t.role)}}function PY(n,e){if(n&1&&(C(0,"div",5)(1,"table")(2,"thead")(3,"tr")(4,"th"),P(5,"Usuario"),A(),C(6,"th"),P(7,"Email"),A(),C(8,"th"),P(9,"Rol Actual"),A(),C(10,"th"),P(11,"Acciones"),A()()(),C(12,"tbody"),ne(13,RY,20,7,"tr",6),A()()()),n&2){let t=$();N(13),B("ngForOf",t.users())}}function MY(n,e){n&1&&(C(0,"div",15),ye(1,"div",16),C(2,"p"),P(3,"Cargando usuarios..."),A()())}var f0=class n{authService=L(Nt);toastService=L(Br);users=pe([]);loading=pe(!0);async ngOnInit(){await this.loadUsers()}async loadUsers(){this.loading.set(!0);try{let e=await this.authService.getAllUsers();this.users.set(e)}catch(e){console.error("Error loading users",e),this.toastService.error("Error al cargar usuarios")}finally{this.loading.set(!1)}}async updateRole(e,t){if(e.role!==t)try{let r=t;await this.authService.updateUserRole(e.uid,r),this.users.update(i=>i.map(o=>o.uid===e.uid?de(z({},o),{role:r}):o)),this.toastService.success(`Rol de ${e.displayName} actualizado a ${r}`)}catch(r){console.error("Error updating role",r),this.toastService.error("Error al actualizar rol")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-admin-usuarios"]],decls:10,vars:3,consts:[["loader",""],[1,"admin-container"],[1,"header"],[1,"stats"],["class","table-container glass-effect",4,"ngIf","ngIfElse"],[1,"table-container","glass-effect"],[4,"ngFor","ngForOf"],[1,"user-cell"],["alt","Avatar","referrerpolicy","no-referrer",1,"avatar",3,"src"],[1,"badge"],[1,"role-select",3,"change","value"],["value","user"],["value","member"],["value","staff"],["value","admin"],[1,"loader-container"],[1,"spinner"]],template:function(t,r){if(t&1&&(C(0,"div",1)(1,"div",2)(2,"h1"),P(3,"Gesti\xF3n de Usuarios"),A(),C(4,"div",3)(5,"span"),P(6),A()()(),ne(7,PY,14,1,"div",4)(8,MY,4,0,"ng-template",null,0,lc),A()),t&2){let i=cc(9);N(6),ke("Total: ",r.users().length),N(),B("ngIf",!r.loading())("ngIfElse",i)}},dependencies:[bt,ln,Lt],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;padding-top:80px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding-bottom:2rem}.admin-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{color:#036;font-size:2.5rem;margin:0}.glass-effect[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:1rem;box-shadow:0 8px 32px #1f268726;border:1px solid rgba(255,255,255,.18);overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #eee}th[_ngcontent-%COMP%]{font-weight:600;color:#666;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-weight:500;color:#333}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;background:#eee}.badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.85rem;font-weight:600;text-transform:uppercase}.badge.user[_ngcontent-%COMP%]{background:#e0e0e0;color:#555}.badge.member[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.staff[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.badge.admin[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.role-select[_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;border:1px solid #ccc;background:#fff;cursor:pointer;font-family:inherit;font-size:.9rem;color:#333;transition:all .2s}.role-select[_ngcontent-%COMP%]:hover{border-color:#036}.role-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#036;box-shadow:0 0 0 2px #0033661a}.loader-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #003366;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function NY(n,e){n&1&&(C(0,"div",10),P(1," No hay usuarios registrados (excepto staff). "),A())}function kY(n,e){if(n&1){let t=me();C(0,"tr")(1,"td",12),ye(2,"img",13),C(3,"span"),P(4),A()(),C(5,"td"),P(6),A(),C(7,"td")(8,"span",14),P(9),A()(),C(10,"td")(11,"button",15),K("click",function(){let i=X(t).$implicit,o=$(3);return Z(o.initiateToggleMember(i))}),P(12),A()()()}if(n&2){let t=e.$implicit;N(2),B("src",t.photoURL||"assets/default-avatar.png",Vt),N(2),he(t.displayName),N(2),he(t.email),N(2),Nh(t.role),N(),ke(" ",t.role==="member"?"Miembro":"Usuario"," "),N(2),At("promote",t.role!=="member")("revoke",t.role==="member"),N(),ke(" ",t.role==="member"?"\u2B07\uFE0F Quitar Miembro":"\u2B06\uFE0F Hacer Miembro"," ")}}function OY(n,e){if(n&1&&(C(0,"table")(1,"thead")(2,"tr")(3,"th"),P(4,"Usuario"),A(),C(5,"th"),P(6,"Email"),A(),C(7,"th"),P(8,"Estado"),A(),C(9,"th"),P(10,"Acciones"),A()()(),C(11,"tbody"),ne(12,kY,13,11,"tr",11),A()()),n&2){let t=$(2);N(12),B("ngForOf",t.displayUsers())}}function FY(n,e){if(n&1&&(C(0,"div",7),ne(1,NY,2,0,"div",8)(2,OY,13,1,"table",9),A()),n&2){let t=$();N(),B("ngIf",t.displayUsers().length===0),N(),B("ngIf",t.displayUsers().length>0)}}function VY(n,e){if(n&1&&(C(0,"p"),P(1," \xBFEst\xE1s seguro de que quieres hacer miembro a "),C(2,"strong"),P(3),A(),P(4,"? "),ye(5,"br"),C(6,"span",24),P(7,"Esto le dar\xE1 acceso a las funciones de miembro."),A()()),n&2){let t=$(2);N(3),he(t.selectedUser==null?null:t.selectedUser.displayName)}}function LY(n,e){if(n&1&&(C(0,"p"),P(1," \xBFEst\xE1s seguro de que quieres quitarle la membres\xEDa a "),C(2,"strong"),P(3),A(),P(4,"? "),ye(5,"br"),C(6,"span",25),P(7,"Perder\xE1 el acceso a las funciones de miembro."),A()()),n&2){let t=$(2);N(3),he(t.selectedUser==null?null:t.selectedUser.displayName)}}function UY(n,e){if(n&1){let t=me();C(0,"div",16),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),C(1,"div",17),K("click",function(i){return X(t),Z(i.stopPropagation())}),C(2,"div",18)(3,"h3"),P(4),A(),C(5,"button",19),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),P(6,"\xD7"),A()(),C(7,"div",20),ne(8,VY,8,1,"p",9)(9,LY,8,1,"p",9),A(),C(10,"div",21)(11,"button",22),K("click",function(){X(t);let i=$();return Z(i.closeModal())}),P(12,"Cancelar"),A(),C(13,"button",23),K("click",function(){X(t);let i=$();return Z(i.confirmToggle())}),P(14),A()()()()}if(n&2){let t=$();N(4),he(t.confirmationAction==="promote"?"\xBFAscender Usuario?":"\xBFRevocar Membres\xEDa?"),N(4),B("ngIf",t.confirmationAction==="promote"),N(),B("ngIf",t.confirmationAction==="revoke"),N(4),At("btn-promote",t.confirmationAction==="promote")("btn-revoke",t.confirmationAction==="revoke"),N(),ke(" ",t.confirmationAction==="promote"?"S\xED, Hacer Miembro":"S\xED, Revocar"," ")}}function jY(n,e){n&1&&(C(0,"div",26),ye(1,"div",27),C(2,"p"),P(3,"Cargando usuarios..."),A()())}var p0=class n{authService=L(Nt);toastService=L(Br);users=pe([]);loading=pe(!0);displayUsers=pt(()=>this.users().filter(e=>e.role!=="admin"&&e.role!=="staff"));async ngOnInit(){await this.loadUsers()}async loadUsers(){this.loading.set(!0);try{let e=await this.authService.getAllUsers();this.users.set(e)}catch(e){console.error("Error loading users",e),this.toastService.error("Error al cargar usuarios")}finally{this.loading.set(!1)}}selectedUser=null;confirmationAction=null;isModalOpen=!1;initiateToggleMember(e){this.selectedUser=e,this.confirmationAction=e.role==="member"?"revoke":"promote",this.isModalOpen=!0,document.body.style.overflow="hidden"}closeModal(){this.isModalOpen=!1,this.selectedUser=null,this.confirmationAction=null,document.body.style.overflow="auto"}async confirmToggle(){if(!this.selectedUser||!this.confirmationAction)return;let e=this.selectedUser,t=this.confirmationAction==="promote"?"member":"user";this.closeModal();try{await this.authService.updateUserRole(e.uid,t),this.users.update(r=>r.map(i=>i.uid===e.uid?de(z({},i),{role:t}):i)),this.toastService.success(`Rol de ${e.displayName} actualizado a ${t==="member"?"Miembro":"Usuario"}`)}catch(r){console.error("Error updating role",r),this.toastService.error("Error al cambiar rol")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-gestionar-miembros"]],decls:14,vars:4,consts:[["loader",""],[1,"admin-container"],[1,"header"],[1,"stats"],[1,"info-banner"],["class","table-container glass-effect",4,"ngIf","ngIfElse"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"table-container","glass-effect"],["class","empty-state",4,"ngIf"],[4,"ngIf"],[1,"empty-state"],[4,"ngFor","ngForOf"],[1,"user-cell"],["alt","Avatar","referrerpolicy","no-referrer",1,"avatar",3,"src"],[1,"badge"],[1,"action-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content","glass-effect",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click"],[1,"note"],[1,"note","warning"],[1,"loader-container"],[1,"spinner"]],template:function(t,r){if(t&1&&(C(0,"div",1)(1,"div",2)(2,"h1"),P(3,"Gesti\xF3n de Miembros"),A(),C(4,"div",3)(5,"span"),P(6),A()()(),C(7,"div",4)(8,"p"),P(9,'\u2139\uFE0F Aqu\xED puedes gestionar qui\xE9n tiene acceso como "Miembro" (y por tanto, a las funciones de miembro).'),A()(),ne(10,FY,3,2,"div",5)(11,UY,15,8,"div",6)(12,jY,4,0,"ng-template",null,0,lc),A()),t&2){let i=cc(13);N(6),ke("Usuarios: ",r.displayUsers().length),N(4),B("ngIf",!r.loading())("ngIfElse",i),N(),B("ngIf",r.isModalOpen)}},dependencies:[bt,ln,Lt],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;padding-top:80px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding-bottom:2rem}.admin-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:0 1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}h1[_ngcontent-%COMP%]{color:#036;font-size:2.2rem;margin:0}.stats[_ngcontent-%COMP%]{background:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;color:#666;box-shadow:0 2px 5px #0000000d}.info-banner[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border:1px solid #ffeeba;display:flex;align-items:center}.glass-effect[_ngcontent-%COMP%]{background:#fffffff2;border-radius:16px;padding:1rem;box-shadow:0 8px 32px #1f26871a;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #eee}th[_ngcontent-%COMP%]{font-weight:600;color:#666;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-weight:500;color:#333}.avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover;background:#eee}.badge[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:20px;font-size:.85rem;font-weight:700;display:inline-block}.badge.user[_ngcontent-%COMP%]{background:#f0f0f0;color:#666}.badge.member[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #c8e6c9}.action-btn[_ngcontent-%COMP%]{border:none;padding:.6rem 1.2rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s;font-size:.9rem}.action-btn.promote[_ngcontent-%COMP%]{background:#036;color:#fff}.action-btn.promote[_ngcontent-%COMP%]:hover{background:#024;transform:translateY(-2px);box-shadow:0 4px 8px #0363}.action-btn.revoke[_ngcontent-%COMP%]{background:#fff;color:#d32f2f;border:1px solid #ffcdd2}.action-btn.revoke[_ngcontent-%COMP%]:hover{background:#ffebee}.loader-container[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#666}.spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid #f3f3f3;border-top:3px solid #003366;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media(max-width:768px){.action-btn[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;width:90%;max-width:500px;box-shadow:0 20px 50px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#036;font-size:1.5rem}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#999}.modal-body[_ngcontent-%COMP%]{margin-bottom:2rem;color:#444;line-height:1.6}.note[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.9rem;color:#666;font-style:italic}.note.warning[_ngcontent-%COMP%]{color:#d32f2f}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.btn-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#666;border:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:background .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn-confirm[_ngcontent-%COMP%]{border:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;color:#fff;transition:transform .2s}.btn-promote[_ngcontent-%COMP%]{background:#036}.btn-revoke[_ngcontent-%COMP%]{background:#d32f2f}.btn-confirm[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 10px #00000026}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};function BY(n,e){n&1&&(C(0,"div",15)(1,"p"),P(2,"No hay reservas para hoy. \xA1D\xEDa tranquilo! \u{1F634}"),A()())}function $Y(n,e){if(n&1&&(C(0,"span",30),P(1),A()),n&2){let t=e.$implicit;N(),ke("\u{1F415} ",t)}}function zY(n,e){n&1&&(C(0,"span",31),P(1,"Sin perros"),A())}function qY(n,e){if(n&1&&(C(0,"div",25)(1,"span",26),P(2),A(),C(3,"div",27),ne(4,$Y,2,1,"span",28)(5,zY,2,0,"span",29),A()()),n&2){let t=e.$implicit;N(2),he(t.userName),N(2),B("ngForOf",t.selectedDogs),N(),B("ngIf",!(t.selectedDogs!=null&&t.selectedDogs.length))}}function HY(n,e){if(n&1&&(C(0,"div",18)(1,"div",19)(2,"span",20),P(3),A(),C(4,"span",21),P(5),A()(),C(6,"div",22)(7,"div",23),ne(8,qY,6,3,"div",24),A()()()),n&2){let t=e.$implicit;N(3),he(t.time),N(2),ke("",t.reservations.length," pers."),N(3),B("ngForOf",t.reservations)}}function GY(n,e){if(n&1&&(C(0,"div",16),ne(1,HY,9,3,"div",17),A()),n&2){let t=$();N(),B("ngForOf",t.todayTimeSlots())}}function WY(n,e){n&1&&(C(0,"div",32)(1,"p"),P(2,"No hay m\xE1s reservas a la vista."),A()())}function KY(n,e){if(n&1&&(C(0,"div",42)(1,"span",43),P(2),A(),C(3,"span",44),P(4),A()()),n&2){let t=e.$implicit;N(2),he(t.userName),N(2),ke(" ",(t.selectedDogs==null?null:t.selectedDogs.join(", "))||"Sin perros"," ")}}function QY(n,e){if(n&1&&(C(0,"div",38)(1,"div",39)(2,"span",20),P(3),A()(),C(4,"div",40),ne(5,KY,5,2,"div",41),A()()),n&2){let t=e.$implicit;N(3),he(t.time),N(2),B("ngForOf",t.reservations)}}function YY(n,e){if(n&1&&(C(0,"div",33)(1,"div",34)(2,"h3"),P(3),cn(4,"date"),A(),C(5,"span",35),P(6),A()(),C(7,"div",36),ne(8,QY,6,2,"div",37),A()()),n&2){let t=e.$implicit;N(3),he(Wg(4,3,t.date,"EEEE, d MMMM","","es-ES")),N(3),he(t.totalCount),N(2),B("ngForOf",t.timeSlots)}}var m0=class n{reservationService=L(gd);allReservations=this.reservationService.getReservations();todayStr=new Date().toISOString().split("T")[0];todayReservationsRaw=pt(()=>{let e=this.todayStr;return this.allReservations().filter(t=>t.date===e)});todayTimeSlots=pt(()=>{let e=this.todayReservationsRaw(),t=new Map;return e.forEach(r=>{let i=r.startTime||"Unknown";t.has(i)||t.set(i,[]),t.get(i).push(r)}),Array.from(t.entries()).sort((r,i)=>r[0].localeCompare(i[0])).map(([r,i])=>({time:r,reservations:i}))});futureReservationsGrouped=pt(()=>{let e=this.todayStr,t=this.allReservations().filter(i=>i.date&&i.date>e),r=new Map;return t.forEach(i=>{let o=i.date||"Sin Fecha";r.has(o)||r.set(o,[]),r.get(o).push(i)}),Array.from(r.entries()).sort((i,o)=>i[0].localeCompare(o[0])).map(([i,o])=>{let s=new Map;o.forEach(c=>{let d=c.startTime||"Unknown";s.has(d)||s.set(d,[]),s.get(d).push(c)});let a=Array.from(s.entries()).sort((c,d)=>c[0].localeCompare(d[0])).map(([c,d])=>({time:c,reservations:d}));return{date:i,timeSlots:a,totalCount:o.length}})});statsHoje=pt(()=>({totalReservas:this.todayReservationsRaw().length,totalPerros:this.todayReservationsRaw().reduce((e,t)=>e+(t.selectedDogs?.length||0),0)}));constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-info-reservas"]],decls:31,vars:12,consts:[[1,"reservas-container"],[1,"header"],[1,"dashboard-stats"],[1,"stat-card","blue"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","orange"],[1,"section-title"],[1,"date-badge"],["class","empty-state glass-effect today-empty",4,"ngIf"],["class","reservations-list today-list glass-effect",4,"ngIf"],[1,"section-title","future-title"],["class","empty-state",4,"ngIf"],[1,"reservations-timeline"],["class","day-group glass-effect",4,"ngFor","ngForOf"],[1,"empty-state","glass-effect","today-empty"],[1,"reservations-list","today-list","glass-effect"],["class","res-card today-card",4,"ngFor","ngForOf"],[1,"res-card","today-card"],[1,"time-slot-large"],[1,"time"],[1,"slot-count"],[1,"card-content"],[1,"users-list"],["class","user-row",4,"ngFor","ngForOf"],[1,"user-row"],[1,"user-name"],[1,"dogs-chips"],["class","dog-chip",4,"ngFor","ngForOf"],["class","no-dogs",4,"ngIf"],[1,"dog-chip"],[1,"no-dogs"],[1,"empty-state"],[1,"day-group","glass-effect"],[1,"date-header"],[1,"count-badge"],[1,"reservations-list"],["class","res-card small-card",4,"ngFor","ngForOf"],[1,"res-card","small-card"],[1,"time-slot"],[1,"users-list-small"],["class","user-row-small",4,"ngFor","ngForOf"],[1,"user-row-small"],[1,"user-name-small"],[1,"dogs-text-small"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"h1"),P(3,"\u{1F4C5} Monitor de Reservas"),A(),C(4,"p"),P(5,"Vista r\xE1pida de actividad diaria"),A()(),C(6,"div",2)(7,"div",3)(8,"span",4),P(9),A(),C(10,"span",5),P(11,"Reservas Hoy"),A()(),C(12,"div",6)(13,"span",4),P(14),A(),C(15,"span",5),P(16,"Perros Hoy"),A()()(),C(17,"div",7)(18,"h2"),P(19,"\u{1F525} Hoy"),A(),C(20,"span",8),P(21),cn(22,"date"),A()(),ne(23,BY,3,0,"div",9)(24,GY,2,1,"div",10),C(25,"div",11)(26,"h2"),P(27,"\u{1F4C5} Pr\xF3ximos D\xEDas"),A()(),ne(28,WY,3,0,"div",12),C(29,"div",13),ne(30,YY,9,8,"div",14),A()()),t&2&&(N(9),he(r.statsHoje().totalReservas),N(5),he(r.statsHoje().totalPerros),N(7),he(Wg(22,7,r.todayStr,"EEEE, d MMMM","","es-ES")),N(2),B("ngIf",r.todayTimeSlots().length===0),N(),B("ngIf",r.todayTimeSlots().length>0),N(4),B("ngIf",r.futureReservationsGrouped().length===0),N(2),B("ngForOf",r.futureReservationsGrouped()))},dependencies:[bt,ln,Lt,Mo],styles:[".reservas-container[_ngcontent-%COMP%]{max-width:800px;margin:1rem auto;padding:1rem 1rem 4rem}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;margin:0;color:var(--primary-blue)}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:5px 0 0}.dashboard-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:12px;text-align:center;box-shadow:0 4px 10px #0000000d;display:flex;flex-direction:column;align-items:center;border:1px solid #eee}.stat-card.blue[_ngcontent-%COMP%]{border-bottom:4px solid var(--primary-blue)}.stat-card.orange[_ngcontent-%COMP%]{border-bottom:4px solid var(--accent-orange)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;line-height:1;margin-bottom:5px}.blue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--primary-blue)}.orange[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--accent-orange)}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#666;text-transform:uppercase;font-weight:600}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin:0;color:#333}.date-badge[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:2px 10px;border-radius:12px;font-size:.8rem;text-transform:capitalize}.future-title[_ngcontent-%COMP%]{margin-top:3rem;opacity:.7}.today-list[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 30px #00000014;border:1px solid rgba(0,0,0,.05);overflow:hidden}.today-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.2rem;border-bottom:1px solid #f0f0f0;transition:background .2s}.today-card[_ngcontent-%COMP%]:hover{background-color:#fcfcfc}.time-slot-large[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;padding:8px 12px;border-radius:8px;font-weight:700;font-size:1.2rem;margin-right:2rem;min-width:100px;text-align:center;box-shadow:0 2px 5px #0000001a;display:flex;flex-direction:column;justify-content:center;align-items:center}.small-card[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#666;font-weight:700;font-size:.95rem;min-width:80px;margin-right:20px;display:block}.card-content[_ngcontent-%COMP%]{flex:1}.user-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.user-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#222}.dogs-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.dog-chip[_ngcontent-%COMP%]{background-color:#fff4e6;color:#d97706;padding:2px 8px;border-radius:4px;font-size:.85rem;font-weight:600}.day-group[_ngcontent-%COMP%]{background:#fff9;margin-bottom:1rem;border-radius:8px;overflow:hidden;border:1px solid rgba(0,0,0,.05)}.date-header[_ngcontent-%COMP%]{background-color:#f0f4f8;color:#444;padding:8px 15px;display:flex;justify-content:space-between;align-items:center;font-weight:700}.date-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;text-transform:capitalize}.small-card[_ngcontent-%COMP%]{display:flex;padding:10px 15px;border-bottom:1px solid #eee;align-items:center}.small-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.small-card[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#666;font-weight:700;font-size:.95rem;width:60px}.user-name-small[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-right:10px}.dogs-text-small[_ngcontent-%COMP%]{color:#888;font-size:.85rem}.users-list-small[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:8px}.user-row-small[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:10px}.empty-state[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#999;background:#ffffff80;border-radius:12px}@media(max-width:600px){.today-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.time-slot-large[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;margin-right:0;margin-bottom:10px;padding:8px 15px;box-sizing:border-box}.slot-count[_ngcontent-%COMP%]{margin-top:0;font-size:.9rem}.user-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}}"]})};var gU=[{path:"",component:Hv},{path:"reservas",component:s0,canActivate:[dA]},{path:"contacto",component:a0},{path:"galeria",component:c0},{path:"calendario",component:l0,canActivate:[dA]},{path:"gestionar-competiciones",component:u0,canActivate:[h0]},{path:"gestionar-miembros",component:p0,canActivate:[h0]},{path:"info-reservas",component:m0,canActivate:[h0]},{path:"perfil",component:d0,canActivate:[pU]},{path:"admin/usuarios",component:f0,canActivate:[mU]},{path:"login",component:qv}];iM(D2);_T(wi.firebase);var yU={providers:[iw(),lk(),fI(gU),{provide:uc,useValue:"es"},Fk(()=>_T(wi.firebase)),h2(()=>f2()),OO(()=>FO()),C2(()=>S2()),{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:JI.PROVIDER_ID,provider:new JI("YOUR_GOOGLE_CLIENT_ID")}],onError:n=>{console.error(n)}}},fk("ngsw-worker.js",{enabled:!Uh(),registrationStrategy:"registerWhenStable:30000"})]};function JY(n,e){if(n&1){let t=me();C(0,"li")(1,"a",13),K("click",function(){X(t);let i=$();return Z(i.closeMenu())}),P(2,"Reservas"),A()()}}function XY(n,e){if(n&1){let t=me();C(0,"li")(1,"a",14),K("click",function(){X(t);let i=$();return Z(i.closeMenu())}),P(2,"Calendario"),A()()}}function ZY(n,e){if(n&1){let t=me();C(0,"li")(1,"a",15),K("click",function(){X(t);let i=$();return Z(i.closeMenu())}),P(2,"Eventos"),A()()}}function eJ(n,e){if(n&1){let t=me();C(0,"a",16),K("click",function(){X(t);let i=$();return Z(i.closeMenu())}),P(1," Iniciar Sesi\xF3n "),A()}}function tJ(n,e){if(n&1&&ye(0,"img",34),n&2){let t=$().ngIf;B("src",t.photoURL,Vt)}}function nJ(n,e){if(n&1&&(C(0,"div",35),P(1),A()),n&2){let t=$().ngIf;N(),ke(" ",(t.displayName==null?null:t.displayName.charAt(0))||"U"," ")}}function rJ(n,e){if(n&1){let t=me();C(0,"a",36),K("click",function(){X(t);let i=$(2);return Z(i.closeMenu())}),P(1,"\u{1F4C5} Mis Reservas"),A()}}function iJ(n,e){n&1&&ye(0,"div",25)}function oJ(n,e){if(n&1){let t=me();C(0,"a",37),K("click",function(){X(t);let i=$(2);return Z(i.closeMenu())}),P(1," \u{1F465} Gesti\xF3n de Miembros "),A()}}function sJ(n,e){if(n&1){let t=me();C(0,"a",38),K("click",function(){X(t);let i=$(2);return Z(i.closeMenu())}),P(1," \u{1F440} Monitor Reservas "),A()}}function aJ(n,e){n&1&&ye(0,"div",25)}function cJ(n,e){if(n&1){let t=me();C(0,"a",39),K("click",function(){X(t);let i=$(2);return Z(i.closeMenu())}),P(1," \u{1F527} Administrar Sistema "),A()}}function lJ(n,e){if(n&1){let t=me();C(0,"div",40),K("click",function(){X(t);let i=$(2);return Z(i.closeMenu())}),A()}}function uJ(n,e){if(n&1){let t=me();C(0,"div",17)(1,"button",18),K("click",function(i){X(t);let o=$();return Z(o.toggleUserMenu(i))}),ne(2,tJ,1,1,"img",19)(3,nJ,2,1,"ng-template",null,0,lc),C(5,"span",20),P(6,"\u25BC"),A()(),C(7,"div",21)(8,"div",22)(9,"p",23),P(10),A(),C(11,"p",24),P(12),A()(),ye(13,"div",25),C(14,"a",26),K("click",function(){X(t);let i=$();return Z(i.closeMenu())}),P(15,"\u{1F436} Mis Perretes"),A(),ne(16,rJ,2,0,"a",27)(17,iJ,1,0,"div",28)(18,oJ,2,0,"a",29)(19,sJ,2,0,"a",30)(20,aJ,1,0,"div",28)(21,cJ,2,0,"a",31),C(22,"button",32),K("click",function(){X(t);let i=$();return Z(i.logout())}),P(23,"\u{1F6AA} Cerrar Sesi\xF3n"),A()(),ne(24,lJ,1,0,"div",33),A()}if(n&2){let t=e.ngIf,r=cc(4),i=$();N(2),B("ngIf",t.photoURL)("ngIfElse",r),N(5),At("show",i.isUserMenuOpen),N(3),he(t.displayName),N(2),he(t.email),N(4),B("ngIf",i.authService.isMember()),N(),B("ngIf",i.authService.isStaff()),N(),B("ngIf",i.authService.isStaff()),N(),B("ngIf",i.authService.isStaff()),N(),B("ngIf",i.authService.isAdmin()),N(),B("ngIf",i.authService.isAdmin()),N(3),B("ngIf",i.isUserMenuOpen)}}var g0=class n{isMenuOpen=!1;isUserMenuOpen=!1;authService=L(Nt);toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1,this.isUserMenuOpen=!1}toggleUserMenu(e){e&&(e.preventDefault(),e.stopPropagation()),this.isUserMenuOpen=!this.isUserMenuOpen}async logout(){await this.authService.logout(),this.closeMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-navbar"]],decls:26,vars:9,consts:[["defaultAvatar",""],[1,"app-header"],[1,"logo-area"],[1,"mobile-menu-btn",3,"click"],[1,"bar"],["src","Images/Agility_Asturias_logo.jpg","alt","Agility Asturias Logo",1,"nav-logo"],["routerLink","/",3,"click"],[4,"ngIf"],["routerLink","/galeria",3,"click"],["routerLink","/contacto",3,"click"],[1,"auth-section"],["routerLink","/login","class","login-btn",3,"click",4,"ngIf"],["class","user-dropdown-container",4,"ngIf"],["routerLink","/reservas",3,"click"],["routerLink","/calendario",3,"click"],["routerLink","/gestionar-competiciones",3,"click"],["routerLink","/login",1,"login-btn",3,"click"],[1,"user-dropdown-container"],[1,"user-avatar-btn",3,"click"],["alt","User","class","nav-user-img","referrerpolicy","no-referrer",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-arrow"],[1,"user-dropdown-menu"],[1,"user-header"],[1,"name"],[1,"email"],[1,"dropdown-divider"],["routerLink","/perfil",1,"dropdown-item",3,"click"],["routerLink","/reservas","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-divider",4,"ngIf"],["routerLink","/gestionar-miembros","class","dropdown-item staff-item",3,"click",4,"ngIf"],["routerLink","/info-reservas","class","dropdown-item staff-item",3,"click",4,"ngIf"],["routerLink","/admin/usuarios","class","dropdown-item admin-item",3,"click",4,"ngIf"],[1,"dropdown-item","logout-item",3,"click"],["class","dropdown-backdrop",3,"click",4,"ngIf"],["alt","User","referrerpolicy","no-referrer",1,"nav-user-img",3,"src"],[1,"nav-user-img","default-avatar-placeholder"],["routerLink","/reservas",1,"dropdown-item",3,"click"],["routerLink","/gestionar-miembros",1,"dropdown-item","staff-item",3,"click"],["routerLink","/info-reservas",1,"dropdown-item","staff-item",3,"click"],["routerLink","/admin/usuarios",1,"dropdown-item","admin-item",3,"click"],[1,"dropdown-backdrop",3,"click"]],template:function(t,r){t&1&&(C(0,"header",1)(1,"div",2)(2,"button",3),K("click",function(){return r.toggleMenu()}),ye(3,"span",4)(4,"span",4)(5,"span",4),A(),ye(6,"img",5),C(7,"h1"),P(8,"Agility Asturias"),A()(),C(9,"nav")(10,"ul")(11,"li")(12,"a",6),K("click",function(){return r.closeMenu()}),P(13,"Bienvenido"),A()(),ne(14,JY,3,0,"li",7),C(15,"li")(16,"a",8),K("click",function(){return r.closeMenu()}),P(17,"Galer\xEDa"),A()(),ne(18,XY,3,0,"li",7)(19,ZY,3,0,"li",7),C(20,"li")(21,"a",9),K("click",function(){return r.closeMenu()}),P(22,"Contacto"),A()()()(),C(23,"div",10),ne(24,eJ,2,0,"a",11)(25,uJ,25,13,"div",12),A()()),t&2&&(N(2),At("active",r.isMenuOpen),N(8),At("active",r.isMenuOpen),N(4),B("ngIf",r.authService.isMember()),N(4),B("ngIf",r.authService.isMember()),N(),B("ngIf",r.authService.isStaff()),N(5),B("ngIf",!r.authService.userProfileSignal()),N(),B("ngIf",r.authService.userProfileSignal()))},dependencies:[yu,bt,Lt],styles:[".app-header[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:var(--white);padding:1rem 2rem;display:flex;align-items:center;position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-right:auto}.nav-logo[_ngcontent-%COMP%]{height:40px;width:auto;border-radius:4px}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);margin:0;font-size:1.5rem}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;gap:1.5rem;align-items:center}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--white);font-weight:500;text-decoration:none;transition:color .2s}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}.auth-section[_ngcontent-%COMP%]{margin-left:1.5rem;position:relative;display:flex;align-items:center}.login-btn[_ngcontent-%COMP%]{background-color:var(--accent-orange);padding:8px 20px;border-radius:20px;border:none;transition:all .2s;color:#fff;text-decoration:none;font-weight:700;white-space:nowrap;box-shadow:0 2px 5px #0003}.login-btn[_ngcontent-%COMP%]:hover{background-color:#f93;color:#fff!important;transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}.user-dropdown-container[_ngcontent-%COMP%]{position:relative}.user-avatar-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;gap:8px}.nav-user-img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid white}.default-avatar-placeholder[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;text-transform:uppercase}.dropdown-arrow[_ngcontent-%COMP%]{color:#fff;font-size:10px}.user-dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:120%;right:0;background:#fff;color:#333;min-width:200px;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:8px 0;display:none;flex-direction:column;z-index:1001;animation:_ngcontent-%COMP%_fadeIn .1s ease-out}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f8f9fa}.user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:14px;color:#333}.user-header[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:4px 0}.dropdown-item[_ngcontent-%COMP%]{padding:10px 16px;text-align:left;background:none;border:none;width:100%;cursor:pointer;color:#444!important;font-size:14px;transition:background .2s;display:block;box-sizing:border-box}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:var(--primary-blue)!important}.logout-item[_ngcontent-%COMP%]{color:#dc3545!important}.logout-item[_ngcontent-%COMP%]:hover{background-color:#fff1f2;color:#dc3545!important}.dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mobile-menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:space-between;width:30px;height:21px;background:transparent;border:none;cursor:pointer;padding:0;z-index:10}.mobile-menu-btn[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:100%;height:3px;background-color:var(--white);border-radius:3px;transition:all .3s ease-in-out}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(1){transform:translateY(9px) rotate(45deg)}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){opacity:0}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-9px) rotate(-45deg)}@media(max-width:768px){.app-header[_ngcontent-%COMP%]{padding:1rem}.logo-area[_ngcontent-%COMP%]{width:auto}.mobile-menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;flex-direction:column;width:100%;position:absolute;top:100%;left:0;background-color:var(--primary-blue);padding:1rem 0;box-shadow:0 4px 6px #0000001a;z-index:9;align-items:stretch}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 2rem;width:100%}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.auth-section[_ngcontent-%COMP%]{margin-left:1rem}.user-dropdown-menu[_ngcontent-%COMP%]{right:0;width:220px}}"]})};var dJ=(n,e)=>e.id;function hJ(n,e){n&1&&(C(0,"span"),P(1,"\u2713"),A())}function fJ(n,e){n&1&&(C(0,"span"),P(1,"\u2715"),A())}function pJ(n,e){n&1&&(C(0,"span"),P(1,"\u26A0"),A())}function mJ(n,e){n&1&&(C(0,"span"),P(1,"\u2139"),A())}function gJ(n,e){if(n&1){let t=me();C(0,"div",2),K("click",function(){let i=X(t).$implicit,o=$();return Z(o.toastService.remove(i.id))}),C(1,"div",3),fb(2,hJ,2,0,"span")(3,fJ,2,0,"span")(4,pJ,2,0,"span")(5,mJ,2,0,"span"),A(),C(6,"div",4),P(7),A()()}if(n&2){let t=e.$implicit;B("ngClass",t.type),N(2),mb(t.type==="success"?2:t.type==="error"?3:t.type==="warning"?4:5),N(5),ke(" ",t.message," ")}}var y0=class n{toastService=L(Br);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast",3,"click","ngClass"],[1,"toast-icon"],[1,"toast-content"]],template:function(t,r){t&1&&(C(0,"div",0),gb(1,gJ,8,3,"div",1,dJ),A()),t&2&&(N(),yb(r.toastService.toasts()))},dependencies:[bt,hc],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;pointer-events:none}.toast[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:16px 24px;min-width:300px;max-width:400px;box-shadow:0 8px 32px #0000001a;display:flex;align-items:center;gap:12px;animation:_ngcontent-%COMP%_slideIn .3s ease-out;pointer-events:auto;cursor:pointer;border-left:6px solid #ccc;transition:transform .2s,opacity .2s}.toast[_ngcontent-%COMP%]:hover{transform:translateY(-2px);opacity:.95}.toast.success[_ngcontent-%COMP%]{border-left-color:#10b981}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#10b981;background:#10b9811a}.toast.error[_ngcontent-%COMP%]{border-left-color:#ef4444}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#ef4444;background:#ef44441a}.toast.warning[_ngcontent-%COMP%]{border-left-color:#f59e0b}.toast.warning[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#f59e0b;background:#f59e0b1a}.toast.info[_ngcontent-%COMP%]{border-left-color:#3b82f6}.toast.info[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#3b82f6;background:#3b82f61a}.toast-icon[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-family:monospace}.toast-content[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:.95rem}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})};var _0=class n{title=pe("AgilityAsturias");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-container"]],template:function(t,r){t&1&&(C(0,"div",0),ye(1,"app-navbar"),C(2,"main"),ye(3,"router-outlet"),A(),C(4,"footer")(5,"p"),P(6,"\xA9 2026 Agility Asturias"),A()(),ye(7,"app-toast"),A())},dependencies:[df,g0,y0],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:var(--container-width);margin:0 auto;width:100%}footer[_ngcontent-%COMP%]{text-align:center;padding:1rem;background-color:#e0e0e0;font-size:.875rem}"]})};$b(_0,yU).catch(n=>console.error(n));
