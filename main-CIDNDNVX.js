var _4=Object.defineProperty,v4=Object.defineProperties;var E4=Object.getOwnPropertyDescriptors;var Am=Object.getOwnPropertySymbols;var lP=Object.prototype.hasOwnProperty,dP=Object.prototype.propertyIsEnumerable;var uP=(n,e,t)=>e in n?_4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})lP.call(e,t)&&uP(n,t,e[t]);if(Am)for(var t of Am(e))dP.call(e,t)&&uP(n,t,e[t]);return n},se=(n,e)=>v4(n,E4(e));var jo=(n,e)=>{var t={};for(var r in n)lP.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Am)for(var r of Am(n))e.indexOf(r)<0&&dP.call(n,r)&&(t[r]=n[r]);return t};var Rn=null,Rm=!1,PI=1,I4=null,Ln=Symbol("SIGNAL");function de(n){let e=Rn;return Rn=n,e}function Nm(){return Rn}var Wu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function uh(n){if(Rm)throw new Error("");if(Rn===null)return;Rn.consumerOnSignalRead(n);let e=Rn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Rn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Rn.producers,t!==void 0&&t.producer===n)){Rn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Rn&&(!r||b4(i,Rn)))return;let s=Qu(Rn),o={producer:n,consumer:Rn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Rn.producersTail=o,e!==void 0?e.nextProducer=o:Rn.producers=o,s&&mP(n,o)}function hP(){PI++}function NI(n){if(!(Qu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===PI)){if(!n.producerMustRecompute(n)&&!dh(n)){RI(n);return}n.producerRecomputeValue(n),RI(n)}}function kI(n){if(n.consumers===void 0)return;let e=Rm;Rm=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||w4(r)}}finally{Rm=e}}function xI(){return Rn?.consumerAllowSignalWrites!==!1}function w4(n){n.dirty=!0,kI(n),n.consumerMarkedDirty?.(n)}function RI(n){n.dirty=!1,n.lastCleanEpoch=PI}function Ku(n){return n&&fP(n),de(n)}function fP(n){n.producersTail=void 0,n.recomputing=!0}function lh(n,e){de(e),n&&pP(n)}function pP(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Qu(n))do t=MI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function dh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(NI(t),r!==t.version))return!0}return!1}function Qa(n){if(Qu(n)){let e=n.producers;for(;e!==void 0;)e=MI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function mP(n,e){let t=n.consumersTail,r=Qu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)mP(i.producer,i)}function MI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Qu(e)){let s=e.producers;for(;s!==void 0;)s=MI(s)}return t}function Qu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function OI(n){I4?.(n)}function b4(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function FI(n,e){return Object.is(n,e)}function km(n,e){let t=Object.create(T4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(NI(t),uh(t),t.value===Pm)throw t.error;return t.value};return r[Ln]=t,OI(t),r}var DI=Symbol("UNSET"),AI=Symbol("COMPUTING"),Pm=Symbol("ERRORED"),T4=se(j({},Wu),{value:DI,dirty:!0,error:null,equal:FI,kind:"computed",producerMustRecompute(n){return n.value===DI||n.value===AI},producerRecomputeValue(n){if(n.value===AI)throw new Error("");let e=n.value;n.value=AI;let t=Ku(n),r,i=!1;try{r=n.computation(),de(null),i=e!==DI&&e!==Pm&&r!==Pm&&n.equal(e,r)}catch(s){r=Pm,n.error=s}finally{lh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function C4(){throw new Error}var gP=C4;function yP(n){gP(n)}function LI(n){gP=n}var S4=null;function VI(n,e){let t=Object.create(xm);t.value=n,e!==void 0&&(t.equal=e);let r=()=>_P(t);return r[Ln]=t,OI(t),[r,o=>hh(t,o),o=>vP(t,o)]}function _P(n){return uh(n),n.value}function hh(n,e){xI()||yP(n),n.equal(n.value,e)||(n.value=e,D4(n))}function vP(n,e){xI()||yP(n),hh(n,e(n.value))}var xm=se(j({},Wu),{equal:FI,value:void 0,kind:"signal"});function D4(n){n.version++,hP(),kI(n),S4?.(n)}function UI(n){let e=de(null);try{return n()}finally{de(e)}}var jI=se(j({},Wu),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function BI(n){if(n.dirty=!1,n.version>0&&!dh(n))return;n.version++;let e=Ku(n);try{n.cleanup(),n.fn()}finally{lh(n,e)}}function De(n){return typeof n=="function"}function Yu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Mm=Yu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ya(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var tn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(De(r))try{r()}catch(s){e=s instanceof Mm?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{EP(s)}catch(o){e=e??[],o instanceof Mm?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Mm(e)}}add(e){var t;if(e&&e!==this)if(this.closed)EP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ya(t,e)}remove(e){let{_finalizers:t}=this;t&&Ya(t,e),e instanceof n&&e._removeParent(this)}};tn.EMPTY=(()=>{let n=new tn;return n.closed=!0,n})();var $I=tn.EMPTY;function Om(n){return n instanceof tn||n&&"closed"in n&&De(n.remove)&&De(n.add)&&De(n.unsubscribe)}function EP(n){De(n)?n():n.unsubscribe()}var Kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ju={setTimeout(n,e,...t){let{delegate:r}=Ju;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ju;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Fm(n){Ju.setTimeout(()=>{let{onUnhandledError:e}=Kr;if(e)e(n);else throw n})}function Ja(){}var IP=HI("C",void 0,void 0);function wP(n){return HI("E",void 0,n)}function bP(n){return HI("N",n,void 0)}function HI(n,e,t){return{kind:n,value:e,error:t}}var Xa=null;function Xu(n){if(Kr.useDeprecatedSynchronousErrorHandling){let e=!Xa;if(e&&(Xa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xa;if(Xa=null,t)throw r}}else n()}function TP(n){Kr.useDeprecatedSynchronousErrorHandling&&Xa&&(Xa.errorThrown=!0,Xa.error=n)}var Za=class extends tn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Om(e)&&e.add(this)):this.destination=P4}static create(e,t,r){return new Bo(e,t,r)}next(e){this.isStopped?zI(bP(e),this):this._next(e)}error(e){this.isStopped?zI(wP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zI(IP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},A4=Function.prototype.bind;function qI(n,e){return A4.call(n,e)}var GI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Lm(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Lm(r)}else Lm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Lm(t)}}},Bo=class extends Za{constructor(e,t,r){super();let i;if(De(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Kr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qI(e.next,s),error:e.error&&qI(e.error,s),complete:e.complete&&qI(e.complete,s)}):i=e}this.destination=new GI(i)}};function Lm(n){Kr.useDeprecatedSynchronousErrorHandling?TP(n):Fm(n)}function R4(n){throw n}function zI(n,e){let{onStoppedNotification:t}=Kr;t&&Ju.setTimeout(()=>t(n,e))}var P4={closed:!0,next:Ja,error:R4,complete:Ja};var Zu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qr(n){return n}function WI(...n){return KI(n)}function KI(n){return n.length===0?Qr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=k4(t)?t:new Bo(t,r,i);return Xu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=CP(r),new r((i,s)=>{let o=new Bo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zu](){return this}pipe(...t){return KI(t)(this)}toPromise(t){return t=CP(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function CP(n){var e;return(e=n??Kr.Promise)!==null&&e!==void 0?e:Promise}function N4(n){return n&&De(n.next)&&De(n.error)&&De(n.complete)}function k4(n){return n&&n instanceof Za||N4(n)&&Om(n)}function x4(n){return De(n?.lift)}function Xe(n){return e=>{if(x4(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ze(n,e,t,r,i){return new QI(n,e,t,r,i)}var QI=class extends Za{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var SP=Yu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var vt=(()=>{class n extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Vm(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new SP}next(t){Xu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?$I:(this.currentObservers=null,s.push(t),new tn(()=>{this.currentObservers=null,Ya(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new be;return t.source=this,t}}return n.create=(e,t)=>new Vm(e,t),n})(),Vm=class extends vt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:$I}};var Bt=class extends vt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fh={now(){return(fh.delegate||Date).now()},delegate:void 0};var el=class extends vt{constructor(e=1/0,t=1/0,r=fh){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Um=class extends tn{constructor(e,t){super()}schedule(e,t=0){return this}};var ph={setInterval(n,e,...t){let{delegate:r}=ph;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ph;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var tl=class extends Um{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ph.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ph.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ya(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var nl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};nl.now=fh.now;var rl=class extends nl{constructor(e,t=nl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var YI=new rl(tl);var jm=class extends tl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Bm=class extends rl{};var JI=new Bm(jm);var gn=new be(n=>n.complete());function DP(n){return n&&De(n.schedule)}function AP(n){return n[n.length-1]}function $m(n){return De(AP(n))?n.pop():void 0}function $o(n){return DP(AP(n))?n.pop():void 0}function XI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function PP(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(m){o(m)}}function c(h){try{d(r.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function RP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ec(n){return this instanceof ec?(this.v=n,this):new ec(n)}function NP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(C){return function(R){return Promise.resolve(R).then(C,m)}}function a(C,R){r[C]&&(i[C]=function(P){return new Promise(function(x,$){s.push([C,P,x,$])>1||c(C,P)})},R&&(i[C]=R(i[C])))}function c(C,R){try{d(r[C](R))}catch(P){y(s[0][3],P)}}function d(C){C.value instanceof ec?Promise.resolve(C.value.v).then(h,m):y(s[0][2],C)}function h(C){c("next",C)}function m(C){c("throw",C)}function y(C,R){C(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function kP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof RP=="function"?RP(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Hm=n=>n&&typeof n.length=="number"&&typeof n!="function";function qm(n){return De(n?.then)}function zm(n){return De(n[Zu])}function Gm(n){return Symbol.asyncIterator&&De(n?.[Symbol.asyncIterator])}function Wm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function M4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Km=M4();function Qm(n){return De(n?.[Km])}function Ym(n){return NP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ec(t.read());if(i)return yield ec(void 0);yield yield ec(r)}}finally{t.releaseLock()}})}function Jm(n){return De(n?.getReader)}function $t(n){if(n instanceof be)return n;if(n!=null){if(zm(n))return O4(n);if(Hm(n))return F4(n);if(qm(n))return L4(n);if(Gm(n))return xP(n);if(Qm(n))return V4(n);if(Jm(n))return U4(n)}throw Wm(n)}function O4(n){return new be(e=>{let t=n[Zu]();if(De(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function F4(n){return new be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function L4(n){return new be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Fm)})}function V4(n){return new be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function xP(n){return new be(e=>{j4(n,e).catch(t=>e.error(t))})}function U4(n){return xP(Ym(n))}function j4(n,e){var t,r,i,s;return PP(this,void 0,void 0,function*(){try{for(t=kP(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function qn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ho(n,e=0){return Xe((t,r)=>{t.subscribe(Ze(r,i=>qn(r,n,()=>r.next(i),e),()=>qn(r,n,()=>r.complete(),e),i=>qn(r,n,()=>r.error(i),e)))})}function qo(n,e=0){return Xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function MP(n,e){return $t(n).pipe(qo(e),Ho(e))}function OP(n,e){return $t(n).pipe(qo(e),Ho(e))}function FP(n,e){return new be(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function LP(n,e){return new be(t=>{let r;return qn(t,e,()=>{r=n[Km](),qn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>De(r?.return)&&r.return()})}function Xm(n,e){if(!n)throw new Error("Iterable cannot be null");return new be(t=>{qn(t,e,()=>{let r=n[Symbol.asyncIterator]();qn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VP(n,e){return Xm(Ym(n),e)}function UP(n,e){if(n!=null){if(zm(n))return MP(n,e);if(Hm(n))return FP(n,e);if(qm(n))return OP(n,e);if(Gm(n))return Xm(n,e);if(Qm(n))return LP(n,e);if(Jm(n))return VP(n,e)}throw Wm(n)}function Ht(n,e){return e?UP(n,e):$t(n)}function Ue(...n){let e=$o(n);return Ht(n,e)}function ZI(n,e){let t=De(n)?n:()=>n,r=i=>i.error(t());return new be(e?i=>e.schedule(r,0,i):r)}function mh(n){return!!n&&(n instanceof be||De(n.lift)&&De(n.subscribe))}var ws=Yu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function gh(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new Bo({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ws)}});n.subscribe(s)})}function We(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:B4}=Array;function $4(n,e){return B4(e)?n(...e):n(e)}function Zm(n){return We(e=>$4(n,e))}var{isArray:H4}=Array,{getPrototypeOf:q4,prototype:z4,keys:G4}=Object;function eg(n){if(n.length===1){let e=n[0];if(H4(e))return{args:e,keys:null};if(W4(e)){let t=G4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function W4(n){return n&&typeof n=="object"&&q4(n)===z4}function tg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ew(...n){let e=$o(n),t=$m(n),{args:r,keys:i}=eg(n);if(r.length===0)return Ht([],e);let s=new be(K4(r,e,i?o=>tg(i,o):Qr));return t?s.pipe(Zm(t)):s}function K4(n,e,t=Qr){return r=>{jP(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)jP(e,()=>{let d=Ht(n[c],e),h=!1;d.subscribe(Ze(r,m=>{s[c]=m,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function jP(n,e,t){n?qn(t,n,e):e()}function BP(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,m=!1,y=()=>{m&&!c.length&&!d&&e.complete()},C=P=>d<r?R(P):c.push(P),R=P=>{s&&e.next(P),d++;let x=!1;$t(t(P,h++)).subscribe(Ze(e,$=>{i?.($),s?C($):e.next($)},()=>{x=!0},void 0,()=>{if(x)try{for(d--;c.length&&d<r;){let $=c.shift();o?qn(e,o,()=>R($)):R($)}y()}catch($){e.error($)}}))};return n.subscribe(Ze(e,C,()=>{m=!0,y()})),()=>{a?.()}}function Vn(n,e,t=1/0){return De(e)?Vn((r,i)=>We((s,o)=>e(r,s,i,o))($t(n(r,i))),t):(typeof e=="number"&&(t=e),Xe((r,i)=>BP(r,i,n,t)))}function $P(n=1/0){return Vn(Qr,n)}function HP(){return $P(1)}function il(...n){return HP()(Ht(n,$o(n)))}function yh(n){return new be(e=>{$t(n()).subscribe(e)})}function tw(...n){let e=$m(n),{args:t,keys:r}=eg(n),i=new be(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let m=!1;$t(t[h]).subscribe(Ze(s,y=>{m||(m=!0,d--),a[h]=y},()=>c--,void 0,()=>{(!c||!m)&&(d||s.next(r?tg(r,a):a),s.complete())}))}});return e?i.pipe(Zm(e)):i}var bs=new be(Ja);function kt(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>n.call(e,s,i++)&&r.next(s)))})}function _h(n){return Xe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ze(t,void 0,void 0,o=>{s=$t(n(o,_h(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ng(n,e){return De(e)?Vn(n,e,1):Vn(n,1)}function qP(n){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yn(n){return n<=0?()=>gn:Xe((e,t)=>{let r=0;e.subscribe(Ze(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zP(n=Q4){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Q4(){return new ws}function nw(n){return Xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ts(n,e){let t=arguments.length>=2;return r=>r.pipe(n?kt((i,s)=>n(i,s,r)):Qr,yn(1),t?qP(e):zP(()=>new ws))}function rg(n){return n<=0?()=>gn:Xe((e,t)=>{let r=[];e.subscribe(Ze(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ig(n){return kt((e,t)=>n<=t)}function rw(...n){let e=$o(n);return Xe((t,r)=>{(e?il(n,t,e):il(n,t)).subscribe(r)})}function zn(n,e){return Xe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ze(r,c=>{i?.unsubscribe();let d=0,h=s++;$t(n(c,h)).subscribe(i=Ze(r,m=>r.next(e?e(c,m,h,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function vh(n){return Xe((e,t)=>{$t(n).subscribe(Ze(t,()=>t.complete(),Ja)),!t.closed&&e.subscribe(t)})}function ki(n,e,t){let r=De(n)||e||t?{next:n,error:e,complete:t}:n;return r?Xe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ze(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Qr}var iw;function sg(){return iw}function xi(n){let e=iw;return iw=n,e}var GP=Symbol("NotFound");function sl(n){return n===GP||n?.name==="\u0275NotFound"}var zo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},_w=new zo("21.1.2");var hg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super(As(e,t)),this.code=e}};function Y4(n){return`NG0${Math.abs(n)}`}function As(n,e){return`${Y4(n)}${e?": "+e:""}`}var Yr=globalThis;function et(n){for(let e in n)if(n[e]===et)return e;throw Error("")}function JP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ss(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ss).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function fg(n,e){return n?e?`${n} ${e}`:n:e||""}var J4=et({__forward_ref__:et});function Rs(n){return n.__forward_ref__=Rs,n.toString=function(){return Ss(this())},n}function _n(n){return vw(n)?n():n}function vw(n){return typeof n=="function"&&n.hasOwnProperty(J4)&&n.__forward_ref__===Rs}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function or(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sh(n){return X4(n,pg)}function Ew(n){return Sh(n)!==null}function X4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Z4(n){let e=n?.[pg]??null;return e||null}function ow(n){return n&&n.hasOwnProperty(ag)?n[ag]:null}var pg=et({\u0275prov:et}),ag=et({\u0275inj:et}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Iw(n){return n&&!!n.\u0275providers}var ww=et({\u0275cmp:et}),bw=et({\u0275dir:et}),Tw=et({\u0275pipe:et}),Cw=et({\u0275mod:et}),Ih=et({\u0275fac:et}),sc=et({__NG_ELEMENT_ID__:et}),WP=et({__NG_ENV_ID__:et});function Sw(n){return mg(n,"@NgModule"),n[Cw]||null}function Yo(n){return mg(n,"@Component"),n[ww]||null}function Dw(n){return mg(n,"@Directive"),n[bw]||null}function XP(n){return mg(n,"@Pipe"),n[Tw]||null}function mg(n,e){if(n==null)throw new q(-919,!1)}function al(n){return typeof n=="string"?n:n==null?"":String(n)}var ZP=et({ngErrorCode:et}),e$=et({ngErrorMessage:et}),t$=et({ngTokenPath:et});function Aw(n,e){return eN("",-200,e)}function gg(n,e){throw new q(-201,!1)}function eN(n,e,t){let r=new q(e,n);return r[ZP]=e,r[e$]=n,t&&(r[t$]=t),r}function n$(n){return n[ZP]}var aw;function tN(){return aw}function Un(n){let e=aw;return aw=n,e}function Rw(n,e,t){let r=Sh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;gg(n,"")}var r$={},tc=r$,cw="__NG_DI_FLAG__",uw=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=nc(t)||0;try{return this.injector.get(e,r&8?null:tc,r)}catch(i){if(sl(i))return i;throw i}}};function i$(n,e=0){let t=sg();if(t===void 0)throw new q(-203,!1);if(t===null)return Rw(n,void 0,e);{let r=s$(e),i=t.retrieve(n,r);if(sl(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(tN()||i$)(_n(n),e)}function U(n,e){return me(n,nc(e))}function nc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function s$(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function lw(n){let e=[];for(let t=0;t<n.length;t++){let r=_n(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=o$(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function nN(n,e){return n[cw]=e,n.prototype[cw]=e,n}function o$(n){return n[cw]}function Go(n,e){let t=n.hasOwnProperty(Ih);return t?n[Ih]:null}function yg(n,e){n.forEach(t=>Array.isArray(t)?yg(t,e):e(t))}function Pw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Dh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function rN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function _g(n,e,t){let r=cl(n,e);return r>=0?n[r|1]=t:(r=~r,rN(n,r,e,t)),r}function vg(n,e){let t=cl(n,e);if(t>=0)return n[t|1]}function cl(n,e){return a$(n,e,1)}function a$(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Jo={},jn=[],oc=new Z(""),Nw=new Z("",-1),kw=new Z(""),wh=class{get(e,t=tc){if(t===tc){let i=eN("",-201);throw i.name="\u0275NotFound",i}return t}};function vn(n){return{\u0275providers:n}}function iN(n){return vn([{provide:oc,multi:!0,useValue:n}])}function sN(...n){return{\u0275providers:xw(!0,n),\u0275fromNgModule:!0}}function xw(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return yg(e,o=>{let a=o;cg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&oN(i,s),t}function oN(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Mw(i,s=>{e(s,r)})}}function cg(n,e,t,r){if(n=_n(n),!n)return!1;let i=null,s=ow(n),o=!s&&Yo(n);if(!s&&!o){let c=n.ngModule;if(s=ow(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)cg(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;yg(s.imports,h=>{cg(h,e,t,r)&&(d||=[],d.push(h))}),d!==void 0&&oN(d,e)}if(!a){let d=Go(i)||(()=>new i);e({provide:i,useFactory:d,deps:jn},i),e({provide:kw,useValue:i,multi:!0},i),e({provide:oc,useValue:()=>me(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;Mw(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Mw(n,e){for(let t of n)Iw(t)&&(t=t.\u0275providers),Array.isArray(t)?Mw(t,e):e(t)}var c$=et({provide:String,useValue:et});function aN(n){return n!==null&&typeof n=="object"&&c$ in n}function u$(n){return!!(n&&n.useExisting)}function l$(n){return!!(n&&n.useFactory)}function rc(n){return typeof n=="function"}function cN(n){return!!n.useClass}var Ah=new Z(""),og={},KP={},sw;function Rh(){return sw===void 0&&(sw=new wh),sw}var St=class{},ic=class extends St{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,hw(e,o=>this.processProvider(o)),this.records.set(Nw,ol(void 0,this)),i.has("environment")&&this.records.set(St,ol(void 0,this));let s=this.records.get(Ah);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(kw,jn,{self:!0}))}retrieve(e,t){let r=nc(t)||0;try{return this.get(e,tc,r)}catch(i){if(sl(i))return i;throw i}}destroy(){Eh(this),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return Eh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Eh(this);let t=xi(this),r=Un(void 0),i;try{return e()}finally{xi(t),Un(r)}}get(e,t=tc,r){if(Eh(this),e.hasOwnProperty(WP))return e[WP](this);let i=nc(r),s,o=xi(this),a=Un(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=m$(e)&&Sh(e);h&&this.injectableDefInScope(h)?d=ol(dw(e),og):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?Rh():this.parent;return t=i&8&&t===tc?null:t,c.get(e,t)}catch(c){let d=n$(c);throw d===-200||d===-201?new q(d,null):c}finally{Un(a),xi(o)}}resolveInjectorInitializers(){let e=de(null),t=xi(this),r=Un(void 0),i;try{let s=this.get(oc,jn,{self:!0});for(let o of s)o()}finally{xi(t),Un(r),de(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ss(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_n(e);let t=rc(e)?e:_n(e&&e.provide),r=h$(e);if(!rc(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ol(void 0,og,!0),i.factory=()=>lw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=de(null);try{if(t.value===KP)throw Aw(Ss(e));return t.value===og&&(t.value=KP,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&p$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{de(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=_n(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function dw(n){let e=Sh(n),t=e!==null?e.factory:Go(n);if(t!==null)return t;if(n instanceof Z)throw new q(204,!1);if(n instanceof Function)return d$(n);throw new q(204,!1)}function d$(n){if(n.length>0)throw new q(204,!1);let t=Z4(n);return t!==null?()=>t.factory(n):()=>new n}function h$(n){if(aN(n))return ol(void 0,n.useValue);{let e=Ow(n);return ol(e,og)}}function Ow(n,e,t){let r;if(rc(n)){let i=_n(n);return Go(i)||dw(i)}else if(aN(n))r=()=>_n(n.useValue);else if(l$(n))r=()=>n.useFactory(...lw(n.deps||[]));else if(u$(n))r=(i,s)=>me(_n(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=_n(n&&(n.useClass||n.provide));if(f$(n))r=()=>new i(...lw(n.deps));else return Go(i)||dw(i)}return r}function Eh(n){if(n.destroyed)throw new q(205,!1)}function ol(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function f$(n){return!!n.deps}function p$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function m$(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function hw(n,e){for(let t of n)Array.isArray(t)?hw(t,e):t&&Iw(t)?hw(t.\u0275providers,e):e(t)}function qt(n,e){let t;n instanceof ic?(Eh(n),t=n):t=new uw(n);let r,i=xi(t),s=Un(void 0);try{return e()}finally{xi(i),Un(s)}}function uN(){return tN()!==void 0||sg()!=null}var Jr=0,_e=1,Te=2,sn=3,br=4,Tr=5,ul=6,ll=7,xt=8,Ps=9,Mi=10,wt=11,dl=12,Fw=13,ac=14,ar=15,cc=16,uc=17,lc=18,Ns=19,Lw=20,Cs=21,Eg=22,Wo=23,cr=24,Ig=25,dc=26,Mt=27,lN=1,Vw=6,Xo=7,Ph=8,Nh=9,Ot=10;function Oi(n){return Array.isArray(n)&&typeof n[lN]=="object"}function Xr(n){return Array.isArray(n)&&n[lN]===!0}function Uw(n){return(n.flags&4)!==0}function Zo(n){return n.componentOffset>-1}function kh(n){return(n.flags&1)===1}function Fi(n){return!!n.template}function hl(n){return(n[Te]&512)!==0}function hc(n){return(n[Te]&256)===256}var jw="svg",dN="math";function Cr(n){for(;Array.isArray(n);)n=n[Jr];return n}function Bw(n,e){return Cr(e[n])}function Zr(n,e){return Cr(e[n.index])}function xh(n,e){return n.data[e]}function $w(n,e){return n[e]}function Hw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Sr(n,e){let t=e[n];return Oi(t)?t:t[Jr]}function wg(n){return(n[Te]&128)===128}function hN(n){return Xr(n[sn])}function Dr(n,e){return e==null?null:n[e]}function qw(n){n[uc]=0}function zw(n){n[Te]&1024||(n[Te]|=1024,wg(n)&&fl(n))}function fN(n,e){for(;n>0;)e=e[ac],n--;return e}function Mh(n){return!!(n[Te]&9216||n[cr]?.dirty)}function bg(n){n[Mi].changeDetectionScheduler?.notify(8),n[Te]&64&&(n[Te]|=1024),Mh(n)&&fl(n)}function fl(n){n[Mi].changeDetectionScheduler?.notify(0);let e=Ko(n);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!wg(e)));)e=Ko(e)}function Gw(n,e){if(hc(n))throw new q(911,!1);n[Cs]===null&&(n[Cs]=[]),n[Cs].push(e)}function pN(n,e){if(n[Cs]===null)return;let t=n[Cs].indexOf(e);t!==-1&&n[Cs].splice(t,1)}function Ko(n){let e=n[sn];return Xr(e)?e[sn]:e}function mN(n){return n[ll]??=[]}function gN(n){return n.cleanup??=[]}var Pe={lFrame:PN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fw=!1;function yN(){return Pe.lFrame.elementDepthCount}function _N(){Pe.lFrame.elementDepthCount++}function Ww(){Pe.lFrame.elementDepthCount--}function Kw(){return Pe.bindingsEnabled}function vN(){return Pe.skipHydrationRootTNode!==null}function Qw(n){return Pe.skipHydrationRootTNode===n}function Yw(){Pe.skipHydrationRootTNode=null}function ke(){return Pe.lFrame.lView}function on(){return Pe.lFrame.tView}function ae(n){return Pe.lFrame.contextLView=n,n[xt]}function ce(n){return Pe.lFrame.contextLView=null,n}function Pn(){let n=Jw();for(;n!==null&&n.type===64;)n=n.parent;return n}function Jw(){return Pe.lFrame.currentTNode}function EN(){let n=Pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function pl(n,e){let t=Pe.lFrame;t.currentTNode=n,t.isParent=e}function Xw(){return Pe.lFrame.isParent}function IN(){Pe.lFrame.isParent=!1}function wN(){return Pe.lFrame.contextLView}function Zw(){return fw}function bh(n){let e=fw;return fw=n,e}function eb(){let n=Pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function bN(){return Pe.lFrame.bindingIndex}function TN(n){return Pe.lFrame.bindingIndex=n}function fc(){return Pe.lFrame.bindingIndex++}function Tg(n){let e=Pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function CN(){return Pe.lFrame.inI18n}function SN(n,e){let t=Pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cg(e)}function DN(){return Pe.lFrame.currentDirectiveIndex}function Cg(n){Pe.lFrame.currentDirectiveIndex=n}function AN(n){let e=Pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function tb(n){Pe.lFrame.currentQueryIndex=n}function g$(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[Tr]:null}function nb(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=g$(s),i===null||(s=s[ac],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Pe.lFrame=RN();return r.currentTNode=e,r.lView=n,!0}function Sg(n){let e=RN(),t=n[_e];Pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function RN(){let n=Pe.lFrame,e=n===null?null:n.child;return e===null?PN(n):e}function PN(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function NN(){let n=Pe.lFrame;return Pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var rb=NN;function Dg(){let n=NN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kN(n){return(Pe.lFrame.contextLView=fN(n,Pe.lFrame.contextLView))[xt]}function Li(){return Pe.lFrame.selectedIndex}function ea(n){Pe.lFrame.selectedIndex=n}function Ag(){let n=Pe.lFrame;return xh(n.tView,n.selectedIndex)}function ml(){Pe.lFrame.currentNamespace=jw}function gl(){y$()}function y$(){Pe.lFrame.currentNamespace=null}function xN(){return Pe.lFrame.currentNamespace}var MN=!0;function Rg(){return MN}function Pg(n){MN=n}function pw(n,e=null,t=null,r){let i=ib(n,e,t,r);return i.resolveInjectorInitializers(),i}function ib(n,e=null,t=null,r,i=new Set){let s=[t||jn,sN(n)];return r=r||(typeof n=="object"?void 0:Ss(n)),new ic(s,e||Rh(),r||null,i)}var ht=class n{static THROW_IF_NOT_FOUND=tc;static NULL=new wh;static create(e,t){if(Array.isArray(e))return pw({name:""},t,e,"");{let r=e.name??"";return pw({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:n,providedIn:"any",factory:()=>me(Nw)});static __NG_ELEMENT_ID__=-1},Dt=new Z(""),ur=(()=>{class n{static __NG_ELEMENT_ID__=_$;static __NG_ENV_ID__=t=>t}return n})(),ug=class extends ur{_lView;constructor(e){super(),this._lView=e}get destroyed(){return hc(this._lView)}onDestroy(e){let t=this._lView;return Gw(t,e),()=>pN(t,e)}};function _$(){return new ug(ke())}var ON=!1,FN=new Z(""),ks=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Bt(!1);debugTaskTracker=U(FN,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new be(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),mw=class extends vt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,uN()&&(this.destroyRef=U(ur,{optional:!0})??void 0,this.pendingTasks=U(ks,{optional:!0})??void 0)}emit(e){let t=de(null);try{super.next(e)}finally{de(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof tn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},It=mw;function lg(...n){}function sb(n){let e,t;function r(){n=lg;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function LN(n){return queueMicrotask(()=>n()),()=>{n=lg}}var ob="isAngularZone",Th=ob+"_ID",v$=0,tt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new It(!1);onMicrotaskEmpty=new It(!1);onStable=new It(!1);onError=new It(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=ON}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,w$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ob)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,E$,lg,lg);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},E$={};function ab(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){sb(()=>{n.callbackScheduled=!1,gw(n),n.isCheckStableRunning=!0,ab(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gw(n)}function w$(n){let e=()=>{I$(n)},t=v$++;n._inner=n._inner.fork({name:"angular",properties:{[ob]:!0,[Th]:t,[Th+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(b$(c))return r.invokeTask(s,o,a,c);try{return QP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YP(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return QP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!T$(c)&&e(),YP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,gw(n),ab(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function gw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YP(n){n._nesting--,ab(n)}var Ch=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new It;onMicrotaskEmpty=new It;onStable=new It;onError=new It;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function b$(n){return VN(n,"__ignore_ng_zone__")}function T$(n){return VN(n,"__scheduler_tick__")}function VN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ds=class{_console=console;handleError(e){this._console.error("ERROR",e)}},lr=new Z("",{factory:()=>{let n=U(tt),e=U(St),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ds),t.handleError(r))})}}}),UN={provide:oc,useValue:()=>{let n=U(Ds,{optional:!0})},multi:!0},C$=new Z("",{factory:()=>{let n=U(Dt).defaultView;if(!n)return;let e=U(lr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),U(ur).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function cb(){return vn([iN(()=>{U(C$)})])}function Ee(n,e){let[t,r,i]=VI(n,e?.equal),s=t,o=s[Ln];return s.set=r,s.update=i,s.asReadonly=jN.bind(s),s}function jN(){let n=this[Ln];if(n.readonlyFn===void 0){let e=()=>this();e[Ln]=n,n.readonlyFn=e}return n.readonlyFn}var Ng=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=S$}return n})();function S$(){return new Ng(ke(),Pn())}var Qo=class{},Oh=new Z("",{factory:()=>!0});var ub=new Z(""),yl=(()=>{class n{internalPendingTasks=U(ks);scheduler=U(Qo);errorHandler=U(lr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),kg=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new yw})}return n})(),yw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},dg=class{[Ln];constructor(e){this[Ln]=e}destroy(){this[Ln].destroy()}};function pc(n,e){let t=e?.injector??U(ht),r=e?.manualCleanup!==!0?t.get(ur):null,i,s=t.get(Ng,null,{optional:!0}),o=t.get(Qo);return s!==null?(i=R$(s.view,o,n),r instanceof ug&&r._lView===s.view&&(r=null)):i=P$(n,t.get(kg),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new dg(i)}var BN=se(j({},jI),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=bh(!1);try{BI(this)}finally{bh(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=de(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],de(n)}}}),D$=se(j({},BN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Qa(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),A$=se(j({},BN),{consumerMarkedDirty(){this.view[Te]|=8192,fl(this.view),this.notifier.notify(13)},destroy(){if(Qa(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Wo]?.delete(this)}});function R$(n,e,t){let r=Object.create(A$);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=$N(r,t),n[Wo]??=new Set,n[Wo].add(r),r.consumerMarkedDirty(r),r}function P$(n,e,t){let r=Object.create(D$);return r.fn=$N(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function $N(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function At(n){return UI(n)}function Tl(n){return{toString:n}.toString()}var xg="__parameters__";function F$(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function L$(n,e,t){return Tl(()=>{let r=F$(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let m=c.hasOwnProperty(xg)?c[xg]:Object.defineProperty(c,xg,{value:[]})[xg];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var an=nN(L$("Optional"),8);function V$(n){return typeof n=="function"}function yk(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var jg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},ji=(()=>{let n=()=>_k;return n.ngInherit=!0,n})();function _k(n){return n.type.prototype.ngOnChanges&&(n.setInput=j$),U$}function U$(){let n=Ek(this),e=n?.current;if(e){let t=n.previous;if(t===Jo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function j$(n,e,t,r,i){let s=this.declaredInputs[r],o=Ek(n)||B$(n,{previous:Jo,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new jg(d&&d.currentValue,t,c===Jo),yk(n,e,i,t)}var vk="__ngSimpleChanges__";function Ek(n){return n[vk]||null}function B$(n,e){return n[vk]=e}var HN=[];var ct=function(n,e=null,t){for(let r=0;r<HN.length;r++){let i=HN[r];i(n,e,t)}},Ke=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ke||{});function $$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=_k(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Ik(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Lg(n,e,t){wk(n,e,3,t)}function Vg(n,e,t,r){(n[Te]&3)===t&&wk(n,e,t,r)}function lb(n,e){let t=n[Te];(t&3)===e&&(t&=16383,t+=1,n[Te]=t)}function wk(n,e,t,r){let i=r!==void 0?n[uc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[uc]+=65536),(a<s||s==-1)&&(H$(n,t,e,c),n[uc]=(n[uc]&4294901760)+c+2),c++}function qN(n,e){ct(Ke.LifecycleHookStart,n,e);let t=de(null);try{e.call(n)}finally{de(t),ct(Ke.LifecycleHookEnd,n,e)}}function H$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Te]>>14<n[uc]>>16&&(n[Te]&3)===e&&(n[Te]+=16384,qN(a,s)):qN(a,s)}var vl=-1,gc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function q$(n){return(n.flags&8)!==0}function z$(n){return(n.flags&16)!==0}function G$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];W$(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function bk(n){return n===3||n===4||n===6}function W$(n){return n.charCodeAt(0)===64}function El(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zN(n,t,i,null,e[++r]):zN(n,t,i,null,null))}}return n}function zN(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Tk(n){return n!==vl}function Bg(n){return n&32767}function K$(n){return n>>16}function $g(n,e){let t=K$(n),r=e;for(;t>0;)r=r[ac],t--;return r}var Ib=!0;function Hg(n){let e=Ib;return Ib=n,e}var Q$=256,Ck=Q$-1,Sk=5,Y$=0,Vi={};function J$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(sc)&&(r=t[sc]),r==null&&(r=t[sc]=Y$++);let i=r&Ck,s=1<<i;e.data[n+(i>>Sk)]|=s}function qg(n,e){let t=Dk(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,db(r.data,n),db(e,null),db(r.blueprint,null));let i=Hb(n,e),s=n.injectorIndex;if(Tk(i)){let o=Bg(i),a=$g(i,e),c=a[_e].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function db(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Dk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Hb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=kk(i),r===null)return vl;if(t++,i=i[ac],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return vl}function wb(n,e,t){J$(n,e,t)}function X$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(bk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Ak(n,e,t){if(t&8||n!==void 0)return n;gg(e,"NodeInjector")}function Rk(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ps],s=Un(void 0);try{return i?i.get(e,r,t&8):Rw(e,r,t&8)}finally{Un(s)}}return Ak(r,e,t)}function Pk(n,e,t,r=0,i){if(n!==null){if(e[Te]&2048&&!(r&2)){let o=r3(n,e,t,r,Vi);if(o!==Vi)return o}let s=Nk(n,e,t,r,Vi);if(s!==Vi)return s}return Rk(e,t,r,i)}function Nk(n,e,t,r,i){let s=t3(t);if(typeof s=="function"){if(!nb(e,n,r))return r&1?Ak(i,t,r):Rk(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))gg(t);else return o}finally{rb()}}else if(typeof s=="number"){let o=null,a=Dk(n,e),c=vl,d=r&1?e[ar][Tr]:null;for((a===-1||r&4)&&(c=a===-1?Hb(n,e):e[a+8],c===vl||!WN(r,!1)?a=-1:(o=e[_e],a=Bg(c),e=$g(c,e)));a!==-1;){let h=e[_e];if(GN(s,a,h.data)){let m=Z$(a,e,t,o,r,d);if(m!==Vi)return m}c=e[a+8],c!==vl&&WN(r,e[_e].data[a+8]===d)&&GN(s,a,e)?(o=h,a=Bg(c),e=$g(c,e)):a=-1}}return i}function Z$(n,e,t,r,i,s){let o=e[_e],a=o.data[n+8],c=r==null?Zo(a)&&Ib:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=e3(a,o,t,c,d);return h!==null?zg(e,o,h,a,i):Vi}function e3(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,m=r?a:a+h,y=i?a+h:d;for(let C=m;C<y;C++){let R=o[C];if(C<c&&t===R||C>=c&&R.type===t)return C}if(i){let C=o[c];if(C&&Fi(C)&&C.type===t)return c}return null}function zg(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof gc){let a=s;if(a.resolving)throw Aw("");let c=Hg(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,m=a.injectImpl?Un(a.injectImpl):null,y=nb(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&$$(t,o[t],e)}finally{m!==null&&Un(m),Hg(c),a.resolving=!1,rb()}}return s}function t3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sc)?n[sc]:void 0;return typeof e=="number"?e>=0?e&Ck:n3:e}function GN(n,e,t){let r=1<<n;return!!(t[e+(n>>Sk)]&r)}function WN(n,e){return!(n&2)&&!(n&1&&e)}var mc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Pk(this._tNode,this._lView,e,nc(r),t)}};function n3(){return new mc(Pn(),ke())}function Ec(n){return Tl(()=>{let e=n.prototype.constructor,t=e[Ih]||bb(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Ih]||bb(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function bb(n){return vw(n)?()=>{let e=bb(_n(n));return e&&e()}:Go(n)}function r3(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Te]&2048&&!hl(o);){let a=Nk(s,o,t,r|2,Vi);if(a!==Vi)return a;let c=s.parent;if(!c){let d=o[Lw];if(d){let h=d.get(t,Vi,r);if(h!==Vi)return h}c=kk(o),o=o[ac]}s=c}return i}function kk(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[Tr]:null}function zh(n){return X$(Pn(),n)}function i3(){return iy(Pn(),ke())}function iy(n,e){return new ii(Zr(n,e))}var ii=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=i3}return n})();function xk(n){return(n.flags&128)===128}var qb=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(qb||{}),Mk=new Map,s3=0;function o3(){return s3++}function a3(n){Mk.set(n[Ns],n)}function Tb(n){Mk.delete(n[Ns])}var KN="__ngContext__";function Il(n,e){Oi(e)?(n[KN]=e[Ns],a3(e)):n[KN]=e}function Ok(n){return Lk(n[dl])}function Fk(n){return Lk(n[br])}function Lk(n){for(;n!==null&&!Xr(n);)n=n[br];return n}var c3;function zb(n){c3=n}var sy=new Z("",{factory:()=>u3}),u3="ng";var oy=new Z(""),Ic=new Z("",{providedIn:"platform",factory:()=>"unknown"}),ay=new Z(""),cy=new Z("",{factory:()=>U(Dt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Vk="r";var Uk="di";var jk=!1,Bk=new Z("",{factory:()=>jk});var l3=(n,e,t,r)=>{};function d3(n,e,t,r){l3(n,e,t,r)}function Gb(n){return(n.flags&32)===32}var h3=()=>null;function $k(n,e,t=!1){return h3(n,e,t)}function Hk(n,e){let t=n.contentQueries;if(t!==null){let r=de(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];tb(s),a.contentQueries(2,e[o],o)}}}finally{de(r)}}}function Cb(n,e,t){tb(0);let r=de(null);try{e(n,t)}finally{de(r)}}function qk(n,e,t){if(Uw(e)){let r=de(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{de(r)}}}var ni=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ni||{});var Mg;function f3(){if(Mg===void 0&&(Mg=null,Yr.trustedTypes))try{Mg=Yr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Mg}function p3(n){return f3()?.createScriptURL(n)||n}var Og;function m3(){if(Og===void 0&&(Og=null,Yr.trustedTypes))try{Og=Yr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Og}function QN(n){return m3()?.createScriptURL(n)||n}var Gg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hg})`}};function Cl(n){return n instanceof Gg?n.changingThisBreaksApplicationSecurity:n}function Wb(n,e){let t=zk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hg})`)}return t===e}function zk(n){return n instanceof Gg&&n.getTypeName()||null}var g3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gk(n){return n=String(n),n.match(g3)?n:"unsafe:"+n}function y3(n,e){return n.createText(e)}function _3(n,e,t){n.setValue(e,t)}function Wk(n,e,t){return n.createElement(e,t)}function Wg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Kk(n,e,t){n.appendChild(e,t)}function YN(n,e,t,r,i){r!==null?Wg(n,e,t,r,i):Kk(n,e,t)}function Qk(n,e,t,r){n.removeChild(null,e,t,r)}function v3(n,e,t){n.setAttribute(e,"style",t)}function E3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Yk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&G$(n,e,r),i!==null&&E3(n,e,i),s!==null&&v3(n,e,s)}var uy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(uy||{});function nn(n){let e=Xk();return e?e.sanitize(uy.URL,n)||"":Wb(n,"URL")?Cl(n):Gk(al(n))}function Jk(n){let e=Xk();if(e)return QN(e.sanitize(uy.RESOURCE_URL,n)||"");if(Wb(n,"ResourceURL"))return QN(Cl(n));throw new q(904,!1)}function Kb(n){return p3(n[0])}var I3=new Set(["embed","frame","iframe","media","script"]),w3=new Set(["base","link","script"]);function b3(n,e){return e==="src"&&I3.has(n)||e==="href"&&w3.has(n)||e==="xlink:href"&&n==="script"?Jk:nn}function Qb(n,e,t){return b3(e,t)(n)}function Xk(){let n=ke();return n&&n[Mi].sanitizer}function Zk(n){return n instanceof Function?n():n}function T3(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var ex="ng-template";function C3(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&T3(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Yb(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Yb(n){return n.type===4&&n.value!==ex}function S3(n,e,t){let r=n.type===4&&!t?ex:n.value;return e===r}function D3(n,e,t){let r=4,i=n.attrs,s=i!==null?P3(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!ei(r)&&!ei(c))return!1;if(o&&ei(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!S3(n,c,t)||c===""&&e.length===1){if(ei(r))return!1;o=!0}}else if(r&8){if(i===null||!C3(n,i,c,t)){if(ei(r))return!1;o=!0}}else{let d=e[++a],h=A3(c,i,Yb(n),t);if(h===-1){if(ei(r))return!1;o=!0;continue}if(d!==""){let m;if(h>s?m="":m=i[h+1].toLowerCase(),r&2&&d!==m){if(ei(r))return!1;o=!0}}}}return ei(r)||o}function ei(n){return(n&1)===0}function A3(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return N3(e,n)}function R3(n,e,t=!1){for(let r=0;r<e.length;r++)if(D3(n,e[r],t))return!0;return!1}function P3(n){for(let e=0;e<n.length;e++){let t=n[e];if(bk(t))return e}return n.length}function N3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function JN(n,e){return n?":not("+e.trim()+")":e}function k3(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!ei(o)&&(e+=JN(s,i),i=""),r=o,s=s||!ei(r);t++}return i!==""&&(e+=JN(s,i)),e}function x3(n){return n.map(k3).join(",")}function M3(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!ei(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Gn={};function Jb(n,e,t,r,i,s,o,a,c,d,h){let m=Mt+r,y=m+i,C=O3(m,y),R=typeof d=="function"?d():d;return C[_e]={type:n,blueprint:C,template:t,queries:null,viewQuery:a,declTNode:e,data:C.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function O3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Gn);return t}function F3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Jb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Xb(n,e,t,r,i,s,o,a,c,d,h){let m=e.blueprint.slice();return m[Jr]=i,m[Te]=r|4|128|8|64|1024,(d!==null||n&&n[Te]&2048)&&(m[Te]|=2048),qw(m),m[sn]=m[ac]=n,m[xt]=t,m[Mi]=o||n&&n[Mi],m[wt]=a||n&&n[wt],m[Ps]=c||n&&n[Ps]||null,m[Tr]=s,m[Ns]=o3(),m[ul]=h,m[Lw]=d,m[ar]=e.type==2?n[ar]:m,m}function L3(n,e,t){let r=Zr(e,n),i=F3(t),s=n[Mi].rendererFactory,o=Zb(n,Xb(n,i,null,tx(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function tx(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function nx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zb(n,e){return n[dl]?n[Fw][br]=e:n[dl]=e,n[Fw]=e,e}function B(n=1){rx(on(),ke(),Li()+n,!1)}function rx(n,e,t,r){if(!r)if((e[Te]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Lg(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Vg(e,s,0,t)}ea(t)}var ly=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ly||{});function Sb(n,e,t,r){let i=de(null);try{let[s,o,a]=n.inputs[t],c=null;(o&ly.SignalBased)!==0&&(c=e[s][Ln]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):yk(e,c,s,r)}finally{de(i)}}var Ui=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ui||{}),V3;function eT(n,e){return V3(n,e)}var yc=new Set,tT=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(tT||{}),Gh=new Z(""),XN=new Set;function Bi(n){XN.has(n)||(XN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ix=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})();var sx=new Z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:U(St)})});function ox(n,e,t){let r=n.get(sx);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function U3(n,e){let t=n.get(sx);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function j3(n,e){for(let[t,r]of e)ox(n,r.animateFns)}function ZN(n,e,t,r){let i=n?.[dc]?.enter;e!==null&&i&&i.has(t.index)&&j3(r,i)}function _l(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Xr(i)?c=i:Oi(i)&&(d=!0,i=i[Jr]);let h=Cr(i);n===0&&r!==null?(ZN(a,r,s,t),o==null?Kk(e,r,h):Wg(e,r,h,o||null,!0)):n===1&&r!==null?(ZN(a,r,s,t),Wg(e,r,h,o||null,!0)):n===2?ek(a,s,t,m=>{Qk(e,h,d,m)}):n===3&&ek(a,s,t,()=>{e.destroyNode(h)}),c!=null&&Z3(e,n,t,c,s,r,o)}}function B3(n,e){ax(n,e),e[Jr]=null,e[Tr]=null}function $3(n,e,t,r,i,s){r[Jr]=i,r[Tr]=e,hy(n,r,t,1,i,s)}function ax(n,e){e[Mi].changeDetectionScheduler?.notify(9),hy(n,e,e[wt],2,null,null)}function H3(n){let e=n[dl];if(!e)return hb(n[_e],n);for(;e;){let t=null;if(Oi(e))t=e[dl];else{let r=e[Ot];r&&(t=r)}if(!t){for(;e&&!e[br]&&e!==n;)Oi(e)&&hb(e[_e],e),e=e[sn];e===null&&(e=n),Oi(e)&&hb(e[_e],e),t=e&&e[br]}e=t}}function nT(n,e){let t=n[Nh],r=t.indexOf(e);t.splice(r,1)}function dy(n,e){if(hc(e))return;let t=e[wt];t.destroyNode&&hy(n,e,t,3,null,null),H3(e)}function hb(n,e){if(hc(e))return;let t=de(null);try{e[Te]&=-129,e[Te]|=256,e[cr]&&Qa(e[cr]),G3(n,e),z3(n,e),e[_e].type===1&&e[wt].destroy();let r=e[cc];if(r!==null&&Xr(e[sn])){r!==e[sn]&&nT(r,e);let i=e[lc];i!==null&&i.detachView(n)}Tb(e)}finally{de(t)}}function ek(n,e,t,r){let i=n?.[dc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&yc.add(n[Ns]),ox(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),q3(n,r)}else n&&yc.delete(n[Ns]),r(!1)},i)}function q3(n,e){let t=n[dc]?.running;if(t){t.then(()=>{n[dc].running=void 0,yc.delete(n[Ns]),e(!0)});return}e(!1)}function z3(n,e){let t=n.cleanup,r=e[ll];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[ll]=null);let i=e[Cs];if(i!==null){e[Cs]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Wo];if(s!==null){e[Wo]=null;for(let o of s)o.destroy()}}function G3(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof gc)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ct(Ke.LifecycleHookStart,a,c);try{c.call(a)}finally{ct(Ke.LifecycleHookEnd,a,c)}}else{ct(Ke.LifecycleHookStart,i,s);try{s.call(i)}finally{ct(Ke.LifecycleHookEnd,i,s)}}}}}function W3(n,e,t){return K3(n,e.parent,t)}function K3(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Jr];if(Zo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ni.None||i===ni.Emulated)return null}return Zr(r,t)}function Q3(n,e,t){return J3(n,e,t)}function Y3(n,e,t){return n.type&40?Zr(n,t):null}var J3=Y3,tk;function rT(n,e,t,r){let i=W3(n,r,e),s=e[wt],o=r.parent||e[Tr],a=Q3(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)YN(s,i,t[c],a,!1);else YN(s,i,t,a,!1);tk!==void 0&&tk(s,r,e,t,i)}function Lh(n,e){if(e!==null){let t=e.type;if(t&3)return Zr(e,n);if(t&4)return Db(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Lh(n,r);{let i=n[e.index];return Xr(i)?Db(-1,i):Cr(i)}}else{if(t&128)return Lh(n,e.next);if(t&32)return eT(e,n)()||Cr(n[e.index]);{let r=cx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ko(n[ar]);return Lh(i,r)}else return Lh(n,e.next)}}}return null}function cx(n,e){if(e!==null){let r=n[ar][Tr],i=e.projection;return r.projection[i]}return null}function Db(n,e){let t=Ot+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return Lh(r,i)}return e[Xo]}function iT(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Ps];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&Il(Cr(c),r),t.flags|=2),!Gb(t))if(d&8)iT(n,e,t.child,r,i,s,!1),_l(e,n,a,i,c,t,s,r);else if(d&32){let h=eT(t,r),m;for(;m=h();)_l(e,n,a,i,m,t,s,r);_l(e,n,a,i,c,t,s,r)}else d&16?X3(n,e,r,t,i,s):_l(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function hy(n,e,t,r,i,s){iT(t,r,n.firstChild,e,i,s,!1)}function X3(n,e,t,r,i,s){let o=t[ar],c=o[Tr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];_l(e,n,t[Ps],i,h,r,s,t)}else{let d=c,h=o[sn];xk(r)&&(d.flags|=128),iT(n,e,d,h,i,s,!0)}}function Z3(n,e,t,r,i,s,o){let a=r[Xo],c=Cr(r);a!==c&&_l(e,n,t,s,a,i,o);for(let d=Ot;d<r.length;d++){let h=r[d];hy(h[_e],h,n,e,s,a)}}function eH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ui.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ui.Important),n.setStyle(t,r,i,s))}}function ux(n,e,t,r,i){let s=Li(),o=r&2;try{ea(-1),o&&e.length>Mt&&rx(n,e,Mt,!1);let a=o?Ke.TemplateUpdateStart:Ke.TemplateCreateStart;ct(a,i,t),t(r,i)}finally{ea(s);let a=o?Ke.TemplateUpdateEnd:Ke.TemplateCreateEnd;ct(a,i,t)}}function sT(n,e,t){aH(n,e,t),(t.flags&64)===64&&cH(n,e,t)}function fy(n,e,t=Zr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function tH(n,e,t,r){let s=r.get(Bk,jk)||t===ni.ShadowDom||t===ni.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return nH(o),o}function nH(n){rH(n)}var rH=()=>null;function iH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function lx(n,e,t,r,i,s){let o=e[_e];if(oT(n,o,e,t,r)){Zo(n)&&oH(e,n.index);return}n.type&3&&(t=iH(t)),sH(n,e,t,r,i,s)}function sH(n,e,t,r,i,s){if(n.type&3){let o=Zr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function oH(n,e){let t=Sr(e,n);t[Te]&16||(t[Te]|=64)}function aH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Zo(t)&&L3(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||qg(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=zg(e,n,o,t);if(Il(c,e),s!==null&&hH(e,o-r,c,a,t,s),Fi(a)){let d=Sr(t.index,e);d[xt]=zg(e,n,o,t)}}}function cH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=DN();try{ea(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Cg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&uH(c,d)}}finally{ea(-1),Cg(o)}}function uH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dx(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];R3(e,s.selectors,!1)&&(r??=[],Fi(s)?r.unshift(s):r.push(s))}return r}function lH(n,e,t,r,i,s){let o=Zr(n,e);dH(e[wt],o,s,n.value,t,r,i)}function dH(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?al(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function hH(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];Sb(r,t,c,d)}}function hx(n,e,t,r,i){let s=Mt+t,o=e[_e],a=i(o,e,n,r,t);e[s]=a,pl(n,!0);let c=n.type===2;return c?(Yk(e[wt],a,n),(yN()===0||kh(n))&&Il(a,e),_N()):Il(a,e),Rg()&&(!c||!Gb(n))&&rT(o,e,a,n),n}function fx(n){let e=n;return Xw()?IN():(e=e.parent,pl(e,!1)),e}function fH(n,e){let t=n[Ps];if(!t)return;let r;try{r=t.get(lr,null)}catch{r=null}r?.(e)}function oT(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],m=e.data[d];Sb(m,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];Sb(h,d,r,i),a=!0}return a}function pH(n,e){let t=Sr(e,n),r=t[_e];mH(r,t);let i=t[Jr];i!==null&&t[ul]===null&&(t[ul]=$k(i,t[Ps])),ct(Ke.ComponentStart);try{aT(r,t,t[xt])}finally{ct(Ke.ComponentEnd,t[xt])}}function mH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function aT(n,e,t){Sg(e);try{let r=n.viewQuery;r!==null&&Cb(1,r,t);let i=n.template;i!==null&&ux(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[lc]?.finishViewCreation(n),n.staticContentQueries&&Hk(n,e),n.staticViewQueries&&Cb(2,n.viewQuery,t);let s=n.components;s!==null&&gH(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Te]&=-5,Dg()}}function gH(n,e){for(let t=0;t<e.length;t++)pH(n,e[t])}function py(n,e,t,r){let i=de(null);try{let s=e.tView,a=n[Te]&4096?4096:16,c=Xb(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[cc]=d;let h=n[lc];return h!==null&&(c[lc]=h.createEmbeddedView(s)),aT(s,c,t),c}finally{de(i)}}function jh(n,e){return!e||e.firstChild===null||xk(n)}function Bh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Cr(s)),Xr(s)&&px(s,r);let o=t.type;if(o&8)Bh(n,e,t.child,r);else if(o&32){let a=eT(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=cx(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ko(e[ar]);Bh(c[_e],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function px(n,e){for(let t=Ot;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&Bh(r[_e],r,i,e)}n[Xo]!==n[Jr]&&e.push(n[Xo])}function mx(n){if(n[Ig]!==null){for(let e of n[Ig])e.impl.addSequence(e);n[Ig].length=0}}var gx=[];function yH(n){return n[cr]??_H(n)}function _H(n){let e=gx.pop()??Object.create(EH);return e.lView=n,e}function vH(n){n.lView[cr]!==n&&(n.lView=null,gx.push(n))}var EH=se(j({},Wu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{fl(n.lView)},consumerOnSignalRead(){this.lView[cr]=this}});function IH(n){let e=n[cr]??Object.create(wH);return e.lView=n,e}var wH=se(j({},Wu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ko(n.lView);for(;e&&!yx(e[_e]);)e=Ko(e);e&&zw(e)},consumerOnSignalRead(){this.lView[cr]=this}});function yx(n){return n.type!==2}function _x(n){if(n[Wo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Wo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Te]&8192)}}var bH=100;function vx(n,e=0){let r=n[Mi].rendererFactory,i=!1;i||r.begin?.();try{TH(n,e)}finally{i||r.end?.()}}function TH(n,e){let t=Zw();try{bh(!0),Ab(n,e);let r=0;for(;Mh(n);){if(r===bH)throw new q(103,!1);r++,Ab(n,1)}}finally{bh(t)}}function CH(n,e,t,r){if(hc(e))return;let i=e[Te],s=!1,o=!1;Sg(e);let a=!0,c=null,d=null;s||(yx(n)?(d=yH(e),c=Ku(d)):Nm()===null?(a=!1,d=IH(e),c=Ku(d)):e[cr]&&(Qa(e[cr]),e[cr]=null));try{qw(e),TN(n.bindingStartIndex),t!==null&&ux(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let C=n.preOrderCheckHooks;C!==null&&Lg(e,C,null)}else{let C=n.preOrderHooks;C!==null&&Vg(e,C,0,null),lb(e,0)}if(o||SH(e),_x(e),Ex(e,0),n.contentQueries!==null&&Hk(n,e),!s)if(h){let C=n.contentCheckHooks;C!==null&&Lg(e,C)}else{let C=n.contentHooks;C!==null&&Vg(e,C,1),lb(e,1)}AH(n,e);let m=n.components;m!==null&&wx(e,m,0);let y=n.viewQuery;if(y!==null&&Cb(2,y,r),!s)if(h){let C=n.viewCheckHooks;C!==null&&Lg(e,C)}else{let C=n.viewHooks;C!==null&&Vg(e,C,2),lb(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Eg]){for(let C of e[Eg])C();e[Eg]=null}s||(mx(e),e[Te]&=-73)}catch(h){throw s||fl(e),h}finally{d!==null&&(lh(d,c),a&&vH(d)),Dg()}}function Ex(n,e){for(let t=Ok(n);t!==null;t=Fk(t))for(let r=Ot;r<t.length;r++){let i=t[r];Ix(i,e)}}function SH(n){for(let e=Ok(n);e!==null;e=Fk(e)){if(!(e[Te]&2))continue;let t=e[Nh];for(let r=0;r<t.length;r++){let i=t[r];zw(i)}}}function DH(n,e,t){ct(Ke.ComponentStart);let r=Sr(e,n);try{Ix(r,t)}finally{ct(Ke.ComponentEnd,r[xt])}}function Ix(n,e){wg(n)&&Ab(n,e)}function Ab(n,e){let r=n[_e],i=n[Te],s=n[cr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&dh(s)),o||=!1,s&&(s.dirty=!1),n[Te]&=-9217,o)CH(r,n,r.template,n[xt]);else if(i&8192){let a=de(null);try{_x(n),Ex(n,1);let c=r.components;c!==null&&wx(n,c,1),mx(n)}finally{de(a)}}}function wx(n,e,t){for(let r=0;r<e.length;r++)DH(n,e[r],t)}function AH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ea(~i);else{let s=i,o=t[++r],a=t[++r];SN(o,s);let c=e[s];ct(Ke.HostBindingsUpdateStart,c);try{a(2,c)}finally{ct(Ke.HostBindingsUpdateEnd,c)}}}}finally{ea(-1)}}function cT(n,e){let t=Zw()?64:1088;for(n[Mi].changeDetectionScheduler?.notify(e);n;){n[Te]|=t;let r=Ko(n);if(hl(n)&&!r)return n;n=r}return null}function bx(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Tx(n,e){let t=Ot+e;if(t<n.length)return n[t]}function my(n,e,t,r=!0){let i=e[_e];if(RH(i,e,n,t),r){let o=Db(t,n),a=e[wt],c=a.parentNode(n[Xo]);c!==null&&$3(i,n[Tr],a,e,c,o)}let s=e[ul];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Cx(n,e){let t=$h(n,e);return t!==void 0&&dy(t[_e],t),t}function $h(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t];if(r){let i=r[cc];i!==null&&i!==n&&nT(i,r),e>0&&(n[t-1][br]=r[br]);let s=Dh(n,Ot+e);B3(r[_e],r);let o=s[lc];o!==null&&o.detachView(s[_e]),r[sn]=null,r[br]=null,r[Te]&=-129}return r}function RH(n,e,t,r){let i=Ot+r,s=t.length;r>0&&(t[i-1][br]=e),r<s-Ot?(e[br]=t[i],Pw(t,Ot+r,e)):(t.push(e),e[br]=null),e[sn]=t;let o=e[cc];o!==null&&t!==o&&Sx(o,e);let a=e[lc];a!==null&&a.insertView(n),bg(e),e[Te]|=128}function Sx(n,e){let t=n[Nh],r=e[sn];if(Oi(r))n[Te]|=2;else{let i=r[sn][ar];e[ar]!==i&&(n[Te]|=2)}t===null?n[Nh]=[e]:t.push(e)}var ta=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[_e];return Bh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[xt]}set context(e){this._lView[xt]=e}get destroyed(){return hc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[sn];if(Xr(e)){let t=e[Ph],r=t?t.indexOf(this):-1;r>-1&&($h(e,r),Dh(t,r))}this._attachedToViewContainer=!1}dy(this._lView[_e],this._lView)}onDestroy(e){Gw(this._lView,e)}markForCheck(){cT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Te]&=-129}reattach(){bg(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,vx(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=hl(this._lView),t=this._lView[cc];t!==null&&!e&&nT(t,this._lView),ax(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=hl(this._lView),r=this._lView[cc];r!==null&&!t&&Sx(r,this._lView),bg(this._lView)}};var Wh=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=PH;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=py(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ta(s)}}return n})();function PH(){return Dx(Pn(),ke())}function Dx(n,e){return n.type&4?new Wh(e,n,iy(n,e)):null}function Kh(n,e,t,r,i){let s=n.data[e];if(s===null)s=NH(n,e,t,r,i),CN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=EN();s.injectorIndex=o===null?-1:o.injectorIndex}return pl(s,!0),s}function NH(n,e,t,r,i){let s=Jw(),o=Xw(),a=o?s:s&&s.parent,c=n.data[e]=xH(n,a,t,e,r,i);return kH(n,c,s,o),c}function kH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function xH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return vN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function MH(n){let e=n[Vw]??[],r=n[sn][wt],i=[];for(let s of e)s.data[Uk]!==void 0?i.push(s):OH(s,r);n[Vw]=i}function OH(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Vk];for(;t<i;){let s=r.nextSibling;Qk(e,r,!1),r=s,t++}}}var FH=()=>null,LH=()=>null;function Rb(n,e){return FH(n,e)}function Ax(n,e,t){return LH(n,e,t)}var Rx=class{},gy=class{},Pb=class{resolveComponentFactory(e){throw new q(917,!1)}},Qh=class{static NULL=new Pb},xs=class{},Ms=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>VH()}return n})();function VH(){let n=ke(),e=Pn(),t=Sr(e.index,n);return(Oi(t)?t:n)[wt]}var Px=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>null})}return n})();var Ug={},Nb=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Ug,r);return i!==Ug||t===Ug?i:this.parentInjector.get(e,t,r)}};function Kg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=fg(i,a);else if(s==2){let c=a,d=e[++o];r=fg(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function he(n,e=0){let t=ke();if(t===null)return me(n,e);let r=Pn();return Pk(r,t,_n(n),e)}function Nx(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}BH(n,e,t,a,s,c,d)}s!==null&&r!==null&&UH(t,r,s)}function UH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new q(-301,!1);r.push(e[i],s)}}function jH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function BH(n,e,t,r,i,s,o){let a=r.length,c=null;for(let y=0;y<a;y++){let C=r[y];c===null&&Fi(C)&&(c=C,jH(n,t,y)),wb(qg(t,e),n,C.type)}WH(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let y=0;y<a;y++){let C=r[y];C.providersResolver&&C.providersResolver(C)}let d=!1,h=!1,m=nx(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let C=r[y];if(t.mergedAttrs=El(t.mergedAttrs,C.hostAttrs),HH(n,t,e,m,C),GH(m,C,i),o!==null&&o.has(C)){let[P,x]=o.get(C);t.directiveToIndex.set(C.type,[m,P+t.directiveStart,x+t.directiveStart])}else(s===null||!s.has(C))&&t.directiveToIndex.set(C.type,m);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let R=C.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}$H(n,t,s)}function $H(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))nk(0,e,i,r),nk(1,e,i,r),ik(e,r,!1);else{let s=t.get(i);rk(0,e,s,r),rk(1,e,s,r),ik(e,r,!0)}}}function nk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),kx(e,s)}}function rk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),kx(e,o)}}function kx(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ik(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Yb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function HH(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Go(i.type,!0)),o=new gc(s,Fi(i),he,null);n.blueprint[r]=o,t[r]=o,qH(n,e,r,nx(n,t,i.hostVars,Gn),i)}function qH(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;zH(o)!=a&&o.push(a),o.push(t,r,s)}}function zH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function GH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fi(e)&&(t[""]=n)}}function WH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function xx(n,e,t,r,i,s,o,a){let c=e[_e],d=c.consts,h=Dr(d,o),m=Kh(c,n,t,r,h);return s&&Nx(c,e,m,Dr(d,a),i),m.mergedAttrs=El(m.mergedAttrs,m.attrs),m.attrs!==null&&Kg(m,m.attrs,!1),m.mergedAttrs!==null&&Kg(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function Mx(n,e){Ik(n,e),Uw(e)&&n.queries.elementEnd(e)}function KH(n,e,t,r,i,s){let o=e.consts,a=Dr(o,i),c=Kh(e,n,t,r,a);if(c.mergedAttrs=El(c.mergedAttrs,c.attrs),s!=null){let d=Dr(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&Kg(c,c.attrs,!1),c.mergedAttrs!==null&&Kg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function uT(n){return Fx(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Ox(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Fx(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Lx(n,e,t){return n[e]=t}function ri(n,e,t){if(t===Gn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Vx(n,e,t,r){let i=ri(n,e,t);return ri(n,e+1,r)||i}function fb(n,e,t){return function r(i){let s=Zo(n)?Sr(n.index,e):e;cT(s,5);let o=e[xt],a=sk(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=sk(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function sk(n,e,t,r){let i=de(null);try{return ct(Ke.OutputStart,e,t),t(r)!==!1}catch(s){return fH(n,s),!1}finally{ct(Ke.OutputEnd,e,t),de(i)}}function QH(n,e,t,r,i,s,o,a){let c=kh(n),d=!1,h=null;if(!r&&c&&(h=JH(e,t,s,n.index)),h!==null){let m=h.__ngLastListenerFn__||h;m.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let m=Zr(n,t),y=r?r(m):m;d3(t,y,s,a);let C=i.listen(y,s,a);if(!YH(s)){let R=r?P=>r(Cr(P[n.index])):n.index;Ux(R,e,t,s,a,C,!1)}}return d}function YH(n){return n.startsWith("animation")||n.startsWith("transition")}function JH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ll],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Ux(n,e,t,r,i,s,o){let a=e.firstCreatePass?gN(e):null,c=mN(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function ok(n,e,t,r,i,s){let o=e[t],a=e[_e],d=a.data[t].outputs[r],m=o[d].subscribe(s);Ux(n.index,a,e,i,s,m,!0)}var kb=Symbol("BINDING");var Qg=class extends Qh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yo(e);return new wl(t,this.ngModule)}};function XH(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&ly.SignalBased)!==0};return i&&(s.transform=i),s})}function ZH(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function e6(n,e,t){let r=e instanceof St?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Nb(t,r):t}function t6(n){let e=n.get(xs,null);if(e===null)throw new q(407,!1);let t=n.get(Px,null),r=n.get(Qo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function n6(n,e){let t=jx(n);return Wk(e,t,t==="svg"?jw:t==="math"?dN:null)}function jx(n){return(n.selectors[0][0]||"div").toLowerCase()}var wl=class extends gy{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=XH(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZH(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=x3(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){ct(Ke.DynamicComponentStart);let a=de(null);try{let c=this.componentDef,d=r6(r,c,o,s),h=e6(c,i||this.ngModule,e),m=t6(h),y=m.rendererFactory.createRenderer(null,c),C=r?tH(y,r,c.encapsulation,h):n6(c,y),R=o?.some(ak)||s?.some($=>typeof $!="function"&&$.bindings.some(ak)),P=Xb(null,d,null,512|tx(c),null,null,m,y,h,null,$k(C,h,!0));P[Mt]=C,Sg(P);let x=null;try{let $=xx(Mt,P,2,"#host",()=>d.directiveRegistry,!0,0);Yk(y,C,$),Il(C,P),sT(d,P,$),qk(d,$,P),Mx(d,$),t!==void 0&&s6($,this.ngContentSelectors,t),x=Sr($.index,P),P[xt]=x[xt],aT(d,P,null)}catch($){throw x!==null&&Tb(x),Tb(P),$}finally{ct(Ke.DynamicComponentEnd),Dg()}return new Yg(this.componentType,P,!!R)}finally{de(a)}}};function r6(n,e,t,r){let i=n?["ng-version","21.1.2"]:M3(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[kb].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let m=r[h];if(typeof m!="function")for(let y of m.bindings){a+=y[kb].requiredVars;let C=h+1;y.create&&(y.targetIdx=C,(s??=[]).push(y)),y.update&&(y.targetIdx=C,(o??=[]).push(y))}}let c=[e];if(r)for(let h of r){let m=typeof h=="function"?h:h.type,y=Dw(m);c.push(y)}return Jb(0,null,i6(s,o),1,a,c,null,null,null,[i],null)}function i6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function ak(n){let e=n[kb].kind;return e==="input"||e==="twoWay"}var Yg=class extends Rx{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=xh(t[_e],Mt),this.location=iy(this._tNode,t),this.instance=Sr(this._tNode.index,t)[xt],this.hostView=this.changeDetectorRef=new ta(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=oT(r,i[_e],i,e,t);this.previousInputValues.set(e,t);let o=Sr(r.index,i);cT(o,1)}get injector(){return new mc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function s6(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var wc=(()=>{class n{static __NG_ELEMENT_ID__=o6}return n})();function o6(){let n=Pn();return c6(n,ke())}var a6=wc,Bx=class extends a6{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return iy(this._hostTNode,this._hostLView)}get injector(){return new mc(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hb(this._hostTNode,this._hostLView);if(Tk(e)){let t=$g(e,this._hostLView),r=Bg(e),i=t[_e].data[r+8];return new mc(i,t)}else return new mc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ck(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Rb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,jh(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!V$(e),d;if(c)d=t;else{let x=t||{};d=x.index,r=x.injector,i=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef,o=x.directives,a=x.bindings}let h=c?e:new wl(Yo(e)),m=r||this.parentInjector;if(!s&&h.ngModule==null){let $=(c?m:this.parentInjector).get(St,null);$&&(s=$)}let y=Yo(h.componentType??{}),C=Rb(this._lContainer,y?.id??null),R=C?.firstChild??null,P=h.create(m,i,R,s,o,a);return this.insertImpl(P.hostView,d,jh(this._hostTNode,C)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[sn],d=new Bx(c,c[Tr],c[sn]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return my(o,i,s,r),e.attachToViewContainerRef(),Pw(pb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ck(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=$h(this._lContainer,t);r&&(Dh(pb(this._lContainer),t),dy(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=$h(this._lContainer,t);return r&&Dh(pb(this._lContainer),t)!=null?new ta(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ck(n){return n[Ph]}function pb(n){return n[Ph]||(n[Ph]=[])}function c6(n,e){let t,r=e[n.index];return Xr(r)?t=r:(t=bx(r,e,null,n),e[n.index]=t,Zb(e,t)),l6(t,e,n,r),new Bx(t,n,e)}function u6(n,e){let t=n[wt],r=t.createComment(""),i=Zr(e,n),s=t.parentNode(i);return Wg(t,s,r,t.nextSibling(i),!1),r}var l6=f6,d6=()=>!1;function h6(n,e,t){return d6(n,e,t)}function f6(n,e,t,r){if(n[Xo])return;let i;t.type&8?i=Cr(r):i=u6(e,t),n[Xo]=i}var _c=class{},yy=class{};var Jg=class extends _c{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Qg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Sw(e);this._bootstrapComponents=Zk(s.bootstrap),this._r3Injector=ib(e,t,[{provide:_c,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver},...r],Ss(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xg=class extends yy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Jg(this.moduleType,e,[])}};var Hh=class extends _c{injector;componentFactoryResolver=new Qg(this);instance=null;constructor(e){super();let t=new ic([...e.providers,{provide:_c,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],e.parent||Rh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yh(n,e,t=null){return new Hh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var p6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xw(!1,t.type),i=r.length>0?Yh([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n(me(St))})}return n})();function ft(n){return Tl(()=>{let e=$x(n),t=se(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(p6).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ni.Emulated,styles:n.styles||jn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Bi("NgStandalone"),Hx(t);let r=n.dependencies;return t.directiveDefs=uk(r,m6),t.pipeDefs=uk(r,XP),t.id=_6(t),t})}function m6(n){return Yo(n)||Dw(n)}function Ar(n){return Tl(()=>({type:n.type,bootstrap:n.bootstrap||jn,declarations:n.declarations||jn,imports:n.imports||jn,exports:n.exports||jn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function g6(n,e){if(n==null)return Jo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=ly.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function y6(n){if(n==null)return Jo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function zt(n){return Tl(()=>{let e=$x(n);return Hx(e),e})}function lT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function $x(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Jo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||jn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:g6(n.inputs,e),outputs:y6(n.outputs),debugInfo:null}}function Hx(n){n.features?.forEach(e=>e(n))}function uk(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function _6(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function v6(n){return Object.getPrototypeOf(n.prototype).constructor}function si(n){let e=v6(n.type),t=!0,r=[n];for(;e;){let i;if(Fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=mb(n.inputs),o.declaredInputs=mb(n.declaredInputs),o.outputs=mb(n.outputs);let a=i.hostBindings;a&&T6(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&w6(n,c),d&&b6(n,d),E6(n,i),JP(n.outputs,i.outputs),Fi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===si&&(t=!1)}}e=Object.getPrototypeOf(e)}I6(r)}function E6(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function I6(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=El(i.hostAttrs,t=El(t,i.hostAttrs))}}function mb(n){return n===Jo?{}:n===jn?[]:n}function w6(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function b6(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function T6(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function qx(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=El(n.mergedAttrs,n.attrs);let h=n.tView=Jb(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),pl(n,!1);let c=S6(t,e,n,r);Rg()&&rT(t,e,c,n),Il(c,e);let d=bx(c,e,c,n);e[r+Mt]=d,Zb(e,d),h6(d,n,e)}function C6(n,e,t,r,i,s,o,a,c,d,h){let m=t+Mt,y;return e.firstCreatePass?(y=Kh(e,m,4,o||null,a||null),Kw()&&Nx(e,n,y,Dr(e.consts,d),dx),Ik(e,y)):y=e.data[m],qx(y,n,e,t,r,i,s,c),kh(y)&&sT(e,n,y),d!=null&&fy(n,y,h),y}function Zg(n,e,t,r,i,s,o,a,c,d,h){let m=t+Mt,y;if(e.firstCreatePass){if(y=Kh(e,m,4,o||null,a||null),d!=null){let C=Dr(e.consts,d);y.localNames=[];for(let R=0;R<C.length;R+=2)y.localNames.push(C[R],-1)}}else y=e.data[m];return qx(y,n,e,t,r,i,s,c),d!=null&&fy(n,y,h),y}function pe(n,e,t,r,i,s,o,a){let c=ke(),d=on(),h=Dr(d.consts,s);return C6(c,d,n,e,t,r,i,h,void 0,o,a),pe}var S6=D6;function D6(n,e,t,r){return Pg(!0),e[wt].createComment("")}var dT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function zx(n){return typeof n=="function"&&n[Ln]!==void 0}function hT(n){return zx(n)&&typeof n.set=="function"}var fT=new Z("");function na(n){return!!n&&typeof n.then=="function"}function pT(n){return!!n&&typeof n.subscribe=="function"}var mT=new Z("");function _y(n){return vn([{provide:mT,multi:!0,useValue:n}])}var gT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=U(mT,{optional:!0})??[];injector=U(ht);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=qt(this.injector,i);if(na(s))t.push(s);else if(pT(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vy=new Z("");function Gx(){LI(()=>{let n="";throw new q(600,n)})}function Wx(n){return n.isBoundToModule}var A6=10;var $i=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=U(lr);afterRenderManager=U(ix);zonelessEnabled=U(Oh);rootEffectScheduler=U(kg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new vt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=U(ks);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(We(t=>!t))}constructor(){U(Gh,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=U(St);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ht.NULL){return this._injector.get(tt).run(()=>{ct(Ke.BootstrapComponentStart);let o=t instanceof gy;if(!this._injector.get(gT).done){let R="";throw new q(405,R)}let c;o?c=t:c=this._injector.get(Qh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=Wx(c)?void 0:this._injector.get(_c),h=r||c.selector,m=c.create(i,[],h,d),y=m.location.nativeElement,C=m.injector.get(fT,null);return C?.registerApplication(y),m.onDestroy(()=>{this.detachView(m.hostView),Vh(this.components,m),C?.unregisterApplication(y)}),this._loadComponent(m),ct(Ke.BootstrapComponentEnd,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ct(Ke.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(tT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ct(Ke.ChangeDetectionEnd),new q(101,!1);let t=de(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,de(t),this.afterTick.next(),ct(Ke.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xs,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<A6;){ct(Ke.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ct(Ke.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Mh(i))continue;let s=r&&!this.zonelessEnabled?0:1;vx(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Mh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Vh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(vy,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Jh(n,e,t,r){let i=ke(),s=fc();if(ri(i,s,e)){let o=on(),a=Ag();lH(a,i,n,e,t,r)}return Jh}var ple=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var xb=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function gb(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function R6(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){de(r);let d=e.length-1;for(de(null);o<=a&&o<=d;){let h=n.at(o),m=e[o],y=gb(o,h,o,m,t);if(y!==0){y<0&&n.updateValue(o,m),o++;continue}let C=n.at(a),R=e[d],P=gb(a,C,d,R,t);if(P!==0){P<0&&n.updateValue(a,R),a--,d--;continue}let x=t(o,h),$=t(a,C),W=t(o,m);if(Object.is(W,$)){let J=t(d,R);Object.is(J,x)?(n.swap(o,a),n.updateValue(a,R),d--,a--):n.move(a,o),n.updateValue(o,m),o++;continue}if(i??=new ey,s??=dk(n,o,a,t),Mb(n,i,o,W))n.updateValue(o,m),o++,a++;else if(s.has(W))i.set(x,n.detach(o)),a--;else{let J=n.create(o,e[o]);n.attach(o,J),o++,a++}}for(;o<=d;)lk(n,i,t,o,e[o]),o++}else if(e!=null){de(r);let d=e[Symbol.iterator]();de(null);let h=d.next();for(;!h.done&&o<=a;){let m=n.at(o),y=h.value,C=gb(o,m,o,y,t);if(C!==0)C<0&&n.updateValue(o,y),o++,h=d.next();else{i??=new ey,s??=dk(n,o,a,t);let R=t(o,y);if(Mb(n,i,o,R))n.updateValue(o,y),o++,a++,h=d.next();else if(!s.has(R))n.attach(o,n.create(o,y)),o++,a++,h=d.next();else{let P=t(o,m);i.set(P,n.detach(o)),a--}}}for(;!h.done;)lk(n,i,t,n.length,h.value),h=d.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(d=>{n.destroy(d)})}function Mb(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function lk(n,e,t,r,i){if(Mb(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function dk(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var ey=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function yT(n,e,t,r,i,s,o,a){Bi("NgControlFlow");let c=ke(),d=on(),h=Dr(d.consts,s);return Zg(c,d,n,e,t,r,i,h,256,o,a),_T}function _T(n,e,t,r,i,s,o,a){Bi("NgControlFlow");let c=ke(),d=on(),h=Dr(d.consts,s);return Zg(c,d,n,e,t,r,i,h,512,o,a),_T}function vT(n,e){Bi("NgControlFlow");let t=ke(),r=fc(),i=t[r]!==Gn?t[r]:-1,s=i!==-1?ty(t,Mt+i):void 0,o=0;if(ri(t,r,n)){let a=de(null);try{if(s!==void 0&&Cx(s,o),n!==-1){let c=Mt+n,d=ty(t,c),h=Vb(t[_e],c),m=Ax(d,h,t),y=py(t,h,e,{dehydratedView:m});my(d,y,o,jh(h,m))}}finally{de(a)}}else if(s!==void 0){let a=Tx(s,o);a!==void 0&&(a[xt]=e)}}var Ob=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ot}};var Fb=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function ET(n,e,t,r,i,s,o,a,c,d,h,m,y){Bi("NgControlFlow");let C=ke(),R=on(),P=c!==void 0,x=ke(),$=a?o.bind(x[ar][xt]):o,W=new Fb(P,$);x[Mt+n]=W,Zg(C,R,n+1,e,t,r,i,Dr(R.consts,s),256),P&&Zg(C,R,n+2,c,d,h,m,Dr(R.consts,y),512)}var Lb=class extends xb{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ot}at(e){return this.getLView(e)[xt].$implicit}attach(e,t){let r=t[ul];this.needsIndexUpdate||=e!==this.length,my(this.lContainer,t,e,jh(this.templateTNode,r)),P6(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,N6(this.lContainer,e),k6(this.lContainer,e)}create(e,t){let r=Rb(this.lContainer,this.templateTNode.tView.ssrId);return py(this.hostLView,this.templateTNode,new Ob(this.lContainer,t,e),{dehydratedView:r})}destroy(e){dy(e[_e],e)}updateValue(e,t){this.getLView(e)[xt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[xt].$index=e}getLView(e){return x6(this.lContainer,e)}};function IT(n){let e=de(null),t=Li();try{let r=ke(),i=r[_e],s=r[t],o=t+1,a=ty(r,o);if(s.liveCollection===void 0){let d=Vb(i,o);s.liveCollection=new Lb(a,r,d)}else s.liveCollection.reset();let c=s.liveCollection;if(R6(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let d=fc(),h=c.length===0;if(ri(r,d,h)){let m=t+2,y=ty(r,m);if(h){let C=Vb(i,m),R=Ax(y,C,r),P=py(r,C,void 0,{dehydratedView:R});my(y,P,0,jh(C,R))}else i.firstUpdatePass&&MH(y),Cx(y,0)}}}finally{de(e)}}function ty(n,e){return n[e]}function P6(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t],i=r?r[dc]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[Ps];U3(s,i),yc.delete(r[Ns]),i.detachedLeaveAnimationFns=void 0}}function N6(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t],i=r?r[dc]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function k6(n,e){return $h(n,e)}function x6(n,e){return Tx(n,e)}function Vb(n,e){return xh(n,e)}function K(n,e,t){let r=ke(),i=fc();if(ri(r,i,e)){let s=on(),o=Ag();lx(o,r,n,e,r[wt],t)}return K}function Ub(n,e,t,r,i){oT(e,n,t,i?"class":"style",r)}function N(n,e,t,r){let i=ke(),s=i[_e],o=n+Mt,a=s.firstCreatePass?xx(o,i,2,e,dx,Kw(),t,r):s.data[o];if(hx(a,i,n,e,Kx),kh(a)){let c=i[_e];sT(c,i,a),qk(c,a,i)}return r!=null&&fy(i,a),N}function k(){let n=on(),e=Pn(),t=fx(e);return n.firstCreatePass&&Mx(n,t),Qw(t)&&Yw(),Ww(),t.classesWithoutHost!=null&&q$(t)&&Ub(n,t,ke(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&z$(t)&&Ub(n,t,ke(),t.stylesWithoutHost,!1),k}function xe(n,e,t,r){return N(n,e,t,r),k(),xe}function nt(n,e,t,r){let i=ke(),s=i[_e],o=n+Mt,a=s.firstCreatePass?KH(o,s,2,e,t,r):s.data[o];return hx(a,i,n,e,Kx),r!=null&&fy(i,a),nt}function pt(){let n=Pn(),e=fx(n);return Qw(e)&&Yw(),Ww(),pt}function Hi(n,e,t,r){return nt(n,e,t,r),pt(),Hi}var Kx=(n,e,t,r,i)=>(Pg(!0),Wk(e[wt],r,xN()));function Ne(){return ke()}var Fh=void 0;function M6(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var O6=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Fh,Fh,Fh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",M6],Uh={};function wT(n,e,t){typeof e!="string"&&(t=e,e=n[Ct.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Uh[e]=n,t&&(Uh[e][Ct.ExtraData]=t)}function dr(n){let e=F6(n),t=hk(e);if(t)return t;let r=e.split("-")[0];if(t=hk(r),t)return t;if(r==="en")return O6;throw new q(701,!1)}function hk(n){return n in Uh||(Uh[n]=Yr.ng&&Yr.ng.common&&Yr.ng.common.locales&&Yr.ng.common.locales[n]),Uh[n]}var Ct=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ct||{});function F6(n){return n.toLowerCase().replace(/_/g,"-")}var Xh="en-US";var L6=Xh;function Qx(n){typeof n=="string"&&(L6=n.toLowerCase().replace(/_/g,"-"))}function te(n,e,t){let r=ke(),i=on(),s=Pn();return Yx(i,r,r[wt],s,n,e,t),te}function Yx(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=fb(r,e,s),QH(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let m=0;m<h.length;m+=2){let y=h[m],C=h[m+1];c??=fb(r,e,s),ok(r,e,y,C,i,c)}if(d&&d.length)for(let m of d)c??=fb(r,e,s),ok(r,e,m,i,i,c)}}function Y(n=1){return kN(n)}function Zh(n){let e=wN();return $w(e,Mt+n)}function Fg(n,e){return n<<17|e<<2}function vc(n){return n>>17&32767}function V6(n){return(n&2)==2}function U6(n,e){return n&131071|e<<17}function jb(n){return n|2}function bl(n){return(n&131068)>>2}function yb(n,e){return n&-131069|e<<2}function j6(n){return(n&1)===1}function Bb(n){return n|1}function B6(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=vc(o),c=bl(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let m=t;h=m[1],(h===null||cl(m,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let y=vc(n[a+1]);n[r+1]=Fg(y,a),y!==0&&(n[y+1]=yb(n[y+1],r)),n[a+1]=U6(n[a+1],r)}else n[r+1]=Fg(a,0),a!==0&&(n[a+1]=yb(n[a+1],r)),a=r;else n[r+1]=Fg(c,0),a===0?a=r:n[c+1]=yb(n[c+1],r),c=r;d&&(n[r+1]=jb(n[r+1])),fk(n,h,r,!0),fk(n,h,r,!1),$6(e,h,n,r,s),o=Fg(a,c),s?e.classBindings=o:e.styleBindings=o}function $6(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&cl(s,e)>=0&&(t[r+1]=Bb(t[r+1]))}function fk(n,e,t,r){let i=n[t+1],s=e===null,o=r?vc(i):bl(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];H6(c,e)&&(a=!0,n[o+1]=r?Bb(d):jb(d)),o=r?vc(d):bl(d)}a&&(n[t+1]=r?jb(i):Bb(i))}function H6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?cl(n,e)>=0:!1}var ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function q6(n){return n.substring(ti.key,ti.keyEnd)}function z6(n){return G6(n),Jx(n,Xx(n,0,ti.textEnd))}function Jx(n,e){let t=ti.textEnd;return t===e?-1:(e=ti.keyEnd=W6(n,ti.key=e,t),Xx(n,e,t))}function G6(n){ti.key=0,ti.keyEnd=0,ti.value=0,ti.valueEnd=0,ti.textEnd=n.length}function Xx(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function W6(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Sl(n,e,t){return Zx(n,e,t,!1),Sl}function En(n,e){return Zx(n,e,null,!0),En}function bT(n){Q6(tq,K6,n,!0)}function K6(n,e){for(let t=z6(e);t>=0;t=Jx(e,t))_g(n,q6(e),!0)}function Zx(n,e,t,r){let i=ke(),s=on(),o=Tg(2);if(s.firstUpdatePass&&tM(s,n,o,r),e!==Gn&&ri(i,o,e)){let a=s.data[Li()];nM(s,a,i,i[wt],n,i[o+1]=rq(e,t),r,o)}}function Q6(n,e,t,r){let i=on(),s=Tg(2);i.firstUpdatePass&&tM(i,null,s,r);let o=ke();if(t!==Gn&&ri(o,s,t)){let a=i.data[Li()];if(rM(a,r)&&!eM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=fg(c,t||"")),Ub(i,a,o,t,r)}else nq(i,a,o,o[wt],o[s+1],o[s+1]=eq(n,e,t),r,s)}}function eM(n,e){return e>=n.expandoStartIndex}function tM(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Li()],o=eM(n,t);rM(s,r)&&e===null&&!o&&(e=!1),e=Y6(i,s,e,r),B6(i,s,e,t,o,r)}}function Y6(n,e,t,r){let i=AN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=_b(null,n,e,t,r),t=qh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=_b(i,n,e,t,r),s===null){let c=J6(n,e,r);c!==void 0&&Array.isArray(c)&&(c=_b(null,n,e,c[1],r),c=qh(c,e.attrs,r),X6(n,e,r,c))}else s=Z6(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function J6(n,e,t){let r=t?e.classBindings:e.styleBindings;if(bl(r)!==0)return n[vc(r)]}function X6(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[vc(i)]=r}function Z6(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=qh(r,o,t)}return qh(r,e.attrs,t)}function _b(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=qh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function qh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_g(n,o,t?!0:e[++s]))}return n===void 0?null:n}function eq(n,e,t){if(t==null||t==="")return jn;let r=[],i=Cl(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(i instanceof Set)for(let s of i)n(r,s,!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function tq(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&_g(n,r,t)}function nq(n,e,t,r,i,s,o,a){i===Gn&&(i=jn);let c=0,d=0,h=0<i.length?i[0]:null,m=0<s.length?s[0]:null;for(;h!==null||m!==null;){let y=c<i.length?i[c+1]:void 0,C=d<s.length?s[d+1]:void 0,R=null,P;h===m?(c+=2,d+=2,y!==C&&(R=m,P=C)):m===null||h!==null&&h<m?(c+=2,R=h):(d+=2,R=m,P=C),R!==null&&nM(n,e,t,r,R,P,o,a),h=c<i.length?i[c]:null,m=d<s.length?s[d]:null}}function nM(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=j6(d)?pk(c,e,t,i,bl(d),o):void 0;if(!ny(h)){ny(s)||V6(d)&&(s=pk(c,null,t,i,a,o));let m=Bw(Li(),t);eH(r,o,m,i,s)}}function pk(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,m=h===null,y=t[i+1];y===Gn&&(y=m?jn:void 0);let C=m?vg(y,r):h===r?y:void 0;if(d&&!ny(C)&&(C=vg(c,r)),ny(C)&&(a=C,o))return a;let R=n[i+1];i=o?vc(R):bl(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=vg(c,r))}return a}function ny(n){return n!==void 0}function rq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ss(Cl(n)))),n}function rM(n,e){return(n.flags&(e?8:16))!==0}function F(n,e=""){let t=ke(),r=on(),i=n+Mt,s=r.firstCreatePass?Kh(r,i,1,e,null):r.data[i],o=iq(r,t,s,e);t[i]=o,Rg()&&rT(r,t,o,s),pl(s,!1)}var iq=(n,e,t,r)=>(Pg(!0),y3(e[wt],r));function sq(n,e,t,r=""){return ri(n,fc(),t)?e+al(t)+r:Gn}function oq(n,e,t,r,i,s=""){let o=bN(),a=Vx(n,o,t,i);return Tg(2),a?e+al(t)+r+al(i)+s:Gn}function Fe(n){return Rt("",n),Fe}function Rt(n,e,t){let r=ke(),i=sq(r,n,e,t);return i!==Gn&&iM(r,Li(),i),Rt}function ef(n,e,t,r,i){let s=ke(),o=oq(s,n,e,t,r,i);return o!==Gn&&iM(s,Li(),o),ef}function iM(n,e,t){let r=Bw(e,n);_3(n[wt],r,t)}function Ey(n,e,t){hT(e)&&(e=e());let r=ke(),i=fc();if(ri(r,i,e)){let s=on(),o=Ag();lx(o,r,n,e,r[wt],t)}return Ey}function TT(n,e){let t=hT(n);return t&&n.set(e),t}function Iy(n,e){let t=ke(),r=on(),i=Pn();return Yx(r,t,t[wt],i,n,e),Iy}function mk(n,e,t){let r=on();r.firstCreatePass&&sM(e,r.data,r.blueprint,Fi(n),t)}function sM(n,e,t,r,i){if(n=_n(n),Array.isArray(n))for(let s=0;s<n.length;s++)sM(n[s],e,t,r,i);else{let s=on(),o=ke(),a=Pn(),c=rc(n)?n:_n(n.provide),d=Ow(n),h=a.providerIndexes&1048575,m=a.directiveStart,y=a.providerIndexes>>20;if(rc(n)||!n.multi){let C=new gc(d,i,he,null),R=Eb(c,e,i?h:h+y,m);R===-1?(wb(qg(a,o),s,c),vb(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),o.push(C)):(t[R]=C,o[R]=C)}else{let C=Eb(c,e,h+y,m),R=Eb(c,e,h,h+y),P=C>=0&&t[C],x=R>=0&&t[R];if(i&&!x||!i&&!P){wb(qg(a,o),s,c);let $=uq(i?cq:aq,t.length,i,r,d,n);!i&&x&&(t[R].providerFactory=$),vb(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push($),o.push($)}else{let $=oM(t[i?R:C],d,!i&&r);vb(s,n,C>-1?C:R,$)}!i&&r&&x&&t[R].componentProviders++}}}function vb(n,e,t,r){let i=rc(e),s=cN(e);if(i||s){let c=(s?_n(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function oM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Eb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function aq(n,e,t,r,i){return $b(this.multi,[])}function cq(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=zg(r,r[_e],this.providerFactory.index,i);o=c.slice(0,a),$b(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],$b(s,o);return o}function $b(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function uq(n,e,t,r,i,s){let o=new gc(n,t,he,null);return o.multi=[],o.index=e,o.componentProviders=0,oM(o,i,r&&!t),o}function Dl(n,e){return t=>{t.providersResolver=(r,i)=>mk(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>mk(r,i?i(e):e,!0))}}function bc(n,e,t){return lq(ke(),eb(),n,e,t)}function aM(n,e){let t=n[e];return t===Gn?void 0:t}function lq(n,e,t,r,i,s){let o=e+t;return ri(n,o,i)?Lx(n,o+1,s?r.call(s,i):r(i)):aM(n,o+1)}function dq(n,e,t,r,i,s,o){let a=e+t;return Vx(n,a,i,s)?Lx(n,a+2,o?r.call(o,i,s):r(i,s)):aM(n,a+2)}function qi(n,e){let t=on(),r,i=n+Mt;t.firstCreatePass?(r=hq(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Go(r.type,!0)),o,a=Un(he);try{let c=Hg(!1),d=s();return Hg(c),Hw(t,ke(),i,d),d}finally{Un(a)}}function hq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function zi(n,e,t,r){let i=n+Mt,s=ke(),o=$w(s,i);return fq(s,i)?dq(s,eb(),e,o.transform,t,r,o):o.transform(t,r)}function fq(n,e){return n[_e].data[e].pure}function tf(n,e){return Dx(n,e)}var ry=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},CT=(()=>{class n{compileModuleSync(t){return new Xg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Sw(t),s=Zk(i.declarations).reduce((o,a)=>{let c=Yo(a);return c&&o.push(new wl(c)),o},[]);return new ry(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cM=(()=>{class n{applicationErrorHandler=U(lr);appRef=U($i);taskService=U(ks);ngZone=U(tt);zonelessEnabled=U(Oh);tracing=U(Gh,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new tn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Th):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(ub,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?LN:sb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Th+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uM(){return[{provide:Qo,useExisting:cM},{provide:tt,useClass:Ch},{provide:Oh,useValue:!0}]}function pq(){return typeof $localize<"u"&&$localize.locale||Xh}var Tc=new Z("",{factory:()=>U(Tc,{optional:!0,skipSelf:!0})||pq()});function Nn(n,e){return km(n,e?.equal)}var pM=Symbol("InputSignalNode#UNSET"),Nq=se(j({},xm),{transformFn:void 0,applyValueToInputSignal(n,e){hh(n,e)}});function mM(n,e){let t=Object.create(Nq);t.value=n,t.transformFn=e?.transform;function r(){if(uh(t),t.value===pM){let i=null;throw new q(-950,i)}return t.value}return r[Ln]=t,r}var by=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>zh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function lM(n,e){return mM(n,e)}function kq(n){return mM(pM,n)}var gM=(lM.required=kq,lM);var ST=new Z(""),xq=new Z("");function nf(n){return!n.moduleRef}function Mq(n){let e=nf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(tt);return t.run(()=>{nf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(lr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),nf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(ST);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(ST);o.add(s),n.moduleRef.onDestroy(()=>{Vh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return Fq(r,t,()=>{let s=e.get(ks),o=s.add(),a=e.get(gT);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Tc,Xh);if(Qx(c||Xh),!e.get(xq,!0))return nf(n)?e.get($i):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(nf(n)){let h=e.get($i);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Oq?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{s.remove(o)})})})}var Oq;function Fq(n,e,t){try{let r=t();return na(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var wy=null;function Lq(n=[],e){return ht.create({name:e,providers:[{provide:Ah,useValue:"platform"},{provide:ST,useValue:new Set([()=>wy=null])},...n]})}function Vq(n=[]){if(wy)return wy;let e=Lq(n);return wy=e,Gx(),Uq(e),e}function Uq(n){let e=n.get(oy,null);qt(n,()=>{e?.forEach(t=>t())})}function rf(){return!1}var jq=1e4;var vge=jq-1e3;var Cc=(()=>{class n{static __NG_ELEMENT_ID__=Bq}return n})();function Bq(n){return $q(Pn(),ke(),(n&16)===16)}function $q(n,e,t){if(Zo(n)&&!t){let r=Sr(n.index,e);return new ta(r,r)}else if(n.type&175){let r=e[ar];return new ta(r,e)}return null}var DT=class{constructor(){}supports(e){return uT(e)}create(e){return new AT(e)}},Hq=(n,e)=>e,AT=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Hq}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<dM(r,i,s)?t:r,a=dM(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let y=0;y<d;y++){let C=y<s.length?s[y]:s[y]=0,R=C+y;h<=R&&R<d&&(s[y]=C+1)}let m=o.previousIndex;s[m]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!uT(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Ox(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new RT(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ty),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ty),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},RT=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},PT=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ty=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new PT,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function hM(){return new kT([new DT])}var kT=(()=>{class n{factories;static \u0275prov=ee({token:n,providedIn:"root",factory:hM});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=U(n,{optional:!0,skipSelf:!0});return n.create(t,r||hM())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function yM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ct(Ke.BootstrapApplicationStart);try{let s=i?.injector??Vq(r),o=[uM(),UN,...t||[]],a=new Hh({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return Mq({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ct(Ke.BootstrapApplicationEnd)}}function Sc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var _M=null;function Pr(){return _M}function xT(n){_M??=n}var sf=class{},Cy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>U(vM),providedIn:"platform"})}return n})();var vM=(()=>{class n extends Cy{_location;_history;_doc=U(Dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(t){let r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function wM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function EM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ra(n){return n&&n[0]!=="?"?`?${n}`:n}var Al=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>U(zq),providedIn:"root"})}return n})(),qq=new Z(""),zq=(()=>{class n extends Al{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wM(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ra(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ra(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ra(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(Cy),me(qq,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ia=(()=>{class n{_subject=new vt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Kq(EM(IM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ra(r))}normalize(t){return n.stripTrailingSlash(Wq(this._basePath,IM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ra(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ra(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ra;static joinWithSlash=wM;static stripTrailingSlash=EM;static \u0275fac=function(r){return new(r||n)(me(Al))};static \u0275prov=ee({token:n,factory:()=>Gq(),providedIn:"root"})}return n})();function Gq(){return new ia(me(Al))}function Wq(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function IM(n){return n.replace(/\/index.html$/,"")}function Kq(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var kn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(kn||{}),ut=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ut||{}),Wn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Wn||{}),Fs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function DM(n){return dr(n)[Ct.LocaleId]}function AM(n,e,t){let r=dr(n),i=[r[Ct.DayPeriodsFormat],r[Ct.DayPeriodsStandalone]],s=Nr(i,e);return Nr(s,t)}function RM(n,e,t){let r=dr(n),i=[r[Ct.DaysFormat],r[Ct.DaysStandalone]],s=Nr(i,e);return Nr(s,t)}function PM(n,e,t){let r=dr(n),i=[r[Ct.MonthsFormat],r[Ct.MonthsStandalone]],s=Nr(i,e);return Nr(s,t)}function NM(n,e){let r=dr(n)[Ct.Eras];return Nr(r,e)}function of(n,e){let t=dr(n);return Nr(t[Ct.DateFormat],e)}function af(n,e){let t=dr(n);return Nr(t[Ct.TimeFormat],e)}function cf(n,e){let r=dr(n)[Ct.DateTimeFormat];return Nr(r,e)}function uf(n,e){let t=dr(n),r=t[Ct.NumberSymbols][e];if(typeof r>"u"){if(e===Fs.CurrencyDecimal)return t[Ct.NumberSymbols][Fs.Decimal];if(e===Fs.CurrencyGroup)return t[Ct.NumberSymbols][Fs.Group]}return r}function kM(n){if(!n[Ct.ExtraData])throw new q(2303,!1)}function xM(n){let e=dr(n);return kM(e),(e[Ct.ExtraData][2]||[]).map(r=>typeof r=="string"?MT(r):[MT(r[0]),MT(r[1])])}function MM(n,e,t){let r=dr(n);kM(r);let i=[r[Ct.ExtraData][0],r[Ct.ExtraData][1]],s=Nr(i,e)||[];return Nr(s,t)||[]}function Nr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new q(2304,!1)}function MT(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Qq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sy={},Yq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function OM(n,e,t,r){let i=sz(n);e=Os(t,e)||e;let o=[],a;for(;e;)if(a=Yq.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=LM(r,c),i=iz(i,r));let d="";return o.forEach(h=>{let m=nz(h);d+=m?m(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Ny(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Os(n,e){let t=DM(n);if(Sy[t]??={},Sy[t][e])return Sy[t][e];let r="";switch(e){case"shortDate":r=of(n,Wn.Short);break;case"mediumDate":r=of(n,Wn.Medium);break;case"longDate":r=of(n,Wn.Long);break;case"fullDate":r=of(n,Wn.Full);break;case"shortTime":r=af(n,Wn.Short);break;case"mediumTime":r=af(n,Wn.Medium);break;case"longTime":r=af(n,Wn.Long);break;case"fullTime":r=af(n,Wn.Full);break;case"short":let i=Os(n,"shortTime"),s=Os(n,"shortDate");r=Dy(cf(n,Wn.Short),[i,s]);break;case"medium":let o=Os(n,"mediumTime"),a=Os(n,"mediumDate");r=Dy(cf(n,Wn.Medium),[o,a]);break;case"long":let c=Os(n,"longTime"),d=Os(n,"longDate");r=Dy(cf(n,Wn.Long),[c,d]);break;case"full":let h=Os(n,"fullTime"),m=Os(n,"fullDate");r=Dy(cf(n,Wn.Full),[h,m]);break}return r&&(Sy[t][e]=r),r}function Dy(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function oi(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Jq(n,e){return oi(n,3).substring(0,e)}function Gt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=Xq(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Jq(a,e);let c=uf(o,Fs.MinusSign);return oi(a,e,c,r,i)}}function Xq(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new q(2301,!1)}}function yt(n,e,t=kn.Format,r=!1){return function(i,s){return Zq(i,s,n,e,t,r)}}function Zq(n,e,t,r,i,s){switch(t){case 2:return PM(e,i,r)[n.getMonth()];case 1:return RM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=xM(e),h=MM(e,i,r),m=d.findIndex(y=>{if(Array.isArray(y)){let[C,R]=y,P=o>=C.hours&&a>=C.minutes,x=o<R.hours||o===R.hours&&a<R.minutes;if(C.hours<R.hours){if(P&&x)return!0}else if(P||x)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(m!==-1)return h[m]}return AM(e,i,r)[o<12?0:1];case 3:return NM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new q(2302,!1)}}function Ay(n){return function(e,t,r){let i=-1*r,s=uf(t,Fs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+oi(o,2,s)+oi(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+oi(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+oi(o,2,s)+":"+oi(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+oi(o,2,s)+":"+oi(Math.abs(i%60),2,s);default:throw new q(2310,!1)}}}var ez=0,Py=4;function tz(n){let e=Ny(n,ez,1).getDay();return Ny(n,0,1+(e<=Py?Py:Py+7)-e)}function FM(n){let e=n.getDay(),t=e===0?-3:Py-e;return Ny(n.getFullYear(),n.getMonth(),n.getDate()+t)}function OT(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=FM(t),o=tz(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return oi(i,n,uf(r,Fs.MinusSign))}}function Ry(n,e=!1){return function(t,r){let s=FM(t).getFullYear();return oi(s,n,uf(r,Fs.MinusSign),e)}}var FT={};function nz(n){if(FT[n])return FT[n];let e;switch(n){case"G":case"GG":case"GGG":e=yt(3,ut.Abbreviated);break;case"GGGG":e=yt(3,ut.Wide);break;case"GGGGG":e=yt(3,ut.Narrow);break;case"y":e=Gt(0,1,0,!1,!0);break;case"yy":e=Gt(0,2,0,!0,!0);break;case"yyy":e=Gt(0,3,0,!1,!0);break;case"yyyy":e=Gt(0,4,0,!1,!0);break;case"Y":e=Ry(1);break;case"YY":e=Ry(2,!0);break;case"YYY":e=Ry(3);break;case"YYYY":e=Ry(4);break;case"M":case"L":e=Gt(1,1,1);break;case"MM":case"LL":e=Gt(1,2,1);break;case"MMM":e=yt(2,ut.Abbreviated);break;case"MMMM":e=yt(2,ut.Wide);break;case"MMMMM":e=yt(2,ut.Narrow);break;case"LLL":e=yt(2,ut.Abbreviated,kn.Standalone);break;case"LLLL":e=yt(2,ut.Wide,kn.Standalone);break;case"LLLLL":e=yt(2,ut.Narrow,kn.Standalone);break;case"w":e=OT(1);break;case"ww":e=OT(2);break;case"W":e=OT(1,!0);break;case"d":e=Gt(2,1);break;case"dd":e=Gt(2,2);break;case"c":case"cc":e=Gt(7,1);break;case"ccc":e=yt(1,ut.Abbreviated,kn.Standalone);break;case"cccc":e=yt(1,ut.Wide,kn.Standalone);break;case"ccccc":e=yt(1,ut.Narrow,kn.Standalone);break;case"cccccc":e=yt(1,ut.Short,kn.Standalone);break;case"E":case"EE":case"EEE":e=yt(1,ut.Abbreviated);break;case"EEEE":e=yt(1,ut.Wide);break;case"EEEEE":e=yt(1,ut.Narrow);break;case"EEEEEE":e=yt(1,ut.Short);break;case"a":case"aa":case"aaa":e=yt(0,ut.Abbreviated);break;case"aaaa":e=yt(0,ut.Wide);break;case"aaaaa":e=yt(0,ut.Narrow);break;case"b":case"bb":case"bbb":e=yt(0,ut.Abbreviated,kn.Standalone,!0);break;case"bbbb":e=yt(0,ut.Wide,kn.Standalone,!0);break;case"bbbbb":e=yt(0,ut.Narrow,kn.Standalone,!0);break;case"B":case"BB":case"BBB":e=yt(0,ut.Abbreviated,kn.Format,!0);break;case"BBBB":e=yt(0,ut.Wide,kn.Format,!0);break;case"BBBBB":e=yt(0,ut.Narrow,kn.Format,!0);break;case"h":e=Gt(3,1,-12);break;case"hh":e=Gt(3,2,-12);break;case"H":e=Gt(3,1);break;case"HH":e=Gt(3,2);break;case"m":e=Gt(4,1);break;case"mm":e=Gt(4,2);break;case"s":e=Gt(5,1);break;case"ss":e=Gt(5,2);break;case"S":e=Gt(6,1);break;case"SS":e=Gt(6,2);break;case"SSS":e=Gt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Ay(0);break;case"ZZZZZ":e=Ay(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ay(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ay(2);break;default:return null}return FT[n]=e,e}function LM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function rz(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function iz(n,e,t){let i=n.getTimezoneOffset(),s=LM(e,i);return rz(n,-1*(s-i))}function sz(n){if(bM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Ny(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Qq))return oz(r)}let e=new Date(n);if(!bM(e))throw new q(2311,!1);return e}function oz(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function bM(n){return n instanceof Date&&!isNaN(n.valueOf())}var LT=/\s+/,TM=[],lf=(()=>{class n{_ngEl;_renderer;initialClasses=TM;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(LT):TM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(LT):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(LT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(he(ii),he(Ms))};static \u0275dir=zt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ky=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ky(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),CM(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);CM(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(wc),he(Wh),he(kT))};static \u0275dir=zt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function CM(n,e){n.context.$implicit=e.item}var In=(()=>{class n{_viewContainer;_context=new xy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){SM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){SM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(wc),he(Wh))};static \u0275dir=zt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),xy=class{$implicit=null;ngIf=null};function SM(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}function az(n,e){return new q(2100,!1)}var cz="mediumDate",VM=new Z(""),UM=new Z(""),Dc=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??cz,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return OM(t,o,s||this.locale,a)}catch(o){throw az(n,o.message)}}static \u0275fac=function(r){return new(r||n)(he(Tc,16),he(VM,24),he(UM,24))};static \u0275pipe=lT({name:"date",type:n,pure:!0})}return n})();var Wt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=or({})}return n})();function VT(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var df=class{};function jM(n,e,t){return wT(n,e,t)}var BM="browser";var hf=class{_doc;constructor(e){this._doc=e}manager},My=(()=>{class n extends hf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Ly=new Z(""),$T=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof My));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof My);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(Ly),me(tt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),UT="ng-app-id";function $M(n){for(let e of n)e.remove()}function HM(n,e){let t=e.createElement("style");return t.textContent=n,t}function uz(n,e,t,r){let i=n.head?.querySelectorAll(`style[${UT}="${e}"],link[${UT}="${e}"]`);if(i)for(let s of i)s.removeAttribute(UT),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function BT(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var HT=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,uz(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,HM);r?.forEach(i=>this.addUsage(i,this.external,BT))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&($M(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])$M(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,HM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,BT(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(Dt),me(sy),me(cy,8),me(Ic))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),jT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qT=/%COMP%/g;var zM="%COMP%",lz=`_nghost-${zM}`,dz=`_ngcontent-${zM}`,hz=!0,fz=new Z("",{factory:()=>hz});function pz(n){return dz.replace(qT,n)}function mz(n){return lz.replace(qT,n)}function GM(n,e){return e.map(t=>t.replace(qT,n))}var mf=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.defaultRenderer=new ff(t,o,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Fy?i.applyToHost(t):i instanceof pf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.tracingService;switch(r.encapsulation){case ni.Emulated:s=new Fy(c,d,r,this.appId,h,o,a,m);break;case ni.ShadowDom:return new Oy(c,t,r,o,a,this.nonce,m,d);case ni.ExperimentalIsolatedShadowDom:return new Oy(c,t,r,o,a,this.nonce,m);default:s=new pf(c,d,r,h,o,a,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me($T),me(HT),me(sy),me(fz),me(Dt),me(tt),me(cy),me(Gh,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),ff=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(jT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=jT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=jT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ui.DashCase|Ui.Important)?e.style.setProperty(t,r,i&Ui.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ui.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Pr().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function qM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Oy=class extends ff{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c){super(e,i,s,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=GM(r.id,d);for(let m of d){let y=document.createElement("style");o&&y.setAttribute("nonce",o),y.textContent=m,this.shadowRoot.appendChild(y)}let h=r.getExternalStyles?.();if(h)for(let m of h){let y=BT(m,i);o&&y.setAttribute("nonce",o),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},pf=class extends ff{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?GM(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&yc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Fy=class extends pf{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,d),this.contentAttr=pz(d),this.hostAttr=mz(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Vy=class n extends sf{supportsDOMEvents=!0;static makeCurrent(){xT(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=gz();return t==null?null:yz(t)}resetBaseElement(){gf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return VT(document.cookie,e)}},gf=null;function gz(){return gf=gf||document.head.querySelector("base"),gf?gf.getAttribute("href"):null}function yz(n){return new URL(n,document.baseURI).pathname}var _z=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),WM=["alt","control","meta","shift"],vz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ez={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},KM=(()=>{class n extends hf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),WM.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=vz[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),WM.forEach(o=>{if(o!==i){let a=Ez[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();async function zT(n,e,t){let r=j({rootComponent:n},Iz(e,t));return yM(r)}function Iz(n,e){return{platformRef:e?.platformRef,appProviders:[...Sz,...n?.providers??[]],platformProviders:Cz}}function wz(){Vy.makeCurrent()}function bz(){return new Ds}function Tz(){return zb(document),document}var Cz=[{provide:Ic,useValue:BM},{provide:oy,useValue:wz,multi:!0},{provide:Dt,useFactory:Tz}];var Sz=[{provide:Ah,useValue:"root"},{provide:Ds,useFactory:bz},{provide:Ly,useClass:My,multi:!0},{provide:Ly,useClass:KM,multi:!0},mf,HT,$T,{provide:xs,useExisting:mf},{provide:df,useClass:_z},[]];var QM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ce="primary",Af=Symbol("RouteTitle"),YT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Pc(n){return new YT(n)}function GT(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(i[0]===":")t[i.substring(1)]=s;else if(i!==s.path)return!1}return!0}function s1(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},d=n.slice(0,r.length);return GT(r,d,c)?{consumed:d,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let s=r.slice(0,i),o=r.slice(i+1);if(s.length+o.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!GT(s,n.slice(0,s.length),a)||!GT(o,n.slice(n.length-o.length),a)?null:{consumed:n,posParams:a}}function qy(n){return new Promise((e,t)=>{n.pipe(Ts()).subscribe({next:r=>e(r),error:r=>t(r)})})}function Az(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gi(n[t],e[t]))return!1;return!0}function Gi(n,e){let t=n?JT(n):void 0,r=e?JT(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!o1(n[i],e[i]))return!1;return!0}function JT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function o1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Rz(n){return n.length>0?n[n.length-1]:null}function xc(n){return mh(n)?n:na(n)?Ht(Promise.resolve(n)):Ue(n)}function a1(n){return mh(n)?qy(n):Promise.resolve(n)}var Pz={exact:u1,subset:l1},c1={exact:Nz,subset:kz,ignored:()=>!0};function YM(n,e,t){return Pz[t.paths](n.root,e.root,t.matrixParams)&&c1[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Nz(n,e){return Gi(n,e)}function u1(n,e,t){if(!Ac(n.segments,e.segments)||!By(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!u1(n.children[r],e.children[r],t))return!1;return!0}function kz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>o1(n[t],e[t]))}function l1(n,e,t){return d1(n,e,e.segments,t)}function d1(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ac(i,t)||e.hasChildren()||!By(i,t,r))}else if(n.segments.length===t.length){if(!Ac(n.segments,t)||!By(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!l1(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ac(n.segments,i)||!By(n.segments,i,r)||!n.children[Ce]?!1:d1(n.children[Ce],e,s,r)}}function By(n,e,t){return e.every((r,i)=>c1[t](n[i].parameters,r.parameters))}var ui=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pc(this.queryParams),this._queryParamMap}toString(){return Oz.serialize(this)}},Qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $y(this)}},sa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Pc(this.parameters),this._parameterMap}toString(){return f1(this)}};function xz(n,e){return Ac(n,e)&&n.every((t,r)=>Gi(t.parameters,e[r].parameters))}function Ac(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Mz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ce&&(t=t.concat(e(i,r)))}),t}var Rf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new oa,providedIn:"root"})}return n})(),oa=class{parse(e){let t=new ZT(e);return new ui(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${yf(e.root,!0)}`,r=Vz(e.queryParams),i=typeof e.fragment=="string"?`#${Fz(e.fragment)}`:"";return`${t}${r}${i}`}},Oz=new oa;function $y(n){return n.segments.map(e=>f1(e)).join("/")}function yf(n,e){if(!n.hasChildren())return $y(n);if(e){let t=n.children[Ce]?yf(n.children[Ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ce&&r.push(`${i}:${yf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Mz(n,(r,i)=>i===Ce?[yf(n.children[Ce],!1)]:[`${i}:${yf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ce]!=null?`${$y(n)}/${t[0]}`:`${$y(n)}/(${t.join("//")})`}}function h1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uy(n){return h1(n).replace(/%3B/gi,";")}function Fz(n){return encodeURI(n)}function XT(n){return h1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hy(n){return decodeURIComponent(n)}function JM(n){return Hy(n.replace(/\+/g,"%20"))}function f1(n){return`${XT(n.path)}${Lz(n.parameters)}`}function Lz(n){return Object.entries(n).map(([e,t])=>`;${XT(e)}=${XT(t)}`).join("")}function Vz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Uy(t)}=${Uy(i)}`).join("&"):`${Uy(t)}=${Uy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Uz=/^[^\/()?;#]+/;function WT(n){let e=n.match(Uz);return e?e[0]:""}var jz=/^[^\/()?;=#]+/;function Bz(n){let e=n.match(jz);return e?e[0]:""}var $z=/^[^=?&#]+/;function Hz(n){let e=n.match($z);return e?e[0]:""}var qz=/^[^&#]+/;function zz(n){let e=n.match(qz);return e?e[0]:""}var ZT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ce]=new Qe(e,t)),r}parseSegment(){let e=WT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new sa(Hy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Bz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=WT(this.remaining);i&&(r=i,this.capture(r))}e[Hy(t)]=Hy(r)}parseQueryParam(e){let t=Hz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=zz(this.remaining);o&&(r=o,this.capture(r))}let i=JM(t),s=JM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=WT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ce);let o=this.parseChildren();t[s??Ce]=Object.keys(o).length===1&&o[Ce]?o[Ce]:new Qe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function p1(n){return n.segments.length>0?new Qe([],{[Ce]:n}):n}function m1(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=m1(i);if(r===Ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Qe(n.segments,e);return Gz(t)}function Gz(n){if(n.numberOfChildren===1&&n.children[Ce]){let e=n.children[Ce];return new Qe(n.segments.concat(e.segments),e.children)}return n}function aa(n){return n instanceof ui}function g1(n,e,t=null,r=null,i=new oa){let s=y1(n);return _1(s,e,t,r,i)}function y1(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Qe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=p1(r);return e??i}function _1(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return KT(s,s,s,t,r,i);let o=Wz(e);if(o.toRoot())return KT(s,s,new Qe([],{}),t,r,i);let a=Kz(o,s,n),c=a.processChildren?vf(a.segmentGroup,a.index,o.commands):E1(a.segmentGroup,a.index,o.commands);return KT(s,a.segmentGroup,c,t,r,i)}function zy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function wf(n){return typeof n=="object"&&n!=null&&n.outlets}function XM(n,e,t){n||="\u0275";let r=new ui;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function KT(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(m=>XM(d,m,s)):XM(d,h,s);let a;n===e?a=t:a=v1(n,e,t);let c=p1(m1(a));return new ui(c,o,i)}function v1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=v1(s,e,t)}),new Qe(n.segments,r)}var Gy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zy(r[0]))throw new q(4003,!1);let i=r.find(wf);if(i&&i!==Rz(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Wz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gy(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Gy(t,e,r)}var Pl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Kz(n,e,t){if(n.isAbsolute)return new Pl(e,!0,0);if(!t)return new Pl(e,!1,NaN);if(t.parent===null)return new Pl(t,!0,0);let r=zy(n.commands[0])?0:1,i=t.segments.length-1+r;return Qz(t,i,n.numberOfDoubleDots)}function Qz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new Pl(r,!1,i-s)}function Yz(n){return wf(n[0])?n[0].outlets:{[Ce]:n}}function E1(n,e,t){if(n??=new Qe([],{}),n.segments.length===0&&n.hasChildren())return vf(n,e,t);let r=Jz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Qe(n.segments.slice(0,r.pathIndex),{});return s.children[Ce]=new Qe(n.segments.slice(r.pathIndex),n.children),vf(s,0,i)}else return r.match&&i.length===0?new Qe(n.segments,{}):r.match&&!n.hasChildren()?e0(n,e,t):r.match?vf(n,0,i):e0(n,e,t)}function vf(n,e,t){if(t.length===0)return new Qe(n.segments,{});{let r=Yz(t),i={};if(Object.keys(r).some(s=>s!==Ce)&&n.children[Ce]&&n.numberOfChildren===1&&n.children[Ce].segments.length===0){let s=vf(n.children[Ce],e,t);return new Qe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=E1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Qe(n.segments,i)}}function Jz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(wf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!e1(c,d,o))return s;r+=2}else{if(!e1(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function e0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(wf(s)){let c=Xz(s.outlets);return new Qe(r,c)}if(i===0&&zy(t[0])){let c=n.segments[e];r.push(new sa(c.path,ZM(t[0]))),i++;continue}let o=wf(s)?s.outlets[Ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&zy(a)?(r.push(new sa(o,ZM(a))),i+=2):(r.push(new sa(o,{})),i++)}return new Qe(r,{})}function Xz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=e0(new Qe([],{}),0,r))}),e}function ZM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function e1(n,e,t){return n==t.path&&Gi(e,t.parameters)}var Ef="imperative",cn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(cn||{}),fr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Nc=class extends fr{type=cn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Wi=class extends fr{urlAfterRedirects;type=cn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},xn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(xn||{}),bf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(bf||{}),kr=class extends fr{reason;code;type=cn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function I1(n){return n instanceof kr&&(n.code===xn.Redirect||n.code===xn.SupersededByNewNavigation)}var Vs=class extends fr{reason;code;type=cn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},kc=class extends fr{error;target;type=cn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kl=class extends fr{urlAfterRedirects;state;type=cn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends fr{urlAfterRedirects;state;type=cn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class extends fr{urlAfterRedirects;state;shouldActivate;type=cn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qy=class extends fr{urlAfterRedirects;state;type=cn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class extends fr{urlAfterRedirects;state;type=cn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jy=class{route;type=cn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xy=class{route;type=cn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zy=class{snapshot;type=cn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e_=class{snapshot;type=cn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},t_=class{snapshot;type=cn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},n_=class{snapshot;type=cn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var xl=class{},Ml=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Zz(n){return!(n instanceof xl)&&!(n instanceof Ml)}var r_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ll(this.rootInjector)}},Ll=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new r_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=t0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=t0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=n0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return n0(e,this._root).map(t=>t.value)}};function t0(n,e){if(n===e.value)return e;for(let t of e.children){let r=t0(n,t);if(r)return r}return null}function n0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=n0(n,t);if(r.length)return r.unshift(e),r}return[]}var hr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Rl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Tf=class extends i_{snapshot;constructor(e,t){super(e),this.snapshot=t,l0(this,e)}toString(){return this.snapshot.toString()}};function w1(n,e){let t=e5(n,e),r=new Bt([new sa("",{})]),i=new Bt({}),s=new Bt({}),o=new Bt({}),a=new Bt(""),c=new Us(r,i,o,a,s,Ce,n,t.root);return c.snapshot=t.root,new Tf(new hr(c,[]),t)}function e5(n,e){let t={},r={},i={},o=new Rc([],t,i,"",r,Ce,n,null,{},e);return new Cf("",new hr(o,[]))}var Us=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(We(d=>d[Af]))??Ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(We(e=>Pc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(We(e=>Pc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function s_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&T1(i)&&(r.resolve[Af]=i.title),r}var Rc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Af]}constructor(e,t,r,i,s,o,a,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Cf=class extends i_{url;constructor(e,t){super(t),this.url=e,l0(this,t)}toString(){return b1(this._root)}};function l0(n,e){e.value._routerState=n,e.children.forEach(t=>l0(n,t))}function b1(n){let e=n.children.length>0?` { ${n.children.map(b1).join(", ")} } `:"";return`${n.value}${e}`}function QT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Gi(e.params,t.params)||n.paramsSubject.next(t.params),Az(e.url,t.url)||n.urlSubject.next(t.url),Gi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function r0(n,e){let t=Gi(n.params,e.params)&&xz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||r0(n.parent,e.parent))}function T1(n){return typeof n.title=="string"||n.title===null}var C1=new Z(""),Pf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ce;activateEvents=new It;deactivateEvents=new It;attachEvents=new It;detachEvents=new It;routerOutletData=gM();parentContexts=U(Ll);location=U(wc);changeDetector=U(Cc);inputBinder=U(u_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new i0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=zt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ji]})}return n})(),i0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Us?this.route:e===Ll?this.childContexts:e===C1?this.outletData:this.parent.get(e,t)}},u_=new Z("");var d0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ft({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&xe(0,"router-outlet")},dependencies:[Pf],encapsulation:2})}return n})();function h0(n){let e=n.children&&n.children.map(h0),t=e?se(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ce&&(t.component=d0),t}function t5(n,e,t){let r=Sf(n,e._root,t?t._root:void 0);return new Tf(r,e)}function Sf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=n5(n,e,t);return new hr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Sf(n,a)),o}}let r=r5(e.value),i=e.children.map(s=>Sf(n,s));return new hr(r,i)}}function n5(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Sf(n,r,i);return Sf(n,r)})}function r5(n){return new Us(new Bt(n.url),new Bt(n.params),new Bt(n.queryParams),new Bt(n.fragment),new Bt(n.data),n.outlet,n.component,n)}var Ol=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},S1="ngNavigationCancelingError";function o_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=aa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=D1(!1,xn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function D1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[S1]=!0,t.cancellationCode=e,t}function i5(n){return A1(n)&&aa(n.url)}function A1(n){return!!n&&n[S1]}var s0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),QT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Rl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Rl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Rl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Rl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new n_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new e_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(QT(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),QT(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},a_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Nl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function s5(n,e,t){let r=n._root,i=e?e._root:null;return _f(r,i,t,[r.value])}function o5(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Ew(n)?n:e.get(n):r}function _f(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Rl(e);return n.children.forEach(o=>{a5(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>If(a,t.getContext(o),i)),i}function a5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=c5(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new a_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_f(n,e,a?a.children:null,r,i):_f(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Nl(a.outlet.component,o))}else o&&If(e,a,i),i.canActivateChecks.push(new a_(r)),s.component?_f(n,null,a?a.children:null,r,i):_f(n,null,t,r,i);return i}function c5(n,e,t){if(typeof t=="function")return qt(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!Ac(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ac(n.url,e.url)||!Gi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!r0(n,e)||!Gi(n.queryParams,e.queryParams);default:return!r0(n,e)}}function If(n,e,t){let r=Rl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?If(o,e.children.getContext(s),t):If(o,null,t):If(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Nl(e.outlet.component,i)):t.canDeactivateChecks.push(new Nl(null,i)):t.canDeactivateChecks.push(new Nl(null,i))}function Nf(n){return typeof n=="function"}function u5(n){return typeof n=="boolean"}function l5(n){return n&&Nf(n.canLoad)}function d5(n){return n&&Nf(n.canActivate)}function h5(n){return n&&Nf(n.canActivateChild)}function f5(n){return n&&Nf(n.canDeactivate)}function p5(n){return n&&Nf(n.canMatch)}function R1(n){return n instanceof ws||n?.name==="EmptyError"}var jy=Symbol("INITIAL_VALUE");function Fl(){return zn(n=>ew(n.map(e=>e.pipe(yn(1),rw(jy)))).pipe(We(e=>{for(let t of e)if(t!==!0){if(t===jy)return jy;if(t===!1||m5(t))return t}return!0}),kt(e=>e!==jy),yn(1)))}function m5(n){return aa(n)||n instanceof Ol}function P1(n){return n.aborted?Ue(void 0).pipe(yn(1)):new be(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function N1(n){return vh(P1(n))}function g5(n){return Vn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?Ue(se(j({},e),{guardsResult:!0})):y5(s,t,r).pipe(Vn(o=>o&&u5(o)?_5(t,i,n):Ue(o)),We(o=>se(j({},e),{guardsResult:o})))})}function y5(n,e,t){return Ht(n).pipe(Vn(r=>b5(r.component,r.route,t,e)),Ts(r=>r!==!0,!0))}function _5(n,e,t){return Ht(e).pipe(ng(r=>il(E5(r.route.parent,t),v5(r.route,t),w5(n,r.path),I5(n,r.route))),Ts(r=>r!==!0,!0))}function v5(n,e){return n!==null&&e&&e(new t_(n)),Ue(!0)}function E5(n,e){return n!==null&&e&&e(new Zy(n)),Ue(!0)}function I5(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Ue(!0);let r=t.map(i=>yh(()=>{let s=e._environmentInjector,o=Vl(i,s),a=d5(o)?o.canActivate(e,n):qt(s,()=>o(e,n));return xc(a).pipe(Ts())}));return Ue(r).pipe(Fl())}function w5(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>o5(s)).filter(s=>s!==null).map(s=>yh(()=>{let o=s.guards.map(a=>{let c=s.node._environmentInjector,d=Vl(a,c),h=h5(d)?d.canActivateChild(t,n):qt(c,()=>d(t,n));return xc(h).pipe(Ts())});return Ue(o).pipe(Fl())}));return Ue(i).pipe(Fl())}function b5(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Ue(!0);let s=i.map(o=>{let a=e._environmentInjector,c=Vl(o,a),d=f5(c)?c.canDeactivate(n,e,t,r):qt(a,()=>c(n,e,t,r));return xc(d).pipe(Ts())});return Ue(s).pipe(Fl())}function T5(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Ue(!0);let o=s.map(a=>{let c=Vl(a,n),d=l5(c)?c.canLoad(e,t):qt(n,()=>c(e,t)),h=xc(d);return i?h.pipe(N1(i)):h});return Ue(o).pipe(Fl(),k1(r))}function k1(n){return WI(ki(e=>{if(typeof e!="boolean")throw o_(n,e)}),We(e=>e===!0))}function C5(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Ue(!0);let o=s.map(a=>{let c=Vl(a,n),d=p5(c)?c.canMatch(e,t):qt(n,()=>c(e,t));return xc(d).pipe(N1(i))});return Ue(o).pipe(Fl(),k1(r))}var Ls=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},Df=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function S5(n){throw new q(4e3,!1)}function D5(n){throw D1(!1,xn.GuardRejected)}var o0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ce])throw S5(`${e.redirectTo}`);i=i.children[Ce]}}async applyRedirectCommands(e,t,r,i,s){let o=await A5(t,i,s);if(o instanceof ui)throw new Df(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Df(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ui(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Qe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function A5(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:m,paramMap:y,queryParamMap:C}=e;return qy(xc(qt(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:m,paramMap:y,queryParamMap:C}))))}function R5(n,e){return n.providers&&!n._injector&&(n._injector=Yh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ci(n){return n.outlet||Ce}function P5(n,e){let t=n.filter(r=>ci(r)===e);return t.push(...n.filter(r=>ci(r)!==e)),t}var a0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N5(n,e,t,r,i,s){let o=x1(n,e,t);return o.matched?(r=R5(e,r),C5(r,e,t,i,s).pipe(We(a=>a===!0?o:j({},a0)))):Ue(o)}function x1(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},a0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||s1)(t,n,e);if(!i)return j({},a0);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?j(j({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function t1(n,e,t,r){return t.length>0&&M5(n,t,r)?{segmentGroup:new Qe(e,x5(r,new Qe(t,n.children))),slicedSegments:[]}:t.length===0&&O5(n,t,r)?{segmentGroup:new Qe(n.segments,k5(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Qe(n.segments,n.children),slicedSegments:t}}function k5(n,e,t,r){let i={};for(let s of t)if(l_(n,e,s)&&!r[ci(s)]){let o=new Qe([],{});i[ci(s)]=o}return j(j({},r),i)}function x5(n,e){let t={};t[Ce]=e;for(let r of n)if(r.path===""&&ci(r)!==Ce){let i=new Qe([],{});t[ci(r)]=i}return t}function M5(n,e,t){return t.some(r=>l_(n,e,r)&&ci(r)!==Ce)}function O5(n,e,t){return t.some(r=>l_(n,e,r))}function l_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function F5(n,e,t){return e.length===0&&!n.children[t]}var c0=class{};async function L5(n,e,t,r,i,s,o="emptyOnly",a){return new u0(n,e,t,r,i,o,s,a).recognize()}var V5=31,u0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new o0(this.urlSerializer,this.urlTree)}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}async recognize(){let e=t1(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new hr(r,t),s=new Cf("",i),o=g1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Rc([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ce,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ce,t),rootSnapshot:t}}catch(r){if(r instanceof Df)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ls?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof hr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=P5(t,c),m=await this.processSegmentGroup(e,h,d,c,i);o.push(...m)}let a=M1(o);return U5(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof Ls||R1(d))continue;throw d}if(F5(r,i,s))return new c0;throw new Ls(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(ci(r)!==o&&(o===Ce||!l_(i,s,r)))throw new Ls(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new Ls(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:m,remainingSegments:y}=x1(t,i,s);if(!c)throw new Ls(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>V5&&(this.allowRedirects=!1));let C=new Rc(s,d,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,n1(i),ci(i),i.component??i._loadedComponent??null,i,r1(i),e),R=s_(C,a,this.paramsInheritanceStrategy);if(C.params=Object.freeze(R.params),C.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,C,e),x=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,x.concat(y),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await qy(N5(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Ls(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:y}=a,C=new Rc(m,h,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,n1(r),ci(r),r.component??r._loadedComponent??null,r,r1(r),e),R=s_(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(R.params),C.data=Object.freeze(R.data);let{segmentGroup:P,slicedSegments:x}=t1(t,m,y,c);if(x.length===0&&P.hasChildren()){let J=await this.processChildren(d,c,P,C);return new hr(C,J)}if(c.length===0&&x.length===0)return new hr(C,[]);let $=ci(r)===s,W=await this.processSegment(d,c,P,x,$?Ce:s,!0,C);return new hr(C,W instanceof hr?[W]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let s=t._loadedNgModuleFactory;return s&&!t._loadedInjector&&(t._loadedInjector=s.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await qy(T5(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,t._loadedNgModuleFactory=s.factory,s}throw D5(t)}return{routes:[],injector:e}}};function U5(n){n.sort((e,t)=>e.value.outlet===Ce?-1:t.value.outlet===Ce?1:e.value.outlet.localeCompare(t.value.outlet))}function j5(n){let e=n.value.routeConfig;return e&&e.path===""}function M1(n){let e=[],t=new Set;for(let r of n){if(!j5(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=M1(r.children);e.push(new hr(r.value,i))}return e.filter(r=>!t.has(r))}function n1(n){return n.data||{}}function r1(n){return n.resolve||{}}function B5(n,e,t,r,i,s,o){return Vn(async a=>{let{state:c,tree:d}=await L5(n,e,t,r,a.extractedUrl,i,s,o);return se(j({},a),{targetSnapshot:c,urlAfterRedirects:d})})}function $5(n){return Vn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Ue(e);let i=new Set(r.map(a=>a.route)),s=new Set;for(let a of i)if(!s.has(a))for(let c of O1(a))s.add(c);let o=0;return Ht(s).pipe(ng(a=>i.has(a)?H5(a,t,n):(a.data=s_(a,a.parent,n).resolve,Ue(void 0))),ki(()=>o++),rg(1),Vn(a=>o===s.size?Ue(e):gn))})}function O1(n){let e=n.children.map(t=>O1(t)).flat();return[n,...e]}function H5(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!T1(r)&&(i[Af]=r.title),yh(()=>(n.data=s_(n,n.parent,t).resolve,q5(i,n,e).pipe(We(s=>(n._resolvedData=s,n.data=j(j({},n.data),s),null)))))}function q5(n,e,t){let r=JT(n);if(r.length===0)return Ue({});let i={};return Ht(r).pipe(Vn(s=>z5(n[s],e,t).pipe(Ts(),ki(o=>{if(o instanceof Ol)throw o_(new oa,o);i[s]=o}))),rg(1),We(()=>i),_h(s=>R1(s)?gn:ZI(s)))}function z5(n,e,t){let r=e._environmentInjector,i=Vl(n,r),s=i.resolve?i.resolve(e,t):qt(r,()=>i(e,t));return xc(s)}function i1(n){return zn(e=>{let t=n(e);return t?Ht(t).pipe(We(()=>e)):Ue(e)})}var f0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ce);return r}getResolvedTitleForRoute(t){return t.data[Af]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>U(F1),providedIn:"root"})}return n})(),F1=(()=>{class n extends f0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(QM))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ul=new Z("",{factory:()=>({})}),kf=new Z(""),L1=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=U(CT);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await a1(qt(t,()=>r.loadComponent())),o=await j1(U1(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await V1(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function V1(n,e,t,r){let i=await a1(qt(t,()=>n.loadChildren())),s=await j1(U1(i)),o;s instanceof yy||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1,h;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,h=o,c=a.get(kf,[],{optional:!0,self:!0}).flat()),{routes:c.map(h0),injector:a,factory:h}}function G5(n){return n&&typeof n=="object"&&"default"in n}function U1(n){return G5(n)?n.default:n}async function j1(n){return n}var d_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>U(W5),providedIn:"root"})}return n})(),W5=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),B1=new Z("");var K5=()=>{},$1=new Z(""),H1=(()=>{class n{currentNavigation=Ee(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ee(null);events=new vt;transitionAbortWithErrorSubject=new vt;configLoader=U(L1);environmentInjector=U(St);destroyRef=U(ur);urlSerializer=U(Rf);rootContexts=U(Ll);location=U(ia);inputBindingEnabled=U(u_,{optional:!0})!==null;titleStrategy=U(f0);options=U(Ul,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=U(d_);createViewTransition=U(B1,{optional:!0});navigationErrorHandler=U($1,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ue(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Jy(i)),r=i=>this.events.next(new Xy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;At(()=>{this.transitions?.next(se(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Bt(null),this.transitions.pipe(kt(r=>r!==null),zn(r=>{let i=!1,s=new AbortController,o=()=>!i&&this.currentTransition?.id===r.id;return Ue(r).pipe(zn(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",xn.SupersededByNewNavigation),gn;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?se(j({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload")return this.events.next(new Vs(a.id,this.urlSerializer.serialize(a.rawUrl),"",bf.IgnoredSameUrlNavigation)),a.resolve(!1),gn;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Ue(a).pipe(zn(m=>(this.events.next(new Nc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?gn:Promise.resolve(m))),B5(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),ki(m=>{r.targetSnapshot=m.targetSnapshot,r.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(C=>(C.finalUrl=m.urlAfterRedirects,C));let y=new kl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:m,extractedUrl:y,source:C,restoredState:R,extras:P}=a,x=new Nc(m,this.urlSerializer.serialize(y),C,R);this.events.next(x);let $=w1(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=se(j({},a),{targetSnapshot:$,urlAfterRedirects:y,extras:se(j({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(W=>(W.finalUrl=y,W)),Ue(r)}else return this.events.next(new Vs(a.id,this.urlSerializer.serialize(a.extractedUrl),"",bf.IgnoredByUrlHandlingStrategy)),a.resolve(!1),gn}),We(a=>{let c=new Wy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=se(j({},a),{guards:s5(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),g5(a=>this.events.next(a)),zn(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw o_(this.urlSerializer,a.guardsResult);let c=new Ky(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!o())return gn;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",xn.GuardRejected),gn;if(a.guards.canActivateChecks.length===0)return Ue(a);let d=new Qy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!o())return gn;let h=!1;return Ue(a).pipe($5(this.paramsInheritanceStrategy),ki({next:()=>{h=!0;let m=new Yy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)},complete:()=>{h||this.cancelNavigationTransition(a,"",xn.NoDataFromResolver)}}))}),i1(a=>{let c=h=>{let m=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let y=h._environmentInjector;m.push(this.configLoader.loadComponent(y,h.routeConfig).then(C=>{h.component=C}))}for(let y of h.children)m.push(...c(y));return m},d=c(a.targetSnapshot.root);return d.length===0?Ue(a):Ht(Promise.all(d).then(()=>a))}),i1(()=>this.afterPreactivation()),zn(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?Ht(d).pipe(We(()=>r)):Ue(r)}),yn(1),We(a=>{let c=t5(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=se(j({},a),{targetRouterState:c}),this.currentNavigation.update(d=>(d.targetRouterState=c,d)),this.events.next(new xl),o()&&(new s0(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),o()&&(i=!0,this.currentNavigation.update(d=>(d.abort=K5,d)),this.lastSuccessfulNavigation.set(At(this.currentNavigation)),this.events.next(new Wi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),vh(P1(s.signal).pipe(kt(()=>!i&&!r.targetRouterState),ki(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",xn.Aborted)}))),ki({complete:()=>{i=!0}}),vh(this.transitionAbortWithErrorSubject.pipe(ki(a=>{throw a}))),nw(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",xn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),_h(a=>{if(i=!0,this.destroyed)return r.resolve(!1),gn;if(A1(a))this.events.next(new kr(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),i5(a)?this.events.next(new Ml(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new kc(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=qt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Ol){let{message:h,cancellationCode:m}=o_(this.urlSerializer,d);this.events.next(new kr(r.id,this.urlSerializer.serialize(r.extractedUrl),h,m)),this.events.next(new Ml(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return gn}))}))}cancelNavigationTransition(t,r,i){let s=new kr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=At(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q5(n){return n!==Ef}var q1=new Z("");var z1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>U(Y5),providedIn:"root"})}return n})(),c_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},Y5=(()=>{class n extends c_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ec(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p0=(()=>{class n{urlSerializer=U(Rf);options=U(Ul,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=U(ia);urlHandlingStrategy=U(d_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ui;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ui?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=w1(null,U(St));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>U(J5),providedIn:"root"})}return n})(),J5=(()=>{class n extends p0{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Nc?this.updateStateMemento():t instanceof Vs?this.commitTransition(r):t instanceof kl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof xl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof kr&&!I1(t)?this.restoreHistory(r):t instanceof kc?this.restoreHistory(r,!0):t instanceof Wi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=j(j({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=j(j({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ec(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m0(n,e){n.events.pipe(kt(t=>t instanceof Wi||t instanceof kr||t instanceof kc||t instanceof Vs),We(t=>t instanceof Wi||t instanceof Vs?0:(t instanceof kr?t.code===xn.Redirect||t.code===xn.SupersededByNewNavigation:!1)?2:1),kt(t=>t!==2),yn(1)).subscribe(()=>{e()})}var G1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},W1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},li=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=U(dT);stateManager=U(p0);options=U(Ul,{optional:!0})||{};pendingTasks=U(ks);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=U(H1);urlSerializer=U(Rf);location=U(ia);urlHandlingStrategy=U(d_);injector=U(St);_events=new vt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=U(z1);injectorCleanup=U(q1,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=U(kf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!U(u_,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new tn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=At(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof kr&&r.code!==xn.Redirect&&r.code!==xn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Wi)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Ml){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Q5(i.source)},o);this.scheduleNavigation(a,Ef,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Zz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ef,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(lr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return At(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(h0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let y=i?i.snapshot:this.routerState.snapshot.root;m=y1(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return _1(m,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=aa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ef,null,r)}navigate(t,r={skipLocationChange:!1}){return X5(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(As(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},G1):r===!1?i=j({},W1):i=r,aa(t))return YM(this.currentUrlTree,t,i);let s=this.parseUrl(t);return YM(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((m,y)=>{a=m,c=y});let h=this.pendingTasks.add();return m0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X5(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}var h_=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ee(null);get href(){return At(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new vt;applicationErrorHandler=U(lr);options=U(Ul,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(U(new by("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof Wi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(aa(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:aa(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(he(li),he(Us),zh("tabindex"),he(Ms),he(ii),he(Al))};static \u0275dir=zt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&te("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Jh("href",i.reactiveHref(),Qb)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Sc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Sc],replaceUrl:[2,"replaceUrl","replaceUrl",Sc],routerLink:"routerLink"},features:[ji]})}return n})();var t9=new Z("");function g0(n,...e){return vn([{provide:kf,multi:!0,useValue:n},[],{provide:Us,useFactory:n9},{provide:vy,multi:!0,useFactory:r9},e.map(t=>t.\u0275providers)])}function n9(){return U(li).routerState.root}function r9(){let n=U(ht);return e=>{let t=n.get($i);if(e!==t.components[0])return;let r=n.get(li),i=n.get(i9);n.get(s9)===1&&r.initialNavigation(),n.get(o9,null,{optional:!0})?.setUpPreloading(),n.get(t9,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var i9=new Z("",{factory:()=>new vt}),s9=new Z("",{factory:()=>1});var o9=new Z("");var we=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(we||{}),xr="*";function y0(n,e){return{type:we.Trigger,name:n,definitions:e,options:{}}}function _0(n,e=null){return{type:we.Animate,styles:e,timings:n}}function K1(n,e=null){return{type:we.Sequence,steps:n,options:e}}function Oc(n){return{type:we.Style,styles:n,offset:null}}function v0(n,e,t=null){return{type:we.Transition,expr:n,animation:e,options:t}}function E0(n,e,t=null){return{type:we.Query,selector:n,animation:e,options:t}}function I0(n,e){return{type:we.Stagger,timings:n,animation:e}}var Ki=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Mc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},jl="!";function Q1(n){return new q(3e3,!1)}function a9(){return new q(3100,!1)}function c9(){return new q(3101,!1)}function u9(n){return new q(3001,!1)}function l9(n){return new q(3003,!1)}function d9(n){return new q(3004,!1)}function J1(n,e){return new q(3005,!1)}function X1(){return new q(3006,!1)}function Z1(){return new q(3007,!1)}function eO(n,e){return new q(3008,!1)}function tO(n){return new q(3002,!1)}function nO(n,e,t,r,i){return new q(3010,!1)}function rO(){return new q(3011,!1)}function iO(){return new q(3012,!1)}function sO(){return new q(3200,!1)}function oO(){return new q(3202,!1)}function aO(){return new q(3013,!1)}function cO(n){return new q(3014,!1)}function uO(n){return new q(3015,!1)}function lO(n){return new q(3016,!1)}function dO(n,e){return new q(3404,!1)}function h9(n){return new q(3502,!1)}function hO(n){return new q(3503,!1)}function fO(){return new q(3300,!1)}function pO(n){return new q(3504,!1)}function mO(n){return new q(3301,!1)}function gO(n,e){return new q(3302,!1)}function yO(n){return new q(3303,!1)}function _O(n,e){return new q(3400,!1)}function vO(n){return new q(3401,!1)}function EO(n){return new q(3402,!1)}function IO(n,e){return new q(3505,!1)}function js(n){switch(n.length){case 0:return new Ki;case 1:return n[0];default:return new Mc(n)}}function C0(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let d=c.get("offset"),h=d==o,m=h&&a||new Map;c.forEach((y,C)=>{let R=C,P=y;if(C!=="offset")switch(R=n.normalizePropertyName(R,i),P){case jl:P=t.get(C);break;case xr:P=r.get(C);break;default:P=n.normalizeStyleValue(C,R,P,i);break}m.set(R,P)}),h||s.push(m),a=m,o=d}),i.length)throw h9(i);return s}function f_(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&w0(t,"start",n)));break;case"done":n.onDone(()=>r(t&&w0(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&w0(t,"destroy",n)));break}}function w0(n,e,t){let r=t.totalTime,i=!!t.disabled,s=p_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function p_(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Qn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function S0(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var f9=typeof document>"u"?null:document.documentElement;function m_(n){let e=n.parentNode||n.host||null;return e===f9?null:e}function p9(n){return n.substring(1,6)=="ebkit"}var Fc=null,Y1=!1;function wO(n){Fc||(Fc=m9()||{},Y1=Fc.style?"WebkitAppearance"in Fc.style:!1);let e=!0;return Fc.style&&!p9(n)&&(e=n in Fc.style,!e&&Y1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Fc.style)),e}function m9(){return typeof document<"u"?document.body:null}function D0(n,e){for(;e;){if(e===n)return!0;e=m_(e)}return!1}function A0(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var g9=1e3,R0="{{",y9="}}",P0="ng-enter",g_="ng-leave",xf="ng-trigger",Mf=".ng-trigger",N0="ng-animating",y_=".ng-animating";function Qi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:b0(parseFloat(e[1]),e[2])}function b0(n,e){return e==="s"?n*g9:n}function Of(n,e,t){return n.hasOwnProperty("duration")?n:v9(n,e,t)}var _9=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function v9(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(_9);if(o===null)return e.push(Q1(n)),{duration:0,delay:0,easing:""};r=b0(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=b0(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(a9()),o=!0),i<0&&(e.push(c9()),o=!0),o&&e.splice(a,0,Q1(n))}return{duration:r,delay:i,easing:s}}function bO(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function di(n,e,t){e.forEach((r,i)=>{let s=__(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ca(n,e){e.forEach((t,r)=>{let i=__(r);n.style[i]=""})}function Bl(n){return Array.isArray(n)?n.length==1?n[0]:K1(n):n}function TO(n,e,t){let r=e.params||{},i=k0(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(u9(s))})}var T0=new RegExp(`${R0}\\s*(.+?)\\s*${y9}`,"g");function k0(n){let e=[];if(typeof n=="string"){let t;for(;t=T0.exec(n);)e.push(t[1]);T0.lastIndex=0}return e}function $l(n,e,t){let r=`${n}`,i=r.replace(T0,(s,o)=>{let a=e[o];return a==null&&(t.push(l9(o)),a=""),a.toString()});return i==r?n:i}var E9=/-+([a-z0-9])/g;function __(n){return n.replace(E9,(...e)=>e[1].toUpperCase())}function CO(n,e){return n===0||e===0}function SO(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,v_(n,a)))}}return e}function Yn(n,e,t){switch(e.type){case we.Trigger:return n.visitTrigger(e,t);case we.State:return n.visitState(e,t);case we.Transition:return n.visitTransition(e,t);case we.Sequence:return n.visitSequence(e,t);case we.Group:return n.visitGroup(e,t);case we.Animate:return n.visitAnimate(e,t);case we.Keyframes:return n.visitKeyframes(e,t);case we.Style:return n.visitStyle(e,t);case we.Reference:return n.visitReference(e,t);case we.AnimateChild:return n.visitAnimateChild(e,t);case we.AnimateRef:return n.visitAnimateRef(e,t);case we.Query:return n.visitQuery(e,t);case we.Stagger:return n.visitStagger(e,t);default:throw d9(e.type)}}function v_(n,e){return window.getComputedStyle(n)[e]}var Q0=(()=>{class n{validateStyleProperty(t){return wO(t)}containsElement(t,r){return D0(t,r)}getParentElement(t){return m_(t)}query(t,r,i){return A0(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Ki(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Vc=class{static NOOP=new Q0},Uc=class{};var I9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),T_=class extends Uc{normalizePropertyName(e,t){return __(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(I9.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(J1(e,r))}return o+s}};var C_="*";function w9(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>b9(r,t,e)):t.push(n),t}function b9(n,e,t){if(n[0]==":"){let c=T9(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(uO(n)),e;let i=r[1],s=r[2],o=r[3];e.push(DO(i,o));let a=i==C_&&o==C_;s[0]=="<"&&!a&&e.push(DO(o,i))}function T9(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(lO(n)),"* => *"}}var E_=new Set(["true","1"]),I_=new Set(["false","0"]);function DO(n,e){let t=E_.has(n)||I_.has(n),r=E_.has(e)||I_.has(e);return(i,s)=>{let o=n==C_||n==i,a=e==C_||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?E_.has(n):I_.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?E_.has(e):I_.has(e)),o&&a}}var LO=":self",C9=new RegExp(`s*${LO}s*,?`,"g");function VO(n,e,t,r){return new V0(n).build(e,t,r)}var AO="",V0=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new U0(t);return this._resetContextStyleTimingState(i),Yn(this,Bl(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=AO,e.collectedStyles=new Map,e.collectedStyles.set(AO,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(X1()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==we.State){let c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=d}else if(a.type==we.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(Z1())}),{type:we.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{k0(c).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&t.errors.push(eO(e.name,[...s.values()]))}return{type:we.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Yn(this,Bl(e.animation),t),i=w9(e.expr,t.errors);return{type:we.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Lc(e.options)}}visitSequence(e,t){return{type:we.Sequence,steps:e.steps.map(r=>Yn(this,r,t)),options:Lc(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Yn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:we.Group,steps:s,options:Lc(e.options)}}visitAnimate(e,t){let r=R9(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Oc({});if(s.type==we.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let d={};r.easing&&(d.easing=r.easing),o=Oc(d)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:we.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===xr?r.push(a):t.errors.push(tO(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(R0)>=0){s=!0;break}}}),{type:we.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let d=t.collectedStyles.get(t.currentQuerySelector),h=d.get(c),m=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(nO(c,h.startTime,h.endTime,s,i)),m=!1),s=h.startTime),m&&d.set(c,{startTime:s,endTime:i}),t.options&&TO(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:we.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(rO()),r;let i=1,s=0,o=[],a=!1,c=!1,d=0,h=e.steps.map($=>{let W=this._makeStyleAst($,t),J=W.offset!=null?W.offset:A9(W.styles),ue=0;return J!=null&&(s++,ue=W.offset=J),c=c||ue<0||ue>1,a=a||ue<d,d=ue,o.push(ue),W});c&&t.errors.push(iO()),a&&t.errors.push(sO());let m=e.steps.length,y=0;s>0&&s<m?t.errors.push(oO()):s==0&&(y=i/(m-1));let C=m-1,R=t.currentTime,P=t.currentAnimateTimings,x=P.duration;return h.forEach(($,W)=>{let J=y>0?W==C?1:y*W:o[W],ue=J*x;t.currentTime=R+P.delay+ue,P.duration=ue,this._validateStyleAst($,t),$.offset=J,r.styles.push($)}),r}visitReference(e,t){return{type:we.Reference,animation:Yn(this,Bl(e.animation),t),options:Lc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:we.AnimateChild,options:Lc(e.options)}}visitAnimateRef(e,t){return{type:we.AnimateRef,animation:this.visitReference(e.animation,t),options:Lc(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=S9(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Qn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Yn(this,Bl(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:we.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Lc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(aO());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Of(e.timings,t.errors,!0);return{type:we.Stagger,animation:Yn(this,Bl(e.animation),t),timings:r,options:null}}};function S9(n){let e=!!n.split(/\s*,\s*/).find(t=>t==LO);return e&&(n=n.replace(C9,"")),n=n.replace(/@\*/g,Mf).replace(/@\w+/g,t=>Mf+"-"+t.slice(1)).replace(/:animating/g,y_),[n,e]}function D9(n){return n?j({},n):null}var U0=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function A9(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function R9(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Of(n,e).duration;return x0(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=x0(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Of(t,e);return x0(i.duration,i.delay,i.easing)}function Lc(n){return n?(n=j({},n),n.params&&(n.params=D9(n.params))):n={},n}function x0(n,e,t){return{duration:n,delay:e,easing:t}}function Y0(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Lf=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},P9=1,N9=":enter",k9=new RegExp(N9,"g"),x9=":leave",M9=new RegExp(x9,"g");function UO(n,e,t,r,i,s=new Map,o=new Map,a,c,d=[]){return new j0().buildKeyframes(n,e,t,r,i,s,o,a,c,d)}var j0=class{buildKeyframes(e,t,r,i,s,o,a,c,d,h=[]){d=d||new Lf;let m=new B0(e,t,d,i,s,h,[]);m.options=c;let y=c.delay?Qi(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([o],null,m.errors,c),Yn(this,r,m);let C=m.timelines.filter(R=>R.containsAnimation());if(C.length&&a.size){let R;for(let P=C.length-1;P>=0;P--){let x=C[P];if(x.element===t){R=x;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([a],null,m.errors,c)}return C.length?C.map(R=>R.buildKeyframes()):[Y0(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Qi($l(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Qi(r.duration):null,a=r.delay!=null?Qi(r.delay):null;return o!==0&&e.forEach(c=>{let d=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Yn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==we.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=S_);let o=Qi(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Yn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Qi(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Yn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?$l(r,t.params,t.errors):r;return Of(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==we.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let d=c.offset||0;a.forwardTime(d*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Qi(i.delay):0;s&&(t.previousNode.type===we.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=S_);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,h)=>{t.currentQueryIndex=h;let m=t.createSubContext(e.options,d);s&&m.delayNextStep(s),d===t.element&&(c=m.currentTimeline),Yn(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let y=m.currentTimeline.currentTime;o=Math.max(o,y)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let m=h.currentTime;Yn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}},S_={},B0=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=S_;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new D_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Qi(r.duration)),r.delay!=null&&(i.delay=Qi(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=$l(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=S_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new $0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(k9,"."+this._enterClassName),e=e.replace(M9,"."+this._leaveClassName);let c=r!=1,d=this._driver.query(this.element,e,c);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!s&&a.length==0&&o.push(cO(t)),a}},D_=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=P9,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||xr),this._currentKeyframe.set(t,xr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=O9(e,this._globalTimelineStyles);for(let[a,c]of o){let d=$l(c,s,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??xr),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let d=new Map([...this._backFill,...a]);d.forEach((h,m)=>{h===jl?e.add(m):h===xr&&t.add(m)}),r||d.set("offset",c/this.duration),i.push(d)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Y0(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},$0=class extends D_{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let d=new Map(e[0]);d.set("offset",RO(a)),s.push(d);let h=e.length-1;for(let m=1;m<=h;m++){let y=new Map(e[m]),C=y.get("offset"),R=t+C*r;y.set("offset",RO(R/o)),s.push(y)}r=o,t=0,i="",e=s}return Y0(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function RO(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function O9(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,xr)}else for(let[s,o]of i)t.set(s,o)}),t}function PO(n,e,t,r,i,s,o,a,c,d,h,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:h,totalTime:m,errors:y}}var M0={},A_=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return F9(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,d,h){let m=[],y=this.ast.options&&this.ast.options.params||M0,C=a&&a.params||M0,R=this.buildStyles(r,C,m),P=c&&c.params||M0,x=this.buildStyles(i,P,m),$=new Set,W=new Map,J=new Map,ue=i==="void",ze={params:jO(P,y),delay:this.ast.options?.delay},ge=h?[]:UO(e,t,this.ast.animation,s,o,R,x,ze,d,m),w=0;return ge.forEach(_=>{w=Math.max(_.duration+_.delay,w)}),m.length?PO(t,this._triggerName,r,i,ue,R,x,[],[],W,J,w,m):(ge.forEach(_=>{let I=_.element,b=Qn(W,I,new Set);_.preStyleProps.forEach(A=>b.add(A));let T=Qn(J,I,new Set);_.postStyleProps.forEach(A=>T.add(A)),I!==t&&$.add(I)}),PO(t,this._triggerName,r,i,ue,R,x,ge,[...$.values()],W,J,w))}};function F9(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function jO(n,e){let t=j({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var H0=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=jO(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=$l(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function L9(n,e,t){return new q0(n,e,t)}var q0=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new H0(i.style,s,r))}),NO(this.states,"true","1"),NO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new A_(e,i,this.states))}),this.fallbackTransition=V9(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function V9(n,e,t){let r=[(o,a)=>!0],i={type:we.Sequence,steps:[],options:null},s={type:we.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new A_(n,s,e)}function NO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var U9=new Lf,z0=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=VO(this._driver,t,r,i);if(r.length)throw hO(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=C0(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=UO(this._driver,t,s,P0,g_,new Map,new Map,r,U9,i),o.forEach(h=>{let m=Qn(a,h.element,new Map);h.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(fO()),o=[]),i.length)throw pO(i);a.forEach((h,m)=>{h.forEach((y,C)=>{h.set(C,this._driver.computeStyle(m,C,xr))})});let c=o.map(h=>{let m=a.get(h.element);return this._buildPlayer(h,new Map,m)}),d=js(c);return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw mO(e);return t}listen(e,t,r,i){let s=p_(t,"","","");return f_(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},kO="ng-animate-queued",j9=".ng-animate-queued",O0="ng-animate-disabled",B9=".ng-animate-disabled",$9="ng-star-inserted",H9=".ng-star-inserted",q9=[],BO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},z9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hi="__ng_removed",Vf=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=W9(i),r){let s=e,{value:o}=s,a=jo(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ff="void",F0=new Vf(Ff),G0=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Mr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw gO(r,t);if(r==null||r.length==0)throw yO(t);if(!K9(r))throw _O(r,t);let s=Qn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=Qn(this._engine.statesByElement,e,new Map);return a.has(t)||(Mr(e,xf),Mr(e,xf+"-"+t),a.set(t,F0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw vO(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Uf(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Mr(e,xf),Mr(e,xf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),d=new Vf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=F0),!(d.value===Ff)&&c.value===d.value){if(!J9(c.params,d.params)){let P=[],x=s.matchStyles(c.value,c.params,P),$=s.matchStyles(d.value,d.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{ca(e,x),di(e,$)})}return}let y=Qn(this._engine.playersByElement,e,[]);y.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let C=s.matchTransition(c.value,d.value,e,d.params),R=!1;if(!C){if(!i)return;C=s.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:C,fromState:c,toState:d,player:o,isFallbackTransition:R}),R||(Mr(e,kO),o.onStart(()=>{Hl(e,kO)})),o.onDone(()=>{let P=this.players.indexOf(o);P>=0&&this.players.splice(P,1);let x=this._engine.playersByElement.get(e);if(x){let $=x.indexOf(o);$>=0&&x.splice($,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Mf,!0);r.forEach(i=>{if(i[hi])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,d)=>{if(o.set(d,c.value),this._triggers.has(d)){let h=this.trigger(e,d,Ff,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&js(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,d=r.get(o)||F0,h=new Vf(Ff),m=new Uf(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:d,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[hi];(!s||s===BO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Mr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=p_(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,f_(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},W0=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new G0(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let d=r.indexOf(c);r.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(w_(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!w_(t))return;let s=t[hi];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Mr(e,O0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hl(e,O0))}removeNode(e,t,r){if(w_(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[hi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return w_(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Mf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,y_,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return js(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[hi];if(t&&t.setForRemoval){if(e[hi]=BO,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(O0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,B9,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Mr(i,$9)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?js(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw EO(e)}_flushAnimations(e,t){let r=new Lf,i=[],s=new Map,o=[],a=new Map,c=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(re=>{h.add(re);let ie=this.driver.query(re,j9,!0);for(let oe=0;oe<ie.length;oe++)h.add(ie[oe])});let m=this.bodyNode,y=Array.from(this.statesByElement.keys()),C=OO(y,this.collectedEnterElements),R=new Map,P=0;C.forEach((re,ie)=>{let oe=P0+P++;R.set(ie,oe),re.forEach(Re=>Mr(Re,oe))});let x=[],$=new Set,W=new Set;for(let re=0;re<this.collectedLeaveElements.length;re++){let ie=this.collectedLeaveElements[re],oe=ie[hi];oe&&oe.setForRemoval&&(x.push(ie),$.add(ie),oe.hasAnimation?this.driver.query(ie,H9,!0).forEach(Re=>$.add(Re)):W.add(ie))}let J=new Map,ue=OO(y,Array.from($));ue.forEach((re,ie)=>{let oe=g_+P++;J.set(ie,oe),re.forEach(Re=>Mr(Re,oe))}),e.push(()=>{C.forEach((re,ie)=>{let oe=R.get(ie);re.forEach(Re=>Hl(Re,oe))}),ue.forEach((re,ie)=>{let oe=J.get(ie);re.forEach(Re=>Hl(Re,oe))}),x.forEach(re=>{this.processLeaveNode(re)})});let ze=[],ge=[];for(let re=this._namespaceList.length-1;re>=0;re--)this._namespaceList[re].drainQueuedTransitions(t).forEach(oe=>{let Re=oe.player,Tt=oe.element;if(ze.push(Re),this.collectedEnterElements.length){let gt=Tt[hi];if(gt&&gt.setForMove){if(gt.previousTriggersValues&&gt.previousTriggersValues.has(oe.triggerName)){let tr=gt.previousTriggersValues.get(oe.triggerName),pn=this.statesByElement.get(oe.element);if(pn&&pn.has(oe.triggerName)){let Er=pn.get(oe.triggerName);Er.value=tr,pn.set(oe.triggerName,Er)}}Re.destroy();return}}let Fn=!m||!this.driver.containsElement(m,Tt),_t=J.get(Tt),st=R.get(Tt),Je=this._buildInstruction(oe,r,st,_t,Fn);if(Je.errors&&Je.errors.length){ge.push(Je);return}if(Fn){Re.onStart(()=>ca(Tt,Je.fromStyles)),Re.onDestroy(()=>di(Tt,Je.toStyles)),i.push(Re);return}if(oe.isFallbackTransition){Re.onStart(()=>ca(Tt,Je.fromStyles)),Re.onDestroy(()=>di(Tt,Je.toStyles)),i.push(Re);return}let vr=[];Je.timelines.forEach(gt=>{gt.stretchStartingKeyframe=!0,this.disabledNodes.has(gt.element)||vr.push(gt)}),Je.timelines=vr,r.append(Tt,Je.timelines);let ka={instruction:Je,player:Re,element:Tt};o.push(ka),Je.queriedElements.forEach(gt=>Qn(a,gt,[]).push(Re)),Je.preStyleProps.forEach((gt,tr)=>{if(gt.size){let pn=c.get(tr);pn||c.set(tr,pn=new Set),gt.forEach((Er,Ci)=>pn.add(Ci))}}),Je.postStyleProps.forEach((gt,tr)=>{let pn=d.get(tr);pn||d.set(tr,pn=new Set),gt.forEach((Er,Ci)=>pn.add(Ci))})});if(ge.length){let re=[];ge.forEach(ie=>{re.push(IO(ie.triggerName,ie.errors))}),ze.forEach(ie=>ie.destroy()),this.reportError(re)}let w=new Map,_=new Map;o.forEach(re=>{let ie=re.element;r.has(ie)&&(_.set(ie,ie),this._beforeAnimationBuild(re.player.namespaceId,re.instruction,w))}),i.forEach(re=>{let ie=re.element;this._getPreviousPlayers(ie,!1,re.namespaceId,re.triggerName,null).forEach(Re=>{Qn(w,ie,[]).push(Re),Re.destroy()})});let I=x.filter(re=>FO(re,c,d)),b=new Map;MO(b,this.driver,W,d,xr).forEach(re=>{FO(re,c,d)&&I.push(re)});let A=new Map;C.forEach((re,ie)=>{MO(A,this.driver,new Set(re),c,jl)}),I.forEach(re=>{let ie=b.get(re),oe=A.get(re);b.set(re,new Map([...ie?.entries()??[],...oe?.entries()??[]]))});let E=[],lt=[],fn={};o.forEach(re=>{let{element:ie,player:oe,instruction:Re}=re;if(r.has(ie)){if(h.has(ie)){oe.onDestroy(()=>di(ie,Re.toStyles)),oe.disabled=!0,oe.overrideTotalTime(Re.totalTime),i.push(oe);return}let Tt=fn;if(_.size>1){let _t=ie,st=[];for(;_t=_t.parentNode;){let Je=_.get(_t);if(Je){Tt=Je;break}st.push(_t)}st.forEach(Je=>_.set(Je,Tt))}let Fn=this._buildAnimation(oe.namespaceId,Re,w,s,A,b);if(oe.setRealPlayer(Fn),Tt===fn)E.push(oe);else{let _t=this.playersByElement.get(Tt);_t&&_t.length&&(oe.parentPlayer=js(_t)),i.push(oe)}}else ca(ie,Re.fromStyles),oe.onDestroy(()=>di(ie,Re.toStyles)),lt.push(oe),h.has(ie)&&i.push(oe)}),lt.forEach(re=>{let ie=s.get(re.element);if(ie&&ie.length){let oe=js(ie);re.setRealPlayer(oe)}}),i.forEach(re=>{re.parentPlayer?re.syncPlayerEvents(re.parentPlayer):re.destroy()});for(let re=0;re<x.length;re++){let ie=x[re],oe=ie[hi];if(Hl(ie,g_),oe&&oe.hasAnimation)continue;let Re=[];if(a.size){let Fn=a.get(ie);Fn&&Fn.length&&Re.push(...Fn);let _t=this.driver.query(ie,y_,!0);for(let st=0;st<_t.length;st++){let Je=a.get(_t[st]);Je&&Je.length&&Re.push(...Je)}}let Tt=Re.filter(Fn=>!Fn.destroyed);Tt.length?Q9(this,ie,Tt):this.processLeaveNode(ie)}return x.length=0,E.forEach(re=>{this.players.push(re),re.onDone(()=>{re.destroy();let ie=this.players.indexOf(re);this.players.splice(ie,1)}),re.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Ff;a.forEach(d=>{d.queued||!c&&d.triggerName!=i||o.push(d)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let d=c.element,h=d!==s,m=Qn(r,d,[]);this._getPreviousPlayers(d,h,o,a,t.toState).forEach(C=>{let R=C.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),C.destroy(),m.push(C)})}ca(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,d=[],h=new Set,m=new Set,y=t.timelines.map(R=>{let P=R.element;h.add(P);let x=P[hi];if(x&&x.removedBeforeQueried)return new Ki(R.duration,R.delay);let $=P!==c,W=Y9((r.get(P)||q9).map(w=>w.getRealPlayer())).filter(w=>{let _=w;return _.element?_.element===P:!1}),J=s.get(P),ue=o.get(P),ze=C0(this._normalizer,R.keyframes,J,ue),ge=this._buildPlayer(R,ze,W);if(R.subTimeline&&i&&m.add(P),$){let w=new Uf(e,a,P);w.setRealPlayer(ge),d.push(w)}return ge});d.forEach(R=>{Qn(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>G9(this.playersByQueriedElement,R.element,R))}),h.forEach(R=>Mr(R,N0));let C=js(y);return C.onDestroy(()=>{h.forEach(R=>Hl(R,N0)),di(c,t.toStyles)}),m.forEach(R=>{Qn(i,R,[]).push(C)}),C}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ki(e.duration,e.delay)}},Uf=class{namespaceId;triggerName;element;_player=new Ki;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>f_(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Qn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function G9(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function W9(n){return n??null}function w_(n){return n&&n.nodeType===1}function K9(n){return n=="start"||n=="done"}function xO(n,e){let t=n.style.display;return n.style.display=e??"none",t}function MO(n,e,t,r,i){let s=[];t.forEach(c=>s.push(xO(c)));let o=[];r.forEach((c,d)=>{let h=new Map;c.forEach(m=>{let y=e.computeStyle(d,m,i);h.set(m,y),(!y||y.length==0)&&(d[hi]=z9,o.push(d))}),n.set(d,h)});let a=0;return t.forEach(c=>xO(c,s[a++])),o}function OO(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let d=a.parentNode;return t.has(d)?c=d:i.has(d)?c=r:c=o(d),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Mr(n,e){n.classList?.add(e)}function Hl(n,e){n.classList?.remove(e)}function Q9(n,e,t){js(t).onDone(()=>n.processLeaveNode(e))}function Y9(n){let e=[];return $O(n,e),e}function $O(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Mc?$O(r.players,e):e.push(r)}}function J9(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function FO(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var ql=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new W0(e.body,t,r),this._timelineEngine=new z0(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],d=[],h=VO(this._driver,s,c,d);if(c.length)throw dO(i,c);a=L9(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=S0(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=S0(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function X9(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=L0(e[0]),e.length>1&&(r=L0(e[e.length-1]))):e instanceof Map&&(t=L0(e)),t||r?new Z9(n,t,r):null}var Z9=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&di(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(di(this._element,this._initialStyles),this._endStyles&&(di(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ca(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ca(this._element,this._endStyles),this._endStyles=null),di(this._element,this._initialStyles),this._state=3)}}return n})();function L0(n){let e=null;return n.forEach((t,r)=>{eG(r)&&(e=e||new Map,e.set(r,t))}),e}function eG(n){return n==="display"||n==="position"}var R_=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:v_(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},P_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return D0(e,t)}getParentElement(e){return m_(e)}query(e,t,r){return A0(e,t,r)}computeStyle(e,t,r){return v_(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let d=new Map,h=o.filter(C=>C instanceof R_);CO(r,i)&&h.forEach(C=>{C.currentSnapshot.forEach((R,P)=>d.set(P,R))});let m=bO(t).map(C=>new Map(C));m=SO(e,m,d);let y=X9(e,m);return new R_(e,m,c,y)}};var b_="@",HO="@.disabled",N_=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==b_&&t==HO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},K0=class extends N_{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==b_?t.charAt(1)=="."&&t==HO?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==b_){let s=tG(e),o=t.slice(1),a="";return o.charAt(0)!=b_&&([o,a]=nG(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let d=c._data||-1;this.factory.scheduleListenerCallback(d,r,c)})}return this.delegate.listen(e,t,r,i)}};function tG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function nG(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var k_=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let d=this._rendererCache,h=d.get(i);if(!h){let m=()=>d.delete(i);h=new N_("",i,this.engine,m),d.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(s,o,e,d.name,d)};return t.data.animation.forEach(a),new K0(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var iG=(()=>{class n extends ql{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(me(Dt),me(Vc),me(Uc))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function sG(){return new T_}function oG(){return new k_(U(mf),U(ql),U(tt))}var qO=[{provide:Uc,useFactory:sG},{provide:ql,useClass:iG},{provide:xs,useFactory:oG}],Hve=[{provide:Vc,useClass:Q0},{provide:ay,useValue:"NoopAnimations"},...qO],aG=[{provide:Vc,useFactory:()=>new P_},{provide:ay,useFactory:()=>"BrowserAnimations"},...qO];function zO(){return Bi("NgEagerAnimations"),[...aG]}var X0=class{constructor(){}loadScript(e,t,r,i=null){if(typeof document<"u"&&!document.getElementById(e)){let s=document.createElement("script");s.async=!0,s.src=t,s.onload=r,i||(i=document.head),i.appendChild(s)}}},Z0=class{constructor(){}},GO=()=>typeof window.google?.accounts<"u",cG=()=>{if(!GO())throw new Error("Google Accounts API is undefined")},J0=()=>(cG(),window.google.accounts),uG={oneTapEnabled:!0},eC=(()=>{class n extends X0{static{this.PROVIDER_ID="GOOGLE"}constructor(t,r){super(),this.clientId=t,this.initOptions=r,this.changeUser=new It,this._socialUser=new Bt(null),this._accessToken=new Bt(null),this._receivedAccessToken=new It,this.initOptions=j(j({},uG),this.initOptions),this._socialUser.pipe(ig(1)).subscribe(this.changeUser),this._accessToken.pipe(ig(1)).subscribe(this._receivedAccessToken)}initialize(t,r){return new Promise((i,s)=>{try{this.loadScript(n.PROVIDER_ID,this.getGoogleLoginScriptSrc(r||""),()=>{if(GO()){if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:o})=>{let a=this.createSocialUser(o);this._socialUser.next(a)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(kt(o=>o===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(a=>a).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:a=>{a.error?this._accessToken.error({code:a.error,description:a.error_description,uri:a.error_uri}):this._accessToken.next(a.access_token)}})}i()}})}catch(o){s(o)}})}getLoginStatus(){return new Promise((t,r)=>{this._socialUser.value?t(this._socialUser.value):r(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,r)=>{J0().id.revoke(this._socialUser.value.id,i=>{i.error?r(i.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,r)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(yn(1)).subscribe(t)):this._socialUser.value?r("No token client was instantiated, you should specify some scopes."):r("You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,r)=>{this._tokenClient?this._accessToken.value?J0().oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):r("No access token to revoke"):r("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}async signOut(){J0().id.disableAutoSelect(),this._socialUser.next(null)}createSocialUser(t){let r=new Z0;r.idToken=t;let i=this.decodeJwt(t);return r.id=i.sub,r.name=i.name,r.email=i.email,r.photoUrl=i.picture,r.firstName=i.given_name,r.lastName=i.family_name,r}decodeJwt(t){let i=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(i).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}getGoogleLoginScriptSrc(t){return t?`https://accounts.google.com/gsi/client?hl=${t}`:"https://accounts.google.com/gsi/client"}}return n})();var tC="Service workers are disabled or not supported by this browser",zl=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new be(r=>r.error(new q(5601,!1)));else{let r=null,i=new vt;this.worker=new be(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let s=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(zn(()=>e.getRegistration().then(d=>{if(!d)throw new q(5601,!1);return d})));let o=new vt;this.events=o.asObservable();let a=d=>{let{data:h}=d;h?.type&&o.next(h)};e.addEventListener("message",a),t?.get($i,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(yn(1)).subscribe(i=>{i.postMessage(j({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(kt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(yn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(kt(i=>i.nonce===e),yn(1),We(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},lG=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new vt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=bs,this.notificationClicks=bs,this.notificationCloses=bs,this.pushSubscriptionChanges=bs,this.subscription=bs;return}this.messages=this.sw.eventsOfType("PUSH").pipe(We(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(We(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(We(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(We(i=>i.data)),this.pushManager=this.sw.registration.pipe(We(i=>i.pushManager));let r=this.pushManager.pipe(zn(i=>i.getSubscription()));this.subscription=new be(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(tC));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(zn(c=>c.subscribe(r)),yn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(tC));let t=r=>{if(r===null)throw new q(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new q(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(yn(1),zn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(me(zl))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),dG=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=bs,this.unrecoverable=bs;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(tC));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new q(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(me(zl))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),KO=new Z("");function hG(){let n=U(jf);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=U(KO),t=U(tt),r=U($i);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=WO(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),WO(+a[0])]);break;default:throw new q(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(As(5604,!1)))})})}function WO(n){return new Promise(e=>setTimeout(e,n))}function fG(){let n=U(jf),e=U(ht),t=!0;return new zl(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var jf=class{enabled;updateViaCache;type;scope;registrationStrategy};function QO(n,e={}){return vn([lG,dG,{provide:KO,useValue:n},{provide:jf,useValue:e},{provide:zl,useFactory:fG},_y(hG)])}var YO=()=>{};var ZO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pG=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,m=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(y=64)),r.push(t[h],t[m],t[y],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pG(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||m==null)throw new rC;let y=s<<2|a>>4;if(r.push(y),d!==64){let C=a<<4&240|d>>2;if(r.push(C),m!==64){let R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mG=function(n){let e=ZO(n);return x_.encodeByteArray(e,!0)},$f=function(n){return mG(n).replace(/\./g,"")},M_=function(n){try{return x_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var gG=()=>sC().__FIREBASE_DEFAULTS__,yG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_G=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&M_(n[1]);return e&&JSON.parse(e)},oC=()=>{try{return YO()||gG()||yG()||_G()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aC=n=>{var e,t;return(t=(e=oC())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},O_=n=>{let e=aC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cC=()=>{var n;return(n=oC())===null||n===void 0?void 0:n.config},uC=n=>{var e;return(e=oC())===null||e===void 0?void 0:e[`_${n}`]};var jc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Bs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gl(n){return(await fetch(n,{credentials:"include"})).ok}function F_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$f(JSON.stringify(t)),$f(JSON.stringify(o)),""].join(".")}var Bf={};function vG(){let n={prod:[],emulator:[]};for(let e of Object.keys(Bf))Bf[e]?n.emulator.push(e):n.prod.push(e);return n}function EG(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var JO=!1;function Wl(n,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||Bf[n]===e||Bf[n]||JO)return;Bf[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=vG().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,C){y.setAttribute("width","24"),y.setAttribute("id",C),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{JO=!0,o()},y}function h(y,C){y.setAttribute("id",C),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){let y=EG(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),P=t("learnmore"),x=document.getElementById(P)||document.createElement("a"),$=t("preprendIcon"),W=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let J=y.element;a(J),h(x,P);let ue=d();c(W,$),J.append(W,R,x,ue),document.body.appendChild(J)}s?(R.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function tF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iF(){let n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Hf(){try{return typeof indexedDB=="object"}catch{return!1}}function sF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var IG="FirebaseError",Bn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IG,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fi.prototype.create)}},fi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wG(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Bn(i,a,r)}};function wG(n,e){return n.replace(bG,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var bG=/\{\$([^}]+)}/g;function oF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(XO(s)&&XO(o)){if(!Yi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function XO(n){return n!==null&&typeof n=="object"}function qf(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aF(n,e){let t=new iC(n,e);return t.subscribe.bind(t)}var iC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TG(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nC),i.error===void 0&&(i.error=nC),i.complete===void 0&&(i.complete=nC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TG(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nC(){}var lEe=14400*1e3;function pi(n){return n&&n._delegate?n._delegate:n}var bn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Bc="[DEFAULT]";var lC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new jc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SG(e))try{this.getOrInitializeService({instanceIdentifier:Bc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Bc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bc){return this.instances.has(e)}getOptions(e=Bc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CG(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bc){return this.component?this.component.multipleInstances?e:Bc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CG(n){return n===Bc?void 0:n}function SG(n){return n.instantiationMode==="EAGER"}var L_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new lC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var DG=[],Ye=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ye||{}),AG={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},RG=Ye.INFO,PG={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},NG=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=PG[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ji=class{constructor(e){this.name=e,this._logLevel=RG,this._logHandler=NG,this._userLogHandler=null,DG.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}};var kG=(n,e)=>e.some(t=>n instanceof t),cF,uF;function xG(){return cF||(cF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MG(){return uF||(uF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lF=new WeakMap,hC=new WeakMap,dF=new WeakMap,dC=new WeakMap,pC=new WeakMap;function OG(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Xi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&lF.set(t,n)}).catch(()=>{}),pC.set(e,n),e}function FG(n){if(hC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});hC.set(n,e)}var fC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hF(n){fC=n(fC)}function LG(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(V_(this),e,...t);return dF.set(r,e.sort?e.sort():[e]),Xi(r)}:MG().includes(n)?function(...e){return n.apply(V_(this),e),Xi(lF.get(this))}:function(...e){return Xi(n.apply(V_(this),e))}}function VG(n){return typeof n=="function"?LG(n):(n instanceof IDBTransaction&&FG(n),kG(n,xG())?new Proxy(n,fC):n)}function Xi(n){if(n instanceof IDBRequest)return OG(n);if(dC.has(n))return dC.get(n);let e=VG(n);return e!==n&&(dC.set(n,e),pC.set(e,n)),e}var V_=n=>pC.get(n);function U_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Xi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Xi(o.result),c.oldVersion,c.newVersion,Xi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var UG=["get","getKey","getAll","getAllKeys","count"],jG=["put","add","delete","clear"],mC=new Map;function fF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mC.get(e))return mC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=jG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UG.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return mC.set(e,s),s}hF(n=>se(j({},n),{get:(e,t,r)=>fF(e,t)||n.get(e,t,r),has:(e,t)=>!!fF(e,t)||n.has(e,t)}));var yC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BG(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function BG(n){let e=n.getComponent();return e?.type==="VERSION"}var _C="@firebase/app",pF="0.13.2";var $s=new Ji("@firebase/app"),$G="@firebase/app-compat",HG="@firebase/analytics-compat",qG="@firebase/analytics",zG="@firebase/app-check-compat",GG="@firebase/app-check",WG="@firebase/auth",KG="@firebase/auth-compat",QG="@firebase/database",YG="@firebase/data-connect",JG="@firebase/database-compat",XG="@firebase/functions",ZG="@firebase/functions-compat",e8="@firebase/installations",t8="@firebase/installations-compat",n8="@firebase/messaging",r8="@firebase/messaging-compat",i8="@firebase/performance",s8="@firebase/performance-compat",o8="@firebase/remote-config",a8="@firebase/remote-config-compat",c8="@firebase/storage",u8="@firebase/storage-compat",l8="@firebase/firestore",d8="@firebase/ai",h8="@firebase/firestore-compat",f8="firebase",p8="11.10.0";var vC="[DEFAULT]",m8={[_C]:"fire-core",[$G]:"fire-core-compat",[qG]:"fire-analytics",[HG]:"fire-analytics-compat",[GG]:"fire-app-check",[zG]:"fire-app-check-compat",[WG]:"fire-auth",[KG]:"fire-auth-compat",[QG]:"fire-rtdb",[YG]:"fire-data-connect",[JG]:"fire-rtdb-compat",[XG]:"fire-fn",[ZG]:"fire-fn-compat",[e8]:"fire-iid",[t8]:"fire-iid-compat",[n8]:"fire-fcm",[r8]:"fire-fcm-compat",[i8]:"fire-perf",[s8]:"fire-perf-compat",[o8]:"fire-rc",[a8]:"fire-rc-compat",[c8]:"fire-gcs",[u8]:"fire-gcs-compat",[l8]:"fire-fst",[h8]:"fire-fst-compat",[d8]:"fire-vertex","fire-js":"fire-js",[f8]:"fire-js-all"};var zf=new Map,g8=new Map,EC=new Map;function mF(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pr(n){let e=n.name;if(EC.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;EC.set(e,n);for(let t of zf.values())mF(t,n);for(let t of g8.values())mF(t,n);return!0}function la(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n==null?!1:n.settings!==void 0}var y8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new fi("app","Firebase",y8);var IC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}};var Zi=p8;function TC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:vC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ua.create("bad-app-name",{appName:String(i)});if(t||(t=cC()),!t)throw ua.create("no-options");let s=zf.get(i);if(s){if(Yi(t,s.options)&&Yi(r,s.config))return s;throw ua.create("duplicate-app",{appName:i})}let o=new L_(i);for(let c of EC.values())o.addComponent(c);let a=new IC(t,r,o);return zf.set(i,a),a}function Hs(n=vC){let e=zf.get(n);if(!e&&n===vC&&cC())return TC();if(!e)throw ua.create("no-app",{appName:n});return e}function j_(){return Array.from(zf.values())}function mt(n,e,t){var r;let i=(r=m8[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(a.join(" "));return}pr(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _8="firebase-heartbeat-database",v8=1,Gf="firebase-heartbeat-store",gC=null;function vF(){return gC||(gC=U_(_8,v8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ua.create("idb-open",{originalErrorMessage:n.message})})),gC}async function E8(n){try{let t=(await vF()).transaction(Gf),r=await t.objectStore(Gf).get(EF(n));return await t.done,r}catch(e){if(e instanceof Bn)$s.warn(e.message);else{let t=ua.create("idb-get",{originalErrorMessage:e?.message});$s.warn(t.message)}}}async function gF(n,e){try{let r=(await vF()).transaction(Gf,"readwrite");await r.objectStore(Gf).put(e,EF(n)),await r.done}catch(t){if(t instanceof Bn)$s.warn(t.message);else{let r=ua.create("idb-set",{originalErrorMessage:t?.message});$s.warn(r.message)}}}function EF(n){return`${n.name}!${n.options.appId}`}var I8=1024,w8=30,wC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new bC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yF();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>w8){let o=T8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=yF(),{heartbeatsToSend:r,unsentEntries:i}=b8(this._heartbeatsCache.heartbeats),s=$f(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return $s.warn(t),""}}};function yF(){return new Date().toISOString().substring(0,10)}function b8(n,e=I8){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_F(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_F(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var bC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hf()?sF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await E8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return gF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return gF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function _F(n){return $f(JSON.stringify({version:2,heartbeats:n})).length}function T8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function C8(n){pr(new bn("platform-logger",e=>new yC(e),"PRIVATE")),pr(new bn("heartbeat",e=>new wC(e),"PRIVATE")),mt(_C,pF,n),mt(_C,pF,"esm2017"),mt("fire-js","")}C8("");var S8="firebase",D8="11.10.0";mt(S8,D8,"app");function B_(n,e){let t=e?.injector??U(ht),r=new el(1),i=pc(()=>{let s;try{s=n()}catch(o){At(()=>r.error(o));return}At(()=>r.next(s))},{injector:t,manualCleanup:!0});return t.get(ur).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function IF(n){n===void 0&&(n=U(ht));let e=n.get(yl);return t=>new be(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var es=new zo("ANGULARFIRE2_VERSION");function Hc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var da=(n,e)=>{let t=e?[e]:j_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Kl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Kl||{}),wF=rf()&&typeof Zone<"u"?Kl.WARN:Kl.SILENT;var $_=class{zone;delegate;constructor(e,t=JI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ts=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=U(tt);this.outsideAngular=t.runOutsideAngular(()=>new $_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new $_(typeof Zone>"u"?void 0:Zone.current,YI))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bF=!1;function A8(n,e){!bF&&(wF>Kl.SILENT||rf())&&(bF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),wF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function R8(n){let e=U(tt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function $c(n){let e=U(tt,{optional:!0});return e?e.run(()=>n()):n()}var P8=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),qt(t,()=>$c(()=>n.apply(void 0,r)))),qs=(n,e,t)=>(t||=e?Kl.WARN:Kl.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=U(ts),o=U(yl),a=U(St)}catch{return A8(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=$c(()=>o.add())),i[d]=P8(i[d],r,a));let c=R8(()=>n.apply(this,i));return e?c instanceof be?c.pipe(qo(s.outsideAngular),Ho(s.insideAngular),IF(a)):c instanceof Promise?$c(()=>{let d=o.add();return new Promise((h,m)=>{c.then(y=>qt(a,()=>$c(()=>h(y))),y=>qt(a,()=>$c(()=>m(y)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:$c(()=>c):c instanceof be?c.pipe(qo(s.outsideAngular),Ho(s.insideAngular)):$c(()=>c)});var mi=class{constructor(e){return e}},zs=class{constructor(){return j_()}};function N8(n){return n&&n.length===1?n[0]:new mi(Hs())}var CC=new Z("angularfire2._apps"),k8={provide:mi,useFactory:N8,deps:[[new an,CC]]},x8={provide:zs,deps:[[new an,CC]]};function M8(n){return(e,t)=>{let r=t.get(Ic);mt("angularfire",es.full,"core"),mt("angularfire",es.full,"app"),mt("angular",_w.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new mi(i)}}function TF(n,...e){return vn([k8,x8,{provide:CC,useFactory:M8(n),multi:!0,deps:[tt,ht,ts,...e]}])}var SC=qs(TC,!0);var O8=new Map,F8={activated:!1,tokenObservers:[]},L8={initialized:!1,enabled:!1};function gi(n){return O8.get(n)||Object.assign({},F8)}function AF(){return L8}var V8="https://content-firebaseappcheck.googleapis.com/v1";var U8="exchangeDebugToken",CF={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},uIe=1440*60*1e3;var RC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new jc,this.pending.promise.catch(t=>{}),await j8(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new jc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function j8(n){return new Promise(e=>{setTimeout(e,n)})}var B8={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ha=new fi("appCheck","AppCheck",B8);function RF(n){if(!gi(n).activated)throw ha.create("use-before-activation",{appName:n.name})}async function PF({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let m=await i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(m){throw ha.create("fetch-network-error",{originalErrorMessage:m?.message})}if(o.status!==200)throw ha.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(m){throw ha.create("fetch-parse-error",{originalErrorMessage:m?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ha.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function NF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${V8}/projects/${t}/apps/${r}:${U8}?key=${i}`,body:{debug_token:e}}}var $8="firebase-app-check-database",H8=1,PC="firebase-app-check-store";var H_=null;function q8(){return H_||(H_=new Promise((n,e)=>{try{let t=indexedDB.open($8,H8);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ha.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;r.oldVersion===0&&i.createObjectStore(PC,{keyPath:"compositeKey"})}}catch(t){e(ha.create("storage-open",{originalErrorMessage:t?.message}))}}),H_)}function z8(n,e){return G8(W8(n),e)}async function G8(n,e){let r=(await q8()).transaction(PC,"readwrite"),s=r.objectStore(PC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(ha.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function W8(n){return`${n.options.appId}-${n.name}`}var Wf=new Ji("@firebase/app-check");function DC(n,e){return Hf()?z8(n,e).catch(t=>{Wf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kF(){return AF().enabled}async function xF(){let n=AF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var K8={error:"UNKNOWN_ERROR"};function Q8(n){return x_.encodeString(JSON.stringify(n),!1)}async function NC(n,e=!1,t=!1){let r=n.app;RF(r);let i=gi(r),s=i.token,o;if(s&&!Kf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(Kf(d)?s=d:await DC(r,void 0))}if(!e&&s&&Kf(s))return{token:s.token};let a=!1;if(kF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=PF(NF(r,await xF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await DC(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Wf.warn(d.message):t&&Wf.error(d),AC(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await gi(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Wf.warn(d.message):t&&Wf.error(d),o=d}let c;return s?o?Kf(s)?c={token:s.token,internalError:o}:c=AC(o):(c={token:s.token},i.token=s,await DC(r,s)):c=AC(o),a&&Z8(r,c),c}async function Y8(n){let e=n.app;RF(e);let{provider:t}=gi(e);if(kF()){let r=await xF(),{token:i}=await PF(NF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function J8(n,e,t,r){let{app:i}=n,s=gi(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Kf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),SF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SF(n))}function MF(n,e){let t=gi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function SF(n){let{app:e}=n,t=gi(e),r=t.tokenRefresher;r||(r=X8(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function X8(n){let{app:e}=n;return new RC(async()=>{let t=gi(e),r;if(t.token?r=await NC(n,!0):r=await NC(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},CF.RETRIAL_MIN_WAIT,CF.RETRIAL_MAX_WAIT)}function Z8(n,e){let t=gi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Kf(n){return n.expireTimeMillis-Date.now()>0}function AC(n){return{token:Q8(K8),error:n}}var kC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gi(this.app);for(let t of e)MF(this.app,t.next);return Promise.resolve()}};function eW(n,e){return new kC(n,e)}function tW(n){return{getToken:e=>NC(n,e),getLimitedUseToken:()=>Y8(n),addTokenListener:e=>J8(n,"INTERNAL",e),removeTokenListener:e=>MF(n.app,e)}}var nW="@firebase/app-check",rW="0.10.1";var iW="app-check",DF="app-check-internal";function sW(){pr(new bn(iW,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return eW(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DF).initialize()})),pr(new bn(DF,n=>{let e=n.getProvider("app-check").getImmediate();return tW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mt(nW,rW)}sW();var oW="app-check";var fa=class{constructor(){return da(oW)}};var aW=["localhost","0.0.0.0","127.0.0.1"],IIe=typeof window<"u"&&aW.includes(window.location.hostname);var OF=()=>{};var VF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cW=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},UF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,m=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(y=64)),r.push(t[h],t[m],t[y],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cW(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||m==null)throw new MC;let y=s<<2|a>>4;if(r.push(y),d!==64){let C=a<<4&240|d>>2;if(r.push(C),m!==64){let R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},MC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uW=function(n){let e=VF(n);return UF.encodeByteArray(e,!0)},Yf=function(n){return uW(n).replace(/\./g,"")},z_=function(n){try{return UF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lW=()=>jF().__FIREBASE_DEFAULTS__,dW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hW=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&z_(n[1]);return e&&JSON.parse(e)},G_=()=>{try{return OF()||lW()||dW()||hW()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FC=n=>G_()?.emulatorHosts?.[n],BF=n=>{let e=FC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},LC=()=>G_()?.config,VC=n=>G_()?.[`_${n}`];var q_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function pa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W_(n){return(await fetch(n,{credentials:"include"})).ok}function $F(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=j({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yf(JSON.stringify(t)),Yf(JSON.stringify(o)),""].join(".")}var Qf={};function fW(){let n={prod:[],emulator:[]};for(let e of Object.keys(Qf))Qf[e]?n.emulator.push(e):n.prod.push(e);return n}function pW(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var FF=!1;function K_(n,e){if(typeof window>"u"||typeof document>"u"||!pa(window.location.host)||Qf[n]===e||Qf[n]||FF)return;Qf[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=fW().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,C){y.setAttribute("width","24"),y.setAttribute("id",C),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{FF=!0,o()},y}function h(y,C){y.setAttribute("id",C),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){let y=pW(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),P=t("learnmore"),x=document.getElementById(P)||document.createElement("a"),$=t("preprendIcon"),W=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let J=y.element;a(J),h(x,P);let ue=d();c(W,$),J.append(W,R,x,ue),document.body.appendChild(J)}s?(R.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function mW(){let n=G_()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WF(){let n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KF(){return!mW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UC(){try{return typeof indexedDB=="object"}catch{return!1}}function QF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var gW="FirebaseError",mr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gW,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gs.prototype.create)}},Gs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yW(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new mr(i,a,r)}};function yW(n,e){return n.replace(_W,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _W=/\{\$([^}]+)}/g;function YF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(LF(s)&&LF(o)){if(!yi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function LF(n){return n!==null&&typeof n=="object"}function Ql(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JF(n,e){let t=new OC(n,e);return t.subscribe.bind(t)}var OC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vW(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xC),i.error===void 0&&(i.error=xC),i.complete===void 0&&(i.complete=xC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vW(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xC(){}var SIe=14400*1e3;function Ft(n){return n&&n._delegate?n._delegate:n}var Or=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qc="[DEFAULT]";var jC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new q_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IW(e))try{this.getOrInitializeService({instanceIdentifier:qc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qc){return this.instances.has(e)}getOptions(e=qc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EW(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qc){return this.component?this.component.multipleInstances?e:qc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function EW(n){return n===qc?void 0:n}function IW(n){return n.instantiationMode==="EAGER"}var Q_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new jC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var wW=[],Me=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Me||{}),bW={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},TW=Me.INFO,CW={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},SW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=CW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ma=class{constructor(e){this.name=e,this._logLevel=TW,this._logHandler=SW,this._userLogHandler=null,wW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}};var $C=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DW(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function DW(n){return n.getComponent()?.type==="VERSION"}var HC="@firebase/app",XF="0.14.7";var Ws=new ma("@firebase/app"),AW="@firebase/app-compat",RW="@firebase/analytics-compat",PW="@firebase/analytics",NW="@firebase/app-check-compat",kW="@firebase/app-check",xW="@firebase/auth",MW="@firebase/auth-compat",OW="@firebase/database",FW="@firebase/data-connect",LW="@firebase/database-compat",VW="@firebase/functions",UW="@firebase/functions-compat",jW="@firebase/installations",BW="@firebase/installations-compat",$W="@firebase/messaging",HW="@firebase/messaging-compat",qW="@firebase/performance",zW="@firebase/performance-compat",GW="@firebase/remote-config",WW="@firebase/remote-config-compat",KW="@firebase/storage",QW="@firebase/storage-compat",YW="@firebase/firestore",JW="@firebase/ai",XW="@firebase/firestore-compat",ZW="firebase",e7="12.8.0";var qC="[DEFAULT]",t7={[HC]:"fire-core",[AW]:"fire-core-compat",[PW]:"fire-analytics",[RW]:"fire-analytics-compat",[kW]:"fire-app-check",[NW]:"fire-app-check-compat",[xW]:"fire-auth",[MW]:"fire-auth-compat",[OW]:"fire-rtdb",[FW]:"fire-data-connect",[LW]:"fire-rtdb-compat",[VW]:"fire-fn",[UW]:"fire-fn-compat",[jW]:"fire-iid",[BW]:"fire-iid-compat",[$W]:"fire-fcm",[HW]:"fire-fcm-compat",[qW]:"fire-perf",[zW]:"fire-perf-compat",[GW]:"fire-rc",[WW]:"fire-rc-compat",[KW]:"fire-gcs",[QW]:"fire-gcs-compat",[YW]:"fire-fst",[XW]:"fire-fst-compat",[JW]:"fire-vertex","fire-js":"fire-js",[ZW]:"fire-js-all"};var Y_=new Map,n7=new Map,zC=new Map;function ZF(n,e){try{n.container.addComponent(e)}catch(t){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ya(n){let e=n.name;if(zC.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;zC.set(e,n);for(let t of Y_.values())ZF(t,n);for(let t of n7.values())ZF(t,n);return!0}function Xf(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gr(n){return n==null?!1:n.settings!==void 0}var r7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ga=new Gs("app","Firebase",r7);var GC=class{constructor(e,t,r){this._isDeleted=!1,this._options=j({},e),this._config=j({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ga.create("app-deleted",{appName:this._name})}};var _a=e7;function Ks(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=j({name:qC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ga.create("bad-app-name",{appName:String(i)});if(t||(t=LC()),!t)throw ga.create("no-options");let s=Y_.get(i);if(s){if(yi(t,s.options)&&yi(r,s.config))return s;throw ga.create("duplicate-app",{appName:i})}let o=new Q_(i);for(let c of zC.values())o.addComponent(c);let a=new GC(t,r,o);return Y_.set(i,a),a}function Fr(n=qC){let e=Y_.get(n);if(!e&&n===qC&&LC())return Ks();if(!e)throw ga.create("no-app",{appName:n});return e}function _i(n,e,t){let r=t7[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(o.join(" "));return}ya(new Or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var i7="firebase-heartbeat-database",s7=1,Jf="firebase-heartbeat-store",BC=null;function rL(){return BC||(BC=U_(i7,s7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Jf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ga.create("idb-open",{originalErrorMessage:n.message})})),BC}async function o7(n){try{let t=(await rL()).transaction(Jf),r=await t.objectStore(Jf).get(iL(n));return await t.done,r}catch(e){if(e instanceof mr)Ws.warn(e.message);else{let t=ga.create("idb-get",{originalErrorMessage:e?.message});Ws.warn(t.message)}}}async function eL(n,e){try{let r=(await rL()).transaction(Jf,"readwrite");await r.objectStore(Jf).put(e,iL(n)),await r.done}catch(t){if(t instanceof mr)Ws.warn(t.message);else{let r=ga.create("idb-set",{originalErrorMessage:t?.message});Ws.warn(r.message)}}}function iL(n){return`${n.name}!${n.options.appId}`}var a7=1024,c7=30,WC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new KC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=tL();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>c7){let i=l7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ws.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=tL(),{heartbeatsToSend:t,unsentEntries:r}=u7(this._heartbeatsCache.heartbeats),i=Yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ws.warn(e),""}}};function tL(){return new Date().toISOString().substring(0,10)}function u7(n,e=a7){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nL(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),nL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var KC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UC()?QF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await o7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return eL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return eL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function nL(n){return Yf(JSON.stringify({version:2,heartbeats:n})).length}function l7(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function d7(n){ya(new Or("platform-logger",e=>new $C(e),"PRIVATE")),ya(new Or("heartbeat",e=>new WC(e),"PRIVATE")),_i(HC,XF,n),_i(HC,XF,"esm2020"),_i("fire-js","")}d7("");function vL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var EL=vL,IL=new Gs("auth","Firebase",vL());var nv=new ma("@firebase/auth");function h7(n,...e){nv.logLevel<=Me.WARN&&nv.warn(`Auth (${_a}): ${n}`,...e)}function X_(n,...e){nv.logLevel<=Me.ERROR&&nv.error(`Auth (${_a}): ${n}`,...e)}function rs(n,...e){throw hS(n,...e)}function vi(n,...e){return hS(n,...e)}function dS(n,e,t){let r=se(j({},EL()),{[e]:t});return new Gs("auth","Firebase",r).create(e,{appName:n.name})}function zc(n){return dS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function f7(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&rs(n,"argument-error"),dS(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return IL.create(n,...e)}function ve(n,e,...t){if(!n)throw hS(e,...t)}function Qs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw X_(e),new Error(e)}function Js(n,e){n||Qs(e)}function JC(){return typeof self<"u"&&self.location?.href||""}function p7(){return sL()==="http:"||sL()==="https:"}function sL(){return typeof self<"u"&&self.location?.protocol||null}function m7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p7()||zF()||"connection"in navigator)?navigator.onLine:!0}function g7(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Gc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Js(t>e,"Short delay should be less than long delay!"),this.isMobile=HF()||GF()}get(){return m7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fS(n,e){Js(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var rv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var y7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var _7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v7=new Gc(3e4,6e4);function pS(n,e){return n.tenantId&&!e.tenantId?se(j({},e),{tenantId:n.tenantId}):e}async function Jl(n,e,t,r,i={}){return wL(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Ql(j({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=j({method:e,headers:c},s);return qF()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&pa(n.emulatorConfig.host)&&(d.credentials="include"),rv.fetch()(await bL(n,n.config.apiHost,t,a),d)})}async function wL(n,e,t){n._canInitEmulator=!1;let r=j(j({},y7),e);try{let i=new XC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw J_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw J_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw J_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw J_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw dS(n,h,d);rs(n,h)}}catch(i){if(i instanceof mr)throw i;rs(n,"network-request-failed",{message:String(i)})}}async function E7(n,e,t,r,i={}){let s=await Jl(n,e,t,r,i);return"mfaPendingCredential"in s&&rs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function bL(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?fS(n.config,i):`${n.config.apiScheme}://${i}`;return _7.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var XC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vi(this.auth,"network-request-failed")),v7.get())})}};function J_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=vi(n,e,r);return i.customData._tokenResponse=t,i}async function I7(n,e){return Jl(n,"POST","/v1/accounts:delete",e)}async function iv(n,e){return Jl(n,"POST","/v1/accounts:lookup",e)}function Zf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TL(n,e=!1){let t=Ft(n),r=await t.getIdToken(e),i=mS(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Zf(QC(i.auth_time)),issuedAtTime:Zf(QC(i.iat)),expirationTime:Zf(QC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function QC(n){return Number(n)*1e3}function mS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return X_("JWT malformed, contained fewer than 3 sections"),null;try{let i=z_(t);return i?JSON.parse(i):(X_("Failed to decode base64 JWT payload"),null)}catch(i){return X_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oL(n){let e=mS(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof mr&&w7(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function w7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ZC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var np=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zf(this.lastLoginAt),this.creationTime=Zf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function sv(n){let e=n.auth,t=await n.getIdToken(),r=await tp(n,iv(e,{idToken:t}));ve(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?SL(i.providerUserInfo):[],o=b7(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new np(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function CL(n){let e=Ft(n);await sv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SL(n){return n.map(r=>{var i=r,{providerId:e}=i,t=jo(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function T7(n,e){let t=await wL(n,{},async()=>{let r=Ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await bL(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&pa(n.emulatorConfig.host)&&(c.credentials="include"),rv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function C7(n,e){return Jl(n,"POST","/v2/accounts:revokeToken",pS(n,e))}var ep=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=oL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await T7(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ve(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Qs("not implemented")}};function va(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ea=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=jo(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new np(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await tp(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TL(this,e)}reload(){return CL(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>j({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(se(j({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(zc(this.auth));let e=await this.getIdToken();return await tp(this,I7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return se(j({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>j({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:C,providerData:R,stsTokenManager:P}=t;ve(m&&P,e,"internal-error");let x=ep.fromJSON(this.name,P);ve(typeof m=="string",e,"internal-error"),va(r,e.name),va(i,e.name),ve(typeof y=="boolean",e,"internal-error"),ve(typeof C=="boolean",e,"internal-error"),va(s,e.name),va(o,e.name),va(a,e.name),va(c,e.name),va(d,e.name),va(h,e.name);let $=new n({uid:m,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:C,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&($.providerData=R.map(W=>j({},W))),c&&($._redirectEventId=c),$}static async _fromIdTokenResponse(e,t,r=!1){let i=new ep;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?SL(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ep;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new np(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var aL=new Map;function Ys(n){Js(n instanceof Function,"Expected a class definition");let e=aL.get(n);return e?(Js(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aL.set(n,e),e)}var S7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),eS=S7;function Z_(n,e,t){return`firebase:${n}:${e}:${t}`}var ov=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Z_(this.userKey,i.apiKey,s),this.fullPersistenceKey=Z_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await iv(this.auth,{idToken:e}).catch(()=>{});return t?Ea._fromGetAccountInfoResponse(this.auth,t,e):null}return Ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Ys(eS),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Ys(eS),o=Z_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let m;if(typeof h=="string"){let y=await iv(e,{idToken:h}).catch(()=>{});if(!y)break;m=await Ea._fromGetAccountInfoResponse(e,y,h)}else m=Ea._fromJSON(e,h);d!==s&&(a=m),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function cL(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kL(e))return"Blackberry";if(xL(e))return"Webos";if(AL(e))return"Safari";if((e.includes("chrome/")||RL(e))&&!e.includes("edge/"))return"Chrome";if(NL(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function DL(n=un()){return/firefox\//i.test(n)}function AL(n=un()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RL(n=un()){return/crios\//i.test(n)}function PL(n=un()){return/iemobile/i.test(n)}function NL(n=un()){return/android/i.test(n)}function kL(n=un()){return/blackberry/i.test(n)}function xL(n=un()){return/webos/i.test(n)}function gS(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D7(n=un()){return gS(n)&&!!window.navigator?.standalone}function A7(){return WF()&&document.documentMode===10}function ML(n=un()){return gS(n)||NL(n)||xL(n)||kL(n)||/windows phone/i.test(n)||PL(n)}function OL(n,e=[]){let t;switch(n){case"Browser":t=cL(un());break;case"Worker":t=`${cL(un())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${r}`}var tS=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function R7(n,e={}){return Jl(n,"GET","/v2/passwordPolicy",pS(n,e))}var P7=6,nS=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??P7,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var rS=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new av(this),this.idTokenSubscription=new av(this),this.beforeStateQueue=new tS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ys(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ov.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await iv(this,{idToken:e}),r=await Ea._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(zc(this));let t=e?Ft(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(zc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(zc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await R7(this),t=new nS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await C7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ys(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await ov.create(this,[Ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&h7(`Error while retrieving App Check token: ${e.error}`),e?.token}};function mv(n){return Ft(n)}var av=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=JF(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N7(n){yS=n}function k7(n){return yS.loadJS(n)}function x7(){return yS.gapiScript}function FL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function LL(n,e){let t=Xf(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(yi(s,e??{}))return i;rs(i,"already-initialized")}return t.initialize({options:e})}function M7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ys);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function VL(n,e,t){let r=mv(n);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=UL(e),{host:o,port:a}=O7(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(yi(d,r.config.emulator)&&yi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,pa(o)?(W_(`${s}//${o}${c}`),K_("Auth",!0)):i||F7()}function UL(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function O7(n){let e=UL(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:uL(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:uL(o)}}}function uL(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function F7(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,t){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}};async function Yl(n,e){return E7(n,"POST","/v1/accounts:signInWithIdp",pS(n,e))}var L7="http://localhost",cv=class n extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,s=jo(a,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Yl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Yl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Yl(e,t)}buildRequest(){let e={requestUri:L7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ql(t)}return e}};var ip=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var uv=class extends ip{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var _S=(()=>{class n extends uv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return cv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var sp=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Ea._fromIdTokenResponse(e,r,i),o=lL(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=lL(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function lL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var iS=class n extends mr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function jL(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?iS._fromErrorAndOperation(n,s,e,r):s})}async function V7(n,e,t=!1){let r=await tp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return sp._forOperation(n,"link",r)}async function U7(n,e,t=!1){let{auth:r}=n;if(gr(r.app))return Promise.reject(zc(r));let i="reauthenticate";try{let s=await tp(n,jL(r,i,e,n),t);ve(s.idToken,r,"internal-error");let o=mS(s.idToken);ve(o,r,"internal-error");let{sub:a}=o;return ve(n.uid===a,r,"user-mismatch"),sp._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&rs(r,"user-mismatch"),s}}async function j7(n,e,t=!1){if(gr(n.app))return Promise.reject(zc(n));let r="signIn",i=await jL(n,r,e),s=await sp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function BL(n,e,t,r){return Ft(n).onIdTokenChanged(e,t,r)}function $L(n,e,t){return Ft(n).beforeAuthStateChanged(e,t)}function gv(n,e,t,r){return Ft(n).onAuthStateChanged(e,t,r)}function vS(n){return Ft(n).signOut()}var lv="__sak";var dv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lv,"1"),this.storage.removeItem(lv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var B7=1e3,$7=10,H7=(()=>{class n extends dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ML(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);A7()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,$7):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},B7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),HL=H7;var q7=(()=>{class n extends dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),ES=q7;function z7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var G7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await z7(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function IS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var sS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=IS("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ns(){return window}function W7(n){ns().location.href=n}function qL(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function K7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q7(){return navigator?.serviceWorker?.controller||null}function Y7(){return qL()?self:null}var zL="firebaseLocalStorageDb",J7=1,hv="firebaseLocalStorage",GL="fbase_key",Wc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function yv(n,e){return n.transaction([hv],e?"readwrite":"readonly").objectStore(hv)}function X7(){let n=indexedDB.deleteDatabase(zL);return new Wc(n).toPromise()}function oS(){let n=indexedDB.open(zL,J7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(hv,{keyPath:GL})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(hv)?e(r):(r.close(),await X7(),e(await oS()))})})}async function dL(n,e,t){let r=yv(n,!0).put({[GL]:e,value:t});return new Wc(r).toPromise()}async function Z7(n,e){let t=yv(n,!1).get(e),r=await new Wc(t).toPromise();return r===void 0?null:r.value}function hL(n,e){let t=yv(n,!0).delete(e);return new Wc(t).toPromise()}var eK=800,tK=3,nK=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oS(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>tK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=G7._getInstance(Y7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await K7(),!this.activeServiceWorker)return;this.sender=new sS(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Q7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await oS();return await dL(t,lv,"1"),await hL(t,lv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>dL(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Z7(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hL(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=yv(s,!1).getAll();return new Wc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),WL=nK;var QIe=FL("rcb"),YIe=new Gc(3e4,6e4);function KL(n,e){return e?Ys(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var op=class extends rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function rK(n){return j7(n.auth,new op(n),n.bypassAuthState)}function iK(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),U7(t,new op(n),n.bypassAuthState)}async function sK(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),V7(t,new op(n),n.bypassAuthState)}var fv=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rK;case"linkViaPopup":case"linkViaRedirect":return sK;case"reauthViaPopup":case"reauthViaRedirect":return iK;default:rs(this.auth,"internal-error")}}resolve(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var oK=new Gc(2e3,1e4);async function wS(n,e,t){if(gr(n.app))return Promise.reject(vi(n,"operation-not-supported-in-this-environment"));let r=mv(n);f7(n,e,ip);let i=KL(r,t);return new aK(r,"signInViaPopup",e,i).executeNotNull()}var aK=(()=>{class n extends fv{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return ve(t,this.auth,"internal-error"),t}async onExecution(){Js(this.filter.length===1,"Popup operations only handle one event");let t=IS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oK.get())};t()}}n.currentPopupAction=null;return n})(),cK="pendingRedirect",ev=new Map,aS=class extends fv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ev.get(this.auth._key());if(!e){try{let r=await uK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ev.set(this.auth._key(),e)}return this.bypassAuthState||ev.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function uK(n,e){let t=hK(e),r=dK(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function lK(n,e){ev.set(n._key(),e)}function dK(n){return Ys(n._redirectPersistence)}function hK(n){return Z_(cK,n.config.apiKey,n.name)}async function fK(n,e,t=!1){if(gr(n.app))return Promise.reject(zc(n));let r=mv(n),i=KL(r,e),o=await new aS(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var pK=600*1e3,cS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mK(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!QL(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(vi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pK&&this.cachedEventUids.clear(),this.cachedEventUids.has(fL(e))}saveEventToCache(e){this.cachedEventUids.add(fL(e)),this.lastProcessedEventTime=Date.now()}};function fL(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QL({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QL(n);default:return!1}}async function gK(n,e={}){return Jl(n,"GET","/v1/projects",e)}var yK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_K=/^https?/;async function vK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await gK(n);for(let t of e)try{if(EK(t))return}catch{}rs(n,"unauthorized-domain")}function EK(n){let e=JC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!_K.test(t))return!1;if(yK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var IK=new Gc(3e4,6e4);function pL(){let n=ns().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wK(n){return new Promise((e,t)=>{function r(){pL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pL(),t(vi(n,"network-request-failed"))},timeout:IK.get()})}if(ns().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ns().gapi?.load)r();else{let i=FL("iframefcb");return ns()[i]=()=>{gapi.load?r():t(vi(n,"network-request-failed"))},k7(`${x7()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw tv=null,e})}var tv=null;function bK(n){return tv=tv||wK(n),tv}var TK=new Gc(5e3,15e3),CK="__/auth/iframe",SK="emulator/auth/iframe",DK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RK(n){let e=n.config;ve(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?fS(e,SK):`https://${n.config.authDomain}/${CK}`,r={apiKey:e.apiKey,appName:n.name,v:_a},i=AK.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ql(r).slice(1)}`}async function PK(n){let e=await bK(n),t=ns().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:RK(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=vi(n,"network-request-failed"),a=ns().setTimeout(()=>{s(o)},TK.get());function c(){ns().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var NK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kK=500,xK=600,MK="_blank",OK="http://localhost",pv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function FK(n,e,t,r=kK,i=xK){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=se(j({},NK),{width:r.toString(),height:i.toString(),top:s,left:o}),d=un().toLowerCase();t&&(a=RL(d)?MK:t),DL(d)&&(e=e||OK,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[C,R])=>`${y}${C}=${R},`,"");if(D7(d)&&a!=="_self")return LK(e||"",a),new pv(null);let m=window.open(e||"",a,h);ve(m,n,"popup-blocked");try{m.focus()}catch{}return new pv(m)}function LK(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var UK="__/auth/handler",jK="emulator/auth/handler",BK=encodeURIComponent("fac");async function mL(n,e,t,r,i,s){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_a,eventId:i};if(e instanceof ip){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",YF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof uv){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${BK}=${encodeURIComponent(c)}`:"";return`${$K(n)}?${Ql(a).slice(1)}${d}`}function $K({config:n}){return n.emulator?fS(n,jK):`https://${n.authDomain}/${UK}`}var YC="webStorageSupport",uS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ES,this._completeRedirectFn=fK,this._overrideRedirectResult=lK}async _openPopup(e,t,r,i){Js(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=await mL(e,t,r,JC(),i);return FK(e,s,IS())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await mL(e,t,r,JC(),i);return W7(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Js(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await PK(e),r=new cS(e);return t.register("authEvent",i=>(ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(YC,{type:YC},i=>{let s=i?.[0]?.[YC];s!==void 0&&t(!!s),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ML()||AL()||gS()}},YL=uS;var gL="@firebase/auth",yL="1.12.0";var lS=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function HK(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qK(n){ya(new Or("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OL(n)},d=new rS(r,i,s,c);return M7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ya(new Or("auth-internal",e=>{let t=mv(e.getProvider("auth").getImmediate());return(r=>new lS(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(gL,yL,HK(n)),_i(gL,yL,"esm2020")}var zK=300,GK=VC("authIdTokenMaxAge")||zK,_L=null,WK=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>GK)return;let i=t?.token;_L!==i&&(_L=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bS(n=Fr()){let e=Xf(n,"auth");if(e.isInitialized())return e.getImmediate();let t=LL(n,{popupRedirectResolver:YL,persistence:[WL,HL,ES]}),r=VC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=WK(s.toString());$L(t,o,()=>o(t.currentUser)),BL(t,a=>o(a))}}let i=FC("auth");return i&&VL(t,`http://${i}`),t}function KK(){return document.getElementsByTagName("head")?.[0]??document}N7({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=vi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",KK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qK("Browser");function dV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hV=dV,fV=new fi("auth","Firebase",dV());var bv=new Ji("@firebase/auth");function QK(n,...e){bv.logLevel<=Ye.WARN&&bv.warn(`Auth (${Zi}): ${n}`,...e)}function vv(n,...e){bv.logLevel<=Ye.ERROR&&bv.error(`Auth (${Zi}): ${n}`,...e)}function ba(n,...e){throw HS(n,...e)}function Qc(n,...e){return HS(n,...e)}function pV(n,e,t){let r=Object.assign(Object.assign({},hV()),{[e]:t});return new fi("auth","Firebase",r).create(e,{appName:n.name})}function Kc(n){return pV(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fV.create(n,...e)}function Ie(n,e,...t){if(!n)throw HS(e,...t)}function Xs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw vv(e),new Error(e)}function Ta(n,e){n||Xs(e)}function DS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function YK(){return JL()==="http:"||JL()==="https:"}function JL(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function JK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YK()||nF()||"connection"in navigator)?navigator.onLine:!0}function XK(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Yc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ta(t>e,"Short delay should be less than long delay!"),this.isMobile=eF()||rF()}get(){return JK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qS(n,e){Ta(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Tv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tQ=new Yc(3e4,6e4);function zS(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xl(n,e,t,r,i={}){return mV(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=qf(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return tF()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Bs(n.emulatorConfig.host)&&(d.credentials="include"),Tv.fetch()(await gV(n,n.config.apiHost,t,a),d)})}async function mV(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},ZK),e);try{let i=new AS(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw _v(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _v(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw _v(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw _v(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw pV(n,h,d);ba(n,h)}}catch(i){if(i instanceof Bn)throw i;ba(n,"network-request-failed",{message:String(i)})}}async function nQ(n,e,t,r,i={}){let s=await Xl(n,e,t,r,i);return"mfaPendingCredential"in s&&ba(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function gV(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?qS(n.config,i):`${n.config.apiScheme}://${i}`;return eQ.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var AS=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qc(this.auth,"network-request-failed")),tQ.get())})}};function _v(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Qc(n,e,r);return i.customData._tokenResponse=t,i}async function rQ(n,e){return Xl(n,"POST","/v1/accounts:delete",e)}async function Cv(n,e){return Xl(n,"POST","/v1/accounts:lookup",e)}function ap(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GS(n,e=!1){let t=pi(n),r=await t.getIdToken(e),i=WS(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ap(TS(i.auth_time)),issuedAtTime:ap(TS(i.iat)),expirationTime:ap(TS(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function TS(n){return Number(n)*1e3}function WS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vv("JWT malformed, contained fewer than 3 sections"),null;try{let i=M_(t);return i?JSON.parse(i):(vv("Failed to decode base64 JWT payload"),null)}catch(i){return vv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XL(n){let e=WS(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function up(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Bn&&iQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var RS=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var lp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ap(this.lastLoginAt),this.creationTime=ap(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Sv(n){var e;let t=n.auth,r=await n.getIdToken(),i=await up(n,Cv(t,{idToken:r}));Ie(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yV(s.providerUserInfo):[],a=sQ(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function KS(n){let e=pi(n);await Sv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yV(n){return n.map(e=>{var{providerId:t}=e,r=XI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function oQ(n,e){let t=await mV(n,{},async()=>{let r=qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await gV(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Bs(n.emulatorConfig.host)&&(c.credentials="include"),Tv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aQ(n,e){return Xl(n,"POST","/v2/accounts:revokeToken",zS(n,e))}var cp=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let t=XL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await oQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xs("not implemented")}};function Ia(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var wa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=XI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await up(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GS(this,e)}reload(){return KS(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Kc(this.auth));let e=await this.getIdToken();return await up(this,rQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,x=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,$=(d=t.createdAt)!==null&&d!==void 0?d:void 0,W=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:J,emailVerified:ue,isAnonymous:ze,providerData:ge,stsTokenManager:w}=t;Ie(J&&w,e,"internal-error");let _=cp.fromJSON(this.name,w);Ie(typeof J=="string",e,"internal-error"),Ia(m,e.name),Ia(y,e.name),Ie(typeof ue=="boolean",e,"internal-error"),Ie(typeof ze=="boolean",e,"internal-error"),Ia(C,e.name),Ia(R,e.name),Ia(P,e.name),Ia(x,e.name),Ia($,e.name),Ia(W,e.name);let I=new n({uid:J,auth:e,email:y,emailVerified:ue,displayName:m,isAnonymous:ze,photoURL:R,phoneNumber:C,tenantId:P,stsTokenManager:_,createdAt:$,lastLoginAt:W});return ge&&Array.isArray(ge)&&(I.providerData=ge.map(b=>Object.assign({},b))),x&&(I._redirectEventId=x),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new cp;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?yV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new cp;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var ZL=new Map;function Zs(n){Ta(n instanceof Function,"Expected a class definition");let e=ZL.get(n);return e?(Ta(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ZL.set(n,e),e)}var cQ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),PS=cQ;function Ev(n,e,t){return`firebase:${n}:${e}:${t}`}var Dv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ev(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ev("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Cv(this.auth,{idToken:e}).catch(()=>{});return t?wa._fromGetAccountInfoResponse(this.auth,t,e):null}return wa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Zs(PS),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Zs(PS),o=Ev(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let m;if(typeof h=="string"){let y=await Cv(e,{idToken:h}).catch(()=>{});if(!y)break;m=await wa._fromGetAccountInfoResponse(e,y,h)}else m=wa._fromJSON(e,h);d!==s&&(a=m),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function eV(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_V(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bV(e))return"Blackberry";if(TV(e))return"Webos";if(vV(e))return"Safari";if((e.includes("chrome/")||EV(e))&&!e.includes("edge/"))return"Chrome";if(wV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function _V(n=wn()){return/firefox\//i.test(n)}function vV(n=wn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EV(n=wn()){return/crios\//i.test(n)}function IV(n=wn()){return/iemobile/i.test(n)}function wV(n=wn()){return/android/i.test(n)}function bV(n=wn()){return/blackberry/i.test(n)}function TV(n=wn()){return/webos/i.test(n)}function QS(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uQ(n=wn()){var e;return QS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lQ(){return iF()&&document.documentMode===10}function CV(n=wn()){return QS(n)||wV(n)||TV(n)||bV(n)||/windows phone/i.test(n)||IV(n)}function SV(n,e=[]){let t;switch(n){case"Browser":t=eV(wn());break;case"Worker":t=`${eV(wn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zi}/${r}`}var NS=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function dQ(n,e={}){return Xl(n,"GET","/v2/passwordPolicy",zS(n,e))}var hQ=6,kS=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:hQ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var xS=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Av(this),this.idTokenSubscription=new Av(this),this.beforeStateQueue=new NS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Dv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Cv(this,{idToken:e}),r=await wa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Jn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Kc(this));let t=e?pi(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Kc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Kc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await dQ(this),t=new kS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Zs(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Dv.create(this,[Zs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&QK(`Error while retrieving App Check token: ${t.error}`),t?.token}};function YS(n){return pi(n)}var Av=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aF(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var JS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fQ(n){JS=n}function pQ(n){return JS.loadJS(n)}function mQ(){return JS.gapiScript}function DV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function XS(n,e){let t=la(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Yi(s,e??{}))return i;ba(i,"already-initialized")}return t.initialize({options:e})}function gQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Zs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZS(n,e,t){let r=YS(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=AV(e),{host:o,port:a}=yQ(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Yi(d,r.config.emulator)&&Yi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Bs(o)?(Gl(`${s}//${o}${c}`),Wl("Auth",!0)):i||_Q()}function AV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yQ(n){let e=AV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:tV(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:tV(o)}}}function tV(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function _Q(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Rv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,t){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}};async function CS(n,e){return nQ(n,"POST","/v1/accounts:signInWithIdp",zS(n,e))}var Pv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var MS=class extends Pv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var dp=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await wa._fromIdTokenResponse(e,r,i),o=nV(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=nV(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function nV(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var OS=class n extends Bn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function RV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?OS._fromErrorAndOperation(n,s,e,r):s})}async function vQ(n,e,t=!1){let r=await up(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return dp._forOperation(n,"link",r)}async function EQ(n,e,t=!1){let{auth:r}=n;if(Jn(r.app))return Promise.reject(Kc(r));let i="reauthenticate";try{let s=await up(n,RV(r,i,e,n),t);Ie(s.idToken,r,"internal-error");let o=WS(s.idToken);Ie(o,r,"internal-error");let{sub:a}=o;return Ie(n.uid===a,r,"user-mismatch"),dp._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ba(r,"user-mismatch"),s}}async function IQ(n,e,t=!1){if(Jn(n.app))return Promise.reject(Kc(n));let r="signIn",i=await RV(n,r,e),s=await dp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function eD(n,e,t,r){return pi(n).onIdTokenChanged(e,t,r)}function tD(n,e,t){return pi(n).beforeAuthStateChanged(e,t)}var Nv="__sak";var kv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nv,"1"),this.storage.removeItem(Nv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var wQ=1e3,bQ=10,TQ=(()=>{class n extends kv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);lQ()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,bQ):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},wQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),PV=TQ;var CQ=(()=>{class n extends kv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),nD=CQ;function SQ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var DQ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await SQ(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function NV(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var FS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=NV("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function is(){return window}function AQ(n){is().location.href=n}function kV(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function RQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PQ(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NQ(){return kV()?self:null}var xV="firebaseLocalStorageDb",kQ=1,xv="firebaseLocalStorage",MV="fbase_key",Jc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ov(n,e){return n.transaction([xv],e?"readwrite":"readonly").objectStore(xv)}function xQ(){let n=indexedDB.deleteDatabase(xV);return new Jc(n).toPromise()}function LS(){let n=indexedDB.open(xV,kQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(xv,{keyPath:MV})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(xv)?e(r):(r.close(),await xQ(),e(await LS()))})})}async function rV(n,e,t){let r=Ov(n,!0).put({[MV]:e,value:t});return new Jc(r).toPromise()}async function MQ(n,e){let t=Ov(n,!1).get(e),r=await new Jc(t).toPromise();return r===void 0?null:r.value}function iV(n,e){let t=Ov(n,!0).delete(e);return new Jc(t).toPromise()}var OQ=800,FQ=3,LQ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LS(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>FQ)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=DQ._getInstance(NQ()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await RQ(),!this.activeServiceWorker)return;this.sender=new FS(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||PQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await LS();return await rV(t,Nv,"1"),await iV(t,Nv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>rV(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>MQ(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iV(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=Ov(s,!1).getAll();return new Jc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),OV=LQ;var Sbe=DV("rcb"),Dbe=new Yc(3e4,6e4);function VQ(n,e){return e?Zs(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var hp=class extends Rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return CS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return CS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return CS(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function UQ(n){return IQ(n.auth,new hp(n),n.bypassAuthState)}function jQ(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),EQ(t,new hp(n),n.bypassAuthState)}async function BQ(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),vQ(t,new hp(n),n.bypassAuthState)}var VS=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UQ;case"linkViaPopup":case"linkViaRedirect":return BQ;case"reauthViaPopup":case"reauthViaRedirect":return jQ;default:ba(this.auth,"internal-error")}}resolve(e){Ta(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ta(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Abe=new Yc(2e3,1e4);var $Q="pendingRedirect",Iv=new Map,US=class extends VS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Iv.get(this.auth._key());if(!e){try{let r=await HQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Iv.set(this.auth._key(),e)}return this.bypassAuthState||Iv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function HQ(n,e){let t=GQ(e),r=zQ(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function qQ(n,e){Iv.set(n._key(),e)}function zQ(n){return Zs(n._redirectPersistence)}function GQ(n){return Ev($Q,n.config.apiKey,n.name)}async function WQ(n,e,t=!1){if(Jn(n.app))return Promise.reject(Kc(n));let r=YS(n),i=VQ(r,e),o=await new US(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var KQ=600*1e3,jS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QQ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!FV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(sV(e))}saveEventToCache(e){this.cachedEventUids.add(sV(e)),this.lastProcessedEventTime=Date.now()}};function sV(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function QQ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FV(n);default:return!1}}async function YQ(n,e={}){return Xl(n,"GET","/v1/projects",e)}var JQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XQ=/^https?/;async function ZQ(n){if(n.config.emulator)return;let{authorizedDomains:e}=await YQ(n);for(let t of e)try{if(eY(t))return}catch{}ba(n,"unauthorized-domain")}function eY(n){let e=DS(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!XQ.test(t))return!1;if(JQ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var tY=new Yc(3e4,6e4);function oV(){let n=is().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nY(n){return new Promise((e,t)=>{var r,i,s;function o(){oV(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oV(),t(Qc(n,"network-request-failed"))},timeout:tY.get()})}if(!((i=(r=is().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=is().gapi)===null||s===void 0)&&s.load)o();else{let a=DV("iframefcb");return is()[a]=()=>{gapi.load?o():t(Qc(n,"network-request-failed"))},pQ(`${mQ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw wv=null,e})}var wv=null;function rY(n){return wv=wv||nY(n),wv}var iY=new Yc(5e3,15e3),sY="__/auth/iframe",oY="emulator/auth/iframe",aY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uY(n){let e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qS(e,oY):`https://${n.config.authDomain}/${sY}`,r={apiKey:e.apiKey,appName:n.name,v:Zi},i=cY.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${qf(r).slice(1)}`}async function lY(n){let e=await rY(n),t=is().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:uY(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aY,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Qc(n,"network-request-failed"),a=is().setTimeout(()=>{s(o)},iY.get());function c(){is().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var dY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hY=500,fY=600,pY="_blank",mY="http://localhost",Mv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gY(n,e,t,r=hY,i=fY){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},dY),{width:r.toString(),height:i.toString(),top:s,left:o}),d=wn().toLowerCase();t&&(a=EV(d)?pY:t),_V(d)&&(e=e||mY,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[C,R])=>`${y}${C}=${R},`,"");if(uQ(d)&&a!=="_self")return yY(e||"",a),new Mv(null);let m=window.open(e||"",a,h);Ie(m,n,"popup-blocked");try{m.focus()}catch{}return new Mv(m)}function yY(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var _Y="__/auth/handler",vY="emulator/auth/handler",EY=encodeURIComponent("fac");async function aV(n,e,t,r,i,s){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Zi,eventId:i};if(e instanceof Pv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",oF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof MS){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${EY}=${encodeURIComponent(c)}`:"";return`${IY(n)}?${qf(a).slice(1)}${d}`}function IY({config:n}){return n.emulator?qS(n,vY):`https://${n.authDomain}/${_Y}`}var SS="webStorageSupport",BS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nD,this._completeRedirectFn=WQ,this._overrideRedirectResult=qQ}async _openPopup(e,t,r,i){var s;Ta((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await aV(e,t,r,DS(),i);return gY(e,o,NV())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await aV(e,t,r,DS(),i);return AQ(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ta(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await lY(e),r=new jS(e);return t.register("authEvent",i=>(Ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(SS,{type:SS},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[SS];o!==void 0&&t(!!o),ba(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZQ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CV()||vV()||QS()}},LV=BS;var cV="@firebase/auth",uV="1.10.8";var $S=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wY(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bY(n){pr(new bn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SV(n)},d=new xS(r,i,s,c);return gQ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pr(new bn("auth-internal",e=>{let t=YS(e.getProvider("auth").getImmediate());return(r=>new $S(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mt(cV,uV,wY(n)),mt(cV,uV,"esm2017")}var TY=300,CY=uC("authIdTokenMaxAge")||TY,lV=null,SY=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>CY)return;let i=t?.token;lV!==i&&(lV=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rD(n=Hs()){let e=la(n,"auth");if(e.isInitialized())return e.getImmediate();let t=XS(n,{popupRedirectResolver:LV,persistence:[OV,PV,nD]}),r=uC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=SY(s.toString());tD(t,o,()=>o(t.currentUser)),eD(t,a=>o(a))}}let i=aC("auth");return i&&ZS(t,`http://${i}`),t}function DY(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fQ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Qc("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",DY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bY("Browser");var VV="auth",fp=class{constructor(e){return e}},Xc=class{constructor(){return da(VV)}};var iD=new Z("angularfire2.auth-instances");function EJ(n,e){let t=Hc(VV,n,e);return t&&new fp(t)}function IJ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new fp(r)}}var wJ={provide:Xc,deps:[[new an,iD]]},bJ={provide:fp,useFactory:EJ,deps:[[new an,iD],mi]};function UV(n,...e){return mt("angularfire",es.full,"auth"),vn([bJ,wJ,{provide:iD,useFactory:IJ(n),multi:!0,deps:[tt,ht,ts,zs,[new an,fa],...e]}])}var jV=qs(rD,!0);var BV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$V={};var eo,sD;(function(){var n;function e(w,_){function I(){}I.prototype=_.prototype,w.F=_.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(b,T,A){for(var E=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)E[lt-2]=arguments[lt];return _.prototype[T].apply(b,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,I){I||(I=0);let b=Array(16);if(typeof _=="string")for(var T=0;T<16;++T)b[T]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(T=0;T<16;++T)b[T]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=w.g[0],I=w.g[1],T=w.g[2];let A=w.g[3],E;E=_+(A^I&(T^A))+b[0]+3614090360&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[1]+3905402710&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[2]+606105819&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[3]+3250441966&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(A^I&(T^A))+b[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[5]+1200080426&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[6]+2821735955&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[7]+4249261313&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(A^I&(T^A))+b[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[9]+2336552879&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[10]+4294925233&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[11]+2304563134&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(A^I&(T^A))+b[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[13]+4254626195&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[14]+2792965006&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[15]+1236535329&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(T^A&(I^T))+b[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[6]+3225465664&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[11]+643717713&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[0]+3921069994&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^A&(I^T))+b[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[10]+38016083&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[15]+3634488961&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[4]+3889429448&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^A&(I^T))+b[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[14]+3275163606&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[3]+4107603335&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[8]+1163531501&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^A&(I^T))+b[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[2]+4243563512&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[7]+1735328473&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[12]+2368359562&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(I^T^A)+b[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[8]+2272392833&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[11]+1839030562&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[14]+4259657740&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^A)+b[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[4]+1272893353&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[7]+4139469664&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[10]+3200236656&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^A)+b[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[0]+3936430074&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[3]+3572445317&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[6]+76029189&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^A)+b[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[12]+3873151461&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[15]+530742520&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[2]+3299628645&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(T^(I|~A))+b[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[7]+1126891415&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[14]+2878612391&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[5]+4237533241&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~A))+b[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[3]+2399980690&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[10]+4293915773&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[1]+2240044497&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~A))+b[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[15]+4264355552&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[6]+2734768916&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[13]+1309151649&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~A))+b[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[11]+3174756917&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[2]+718787259&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.v=function(w,_){_===void 0&&(_=w.length);let I=_-this.blockSize,b=this.C,T=this.h,A=0;for(;A<_;){if(T==0)for(;A<=I;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<_;)if(b[T++]=w.charCodeAt(A++),T==this.blockSize){i(this,b),T=0;break}}else for(;A<_;)if(b[T++]=w[A++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=_},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;_=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=_&255,_/=256;for(this.v(w),w=Array(16),_=0,I=0;I<4;++I)for(let b=0;b<32;b+=8)w[_++]=this.g[I]>>>b&255;return w};function s(w,_){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=_(w)}function o(w,_){this.h=_;let I=[],b=!0;for(let T=w.length-1;T>=0;T--){let A=w[T]|0;b&&A==_||(I[T]=A,b=!1)}this.g=I}var a={};function c(w){return-128<=w&&w<128?s(w,function(_){return new o([_|0],_<0?-1:0)}):new o([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return x(d(-w));let _=[],I=1;for(let b=0;w>=I;b++)_[b]=w/I|0,I*=4294967296;return new o(_,0)}function h(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return x(h(w.substring(1),_));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(_,8)),b=m;for(let A=0;A<w.length;A+=8){var T=Math.min(8,w.length-A);let E=parseInt(w.substring(A,A+T),_);T<8?(T=d(Math.pow(_,T)),b=b.j(T).add(d(E))):(b=b.j(I),b=b.add(d(E)))}return b}var m=c(0),y=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-x(this).m();let w=0,_=1;for(let I=0;I<this.g.length;I++){let b=this.i(I);w+=(b>=0?b:4294967296+b)*_,_*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+x(this).toString(w);let _=d(Math.pow(w,6));var I=this;let b="";for(;;){let T=ue(I,_).g;I=$(I,T.j(_));let A=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=T,R(I))return A+b;for(;A.length<6;)A="0"+A;b=A+b}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=$(this,w),P(w)?-1:R(w)?0:1};function x(w){let _=w.g.length,I=[];for(let b=0;b<_;b++)I[b]=~w.g[b];return new o(I,~w.h).add(y)}n.abs=function(){return P(this)?x(this):this},n.add=function(w){let _=Math.max(this.g.length,w.g.length),I=[],b=0;for(let T=0;T<=_;T++){let A=b+(this.i(T)&65535)+(w.i(T)&65535),E=(A>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);b=E>>>16,A&=65535,E&=65535,I[T]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function $(w,_){return w.add(x(_))}n.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?x(this).j(x(w)):x(x(this).j(w));if(P(w))return x(this.j(x(w)));if(this.l(C)<0&&w.l(C)<0)return d(this.m()*w.m());let _=this.g.length+w.g.length,I=[];for(var b=0;b<2*_;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(let T=0;T<w.g.length;T++){let A=this.i(b)>>>16,E=this.i(b)&65535,lt=w.i(T)>>>16,fn=w.i(T)&65535;I[2*b+2*T]+=E*fn,W(I,2*b+2*T),I[2*b+2*T+1]+=A*fn,W(I,2*b+2*T+1),I[2*b+2*T+1]+=E*lt,W(I,2*b+2*T+1),I[2*b+2*T+2]+=A*lt,W(I,2*b+2*T+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new o(I,0)};function W(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function J(w,_){this.g=w,this.h=_}function ue(w,_){if(R(_))throw Error("division by zero");if(R(w))return new J(m,m);if(P(w))return _=ue(x(w),_),new J(x(_.g),x(_.h));if(P(_))return _=ue(w,x(_)),new J(x(_.g),_.h);if(w.g.length>30){if(P(w)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,b=_;b.l(w)<=0;)I=ze(I),b=ze(b);var T=ge(I,1),A=ge(b,1);for(b=ge(b,2),I=ge(I,2);!R(b);){var E=A.add(b);E.l(w)<=0&&(T=T.add(I),A=E),b=ge(b,1),I=ge(I,1)}return _=$(w,T.j(_)),new J(T,_)}for(T=m;w.l(_)>=0;){for(I=Math.max(1,Math.floor(w.m()/_.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),A=d(I),E=A.j(_);P(E)||E.l(w)>0;)I-=b,A=d(I),E=A.j(_);R(A)&&(A=y),T=T.add(A),w=$(w,E)}return new J(T,w)}n.B=function(w){return ue(this,w).h},n.and=function(w){let _=Math.max(this.g.length,w.g.length),I=[];for(let b=0;b<_;b++)I[b]=this.i(b)&w.i(b);return new o(I,this.h&w.h)},n.or=function(w){let _=Math.max(this.g.length,w.g.length),I=[];for(let b=0;b<_;b++)I[b]=this.i(b)|w.i(b);return new o(I,this.h|w.h)},n.xor=function(w){let _=Math.max(this.g.length,w.g.length),I=[];for(let b=0;b<_;b++)I[b]=this.i(b)^w.i(b);return new o(I,this.h^w.h)};function ze(w){let _=w.g.length+1,I=[];for(let b=0;b<_;b++)I[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(I,w.h)}function ge(w,_){let I=_>>5;_%=32;let b=w.g.length-I,T=[];for(let A=0;A<b;A++)T[A]=_>0?w.i(A+I)>>>_|w.i(A+I+1)<<32-_:w.i(A+I);return new o(T,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sD=$V.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,eo=$V.Integer=o}).apply(typeof BV<"u"?BV:typeof self<"u"?self:typeof window<"u"?window:{});var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},to={};var oD,TJ,Zl,aD,pp,Lv,cD,uD,lD;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fv=="object"&&Fv];for(var p=0;p<l.length;++p){var v=l[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var v=r;l=l.split(".");for(var D=0;D<l.length-1;D++){var M=l[D];if(!(M in v))break e;v=v[M]}l=l[l.length-1],D=v[l],p=p(D),p!=D&&p!=null&&e(v,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var v=[],D;for(D in p)Object.prototype.hasOwnProperty.call(p,D)&&v.push([D,p[D]]);return v}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,v){return l.call.apply(l.bind,arguments)}function d(l,p,v){return d=c,d.apply(null,arguments)}function h(l,p){var v=Array.prototype.slice.call(arguments,1);return function(){var D=v.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function m(l,p){function v(){}v.prototype=p.prototype,l.Z=p.prototype,l.prototype=new v,l.prototype.constructor=l,l.Ob=function(D,M,L){for(var Q=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)Q[ye-2]=arguments[ye];return p.prototype[M].apply(D,Q)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function C(l){let p=l.length;if(p>0){let v=Array(p);for(let D=0;D<p;D++)v[D]=l[D];return v}return[]}function R(l,p){for(let D=1;D<arguments.length;D++){let M=arguments[D];var v=typeof M;if(v=v!="object"?v:M?Array.isArray(M)?"array":v:"null",v=="array"||v=="object"&&typeof M.length=="number"){v=l.length||0;let L=M.length||0;l.length=v+L;for(let Q=0;Q<L;Q++)l[v+Q]=M[Q]}else l.push(M)}}class P{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(l){o.setTimeout(()=>{throw l},0)}function $(){var l=w;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,v){let D=J.get();D.set(p,v),this.h?this.h.next=D:this.g=D,this.h=D}}var J=new P(()=>new ue,l=>l.reset());class ue{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,ge=!1,w=new W,_=()=>{let l=Promise.resolve(void 0);ze=()=>{l.then(I)}};function I(){for(var l;l=$();){try{l.h.call(l.g)}catch(v){x(v)}var p=J;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}ge=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};o.addEventListener("test",v,p),o.removeEventListener("test",v,p)}catch{}return l})();function E(l){return/^[\s\xa0]*$/.test(l)}function lt(l,p){T.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}m(lt,T),lt.prototype.init=function(l,p){let v=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(v=="mouseover"?p=l.fromElement:v=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var fn="closure_listenable_"+(Math.random()*1e6|0),re=0;function ie(l,p,v,D,M){this.listener=l,this.proxy=null,this.src=p,this.type=v,this.capture=!!D,this.ha=M,this.key=++re,this.da=this.fa=!1}function oe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Re(l,p,v){for(let D in l)p.call(v,l[D],D,l)}function Tt(l,p){for(let v in l)p.call(void 0,l[v],v,l)}function Fn(l){let p={};for(let v in l)p[v]=l[v];return p}let _t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(l,p){let v,D;for(let M=1;M<arguments.length;M++){D=arguments[M];for(v in D)l[v]=D[v];for(let L=0;L<_t.length;L++)v=_t[L],Object.prototype.hasOwnProperty.call(D,v)&&(l[v]=D[v])}}function Je(l){this.src=l,this.g={},this.h=0}Je.prototype.add=function(l,p,v,D,M){let L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);let Q=ka(l,p,D,M);return Q>-1?(p=l[Q],v||(p.fa=!1)):(p=new ie(p,this.src,L,!!D,M),p.fa=v,l.push(p)),p};function vr(l,p){let v=p.type;if(v in l.g){var D=l.g[v],M=Array.prototype.indexOf.call(D,p,void 0),L;(L=M>=0)&&Array.prototype.splice.call(D,M,1),L&&(oe(p),l.g[v].length==0&&(delete l.g[v],l.h--))}}function ka(l,p,v,D){for(let M=0;M<l.length;++M){let L=l[M];if(!L.da&&L.listener==p&&L.capture==!!v&&L.ha==D)return M}return-1}var gt="closure_lm_"+(Math.random()*1e6|0),tr={};function pn(l,p,v,D,M){if(D&&D.once)return bu(l,p,v,D,M);if(Array.isArray(p)){for(let L=0;L<p.length;L++)pn(l,p[L],v,D,M);return null}return v=Du(v),l&&l[fn]?l.J(p,v,a(D)?!!D.capture:!!D,M):Er(l,p,v,!1,D,M)}function Er(l,p,v,D,M,L){if(!p)throw Error("Invalid event type");let Q=a(M)?!!M.capture:!!M,ye=Su(l);if(ye||(l[gt]=ye=new Je(l)),v=ye.add(p,v,D,Q,L),v.proxy)return v;if(D=Ci(),v.proxy=D,D.src=l,D.listener=v,l.addEventListener)A||(M=Q),M===void 0&&(M=!1),l.addEventListener(p.toString(),D,M);else if(l.attachEvent)l.attachEvent(Cu(p.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ci(){function l(v){return p.call(l.src,l.listener,v)}let p=im;return l}function bu(l,p,v,D,M){if(Array.isArray(p)){for(let L=0;L<p.length;L++)bu(l,p[L],v,D,M);return null}return v=Du(v),l&&l[fn]?l.K(p,v,a(D)?!!D.capture:!!D,M):Er(l,p,v,!0,D,M)}function Tu(l,p,v,D,M){if(Array.isArray(p))for(var L=0;L<p.length;L++)Tu(l,p[L],v,D,M);else D=a(D)?!!D.capture:!!D,v=Du(v),l&&l[fn]?(l=l.i,L=String(p).toString(),L in l.g&&(p=l.g[L],v=ka(p,v,D,M),v>-1&&(oe(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete l.g[L],l.h--)))):l&&(l=Su(l))&&(p=l.g[p.toString()],l=-1,p&&(l=ka(p,v,D,M)),(v=l>-1?p[l]:null)&&xa(v))}function xa(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[fn])vr(p.i,l);else{var v=l.type,D=l.proxy;p.removeEventListener?p.removeEventListener(v,D,l.capture):p.detachEvent?p.detachEvent(Cu(v),D):p.addListener&&p.removeListener&&p.removeListener(D),(v=Su(p))?(vr(v,l),v.h==0&&(v.src=null,p[gt]=null)):oe(l)}}}function Cu(l){return l in tr?tr[l]:tr[l]="on"+l}function im(l,p){if(l.da)l=!0;else{p=new lt(p,this);let v=l.listener,D=l.ha||l.src;l.fa&&xa(l),l=v.call(D,p)}return l}function Su(l){return l=l[gt],l instanceof Je?l:null}var $d="__closure_events_fn_"+(Math.random()*1e9>>>0);function Du(l){return typeof l=="function"?l:(l[$d]||(l[$d]=function(p){return l.handleEvent(p)}),l[$d])}function Jt(){b.call(this),this.i=new Je(this),this.M=this,this.G=null}m(Jt,b),Jt.prototype[fn]=!0,Jt.prototype.removeEventListener=function(l,p,v,D){Tu(this,l,p,v,D)};function Xt(l,p){var v,D=l.G;if(D)for(v=[];D;D=D.G)v.push(D);if(l=l.M,D=p.type||p,typeof p=="string")p=new T(p,l);else if(p instanceof T)p.target=p.target||l;else{var M=p;p=new T(D,l),st(p,M)}M=!0;let L,Q;if(v)for(Q=v.length-1;Q>=0;Q--)L=p.g=v[Q],M=Ma(L,D,!0,p)&&M;if(L=p.g=l,M=Ma(L,D,!0,p)&&M,M=Ma(L,D,!1,p)&&M,v)for(Q=0;Q<v.length;Q++)L=p.g=v[Q],M=Ma(L,D,!1,p)&&M}Jt.prototype.N=function(){if(Jt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let v=l.g[p];for(let D=0;D<v.length;D++)oe(v[D]);delete l.g[p],l.h--}}this.G=null},Jt.prototype.J=function(l,p,v,D){return this.i.add(String(l),p,!1,v,D)},Jt.prototype.K=function(l,p,v,D){return this.i.add(String(l),p,!0,v,D)};function Ma(l,p,v,D){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let L=0;L<p.length;++L){let Q=p[L];if(Q&&!Q.da&&Q.capture==v){let ye=Q.listener,u=Q.ha||Q.src;Q.fa&&vr(l.i,Q),M=ye.call(u,D)!==!1&&M}}return M&&!D.defaultPrevented}function TI(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function Au(l){l.g=TI(()=>{l.g=null,l.i&&(l.i=!1,Au(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class Hd extends b{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Au(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(l){b.call(this),this.h=l,this.g={}}m(gs,b);var Zt=[];function rn(l){Re(l.g,function(p,v){this.g.hasOwnProperty(v)&&xa(p)},l),l.g={}}gs.prototype.N=function(){gs.Z.N.call(this),rn(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _o=o.JSON.stringify,sm=o.JSON.parse,om=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function am(){}function vo(){}var Eo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ru(){T.call(this,"d")}m(Ru,T);function Oa(){T.call(this,"c")}m(Oa,T);var ys={},cm=null;function Io(){return cm=cm||new Jt}ys.Ia="serverreachability";function qd(l){T.call(this,ys.Ia,l)}m(qd,T);function wo(l){let p=Io();Xt(p,new qd(p))}ys.STAT_EVENT="statevent";function bo(l,p){T.call(this,ys.STAT_EVENT,l),this.stat=p}m(bo,T);function en(l){let p=Io();Xt(p,new bo(p,l))}ys.Ja="timingevent";function Pu(l,p){T.call(this,ys.Ja,l),this.size=p}m(Pu,T);function nr(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function To(){this.g=!0}To.prototype.ua=function(){this.g=!1};function Nu(l,p,v,D,M,L){l.info(function(){if(l.g)if(L){var Q="",ye=L.split("&");for(let f=0;f<ye.length;f++){var u=ye[f].split("=");if(u.length>1){let g=u[0];u=u[1];let S=g.split("_");Q=S.length>=2&&S[1]=="type"?Q+(g+"="+u+"&"):Q+(g+"=redacted&")}}}else Q=null;else Q=L;return"XMLHTTP REQ ("+D+") [attempt "+M+"]: "+p+`
`+v+`
`+Q})}function um(l,p,v,D,M,L,Q){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+M+"]: "+p+`
`+v+`
`+L+" "+Q})}function Ir(l,p,v,D){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+mn(l,v)+(D?" "+D:"")})}function lm(l,p){l.info(function(){return"TIMEOUT: "+p})}To.prototype.info=function(){};function mn(l,p){if(!l.g)return p;if(!p)return null;try{let L=JSON.parse(p);if(L){for(l=0;l<L.length;l++)if(Array.isArray(L[l])){var v=L[l];if(!(v.length<2)){var D=v[1];if(Array.isArray(D)&&!(D.length<1)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(let Q=1;Q<D.length;Q++)D[Q]=""}}}}return _o(L)}catch{return p}}var Fa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Co={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},So;function zd(){}m(zd,am),zd.prototype.g=function(){return new XMLHttpRequest},So=new zd;function La(l){return encodeURIComponent(String(l))}function Do(l){var p=1;l=l.split(":");let v=[];for(;p>0&&l.length;)v.push(l.shift()),p--;return l.length&&v.push(l.join(":")),v}function Si(l,p,v,D){this.j=l,this.i=p,this.l=v,this.S=D||1,this.V=new gs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dm}function dm(){this.i=null,this.g="",this.h=!1}var Va={},ku={};function Ua(l,p,v){l.M=1,l.A=Ha(rr(p)),l.u=v,l.R=!0,ja(l,null)}function ja(l,p){l.F=Date.now(),Ao(l),l.B=rr(l.A);var v=l.B,D=l.S;Array.isArray(D)||(D=[String(D)]),ym(v.i,"t",D),l.C=0,v=l.j.L,l.h=new dm,l.g=zu(l.j,v?p:null,!l.u),l.P>0&&(l.O=new Hd(d(l.Y,l,l.g),l.P)),p=l.V,v=l.g,D=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(Zt[0]=M.toString()),M=Zt);for(let L=0;L<M.length;L++){let Q=pn(v,M[L],D||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=l.J?Fn(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),wo(),Nu(l.i,l.v,l.B,l.l,l.S,l.u)}Si.prototype.ba=function(l){l=l.target;let p=this.O;p&&Ge(l)==3?p.j():this.Y(l)},Si.prototype.Y=function(l){try{if(l==this.g)e:{let ye=Ge(this.g),u=this.g.ya(),f=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Tm(this.g)))){this.K||ye!=4||u==7||(u==8||f<=0?wo(3):wo(2)),Mu(this);var p=this.g.ca();this.X=p;var v=Di(this);if(this.o=p==200,um(this.i,this.v,this.B,this.l,this.S,ye,p),this.o){if(this.U&&!this.L){t:{if(this.g){var D,M=this.g;if((D=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(D)){var L=D;break t}}L=null}if(l=L)Ir(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Po(this,l);else{this.o=!1,this.m=3,en(12),_s(this),Ro(this);break e}}if(this.R){l=!0;let g;for(;!this.K&&this.C<v.length;)if(g=hm(this,v),g==ku){ye==4&&(this.m=4,en(14),l=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(g==Va){this.m=4,en(15),Ir(this.i,this.l,v,"[Invalid Chunk]"),l=!1;break}else Ir(this.i,this.l,g,null),Po(this,g);if(Gd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||v.length!=0||this.h.h||(this.m=1,en(16),l=!1),this.o=this.o&&l,!l)Ir(this.i,this.l,v,"[Invalid Chunked Response]"),_s(this),Ro(this);else if(v.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),$u(Q),Q.P=!0,en(11))}}else Ir(this.i,this.l,v,null),Po(this,v);ye==4&&_s(this),this.o&&!this.K&&(ye==4?sh(this.j,this):(this.o=!1,Ao(this)))}else CI(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,en(12)):(this.m=0,en(13)),_s(this),Ro(this)}}}catch{}};function Di(l){if(!Gd(l))return l.g.la();let p=Tm(l.g);if(p==="")return"";let v="",D=p.length,M=Ge(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return _s(l),Ro(l),"";l.h.i=new o.TextDecoder}for(let L=0;L<D;L++)l.h.h=!0,v+=l.h.i.decode(p[L],{stream:!(M&&L==D-1)});return p.length=0,l.h.g+=v,l.C=0,l.h.g}function Gd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function hm(l,p){var v=l.C,D=p.indexOf(`
`,v);return D==-1?ku:(v=Number(p.substring(v,D)),isNaN(v)?Va:(D+=1,D+v>p.length?ku:(p=p.slice(D,D+v),l.C=D+v,p)))}Si.prototype.cancel=function(){this.K=!0,_s(this)};function Ao(l){l.T=Date.now()+l.H,xu(l,l.H)}function xu(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=nr(d(l.aa,l),p)}function Mu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Si.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(lm(this.i,this.B),this.M!=2&&(wo(),en(17)),_s(this),this.m=2,Ro(this)):xu(this,this.T-l)};function Ro(l){l.j.I==0||l.K||sh(l.j,l)}function _s(l){Mu(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,rn(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Po(l,p){try{var v=l.j;if(v.I!=0&&(v.g==l||Ba(v.h,l))){if(!l.L&&Ba(v.h,l)&&v.I==3){try{var D=v.Ba.g.parse(p)}catch{D=null}if(Array.isArray(D)&&D.length==3){var M=D;if(M[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<l.F)Hu(v),vs(v);else break e;Vo(v),en(18)}}else v.xa=M[1],0<v.xa-v.K&&M[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=nr(d(v.Va,v),6e3));Ai(v.h)<=1&&v.ta&&(v.ta=void 0)}else Pi(v,11)}else if((l.L||v.g==l)&&Hu(v),!E(p))for(M=v.Ba.g.parse(p),p=0;p<M.length;p++){let f=M[p],g=f[0];if(!(g<=v.K))if(v.K=g,f=f[1],v.I==2)if(f[0]=="c"){v.M=f[1],v.ba=f[2];let S=f[3];S!=null&&(v.ka=S,v.j.info("VER="+v.ka));let O=f[4];O!=null&&(v.za=O,v.j.info("SVER="+v.za));let V=f[5];V!=null&&typeof V=="number"&&V>0&&(D=1.5*V,v.O=D,v.j.info("backChannelRequestTimeoutMs_="+D)),D=v;let G=l.g;if(G){let He=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(He){var L=D.h;L.g||He.indexOf("spdy")==-1&&He.indexOf("quic")==-1&&He.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Wd(L,L.h),L.h=null))}if(D.G){let Nt=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Nt&&(D.wa=Nt,ot(D.J,D.G,Nt))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-l.F,v.j.info("Handshake RTT: "+v.T+"ms")),D=v;var Q=l;if(D.na=qu(D,D.L?D.ba:null,D.W),Q.L){Kd(D.h,Q);var ye=Q,u=D.O;u&&(ye.H=u),ye.D&&(Mu(ye),Ao(ye)),D.g=Q}else Bu(D);v.i.length>0&&Hn(v)}else f[0]!="stop"&&f[0]!="close"||Pi(v,7);else v.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Pi(v,7):ju(v):f[0]!="noop"&&v.l&&v.l.qa(f),v.A=0)}}wo(4)}catch{}}var fm=class{constructor(l,p){this.g=l,this.map=p}};function Ou(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function No(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ai(l){return l.h?1:l.g?l.g.size:0}function Ba(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Wd(l,p){l.g?l.g.add(p):l.h=p}function Kd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Ou.prototype.cancel=function(){if(this.i=Qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Qd(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let v of l.g.values())p=p.concat(v.G);return p}return C(l.i)}var Yd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jd(l,p){if(l){l=l.split("&");for(let v=0;v<l.length;v++){let D=l[v].indexOf("="),M,L=null;D>=0?(M=l[v].substring(0,D),L=l[v].substring(D+1)):M=l[v],p(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function wr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof wr?(this.l=l.l,ko(this,l.j),this.o=l.o,this.g=l.g,$a(this,l.u),this.h=l.h,Xd(this,_m(l.i)),this.m=l.m):l&&(p=String(l).match(Yd))?(this.l=!1,ko(this,p[1]||"",!0),this.o=qa(p[2]||""),this.g=qa(p[3]||"",!0),$a(this,p[4]),this.h=qa(p[5]||"",!0),Xd(this,p[6]||"",!0),this.m=qa(p[7]||"")):(this.l=!1,this.i=new Hr(null,this.l))}wr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(ir(p,za,!0),":");var v=this.g;return(v||p=="file")&&(l.push("//"),(p=this.o)&&l.push(ir(p,za,!0),"@"),l.push(La(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&l.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(ir(v,v.charAt(0)=="/"?pm:Fu,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",ir(v,Lu)),l.join("")},wr.prototype.resolve=function(l){let p=rr(this),v=!!l.j;v?ko(p,l.j):v=!!l.o,v?p.o=l.o:v=!!l.g,v?p.g=l.g:v=l.u!=null;var D=l.h;if(v)$a(p,l.u);else if(v=!!l.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var M=p.h.lastIndexOf("/");M!=-1&&(D=p.h.slice(0,M+1)+D)}if(M=D,M==".."||M==".")D="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){D=M.lastIndexOf("/",0)==0,M=M.split("/");let L=[];for(let Q=0;Q<M.length;){let ye=M[Q++];ye=="."?D&&Q==M.length&&L.push(""):ye==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),D&&Q==M.length&&L.push("")):(L.push(ye),D=!0)}D=L.join("/")}else D=M}return v?p.h=D:v=l.i.toString()!=="",v?Xd(p,_m(l.i)):v=!!l.m,v&&(p.m=l.m),p};function rr(l){return new wr(l)}function ko(l,p,v){l.j=v?qa(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function $a(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Xd(l,p,v){p instanceof Hr?(l.i=p,Ga(l.i,l.l)):(v||(p=ir(p,dt)),l.i=new Hr(p,l.l))}function ot(l,p,v){l.i.set(p,v)}function Ha(l){return ot(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function qa(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ir(l,p,v){return typeof l=="string"?(l=encodeURI(l).replace(p,$r),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function $r(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var za=/[#\/\?@]/g,Fu=/[#\?:]/g,pm=/[#\?]/g,dt=/[#\?@]/g,Lu=/#/g;function Hr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function sr(l){l.g||(l.g=new Map,l.h=0,l.i&&Jd(l.i,function(p,v){l.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}n=Hr.prototype,n.add=function(l,p){sr(this),this.i=null,l=xo(this,l);let v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(p),this.h+=1,this};function mm(l,p){sr(l),p=xo(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Zd(l,p){return sr(l),p=xo(l,p),l.g.has(p)}n.forEach=function(l,p){sr(this),this.g.forEach(function(v,D){v.forEach(function(M){l.call(p,M,D,this)},this)},this)};function gm(l,p){sr(l);let v=[];if(typeof p=="string")Zd(l,p)&&(v=v.concat(l.g.get(xo(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)v=v.concat(l[p]);return v}n.set=function(l,p){return sr(this),this.i=null,l=xo(this,l),Zd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=gm(this,l),l.length>0?String(l[0]):p):p};function ym(l,p,v){mm(l,p),v.length>0&&(l.i=null,l.g.set(xo(l,p),C(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let D=0;D<p.length;D++){var v=p[D];let M=La(v);v=gm(this,v);for(let L=0;L<v.length;L++){let Q=M;v[L]!==""&&(Q+="="+La(v[L])),l.push(Q)}}return this.i=l.join("&")};function _m(l){let p=new Hr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function xo(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Ga(l,p){p&&!l.j&&(sr(l),l.i=null,l.g.forEach(function(v,D){let M=D.toLowerCase();D!=M&&(mm(this,D),ym(this,M,v))},l)),l.j=p}function Ri(l,p){let v=new To;if(o.Image){let D=new Image;D.onload=h(qr,v,"TestLoadImage: loaded",!0,p,D),D.onerror=h(qr,v,"TestLoadImage: error",!1,p,D),D.onabort=h(qr,v,"TestLoadImage: abort",!1,p,D),D.ontimeout=h(qr,v,"TestLoadImage: timeout",!1,p,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else p(!1)}function vm(l,p){let v=new To,D=new AbortController,M=setTimeout(()=>{D.abort(),qr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:D.signal}).then(L=>{clearTimeout(M),L.ok?qr(v,"TestPingServer: ok",!0,p):qr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),qr(v,"TestPingServer: error",!1,p)})}function qr(l,p,v,D,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),D(v)}catch{}}function Em(){this.g=new om}function zr(l){this.i=l.Sb||null,this.h=l.ab||!1}m(zr,am),zr.prototype.g=function(){return new Vu(this.i,this.h)};function Vu(l,p){Jt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Vu,Jt),n=Vu.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,$n(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Im(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Im(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Wa(this):$n(this),this.readyState==3&&Im(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Wa(this))},n.Na=function(l){this.g&&(this.response=l,Wa(this))},n.ga=function(){this.g&&Wa(this)};function Wa(l){l.readyState=4,l.l=null,l.j=null,l.B=null,$n(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=p.next();return l.join(`\r
`)};function $n(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wm(l){let p="";return Re(l,function(v,D){p+=D,p+=":",p+=v,p+=`\r
`}),p}function eh(l,p,v){e:{for(D in v){var D=!1;break e}D=!0}D||(v=wm(v),typeof l=="string"?v!=null&&La(v):ot(l,p,v))}function at(l){Jt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(at,Jt);var Uu=/^https?$/i,bm=["POST","PUT"];n=at.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,v,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():So.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(L){Mo(this,L);return}if(l=v||"",v=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var M in D)v.set(M,D[M]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let L of D.keys())v.set(L,D.get(L));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(v.keys()).find(L=>L.toLowerCase()=="content-type"),M=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(bm,p,void 0)>=0)||D||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Q]of v)this.g.setRequestHeader(L,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(L){Mo(this,L)}};function Mo(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Oo(l),Fo(l)}function Oo(l){l.A||(l.A=!0,Xt(l,"complete"),Xt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Xt(this,"complete"),Xt(this,"abort"),Fo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fo(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?th(this):this.Xa())},n.Xa=function(){th(this)};function th(l){if(l.h&&typeof s<"u"){if(l.v&&Ge(l)==4)setTimeout(l.Ca.bind(l),0);else if(Xt(l,"readystatechange"),Ge(l)==4){l.h=!1;try{let L=l.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var D;if(D=L===0){let Q=String(l.D).match(Yd)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),D=!Uu.test(Q?Q.toLowerCase():"")}v=D}if(v)Xt(l,"complete"),Xt(l,"success");else{l.o=6;try{var M=Ge(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",Oo(l)}}finally{Fo(l)}}}}function Fo(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let v=l.g;l.g=null,p||Xt(l,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ge(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Ge(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),sm(p)}};function Tm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function CI(l){let p={};l=(l.g&&Ge(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(E(l[D]))continue;var v=Do(l[D]);let M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let L=p[M]||[];p[M]=L,L.push(v)}Tt(p,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(l,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||p}function nh(l){this.za=0,this.i=[],this.j=new To,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Lo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Lo("baseRetryDelayMs",5e3,l),this.Za=Lo("retryDelaySeedMs",1e4,l),this.Ta=Lo("forwardChannelMaxRetries",2,l),this.va=Lo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ou(l&&l.concurrentRequestLimit),this.Ba=new Em,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=nh.prototype,n.ka=8,n.I=1,n.connect=function(l,p,v,D){en(0),this.W=l,this.H=p||{},v&&D!==void 0&&(this.H.OSID=v,this.H.OAID=D),this.F=this.X,this.J=qu(this,null,this.W),Hn(this)};function ju(l){if(rh(l),l.I==3){var p=l.V++,v=rr(l.J);if(ot(v,"SID",l.M),ot(v,"RID",p),ot(v,"TYPE","terminate"),Gr(l,v),p=new Si(l,l.j,p),p.M=2,p.A=Ha(rr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=p.A,v=!0),v||(p.g=zu(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ao(p)}oh(l)}function vs(l){l.g&&($u(l),l.g.cancel(),l.g=null)}function rh(l){vs(l),l.v&&(o.clearTimeout(l.v),l.v=null),Hu(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Hn(l){if(!No(l.h)&&!l.m){l.m=!0;var p=l.Ea;ze||_(),ge||(ze(),ge=!0),w.add(p,l),l.D=0}}function Cm(l,p){return Ai(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=nr(d(l.Ea,l,p),Uo(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let M=new Si(this,this.j,l),L=this.o;if(this.U&&(L?(L=Fn(L),st(L,this.U)):L=this.U),this.u!==null||this.R||(M.J=L,L=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var D=this.i[v];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(p+=D,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=ih(this,M,p),v=rr(this.J),ot(v,"RID",l),ot(v,"CVER",22),this.G&&ot(v,"X-HTTP-Session-Id",this.G),Gr(this,v),L&&(this.R?p="headers="+La(wm(L))+"&"+p:this.u&&eh(v,this.u,L)),Wd(this.h,M),this.Ra&&ot(v,"TYPE","init"),this.S?(ot(v,"$req",p),ot(v,"SID","null"),M.U=!0,Ua(M,v,null)):Ua(M,v,p),this.I=2}}else this.I==3&&(l?Sm(this,l):this.i.length==0||No(this.h)||Sm(this))};function Sm(l,p){var v;p?v=p.l:v=l.V++;let D=rr(l.J);ot(D,"SID",l.M),ot(D,"RID",v),ot(D,"AID",l.K),Gr(l,D),l.u&&l.o&&eh(D,l.u,l.o),v=new Si(l,l.j,v,l.D+1),l.u===null&&(v.J=l.o),p&&(l.i=p.G.concat(l.i)),p=ih(l,v,1e3),v.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Wd(l.h,v),Ua(v,D,p)}function Gr(l,p){l.H&&Re(l.H,function(v,D){ot(p,D,v)}),l.l&&Re({},function(v,D){ot(p,D,v)})}function ih(l,p,v){v=Math.min(l.i.length,v);let D=l.l?d(l.l.Ka,l.l,l):null;e:{var M=l.i;let ye=-1;for(;;){let u=["count="+v];ye==-1?v>0?(ye=M[0].g,u.push("ofs="+ye)):ye=0:u.push("ofs="+ye);let f=!0;for(let g=0;g<v;g++){var L=M[g].g;let S=M[g].map;if(L-=ye,L<0)ye=Math.max(0,M[g].g-100),f=!1;else try{L="req"+L+"_"||"";try{var Q=S instanceof Map?S:Object.entries(S);for(let[O,V]of Q){let G=V;a(V)&&(G=_o(V)),u.push(L+O+"="+encodeURIComponent(G))}}catch(O){throw u.push(L+"type="+encodeURIComponent("_badmap")),O}}catch{D&&D(S)}}if(f){Q=u.join("&");break e}}Q=void 0}return l=l.i.splice(0,v),p.G=l,Q}function Bu(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ze||_(),ge||(ze(),ge=!0),w.add(p,l),l.A=0}}function Vo(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=nr(d(l.Da,l),Uo(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Ka(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=nr(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,en(10),vs(this),Ka(this))};function $u(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ka(l){l.g=new Si(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=rr(l.na);ot(p,"RID","rpc"),ot(p,"SID",l.M),ot(p,"AID",l.K),ot(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&ot(p,"TO",l.ia),ot(p,"TYPE","xmlhttp"),Gr(l,p),l.u&&l.o&&eh(p,l.u,l.o),l.O&&(l.g.H=l.O);var v=l.g;l=l.ba,v.M=1,v.A=Ha(rr(p)),v.u=null,v.R=!0,ja(v,l)}n.Va=function(){this.C!=null&&(this.C=null,vs(this),Vo(this),en(19))};function Hu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function sh(l,p){var v=null;if(l.g==p){Hu(l),$u(l),l.g=null;var D=2}else if(Ba(l.h,p))v=p.G,Kd(l.h,p),D=1;else return;if(l.I!=0){if(p.o)if(D==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var M=l.D;D=Io(),Xt(D,new Pu(D,v)),Hn(l)}else Bu(l);else if(M=p.m,M==3||M==0&&p.X>0||!(D==1&&Cm(l,p)||D==2&&Vo(l)))switch(v&&v.length>0&&(p=l.h,p.i=p.i.concat(v)),M){case 1:Pi(l,5);break;case 4:Pi(l,10);break;case 3:Pi(l,6);break;default:Pi(l,2)}}}function Uo(l,p){let v=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(v*=2),v*p}function Pi(l,p){if(l.j.info("Error code "+p),p==2){var v=d(l.bb,l),D=l.Ua;let M=!D;D=new wr(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ko(D,"https"),Ha(D),M?Ri(D.toString(),v):vm(D.toString(),v)}else en(2);l.I=0,l.l&&l.l.pa(p),oh(l),rh(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function oh(l){if(l.I=0,l.ja=[],l.l){let p=Qd(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ja,p),R(l.ja,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.oa()}}function qu(l,p,v){var D=v instanceof wr?rr(v):new wr(v);if(D.g!="")p&&(D.g=p+"."+D.g),$a(D,D.u);else{var M=o.location;D=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;let L=new wr(null);D&&ko(L,D),p&&(L.g=p),M&&$a(L,M),v&&(L.h=v),D=L}return v=l.G,p=l.wa,v&&p&&ot(D,v,p),ot(D,"VER",l.ka),Gr(l,D),D}function zu(l,p,v){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new at(new zr({ab:v})):new at(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}n=ah.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Es(){}Es.prototype.g=function(l,p){return new Sn(l,p)};function Sn(l,p){Jt.call(this),this.g=new nh(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!E(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Is(this)}m(Sn,Jt),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){ju(this.g)},Sn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.v&&(v={},v.__data__=_o(l),l=v);p.i.push(new fm(p.Ya++,l)),p.I==3&&Hn(p)},Sn.prototype.N=function(){this.g.l=null,delete this.j,ju(this.g),delete this.g,Sn.Z.N.call(this)};function ch(l){Ru.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let v in p){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}m(ch,Ru);function Ni(){Oa.call(this),this.status=1}m(Ni,Oa);function Is(l){this.g=l}m(Is,ah),Is.prototype.ra=function(){Xt(this.g,"a")},Is.prototype.qa=function(l){Xt(this.g,new ch(l))},Is.prototype.pa=function(l){Xt(this.g,new Ni)},Is.prototype.oa=function(){Xt(this.g,"b")},Es.prototype.createWebChannel=Es.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,lD=to.createWebChannelTransport=function(){return new Es},uD=to.getStatEventTarget=function(){return Io()},cD=to.Event=ys,Lv=to.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,pp=to.ErrorCode=Fa,Co.COMPLETE="complete",aD=to.EventType=Co,vo.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",Jt.prototype.listen=Jt.prototype.J,Zl=to.WebChannel=vo,TJ=to.FetchXmlHttpFactory=zr,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,oD=to.XhrIo=at}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");var vd="12.8.0";function A2(n){vd=n}var tu=new ma("@firebase/firestore");function ed(){return tu.logLevel}function ne(n,...e){if(tu.logLevel<=Me.DEBUG){let t=e.map(jA);tu.debug(`Firestore (${vd}): ${n}`,...t)}}function io(n,...e){if(tu.logLevel<=Me.ERROR){let t=e.map(jA);tu.error(`Firestore (${vd}): ${n}`,...t)}}function Ca(n,...e){if(tu.logLevel<=Me.WARN){let t=e.map(jA);tu.warn(`Firestore (${vd}): ${n}`,...t)}}function jA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,R2(n,r,t)}function R2(n,e,t){let r=`FIRESTORE (${vd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw io(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||R2(e,i,r)}function Se(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},X=class extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ei=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var qv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}},gD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Gv=class{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ei,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ei)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new ln(e)}},yD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},_D=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Kv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);let r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function CJ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var nu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=CJ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Le(n,e){return n<e?-1:n>e?1:0}function vD(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return dD(i)===dD(s)?Le(i,s):dD(i)?1:-1}return Le(n.length,e.length)}var SJ=55296,DJ=57343;function dD(n){let e=n.charCodeAt(0);return e>=SJ&&e<=DJ}function ad(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var HV="__name__",Qv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):vD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return eo.fromString(e.substring(4,e.length-2))}},Et=class n extends Qv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new X(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},AJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zn=class n extends Qv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return AJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HV}static keyField(){return new n([HV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(Et.fromString(e))}static fromName(e){return new n(Et.fromString(e).popFirst(5))}static empty(){return new n(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Et(e.slice()))}};function P2(n,e,t){if(!t)throw new X(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N2(n,e,t,r){if(e===!0&&r===!0)throw new X(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qV(n){if(!le.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zV(n){if(le.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function k2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fe(12329,{type:typeof n})}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xp(n);throw new X(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Vt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ed(n,e){if(!k2(n))throw new X(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new X(H.INVALID_ARGUMENT,t);return!0}var GV=-62135596800,WV=1e6,Ut=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*WV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<GV)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WV}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ed(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-GV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:Vt("string",Ut._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};var Ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ut(0,0))}static max(){return new n(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ep=-1,Yv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Yv.UNKNOWN_ID=-1;function RJ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new Ut(t+1,0):new Ut(t,r));return new ru(i,le.empty(),e)}function PJ(n){return new ru(n.readTime,n.key,Ep)}var ru=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ae.min(),le.empty(),Ep)}static max(){return new n(Ae.max(),le.empty(),Ep)}};function NJ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}var kJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ED=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Id(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==kJ)throw n;ne("LocalStore","Unexpectedly lost primary lease")}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function xJ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wd(n){return n.name==="IndexedDbTransactionError"}var BA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),$A=-1;function SE(n){return n==null}function Ip(n){return n===0&&1/n==-1/0}function MJ(n){return typeof n=="number"&&Number.isInteger(n)&&!Ip(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var x2="";function OJ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KV(e)),e=FJ(n.get(t),e);return KV(e)}function FJ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case x2:t+="";break;default:t+=s}}return t}function KV(n){return n+x2+""}var LJ="remoteDocuments",M2="owner";var O2="mutationQueues";var F2="mutations";var L2="documentMutations",VJ="remoteDocumentsV14";var V2="remoteDocumentGlobal";var U2="targets";var j2="targetDocuments";var B2="targetGlobal",$2="collectionParents";var H2="clientMetadata";var q2="bundles";var z2="namedQueries";var UJ="indexConfiguration";var jJ="indexState";var BJ="indexEntries";var G2="documentOverlays";var $J="globals";var HJ=[O2,F2,L2,LJ,U2,M2,B2,j2,H2,V2,$2,q2,z2],RTe=[...HJ,G2],qJ=[O2,F2,L2,VJ,U2,M2,B2,j2,H2,V2,$2,q2,z2,G2],zJ=qJ,GJ=[...zJ,UJ,jJ,BJ];var PTe=[...GJ,$J];function QV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ra(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function W2(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pt=class n{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}},id=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ss=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}};ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dn=class n{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Jv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vr=class n{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new n([])}unionWith(e){let t=new dn(Zn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ad(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Tn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xv("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tn.EMPTY_BYTE_STRING=new Tn("");var WJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(n){if(it(!!n,39018),typeof n=="string"){let e=0,t=WJ.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oo(n){return typeof n=="string"?Tn.fromBase64String(n):Tn.fromUint8Array(n)}var K2="server_timestamp",Q2="__type__",Y2="__previous_value__",J2="__local_write_time__";function DE(n){return(n?.mapValue?.fields||{})[Q2]?.stringValue===K2}function AE(n){let e=n.mapValue.fields[Y2];return DE(e)?AE(e):e}function wp(n){let e=so(n.mapValue.fields[J2].timestampValue);return new Ut(e.seconds,e.nanos)}var ID=class{constructor(e,t,r,i,s,o,a,c,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}},Zv="(default)",bp=class n{constructor(e,t){this.projectId=e,this.database=t||Zv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Zv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function X2(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new X(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bp(n.options.projectId,e)}var HA="__type__",Z2="__max__",Vv={mapValue:{fields:{__type__:{stringValue:Z2}}}},qA="__vector__",cd="value";function Sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DE(n)?4:tU(n)?9007199254740991:eU(n)?10:11:fe(28295,{value:n})}function ls(n,e){if(n===e)return!0;let t=Sa(n);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wp(n).isEqual(wp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=so(i.timestampValue),a=so(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return oo(i.bytesValue).isEqual(oo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=bt(i.doubleValue),a=bt(s.doubleValue);return o===a?Ip(o)===Ip(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return ad(n.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(QV(o)!==QV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ls(o[c],a[c])))return!1;return!0})(n,e);default:return fe(52216,{left:n})}}function Tp(n,e){return(n.values||[]).find(t=>ls(t,e))!==void 0}function ud(n,e){if(n===e)return 0;let t=Sa(n),r=Sa(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=bt(s.integerValue||s.doubleValue),c=bt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return YV(n.timestampValue,e.timestampValue);case 4:return YV(wp(n),wp(e));case 5:return vD(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=oo(s),c=oo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Le(a[d],c[d]);if(h!==0)return h}return Le(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Le(bt(s.latitude),bt(o.latitude));return a!==0?a:Le(bt(s.longitude),bt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return JV(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[cd]?.arrayValue,h=c[cd]?.arrayValue,m=Le(d?.values?.length||0,h?.values?.length||0);return m!==0?m:JV(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Vv.mapValue&&o===Vv.mapValue)return 0;if(s===Vv.mapValue)return 1;if(o===Vv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){let y=vD(c[m],h[m]);if(y!==0)return y;let C=ud(a[c[m]],d[h[m]]);if(C!==0)return C}return Le(c.length,h.length)})(n.mapValue,e.mapValue);default:throw fe(23264,{he:t})}}function YV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);let t=so(n),r=so(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function JV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ud(t[i],r[i]);if(s)return s}return Le(t.length,r.length)}function ld(n){return wD(n)}function wD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=so(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=wD(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${wD(t.fields[o])}`;return i+"}"})(n.mapValue):fe(61005,{value:n})}function Bv(n){switch(Sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=AE(n);return e?16+Bv(e):16;case 5:return 2*n.stringValue.length;case 6:return oo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Bv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ra(r.fields,(s,o)=>{i+=s.length+Bv(o)}),i})(n.mapValue);default:throw fe(13486,{value:n})}}function zA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bD(n){return!!n&&"integerValue"in n}function GA(n){return!!n&&"arrayValue"in n}function XV(n){return!!n&&"nullValue"in n}function ZV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $v(n){return!!n&&"mapValue"in n}function eU(n){return(n?.mapValue?.fields||{})[HA]?.stringValue===qA}function yp(n){if(n.geoPointValue)return{geoPointValue:j({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:j({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ra(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yp(n.arrayValue.values[t]);return e}return j({},n)}function tU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Z2}var kTe={mapValue:{fields:{[HA]:{stringValue:qA},[cd]:{arrayValue:{}}}}};var Xn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$v(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yp(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=yp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());$v(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$v(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ra(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(yp(this.value))}};function nU(n){let e=[];return Ra(n.fields,(t,r)=>{let i=new Zn([t]);if($v(r)){let s=nU(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Vr(e)}var wi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ae.min(),Ae.min(),Ae.min(),Xn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ae.min(),Ae.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ae.min(),Ae.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var iu=class{constructor(e,t){this.position=e,this.inclusive=t}};function e2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),t.key):r=ud(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function t2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ls(n.position[t],e.position[t]))return!1;return!0}var su=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function KJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var eE=class{},Lt=class n extends eE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CD(e,t,r):t==="array-contains"?new AD(e,r):t==="in"?new RD(e,r):t==="not-in"?new PD(e,r):t==="array-contains-any"?new ND(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SD(e,r):new DD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ud(t,this.value)):t!==null&&Sa(this.value)===Sa(t)&&this.matchesComparison(ud(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ur=class n extends eE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return rU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function rU(n){return n.op==="and"}function iU(n){return QJ(n)&&rU(n)}function QJ(n){for(let e of n.filters)if(e instanceof Ur)return!1;return!0}function TD(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+ld(n.value);if(iU(n))return n.filters.map(e=>TD(e)).join(",");{let e=n.filters.map(t=>TD(t)).join(",");return`${n.op}(${e})`}}function sU(n,e){return n instanceof Lt?(function(r,i){return i instanceof Lt&&r.op===i.op&&r.field.isEqual(i.field)&&ls(r.value,i.value)})(n,e):n instanceof Ur?(function(r,i){return i instanceof Ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sU(o,i.filters[a]),!0):!1})(n,e):void fe(19439)}function oU(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ld(t.value)}`})(n):n instanceof Ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(oU).join(" ,")+"}"})(n):"Filter"}var CD=class extends Lt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},SD=class extends Lt{constructor(e,t){super(e,"in",t),this.keys=aU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},DD=class extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=aU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function aU(n,e){return(e.arrayValue?.values||[]).map(t=>le.fromName(t.referenceValue))}var AD=class extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return GA(t)&&Tp(t.arrayValue,this.value)}},RD=class extends Lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Tp(this.value.arrayValue,t)}},PD=class extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tp(this.value.arrayValue,t)}},ND=class extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!GA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tp(this.value.arrayValue,r))}};var kD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function n2(n,e=null,t=[],r=[],i=null,s=null,o=null){return new kD(n,e,t,r,i,s,o)}function WA(n){let e=Se(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),SE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ld(r)).join(",")),e.Te=t}return e.Te}function KA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!t2(n.startAt,e.startAt)&&t2(n.endAt,e.endAt)}function xD(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ou=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function YJ(n,e,t,r,i,s,o,a){return new ou(n,e,t,r,i,s,o,a)}function Mp(n){return new ou(n)}function r2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JJ(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function QA(n){return n.collectionGroup!==null}function sd(n){let e=Se(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dn(Zn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new su(s,r))}),t.has(Zn.keyField().canonicalString())||e.Ie.push(new su(Zn.keyField(),r))}return e.Ie}function os(n){let e=Se(n);return e.Ee||(e.Ee=XJ(e,sd(n))),e.Ee}function XJ(n,e){if(n.limitType==="F")return n2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new su(i.field,s)});let t=n.endAt?new iu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new iu(n.startAt.position,n.startAt.inclusive):null;return n2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RE(n,e){let t=n.filters.concat([e]);return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tE(n,e,t){return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function PE(n,e){return KA(os(n),os(e))&&n.limitType===e.limitType}function cU(n){return`${WA(os(n))}|lt:${n.limitType}`}function td(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>oU(i)).join(", ")}]`),SE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ld(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ld(i)).join(",")),`Target(${r})`})(os(n))}; limitType=${n.limitType})`}function NE(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of sd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=e2(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,sd(r),i)||r.endAt&&!(function(o,a,c){let d=e2(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,sd(r),i))})(n,e)}function ZJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uU(n){return(e,t)=>{let r=!1;for(let i of sd(n)){let s=eX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eX(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ud(c,d):fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:n.dir})}}var ao=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return W2(this.inner)}size(){return this.innerSize}};var tX=new Pt(le.comparator);function co(){return tX}var lU=new Pt(le.comparator);function gp(...n){let e=lU;for(let t of n)e=e.insert(t.key,t);return e}function dU(n){let e=lU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zc(){return _p()}function hU(){return _p()}function _p(){return new ao(n=>n.toString(),(n,e)=>n.isEqual(e))}var nX=new Pt(le.comparator),rX=new dn(le.comparator);function Oe(...n){let e=rX;for(let t of n)e=e.add(t);return e}var iX=new dn(Le);function sX(){return iX}function YA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ip(e)?"-0":e}}function fU(n){return{integerValue:""+n}}function oX(n,e){return MJ(e)?fU(e):YA(n,e)}var dd=class{constructor(){this._=void 0}};function aX(n,e,t){return n instanceof hd?(function(i,s){let o={fields:{[Q2]:{stringValue:K2},[J2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&DE(s)&&(s=AE(s)),s&&(o.fields[Y2]=s),{mapValue:o}})(t,e):n instanceof au?mU(n,e):n instanceof cu?gU(n,e):(function(i,s){let o=pU(i,s),a=i2(o)+i2(i.Ae);return bD(o)&&bD(i.Ae)?fU(a):YA(i.serializer,a)})(n,e)}function cX(n,e,t){return n instanceof au?mU(n,e):n instanceof cu?gU(n,e):t}function pU(n,e){return n instanceof fd?(function(r){return bD(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var hd=class extends dd{},au=class extends dd{constructor(e){super(),this.elements=e}};function mU(n,e){let t=yU(e);for(let r of n.elements)t.some(i=>ls(i,r))||t.push(r);return{arrayValue:{values:t}}}var cu=class extends dd{constructor(e){super(),this.elements=e}};function gU(n,e){let t=yU(e);for(let r of n.elements)t=t.filter(i=>!ls(i,r));return{arrayValue:{values:t}}}var fd=class extends dd{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function i2(n){return bt(n.integerValue||n.doubleValue)}function yU(n){return GA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof au&&i instanceof au||r instanceof cu&&i instanceof cu?ad(r.elements,i.elements,ls):r instanceof fd&&i instanceof fd?ls(r.Ae,i.Ae):r instanceof hd&&i instanceof hd})(n.transform,e.transform)}var MD=class{constructor(e,t){this.version=e,this.transformResults=t}},Ii=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var pd=class{};function _U(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new md(n.key,Ii.none()):new uu(n.key,n.data,Ii.none());{let t=n.data,r=Xn.empty(),i=new dn(Zn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ds(n.key,r,new Vr(i.toArray()),Ii.none())}}function lX(n,e,t){n instanceof uu?(function(i,s,o){let a=i.value.clone(),c=o2(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ds?(function(i,s,o){if(!Hv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=o2(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(vU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function vp(n,e,t,r){return n instanceof uu?(function(s,o,a,c){if(!Hv(s.precondition,o))return a;let d=s.value.clone(),h=a2(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof ds?(function(s,o,a,c){if(!Hv(s.precondition,o))return a;let d=a2(s.fieldTransforms,c,o),h=o.data;return h.setAll(vU(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(s,o,a){return Hv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function dX(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=pU(r.transform,i||null);s!=null&&(t===null&&(t=Xn.empty()),t.set(r.field,s))}return t||null}function s2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ad(r,i,(s,o)=>uX(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var uu=class extends pd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ds=class extends pd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function vU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function o2(n,e,t){let r=new Map;it(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,cX(o,a,t[i]))}return r}function a2(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,aX(s,o,e))}return r}var md=class extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},OD=class extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var FD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&lX(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=vp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=vp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hU();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=_U(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ad(this.mutations,e.mutations,(t,r)=>s2(t,r))&&ad(this.baseMutations,e.baseMutations,(t,r)=>s2(t,r))}},LD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return nX})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var VD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Kt,je;function hX(n){switch(n){case H.OK:return fe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return fe(15467,{code:n})}}function EU(n){if(n===void 0)return io("GRPC error has no .code"),H.UNKNOWN;switch(n){case Kt.OK:return H.OK;case Kt.CANCELLED:return H.CANCELLED;case Kt.UNKNOWN:return H.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return H.INTERNAL;case Kt.UNAVAILABLE:return H.UNAVAILABLE;case Kt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Kt.NOT_FOUND:return H.NOT_FOUND;case Kt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Kt.ABORTED:return H.ABORTED;case Kt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Kt.DATA_LOSS:return H.DATA_LOSS;default:return fe(39323,{code:n})}}(je=Kt||(Kt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";var fX=null;function pX(){return new TextEncoder}var mX=new eo([4294967295,4294967295],0);function c2(n){let e=pX().encode(n),t=new sD;return t.update(e),new Uint8Array(t.digest())}function u2(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new eo([t,r],0),new eo([i,s],0)]}var jD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(r<0)throw new eu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=eo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(eo.fromNumber(r)));return i.compare(mX)===1&&(i=new eo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=c2(e),[r,i]=u2(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=c2(e),[r,i]=u2(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.be(o)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},eu=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nE=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ae.min(),i,new Pt(Le),co(),Oe())}},Cp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Oe(),Oe(),Oe())}};var od=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},rE=class{constructor(e,t){this.targetId=e,this.Ce=t}},iE=class{constructor(e,t,r=Tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},sE=class{constructor(){this.ve=0,this.Fe=l2(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),r=Oe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new Cp(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=l2()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},BD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=co(),this.He=Uv(),this.Je=Uv(),this.Ze=new Pt(Le)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(xD(s))if(r===0){let o=new le(s.path);this.et(t,o,wi.newNoDocument(o,Ae.min()))}else it(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}fX?.lt((function(h,m,y,C,R){let P={localCacheCount:h,existenceFilterCount:m.count,databaseId:y.database,projectId:y.projectId},x=m.unchangedNames;return x&&(P.bloomFilter={applied:R===0,hashCount:x?.hashCount??0,bitmapLength:x?.bits?.bitmap?.length??0,padding:x?.bits?.padding??0,mightContain:$=>C?.mightContain($)??!1}),P})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=oo(r).toUint8Array()}catch(c){if(c instanceof Xv)return Ca("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jD(o,i,s)}catch(c){return Ca(c instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&xD(a.target)){let c=new le(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,wi.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.Ke())}});let r=Oe();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new nE(e,t,this.Ze,this.je,r);return this.je=co(),this.He=Uv(),this.Je=Uv(),this.Ze=new Pt(Le),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new sE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new dn(Le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new dn(Le),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Uv(){return new Pt(le.comparator)}function l2(){return new Pt(le.comparator)}var gX={asc:"ASCENDING",desc:"DESCENDING"},yX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_X={and:"AND",or:"OR"},$D=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function HD(n,e){return n.useProto3Json||SE(e)?e:{value:e}}function oE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vX(n,e){return oE(n,e.toTimestamp())}function as(n){return it(!!n,49232),Ae.fromTimestamp((function(t){let r=so(t);return new Ut(r.seconds,r.nanos)})(n))}function JA(n,e){return qD(n,e).canonicalString()}function qD(n,e){let t=(function(i){return new Et(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wU(n){let e=Et.fromString(n);return it(DU(e),10190,{key:e.toString()}),e}function zD(n,e){return JA(n.databaseId,e.path)}function hD(n,e){let t=wU(e);if(t.get(1)!==n.databaseId.projectId)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(TU(t))}function bU(n,e){return JA(n.databaseId,e)}function EX(n){let e=wU(n);return e.length===4?Et.emptyPath():TU(e)}function GD(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TU(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function d2(n,e,t){return{name:zD(n,e),fields:t.value.mapValue.fields}}function IX(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(it(h===void 0||typeof h=="string",58123),Tn.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Tn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?H.UNKNOWN:EU(d.code);return new X(h,d.message||"")})(o);t=new iE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hD(n,r.document.name),s=as(r.document.updateTime),o=r.document.createTime?as(r.document.createTime):Ae.min(),a=new Xn({mapValue:{fields:r.document.fields}}),c=wi.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new od(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hD(n,r.document),s=r.readTime?as(r.readTime):Ae.min(),o=wi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new od([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hD(n,r.document),s=r.removedTargetIds||[];t=new od([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new UD(i,s),a=r.targetId;t=new rE(a,o)}}return t}function wX(n,e){let t;if(e instanceof uu)t={update:d2(n,e.key,e.value)};else if(e instanceof md)t={delete:zD(n,e.key)};else if(e instanceof ds)t={update:d2(n,e.key,e.data),updateMask:NX(e.fieldMask)};else{if(!(e instanceof OD))return fe(16599,{dt:e.type});t={verify:zD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof hd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw fe(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:vX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)})(n,e.precondition)),t}function bX(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?as(i.updateTime):as(s);return o.isEqual(Ae.min())&&(o=as(s)),new MD(o,i.transformResults||[])})(t,e))):[]}function TX(n,e){return{documents:[bU(n,e.path)]}}function CX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bU(n,i);let s=(function(d){if(d.length!==0)return SU(Ur.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:nd(y.field),direction:AX(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=HD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function SX(n){let e=EX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(m){let y=CU(m);return y instanceof Ur&&iU(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(m){return m.map(y=>(function(R){return new su(rd(R.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let y;return y=typeof m=="object"?m.value:m,SE(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(m){let y=!!m.before,C=m.values||[];return new iu(C,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(m){let y=!m.before,C=m.values||[];return new iu(C,y)})(t.endAt)),YJ(e,i,o,s,a,"F",c,d)}function DX(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CU(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=rd(t.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=rd(t.unaryFilter.field);return Lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=rd(t.unaryFilter.field);return Lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=rd(t.unaryFilter.field);return Lt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(rd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ur.create(t.compositeFilter.filters.map(r=>CU(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(t.compositeFilter.op))})(n):fe(30097,{filter:n})}function AX(n){return gX[n]}function RX(n){return yX[n]}function PX(n){return _X[n]}function nd(n){return{fieldPath:n.canonicalString()}}function rd(n){return Zn.fromServerFormat(n.fieldPath)}function SU(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(ZV(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NAN"}};if(XV(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZV(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NAN"}};if(XV(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nd(t.field),op:RX(t.op),value:t.value}}})(n):n instanceof Ur?(function(t){let r=t.getFilters().map(i=>SU(i));return r.length===1?r[0]:{compositeFilter:{op:PX(t.op),filters:r}}})(n):fe(54877,{filter:n})}function NX(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function AU(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var Sp=class n{constructor(e,t,r,i,s=Ae.min(),o=Ae.min(),a=Tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var WD=class{constructor(e){this.yt=e}};function RU(n){let e=SX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tE(e,e.limit,"L"):e}var aE=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bt(e.integerValue));else if("doubleValue"in e){let r=bt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ip(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=so(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(oo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?tU(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):eU(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):fe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=cd,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bt(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};aE.Wt=new aE;var KD=class{constructor(){this.Sn=new QD}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(ru.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(ru.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},QD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dn(Et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dn(Et.comparator)).toArray()}};var xTe=new Uint8Array(0);var h2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PU=41943040,Lr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(PU,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);var Dp=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var f2="LruGarbageCollector",kX=1048576;function p2([n,e],[t,r]){let i=Le(n,t);return i===0?Le(e,r):i}var YD=class{constructor(e){this.Pr=e,this.buffer=new dn(p2),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();p2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},JD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ne(f2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wd(t)?ne(f2,"Ignoring IndexedDB error during garbage collection: ",t):await Id(t)}await this.Ar(3e5)})}},XD=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(BA.ce);let r=new YD(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(h2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h2):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ed()<=Me.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}};function xX(n,e){return new XD(n,e)}var ZD=class{constructor(){this.changes=new ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var eA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var tA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&vp(r.mutation,i,Vr.empty(),Ut.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){let i=Zc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=gp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Zc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=co(),o=_p(),a=(function(){return _p()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ds)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),vp(h.mutation,d,h.mutation.getFieldMask(),Ut.now())):o.set(d.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new eA(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=_p(),i=new Pt((o,a)=>o-a),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Vr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let m=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,m=hU();h.forEach(y=>{if(!s.has(y)){let C=_U(t.get(y),r.get(y));C!==null&&m.set(y,C),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return JJ(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):QA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(Zc()),a=Ep,c=s;return o.next(d=>z.forEach(d,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Oe())).next(h=>({batchId:a,changes:dU(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=gp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=gp();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,c=>{let d=(function(m,y){return new ou(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,wi.newInvalidDocument(h)))});let a=gp();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&vp(h.mutation,d,Vr.empty(),Ut.now()),NE(t,d)&&(a=a.insert(c,d))}),a})}};var nA=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:as(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:RU(i.bundledQuery),readTime:as(i.readTime)}})(t)),z.resolve()}};var rA=class{constructor(){this.overlays=new Pt(le.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Zc();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=Zc(),s=t.length+1,o=new le(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Pt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Zc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Zc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return z.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VD(t,r));let s=this.Lr.get(t);s===void 0&&(s=Oe(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}};var iA=class{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var Ap=class{constructor(){this.kr=new dn(Qt.Kr),this.qr=new dn(Qt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new Qt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Qt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new le(new Et([])),r=new Qt(t,e),i=new Qt(t,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new le(new Et([])),r=new Qt(t,e),i=new Qt(t,e+1),s=Oe();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Qt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return le.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||le.comparator(e.key,t.key)}};var sA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new dn(Qt.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new FD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Jr=this.Jr.add(new Qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?$A:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qt(t,0),i=new Qt(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Le);return t.forEach(i=>{let s=new Qt(i,0),o=new Qt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;le.isDocumentKey(s)||(s=s.child(""));let o=new Qt(new le(s),0),a=new dn(Le);return this.Jr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),z.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,i=>{let s=new Qt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new Qt(t,0),i=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var oA=class{constructor(e){this.ti=e,this.docs=(function(){return new Pt(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():wi.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wi.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=co(),o=t.path,a=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||NJ(PJ(h),r)<=0||(i.has(h.key)||NE(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){fe(9500)}ni(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aA(this)}getSize(e){return z.resolve(this.size)}},aA=class extends ZD{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var cA=class{constructor(e){this.persistence=e,this.ri=new ao(t=>WA(t),KA),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new Ap,this.targetCount=0,this.oi=Dp._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Dp(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}};var cE=class{constructor(e,t){this._i={},this.overlays={},this.ai=new BA(0),this.ui=!1,this.ui=!0,this.ci=new iA,this.referenceDelegate=e(this),this.li=new cA(this),this.indexManager=new KD,this.remoteDocumentCache=(function(i){return new oA(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new WD(t),this.Pi=new nA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new sA(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);let i=new uA(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return z.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},uA=class extends ED{constructor(e){super(),this.currentSequenceNumber=e}},lA=class n{constructor(e){this.persistence=e,this.Ri=new Ap,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw fe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,r=>{let i=le.fromPath(r);return this.mi(e,i).next(s=>{s||t.removeEntry(i,Ae.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},uE=class n{constructor(e,t){this.persistence=e,this.fi=new ao(r=>OJ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xX(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return z.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bv(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var dA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Oe(),i=Oe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fA=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return KF()?8:xJ(un())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.gs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hA;return this.ys(e,t,o).next(a=>{if(s.result=a,this.As)return this.ws(e,t,o,a.size)})}).next(()=>s.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(ed()<=Me.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(ed()<=Me.DEBUG&&ne("QueryEngine","Query:",td(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(ed()<=Me.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,os(t))):z.resolve())}gs(e,t){if(r2(t))return z.resolve(null);let r=os(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tE(t,null,"F"),r=os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Oe(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ss(t,d,o,c.readTime)?this.gs(e,tE(t,null,"F")):this.Ds(e,d,t,c)}))})))}ps(e,t,r,i){return r2(t)||i.isEqual(Ae.min())?z.resolve(null):this.fs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ss(t,o,r,i)?z.resolve(null):(ed()<=Me.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),td(t)),this.Ds(e,o,t,RJ(i,Ep)).next(a=>a))})}bs(e,t){let r=new dn(uU(e));return t.forEach((i,s)=>{NE(e,s)&&(r=r.add(s))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return ed()<=Me.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",td(t)),this.fs.getDocumentsMatchingQuery(e,t,ru.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var XA="LocalStore",MX=3e8,pA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Pt(Le),this.Fs=new ao(s=>WA(s),KA),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function OX(n,e,t,r){return new pA(n,e,t,r)}async function NU(n,e){let t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Oe();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function FX(n,e){let t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let m=d.batch,y=m.keys(),C=z.resolve();return y.forEach(R=>{C=C.next(()=>h.getEntry(c,R)).next(P=>{let x=d.docVersions.get(R);it(x!==null,48541),P.version.compareTo(x)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),C.next(()=>a.mutationQueue.removeMutationBatch(c,m))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Oe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kU(n){let e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function LX(n,e){let t=Se(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((h,m)=>{let y=i.get(m);if(!y)return;a.push(t.li.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.li.addMatchingKeys(s,h.addedDocuments,m)));let C=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(Tn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(m,C),(function(P,x,$){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=MX?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(y,C,h)&&a.push(t.li.updateTargetData(s,C))});let c=co(),d=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(VX(s,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(Ae.min())){let h=t.li.getLastRemoteSnapshotVersion(s).next(m=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.vs=i,s))}function VX(n,e,t){let r=Oe(),i=Oe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=co();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ne(XA,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function UX(n,e){let t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$A),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jX(n,e){let t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):t.li.allocateTargetId(r).next(o=>(i=new Sp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function mA(n,e,t){let r=Se(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wd(o))throw o;ne(XA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function m2(n,e,t){let r=Se(n),i=Ae.min(),s=Oe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let m=Se(c),y=m.Fs.get(h);return y!==void 0?z.resolve(m.vs.get(y)):m.li.getTargetData(d,h)})(r,o,os(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Ae.min(),t?s:Oe())).next(a=>(BX(r,ZJ(e),a),{documents:a,ks:s})))}function BX(n,e,t){let r=n.Ms.get(e)||Ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ms.set(e,r)}var lE=class{constructor(){this.activeTargetIds=sX()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gA=class{constructor(){this.vo=new lE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new lE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yA=class{Mo(e){}shutdown(){}};var g2="ConnectivityMonitor",dE=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ne(g2,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){ne(g2,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var jv=null;function _A(){return jv===null?jv=(function(){return 268435456+Math.round(2147483648*Math.random())})():jv++,"0x"+jv.toString(16)}var fD="RestConnection",$X={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},vA=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Zv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=_A(),a=this.Qo(e,t.toUriEncodedString());ne(fD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,s);let{host:d}=new URL(a),h=pa(d);return this.zo(e,a,c,r,h).then(m=>(ne(fD,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ca(fD,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",r),m})}jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,t){let r=$X[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var EA=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Mn="WebChannelConnection",mp=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},hE=class n extends vA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=uD();mp(e,cD.STAT_EVENT,t=>{t.stat===Lv.PROXY?ne(Mn,"STAT_EVENT: detected buffering proxy"):t.stat===Lv.NOPROXY&&ne(Mn,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,s){let o=_A();return new Promise((a,c)=>{let d=new oD;d.setWithCredentials(!0),d.listenOnce(aD.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case pp.NO_ERROR:let m=d.getResponseJson();ne(Mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case pp.TIMEOUT:ne(Mn,`RPC '${e}' ${o} timed out`),c(new X(H.DEADLINE_EXCEEDED,"Request time out"));break;case pp.HTTP_ERROR:let y=d.getStatus();if(ne(Mn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let R=C?.error;if(R&&R.status&&R.message){let P=(function($){let W=$.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(W)>=0?W:H.UNKNOWN})(R.status);c(new X(P,R.message))}else c(new X(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(H.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ne(Mn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ne(Mn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=_A(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let d=s.join("");ne(Mn,`Creating RPC '${e}' stream ${i}: ${d}`,a);let h=o.createWebChannel(d,a);this.I_(h);let m=!1,y=!1,C=new EA({Ho:R=>{y?ne(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(ne(Mn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),ne(Mn,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},Jo:()=>h.close()});return mp(h,Zl.EventType.OPEN,()=>{y||(ne(Mn,`RPC '${e}' stream ${i} transport opened.`),C.i_())}),mp(h,Zl.EventType.CLOSE,()=>{y||(y=!0,ne(Mn,`RPC '${e}' stream ${i} transport closed`),C.o_(),this.E_(h))}),mp(h,Zl.EventType.ERROR,R=>{y||(y=!0,Ca(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.o_(new X(H.UNAVAILABLE,"The operation could not be completed")))}),mp(h,Zl.EventType.MESSAGE,R=>{if(!y){let P=R.data[0];it(!!P,16349);let x=P,$=x?.error||x[0]?.error;if($){ne(Mn,`RPC '${e}' stream ${i} received error:`,$);let W=$.status,J=(function(ge){let w=Kt[ge];if(w!==void 0)return EU(w)})(W),ue=$.message;J===void 0&&(J=H.INTERNAL,ue="Unknown error status: "+W+" with message "+$.message),y=!0,C.o_(new X(J,ue)),h.close()}else ne(Mn,`RPC '${e}' stream ${i} received:`,P),C.__(P)}}),n.u_(),setTimeout(()=>{C.s_()},0),C}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return lD()}};function HX(n){return new hE(n)}function pD(){return typeof document<"u"?document:null}function Op(n){return new $D(n,!0)}hE.c_=!1;var fE=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var y2="PersistentStream",pE=class{constructor(e,t,r,i,s,o,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new X(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ne(y2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(ne(y2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},IA=class extends pE{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=IX(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?as(o.readTime):Ae.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=GD(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=xD(c)?{documents:TX(s,c)}:{query:CX(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=IU(s,o.resumeToken);let d=HD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ae.min())>0){a.readTime=oE(s,o.snapshotVersion.toTimestamp());let d=HD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=DX(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=GD(this.serializer),t.removeTarget=e,this.K_(t)}},wA=class extends pE{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=bX(e.writeResults,e.commitTime),r=as(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=GD(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>wX(this.serializer,r))};this.K_(t)}};var bA=class{},TA=class extends bA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,qD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(H.UNKNOWN,s.toString())})}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,qD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function qX(n,e,t,r){return new TA(n,e,t,r)}var CA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var lu="RemoteStore",SA=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{pu(this)&&(ne(lu,"Restarting streams for network reachability change."),await(async function(c){let d=Se(c);d.Ea.add(4),await Fp(d),d.Va.set("Unknown"),d.Ea.delete(4),await kE(d)})(this))})}),this.Va=new CA(r,i)}};async function kE(n){if(pu(n))for(let e of n.Ra)await e(!0)}async function Fp(n){for(let e of n.Ra)await e(!1)}function xU(n,e){let t=Se(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),nR(t)?tR(t):bd(t).O_()&&eR(t,e))}function ZA(n,e){let t=Se(n),r=bd(t);t.Ia.delete(e),r.O_()&&MU(t,e),t.Ia.size===0&&(r.O_()?r.L_():pu(t)&&t.Va.set("Unknown"))}function eR(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bd(n).Z_(e)}function MU(n,e){n.da.$e(e),bd(n).X_(e)}function tR(n){n.da=new BD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),bd(n).start(),n.Va.ua()}function nR(n){return pu(n)&&!bd(n).x_()&&n.Ia.size>0}function pu(n){return Se(n).Ea.size===0}function OU(n){n.da=void 0}async function zX(n){n.Va.set("Online")}async function GX(n){n.Ia.forEach((e,t)=>{eR(n,e)})}async function WX(n,e){OU(n),nR(n)?(n.Va.ha(e),tR(n)):n.Va.set("Unknown")}async function KX(n,e,t){if(n.Va.set("Online"),e instanceof iE&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){ne(lu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mE(n,r)}else if(e instanceof od?n.da.Xe(e):e instanceof rE?n.da.st(e):n.da.tt(e),!t.isEqual(Ae.min()))try{let r=await kU(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.da.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Tn.EMPTY_BYTE_STRING,h.snapshotVersion)),MU(s,c);let m=new Sp(h.target,c,d,h.sequenceNumber);eR(s,m)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ne(lu,"Failed to raise snapshot:",r),await mE(n,r)}}async function mE(n,e,t){if(!wd(e))throw e;n.Ea.add(1),await Fp(n),n.Va.set("Offline"),t||(t=()=>kU(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ne(lu,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await kE(n)})}function FU(n,e){return e().catch(t=>mE(n,t,e))}async function xE(n){let e=Se(n),t=Da(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$A;for(;QX(e);)try{let i=await UX(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,YX(e,i)}catch(i){await mE(e,i)}LU(e)&&VU(e)}function QX(n){return pu(n)&&n.Ta.length<10}function YX(n,e){n.Ta.push(e);let t=Da(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function LU(n){return pu(n)&&!Da(n).x_()&&n.Ta.length>0}function VU(n){Da(n).start()}async function JX(n){Da(n).ra()}async function XX(n){let e=Da(n);for(let t of n.Ta)e.ea(t.mutations)}async function ZX(n,e,t){let r=n.Ta.shift(),i=LD.from(r,e,t);await FU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await xE(n)}async function eZ(n,e){e&&Da(n).Y_&&await(async function(r,i){if((function(o){return hX(o)&&o!==H.ABORTED})(i.code)){let s=r.Ta.shift();Da(r).B_(),await FU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xE(r)}})(n,e),LU(n)&&VU(n)}async function _2(n,e){let t=Se(n);t.asyncQueue.verifyOperationInProgress(),ne(lu,"RemoteStore received new credentials");let r=pu(t);t.Ea.add(3),await Fp(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kE(t)}async function tZ(n,e){let t=Se(n);e?(t.Ea.delete(2),await kE(t)):e||(t.Ea.add(2),await Fp(t),t.Va.set("Unknown"))}function bd(n){return n.ma||(n.ma=(function(t,r,i){let s=Se(t);return s.sa(),new IA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:zX.bind(null,n),Yo:GX.bind(null,n),t_:WX.bind(null,n),J_:KX.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),nR(n)?tR(n):n.Va.set("Unknown")):(await n.ma.stop(),OU(n))})),n.ma}function Da(n){return n.fa||(n.fa=(function(t,r,i){let s=Se(t);return s.sa(),new wA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:JX.bind(null,n),t_:eZ.bind(null,n),ta:XX.bind(null,n),na:ZX.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await xE(n)):(await n.fa.stop(),n.Ta.length>0&&(ne(lu,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var DA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function rR(n,e){if(io("AsyncQueue",`${e}: ${n}`),wd(n))return new X(H.UNAVAILABLE,`${e}: ${n}`);throw n}var Rp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=gp(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var gE=class{constructor(){this.ga=new Pt(le.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):fe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},du=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Rp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&PE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var AA=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},RA=class{constructor(){this.queries=v2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Se(t),s=i.queries;i.queries=v2(),s.forEach((o,a)=>{for(let c of a.ba)c.onError(r)})})(this,new X(H.ABORTED,"Firestore shutting down"))}};function v2(){return new ao(n=>cU(n),PE)}async function iR(n,e){let t=Se(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new AA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=rR(o,`Initialization of query '${td(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&oR(t)}async function sR(n,e){let t=Se(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nZ(n,e){let t=Se(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&oR(t)}function rZ(n,e,t){let r=Se(n),i=r.queries.get(e);if(i)for(let s of i.ba)s.onError(t);r.queries.delete(e)}function oR(n){n.Ca.forEach(e=>{e.next()})}var PA,E2;(E2=PA||(PA={})).Ma="default",E2.Cache="cache";var Pp=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new du(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==PA.Cache}};var yE=class{constructor(e){this.key=e}},_E=class{constructor(e){this.key=e}},NA=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=uU(e),this.tu=new Rp(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new gE,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{let y=i.get(h),C=NE(this.query,m)?m:null,R=!!y&&this.mutatedKeys.has(y.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),x=!1;y&&C?y.data.isEqual(C.data)?R!==P&&(r.track({type:3,doc:C}),x=!0):this.su(y,C)||(r.track({type:2,doc:C}),x=!0,(c&&this.eu(C,c)>0||d&&this.eu(C,d)<0)&&(a=!0)):!y&&C?(r.track({type:0,doc:C}),x=!0):y&&!C&&(r.track({type:1,doc:y}),x=!0,(c||d)&&(a=!0)),x&&(C?(o=o.add(C),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,m)=>(function(C,R){let P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Vt:x})}};return P(C)-P(R)})(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new du(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new _E(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new yE(r))}),t}cu(e){this.Za=e.ks,this.Ya=Oe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return du.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},aR="SyncEngine",kA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},xA=class{constructor(e){this.key=e,this.hu=!1}},MA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ao(a=>cU(a),PE),this.Iu=new Map,this.Eu=new Set,this.Ru=new Pt(le.comparator),this.Au=new Map,this.Vu=new Ap,this.du={},this.mu=new Map,this.fu=Dp.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function iZ(n,e,t=!0){let r=qU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await UU(r,e,t,!0),i}async function sZ(n,e){let t=qU(n);await UU(t,e,!0,!1)}async function UU(n,e,t,r){let i=await jX(n.localStore,os(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await oZ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&xU(n.remoteStore,i),a}async function oZ(n,e,t,r,i){n.pu=(m,y,C)=>(async function(P,x,$,W){let J=x.view.ru($);J.Ss&&(J=await m2(P.localStore,x.query,!1).then(({documents:w})=>x.view.ru(w,J)));let ue=W&&W.targetChanges.get(x.targetId),ze=W&&W.targetMismatches.get(x.targetId)!=null,ge=x.view.applyChanges(J,P.isPrimaryClient,ue,ze);return w2(P,x.targetId,ge.au),ge.snapshot})(n,m,y,C);let s=await m2(n.localStore,e,!0),o=new NA(e,s.ks),a=o.ru(s.documents),c=Cp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);w2(n,t,d.au);let h=new kA(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function aZ(n,e,t){let r=Se(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!PE(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ZA(r.remoteStore,i.targetId),OA(r,i.targetId)}).catch(Id)):(OA(r,i.targetId),await mA(r.localStore,i.targetId,!0))}async function cZ(n,e){let t=Se(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ZA(t.remoteStore,r.targetId))}async function uZ(n,e,t){let r=gZ(n);try{let i=await(function(o,a){let c=Se(o),d=Ut.now(),h=a.reduce((C,R)=>C.add(R.key),Oe()),m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=co(),P=Oe();return c.xs.getEntries(C,h).next(x=>{R=x,R.forEach(($,W)=>{W.isValidDocument()||(P=P.add($))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,R)).next(x=>{m=x;let $=[];for(let W of a){let J=dX(W,m.get(W.key).overlayedDocument);J!=null&&$.push(new ds(W.key,J,nU(J.value.mapValue),Ii.exists(!0)))}return c.mutationQueue.addMutationBatch(C,d,$,a)}).next(x=>{y=x;let $=x.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(C,x.batchId,$)})}).then(()=>({batchId:y.batchId,changes:dU(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.du[o.currentUser.toKey()];d||(d=new Pt(Le)),d=d.insert(a,c),o.du[o.currentUser.toKey()]=d})(r,i.batchId,t),await Lp(r,i.changes),await xE(r.remoteStore)}catch(i){let s=rR(i,"Failed to persist write");t.reject(s)}}async function jU(n,e){let t=Se(n);try{let r=await LX(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?it(o.hu,14607):i.removedDocuments.size>0&&(it(o.hu,42227),o.hu=!1))}),await Lp(t,r,e)}catch(r){await Id(r)}}function I2(n,e,t){let r=Se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Se(o);c.onlineState=a;let d=!1;c.queries.forEach((h,m)=>{for(let y of m.ba)y.va(a)&&(d=!0)}),d&&oR(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lZ(n,e,t){let r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Pt(le.comparator);o=o.insert(s,wi.newNoDocument(s,Ae.min()));let a=Oe().add(s),c=new nE(Ae.min(),new Map,new Pt(Le),o,a);await jU(r,c),r.Ru=r.Ru.remove(s),r.Au.delete(e),cR(r)}else await mA(r.localStore,e,!1).then(()=>OA(r,e,t)).catch(Id)}async function dZ(n,e){let t=Se(n),r=e.batch.batchId;try{let i=await FX(t.localStore,e);$U(t,r,null),BU(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lp(t,i)}catch(i){await Id(i)}}async function hZ(n,e,t){let r=Se(n);try{let i=await(function(o,a){let c=Se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(it(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);$U(r,e,t),BU(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lp(r,i)}catch(i){await Id(i)}}function BU(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function $U(n,e,t){let r=Se(n),i=r.du[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function OA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||HU(n,r)})}function HU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(ZA(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),cR(n))}function w2(n,e,t){for(let r of t)r instanceof yE?(n.Vu.addReference(r.key,e),fZ(n,r)):r instanceof _E?(ne(aR,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||HU(n,r.key)):fe(19791,{wu:r})}function fZ(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ne(aR,"New document in limbo: "+t),n.Eu.add(r),cR(n))}function cR(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new le(Et.fromString(e)),r=n.fu.next();n.Au.set(r,new xA(t)),n.Ru=n.Ru.insert(t,r),xU(n.remoteStore,new Sp(os(Mp(t.path)),r,"TargetPurposeLimboResolution",BA.ce))}}async function Lp(n,e,t){let r=Se(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=dA.Es(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.J_(i),await(async function(c,d){let h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(d,y=>z.forEach(y.Ts,C=>h.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>z.forEach(y.Is,C=>h.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!wd(m))throw m;ne(XA,"Failed to update sequence numbers: "+m)}for(let m of d){let y=m.targetId;if(!m.fromCache){let C=h.vs.get(y),R=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(R);h.vs=h.vs.insert(y,P)}}})(r.localStore,s))}async function pZ(n,e){let t=Se(n);if(!t.currentUser.isEqual(e)){ne(aR,"User change. New user:",e.toKey());let r=await NU(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new X(H.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lp(t,r.Ns)}}function mZ(n,e){let t=Se(n),r=t.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let i=Oe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function qU(n){let e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lZ.bind(null,e),e.Pu.J_=nZ.bind(null,e.eventManager),e.Pu.yu=rZ.bind(null,e.eventManager),e}function gZ(n){let e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hZ.bind(null,e),e}var uR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Op(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return OX(this.persistence,new fA,t.initialUser,this.serializer)}Cu(t){return new cE(lA.Vi,this.serializer)}Du(t){return new gA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),vE=class extends uR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof uE,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new JD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Lr.withCacheSize(this.cacheSizeBytes):Lr.DEFAULT;return new cE(r=>uE.Vi(r,t),this.serializer)}};var zU=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>I2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pZ.bind(null,this.syncEngine),await tZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new RA})()}createDatastore(t){let r=Op(t.databaseInfo.databaseId),i=HX(t.databaseInfo);return qX(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new SA(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>I2(this.syncEngine,r,0),(function(){return dE.v()?new dE:new yA})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,m){let y=new MA(s,o,a,c,d,h);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Se(r);ne(lu,"RemoteStore shutting down."),i.Ea.add(5),await Fp(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var Np=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Aa="FirestoreClient",FA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne(Aa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne(Aa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=rR(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function mD(n,e){n.asyncQueue.verifyOperationInProgress(),ne(Aa,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function b2(n,e){n.asyncQueue.verifyOperationInProgress();let t=await yZ(n);ne(Aa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>_2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>_2(e.remoteStore,i)),n._onlineComponents=e}async function yZ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(Aa,"Using user provided OfflineComponentProvider");try{await mD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ca("Error using user provided cache. Falling back to memory cache: "+t),await mD(n,new uR)}}else ne(Aa,"Using default OfflineComponentProvider"),await mD(n,new vE(void 0));return n._offlineComponents}async function GU(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(Aa,"Using user provided OnlineComponentProvider"),await b2(n,n._uninitializedComponentsProvider._online)):(ne(Aa,"Using default OnlineComponentProvider"),await b2(n,new zU))),n._onlineComponents}function _Z(n){return GU(n).then(e=>e.syncEngine)}async function EE(n){let e=await GU(n),t=e.eventManager;return t.onListen=iZ.bind(null,e.syncEngine),t.onUnlisten=aZ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sZ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cZ.bind(null,e.syncEngine),t}function WU(n,e,t,r){let i=new Np(r),s=new Pp(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>iR(await EE(n),s)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>sR(await EE(n),s))}}function KU(n,e,t={}){let r=new Ei;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new Np({next:y=>{h.Nu(),o.enqueueAndForget(()=>sR(s,m));let C=y.docs.has(a);!C&&y.fromCache?d.reject(new X(H.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&y.fromCache&&c&&c.source==="server"?d.reject(new X(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new Pp(Mp(a.path),h,{includeMetadataChanges:!0,Ka:!0});return iR(s,m)})(await EE(n),n.asyncQueue,e,t,r)),r.promise}function QU(n,e,t={}){let r=new Ei;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new Np({next:y=>{h.Nu(),o.enqueueAndForget(()=>sR(s,m)),y.fromCache&&c.source==="server"?d.reject(new X(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new Pp(a,h,{includeMetadataChanges:!0,Ka:!0});return iR(s,m)})(await EE(n),n.asyncQueue,e,t,r)),r.promise}function YU(n,e){let t=new Ei;return n.asyncQueue.enqueueAndForget(async()=>uZ(await _Z(n),e,t)),t.promise}function JU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vZ="ComponentProvider",T2=new Map;function EZ(n,e,t,r,i){return new ID(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,JU(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var XU="firestore.googleapis.com",C2=!0,IE=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XU,this.ssl=C2}else this.host=e.host,this.ssl=e.ssl??C2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kX)throw new X(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},gd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zv;switch(r.type){case"firstParty":return new _D(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=T2.get(t);r&&(ne(vZ,"Removing Datastore"),T2.delete(t),r.terminate())})(this),Promise.resolve()}};function ZU(n,e,t,r={}){n=On(n,gd);let i=pa(e),s=n._getSettings(),o=se(j({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(W_(`https://${a}`),K_("Firestore",!0)),s.host!==XU&&s.host!==a&&Ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=se(j({},s),{host:a,ssl:i,emulatorOptions:r});if(!yi(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=ln.MOCK_USER;else{d=$F(r.mockUserToken,n._app?.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new X(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ln(m)}n._authCredentials=new gD(new qv(d,h))}}var uo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new no(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ed(t,n._jsonSchema))return new n(e,r||null,new le(Et.fromString(t.referencePath)))}};jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Vt("string",jt._jsonSchemaVersion),referencePath:Vt("string")};var no=class n extends uo{constructor(e,t,r){super(e,t,Mp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function jr(n,e,...t){if(n=Ft(n),P2("collection","path",e),n instanceof gd){let r=Et.fromString(e,...t);return zV(r),new no(n,null,r)}{if(!(n instanceof jt||n instanceof no))throw new X(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Et.fromString(e,...t));return zV(r),new no(n.firestore,null,r)}}function _r(n,e,...t){if(n=Ft(n),arguments.length===1&&(e=nu.newId()),P2("doc","path",e),n instanceof gd){let r=Et.fromString(e,...t);return qV(r),new jt(n,null,new le(r))}{if(!(n instanceof jt||n instanceof no))throw new X(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Et.fromString(e,...t));return qV(r),new jt(n.firestore,n instanceof no?n.converter:null,new le(r))}}var S2="AsyncQueue",wE=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fE(this,"async_queue_retry"),this._c=()=>{let r=pD();r&&ne(S2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=pD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=pD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ei;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wd(e))throw e;ne(S2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",D2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=DA.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&fe(47125,{Pc:D2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function D2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var yr=class extends gd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new wE(e),this._firestoreClient=void 0,await e}}};function lo(n,e){let t=typeof n=="object"?n:Fr(),r=typeof n=="string"?n:e||Zv,i=Xf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=BF("firestore");s&&ZU(i,...s)}return i}function Td(n){if(n._terminated)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IZ(n),n._firestoreClient}function IZ(n){let e=n._freezeSettings(),t=EZ(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new FA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var cs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tn.fromBase64String(e))}catch(t){throw new X(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ed(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};cs._jsonSchemaVersion="firestore/bytes/1.0",cs._jsonSchema={type:Vt("string",cs._jsonSchemaVersion),bytes:Vt("string")};var hu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yd=class{constructor(e){this._methodName=e}};var ro=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ed(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ro._jsonSchemaVersion="firestore/geoPoint/1.0",ro._jsonSchema={type:Vt("string",ro._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};var us=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ed(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new X(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:Vt("string",us._jsonSchemaVersion),vectorValues:Vt("object")};var wZ=/^__.*__$/,LA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new uu(e,this.data,t,this.fieldTransforms)}},bE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ej(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{dataSource:n})}}var VA=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(j(j({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return CE(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ej(this.dataSource)&&wZ.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},UA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Op(e)}createContext(e,t,r,i=!1){return new VA({dataSource:e,methodName:t,targetDoc:r,path:Zn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Vp(n){let e=n._freezeSettings(),t=Op(n._databaseId);return new UA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lR(n,e,t,r,i,s={}){let o=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);dR("Data must be an object, but it was:",o,r);let a=ij(r,o),c,d;if(s.merge)c=new Vr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let m of s.mergeFields){let y=fu(e,m,t);if(!o.contains(y))throw new X(H.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);oj(h,y)||h.push(y)}c=new Vr(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new LA(new Xn(a),c,d)}var TE=class n extends yd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function tj(n,e,t,r){let i=n.createContext(1,e,t);dR("Data must be an object, but it was:",i,r);let s=[],o=Xn.empty();Ra(r,(c,d)=>{let h=hR(e,c,t);d=Ft(d);let m=i.childContextForFieldPath(h);if(d instanceof TE)s.push(h);else{let y=Up(d,m);y!=null&&(s.push(h),o.set(h,y))}});let a=new Vr(s);return new bE(o,a,i.fieldTransforms)}function nj(n,e,t,r,i,s){let o=n.createContext(1,e,t),a=[fu(e,r,t)],c=[i];if(s.length%2!=0)throw new X(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(fu(e,s[y])),c.push(s[y+1]);let d=[],h=Xn.empty();for(let y=a.length-1;y>=0;--y)if(!oj(d,a[y])){let C=a[y],R=c[y];R=Ft(R);let P=o.childContextForFieldPath(C);if(R instanceof TE)d.push(C);else{let x=Up(R,P);x!=null&&(d.push(C),h.set(C,x))}}let m=new Vr(d);return new bE(h,m,o.fieldTransforms)}function rj(n,e,t,r=!1){return Up(t,n.createContext(r?4:3,e))}function Up(n,e){if(sj(n=Ft(n)))return dR("Unsupported field value:",e,n),ij(n,e);if(n instanceof yd)return(function(r,i){if(!ej(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Up(a,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ut.fromDate(r);return{timestampValue:oE(i.serializer,s)}}if(r instanceof Ut){let s=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oE(i.serializer,s)}}if(r instanceof ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cs)return{bytesValue:IU(i.serializer,r._byteString)};if(r instanceof jt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof us)return(function(o,a){let c=o instanceof us?o.toArray():o;return{mapValue:{fields:{[HA]:{stringValue:qA},[cd]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return YA(a.serializer,h)})}}}}}})(r,i);if(AU(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${xp(r)}`)})(n,e)}function ij(n,e){let t={};return W2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(n,(r,i)=>{let s=Up(i,e.childContextForField(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function sj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof ro||n instanceof cs||n instanceof jt||n instanceof yd||n instanceof us||AU(n))}function dR(n,e,t){if(!sj(t)||!k2(t)){let r=xp(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function fu(n,e,t){if((e=Ft(e))instanceof hu)return e._internalPath;if(typeof e=="string")return hR(n,e);throw CE("Field path arguments must be of type string or ",n,!1,void 0,t)}var bZ=new RegExp("[~\\*/\\[\\]]");function hR(n,e,t){if(e.search(bZ)>=0)throw CE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hu(...e.split("."))._internalPath}catch{throw CE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CE(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new X(H.INVALID_ARGUMENT,a+n+c)}function oj(n,e){return n.some(t=>t.isEqual(e))}var kp=class{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ra(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[cd].arrayValue?.values?.map(r=>bt(r.doubleValue));return new us(t)}convertGeoPoint(e){return new ro(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=AE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wp(e));default:return null}}convertTimestamp(e){let t=so(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Et.fromString(e);it(DU(r),9688,{name:e});let i=new bp(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(t)||io(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var _d=class extends kp{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};var aj="@firebase/firestore",cj="4.10.0";function uj(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var ME=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(fu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},fR=class extends ME{data(){return super.data()}};function hj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jp=class{},pR=class extends jp{};function fj(n,e,...t){let r=[];e instanceof jp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof mR).length,a=s.filter(c=>c instanceof OE).length;if(o>1||o>0&&a>0)throw new X(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var OE=class n extends pR{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return mj(e._query,t),new uo(e.firestore,e.converter,RE(e._query,t))}_parse(e){let t=Vp(e.firestore);return(function(s,o,a,c,d,h,m){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){dj(m,h);let R=[];for(let P of m)R.push(lj(c,s,P));y={arrayValue:{values:R}}}else y=lj(c,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||dj(m,h),y=rj(a,o,m,h==="in"||h==="not-in");return Lt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function pj(n,e,t){let r=e,i=fu("where",n);return OE._create(i,r,t)}var mR=class n extends jp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ur.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)mj(o,c),o=RE(o,c)})(e._query,t),new uo(e.firestore,e.converter,RE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function lj(n,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new X(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QA(e)&&t.indexOf("/")!==-1)throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Et.fromString(t));if(!le.isDocumentKey(r))throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zA(n,new le(r))}if(t instanceof jt)return zA(n,t._key);throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xp(t)}.`)}function dj(n,e){if(!Array.isArray(n)||n.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mj(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gj(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var mu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gu=class n extends ME{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(fu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gu._jsonSchemaVersion="firestore/documentSnapshot/1.0",gu._jsonSchema={type:Vt("string",gu._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};var Cd=class extends gu{data(e={}){return super.data(e)}},yu=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Cd(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Cd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:DZ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function DZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:n})}}yu._jsonSchemaVersion="firestore/querySnapshot/1.0",yu._jsonSchema={type:Vt("string",yu._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};function yj(n){n=On(n,jt);let e=On(n.firestore,yr),t=Td(e);return KU(t,n._key).then(r=>Ej(e,n,r))}function _j(n){n=On(n,uo);let e=On(n.firestore,yr),t=Td(e),r=new _d(e);return hj(n._query),QU(t,n._query).then(i=>new yu(e,r,n,i))}function vj(n,e,t){n=On(n,jt);let r=On(n.firestore,yr),i=gj(n.converter,e,t),s=Vp(r);return LE(r,[lR(s,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ii.none())])}function FE(n,e,t,...r){n=On(n,jt);let i=On(n.firestore,yr),s=Vp(i),o;return o=typeof(e=Ft(e))=="string"||e instanceof hu?nj(s,"updateDoc",n._key,e,t,r):tj(s,"updateDoc",n._key,e),LE(i,[o.toMutation(n._key,Ii.exists(!0))])}function Sd(n){return LE(On(n.firestore,yr),[new md(n._key,Ii.none())])}function Dd(n,e){let t=On(n.firestore,yr),r=_r(n),i=gj(n.converter,e),s=Vp(n.firestore);return LE(t,[lR(s,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ii.exists(!1))]).then(()=>r)}function Ad(n,...e){n=Ft(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||uj(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(uj(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let s,o,a;if(n instanceof jt)o=On(n.firestore,yr),a=Mp(n._key.path),s={next:d=>{e[r]&&e[r](Ej(o,n,d))},error:e[r+1],complete:e[r+2]};else{let d=On(n,uo);o=On(d.firestore,yr),a=d._query;let h=new _d(o);s={next:m=>{e[r]&&e[r](new yu(o,h,d,m))},error:e[r+1],complete:e[r+2]},hj(n._query)}let c=Td(o);return WU(c,a,i,s)}function LE(n,e){let t=Td(n);return YU(t,e)}function Ej(n,e,t){let r=t.docs.get(e._key),i=new _d(n);return new gu(n,i,e._key,r,new mu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){A2(_a),ya(new Or("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new yr(new Gv(r.getProvider("auth-internal")),new Kv(o,r.getProvider("app-check-internal")),X2(o,i),o);return s=j({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_i(aj,cj,e),_i(aj,cj,"esm2020")})();var Ij=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wj={};var VE,bj;(function(){var n;function e(w,_){function I(){}I.prototype=_.prototype,w.D=_.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(b,T,A){for(var E=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)E[lt-2]=arguments[lt];return _.prototype[T].apply(b,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,I){I||(I=0);var b=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)b[T]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(T=0;16>T;++T)b[T]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=w.g[0],I=w.g[1],T=w.g[2];var A=w.g[3],E=_+(A^I&(T^A))+b[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[1]+3905402710&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[2]+606105819&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[3]+3250441966&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(A^I&(T^A))+b[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[5]+1200080426&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[6]+2821735955&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[7]+4249261313&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(A^I&(T^A))+b[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[9]+2336552879&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[10]+4294925233&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[11]+2304563134&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(A^I&(T^A))+b[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=A+(T^_&(I^T))+b[13]+4254626195&4294967295,A=_+(E<<12&4294967295|E>>>20),E=T+(I^A&(_^I))+b[14]+2792965006&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(_^T&(A^_))+b[15]+1236535329&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(T^A&(I^T))+b[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[6]+3225465664&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[11]+643717713&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[0]+3921069994&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^A&(I^T))+b[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[10]+38016083&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[15]+3634488961&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[4]+3889429448&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^A&(I^T))+b[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[14]+3275163606&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[3]+4107603335&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[8]+1163531501&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^A&(I^T))+b[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(_^I))+b[2]+4243563512&4294967295,A=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(A^_))+b[7]+1735328473&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^_&(T^A))+b[12]+2368359562&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(I^T^A)+b[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[8]+2272392833&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[11]+1839030562&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[14]+4259657740&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^A)+b[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[4]+1272893353&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[7]+4139469664&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[10]+3200236656&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^A)+b[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[0]+3936430074&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[3]+3572445317&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[6]+76029189&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^A)+b[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=A+(_^I^T)+b[12]+3873151461&4294967295,A=_+(E<<11&4294967295|E>>>21),E=T+(A^_^I)+b[15]+530742520&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^_)+b[2]+3299628645&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(T^(I|~A))+b[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[7]+1126891415&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[14]+2878612391&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[5]+4237533241&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~A))+b[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[3]+2399980690&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[10]+4293915773&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[1]+2240044497&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~A))+b[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[15]+4264355552&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[6]+2734768916&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[13]+1309151649&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~A))+b[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=A+(I^(_|~T))+b[11]+3174756917&4294967295,A=_+(E<<10&4294967295|E>>>22),E=T+(_^(A|~I))+b[2]+718787259&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~_))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.u=function(w,_){_===void 0&&(_=w.length);for(var I=_-this.blockSize,b=this.B,T=this.h,A=0;A<_;){if(T==0)for(;A<=I;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<_;)if(b[T++]=w.charCodeAt(A++),T==this.blockSize){i(this,b),T=0;break}}else for(;A<_;)if(b[T++]=w[A++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;var I=8*this.o;for(_=w.length-8;_<w.length;++_)w[_]=I&255,I/=256;for(this.u(w),w=Array(16),_=I=0;4>_;++_)for(var b=0;32>b;b+=8)w[I++]=this.g[_]>>>b&255;return w};function s(w,_){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=_(w)}function o(w,_){this.h=_;for(var I=[],b=!0,T=w.length-1;0<=T;T--){var A=w[T]|0;b&&A==_||(I[T]=A,b=!1)}this.g=I}var a={};function c(w){return-128<=w&&128>w?s(w,function(_){return new o([_|0],0>_?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return x(d(-w));for(var _=[],I=1,b=0;w>=I;b++)_[b]=w/I|0,I*=4294967296;return new o(_,0)}function h(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return x(h(w.substring(1),_));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),b=m,T=0;T<w.length;T+=8){var A=Math.min(8,w.length-T),E=parseInt(w.substring(T,T+A),_);8>A?(A=d(Math.pow(_,A)),b=b.j(A).add(d(E))):(b=b.j(I),b=b.add(d(E)))}return b}var m=c(0),y=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-x(this).m();for(var w=0,_=1,I=0;I<this.g.length;I++){var b=this.i(I);w+=(0<=b?b:4294967296+b)*_,_*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+x(this).toString(w);for(var _=d(Math.pow(w,6)),I=this,b="";;){var T=ue(I,_).g;I=$(I,T.j(_));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=T,R(I))return A+b;for(;6>A.length;)A="0"+A;b=A+b}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=$(this,w),P(w)?-1:R(w)?0:1};function x(w){for(var _=w.g.length,I=[],b=0;b<_;b++)I[b]=~w.g[b];return new o(I,~w.h).add(y)}n.abs=function(){return P(this)?x(this):this},n.add=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],b=0,T=0;T<=_;T++){var A=b+(this.i(T)&65535)+(w.i(T)&65535),E=(A>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);b=E>>>16,A&=65535,E&=65535,I[T]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function $(w,_){return w.add(x(_))}n.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?x(this).j(x(w)):x(x(this).j(w));if(P(w))return x(this.j(x(w)));if(0>this.l(C)&&0>w.l(C))return d(this.m()*w.m());for(var _=this.g.length+w.g.length,I=[],b=0;b<2*_;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<w.g.length;T++){var A=this.i(b)>>>16,E=this.i(b)&65535,lt=w.i(T)>>>16,fn=w.i(T)&65535;I[2*b+2*T]+=E*fn,W(I,2*b+2*T),I[2*b+2*T+1]+=A*fn,W(I,2*b+2*T+1),I[2*b+2*T+1]+=E*lt,W(I,2*b+2*T+1),I[2*b+2*T+2]+=A*lt,W(I,2*b+2*T+2)}for(b=0;b<_;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=_;b<2*_;b++)I[b]=0;return new o(I,0)};function W(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function J(w,_){this.g=w,this.h=_}function ue(w,_){if(R(_))throw Error("division by zero");if(R(w))return new J(m,m);if(P(w))return _=ue(x(w),_),new J(x(_.g),x(_.h));if(P(_))return _=ue(w,x(_)),new J(x(_.g),_.h);if(30<w.g.length){if(P(w)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,b=_;0>=b.l(w);)I=ze(I),b=ze(b);var T=ge(I,1),A=ge(b,1);for(b=ge(b,2),I=ge(I,2);!R(b);){var E=A.add(b);0>=E.l(w)&&(T=T.add(I),A=E),b=ge(b,1),I=ge(I,1)}return _=$(w,T.j(_)),new J(T,_)}for(T=m;0<=w.l(_);){for(I=Math.max(1,Math.floor(w.m()/_.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),A=d(I),E=A.j(_);P(E)||0<E.l(w);)I-=b,A=d(I),E=A.j(_);R(A)&&(A=y),T=T.add(A),w=$(w,E)}return new J(T,w)}n.A=function(w){return ue(this,w).h},n.and=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)&w.i(b);return new o(I,this.h&w.h)},n.or=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)|w.i(b);return new o(I,this.h|w.h)},n.xor=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)^w.i(b);return new o(I,this.h^w.h)};function ze(w){for(var _=w.g.length+1,I=[],b=0;b<_;b++)I[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(I,w.h)}function ge(w,_){var I=_>>5;_%=32;for(var b=w.g.length-I,T=[],A=0;A<b;A++)T[A]=0<_?w.i(A+I)>>>_|w.i(A+I+1)<<32-_:w.i(A+I);return new o(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bj=wj.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,VE=wj.Integer=o}).apply(typeof Ij<"u"?Ij:typeof self<"u"?self:typeof window<"u"?window:{});var UE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ho={};var Tj,AZ,Cj,Sj,Dj,Aj,Rj,Pj,Nj;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof UE=="object"&&UE];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var O=u[S];if(!(O in g))break e;g=g[O]}u=u[u.length-1],S=g[u],f=f(S),f!=S&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,S=!1,O={next:function(){if(!S&&g<u.length){var V=g++;return{value:f(V,u[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function m(u,f,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,S),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function y(u,f,g){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,y.apply(null,arguments)}function C(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function R(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,O,V){for(var G=Array(arguments.length-2),He=2;He<arguments.length;He++)G[He-2]=arguments[He];return f.prototype[O].apply(S,G)}}function P(u){let f=u.length;if(0<f){let g=Array(f);for(let S=0;S<f;S++)g[S]=u[S];return g}return[]}function x(u,f){for(let g=1;g<arguments.length;g++){let S=arguments[g];if(c(S)){let O=u.length||0,V=S.length||0;u.length=O+V;for(let G=0;G<V;G++)u[O+G]=S[G]}else u.push(S)}}class ${constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function W(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ue(u){return ue[" "](u),u}ue[" "]=function(){};var ze=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ge(u,f,g){for(let S in u)f.call(g,u[S],S,u)}function w(u,f){for(let g in u)f.call(void 0,u[g],g,u)}function _(u){let f={};for(let g in u)f[g]=u[g];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,f){let g,S;for(let O=1;O<arguments.length;O++){S=arguments[O];for(g in S)u[g]=S[g];for(let V=0;V<I.length;V++)g=I[V],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function T(u){var f=1;u=u.split(":");let g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Re;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class lt{constructor(){this.h=this.g=null}add(f,g){let S=fn.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var fn=new $(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,oe=!1,Re=new lt,Tt=()=>{let u=a.Promise.resolve(void 0);ie=()=>{u.then(Fn)}};var Fn=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(g){A(g)}var f=fn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}oe=!1};function _t(){this.s=this.s,this.C=this.C}_t.prototype.s=!1,_t.prototype.ma=function(){this.s||(this.s=!0,this.N())},_t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var Je=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u})();function vr(u,f){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ze){e:{try{ue(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ka[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&vr.aa.h.call(this)}}R(vr,st);var ka={2:"touch",3:"pen",4:"mouse"};vr.prototype.h=function(){vr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),tr=0;function pn(u,f,g,S,O){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=O,this.key=++tr,this.da=this.fa=!1}function Er(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ci(u){this.src=u,this.g={},this.h=0}Ci.prototype.add=function(u,f,g,S,O){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var G=Tu(u,f,S,O);return-1<G?(f=u[G],g||(f.fa=!1)):(f=new pn(f,this.src,V,!!S,O),f.fa=g,u.push(f)),f};function bu(u,f){var g=f.type;if(g in u.g){var S=u.g[g],O=Array.prototype.indexOf.call(S,f,void 0),V;(V=0<=O)&&Array.prototype.splice.call(S,O,1),V&&(Er(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Tu(u,f,g,S){for(var O=0;O<u.length;++O){var V=u[O];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==S)return O}return-1}var xa="closure_lm_"+(1e6*Math.random()|0),Cu={};function im(u,f,g,S,O){if(S&&S.once)return Du(u,f,g,S,O);if(Array.isArray(f)){for(var V=0;V<f.length;V++)im(u,f[V],g,S,O);return null}return g=gs(g),u&&u[gt]?u.K(f,g,d(S)?!!S.capture:!!S,O):Su(u,f,g,!1,S,O)}function Su(u,f,g,S,O,V){if(!f)throw Error("Invalid event type");var G=d(O)?!!O.capture:!!O,He=Au(u);if(He||(u[xa]=He=new Ci(u)),g=He.add(f,g,S,G,V),g.proxy)return g;if(S=$d(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)Je||(O=G),O===void 0&&(O=!1),u.addEventListener(f.toString(),S,O);else if(u.attachEvent)u.attachEvent(Ma(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function $d(){function u(g){return f.call(u.src,u.listener,g)}let f=TI;return u}function Du(u,f,g,S,O){if(Array.isArray(f)){for(var V=0;V<f.length;V++)Du(u,f[V],g,S,O);return null}return g=gs(g),u&&u[gt]?u.L(f,g,d(S)?!!S.capture:!!S,O):Su(u,f,g,!0,S,O)}function Jt(u,f,g,S,O){if(Array.isArray(f))for(var V=0;V<f.length;V++)Jt(u,f[V],g,S,O);else S=d(S)?!!S.capture:!!S,g=gs(g),u&&u[gt]?(u=u.i,f=String(f).toString(),f in u.g&&(V=u.g[f],g=Tu(V,g,S,O),-1<g&&(Er(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[f],u.h--)))):u&&(u=Au(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Tu(f,g,S,O)),(g=-1<u?f[u]:null)&&Xt(g))}function Xt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[gt])bu(f.i,u);else{var g=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(g,S,u.capture):f.detachEvent?f.detachEvent(Ma(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=Au(f))?(bu(g,u),g.h==0&&(g.src=null,f[xa]=null)):Er(u)}}}function Ma(u){return u in Cu?Cu[u]:Cu[u]="on"+u}function TI(u,f){if(u.da)u=!0;else{f=new vr(f,this);var g=u.listener,S=u.ha||u.src;u.fa&&Xt(u),u=g.call(S,f)}return u}function Au(u){return u=u[xa],u instanceof Ci?u:null}var Hd="__closure_events_fn_"+(1e9*Math.random()>>>0);function gs(u){return typeof u=="function"?u:(u[Hd]||(u[Hd]=function(f){return u.handleEvent(f)}),u[Hd])}function Zt(){_t.call(this),this.i=new Ci(this),this.M=this,this.F=null}R(Zt,_t),Zt.prototype[gt]=!0,Zt.prototype.removeEventListener=function(u,f,g,S){Jt(this,u,f,g,S)};function rn(u,f){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new st(f,u);else if(f instanceof st)f.target=f.target||u;else{var O=f;f=new st(S,u),b(f,O)}if(O=!0,g)for(var V=g.length-1;0<=V;V--){var G=f.g=g[V];O=_o(G,S,!0,f)&&O}if(G=f.g=u,O=_o(G,S,!0,f)&&O,O=_o(G,S,!1,f)&&O,g)for(V=0;V<g.length;V++)G=f.g=g[V],O=_o(G,S,!1,f)&&O}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],S=0;S<g.length;S++)Er(g[S]);delete u.g[f],u.h--}}this.F=null},Zt.prototype.K=function(u,f,g,S){return this.i.add(String(u),f,!1,g,S)},Zt.prototype.L=function(u,f,g,S){return this.i.add(String(u),f,!0,g,S)};function _o(u,f,g,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,V=0;V<f.length;++V){var G=f[V];if(G&&!G.da&&G.capture==g){var He=G.listener,Nt=G.ha||G.src;G.fa&&bu(u.i,G),O=He.call(Nt,S)!==!1&&O}}return O&&!S.defaultPrevented}function sm(u,f,g){if(typeof u=="function")g&&(u=y(u,g));else if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function om(u){u.g=sm(()=>{u.g=null,u.i&&(u.i=!1,om(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class am extends _t{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:om(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vo(u){_t.call(this),this.h=u,this.g={}}R(vo,_t);var Eo=[];function Ru(u){ge(u.g,function(f,g){this.g.hasOwnProperty(g)&&Xt(f)},u),u.g={}}vo.prototype.N=function(){vo.aa.N.call(this),Ru(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oa=a.JSON.stringify,ys=a.JSON.parse,cm=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Io(){}Io.prototype.h=null;function qd(u){return u.h||(u.h=u.i())}function wo(){}var bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function en(){st.call(this,"d")}R(en,st);function Pu(){st.call(this,"c")}R(Pu,st);var nr={},To=null;function Nu(){return To=To||new Zt}nr.La="serverreachability";function um(u){st.call(this,nr.La,u)}R(um,st);function Ir(u){let f=Nu();rn(f,new um(f))}nr.STAT_EVENT="statevent";function lm(u,f){st.call(this,nr.STAT_EVENT,u),this.stat=f}R(lm,st);function mn(u){let f=Nu();rn(f,new lm(f,u))}nr.Ma="timingevent";function Fa(u,f){st.call(this,nr.Ma,u),this.size=f}R(Fa,st);function Co(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function So(){this.g=!0}So.prototype.xa=function(){this.g=!1};function zd(u,f,g,S,O,V){u.info(function(){if(u.g)if(V)for(var G="",He=V.split("&"),Nt=0;Nt<He.length;Nt++){var qe=He[Nt].split("=");if(1<qe.length){var Dn=qe[0];qe=qe[1];var An=Dn.split("_");G=2<=An.length&&An[1]=="type"?G+(Dn+"="+qe+"&"):G+(Dn+"=redacted&")}}else G=null;else G=V;return"XMLHTTP REQ ("+S+") [attempt "+O+"]: "+f+`
`+g+`
`+G})}function La(u,f,g,S,O,V,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+O+"]: "+f+`
`+g+`
`+V+" "+G})}function Do(u,f,g,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+dm(u,g)+(S?" "+S:"")})}function Si(u,f){u.info(function(){return"TIMEOUT: "+f})}So.prototype.info=function(){};function dm(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var O=S[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var G=1;G<O.length;G++)O[G]=""}}}}return Oa(g)}catch{return f}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ku={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ua;function ja(){}R(ja,Io),ja.prototype.g=function(){return new XMLHttpRequest},ja.prototype.i=function(){return{}},Ua=new ja;function Di(u,f,g,S){this.j=u,this.i=f,this.l=g,this.R=S||1,this.U=new vo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gd}function Gd(){this.i=null,this.g="",this.h=!1}var hm={},Ao={};function xu(u,f,g){u.L=1,u.v=Lu($r(f)),u.m=g,u.P=!0,Mu(u,null)}function Mu(u,f){u.F=Date.now(),Po(u),u.A=$r(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Em(g.i,"t",S),u.C=0,g=u.j.J,u.h=new Gd,u.g=p(u.j,g?f:null,!u.m),0<u.O&&(u.M=new am(y(u.Y,u,u.g),u.O)),f=u.U,g=u.g,S=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Eo[0]=O.toString()),O=Eo);for(var V=0;V<O.length;V++){var G=im(g,O[V],S||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ir(),zd(u.i,u.u,u.A,u.l,u.R,u.m)}Di.prototype.ca=function(u){u=u.target;let f=this.M;f&&Hn(u)==3?f.j():this.Y(u)},Di.prototype.Y=function(u){try{if(u==this.g)e:{let An=Hn(this.g);var f=this.g.Ba();let Gu=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||Cm(this.g)))){this.J||An!=4||f==7||(f==8||0>=Gu?Ir(3):Ir(2)),Ou(this);var g=this.g.Z();this.X=g;t:if(Ro(this)){var S=Cm(this.g);u="";var O=S.length,V=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),No(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(V&&f==O-1)});S.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,La(this.i,this.u,this.A,this.l,this.R,An,g),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Nt=this.g;if((He=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(He)){var qe=He;break t}}qe=null}if(g=qe)Do(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ba(this,g);else{this.o=!1,this.s=3,mn(12),Ai(this),No(this);break e}}if(this.P){g=!0;let Wr;for(;!this.J&&this.C<G.length;)if(Wr=_s(this,G),Wr==Ao){An==4&&(this.s=4,mn(14),g=!1),Do(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==hm){this.s=4,mn(15),Do(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else Do(this.i,this.l,Wr,null),Ba(this,Wr);if(Ro(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||G.length!=0||this.h.h||(this.s=1,mn(16),g=!1),this.o=this.o&&g,!g)Do(this.i,this.l,G,"[Invalid Chunked Response]"),Ai(this),No(this);else if(0<G.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),zu(Dn),Dn.M=!0,mn(11))}}else Do(this.i,this.l,G,null),Ba(this,G);An==4&&Ai(this),this.o&&!this.J&&(An==4?Sn(this.j,this):(this.o=!1,Po(this)))}else Sm(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),Ai(this),No(this)}}}catch{}};function Ro(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _s(u,f){var g=u.C,S=f.indexOf(`
`,g);return S==-1?Ao:(g=Number(f.substring(g,S)),isNaN(g)?hm:(S+=1,S+g>f.length?Ao:(f=f.slice(S,S+g),u.C=S+g,f)))}Di.prototype.cancel=function(){this.J=!0,Ai(this)};function Po(u){u.S=Date.now()+u.I,fm(u,u.I)}function fm(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Co(y(u.ba,u),f)}function Ou(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Di.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Si(this.i,this.A),this.L!=2&&(Ir(),mn(17)),Ai(this),this.s=2,No(this)):fm(this,this.S-u)};function No(u){u.j.G==0||u.J||Sn(u.j,u)}function Ai(u){Ou(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Ru(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ba(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Jd(g.h,u))){if(!u.K&&Jd(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var O=S;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Es(g),Vo(g);else break e;qu(g),mn(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Co(y(g.Za,g),6e3));if(1>=Yd(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ni(g,11)}else if((u.K||g.g==u)&&Es(g),!W(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let qe=O[f];if(g.T=qe[0],qe=qe[1],g.G==2)if(qe[0]=="c"){g.K=qe[1],g.ia=qe[2];let Dn=qe[3];Dn!=null&&(g.la=Dn,g.j.info("VER="+g.la));let An=qe[4];An!=null&&(g.Aa=An,g.j.info("SVER="+g.Aa));let Gu=qe[5];Gu!=null&&typeof Gu=="number"&&0<Gu&&(S=1.5*Gu,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;let Wr=u.g;if(Wr){let Dm=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dm){var V=S.h;V.g||Dm.indexOf("spdy")==-1&&Dm.indexOf("quic")==-1&&Dm.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(wr(V,V.h),V.h=null))}if(S.D){let SI=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;SI&&(S.ya=SI,dt(S.I,S.D,SI))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var G=u;if(S.qa=l(S,S.J?S.ia:null,S.W),G.K){rr(S.h,G);var He=G,Nt=S.L;Nt&&(He.I=Nt),He.B&&(Ou(He),Po(He)),S.g=G}else oh(S);0<g.i.length&&Ka(g)}else qe[0]!="stop"&&qe[0]!="close"||Ni(g,7);else g.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Ni(g,7):Bu(g):qe[0]!="noop"&&g.l&&g.l.ta(qe),g.v=0)}}Ir(4)}catch{}}var Wd=class{constructor(u,f){this.g=u,this.map=f}};function Kd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Yd(u){return u.h?1:u.g?u.g.size:0}function Jd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function wr(u,f){u.g?u.g.add(f):u.h=f}function rr(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Kd.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function ko(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let g of u.g.values())f=f.concat(g.D);return f}return P(u.i)}function $a(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,S=0;S<g;S++)f.push(u[S]);return f}f=[],g=0;for(S in u)f[g++]=u[S];return f}function Xd(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(let S in u)f[g++]=S;return f}}}function ot(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=Xd(u),S=$a(u),O=S.length,V=0;V<O;V++)f.call(void 0,S[V],g&&g[V],u)}var Ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),O=null;if(0<=S){var V=u[g].substring(0,S);O=u[g].substring(S+1)}else V=u[g];f(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ir(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ir){this.h=u.h,za(this,u.j),this.o=u.o,this.g=u.g,Fu(this,u.s),this.l=u.l;var f=u.i,g=new Ga;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),pm(this,g),this.m=u.m}else u&&(f=String(u).match(Ha))?(this.h=!1,za(this,f[1]||"",!0),this.o=Hr(f[2]||""),this.g=Hr(f[3]||"",!0),Fu(this,f[4]),this.l=Hr(f[5]||"",!0),pm(this,f[6]||"",!0),this.m=Hr(f[7]||"")):(this.h=!1,this.i=new Ga(null,this.h))}ir.prototype.toString=function(){var u=[],f=this.j;f&&u.push(sr(f,Zd,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(sr(f,Zd,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(sr(g,g.charAt(0)=="/"?ym:gm,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",sr(g,xo)),u.join("")};function $r(u){return new ir(u)}function za(u,f,g){u.j=g?Hr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Fu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function pm(u,f,g){f instanceof Ga?(u.i=f,Vu(u.i,u.h)):(g||(f=sr(f,_m)),u.i=new Ga(f,u.h))}function dt(u,f,g){u.i.set(f,g)}function Lu(u){return dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Hr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function sr(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,mm),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mm(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zd=/[#\/\?@]/g,gm=/[#\?:]/g,ym=/[#\?]/g,_m=/[#\?@]/g,xo=/#/g;function Ga(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Ri(u){u.g||(u.g=new Map,u.h=0,u.i&&qa(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Ga.prototype,n.add=function(u,f){Ri(this),this.i=null,u=zr(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function vm(u,f){Ri(u),f=zr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function qr(u,f){return Ri(u),f=zr(u,f),u.g.has(f)}n.forEach=function(u,f){Ri(this),this.g.forEach(function(g,S){g.forEach(function(O){u.call(f,O,S,this)},this)},this)},n.na=function(){Ri(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){let O=u[S];for(let V=0;V<O.length;V++)g.push(f[S])}return g},n.V=function(u){Ri(this);let f=[];if(typeof u=="string")qr(this,u)&&(f=f.concat(this.g.get(zr(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return Ri(this),this.i=null,u=zr(this,u),qr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Em(u,f,g){vm(u,f),0<g.length&&(u.i=null,u.g.set(zr(u,f),P(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];let V=encodeURIComponent(String(S)),G=this.V(S);for(S=0;S<G.length;S++){var O=V;G[S]!==""&&(O+="="+encodeURIComponent(String(G[S]))),u.push(O)}}return this.i=u.join("&")};function zr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Vu(u,f){f&&!u.j&&(Ri(u),u.i=null,u.g.forEach(function(g,S){var O=S.toLowerCase();S!=O&&(vm(this,S),Em(this,O,g))},u)),u.j=f}function Im(u,f){let g=new So;if(a.Image){let S=new Image;S.onload=C($n,g,"TestLoadImage: loaded",!0,f,S),S.onerror=C($n,g,"TestLoadImage: error",!1,f,S),S.onabort=C($n,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=C($n,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function Wa(u,f){let g=new So,S=new AbortController,O=setTimeout(()=>{S.abort(),$n(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(V=>{clearTimeout(O),V.ok?$n(g,"TestPingServer: ok",!0,f):$n(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),$n(g,"TestPingServer: error",!1,f)})}function $n(u,f,g,S,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),S(g)}catch{}}function wm(){this.g=new cm}function eh(u,f,g){let S=g||"";try{ot(u,function(O,V){let G=O;d(O)&&(G=Oa(O)),f.push(S+V+"="+encodeURIComponent(G))})}catch(O){throw f.push(S+"type="+encodeURIComponent("_badmap")),O}}function at(u){this.l=u.Ub||null,this.j=u.eb||!1}R(at,Io),at.prototype.g=function(){return new Uu(this.l,this.j)},at.prototype.i=(function(u){return function(){return u}})({});function Uu(u,f){Zt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Uu,Zt),n=Uu.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Oo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function bm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Mo(this):Oo(this),this.readyState==3&&bm(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Mo(this))},n.Qa=function(u){this.g&&(this.response=u,Mo(this))},n.ga=function(){this.g&&Mo(this)};function Mo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Oo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Oo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Uu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function th(u){let f="";return ge(u,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Fo(u,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=th(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):dt(u,f,g))}function Ge(u){Zt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ge,Zt);var Tm=/^https?$/i,CI=["POST","PUT"];n=Ge.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ua.g(),this.v=this.o?qd(this.o):qd(Ua),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(V){Lo(this,V);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var O in S)g.set(O,S[O]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CI,f,void 0))||S||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,G]of g)this.g.setRequestHeader(V,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rh(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Lo(this,V)}};function Lo(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,nh(u),vs(u)}function nh(u){u.A||(u.A=!0,rn(u,"complete"),rn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rn(this,"complete"),rn(this,"abort"),vs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vs(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ju(this):this.bb())},n.bb=function(){ju(this)};function ju(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Hn(u)!=4||u.Z()!=2)){if(u.u&&Hn(u)==4)sm(u.Ea,0,u);else if(rn(u,"readystatechange"),Hn(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=G===0){var O=String(u.D).match(Ha)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),S=!Tm.test(O?O.toLowerCase():"")}g=S}if(g)rn(u,"complete"),rn(u,"success");else{u.m=6;try{var V=2<Hn(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",nh(u)}}finally{vs(u)}}}}function vs(u,f){if(u.g){rh(u);let g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||rn(u,"ready");try{g.onreadystatechange=S}catch{}}}function rh(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),ys(f)}};function Cm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sm(u){let f={};u=(u.g&&2<=Hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(W(u[S]))continue;var g=T(u[S]);let O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let V=f[O]||[];f[O]=V,V.push(g)}w(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function ih(u){this.Aa=0,this.i=[],this.j=new So,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,u),this.cb=Gr("retryDelaySeedMs",1e4,u),this.Wa=Gr("forwardChannelMaxRetries",2,u),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Kd(u&&u.concurrentRequestLimit),this.Da=new wm,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ih.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,S){mn(0),this.W=u,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=l(this,null,this.W),Ka(this)};function Bu(u){if($u(u),u.G==3){var f=u.U++,g=$r(u.I);if(dt(g,"SID",u.K),dt(g,"RID",f),dt(g,"TYPE","terminate"),Uo(u,g),f=new Di(u,u.j,f),f.L=2,f.v=Lu($r(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Po(f)}Is(u)}function Vo(u){u.g&&(zu(u),u.g.cancel(),u.g=null)}function $u(u){Vo(u),u.u&&(a.clearTimeout(u.u),u.u=null),Es(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ka(u){if(!Qd(u.h)&&!u.s){u.s=!0;var f=u.Ga;ie||Tt(),oe||(ie(),oe=!0),Re.add(f,u),u.B=0}}function Hu(u,f){return Yd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Co(y(u.Ga,u,f),ch(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let O=new Di(this,this.j,u),V=this.o;if(this.S&&(V?(V=_(V),b(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Pi(this,O,f),g=$r(this.I),dt(g,"RID",u),dt(g,"CVER",22),this.D&&dt(g,"X-HTTP-Session-Id",this.D),Uo(this,g),V&&(this.O?f="headers="+encodeURIComponent(String(th(V)))+"&"+f:this.m&&Fo(g,this.m,V)),wr(this.h,O),this.Ua&&dt(g,"TYPE","init"),this.P?(dt(g,"$req",f),dt(g,"SID","null"),O.T=!0,xu(O,g,null)):xu(O,g,f),this.G=2}}else this.G==3&&(u?sh(this,u):this.i.length==0||Qd(this.h)||sh(this))};function sh(u,f){var g;f?g=f.l:g=u.U++;let S=$r(u.I);dt(S,"SID",u.K),dt(S,"RID",g),dt(S,"AID",u.T),Uo(u,S),u.m&&u.o&&Fo(S,u.m,u.o),g=new Di(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Pi(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wr(u.h,g),xu(g,S,f)}function Uo(u,f){u.H&&ge(u.H,function(g,S){dt(f,S,g)}),u.l&&ot({},function(g,S){dt(f,S,g)})}function Pi(u,f,g){g=Math.min(u.i.length,g);var S=u.l?y(u.l.Na,u.l,u):null;e:{var O=u.i;let V=-1;for(;;){let G=["count="+g];V==-1?0<g?(V=O[0].g,G.push("ofs="+V)):V=0:G.push("ofs="+V);let He=!0;for(let Nt=0;Nt<g;Nt++){let qe=O[Nt].g,Dn=O[Nt].map;if(qe-=V,0>qe)V=Math.max(0,O[Nt].g-100),He=!1;else try{eh(Dn,G,"req"+qe+"_")}catch{S&&S(Dn)}}if(He){S=G.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,S}function oh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ie||Tt(),oe||(ie(),oe=!0),Re.add(f,u),u.v=0}}function qu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Co(y(u.Fa,u),ch(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ah(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Co(y(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mn(10),Vo(this),ah(this))};function zu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ah(u){u.g=new Di(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=$r(u.qa);dt(f,"RID","rpc"),dt(f,"SID",u.K),dt(f,"AID",u.T),dt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&dt(f,"TO",u.ja),dt(f,"TYPE","xmlhttp"),Uo(u,f),u.m&&u.o&&Fo(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Lu($r(f)),g.m=null,g.P=!0,Mu(g,u)}n.Za=function(){this.C!=null&&(this.C=null,Vo(this),qu(this),mn(19))};function Es(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Sn(u,f){var g=null;if(u.g==f){Es(u),zu(u),u.g=null;var S=2}else if(Jd(u.h,f))g=f.D,rr(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;S=Nu(),rn(S,new Fa(S,g)),Ka(u)}else oh(u);else if(O=f.s,O==3||O==0&&0<f.X||!(S==1&&Hu(u,f)||S==2&&qu(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),O){case 1:Ni(u,5);break;case 4:Ni(u,10);break;case 3:Ni(u,6);break;default:Ni(u,2)}}}function ch(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Ni(u,f){if(u.j.info("Error code "+f),f==2){var g=y(u.fb,u),S=u.Xa;let O=!S;S=new ir(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||za(S,"https"),Lu(S),O?Im(S.toString(),g):Wa(S.toString(),g)}else mn(2);u.G=0,u.l&&u.l.sa(f),Is(u),$u(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))};function Is(u){if(u.G=0,u.ka=[],u.l){let f=ko(u.h);(f.length!=0||u.i.length!=0)&&(x(u.ka,f),x(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function l(u,f,g){var S=g instanceof ir?$r(g):new ir(g);if(S.g!="")f&&(S.g=f+"."+S.g),Fu(S,S.s);else{var O=a.location;S=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var V=new ir(null);S&&za(V,S),f&&(V.g=f),O&&Fu(V,O),g&&(V.l=g),S=V}return g=u.D,f=u.ya,g&&f&&dt(S,g,f),dt(S,"VER",u.la),Uo(u,S),S}function p(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ge(new at({eb:g})):new Ge(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function v(){}n=v.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(u,f){return new M(u,f)};function M(u,f){Zt.call(this),this.g=new ih(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!W(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!W(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ye(this)}R(M,Zt),M.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},M.prototype.close=function(){Bu(this.g)},M.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Oa(u),u=g);f.i.push(new Wd(f.Ya++,u)),f.G==3&&Ka(f)},M.prototype.N=function(){this.g.l=null,delete this.j,Bu(this.g),delete this.g,M.aa.N.call(this)};function L(u){en.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(L,en);function Q(){Pu.call(this),this.status=1}R(Q,Pu);function ye(u){this.g=u}R(ye,v),ye.prototype.ua=function(){rn(this.g,"a")},ye.prototype.ta=function(u){rn(this.g,new L(u))},ye.prototype.sa=function(u){rn(this.g,new Q)},ye.prototype.ra=function(){rn(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,M.prototype.send=M.prototype.o,M.prototype.open=M.prototype.m,M.prototype.close=M.prototype.close,Nj=ho.createWebChannelTransport=function(){return new D},Pj=ho.getStatEventTarget=function(){return Nu()},Rj=ho.Event=nr,Aj=ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Dj=ho.ErrorCode=Va,ku.COMPLETE="complete",Sj=ho.EventType=ku,wo.EventType=bo,bo.OPEN="a",bo.CLOSE="b",bo.ERROR="c",bo.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,Cj=ho.WebChannel=wo,AZ=ho.FetchXmlHttpFactory=at,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,Tj=ho.XhrIo=Ge}).apply(typeof UE<"u"?UE:typeof self<"u"?self:typeof window<"u"?window:{});var kj="@firebase/firestore",xj="4.8.0";var Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");var Wp="11.10.0";var xd=new Ji("@firebase/firestore");function bi(n,...e){if(xd.logLevel<=Ye.DEBUG){let t=e.map(FR);xd.debug(`Firestore (${Wp}): ${n}`,...t)}}function Gj(n,...e){if(xd.logLevel<=Ye.ERROR){let t=e.map(FR);xd.error(`Firestore (${Wp}): ${n}`,...t)}}function RZ(n,...e){if(xd.logLevel<=Ye.WARN){let t=e.map(FR);xd.warn(`Firestore (${Wp}): ${n}`,...t)}}function FR(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function er(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Wj(n,r,t)}function Wj(n,e,t){let r=`FIRESTORE (${Wp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gj(r),new Error(r)}function _u(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Wj(e,i,r)}var $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends Bn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vu=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var jE=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yR=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}},_R=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vR=class{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_u(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new vu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vu,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{bi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(bi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vu)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(bi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_u(typeof r.accessToken=="string",31837,{l:r}),new jE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _u(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}},ER=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},IR=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ER(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},BE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wR=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_u(this.o===void 0,3512);let r=s=>{s.error!=null&&bi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,bi("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{bi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):bi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new BE(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_u(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new BE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function PZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function NZ(){return new TextEncoder}var bR=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=PZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Br(n,e){return n<e?-1:n>e?1:0}function kZ(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Br(r,i);{let s=NZ(),o=xZ(s.encode(Mj(n,t)),s.encode(Mj(e,t)));return o!==0?o:Br(r,i)}}t+=r>65535?2:1}return Br(n.length,e.length)}function Mj(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function xZ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Br(n[t],e[t]);return Br(n.length,e.length)}var Oj="__name__",$E=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&er(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&er(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Br(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):kZ(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return VE.fromString(e.substring(4,e.length-2))}},fo=class n extends $E{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Ve($e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},MZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,TR=class n extends $E{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return MZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oj}static keyField(){return new n([Oj])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Ve($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ve($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ve($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ve($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var po=class n{constructor(e){this.path=e}static fromPath(e){return new n(fo.fromString(e))}static fromName(e){return new n(fo.fromString(e).popFirst(5))}static empty(){return new n(fo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fo.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new fo(e.slice()))}};function OZ(n,e,t,r){if(e===!0&&r===!0)throw new Ve($e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FZ(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function LZ(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":er(12329,{type:typeof n})}function VZ(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=LZ(n);throw new Ve($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Kp(n,e){if(!FZ(n))throw new Ve($e.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Ve($e.INVALID_ARGUMENT,t);return!0}var Fj=-62135596800,Lj=1e6,Bp=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Lj);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fj)throw new Ve($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lj}_compareTo(e){return this.seconds===e.seconds?Br(this.nanoseconds,e.nanoseconds):Br(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Fj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Bp._jsonSchemaVersion="firestore/timestamp/1.0",Bp._jsonSchema={type:Yt("string",Bp._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};var CR=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};CR.UNKNOWN_ID=-1;function UZ(n){return n.name==="IndexedDbTransactionError"}function jZ(n){return n===0&&1/n==-1/0}var BZ="remoteDocuments",Kj="owner";var Qj="mutationQueues";var Yj="mutations";var Jj="documentMutations",$Z="remoteDocumentsV14";var Xj="remoteDocumentGlobal";var Zj="targets";var eB="targetDocuments";var tB="targetGlobal",nB="collectionParents";var rB="clientMetadata";var iB="bundles";var sB="namedQueries";var HZ="indexConfiguration";var qZ="indexState";var zZ="indexEntries";var oB="documentOverlays";var GZ="globals";var WZ=[Qj,Yj,Jj,BZ,Zj,Kj,tB,eB,rB,Xj,nB,iB,sB],eCe=[...WZ,oB],KZ=[Qj,Yj,Jj,$Z,Zj,Kj,tB,eB,rB,Xj,nB,iB,sB,oB],QZ=KZ,YZ=[...QZ,HZ,qZ,zZ];var tCe=[...YZ,GZ];var Md=class n{constructor(e,t){this.comparator=e,this.root=t||fs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rd(this.root,e,this.comparator,!0)}},Rd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw er(43730,{key:this.key,value:this.value});if(this.right.isRed())throw er(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw er(27949);return e+(this.isRed()?0:1)}};fs.EMPTY=null,fs.RED=!0,fs.BLACK=!1;fs.EMPTY=new class{constructor(){this.size=0}get key(){throw er(57766)}get value(){throw er(16141)}get color(){throw er(16727)}get left(){throw er(29726)}get right(){throw er(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new fs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var HE=class n{constructor(e){this.comparator=e,this.data=new Md(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qE(this.data.getIterator())}getIteratorFrom(e){return new qE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var SR=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pa=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SR("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Br(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pa.EMPTY_BYTE_STRING=new Pa("");var JZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function XZ(n){if(_u(!!n,39018),typeof n=="string"){let e=0,t=JZ.exec(n);if(_u(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$p(n.seconds),nanos:$p(n.nanos)}}function $p(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ZZ(n){return typeof n=="string"?Pa.fromBase64String(n):Pa.fromUint8Array(n)}var DR="(default)",AR=class n{constructor(e,t){this.projectId=e,this.database=t||DR}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===DR}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var aB="__type__",eee="__max__";var cB="__vector__",uB="value";function tee(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[aB])===null||t===void 0?void 0:t.stringValue)===cB}function nee(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eee}var rCe={mapValue:{fields:{[aB]:{stringValue:cB},[uB]:{arrayValue:{}}}}};var RR=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function ree(n){return new RR(n)}var iCe=new Md(po.comparator);var sCe=new Md(po.comparator);var oCe=new Md(po.comparator),aCe=new HE(po.comparator);var cCe=new HE(Br);var Vj,Be;(Be=Vj||(Vj={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";var uCe=new VE([4294967295,4294967295],0);var zE=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft($p(e.integerValue));else if("doubleValue"in e){let r=$p(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),jZ(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=XZ(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ZZ(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?nee(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):tee(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):er(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=uB,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft($p(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),po.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};zE.Ut=new zE;var lCe=new Uint8Array(0);var lB=41943040,hs=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(lB,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);var iee=1048576;function gR(){return typeof document<"u"?document:null}var PR=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&bi("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var NR=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Uj,jj;(jj=Uj||(Uj={})).Fa="default",jj.Cache="cache";function see(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Bj=new Map;var dB="firestore.googleapis.com",$j=!0,GE=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dB,this.ssl=$j}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$j;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iee)throw new Ve($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=see((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},WE=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yR;switch(r.type){case"firstParty":return new IR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Bj.get(t);r&&(bi("ComponentProvider","Removing Datastore"),Bj.delete(t),r.terminate())})(this),Promise.resolve()}};function hB(n,e,t,r={}){var i;n=VZ(n,WE);let s=Bs(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Gl(`https://${c}`),Wl("Firestore",!0)),o.host!==dB&&o.host!==c&&RZ("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Yi(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Cn.MOCK_USER;else{h=F_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ve($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Cn(y)}n._authCredentials=new _R(new jE(h,m))}}var kR=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Eu=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xR(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kp(t,n._jsonSchema))return new n(e,r||null,new po(fo.fromString(t.referencePath)))}};Eu._jsonSchemaVersion="firestore/documentReference/1.0",Eu._jsonSchema={type:Yt("string",Eu._jsonSchemaVersion),referencePath:Yt("string")};var xR=class n extends kR{constructor(e,t,r){super(e,t,ree(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Eu(this.firestore,null,new po(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var Hj="AsyncQueue",KE=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new PR(this,"async_queue_retry"),this.oc=()=>{let r=gR();r&&bi(Hj,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=gR();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=gR();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new vu;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!UZ(e))throw e;bi(Hj,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Gj("INTERNAL UNHANDLED ERROR: ",qj(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=NR.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&er(47125,{hc:qj(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function qj(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var MR=class extends WE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new KE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new KE(e),this._firestoreClient=void 0,await e}}};function fB(n,e){let t=typeof n=="object"?n:Hs(),r=typeof n=="string"?n:e||DR,i=la(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=O_("firestore");s&&hB(i,...s)}return i}var Hp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pa.fromBase64String(e))}catch(t){throw new Ve($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Hp._jsonSchemaVersion="firestore/bytes/1.0",Hp._jsonSchema={type:Yt("string",Hp._jsonSchemaVersion),bytes:Yt("string")};var QE=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new TR(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qp=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Br(this._lat,e._lat)||Br(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Kp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};qp._jsonSchemaVersion="firestore/geoPoint/1.0",qp._jsonSchema={type:Yt("string",qp._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};var zp=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ve($e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};zp._jsonSchemaVersion="firestore/vectorValue/1.0",zp._jsonSchema={type:Yt("string",zp._jsonSchemaVersion),vectorValues:Yt("object")};var oee=new RegExp("[~\\*/\\[\\]]");function aee(n,e,t){if(e.search(oee)>=0)throw zj(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new QE(...e.split("."))._internalPath}catch{throw zj(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zj(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ve($e.INVALID_ARGUMENT,a+n+c)}var YE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Eu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new OR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pB("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},OR=class extends YE{data(){return super.data()}};function pB(n,e){return typeof e=="string"?aee(n,e):e instanceof QE?e._internalPath:e._delegate._internalPath}var Pd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Nd=class n extends YE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pB("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve($e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Nd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nd._jsonSchema={type:Yt("string",Nd._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var kd=class extends Nd{data(e={}){return super.data(e)}},Gp=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kd(this._firestore,this._userDataWriter,r.key,r,new Pd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:cee(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve($e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function cee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return er(61501,{type:n})}}Gp._jsonSchemaVersion="firestore/querySnapshot/1.0",Gp._jsonSchema={type:Yt("string",Gp._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};(function(e,t=!0){(function(i){Wp=i})(Zi),pr(new bn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new MR(new vR(r.getProvider("auth-internal")),new wR(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new AR(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),mt(kj,xj,e),mt(kj,xj,"esm2017")})();var Qp=class{constructor(e){return e}},mB="firestore",LR=class{constructor(){return da(mB)}};var VR=new Z("angularfire2.firestore-instances");function uee(n,e){let t=Hc(mB,n,e);return t&&new Qp(t)}function lee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Qp(r)}}var dee={provide:LR,deps:[[new an,VR]]},hee={provide:Qp,useFactory:uee,deps:[[new an,VR],mi]};function gB(n,...e){return mt("angularfire",es.full,"fst"),vn([hee,dee,{provide:VR,useFactory:lee(n),multi:!0,deps:[tt,ht,ts,zs,[new an,Xc],[new an,fa],...e]}])}var yB=qs(fB,!0);var bB="firebasestorage.googleapis.com",fee="storageBucket",pee=120*1e3,mee=600*1e3;var ps=class n extends Bn{constructor(e,t,r=0){super(UR(e),`Firebase Storage: ${t} (${UR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return UR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},go=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(go||{});function UR(n){return"storage/"+n}function gee(){let n="An unknown error occurred, please check the error payload for server response.";return new ps(go.UNKNOWN,n)}function yee(){return new ps(go.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _ee(){return new ps(go.CANCELED,"User canceled the upload/download.")}function vee(n){return new ps(go.INVALID_URL,"Invalid URL '"+n+"'.")}function Eee(n){return new ps(go.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _B(n){return new ps(go.INVALID_ARGUMENT,n)}function TB(){return new ps(go.APP_DELETED,"The Firebase app was deleted.")}function Iee(n){return new ps(go.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var mo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Eee(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(ue){ue.path_=decodeURIComponent(ue.path)}let h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",C=new RegExp(`^https?://${m}/${h}/b/${i}/o${y}`,"i"),R={bucket:1,path:3},P=t===bB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",$=new RegExp(`^https?://${P}/${i}/${x}`,"i"),J=[{regex:a,indices:c,postModify:s},{regex:C,indices:R,postModify:d},{regex:$,indices:{bucket:1,path:2},postModify:d}];for(let ue=0;ue<J.length;ue++){let ze=J[ue],ge=ze.regex.exec(e);if(ge){let w=ge[ze.indices.bucket],_=ge[ze.indices.path];_||(_=""),r=new n(w,_),ze.postModify(r);break}}if(r==null)throw vee(e);return r}},jR=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function wee(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let d=!1;function h(...x){d||(d=!0,e.apply(null,x))}function m(x){i=setTimeout(()=>{i=null,n(C,c())},x)}function y(){s&&clearTimeout(s)}function C(x,...$){if(d){y();return}if(x){y(),h.call(null,x,...$);return}if(c()||o){y(),h.call(null,x,...$);return}r<64&&(r*=2);let J;a===1?(a=2,J=0):J=(r+Math.random())*1e3,m(J)}let R=!1;function P(x){R||(R=!0,y(),!d&&(i!==null?(x||(a=2),clearTimeout(i),m(0)):x||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,P(!0)},t),P}function bee(n){n(!1)}function Tee(n){return n!==void 0}function vB(n,e,t,r){if(r<e)throw _B(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _B(`Invalid value for '${n}'. Expected ${t} or less.`)}function Cee(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var BR=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(BR||{});function See(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var $R=class{constructor(e,t,r,i,s,o,a,c,d,h,m,y=!0,C=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=y,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Od(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===BR.NO_ERROR,c=s.getStatus();if(!a||See(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===BR.ABORT;r(!1,new Od(!1,null,h));return}let d=this.successCodes_.indexOf(c)!==-1;r(!0,new Od(d,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Tee(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=gee();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?TB():_ee();o(c)}else{let c=yee();o(c)}};this.canceled_?t(!1,new Od(!1,null,!0)):this.backoffId_=wee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Od=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Dee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Aee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ree(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Pee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Nee(n,e,t,r,i,s,o=!0,a=!1){let c=Cee(n.urlParams),d=n.url+c,h=Object.assign({},n.headers);return Ree(h,e),Dee(h,t),Aee(h,s),Pee(h,r),new $R(d,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}function kee(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xee(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var RSe=256*1024;var HR=class n{constructor(e,t){this._service=e,t instanceof mo?this._location=t:this._location=mo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new mo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xee(this._location.path)}get storage(){return this._service}get parent(){let e=kee(this._location.path);if(e===null)return null;let t=new mo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Iee(e)}};function EB(n,e){let t=e?.[fee];return t==null?null:mo.makeFromBucketSpec(t,n)}function Mee(n,e,t,r={}){n.host=`${e}:${t}`;let i=Bs(e);i&&(Gl(`https://${n.host}/b`),Wl("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:F_(s,n.app.options.projectId))}var qR=class{constructor(e,t,r,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=bB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pee,this._maxUploadRetryTime=mee,this._requests=new Set,i!=null?this._bucket=mo.makeFromBucketSpec(i,this._host):this._bucket=EB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mo.makeFromBucketSpec(this._url,e):this._bucket=EB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new HR(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new jR(TB());{let o=Nee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},IB="@firebase/storage",wB="0.13.14";var CB="storage";function SB(n=Hs(),e){n=pi(n);let r=la(n,CB).getImmediate({identifier:e}),i=O_("storage");return i&&DB(r,...i),r}function DB(n,e,t,r={}){Mee(n,e,t,r)}function Oee(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new qR(t,r,i,e,Zi)}function Fee(){pr(new bn(CB,Oee,"PUBLIC").setMultipleInstances(!0)),mt(IB,wB,""),mt(IB,wB,"esm2017")}Fee();var Yp=class{constructor(e){return e}},AB="storage",zR=class{constructor(){return da(AB)}};var GR=new Z("angularfire2.storage-instances");function Lee(n,e){let t=Hc(AB,n,e);return t&&new Yp(t)}function Vee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yp(r)}}var Uee={provide:zR,deps:[[new an,GR]]},jee={provide:Yp,useFactory:Lee,deps:[[new an,GR],mi]};function RB(n,...e){return mt("angularfire",es.full,"gcs"),vn([jee,Uee,{provide:GR,useFactory:Vee(n),multi:!0,deps:[tt,ht,ts,zs,[new an,Xc],[new an,fa],...e]}])}var PB=qs(SB,!0);function Bee(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var NB=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",Bee];var $ee="firebase",Hee="12.8.0";_i($ee,Hee,"app");var Ti={production:!1,firebase:{apiKey:"AIzaSyB_9AlTCYi27xFQkP64f5aU4OrQBZ7TE8k",authDomain:"agilityasturias-4a107.firebaseapp.com",projectId:"agilityasturias-4a107",storageBucket:"agilityasturias-4a107.firebasestorage.app",messagingSenderId:"898271086134",appId:"1:898271086134:web:10e005442180b8d2943a97",measurementId:"G-N6SP2XNR7Q"}};var hn=class n{auth;firestore;currentUserSignal=Ee(null);userProfileSignal=Ee(null);checkAuthLoading=Ee(!0);constructor(){let e;try{e=Fr()}catch{e=Ks(Ti.firebase)}this.auth=bS(e),this.firestore=lo(e),gv(this.auth,async t=>{this.currentUserSignal.set(t),t?await this.fetchUserProfile(t):this.userProfileSignal.set(null),this.checkAuthLoading.set(!1)})}async fetchUserProfile(e){let t=_r(this.firestore,"users",e.uid),r=await yj(t);if(r.exists())this.userProfileSignal.set(r.data());else{let i={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",role:"user"};await vj(t,i),this.userProfileSignal.set(i)}}getAuthState(){return new Promise(e=>{let t=gv(this.auth,r=>{t(),e(r)})})}async loginWithGoogle(){let e=new _S;try{return(await wS(this.auth,e)).user}catch(t){throw console.error("Error logging in with Google",t),t}}async logout(){try{await vS(this.auth),this.currentUserSignal.set(null),this.userProfileSignal.set(null)}catch(e){throw console.error("Error logging out",e),e}}isLoggedIn=Nn(()=>!!this.currentUserSignal());isStaff=Nn(()=>{let e=this.userProfileSignal();return e?.role==="staff"||e?.role==="admin"});isAdmin=Nn(()=>this.userProfileSignal()?.role==="admin");async getAllUsers(){let e=jr(this.firestore,"users");return(await _j(e)).docs.map(r=>r.data())}async updateUserRole(e,t){let r=_r(this.firestore,"users",e);await FE(r,{role:t});let i=this.currentUserSignal();if(i&&i.uid===e){let s=this.userProfileSignal();s&&this.userProfileSignal.set(se(j({},s),{role:t}))}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function qee(n,e){n&1&&(N(0,"p"),F(1,"Bienvenido a Agility Asturias. Inicia sesi\xF3n para gestionar tus reservas."),k())}function zee(n,e){if(n&1){let t=Ne();N(0,"div",6)(1,"button",7),te("click",function(){ae(t);let i=Y();return ce(i.login())}),xe(2,"img",8),F(3," Continuar con Google "),k()()}}function Gee(n,e){if(n&1){let t=Ne();N(0,"div",9),xe(1,"img",10),N(2,"div")(3,"p",11),F(4),k(),N(5,"p",12),F(6),k(),N(7,"button",13),te("click",function(){ae(t);let i=Y();return ce(i.logout())}),F(8,"Cerrar Sesi\xF3n"),k()()()}if(n&2){let t=e.ngIf;B(),K("src",t.photoURL,nn),B(3),Fe(t.displayName),B(2),Fe(t.email)}}var JE=class n{authService=U(hn);constructor(){}async login(){try{await this.authService.loginWithGoogle()}catch(e){console.error(e)}}async logout(){await this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-area"],[4,"ngIf"],["class","google-btn-wrapper",4,"ngIf"],["class","user-info",4,"ngIf"],[1,"google-btn-wrapper"],[1,"btn-google",3,"click"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google logo"],[1,"user-info"],["alt","User photo",3,"src"],[1,"name"],[1,"email"],[1,"btn-logout",3,"click"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),F(4,"Iniciar Sesi\xF3n"),k()(),pe(5,qee,2,0,"p",3)(6,zee,4,0,"div",4)(7,Gee,9,3,"div",5),k()()),t&2&&(B(5),K("ngIf",!r.authService.currentUserSignal()),B(),K("ngIf",!r.authService.currentUserSignal()),B(),K("ngIf",r.authService.currentUserSignal()))},dependencies:[Wt,In],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;max-width:400px;width:100%;text-align:center}.google-btn-wrapper[_ngcontent-%COMP%]{margin:20px 0;display:flex;justify-content:center}.btn-google[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;background-color:#fff;color:#444;border:1px solid #ddd;border-radius:4px;padding:10px 20px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s;width:100%}.btn-google[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.btn-logout[_ngcontent-%COMP%]{margin-top:10px;padding:6px 12px;background-color:#f44;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#c00}.user-info[_ngcontent-%COMP%]{text-align:center;margin-top:20px;display:flex;flex-direction:column;align-items:center}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-bottom:10px}"]})};var XE=class n{constructor(e){this.location=e}get heroBackground(){return`linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${this.location.prepareExternalUrl("Images/Agility_Asturias_logo.jpg")}')`}static \u0275fac=function(t){return new(t||n)(he(ia))};static \u0275cmp=ft({type:n,selectors:[["app-home"]],decls:23,vars:2,consts:[[1,"hero"],[1,"hero-content"],[1,"subtitle"],[1,"history-section"],[1,"container"],[1,"history-text"]],template:function(t,r){t&1&&(nt(0,"section",0)(1,"div",1)(2,"h2"),F(3,"Bienvenido a Agility Asturias"),pt(),nt(4,"p",2),F(5,"Perretes y agility en Asturias."),pt()()(),nt(6,"section",3)(7,"div",4)(8,"h3"),F(9,"Historia del Agility"),pt(),nt(10,"div",5)(11,"p"),F(12,"El Agility es un deporte canino que se origin\xF3 en el Reino Unido a finales de la d\xE9cada de 1970 y principios de la d\xE9cada de 1980. El primer evento de Agility tuvo lugar en 1978 en el Crufts Dog Show, uno de los mayores eventos de perros en el mundo."),pt(),nt(13,"p"),F(14,"El creador del Agility fue John Varley, quien trabajaba como entrenador de perros en el Crufts Dog Show. Varley estaba buscando una forma de entretener a la audiencia durante los descansos entre las competiciones de obediencia y decidi\xF3 crear un curso de obst\xE1culos para perros."),pt(),nt(15,"p"),F(16,"El curso de obst\xE1culos original constaba de saltos, t\xFAneles y aros, y estaba dise\xF1ado para poner a prueba la agilidad y la velocidad de los perros. La primera competici\xF3n de agility se llev\xF3 a cabo en 1978 en el Crufts Dog Show y fue un gran \xE9xito entre los participantes y el p\xFAblico."),pt(),nt(17,"p"),F(18,"A medida que el deporte creci\xF3 en popularidad, se establecieron organizaciones de agility en todo el mundo, incluyendo el Kennel Club en el Reino Unido y la United States Dog Agility Association en los Estados Unidos."),pt(),nt(19,"p"),F(20,"El agility se convirti\xF3 r\xE1pidamente en uno de los deportes caninos m\xE1s populares del mundo, con miles de perros y sus due\xF1os compitiendo en eventos y competiciones en todo el mundo. El deporte se ha diversificado en diferentes modalidades, como el jumping y la agilidad por equipos."),pt(),nt(21,"p"),F(22,"Hoy en d\xEDa, el agility es un deporte altamente competitivo que requiere una gran cantidad de entrenamiento y habilidades tanto por parte del perro como del manejador. A pesar de su naturaleza competitiva, tambi\xE9n es un deporte muy divertido y emocionante para perros y due\xF1os por igual."),pt()()()()),t&2&&Sl("background-image",r.heroBackground)},styles:['.hero[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-attachment:fixed;height:70vh;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center;margin-bottom:0;position:relative}.hero-content[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:3rem;border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000004d;max-width:600px;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1rem;font-weight:700;text-transform:uppercase;letter-spacing:2px}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;margin-bottom:2rem;color:#f0f0f0}.cta-button[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;border:none;padding:12px 30px;font-size:1.1rem;border-radius:30px;cursor:pointer;transition:transform .2s,box-shadow .2s;font-weight:700;text-decoration:none;display:inline-block}.cta-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #ff7e0066}.history-section[_ngcontent-%COMP%]{padding:4rem 1rem;background-color:#f9f9f9;overflow:hidden}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--primary-blue);font-size:2.5rem;margin-bottom:4rem;position:relative;font-weight:800}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;width:80px;height:4px;background-color:var(--accent-orange);margin:15px auto 0;border-radius:2px}.timeline[_ngcontent-%COMP%]{position:relative;max-width:1000px;margin:0 auto}.timeline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:4px;background-color:#ddd;top:0;bottom:0;left:50%;margin-left:-2px;border-radius:2px}.timeline-item[_ngcontent-%COMP%]{padding:10px 40px;position:relative;background-color:inherit;width:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards;opacity:0}.timeline-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.timeline-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.timeline-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}.timeline-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s}.left[_ngcontent-%COMP%]{left:0}.right[_ngcontent-%COMP%]{left:50%}.timeline-icon[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;right:-20px;background-color:#fff;border:4px solid var(--accent-orange);top:20px;border-radius:50%;z-index:10;display:flex;align-items:center;justify-content:center;font-size:1.2rem;box-shadow:0 0 0 4px #fff,inset 0 2px #00000014}.right[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{left:-20px}.timeline-content[_ngcontent-%COMP%]{padding:20px 30px;background-color:#fff;position:relative;border-radius:8px;box-shadow:0 5px 15px #0000000d;transition:transform .3s,box-shadow .3s;border-left:4px solid var(--primary-blue)}.timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #0000001a}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-left:none;border-right:4px solid var(--primary-blue)}.date[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#999;font-weight:700;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.timeline-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:1.4rem}.timeline-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6}@media(max-width:768px){.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem}.timeline[_ngcontent-%COMP%]:after{left:31px}.timeline-item[_ngcontent-%COMP%]{width:100%;padding-left:70px;padding-right:25px}.timeline-item.right[_ngcontent-%COMP%]{left:0}.left[_ngcontent-%COMP%]:after, .right[_ngcontent-%COMP%]:after{left:21px}.timeline-icon[_ngcontent-%COMP%]{left:11px!important;right:auto}.right[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{border-right:none;border-left:4px solid var(--primary-blue)}}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}0%{opacity:0;transform:translateY(20px)}}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}0%{opacity:0}}']})};var BB=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(he(Ms),he(ii))};static \u0275dir=zt({type:n})}return n})(),Wee=(()=>{class n extends BB{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ec(n)))(i||n)}})();static \u0275dir=zt({type:n,features:[si]})}return n})(),XR=new Z("");var Kee={provide:XR,useExisting:Rs(()=>Ud),multi:!0};function Qee(){let n=Pr()?Pr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Yee=new Z(""),Ud=(()=>{class n extends BB{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Qee())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(he(Ms),he(ii),he(Yee,8))};static \u0275dir=zt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&te("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Dl([Kee]),si]})}return n})();function ZR(n){return n==null||eP(n)===0}function eP(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var tP=new Z(""),nP=new Z(""),Jee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,yo=class{static min(e){return Xee(e)}static max(e){return Zee(e)}static required(e){return ete(e)}static requiredTrue(e){return tte(e)}static email(e){return nte(e)}static minLength(e){return rte(e)}static maxLength(e){return ite(e)}static pattern(e){return ste(e)}static nullValidator(e){return $B()}static compose(e){return KB(e)}static composeAsync(e){return YB(e)}};function Xee(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Zee(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function ete(n){return ZR(n.value)?{required:!0}:null}function tte(n){return n.value===!0?null:{required:!0}}function nte(n){return ZR(n.value)||Jee.test(n.value)?null:{email:!0}}function rte(n){return e=>{let t=e.value?.length??eP(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function ite(n){return e=>{let t=e.value?.length??eP(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function ste(n){if(!n)return $B;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ZR(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function $B(n){return null}function HB(n){return n!=null}function qB(n){return na(n)?Ht(n):n}function zB(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function GB(n,e){return e.map(t=>t(n))}function ote(n){return!n.validate}function WB(n){return n.map(e=>ote(e)?e:t=>e.validate(t))}function KB(n){if(!n)return null;let e=n.filter(HB);return e.length==0?null:function(t){return zB(GB(t,e))}}function QB(n){return n!=null?KB(WB(n)):null}function YB(n){if(!n)return null;let e=n.filter(HB);return e.length==0?null:function(t){let r=GB(t,e).map(qB);return tw(r).pipe(We(zB))}}function JB(n){return n!=null?YB(WB(n)):null}function kB(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function XB(n){return n._rawValidators}function ZB(n){return n._rawAsyncValidators}function WR(n){return n?Array.isArray(n)?n:[n]:[]}function eI(n,e){return Array.isArray(n)?n.includes(e):n===e}function xB(n,e){let t=WR(e);return WR(n).forEach(i=>{eI(t,i)||t.push(i)}),t}function MB(n,e){return WR(e).filter(t=>!eI(n,t))}var tI=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=QB(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Iu=class extends tI{name;get formDirective(){return null}get path(){return null}},wu=class extends tI{_parent=null;name=null;valueAccessor=null},nI=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var aI=(()=>{class n extends nI{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(wu,2))};static \u0275dir=zt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&En("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[si]})}return n})(),e4=(()=>{class n extends nI{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(Iu,10))};static \u0275dir=zt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&En("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[si]})}return n})();var Jp="VALID",ZE="INVALID",Fd="PENDING",Xp="DISABLED",Na=class{},rI=class extends Na{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Zp=class extends Na{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},em=class extends Na{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ld=class extends Na{status;source;constructor(e,t){super(),this.status=e,this.source=t}},KR=class extends Na{source;constructor(e){super(),this.source=e}},nm=class extends Na{source;constructor(e){super(),this.source=e}};function rP(n){return(cI(n)?n.validators:n)||null}function ate(n){return Array.isArray(n)?QB(n):n||null}function iP(n,e){return(cI(e)?e.asyncValidators:n)||null}function cte(n){return Array.isArray(n)?JB(n):n||null}function cI(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function t4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function n4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var Vd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return At(this.statusReactive)}set status(e){At(()=>this.statusReactive.set(e))}_status=Nn(()=>this.statusReactive());statusReactive=Ee(void 0);get valid(){return this.status===Jp}get invalid(){return this.status===ZE}get pending(){return this.status==Fd}get disabled(){return this.status===Xp}get enabled(){return this.status!==Xp}errors;get pristine(){return At(this.pristineReactive)}set pristine(e){At(()=>this.pristineReactive.set(e))}_pristine=Nn(()=>this.pristineReactive());pristineReactive=Ee(!0);get dirty(){return!this.pristine}get touched(){return At(this.touchedReactive)}set touched(e){At(()=>this.touchedReactive.set(e))}_touched=Nn(()=>this.touchedReactive());touchedReactive=Ee(!1);get untouched(){return!this.touched}_events=new vt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MB(e,this._rawAsyncValidators))}hasValidator(e){return eI(this._rawValidators,e)}hasAsyncValidator(e){return eI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(se(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new em(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new em(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(se(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Zp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Zp(!0,r))}markAsPending(e={}){this.status=Fd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ld(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(se(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xp,this.errors=null,this._forEachChild(i=>{i.disable(se(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rI(this.value,r)),this._events.next(new Ld(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jp,this._forEachChild(r=>{r.enable(se(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(se(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jp||this.status===Fd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rI(this.value,t)),this._events.next(new Ld(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(se(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xp:Jp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Fd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=qB(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ld(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new It,this.statusChanges=new It}_calculateStatus(){return this._allControlsDisabled()?Xp:this.errors?ZE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fd)?Fd:this._anyControlsHaveStatus(ZE)?ZE:Jp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Zp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new em(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cI(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ate(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cte(this._rawAsyncValidators)}},iI=class extends Vd{constructor(e,t,r){super(rP(t),iP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){n4(this,!0,e),Object.keys(e).forEach(r=>{t4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,se(j({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new nm(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var QR=class extends iI{};var uI=new Z("",{factory:()=>lI}),lI="always";function r4(n,e){return[...e.path,n]}function YR(n,e,t=lI){sP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),lte(n,e),hte(n,e),dte(n,e),ute(n,e)}function OB(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ute(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function sP(n,e){let t=XB(n);e.validator!==null?n.setValidators(kB(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=ZB(n);e.asyncValidator!==null?n.setAsyncValidators(kB(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();sI(e._rawValidators,i),sI(e._rawAsyncValidators,i)}function oI(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=XB(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=ZB(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return sI(e._rawValidators,r),sI(e._rawAsyncValidators,r),t}function lte(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&i4(n,e)})}function dte(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&i4(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function i4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hte(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function fte(n,e){n==null,sP(n,e)}function pte(n,e){return oI(n,e)}function s4(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function mte(n){return Object.getPrototypeOf(n.constructor)===Wee}function gte(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function o4(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ud?t=s:mte(s)?r=s:i=s}),i||r||t||null}function yte(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function LB(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function VB(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var tm=class extends Vd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(rP(t),iP(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(VB(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new nm(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){VB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _te=n=>n instanceof tm;var vte={provide:wu,useExisting:Rs(()=>oP)},UB=Promise.resolve(),oP=(()=>{class n extends wu{_changeDetectorRef;callSetDisabledState;control=new tm;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new It;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=o4(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),s4(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){UB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Sc(r);UB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?r4(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(he(Iu,9),he(tP,10),he(nP,10),he(XR,10),he(Cc,8),he(uI,8))};static \u0275dir=zt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Dl([vte]),si,ji]})}return n})();var a4=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var JR=class extends Vd{constructor(e,t,r){super(rP(t),iP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){n4(this,!1,e),e.forEach((r,i)=>{t4(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],se(j({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new nm(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var Ete=(()=>{class n extends Iu{callSetDisabledState;get submitted(){return At(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Nn(()=>this._submittedReactive());_submittedReactive=Ee(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(oI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return YR(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){OB(t.control||null,t,!1),yte(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,gte(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new KR(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(OB(r||null,t),_te(i)&&(YR(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);fte(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&pte(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sP(this.form,this),this._oldForm&&oI(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(he(tP,10),he(nP,10),he(uI,8))};static \u0275dir=zt({type:n,features:[si,ji]})}return n})();var c4=new Z("");var Ite={provide:wu,useExisting:Rs(()=>aP)},aP=(()=>{class n extends wu{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new It;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=o4(this,s)}ngOnChanges(t){this._added||this._setUpControl(),s4(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return r4(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(he(Iu,13),he(tP,10),he(nP,10),he(XR,10),he(c4,8))};static \u0275dir=zt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Dl([Ite]),si,ji]})}return n})();var wte={provide:Iu,useExisting:Rs(()=>cP)},cP=(()=>{class n extends Ete{form=null;ngSubmit=new It;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ec(n)))(i||n)}})();static \u0275dir=zt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&te("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Dl([wte]),si]})}return n})();var u4=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=or({})}return n})();function jB(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var l4=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return jB(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new iI(i,s)}record(t,r=null){let i=this._reduceControls(t);return new QR(i,r)}control(t,r,i){let s={};return this.useNonNullable?(jB(r)?s=r:(s.validators=r,s.asyncValidators=i),new tm(t,se(j({},s),{nonNullable:!0}))):new tm(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new JR(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof tm)return t;if(t instanceof Vd)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uI,useValue:t.callSetDisabledState??lI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=or({imports:[u4]})}return n})(),d4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:c4,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:uI,useValue:t.callSetDisabledState??lI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=or({imports:[u4]})}return n})();var hI=class n{firestore;reservationsSignal=Ee([]);unsubscribe=null;constructor(){let e;try{e=Fr()}catch{e=Ks(Ti.firebase)}this.firestore=lo(e);let t=jr(this.firestore,"reservations");this.unsubscribe=Ad(t,r=>{let i=r.docs.map(s=>j({id:s.id},s.data()));this.reservationsSignal.set(i)},r=>{console.error("Error reading reservations:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getReservations(){return this.reservationsSignal}async addReservation(e){let t=jr(this.firestore,"reservations");return await Dd(t,e)}async deleteReservation(e){let t=_r(this.firestore,`reservations/${e}`);return await Sd(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var jd=class n{firestore;dogsSignal=Ee([]);unsubscribe=null;constructor(){let e;try{e=Fr()}catch{e=Ks(Ti.firebase)}this.firestore=lo(e)}subscribeToUserDogs(e){this.unsubscribe&&this.unsubscribe();let t=jr(this.firestore,"dogs"),r=fj(t,pj("userId","==",e));this.unsubscribe=Ad(r,i=>{let s=i.docs.map(o=>j({id:o.id},o.data()));this.dogsSignal.set(s)},i=>{console.error("Error reading dogs:",i)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getDogs(){return this.dogsSignal}async addDog(e){let t=jr(this.firestore,"dogs");return await Dd(t,e)}async deleteDog(e){let t=_r(this.firestore,`dogs/${e}`);return await Sd(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var ms=class n{toasts=Ee([]);counter=0;show(e,t="info",r=3e3){let i=this.counter++,s={id:i,message:e,type:t,duration:r};this.toasts.update(o=>[...o,s]),r>0&&setTimeout(()=>{this.remove(i)},r)}success(e,t=3e3){this.show(e,"success",t)}error(e,t=4e3){this.show(e,"error",t)}info(e,t=3e3){this.show(e,"info",t)}warning(e,t=3e3){this.show(e,"warning",t)}remove(e){this.toasts.update(t=>t.filter(r=>r.id!==e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function bte(n,e){if(n&1&&(N(0,"div",36),F(1),k()),n&2){let t=e.$implicit;B(),Rt(" \u{1F43E} ",t," ")}}function Tte(n,e){if(n&1&&(N(0,"div",34),pe(1,bte,2,1,"div",35),k()),n&2){let t=Y().$implicit;B(),K("ngForOf",t.selectedDogs)}}function Cte(n,e){if(n&1&&(N(0,"li",31)(1,"span",32),F(2),k(),pe(3,Tte,2,1,"div",33),k()),n&2){let t=e.$implicit;B(2),Fe(t.userName),B(),K("ngIf",t.selectedDogs&&t.selectedDogs.length)}}function Ste(n,e){if(n&1&&(N(0,"div",29)(1,"ul"),pe(2,Cte,4,2,"li",30),k()()),n&2){let t=Y(2).$implicit;B(2),K("ngForOf",t.reservations)}}function Dte(n,e){if(n&1){let t=Ne();N(0,"div",25)(1,"button",26),te("click",function(){ae(t);let i=Y().$implicit,s=Y(2);return ce(s.toggleAttendees(i.id))}),N(2,"span"),F(3),k(),N(4,"span",27),F(5,"\u25BC"),k()(),pe(6,Ste,3,1,"div",28),k()}if(n&2){let t=Y().$implicit,r=Y(2);B(3),Rt("Ver asistentes (",t.reservations.length,")"),B(),En("open",r.expandedSlots().has(t.id)),B(2),K("ngIf",r.expandedSlots().has(t.id))}}function Ate(n,e){if(n&1){let t=Ne();N(0,"button",37),te("click",function(){ae(t);let i=Y().$implicit,s=Y(2);return ce(s.cancelSlot(i))}),F(1," Cancelar Reserva "),k()}}function Rte(n,e){if(n&1){let t=Ne();N(0,"button",38),te("click",function(){ae(t);let i=Y().$implicit,s=Y(2);return ce(s.bookSlot(i))}),F(1),k()}if(n&2){let t=Y().$implicit;K("disabled",t.currentBookings>=t.maxBookings),B(),Rt(" ",t.currentBookings>=t.maxBookings?"Completo":"Reservar"," ")}}function Pte(n,e){if(n&1&&(N(0,"div",12)(1,"div",13)(2,"span",14),F(3),k()(),N(4,"div",15)(5,"div",16)(6,"span",17),F(7,"Disponibilidad:"),k(),N(8,"span",18),F(9),k()(),N(10,"div",19),xe(11,"div",20),k()(),pe(12,Dte,7,4,"div",21),N(13,"div",22),pe(14,Ate,2,0,"button",23)(15,Rte,2,2,"button",24),k()()),n&2){let t=e.$implicit;En("full",t.currentBookings>=t.maxBookings),B(3),ef("",t.startTime," - ",t.endTime),B(6),ef("",t.currentBookings," / ",t.maxBookings),B(2),Sl("width",t.currentBookings/t.maxBookings*100,"%"),B(),K("ngIf",t.reservations&&t.reservations.length>0),B(2),K("ngIf",t.isBookedByCurrentUser),B(),K("ngIf",!t.isBookedByCurrentUser)}}function Nte(n,e){if(n&1&&(N(0,"div")(1,"div",6)(2,"h3",7),F(3),N(4,"span",8),F(5),qi(6,"date"),k()(),N(7,"span",9),F(8),k()(),N(9,"div",10),pe(10,Pte,16,11,"div",11),k()()),n&2){let t=e.$implicit;B(3),Rt(" ",t.day," "),B(2),Fe(zi(6,8,t.slots[0].date,"dd/MM")),B(2),En("morning",t.period==="Ma\xF1ana")("afternoon",t.period==="Tarde"),B(),Rt(" ",t.period," "),B(2),K("ngForOf",t.slots)}}function kte(n,e){if(n&1){let t=Ne();N(0,"div",48)(1,"p"),F(2,"\u26A0\uFE0F No tienes perros registrados."),k(),N(3,"a",49),te("click",function(){ae(t);let i=Y(2);return ce(i.closeModal())}),F(4,"Ir a mi perfil para a\xF1adir uno"),k()()}}function xte(n,e){if(n&1){let t=Ne();N(0,"label",50)(1,"input",51),te("change",function(){let i=ae(t).$implicit,s=Y(2);return ce(s.toggleDogSelection(i.name))}),k(),xe(2,"span",52),N(3,"span",53),F(4),k()()}if(n&2){let t=e.$implicit,r=Y(2);B(),K("checked",r.selectedDogIds.has(t.name)),B(3),Fe(t.name)}}function Mte(n,e){if(n&1){let t=Ne();N(0,"div",39),te("click",function(){ae(t);let i=Y();return ce(i.closeModal())}),N(1,"div",40),te("click",function(i){return ae(t),ce(i.stopPropagation())}),N(2,"h3"),F(3,"Confirmar Reserva"),k(),N(4,"p"),F(5,"\xBFQu\xE9 d\xEDa? "),N(6,"strong"),F(7),k(),F(8," a las "),N(9,"strong"),F(10),k()(),N(11,"div",41)(12,"p"),F(13,"Selecciona los perretes que vendr\xE1n:"),k(),pe(14,kte,5,0,"div",42),N(15,"div",43),pe(16,xte,5,2,"label",44),k()(),N(17,"div",45)(18,"button",46),te("click",function(){ae(t);let i=Y();return ce(i.closeModal())}),F(19,"Cancelar"),k(),N(20,"button",47),te("click",function(){ae(t);let i=Y();return ce(i.confirmBooking())}),F(21),k()()()()}if(n&2){let t=Y();B(7),Fe(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.day),B(3),Fe(t.selectedSlotForBooking==null?null:t.selectedSlotForBooking.startTime),B(4),K("ngIf",t.myDogs().length===0),B(2),K("ngForOf",t.myDogs()),B(4),K("disabled",t.myDogs().length>0&&t.selectedDogIds.size===0||t.isSubmitting()),B(),Rt(" ",t.isSubmitting()?"Reservando...":"Confirmar"," ")}}var fI=class n{authService=U(hn);reservationService=U(hI);dogService=U(jd);toastService=U(ms);isModalOpen=!1;isSubmitting=Ee(!1);selectedSlotForBooking=null;myDogs=this.dogService.getDogs();selectedDogIds=new Set;expandedSlots=Ee(new Set);selectedWeek=Ee("current");staticSlots=this.generateSlotsDefinition();constructor(){pc(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}toggleWeek(e){this.selectedWeek.set(e),this.expandedSlots.set(new Set)}getDatesForWeek(e){let t={},r=new Date,i=r.getDate()-(r.getDay()||7)+1+e*7,s=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"];for(let c=0;c<7;c++){let d=new Date(r.setDate(i+c)),h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),y=String(d.getDate()).padStart(2,"0");t[s[c]]=`${h}-${m}-${y}`}let o=new Date,a=o.getDay()||7;o.setDate(o.getDate()-a+1+e*7),o.setHours(0,0,0,0);for(let c=0;c<7;c++){let d=new Date(o);d.setDate(o.getDate()+c);let h=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),y=String(d.getDate()).padStart(2,"0");t[s[c]]=`${h}-${m}-${y}`}return t}slots=Nn(()=>{let e=this.reservationService.getReservations()(),t=this.authService.currentUserSignal(),i=this.selectedWeek()==="current"?0:1,s=this.getDatesForWeek(i),o=new Date,a=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0"),h=`${a}-${c}-${d}`;return this.staticSlots.map(y=>{let C=s[y.day],R=e.filter($=>$.slotId===y.id&&$.date===C),P=R.reduce(($,W)=>{let J=W.selectedDogs?.length||1;return $+J},0),x=t?R.find($=>$.userId===t.uid):void 0;return se(j({},y),{date:C,currentBookings:P,isBookedByCurrentUser:!!x,userReservationId:x?.id,reservations:R})}).filter(y=>y.date>=h)});groupedSlots=Nn(()=>{let e=this.slots();return["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes"].map(r=>{let i=e.filter(a=>a.day===r);if(i.length===0)return null;let o=parseInt(i[0].startTime.split(":")[0])<16?"Ma\xF1ana":"Tarde";return{day:r,period:o,slots:i}}).filter(r=>r!==null)});generateSlotsDefinition(){let e=[],t=1;return["Lunes","Jueves"].forEach(s=>{e.push({id:t++,day:s,startTime:"10:00",endTime:"11:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"11:30",endTime:"13:00",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"13:00",endTime:"14:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1})}),["Martes","Mi\xE9rcoles","Viernes"].forEach(s=>{e.push({id:t++,day:s,startTime:"16:30",endTime:"18:00",currentBookings:0,maxBookings:7,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"18:00",endTime:"19:30",currentBookings:0,maxBookings:5,isBookedByCurrentUser:!1}),e.push({id:t++,day:s,startTime:"19:30",endTime:"21:00",currentBookings:0,maxBookings:6,isBookedByCurrentUser:!1})}),e}bookSlot(e){if(!this.authService.currentUserSignal()){this.toastService.warning("Debes iniciar sesi\xF3n para reservar.");return}if(e.currentBookings>=e.maxBookings){this.toastService.error("Esta clase est\xE1 completa.");return}if(e.isBookedByCurrentUser){this.toastService.info("Ya tienes una reserva en este horario.");return}this.selectedSlotForBooking=e,this.selectedDogIds.clear(),this.isSubmitting.set(!1),this.isModalOpen=!0}toggleAttendees(e){let t=new Set(this.expandedSlots());t.has(e)?t.delete(e):t.add(e),this.expandedSlots.set(t)}toggleDogSelection(e){let t=new Set(this.selectedDogIds);t.has(e)?t.delete(e):t.add(e),this.selectedDogIds=t}closeModal(){this.isModalOpen=!1,this.selectedSlotForBooking=null,this.isSubmitting.set(!1)}async confirmBooking(){if(!this.selectedSlotForBooking||this.isSubmitting())return;if(this.selectedDogIds.size===0){this.toastService.warning("Por favor, selecciona al menos un perro.");return}let e=this.authService.currentUserSignal();if(!e)return;let t=this.slots().find(r=>r.id===this.selectedSlotForBooking.id);if(t){let r=this.selectedDogIds.size;if(t.currentBookings+r>t.maxBookings){let i=t.maxBookings-t.currentBookings;this.toastService.error(`No hay suficientes plazas. Intentas reservar para ${r} perro(s) pero solo quedan ${i} plazas.`);return}}this.isSubmitting.set(!0);try{let r=Array.from(this.selectedDogIds);await this.reservationService.addReservation({slotId:this.selectedSlotForBooking.id,userId:e.uid,userName:e.displayName||"Usuario",userEmail:e.email||"",day:this.selectedSlotForBooking.day,startTime:this.selectedSlotForBooking.startTime,date:this.selectedSlotForBooking.date,selectedDogs:r,createdAt:Date.now()}),this.closeModal(),this.toastService.success("\xA1Reserva confirmada con \xE9xito!")}catch(r){console.error("Error al reservar:",r),this.toastService.error("Hubo un error al realizar la reserva."),this.isSubmitting.set(!1)}}async cancelSlot(e){if(e.userReservationId&&confirm("\xBFQuieres cancelar tu reserva para esta clase?"))try{await this.reservationService.deleteReservation(e.userReservationId),this.toastService.success("Reserva cancelada correctamente.")}catch(t){console.error(t),this.toastService.error("Error al cancelar.")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-gestionar-reservas"]],decls:12,vars:6,consts:[[1,"reservations-container"],[1,"subtitle"],[1,"week-selector"],[3,"click"],[4,"ngFor","ngForOf"],["class","modal-backdrop",3,"click",4,"ngIf"],[1,"header-container"],[1,"day-header"],[1,"date-label"],[1,"period-badge"],[1,"slots-grid"],["class","slot-card",3,"full",4,"ngFor","ngForOf"],[1,"slot-card"],[1,"slot-time"],[1,"time"],[1,"slot-status"],[1,"crowdedness"],[1,"label"],[1,"value"],[1,"progress-bar"],[1,"fill"],["class","attendees-section",4,"ngIf"],[1,"actions"],["class","book-btn cancel-btn",3,"click",4,"ngIf"],["class","book-btn",3,"disabled","click",4,"ngIf"],[1,"attendees-section"],[1,"toggle-attendees-btn",3,"click"],[1,"chevron"],["class","attendees-list",4,"ngIf"],[1,"attendees-list"],["class","attendee-item",4,"ngFor","ngForOf"],[1,"attendee-item"],[1,"attendee-name"],["class","attendee-dogs-container",4,"ngIf"],[1,"attendee-dogs-container"],["class","attendee-dog-single",4,"ngFor","ngForOf"],[1,"attendee-dog-single"],[1,"book-btn","cancel-btn",3,"click"],[1,"book-btn",3,"click","disabled"],[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"dog-selection"],["class","no-dogs-warning",4,"ngIf"],[1,"dog-checkboxes"],["class","dog-checkbox",4,"ngFor","ngForOf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"no-dogs-warning"],["routerLink","/perfil",3,"click"],[1,"dog-checkbox"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"dog-label"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"h2"),F(2,"Gestionar Reservas"),k(),N(3,"p",1),F(4,"Selecciona una franja horaria para reservar tu clase de Agility."),k(),N(5,"div",2)(6,"button",3),te("click",function(){return r.toggleWeek("current")}),F(7," Semana Actual "),k(),N(8,"button",3),te("click",function(){return r.toggleWeek("next")}),F(9," Semana Siguiente "),k()(),pe(10,Nte,11,11,"div",4),k(),pe(11,Mte,22,6,"div",5)),t&2&&(B(6),En("active",r.selectedWeek()==="current"),B(2),En("active",r.selectedWeek()==="next"),B(2),K("ngForOf",r.groupedSlots()),B(),K("ngIf",r.isModalOpen))},dependencies:[Wt,Kn,In,dI,Dc],styles:[".reservations-container[_ngcontent-%COMP%]{padding:2rem 0}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:2rem}.week-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:3rem}.week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:2px solid var(--primary-blue);color:var(--primary-blue);padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:600;transition:all .2s}.week-selector[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%], .week-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--primary-blue);color:#fff}.date-label[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-left:10px;font-weight:400}.header-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto 1rem;border-bottom:2px solid var(--secondary-yellow);padding-bottom:.5rem;display:flex;align-items:center;gap:1rem}.day-header[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);font-size:1.5rem}.period-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:999px;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.period-badge.morning[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00;border:1px solid #ffe0b2}.period-badge.afternoon[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;max-width:900px;margin:0 auto 2rem}.slot-card[_ngcontent-%COMP%]{background:var(--white);border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000000d;border:1px solid rgba(0,0,0,.05);display:flex;flex-direction:column;gap:1.25rem;transition:transform .2s ease}.slot-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.slot-time[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:1.1rem}.day[_ngcontent-%COMP%]{color:var(--primary-blue)}.slot-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.crowdedness[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:var(--text-light)}.progress-bar[_ngcontent-%COMP%]{height:6px;background-color:#eee;border-radius:3px;overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background-color:var(--secondary-yellow);transition:width .3s ease}.slot-card.full[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{background-color:#e57373}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.book-btn[_ngcontent-%COMP%]{flex:1;background-color:var(--primary-blue);color:var(--white);border:none;padding:.75rem;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.book-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:color-mix(in srgb,var(--primary-blue),black 10%)}.book-btn[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background-color:#ef5350}.cancel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#d32f2f}.attendees-section[_ngcontent-%COMP%]{margin:10px 0}.toggle-attendees-btn[_ngcontent-%COMP%]{width:100%;background:none;border:1px solid #ddd;border-radius:6px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:.9rem;color:#555;background-color:#fafafa;transition:background .2s}.toggle-attendees-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.chevron[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.chevron.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.attendees-list[_ngcontent-%COMP%]{margin-top:5px;padding:10px;background-color:#f5f7fa;border-radius:6px;font-size:.9rem;border:1px solid #eee}.attendees-title[_ngcontent-%COMP%]{margin:0 0 5px;font-weight:600;color:#555;font-size:.85rem}.attendees-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.attendee-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:4px;border-bottom:1px dotted #ddd;padding-bottom:2px}.attendee-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.attendee-name[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:2px}.attendee-dogs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding-left:10px}.attendee-dog-single[_ngcontent-%COMP%]{font-size:.85rem;color:#444;background-color:#e8f5e9;padding:2px 6px;border-radius:4px;width:fit-content}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--primary-blue)}.dog-selection[_ngcontent-%COMP%]{margin:20px 0}.dog-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.dog-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:#f0f0f0;padding:8px 12px;border-radius:20px;transition:background .2s}.dog-checkbox[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.dog-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.dog-checkbox[_ngcontent-%COMP%]:has(input:checked){background-color:var(--primary-blue);color:#fff}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn-cancel[_ngcontent-%COMP%]{background:none;border:1px solid #ddd;padding:8px 16px;border-radius:6px;cursor:pointer}.btn-confirm[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:700}.btn-confirm[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.no-dogs-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:10px;border-radius:6px;font-size:.9rem;margin-bottom:10px}.no-dogs-warning[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#856404;text-decoration:underline}"]})};var pI=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-contacto"]],decls:47,vars:0,consts:[[1,"contact-container"],[1,"contact-header"],[1,"subtitle"],[1,"contact-wrapper"],[1,"info-column"],[1,"info-card"],[1,"info-item"],[1,"icon-box"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-content"],["href","https://wa.me/34633484345","target","_blank","rel","noopener noreferrer",1,"whatsapp-btn"],[1,"secondary-text","phone-number"],[1,"divider"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],["href","mailto:agilityasturias@gmail.com",1,"email-link"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"map-column"],[1,"map-card"],["src",Kb`https://maps.google.com/maps?q=Agility+Asturias,+Langreo&t=&z=15&ie=UTF8&iwloc=&output=embed`,"width","100%","height","100%","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,r){t&1&&(nt(0,"div",0)(1,"div",1)(2,"h2"),F(3,"Cont\xE1ctanos"),pt(),nt(4,"p",2),F(5,"Estamos deseando conocerte a ti y a tu perro"),pt()(),nt(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),ml(),nt(11,"svg",8),Hi(12,"path",9),pt()(),gl(),nt(13,"div",10)(14,"h3"),F(15,"Tel\xE9fono / WhatsApp"),pt(),nt(16,"a",11),F(17," Chat en WhatsApp "),pt(),nt(18,"p",12),F(19,"633 48 43 45"),pt()()(),Hi(20,"div",13),nt(21,"div",6)(22,"div",7),ml(),nt(23,"svg",8),Hi(24,"path",14)(25,"polyline",15),pt()(),gl(),nt(26,"div",10)(27,"h3"),F(28,"Correo Electr\xF3nico"),pt(),nt(29,"a",16),F(30,"agilityasturias@gmail.com"),pt()()(),Hi(31,"div",13),nt(32,"div",6)(33,"div",7),ml(),nt(34,"svg",8),Hi(35,"path",17)(36,"circle",18),pt()(),gl(),nt(37,"div",10)(38,"h3"),F(39,"Ubicaci\xF3n"),pt(),nt(40,"address"),F(41," Antig\xFCo Campo de f\xFAtbol La Salle"),Hi(42,"br"),F(43," Langreo, Asturias, CP: 33939 "),pt()()()()(),nt(44,"div",19)(45,"div",20),Hi(46,"iframe",21),pt()()()())},styles:[".contact-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.contact-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}h2[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:2.5rem;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--text-light)}.contact-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:stretch}.info-card[_ngcontent-%COMP%]{background:var(--white);padding:2.5rem;border-radius:12px;box-shadow:0 4px 20px #0000000d;height:100%;display:flex;flex-direction:column;justify-content:center}.info-item[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:flex-start}.icon-box[_ngcontent-%COMP%]{background-color:#e3f2fd;color:var(--primary-blue);width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.info-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-light);margin:0 0 .5rem;font-weight:600}.phone-number[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:var(--text-main);margin-top:.5rem;letter-spacing:.5px}.whatsapp-btn[_ngcontent-%COMP%]{display:inline-block;background-color:#25d366;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:500;text-decoration:none;transition:background-color .2s;margin-bottom:.25rem}.whatsapp-btn[_ngcontent-%COMP%]:hover{background-color:#1ebc57}.email-link[_ngcontent-%COMP%]{color:var(--primary-blue);font-size:1.1rem;font-weight:500;text-decoration:none}.email-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.secondary-text[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);margin-top:.25rem}address[_ngcontent-%COMP%]{font-style:normal;color:var(--text-main);line-height:1.6;font-size:1.1rem}.divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:2rem 0}.map-card[_ngcontent-%COMP%]{height:100%;min-height:400px;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000000d}@media(max-width:900px){.contact-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-card[_ngcontent-%COMP%]{min-height:300px}.info-card[_ngcontent-%COMP%]{padding:2rem}}@media(max-width:600px){h2[_ngcontent-%COMP%]{font-size:2rem}.contact-container[_ngcontent-%COMP%]{padding:1rem .5rem}.info-card[_ngcontent-%COMP%]{padding:1.5rem}.info-item[_ngcontent-%COMP%]{gap:1rem}.icon-box[_ngcontent-%COMP%]{width:40px;height:40px}.phone-number[_ngcontent-%COMP%]{font-size:1.25rem}.whatsapp-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};function Ote(n,e){if(n&1){let t=Ne();N(0,"div",5),te("click",function(){let i=ae(t).index,s=Y();return ce(s.openLightbox(i))}),xe(1,"img",6),N(2,"div",7)(3,"span"),F(4),k()()()}if(n&2){let t=e.$implicit;B(),K("src",t.url,nn)("alt",t.alt),B(3),Fe(t.alt)}}function Fte(n,e){if(n&1){let t=Ne();N(0,"div",8),te("click",function(){ae(t);let i=Y();return ce(i.closeLightbox())}),N(1,"div",9),te("click",function(i){return ae(t),ce(i.stopPropagation())}),N(2,"button",10),te("click",function(){ae(t);let i=Y();return ce(i.closeLightbox())}),F(3,"\xD7"),k(),N(4,"button",11),te("click",function(i){ae(t);let s=Y();return ce(s.prevImage(i))}),F(5,"\u276E"),k(),xe(6,"img",12),N(7,"button",13),te("click",function(i){ae(t);let s=Y();return ce(s.nextImage(i))}),F(8,"\u276F"),k(),N(9,"div",14),F(10),k()()()}if(n&2){let t=Y();B(6),K("src",t.images()[t.currentImageIndex()].url,nn)("alt",t.images()[t.currentImageIndex()].alt),B(4),Rt(" ",t.images()[t.currentImageIndex()].alt," ")}}var mI=class n{images=Ee([{url:"Images/Perros/Ana y Pompa.jpeg",alt:"Ana y Pompa"},{url:"Images/Perros/Carysse.jpeg",alt:"Carysse"},{url:"Images/Perros/Cris y Peca.jpeg",alt:"Cris y Peca"},{url:"Images/Perros/Diego Tuco y Ponga.jpeg",alt:"Diego Tuco y Ponga"},{url:"Images/Perros/Fiti\xF1o y Fits.jpeg",alt:"Fiti\xF1o y Fits"},{url:"Images/Perros/Golti.jpeg",alt:"Golti"},{url:"Images/Perros/Helena y Pumba.jpeg",alt:"Helena y Pumba"},{url:"Images/Perros/Jes\xFAs y Ginebra.jpeg",alt:"Jes\xFAs y Ginebra"},{url:"Images/Perros/Kinder.jpeg",alt:"Kinder"},{url:"Images/Perros/Leah.jpeg",alt:"Leah"},{url:"Images/Perros/Lyan y Boo.jpeg",alt:"Lyan y Boo"},{url:"Images/Perros/Lyan y Shaggy.jpeg",alt:"Lyan y Shaggy"},{url:"Images/Perros/Magda y Balto.jpeg",alt:"Magda y Balto"},{url:"Images/Perros/Marina-Chris Dafne.jpeg",alt:"Marina-Chris Dafne"},{url:"Images/Perros/Merle y Noly.jpeg",alt:"Merle y Noly"},{url:"Images/Perros/Moka.jpeg",alt:"Moka"},{url:"Images/Perros/Nala y Rosa.jpeg",alt:"Nala y Rosa"},{url:"Images/Perros/Narcea.jpeg",alt:"Narcea"},{url:"Images/Perros/Pompa.jpeg",alt:"Pompa"},{url:"Images/Perros/Pumba.jpeg",alt:"Pumba"},{url:"Images/Perros/Raylee.jpeg",alt:"Raylee"},{url:"Images/Perros/Sami.jpeg",alt:"Sami"},{url:"Images/Perros/Sami H.jpeg",alt:"Sami H"}]);lightboxOpen=Ee(!1);currentImageIndex=Ee(0);constructor(){this.shuffleImages()}shuffleImages(){let e=this.images();for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}this.images.set([...e])}openLightbox(e){this.currentImageIndex.set(e),this.lightboxOpen.set(!0),document.body.style.overflow="hidden"}closeLightbox(){this.lightboxOpen.set(!1),document.body.style.overflow="auto"}nextImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t+1)%r)}prevImage(e){e?.stopPropagation();let t=this.currentImageIndex(),r=this.images().length;this.currentImageIndex.set((t-1+r)%r)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-galeria"]],decls:8,vars:3,consts:[[1,"gallery-container"],[1,"subtitle"],[1,"gallery-masonry"],["class","gallery-item",3,"click",4,"ngFor","ngForOf"],["class","lightbox",3,"click",4,"ngIf"],[1,"gallery-item",3,"click"],["loading","lazy",3,"src","alt"],[1,"overlay"],[1,"lightbox",3,"click"],[1,"lightbox-content",3,"click"],[1,"close-btn",3,"click"],[1,"nav-btn","prev",3,"click"],[1,"lightbox-img",3,"src","alt"],[1,"nav-btn","next",3,"click"],[1,"lightbox-caption"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"h2"),F(2,"Galer\xEDa"),k(),N(3,"p",1),F(4,"Momentos destacados de nuestro equipo."),k(),N(5,"div",2),pe(6,Ote,5,3,"div",3),k()(),pe(7,Fte,11,3,"div",4)),t&2&&(B(5),K("@listAnimation",r.images().length),B(),K("ngForOf",r.images()),B(),K("ngIf",r.lightboxOpen()))},dependencies:[Wt,Kn,In],styles:[".gallery-container[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:1400px;margin:0 auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--primary-blue);font-size:2.5rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-light);margin-bottom:3rem;font-size:1.1rem}.gallery-masonry[_ngcontent-%COMP%]{column-count:3;column-gap:1.5rem}.gallery-item[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:1.5rem;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;cursor:pointer;position:relative;transition:transform .3s cubic-bezier(.25,.8,.25,1),box-shadow .3s ease}.gallery-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;transition:transform .5s ease}.gallery-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000004d;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.gallery-item[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-weight:600;border:1px solid white;padding:.5rem 1rem;border-radius:20px;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.lightbox[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90vh;display:flex;flex-direction:column;align-items:center}.lightbox-img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;border-radius:4px;box-shadow:0 5px 30px #00000080}.lightbox-caption[_ngcontent-%COMP%]{color:#fff;margin-top:1rem;font-size:1.1rem;font-weight:300}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:none;border:none;color:#fff;font-size:2.5rem;cursor:pointer;line-height:1;padding:0}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#ffffff1a;border:none;color:#fff;font-size:2rem;cursor:pointer;padding:1rem;border-radius:50%;transition:background .2s}.nav-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.prev[_ngcontent-%COMP%]{left:-80px}.next[_ngcontent-%COMP%]{right:-80px}@media(max-width:900px){.gallery-masonry[_ngcontent-%COMP%]{column-count:2}}@media(max-width:600px){.gallery-masonry[_ngcontent-%COMP%]{column-count:1}.nav-btn[_ngcontent-%COMP%]{padding:.5rem;font-size:1.5rem}.prev[_ngcontent-%COMP%]{left:-10px}.next[_ngcontent-%COMP%]{right:-10px}.close-btn[_ngcontent-%COMP%]{top:-30px;right:10px}}"],data:{animation:[y0("listAnimation",[v0("* => *",[E0(":enter",[Oc({opacity:0,transform:"translateY(20px)"}),I0(100,[_0("0.5s ease-out",Oc({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};var Bd=class n{firestore;competitionsSignal=Ee([]);unsubscribe=null;constructor(){let e;try{e=Fr()}catch{e=Ks(Ti.firebase)}this.firestore=lo(e);let t=jr(this.firestore,"competitions");this.unsubscribe=Ad(t,r=>{let i=r.docs.map(s=>j({id:s.id},s.data()));this.competitionsSignal.set(i)},r=>{console.error("Error reading competitions:",r)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}getCompetitions(){return this.competitionsSignal}addCompetition(e){let t=jr(this.firestore,"competitions");return Dd(t,e)}updateCompetition(e){let t=_r(this.firestore,`competitions/${e.id}`),s=e,{id:r}=s,i=jo(s,["id"]);return FE(t,i)}deleteCompetition(e){let t=_r(this.firestore,`competitions/${e}`);return Sd(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function Lte(n,e){if(n&1&&(N(0,"span"),F(1),qi(2,"date"),k()),n&2){let t=Y().$implicit;B(),Fe(zi(2,1,t.date,"d"))}}function Vte(n,e){if(n&1){let t=Ne();N(0,"div",17),te("click",function(){let i=ae(t).$implicit,s=Y(2);return ce(i.isCompetition&&s.openModal(i.competitionDetails))}),pe(1,Lte,3,4,"span",18),k()}if(n&2){let t=e.$implicit;En("other-month",t.isOtherMonth)("weekend",t.isWeekend)("competition",t.isCompetition)("today",t.isToday),B(),K("ngIf",!t.isOtherMonth)}}function Ute(n,e){if(n&1&&(N(0,"div",13)(1,"h2"),F(2),k(),N(3,"div",14)(4,"span"),F(5,"L"),k(),N(6,"span"),F(7,"M"),k(),N(8,"span"),F(9,"X"),k(),N(10,"span"),F(11,"J"),k(),N(12,"span"),F(13,"V"),k(),N(14,"span"),F(15,"S"),k(),N(16,"span"),F(17,"D"),k()(),N(18,"div",15),pe(19,Vte,2,9,"div",16),k()()),n&2){let t=e.$implicit;B(2),Fe(t.name),B(17),K("ngForOf",t.days)}}function jte(n,e){if(n&1){let t=Ne();N(0,"div",36)(1,"img",37),te("click",function(){ae(t);let i=Y(3);return ce(i.expandImage())}),k(),N(2,"div",38),F(3,"Click para ampliar"),k()()}if(n&2){let t=Y(3);B(),K("src",t.selectedCompetition.cartel,nn)}}function Bte(n,e){if(n&1&&(N(0,"div",23)(1,"div",24)(2,"h3"),F(3),k(),N(4,"div",25),F(5),qi(6,"date"),k()(),N(7,"div",26)(8,"div",27)(9,"div",28)(10,"span",29),F(11,"Cierre Inscripci\xF3n"),k(),N(12,"span",30),F(13),qi(14,"date"),k()(),N(15,"div",31)(16,"span",29),F(17,"Forma de Pago"),k(),N(18,"div",32),F(19),k()()(),pe(20,jte,4,1,"div",33),k(),N(21,"div",34)(22,"a",35),F(23," Inscribirse Ahora "),k()()()),n&2){let t=Y(2);B(3),Fe(t.selectedCompetition.lugar),B(2),Rt(" ",zi(6,6,t.selectedCompetition.fechaEvento,"d MMM")," "),B(8),Fe(zi(14,9,t.selectedCompetition.fechaLimite,"shortDate")),B(6),Fe(t.selectedCompetition.formaPago),B(),K("ngIf",t.selectedCompetition.cartel),B(2),K("href",t.selectedCompetition.enlace,nn)}}function $te(n,e){if(n&1){let t=Ne();N(0,"div",19),te("click",function(){ae(t);let i=Y();return ce(i.closeModal())}),N(1,"div",20),te("click",function(i){return ae(t),ce(i.stopPropagation())}),N(2,"button",21),te("click",function(){ae(t);let i=Y();return ce(i.closeModal())}),F(3,"\xD7"),k(),pe(4,Bte,24,12,"div",22),k()()}if(n&2){let t=Y();B(4),K("ngIf",t.selectedCompetition)}}function Hte(n,e){if(n&1){let t=Ne();N(0,"div",39),te("click",function(){ae(t);let i=Y();return ce(i.closeImage())}),N(1,"button",40),F(2,"\xD7"),k(),N(3,"div",41),xe(4,"img",42),k()()}if(n&2){let t=Y();B(4),K("src",t.selectedCompetition.cartel,nn)}}var gI=class n{constructor(e){this.competitionService=e;this.competitions=this.competitionService.getCompetitions()}currentYear=Ee(new Date().getFullYear());monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];competitions;months=Nn(()=>{let e=[],t=this.competitions(),r=this.currentYear();for(let i=0;i<12;i++)e.push({name:this.monthNames[i],days:this.getDaysInMonth(i,r,t)});return e});changeYear(e){this.currentYear.update(t=>t+e)}selectedCompetition=null;isModalOpen=!1;getDaysInMonth(e,t,r){let i=[],s=new Date(t,e,1),o=(s.getDay()+6)%7,a=new Date;for(let c=0;c<o;c++)i.push({date:new Date(t,e,-c),isCompetition:!1,isWeekend:!1,isOtherMonth:!0,isToday:!1});for(;s.getMonth()===e;){let c=s.getDay(),d=c===0||c===6,h=s.getFullYear(),m=(s.getMonth()+1).toString().padStart(2,"0"),y=s.getDate().toString().padStart(2,"0"),C=`${h}-${m}-${y}`,R=r.find($=>$.fechaEvento===C),P=!!R,x=s.getDate()===a.getDate()&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear();i.push({date:new Date(s),isCompetition:P,isWeekend:d,isOtherMonth:!1,isToday:x,competitionDetails:R}),s.setDate(s.getDate()+1)}return i}openModal(e){e&&(this.selectedCompetition=e,this.isModalOpen=!0,document.body.style.overflow="hidden")}closeModal(){this.isModalOpen=!1,this.selectedCompetition=null,this.isImageExpanded=!1,document.body.style.overflow="auto"}isImageExpanded=!1;expandImage(){this.isImageExpanded=!0}closeImage(){this.isImageExpanded=!1}static \u0275fac=function(t){return new(t||n)(he(Bd))};static \u0275cmp=ft({type:n,selectors:[["app-calendario"]],decls:24,vars:4,consts:[[1,"calendar-container"],[1,"calendar-header"],[1,"year-navigation"],[1,"nav-btn",3,"click"],[1,"material-icons-outlined"],[1,"calendar-legend"],[1,"legend-item"],[1,"dot","competition-dot"],[1,"dot","today-dot"],[1,"months-grid"],["class","month-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","image-overlay",3,"click",4,"ngIf"],[1,"month-card"],[1,"weekdays"],[1,"days-grid"],["class","day",3,"other-month","weekend","competition","today","click",4,"ngFor","ngForOf"],[1,"day",3,"click"],[4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content","glass-effect",3,"click"],[1,"close-btn",3,"click"],["class","competition-details",4,"ngIf"],[1,"competition-details"],[1,"modal-header"],[1,"modal-date-badge"],[1,"modal-body"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-item","full-width"],[1,"payment-info"],["class","poster-container",4,"ngIf"],[1,"modal-actions"],["target","_blank",1,"btn-register",3,"href"],[1,"poster-container"],["alt","Cartel","title","Click para ampliar",1,"modal-poster",3,"click","src"],[1,"expand-hint"],[1,"image-overlay",3,"click"],[1,"close-overlay-btn"],[1,"image-wrapper"],["alt","Cartel Ampliado",3,"src"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),te("click",function(){return r.changeYear(-1)}),N(4,"span",4),F(5,"<"),k()(),N(6,"h1"),F(7),k(),N(8,"button",3),te("click",function(){return r.changeYear(1)}),N(9,"span",4),F(10,">"),k()()(),N(11,"div",5)(12,"div",6),xe(13,"span",7),N(14,"span"),F(15,"Competici\xF3n"),k()(),N(16,"div",6),xe(17,"span",8),N(18,"span"),F(19,"Hoy"),k()()()(),N(20,"div",9),pe(21,Ute,20,2,"div",10),k(),pe(22,$te,5,1,"div",11)(23,Hte,5,1,"div",12),k()),t&2&&(B(7),Fe(r.currentYear()),B(14),K("ngForOf",r.months()),B(),K("ngIf",r.isModalOpen),B(),K("ngIf",r.isImageExpanded))},dependencies:[Wt,Kn,In,Dc],styles:["[_nghost-%COMP%]{display:block;--primary-color: #003366;--primary-dark: #001f3f;--accent-color: #FFCC00;--text-color: #333;--text-light: #666;--bg-light: #f4f7f9;--card-bg: #ffffff;--weekend-bg: #f8f9fa;--competition-bg: linear-gradient(135deg, #003366 0%, #00509e 100%);--shadow-sm: 0 4px 6px rgba(0, 0, 0, .05);--shadow-md: 0 8px 15px rgba(0, 0, 0, .1);--shadow-lg: 0 20px 40px rgba(0, 0, 0, .2);--radius: 12px}.calendar-container[_ngcontent-%COMP%]{padding:2rem 1rem;max-width:1400px;margin:0 auto;font-family:Outfit,Segoe UI,sans-serif;color:var(--text-color)}.calendar-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:3rem;gap:1.5rem}.year-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;background:#fff;padding:.75rem 1.5rem;border-radius:50px;box-shadow:var(--shadow-sm)}.year-navigation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--primary-color);margin:0;line-height:1}.nav-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:var(--text-light);transition:all .2sease;display:flex;align-items:center;justify-content:center;padding:.5rem;border-radius:50%}.nav-btn[_ngcontent-%COMP%]:hover{background-color:#f0f4f8;color:var(--primary-color);transform:scale(1.1)}.calendar-legend[_ngcontent-%COMP%]{display:flex;gap:1.5rem;background:#fff;padding:.75rem 1.5rem;border-radius:50px;box-shadow:var(--shadow-sm);font-size:.9rem;font-weight:500}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.competition-dot[_ngcontent-%COMP%]{background:var(--competition-bg)}.today-dot[_ngcontent-%COMP%]{border:2px solid var(--accent-color)}.months-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:2rem}.month-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow-sm);transition:transform .3s ease,box-shadow .3s ease;border:1px solid rgba(0,0,0,.03)}.month-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-md)}.month-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.25rem;margin:0 0 1.25rem;text-transform:capitalize;font-weight:600;text-align:center;border-bottom:2px solid #f0f0f0;padding-bottom:.75rem}.weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:.75rem;text-align:center;font-size:.85rem;font-weight:700;color:#999;text-transform:uppercase;letter-spacing:1px}.days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}.day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border-radius:8px;font-size:.95rem;font-weight:500;position:relative;cursor:default;transition:all .2s ease;color:var(--text-color)}.day[_ngcontent-%COMP%]:not(.other-month):not(.competition):hover{background-color:#f0f4f8}.other-month[_ngcontent-%COMP%]{color:#e0e0e0}.weekend[_ngcontent-%COMP%]{color:#888;background-color:var(--weekend-bg);border-radius:50%}.today[_ngcontent-%COMP%]{border:2px solid var(--accent-color);border-radius:50%;font-weight:700;position:relative;z-index:1}.competition[_ngcontent-%COMP%]{background:var(--competition-bg);color:#fff;cursor:pointer;font-weight:700;box-shadow:0 3px 8px #0033664d}.competition[_ngcontent-%COMP%]:hover{transform:scale(1.15);z-index:2;box-shadow:0 6px 12px #0366}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00142899;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_fadeIn .3s cubic-bezier(.16,1,.3,1);padding:1rem}.modal-content.glass-effect[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);padding:2.5rem;border-radius:20px;width:100%;max-width:550px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:var(--shadow-lg);animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.16,1,.3,1);border:1px solid rgba(255,255,255,.2)}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1.25rem;right:1.25rem;background:#f0f0f0;border:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#666;cursor:pointer;transition:all .2s;z-index:10}.close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#000;transform:rotate(90deg)}.modal-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding-right:2rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .75rem;color:var(--primary-color);font-size:1.75rem;line-height:1.2}.modal-date-badge[_ngcontent-%COMP%]{display:inline-block;background:var(--accent-color);color:var(--primary-dark);font-weight:700;padding:.4rem 1rem;border-radius:20px;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.modal-body[_ngcontent-%COMP%]{margin-bottom:2rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.8rem;text-transform:uppercase;color:#888;margin-bottom:.25rem;font-weight:600}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:var(--text-color)}.info-item.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.payment-info[_ngcontent-%COMP%]{font-family:inherit;white-space:pre-wrap;background:#f8fbff;padding:1rem;border-radius:8px;font-size:.95rem;color:var(--primary-dark);border-left:4px solid var(--primary-color)}.poster-container[_ngcontent-%COMP%]{position:relative;margin-top:1.5rem;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-md)}.poster-container[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-lg)}.modal-poster[_ngcontent-%COMP%]{width:100%;max-height:350px;object-fit:cover;display:block;cursor:zoom-in;transition:transform .4s ease}.poster-container[_ngcontent-%COMP%]:hover   .modal-poster[_ngcontent-%COMP%]{transform:scale(1.03)}.expand-hint[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:.5rem;background:#0009;color:#fff;text-align:center;font-size:.8rem;opacity:0;transition:opacity .3s;pointer-events:none}.poster-container[_ngcontent-%COMP%]:hover   .expand-hint[_ngcontent-%COMP%]{opacity:1}.modal-actions[_ngcontent-%COMP%]{text-align:center}.btn-register[_ngcontent-%COMP%]{display:inline-block;width:100%;background:var(--competition-bg);color:#fff;padding:1rem;border-radius:50px;text-decoration:none;font-weight:700;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #0033664d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0366}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000f2;z-index:2000;display:flex;justify-content:center;align-items:center;cursor:zoom-out;animation:_ngcontent-%COMP%_fadeIn .3s ease}.close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem;background:none;border:none;color:#fff;font-size:3rem;cursor:pointer;opacity:.7;transition:opacity .2s}.close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:8px;box-shadow:0 0 50px #00000080}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@media(max-width:768px){.calendar-container[_ngcontent-%COMP%]{padding:1rem}.calendar-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.year-navigation[_ngcontent-%COMP%], .calendar-legend[_ngcontent-%COMP%]{width:100%;justify-content:center}.months-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-content.glass-effect[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var rm=n=>({"is-invalid":n});function qte(n,e){if(n&1){let t=Ne();N(0,"button",7),te("click",function(){ae(t);let i=Y();return ce(i.initNewCompetition())}),N(1,"span"),F(2,"+"),k(),F(3," Nueva Competici\xF3n "),k()}}function zte(n,e){if(n&1){let t=Ne();N(0,"button",8),te("click",function(){ae(t);let i=Y();return ce(i.toggleView())}),F(1," \u2190 Volver al Listado "),k()}}function Gte(n,e){if(n&1){let t=Ne();N(0,"tr")(1,"td")(2,"strong"),F(3),k()(),N(4,"td"),F(5),qi(6,"date"),k(),N(7,"td"),F(8),qi(9,"date"),k(),N(10,"td",15)(11,"button",16),te("click",function(){let i=ae(t).$implicit,s=Y(2);return ce(s.editCompetition(i))}),F(12," Editar "),k(),N(13,"button",17),te("click",function(){let i=ae(t).$implicit,s=Y(2);return ce(s.deleteCompetition(i.id))}),F(14," Eliminar "),k()()()}if(n&2){let t=e.$implicit;B(3),Fe(t.lugar),B(2),Fe(zi(6,3,t.fechaEvento,"dd/MM/yyyy")),B(3),Fe(zi(9,6,t.fechaLimite,"dd/MM/yyyy"))}}function Wte(n,e){n&1&&(N(0,"tr")(1,"td",18),F(2," No hay competiciones registradas actualmente. "),k()())}function Kte(n,e){if(n&1&&(N(0,"div",9)(1,"div",10)(2,"table",11)(3,"thead")(4,"tr")(5,"th"),F(6,"Lugar"),k(),N(7,"th"),F(8,"Fecha Evento"),k(),N(9,"th"),F(10,"Cierre Inscripci\xF3n"),k(),N(11,"th",12),F(12,"Acciones"),k()()(),N(13,"tbody"),pe(14,Gte,15,9,"tr",13)(15,Wte,3,0,"tr",14),k()()()()),n&2){let t=Y();B(14),K("ngForOf",t.competitions()),B(),K("ngIf",t.competitions().length===0)}}function Qte(n,e){n&1&&(N(0,"div",42),F(1," El lugar del evento es requerido. "),k())}function Yte(n,e){n&1&&(N(0,"div",42),F(1," La fecha del evento es requerida. "),k())}function Jte(n,e){n&1&&(N(0,"div",42),F(1," La fecha l\xEDmite es requerida. "),k())}function Xte(n,e){n&1&&(N(0,"div",42),F(1," La forma de pago es requerida. "),k())}function Zte(n,e){n&1&&(N(0,"div",42),F(1," Se requiere una URL v\xE1lida (http:// o https://). "),k())}function ene(n,e){if(n&1&&(N(0,"div",43),xe(1,"img",44),k()),n&2){let t=Y(2);B(),K("src",t.f.cartel.value,nn)}}function tne(n,e){if(n&1){let t=Ne();N(0,"div",19)(1,"h3",20),F(2),k(),N(3,"form",21),te("ngSubmit",function(){ae(t);let i=Y();return ce(i.onSubmit())}),N(4,"div",22)(5,"label",23),F(6,"Lugar del Evento"),k(),xe(7,"input",24),pe(8,Qte,2,0,"div",25),k(),N(9,"div",26)(10,"div",27)(11,"label",28),F(12,"Fecha Evento"),k(),xe(13,"input",29),pe(14,Yte,2,0,"div",25),k(),N(15,"div",27)(16,"label",30),F(17,"Fecha L\xEDmite de Inscripci\xF3n"),k(),xe(18,"input",31),pe(19,Jte,2,0,"div",25),k()(),N(20,"div",22)(21,"label",32),F(22,"Forma de Pago"),k(),xe(23,"textarea",33),pe(24,Xte,2,0,"div",25),k(),N(25,"div",22)(26,"label",34),F(27,"Enlace Inscripci\xF3n"),k(),xe(28,"input",35),pe(29,Zte,2,0,"div",25),k(),N(30,"div",22)(31,"label",36),F(32,"Cartel (Imagen)"),k(),N(33,"input",37),te("change",function(i){ae(t);let s=Y();return ce(s.onFileSelected(i))}),k(),pe(34,ene,2,1,"div",38),k(),N(35,"div",39)(36,"button",40),F(37),k(),N(38,"button",41),te("click",function(){ae(t);let i=Y();return ce(i.toggleView())}),F(39," Cancelar "),k()()()()}if(n&2){let t=Y();B(2),Fe(t.isEditing()?"Editar Competici\xF3n":"Nueva Competici\xF3n"),B(),K("formGroup",t.competitionForm),B(4),K("ngClass",bc(14,rm,t.submitted&&t.f.lugar.errors)),B(),K("ngIf",t.submitted&&t.f.lugar.errors),B(5),K("ngClass",bc(16,rm,t.submitted&&t.f.fechaEvento.errors)),B(),K("ngIf",t.submitted&&t.f.fechaEvento.errors),B(4),K("ngClass",bc(18,rm,t.submitted&&t.f.fechaLimite.errors)),B(),K("ngIf",t.submitted&&t.f.fechaLimite.errors),B(4),K("ngClass",bc(20,rm,t.submitted&&t.f.formaPago.errors)),B(),K("ngIf",t.submitted&&t.f.formaPago.errors),B(4),K("ngClass",bc(22,rm,t.submitted&&t.f.enlace.errors)),B(),K("ngIf",t.submitted&&t.f.enlace.errors),B(5),K("ngIf",t.f.cartel.value),B(3),Rt(" ",t.isEditing()?"Guardar Cambios":"Crear Competici\xF3n"," ")}}function nne(n,e){if(n&1){let t=Ne();N(0,"div",45)(1,"div",46)(2,"h3"),F(3,"Eliminar Competici\xF3n"),k(),N(4,"p"),F(5,"\xBFEst\xE1s seguro de que deseas eliminar esta competici\xF3n? Esta acci\xF3n no se puede deshacer."),k(),N(6,"div",47)(7,"button",8),te("click",function(){ae(t);let i=Y();return ce(i.cancelDelete())}),F(8,"Cancelar"),k(),N(9,"button",48),te("click",function(){ae(t);let i=Y();return ce(i.confirmDelete())}),F(10,"Eliminar"),k()()()()}}var yI=class n{constructor(e,t){this.fb=e;this.competitionService=t;this.competitions=this.competitionService.getCompetitions(),this.competitionForm=this.fb.group({lugar:["",yo.required],fechaEvento:["",yo.required],fechaLimite:["",yo.required],formaPago:["",yo.required],enlace:["",[yo.required,yo.pattern("https?://.+")]],cartel:[null]})}toastService=U(ms);competitions;isEditing=Ee(!1);showForm=Ee(!1);competitionForm;submitted=!1;currentCompetitionId=null;showDeleteModal=Ee(!1);competitionToDeleteId=null;get f(){return this.competitionForm.controls}toggleView(){this.showForm.update(e=>!e),this.showForm()||this.resetForm()}initNewCompetition(){this.resetForm(),this.showForm.set(!0),this.isEditing.set(!1)}existingCartel=null;editCompetition(e){this.currentCompetitionId=e.id,this.existingCartel=e.cartel,this.competitionForm.patchValue({lugar:e.lugar,fechaEvento:e.fechaEvento,fechaLimite:e.fechaLimite,formaPago:e.formaPago,enlace:e.enlace}),this.showForm.set(!0),this.isEditing.set(!0)}deleteCompetition(e){this.competitionToDeleteId=e,this.showDeleteModal.set(!0)}confirmDelete(){this.competitionToDeleteId&&this.competitionService.deleteCompetition(this.competitionToDeleteId).then(()=>{this.toastService.success("Competici\xF3n eliminada correctamente"),this.cancelDelete()}).catch(e=>{console.error(e),this.toastService.error("Error al eliminar la competici\xF3n"),this.cancelDelete()})}cancelDelete(){this.showDeleteModal.set(!1),this.competitionToDeleteId=null}async onFileSelected(e){let t=e.target.files[0];if(t)try{let r=await this.compressImage(t);if(r.length>800*1024){this.toastService.warning("La imagen sigue siendo demasiado pesada incluso despues de comprimir. Por favor, elige otra.");return}this.competitionForm.patchValue({cartel:r})}catch(r){console.error("Error handling image:",r),this.toastService.error("Hubo un error al procesar la imagen.")}}compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target.result,o.onload=()=>{let a=document.createElement("canvas"),c=a.getContext("2d"),d=800,h=800,m=o.width,y=o.height;if(m>y?m>d&&(y*=d/m,m=d):y>h&&(m*=h/y,y=h),a.width=m,a.height=y,c){c.drawImage(o,0,0,m,y);let C=a.toDataURL("image/jpeg",.7);t(C)}else r(new Error("Could not get canvas context"))},o.onerror=a=>r(a)},i.onerror=s=>r(s)})}onFileChange(e){this.onFileSelected(e)}async onSubmit(){if(this.submitted=!0,this.competitionForm.invalid)return;let e=this.competitionForm.value,t=e.cartel||(this.isEditing()?this.existingCartel:null),r=se(j({},e),{cartel:t});this.isEditing()&&this.currentCompetitionId?(await this.competitionService.updateCompetition(j({id:this.currentCompetitionId},r)),this.toastService.success("Competici\xF3n actualizada")):(await this.competitionService.addCompetition(r),this.toastService.success("Competici\xF3n creada")),this.toggleView()}resetForm(){this.submitted=!1,this.currentCompetitionId=null,this.existingCartel=null,this.competitionForm.reset()}static \u0275fac=function(t){return new(t||n)(he(l4),he(Bd))};static \u0275cmp=ft({type:n,selectors:[["app-crud-competicion"]],decls:9,vars:5,consts:[[1,"crud-container"],[1,"header"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","list-view",4,"ngIf"],["class","form-view",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"list-view"],[1,"table-responsive"],[1,"table"],[2,"width","150px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"actions"],["title","Editar",1,"btn-icon","edit",3,"click"],["title","Eliminar",1,"btn-icon","delete",3,"click"],["colspan","4",1,"empty-msg"],[1,"form-view"],[1,"form-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","lugar"],["type","text","id","lugar","formControlName","lugar","placeholder","Ej: Polideportivo Gij\xF3n",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-row"],[1,"form-group","col"],["for","fechaEvento"],["type","date","id","fechaEvento","formControlName","fechaEvento",1,"form-control",3,"ngClass"],["for","fechaLimite"],["type","date","id","fechaLimite","formControlName","fechaLimite",1,"form-control",3,"ngClass"],["for","formaPago"],["id","formaPago","formControlName","formaPago","rows","3","placeholder","Instrucciones de pago...",1,"form-control",3,"ngClass"],["for","enlace"],["type","url","id","enlace","formControlName","enlace","placeholder","https://...",1,"form-control",3,"ngClass"],["for","cartel"],["type","file","id","cartel","accept","image/*",1,"form-control",3,"change"],["class","mt-2",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"invalid-feedback"],[1,"mt-2"],["alt","Preview",2,"max-height","150px","border-radius","4px","box-shadow","0 2px 4px rgba(0,0,0,0.1)",3,"src"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-actions"],[1,"btn","btn-icon","delete",2,"background","#f8d7da","color","#721c24","border-color","#f5c6cb","padding","0.75rem 1.5rem",3,"click"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"h2"),F(3,"Gesti\xF3n de Competiciones"),k(),pe(4,qte,4,0,"button",2)(5,zte,2,0,"button",3),k(),pe(6,Kte,16,2,"div",4)(7,tne,40,24,"div",5),k(),pe(8,nne,11,0,"div",6)),t&2&&(B(4),K("ngIf",!r.showForm()),B(),K("ngIf",r.showForm()),B(),K("ngIf",!r.showForm()),B(),K("ngIf",r.showForm()),B(),K("ngIf",r.showDeleteModal()))},dependencies:[Wt,lf,Kn,In,d4,a4,Ud,aI,e4,cP,aP,Dc],styles:[`.crud-container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:2.5rem;background:#fff;border-radius:12px;box-shadow:0 8px 24px #0033661a;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem;padding-bottom:1rem;border-bottom:2px solid #f0f2f5}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--primary-blue, #003366);font-weight:700}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:.95rem;transition:all .2s ease;display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#036,#004080);color:#fff;box-shadow:0 4px 6px #0363}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#004080,#00509e);box-shadow:0 6px 8px #00336640}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e6ea;color:#212529}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 4px 6px #28a74533}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);box-shadow:0 6px 8px #28a74540}.btn-cancel[_ngcontent-%COMP%]{background:transparent;color:#6c757d;border:1px solid #ced4da;margin-left:.75rem}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#343a40;border-color:#adb5bd}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e9ecef}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1rem;text-align:left;border-bottom:1px solid #e9ecef}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:3rem!important}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{padding:.4rem .8rem;border:1px solid #dee2e6;background:#fff;border-radius:4px;cursor:pointer;font-size:.85rem;transition:all .2s;color:#495057}.btn-icon.edit[_ngcontent-%COMP%]:hover{background:#fff3cd;color:#856404;border-color:#ffeeba}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#f8d7da;color:#721c24;border-color:#f5c6cb}.form-view[_ngcontent-%COMP%]{background:#f8f9fa;padding:2rem;border-radius:8px;border:1px solid #e9ecef;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:var(--primary-blue, #003366);font-size:1.4rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-group.col[_ngcontent-%COMP%]{flex:1}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#343a40;font-size:.95rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:6px;font-size:1rem;transition:border-color .2s,box-shadow .2s;box-sizing:border-box;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#004080;box-shadow:0 0 0 3px #0040801a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5zM6 8.2a.3.3 0 110-.6.3.3 0 010 .6z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;align-items:center}@media(max-width:768px){.crud-container[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.btn[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-top:.5rem;justify-content:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 25px #0003;text-align:center;position:relative;border:1px solid rgba(0,0,0,.1)}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc3545;margin-top:0}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#495057;margin-bottom:2rem;line-height:1.5}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}`]})};function rne(n,e){n&1&&(N(0,"div",13)(1,"p"),F(2,"A\xFAn no has a\xF1adido ning\xFAn perro."),k()())}function ine(n,e){if(n&1){let t=Ne();N(0,"div",14)(1,"div",15),F(2,"\u{1F415}"),k(),N(3,"div",16)(4,"span",17),F(5),k()(),N(6,"button",18),te("click",function(){let i=ae(t).$implicit,s=Y(2);return ce(s.deleteDog(i.id))}),F(7,"\u{1F5D1}\uFE0F"),k()()}if(n&2){let t=e.$implicit;B(5),Fe(t.name)}}function sne(n,e){if(n&1){let t=Ne();N(0,"div",1)(1,"div",2),xe(2,"img",3),N(3,"div",4)(4,"h2"),F(5),k(),N(6,"p"),F(7),k()()(),N(8,"div",5)(9,"h3"),F(10,"\u{1F436} Mis Perretes"),k(),N(11,"p",6),F(12,"A\xF1ade aqu\xED a tus compa\xF1eros de Agility."),k(),N(13,"div",7)(14,"input",8),Iy("ngModelChange",function(i){ae(t);let s=Y();return TT(s.newDogName,i)||(s.newDogName=i),ce(i)}),te("keyup.enter",function(){ae(t);let i=Y();return ce(i.addDog())}),k(),N(15,"button",9),te("click",function(){ae(t);let i=Y();return ce(i.addDog())}),F(16," A\xF1adir Perro "),k()(),N(17,"div",10),pe(18,rne,3,0,"div",11)(19,ine,8,1,"div",12),k()()()}if(n&2){let t=e.ngIf,r=Y();B(2),K("src",t.photoURL||"assets/default-user.png",nn),B(3),Fe(t.displayName),B(2),Fe(t.email),B(7),Ey("ngModel",r.newDogName),B(),K("disabled",!r.newDogName().trim()),B(3),K("ngIf",r.dogs().length===0),B(),K("ngForOf",r.dogs())}}var _I=class n{authService=U(hn);dogService=U(jd);newDogName=Ee("");dogs=this.dogService.getDogs();constructor(){pc(()=>{let e=this.authService.currentUserSignal();e&&this.dogService.subscribeToUserDogs(e.uid)})}async addDog(){if(!this.newDogName().trim())return;let e=this.authService.currentUserSignal();if(e)try{await this.dogService.addDog({userId:e.uid,name:this.newDogName(),createdAt:Date.now()}),this.newDogName.set("")}catch(t){console.error("Error adding dog:",t)}}async deleteDog(e){confirm("\xBFSeguro que quieres eliminar a este perrete?")&&await this.dogService.deleteDog(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-perfil"]],decls:1,vars:1,consts:[["class","perfil-container",4,"ngIf"],[1,"perfil-container"],[1,"profile-header"],["alt","Avatar",1,"profile-avatar",3,"src"],[1,"profile-info"],[1,"dogs-section"],[1,"section-desc"],[1,"add-dog-form"],["type","text","placeholder","Nombre de tu perro...",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-add",3,"click","disabled"],[1,"dogs-list"],["class","empty-state",4,"ngIf"],["class","dog-card",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"dog-card"],[1,"dog-icon"],[1,"dog-info"],[1,"dog-name"],["title","Eliminar",1,"btn-delete",3,"click"]],template:function(t,r){t&1&&pe(0,sne,20,7,"div",0),t&2&&K("ngIf",r.authService.currentUserSignal())},dependencies:[Wt,Kn,In,dI,Ud,aI,oP],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding-bottom:2rem;border-bottom:1px solid #eee;margin-bottom:2rem}.profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:3px solid var(--accent-orange);flex-shrink:0}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--primary-blue);word-break:break-word}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666;word-break:break-all}.dogs-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.5rem}.section-desc[_ngcontent-%COMP%]{color:#777;margin-bottom:1.5rem}.add-dog-form[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:2rem}.add-dog-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #ddd;border-radius:6px;font-size:1rem;min-width:0}.btn-add[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:#fff;border:none;padding:0 20px;border-radius:6px;cursor:pointer;font-weight:700;transition:background .2s;white-space:nowrap}.btn-add[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#004494}.btn-add[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.dogs-list[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(100%,1fr))}.dog-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f9f9f9;padding:15px;border-radius:8px;border:1px solid #eee;transition:transform .2s}.dog-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#ddd}.dog-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:15px;background-color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;box-shadow:0 2px 4px #0000000d;flex-shrink:0}.dog-info[_ngcontent-%COMP%]{flex:1;min-width:0}.dog-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#333;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.2rem;opacity:.6;transition:opacity .2s;padding:10px}.btn-delete[_ngcontent-%COMP%]:hover{opacity:1}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;font-style:italic;background-color:#f9f9f9;border-radius:8px}@media(max-width:600px){.perfil-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.add-dog-form[_ngcontent-%COMP%]{flex-direction:column}.btn-add[_ngcontent-%COMP%]{width:100%;padding:12px}.dogs-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var vI=async(n,e)=>{let t=U(hn),r=U(li);return await t.getAuthState()?!0:(r.navigate(["/login"]),!1)};var p4=async(n,e)=>{let t=U(hn),r=U(li);return t.checkAuthLoading()&&await gh(B_(t.checkAuthLoading).pipe(kt(i=>!i))),t.isStaff()?!0:(r.navigate(["/"]),!1)};var m4=async(n,e)=>{let t=U(hn),r=U(li);return t.checkAuthLoading()&&await gh(B_(t.checkAuthLoading).pipe(kt(i=>!i))),t.isAdmin()?!0:(r.navigate(["/"]),!1)};function one(n,e){if(n&1){let t=Ne();N(0,"tr")(1,"td",7),xe(2,"img",8),N(3,"span"),F(4),k()(),N(5,"td"),F(6),k(),N(7,"td")(8,"span",9),F(9),k()(),N(10,"td")(11,"select",10),te("change",function(i){let s=ae(t).$implicit,o=Y(2);return ce(o.updateRole(s,i.target.value))}),N(12,"option",11),F(13,"Usuario"),k(),N(14,"option",12),F(15,"Staff"),k(),N(16,"option",13),F(17,"Admin"),k()()()()}if(n&2){let t=e.$implicit;B(2),K("src",t.photoURL||"assets/default-avatar.png",nn),B(2),Fe(t.displayName),B(2),Fe(t.email),B(2),bT(t.role),B(),Fe(t.role),B(2),K("value",t.role)}}function ane(n,e){if(n&1&&(N(0,"div",5)(1,"table")(2,"thead")(3,"tr")(4,"th"),F(5,"Usuario"),k(),N(6,"th"),F(7,"Email"),k(),N(8,"th"),F(9,"Rol Actual"),k(),N(10,"th"),F(11,"Acciones"),k()()(),N(12,"tbody"),pe(13,one,18,7,"tr",6),k()()()),n&2){let t=Y();B(13),K("ngForOf",t.users())}}function cne(n,e){n&1&&(N(0,"div",14),xe(1,"div",15),N(2,"p"),F(3,"Cargando usuarios..."),k()())}var EI=class n{authService=U(hn);toastService=U(ms);users=Ee([]);loading=Ee(!0);async ngOnInit(){await this.loadUsers()}async loadUsers(){this.loading.set(!0);try{let e=await this.authService.getAllUsers();this.users.set(e)}catch(e){console.error("Error loading users",e),this.toastService.error("Error al cargar usuarios")}finally{this.loading.set(!1)}}async updateRole(e,t){if(e.role!==t)try{let r=t;await this.authService.updateUserRole(e.uid,r),this.users.update(i=>i.map(s=>s.uid===e.uid?se(j({},s),{role:r}):s)),this.toastService.success(`Rol de ${e.displayName} actualizado a ${r}`)}catch(r){console.error("Error updating role",r),this.toastService.error("Error al actualizar rol")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-admin-usuarios"]],decls:10,vars:3,consts:[["loader",""],[1,"admin-container"],[1,"header"],[1,"stats"],["class","table-container glass-effect",4,"ngIf","ngIfElse"],[1,"table-container","glass-effect"],[4,"ngFor","ngForOf"],[1,"user-cell"],["alt","Avatar",1,"avatar",3,"src"],[1,"badge"],[1,"role-select",3,"change","value"],["value","user"],["value","staff"],["value","admin"],[1,"loader-container"],[1,"spinner"]],template:function(t,r){if(t&1&&(N(0,"div",1)(1,"div",2)(2,"h1"),F(3,"Gesti\xF3n de Usuarios"),k(),N(4,"div",3)(5,"span"),F(6),k()()(),pe(7,ane,14,1,"div",4)(8,cne,4,0,"ng-template",null,0,tf),k()),t&2){let i=Zh(9);B(6),Rt("Total: ",r.users().length),B(),K("ngIf",!r.loading())("ngIfElse",i)}},dependencies:[Wt,Kn,In],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;padding-top:80px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding-bottom:2rem}.admin-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{color:#036;font-size:2.5rem;margin:0}.glass-effect[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:1rem;box-shadow:0 8px 32px #1f268726;border:1px solid rgba(255,255,255,.18);overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #eee}th[_ngcontent-%COMP%]{font-weight:600;color:#666;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-weight:500;color:#333}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;background:#eee}.badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.85rem;font-weight:600;text-transform:uppercase}.badge.user[_ngcontent-%COMP%]{background:#e0e0e0;color:#555}.badge.staff[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.badge.admin[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.role-select[_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;border:1px solid #ccc;background:#fff;cursor:pointer;font-family:inherit;font-size:.9rem;color:#333;transition:all .2s}.role-select[_ngcontent-%COMP%]:hover{border-color:#036}.role-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#036;box-shadow:0 0 0 2px #0033661a}.loader-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #003366;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var g4=[{path:"",component:XE},{path:"reservas",component:fI,canActivate:[vI]},{path:"contacto",component:pI},{path:"galeria",component:mI},{path:"calendario",component:gI,canActivate:[vI]},{path:"gestionar-competiciones",component:yI,canActivate:[p4]},{path:"perfil",component:_I,canActivate:[vI]},{path:"admin/usuarios",component:EI,canActivate:[m4]},{path:"login",component:JE}];jM(NB);SC(Ti.firebase);var y4={providers:[cb(),zO(),g0(g4),{provide:Tc,useValue:"es"},TF(()=>SC(Ti.firebase)),gB(()=>yB()),UV(()=>jV()),RB(()=>PB()),{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:eC.PROVIDER_ID,provider:new eC("YOUR_GOOGLE_CLIENT_ID")}],onError:n=>{console.error(n)}}},QO("ngsw-worker.js",{enabled:!rf(),registrationStrategy:"registerWhenStable:30000"})]};function une(n,e){if(n&1){let t=Ne();N(0,"li")(1,"a",13),te("click",function(){ae(t);let i=Y();return ce(i.closeMenu())}),F(2,"Reservas"),k()()}}function lne(n,e){if(n&1){let t=Ne();N(0,"li")(1,"a",14),te("click",function(){ae(t);let i=Y();return ce(i.closeMenu())}),F(2,"Calendario"),k()()}}function dne(n,e){if(n&1){let t=Ne();N(0,"li")(1,"a",15),te("click",function(){ae(t);let i=Y();return ce(i.closeMenu())}),F(2,"Competiciones"),k()()}}function hne(n,e){if(n&1){let t=Ne();N(0,"a",16),te("click",function(){ae(t);let i=Y();return ce(i.closeMenu())}),F(1," Iniciar Sesi\xF3n "),k()}}function fne(n,e){if(n&1&&xe(0,"img",32),n&2){let t=Y().ngIf;K("src",t.photoURL,nn)}}function pne(n,e){if(n&1&&(N(0,"div",33),F(1),k()),n&2){let t=Y().ngIf;B(),Rt(" ",(t.displayName==null?null:t.displayName.charAt(0))||"U"," ")}}function mne(n,e){n&1&&xe(0,"div",25)}function gne(n,e){if(n&1){let t=Ne();N(0,"a",34),te("click",function(){ae(t);let i=Y(2);return ce(i.closeMenu())}),F(1," \u{1F465} Administrar Usuarios "),k()}}function yne(n,e){if(n&1){let t=Ne();N(0,"div",35),te("click",function(){ae(t);let i=Y(2);return ce(i.closeMenu())}),k()}}function _ne(n,e){if(n&1){let t=Ne();N(0,"div",17)(1,"button",18),te("click",function(i){ae(t);let s=Y();return ce(s.toggleUserMenu(i))}),pe(2,fne,1,1,"img",19)(3,pne,2,1,"ng-template",null,0,tf),N(5,"span",20),F(6,"\u25BC"),k()(),N(7,"div",21)(8,"div",22)(9,"p",23),F(10),k(),N(11,"p",24),F(12),k()(),xe(13,"div",25),N(14,"a",26),te("click",function(){ae(t);let i=Y();return ce(i.closeMenu())}),F(15,"\u{1F436} Mis Perretes"),k(),N(16,"a",27),te("click",function(){ae(t);let i=Y();return ce(i.closeMenu())}),F(17,"\u{1F4C5} Mis Reservas"),k(),pe(18,mne,1,0,"div",28)(19,gne,2,0,"a",29),N(20,"button",30),te("click",function(){ae(t);let i=Y();return ce(i.logout())}),F(21,"\u{1F6AA} Cerrar Sesi\xF3n"),k()(),pe(22,yne,1,0,"div",31),k()}if(n&2){let t=e.ngIf,r=Zh(4),i=Y();B(2),K("ngIf",t.photoURL)("ngIfElse",r),B(5),En("show",i.isUserMenuOpen),B(3),Fe(t.displayName),B(2),Fe(t.email),B(6),K("ngIf",i.authService.isAdmin()),B(),K("ngIf",i.authService.isAdmin()),B(3),K("ngIf",i.isUserMenuOpen)}}var II=class n{isMenuOpen=!1;isUserMenuOpen=!1;authService=U(hn);toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1,this.isUserMenuOpen=!1}toggleUserMenu(e){e&&(e.preventDefault(),e.stopPropagation()),this.isUserMenuOpen=!this.isUserMenuOpen}async logout(){await this.authService.logout(),this.closeMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-navbar"]],decls:26,vars:9,consts:[["defaultAvatar",""],[1,"app-header"],[1,"logo-area"],[1,"mobile-menu-btn",3,"click"],[1,"bar"],["src","Images/Agility_Asturias_logo.jpg","alt","Agility Asturias Logo",1,"nav-logo"],["routerLink","/",3,"click"],[4,"ngIf"],["routerLink","/galeria",3,"click"],["routerLink","/contacto",3,"click"],[1,"auth-item"],["routerLink","/login","class","login-btn",3,"click",4,"ngIf"],["class","user-dropdown-container",4,"ngIf"],["routerLink","/reservas",3,"click"],["routerLink","/calendario",3,"click"],["routerLink","/gestionar-competiciones",3,"click"],["routerLink","/login",1,"login-btn",3,"click"],[1,"user-dropdown-container"],[1,"user-avatar-btn",3,"click"],["alt","User","class","nav-user-img","referrerpolicy","no-referrer",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-arrow"],[1,"user-dropdown-menu"],[1,"user-header"],[1,"name"],[1,"email"],[1,"dropdown-divider"],["routerLink","/perfil",1,"dropdown-item",3,"click"],["routerLink","/reservas",1,"dropdown-item",3,"click"],["class","dropdown-divider",4,"ngIf"],["routerLink","/admin/usuarios","class","dropdown-item admin-item",3,"click",4,"ngIf"],[1,"dropdown-item","logout-item",3,"click"],["class","dropdown-backdrop",3,"click",4,"ngIf"],["alt","User","referrerpolicy","no-referrer",1,"nav-user-img",3,"src"],[1,"nav-user-img","default-avatar-placeholder"],["routerLink","/admin/usuarios",1,"dropdown-item","admin-item",3,"click"],[1,"dropdown-backdrop",3,"click"]],template:function(t,r){t&1&&(N(0,"header",1)(1,"div",2)(2,"button",3),te("click",function(){return r.toggleMenu()}),xe(3,"span",4)(4,"span",4)(5,"span",4),k(),xe(6,"img",5),N(7,"h1"),F(8,"Agility Asturias"),k()(),N(9,"nav")(10,"ul")(11,"li")(12,"a",6),te("click",function(){return r.closeMenu()}),F(13,"Home"),k()(),pe(14,une,3,0,"li",7),N(15,"li")(16,"a",8),te("click",function(){return r.closeMenu()}),F(17,"Galer\xEDa"),k()(),pe(18,lne,3,0,"li",7)(19,dne,3,0,"li",7),N(20,"li")(21,"a",9),te("click",function(){return r.closeMenu()}),F(22,"Contacto"),k()(),N(23,"li",10),pe(24,hne,2,0,"a",11)(25,_ne,23,9,"div",12),k()()()()),t&2&&(B(2),En("active",r.isMenuOpen),B(8),En("active",r.isMenuOpen),B(4),K("ngIf",r.authService.currentUserSignal()),B(4),K("ngIf",r.authService.currentUserSignal()),B(),K("ngIf",r.authService.isStaff()),B(5),K("ngIf",!r.authService.currentUserSignal()),B(),K("ngIf",r.authService.currentUserSignal()))},dependencies:[h_,Wt,In],styles:[".app-header[_ngcontent-%COMP%]{background-color:var(--primary-blue);color:var(--white);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000;box-shadow:0 2px 4px #0000001a}.logo-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.nav-logo[_ngcontent-%COMP%]{height:40px;width:auto;border-radius:4px}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);margin:0;font-size:1.5rem}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;gap:1.5rem;align-items:center}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--white);font-weight:500;text-decoration:none;transition:color .2s}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}.auth-item[_ngcontent-%COMP%]{margin-left:20px;position:relative}.login-btn[_ngcontent-%COMP%]{background-color:#ffffff26;padding:8px 16px;border-radius:20px;border:1px solid rgba(255,255,255,.3);transition:all .2s}.login-btn[_ngcontent-%COMP%]:hover{background-color:var(--white);color:var(--primary-blue)!important}.user-dropdown-container[_ngcontent-%COMP%]{position:relative}.user-avatar-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;gap:8px}.nav-user-img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid white}.default-avatar-placeholder[_ngcontent-%COMP%]{background-color:var(--accent-orange);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;text-transform:uppercase}.dropdown-arrow[_ngcontent-%COMP%]{color:#fff;font-size:10px}.user-dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:120%;right:0;background:#fff;color:#333;min-width:200px;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:8px 0;display:none;flex-direction:column;z-index:1001;animation:_ngcontent-%COMP%_fadeIn .1s ease-out}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f8f9fa}.user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:14px;color:#333}.user-header[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#eee;margin:4px 0}.dropdown-item[_ngcontent-%COMP%]{padding:10px 16px;text-align:left;background:none;border:none;width:100%;cursor:pointer;color:#444!important;font-size:14px;transition:background .2s;display:block;box-sizing:border-box}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:var(--primary-blue)!important}.logout-item[_ngcontent-%COMP%]{color:#dc3545!important}.logout-item[_ngcontent-%COMP%]:hover{background-color:#fff1f2;color:#dc3545!important}.dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mobile-menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:space-between;width:30px;height:21px;background:transparent;border:none;cursor:pointer;padding:0;z-index:10}.mobile-menu-btn[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:100%;height:3px;background-color:var(--white);border-radius:3px;transition:all .3s ease-in-out}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(1){transform:translateY(9px) rotate(45deg)}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){opacity:0}.mobile-menu-btn.active[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-9px) rotate(-45deg)}@media(max-width:768px){.app-header[_ngcontent-%COMP%]{padding:1rem}.logo-area[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.mobile-menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;flex-direction:column;width:100%;position:absolute;top:100%;left:0;background-color:var(--primary-blue);padding:1rem 0;box-shadow:0 4px 6px #0000001a;z-index:9;align-items:stretch}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 2rem;width:100%}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.auth-item[_ngcontent-%COMP%]{margin:10px 0 0;padding:10px 2rem;border-top:1px solid rgba(255,255,255,.1)}.login-btn[_ngcontent-%COMP%]{display:block;text-align:center;width:100%}.user-dropdown-menu[_ngcontent-%COMP%]{position:static;display:none;width:100%;box-shadow:none;border-radius:0;margin-top:10px}.user-dropdown-menu.show[_ngcontent-%COMP%]{display:flex}.user-avatar-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;color:#fff}}"]})};var vne=(n,e)=>e.id;function Ene(n,e){n&1&&(N(0,"span"),F(1,"\u2713"),k())}function Ine(n,e){n&1&&(N(0,"span"),F(1,"\u2715"),k())}function wne(n,e){n&1&&(N(0,"span"),F(1,"\u26A0"),k())}function bne(n,e){n&1&&(N(0,"span"),F(1,"\u2139"),k())}function Tne(n,e){if(n&1){let t=Ne();N(0,"div",2),te("click",function(){let i=ae(t).$implicit,s=Y();return ce(s.toastService.remove(i.id))}),N(1,"div",3),yT(2,Ene,2,0,"span")(3,Ine,2,0,"span")(4,wne,2,0,"span")(5,bne,2,0,"span"),k(),N(6,"div",4),F(7),k()()}if(n&2){let t=e.$implicit;K("ngClass",t.type),B(2),vT(t.type==="success"?2:t.type==="error"?3:t.type==="warning"?4:5),B(5),Rt(" ",t.message," ")}}var wI=class n{toastService=U(ms);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast",3,"click","ngClass"],[1,"toast-icon"],[1,"toast-content"]],template:function(t,r){t&1&&(N(0,"div",0),ET(1,Tne,8,3,"div",1,vne),k()),t&2&&(B(),IT(r.toastService.toasts()))},dependencies:[Wt,lf],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;pointer-events:none}.toast[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:16px 24px;min-width:300px;max-width:400px;box-shadow:0 8px 32px #0000001a;display:flex;align-items:center;gap:12px;animation:_ngcontent-%COMP%_slideIn .3s ease-out;pointer-events:auto;cursor:pointer;border-left:6px solid #ccc;transition:transform .2s,opacity .2s}.toast[_ngcontent-%COMP%]:hover{transform:translateY(-2px);opacity:.95}.toast.success[_ngcontent-%COMP%]{border-left-color:#10b981}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#10b981;background:#10b9811a}.toast.error[_ngcontent-%COMP%]{border-left-color:#ef4444}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#ef4444;background:#ef44441a}.toast.warning[_ngcontent-%COMP%]{border-left-color:#f59e0b}.toast.warning[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#f59e0b;background:#f59e0b1a}.toast.info[_ngcontent-%COMP%]{border-left-color:#3b82f6}.toast.info[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#3b82f6;background:#3b82f61a}.toast-icon[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-family:monospace}.toast-content[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:.95rem}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})};var bI=class n{title=Ee("AgilityAsturias");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-container"]],template:function(t,r){t&1&&(N(0,"div",0),xe(1,"app-navbar"),N(2,"main"),xe(3,"router-outlet"),k(),N(4,"footer")(5,"p"),F(6,"\xA9 2026 Agility Asturias"),k()(),xe(7,"app-toast"),k())},dependencies:[Pf,II,wI],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:var(--container-width);margin:0 auto;width:100%}footer[_ngcontent-%COMP%]{text-align:center;padding:1rem;background-color:#e0e0e0;font-size:.875rem}"]})};zT(bI,y4).catch(n=>console.error(n));
